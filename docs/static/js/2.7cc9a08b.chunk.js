/*! For license information please see 2.7cc9a08b.chunk.js.LICENSE.txt */
(this.webpackJsonpminer=this.webpackJsonpminer||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(345)},function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"w",(function(){return h})),n.d(t,"x",(function(){return m})),n.d(t,"kb",(function(){return v})),n.d(t,"O",(function(){return g})),n.d(t,"gb",(function(){return y})),n.d(t,"r",(function(){return b})),n.d(t,"K",(function(){return C})),n.d(t,"d",(function(){return w})),n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return S})),n.d(t,"N",(function(){return j})),n.d(t,"jb",(function(){return A})),n.d(t,"Q",(function(){return L})),n.d(t,"R",(function(){return B})),n.d(t,"S",(function(){return W})),n.d(t,"T",(function(){return U})),n.d(t,"lb",(function(){return H})),n.d(t,"mb",(function(){return q})),n.d(t,"nb",(function(){return G})),n.d(t,"ob",(function(){return $})),n.d(t,"V",(function(){return K})),n.d(t,"hb",(function(){return X})),n.d(t,"i",(function(){return Y})),n.d(t,"j",(function(){return J})),n.d(t,"k",(function(){return Q})),n.d(t,"l",(function(){return ee})),n.d(t,"m",(function(){return te})),n.d(t,"n",(function(){return o})),n.d(t,"o",(function(){return ne})),n.d(t,"p",(function(){return re})),n.d(t,"q",(function(){return ie})),n.d(t,"s",(function(){return se})),n.d(t,"t",(function(){return d})),n.d(t,"u",(function(){return ce})),n.d(t,"v",(function(){return oe})),n.d(t,"y",(function(){return le})),n.d(t,"z",(function(){return fe})),n.d(t,"A",(function(){return s})),n.d(t,"B",(function(){return de})),n.d(t,"C",(function(){return pe})),n.d(t,"D",(function(){return Z})),n.d(t,"E",(function(){return he})),n.d(t,"F",(function(){return c})),n.d(t,"G",(function(){return me})),n.d(t,"H",(function(){return l})),n.d(t,"I",(function(){return ve})),n.d(t,"J",(function(){return ge})),n.d(t,"L",(function(){return ye})),n.d(t,"M",(function(){return be})),n.d(t,"P",(function(){return we})),n.d(t,"U",(function(){return N})),n.d(t,"W",(function(){return xe})),n.d(t,"X",(function(){return Oe})),n.d(t,"Y",(function(){return u})),n.d(t,"Z",(function(){return f})),n.d(t,"ab",(function(){return ke})),n.d(t,"bb",(function(){return Se})),n.d(t,"cb",(function(){return R})),n.d(t,"eb",(function(){return Ce})),n.d(t,"db",(function(){return _e})),n.d(t,"fb",(function(){return je})),n.d(t,"ib",(function(){return Ae}));var r=function(e,t,n){return e.fields=t||[],e.fname=n,e};function i(e){return null==e?null:e.fname}function a(e){return null==e?null:e.fields}var o=function(e){throw Error(e)},u=function(e){var t,n,r,i=[],a=null,u=0,s=e.length,c="";function l(){i.push(c+e.substring(t,n)),c="",t=n+1}for(e+="",t=n=0;n<s;++n)if("\\"===(r=e[n]))c+=e.substring(t,n),c+=e.substring(++n,++n),t=n;else if(r===a)l(),a=null,u=-1;else{if(a)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,a=r):"."!==r||u?"["===r?(n>t&&l(),u=t=n+1):"]"===r&&(u||o("Access path missing open bracket: "+e),u>0&&l(),u=0,t=n+1):n>t?l():t=n+1}return u&&o("Access path missing closing bracket: "+e),a&&o("Access path missing closing quote: "+e),n>t&&(n++,l()),i},s=Array.isArray,c=function(e){return e===Object(e)},l=function(e){return"string"===typeof e};function f(e){return s(e)?"["+e.map(f)+"]":c(e)||l(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var d=function(e,t){var n=u(e),i="return _["+n.map(f).join("][")+"];";return r(Function("_",i),[e=1===n.length?n[0]:e],t||e)},p=[],h=d("id"),m=r((function(e){return e}),p,"identity"),v=r((function(){return 0}),p,"zero"),g=r((function(){return 1}),p,"one"),y=r((function(){return!0}),p,"true"),b=r((function(){return!1}),p,"false");function x(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var w=0,O=1,k=2,E=3,S=4,C=function(e,t){var n=e||w;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=O&&x(t||"error","ERROR",arguments),this},warn:function(){return n>=k&&x(t||"warn","WARN",arguments),this},info:function(){return n>=E&&x(t||"log","INFO",arguments),this},debug:function(){return n>=S&&x(t||"log","DEBUG",arguments),this}}},_=function(e){return"__proto__"!==e};function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=T(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;A(e,n,t[n],r)}return e}),{})}function A(e,t,n,r){var i,a;if(_(t))if(c(n)&&!s(n))for(i in a=c(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?A(a,i,n[i]):_(i)&&(a[i]=n[i]);else e[t]=n}function T(e,t){if(null==e)return t;var n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}var N=function(e){return e[e.length-1]},R=function(e){return null==e||""===e?null:+e};function D(e){return function(t){return e*Math.exp(t)}}function I(e){return function(t){return Math.log(e*t)}}function M(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function F(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function P(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function z(e,t,n,r){var i=n(e[0]),a=n(N(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function L(e,t){return z(e,t,R,m)}function B(e,t){var n=Math.sign(e[0]);return z(e,t,I(n),D(n))}function W(e,t,n){return z(e,t,P(n),P(1/n))}function U(e,t,n){return z(e,t,M(n),F(n))}function V(e,t,n,r,i){var a=r(e[0]),o=r(N(e)),u=null!=t?r(t):(a+o)/2;return[i(u+(a-u)*n),i(u+(o-u)*n)]}function H(e,t,n){return V(e,t,n,R,m)}function q(e,t,n){var r=Math.sign(e[0]);return V(e,t,n,I(r),D(r))}function G(e,t,n,r){return V(e,t,n,P(r),P(1/r))}function $(e,t,n,r){return V(e,t,n,M(r),F(r))}function K(e){return 1+~~(new Date(e).getMonth()/3)}function X(e){return 1+~~(new Date(e).getUTCMonth()/3)}var Y=function(e){return null!=e?s(e)?e:[e]:[]},J=function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]},Z=function(e){return"function"===typeof e},Q=function(e,t){var n,i,o,s,c,l,d,p,h,m=[],v=(e=Y(e)).map((function(e,t){return null==e?null:(m.push(t),Z(e)?e:u(e).map(f).join("]["))})),g=m.length-1,y=Y(t),b="var u,v;return ";if(g<0)return null;for(i=0;i<=g;++i)o=v[n=m[i]],Z(o)?(s="(u=this."+(l="f"+n)+"(a))",c="(v=this."+l+"(b))",(d=d||{})[l]=o):(s="(u=a["+o+"])",c="(v=b["+o+"])"),l="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?(h=1,p=-1):(h=-1,p=1),b+="("+s+"<"+c+"||u==null)&&v!=null?"+p+":(u>v||v==null)&&u!=null?"+h+":"+l+"!==u&&v===v?"+p+":v!==v&&u===u?"+h+(n<g?":":":0");return o=Function("a","b",b+";"),d&&(o=o.bind(d)),e=e.reduce((function(e,t){return Z(t)?(a(t)||[]).forEach((function(t){e[t]=1})):null!=t&&(e[t+""]=1),e}),{}),r(o,Object.keys(e))},ee=function(e){return Z(e)?e:function(){return e}},te=function(e,t){var n,r;function i(){t(r),n=r=null}return function(t){r=t,n&&clearTimeout(n),n=setTimeout(i,e)}},ne=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e},re=function(e,t){var n,r,i,a,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(i=a=r;o<n;++o)null!=(r=e[o])&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(i=a=r;o<n;++o)null!=(r=t(e[o]))&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]},ie=function(e,t){var n,r,i,a,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(null!=(r=e[u])&&r>=r){n=i=r;break}if(u===s)return[-1,-1];for(a=o=u;++u<s;)null!=(r=e[u])&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=t(e[u],u,e))&&r>=r){n=i=r;break}if(u===s)return[-1,-1];for(a=o=u;++u<s;)null!=(r=t(e[u],u,e))&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]},ae=Object.prototype.hasOwnProperty,oe=function(e,t){return ae.call(e,t)},ue={},se=function(e){var t,n,r={};function i(e){return oe(r,e)&&r[e]!==ue}return t={size:0,empty:0,object:r,has:i,get:function(e){return i(e)?r[e]:void 0},set:function(e,n){return i(e)||(++t.size,r[e]===ue&&--t.empty),r[e]=n,this},delete:function(e){return i(e)&&(--t.size,++t.empty,r[e]=ue),this},clear:function(){t.size=t.empty=0,t.object=r={}},test:function(e){return arguments.length?(n=e,t):n},clean:function(){var e,i,a={},o=0;for(e in r)(i=r[e])===ue||n&&n(i)||(a[e]=i,++o);t.size=o,t.empty=0,t.object=r=a}},e&&Object.keys(e).forEach((function(n){t.set(n,e[n])})),t},ce=function(e,t,n,r,i,a){if(!n&&0!==n)return a;var o,u,s=e[0],c=N(e),l=+n;return c<s&&(o=s,s=c,c=o),(o=Math.abs(t-s))<(u=Math.abs(c-t))&&o<=l?r:u<=l?i:a},le=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},fe=function(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)},de=function(e){return"boolean"===typeof e},pe=function(e){return"[object Date]"===Object.prototype.toString.call(e)},he=function(e){return"number"===typeof e},me=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},ve=function(e,t){e&&(e=t?Y(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):Y(e));var n=e&&e.length?Function("_","return ''+"+e.map((function(e){return"_["+(t?f(e):u(e).map(f).join("]["))+"]"})).join("+'|'+")+";"):function(){return""};return r(n,e,"key")},ge=function(e,t){var n=e[0],r=N(e),i=+t;return i?1===i?r:n+i*(r-n):n},ye=function(e){var t,n,r;e=+e||1e4;var i=function(){t={},n={},r=0},a=function(i,a){return++r>e&&(n=t,t={},r=1),t[i]=a};return i(),{clear:i,has:function(e){return oe(t,e)||oe(n,e)},get:function(e){return oe(t,e)?t[e]:oe(n,e)?a(e,n[e]):void 0},set:function(e,n){return oe(t,e)?t[e]=n:a(e,n)}}},be=function(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),u=0,s=0,c=0;u<i&&s<a;++c)o[c]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<i;++u,++c)o[c]=t[u];for(;s<a;++s,++c)o[c]=n[s];return o},xe=function(e,t){for(var n="";--t>=0;)n+=e;return n},we=function(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?xe(i,o)+a:"center"===r?xe(i,~~(o/2))+a+xe(i,Math.ceil(o/2)):a+xe(i,o)},Oe=function(e){return e&&N(e)-e[0]||0},ke=function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e};function Ee(e){return he(e)||pe(e)?e:Date.parse(e)}var Se=function(e,t){return t=t||Ee,null==e||""===e?null:t(e)},Ce=function(e){return null==e||""===e?null:e+""},_e=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t},je=function(e,t,n,r){var i=null!=r?r:"\u2026",a=e+"",o=a.length,u=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i},Ae=function(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}}},function(e,t,n){"use strict";(function(e,r,i,a){n.d(t,"a",(function(){return xp})),n.d(t,"b",(function(){return wp})),n.d(t,"c",(function(){return Op})),n.d(t,"d",(function(){return kp})),n.d(t,"e",(function(){return xr})),n.d(t,"f",(function(){return wr})),n.d(t,"g",(function(){return jr})),n.d(t,"h",(function(){return sa})),n.d(t,"i",(function(){return Or})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return l})),n.d(t,"l",(function(){return Dr})),n.d(t,"m",(function(){return kr})),n.d(t,"n",(function(){return Tr})),n.d(t,"o",(function(){return ca})),n.d(t,"p",(function(){return Ir})),n.d(t,"q",(function(){return Sp})),n.d(t,"r",(function(){return _r})),n.d(t,"s",(function(){return Ar})),n.d(t,"t",(function(){return bp})),n.d(t,"u",(function(){return Rr})),n.d(t,"v",(function(){return Cp})),n.d(t,"w",(function(){return Ee})),n.d(t,"x",(function(){return af})),n.d(t,"y",(function(){return Ep})),n.d(t,"z",(function(){return Sr})),n.d(t,"A",(function(){return Er})),n.d(t,"B",(function(){return ke})),n.d(t,"C",(function(){return be})),n.d(t,"D",(function(){return Nr})),n.d(t,"E",(function(){return Cr})),n.d(t,"F",(function(){return Te})),n.d(t,"G",(function(){return Lr})),n.d(t,"H",(function(){return Br})),n.d(t,"I",(function(){return Wr})),n.d(t,"J",(function(){return Mr})),n.d(t,"K",(function(){return Ts})),n.d(t,"L",(function(){return bi})),n.d(t,"M",(function(){return kl})),n.d(t,"N",(function(){return El})),n.d(t,"O",(function(){return Sl})),n.d(t,"P",(function(){return Cl})),n.d(t,"Q",(function(){return Ur})),n.d(t,"R",(function(){return Vr})),n.d(t,"S",(function(){return Hr})),n.d(t,"T",(function(){return xi})),n.d(t,"U",(function(){return qr})),n.d(t,"V",(function(){return dl})),n.d(t,"W",(function(){return ml})),n.d(t,"X",(function(){return dn})),n.d(t,"Y",(function(){return Ca})),n.d(t,"Z",(function(){return Ul})),n.d(t,"ab",(function(){return Fs})),n.d(t,"bb",(function(){return Ls})),n.d(t,"cb",(function(){return Us})),n.d(t,"db",(function(){return qs})),n.d(t,"eb",(function(){return Ms})),n.d(t,"fb",(function(){return zs})),n.d(t,"gb",(function(){return Ws})),n.d(t,"hb",(function(){return Hs})),n.d(t,"ib",(function(){return ir})),n.d(t,"jb",(function(){return Bc})),n.d(t,"kb",(function(){return Gs})),n.d(t,"lb",(function(){return dp})),n.d(t,"mb",(function(){return nr})),n.d(t,"nb",(function(){return ar})),n.d(t,"ob",(function(){return Gr})),n.d(t,"pb",(function(){return $r})),n.d(t,"qb",(function(){return $s})),n.d(t,"rb",(function(){return Tn})),n.d(t,"sb",(function(){return Yn})),n.d(t,"tb",(function(){return Jn})),n.d(t,"ub",(function(){return Zn})),n.d(t,"vb",(function(){return Qn})),n.d(t,"wb",(function(){return er})),n.d(t,"xb",(function(){return Hc})),n.d(t,"yb",(function(){return qc})),n.d(t,"zb",(function(){return Qc})),n.d(t,"Ab",(function(){return Gc})),n.d(t,"Bb",(function(){return el})),n.d(t,"Cb",(function(){return Kr})),n.d(t,"Db",(function(){return Xr})),n.d(t,"Eb",(function(){return or})),n.d(t,"Fb",(function(){return ra})),n.d(t,"Gb",(function(){return Xt})),n.d(t,"Hb",(function(){return ur})),n.d(t,"Ib",(function(){return Xc})),n.d(t,"Jb",(function(){return tf})),n.d(t,"Kb",(function(){return Kt})),n.d(t,"Lb",(function(){return tn})),n.d(t,"Mb",(function(){return Yt})),n.d(t,"Nb",(function(){return Fi})),n.d(t,"Ob",(function(){return ec})),n.d(t,"Pb",(function(){return wi})),n.d(t,"Qb",(function(){return nl})),n.d(t,"Rb",(function(){return nf})),n.d(t,"Sb",(function(){return Il})),n.d(t,"Tb",(function(){return $t})),n.d(t,"Ub",(function(){return Gt})),n.d(t,"Vb",(function(){return Jt})),n.d(t,"Wb",(function(){return d})),n.d(t,"Xb",(function(){return Ec})),n.d(t,"Yb",(function(){return Sc})),n.d(t,"Zb",(function(){return Yr})),n.d(t,"ac",(function(){return Jr})),n.d(t,"bc",(function(){return sr})),n.d(t,"cc",(function(){return Zr})),n.d(t,"dc",(function(){return nc})),n.d(t,"ec",(function(){return Kl})),n.d(t,"fc",(function(){return qn})),n.d(t,"gc",(function(){return cn})),n.d(t,"hc",(function(){return ln})),n.d(t,"ic",(function(){return Qr})),n.d(t,"jc",(function(){return Oi})),n.d(t,"kc",(function(){return sf})),n.d(t,"lc",(function(){return Wf})),n.d(t,"mc",(function(){return zc})),n.d(t,"nc",(function(){return ef})),n.d(t,"oc",(function(){return zi})),n.d(t,"pc",(function(){return un})),n.d(t,"qc",(function(){return g})),n.d(t,"rc",(function(){return v})),n.d(t,"sc",(function(){return y})),n.d(t,"tc",(function(){return Zi})),n.d(t,"uc",(function(){return Qi})),n.d(t,"vc",(function(){return Cc})),n.d(t,"wc",(function(){return _c})),n.d(t,"xc",(function(){return jc})),n.d(t,"yc",(function(){return Ac})),n.d(t,"zc",(function(){return uf})),n.d(t,"Ac",(function(){return of})),n.d(t,"Bc",(function(){return Xl})),n.d(t,"Cc",(function(){return Rn})),n.d(t,"Dc",(function(){return Df})),n.d(t,"Ec",(function(){return ff})),n.d(t,"Fc",(function(){return sp})),n.d(t,"Gc",(function(){return Jl})),n.d(t,"Hc",(function(){return fi})),n.d(t,"Ic",(function(){return li})),n.d(t,"Jc",(function(){return ci})),n.d(t,"Kc",(function(){return nn})),n.d(t,"Lc",(function(){return Ml})),n.d(t,"Mc",(function(){return Tc})),n.d(t,"Nc",(function(){return Nc})),n.d(t,"Oc",(function(){return Rc})),n.d(t,"Pc",(function(){return Dc})),n.d(t,"Qc",(function(){return Cf})),n.d(t,"Rc",(function(){return Gn})),n.d(t,"Sc",(function(){return Bl})),n.d(t,"Tc",(function(){return ei})),n.d(t,"Uc",(function(){return ti})),n.d(t,"Vc",(function(){return ni})),n.d(t,"Wc",(function(){return oa})),n.d(t,"Xc",(function(){return _l})),n.d(t,"Yc",(function(){return Ks})),n.d(t,"Zc",(function(){return Xs})),n.d(t,"ad",(function(){return Ys})),n.d(t,"bd",(function(){return Js})),n.d(t,"cd",(function(){return wf})),n.d(t,"dd",(function(){return tl})),n.d(t,"ed",(function(){return lp})),n.d(t,"fd",(function(){return jl})),n.d(t,"gd",(function(){return fl})),n.d(t,"hd",(function(){return hl})),n.d(t,"id",(function(){return vl})),n.d(t,"jd",(function(){return ki})),n.d(t,"kd",(function(){return Ei})),n.d(t,"ld",(function(){return Al})),n.d(t,"md",(function(){return Zt})),n.d(t,"nd",(function(){return Tl})),n.d(t,"od",(function(){return Si})),n.d(t,"pd",(function(){return Ci})),n.d(t,"qd",(function(){return _i})),n.d(t,"rd",(function(){return ji})),n.d(t,"sd",(function(){return Nl})),n.d(t,"td",(function(){return Hl})),n.d(t,"ud",(function(){return Ai})),n.d(t,"vd",(function(){return Ti})),n.d(t,"wd",(function(){return Vl})),n.d(t,"xd",(function(){return rc})),n.d(t,"yd",(function(){return ri})),n.d(t,"zd",(function(){return Tp})),n.d(t,"Ad",(function(){return Wl})),n.d(t,"Bd",(function(){return Ic})),n.d(t,"Cd",(function(){return Mc})),n.d(t,"Dd",(function(){return ic})),n.d(t,"Ed",(function(){return Vn})),n.d(t,"Fd",(function(){return Kn})),n.d(t,"Gd",(function(){return An})),n.d(t,"Hd",(function(){return rl})),n.d(t,"Id",(function(){return ac})),n.d(t,"Jd",(function(){return oc})),n.d(t,"Kd",(function(){return uc})),n.d(t,"Ld",(function(){return sc})),n.d(t,"Md",(function(){return cc})),n.d(t,"Nd",(function(){return pl})),n.d(t,"Od",(function(){return Ni})),n.d(t,"Pd",(function(){return Ri})),n.d(t,"Qd",(function(){return Fl})),n.d(t,"Rd",(function(){return rr})),n.d(t,"Sd",(function(){return Dl})),n.d(t,"Td",(function(){return Qt})),n.d(t,"Ud",(function(){return lc})),n.d(t,"Vd",(function(){return yc})),n.d(t,"Wd",(function(){return bc})),n.d(t,"Xd",(function(){return xc})),n.d(t,"Yd",(function(){return $n})),n.d(t,"Zd",(function(){return on})),n.d(t,"ae",(function(){return Nn})),n.d(t,"be",(function(){return ii})),n.d(t,"ce",(function(){return fn})),n.d(t,"de",(function(){return x})),n.d(t,"ee",(function(){return b})),n.d(t,"fe",(function(){return Pl})),n.d(t,"ge",(function(){return zl})),n.d(t,"he",(function(){return sn})),n.d(t,"ie",(function(){return cr})),n.d(t,"je",(function(){return il})),n.d(t,"ke",(function(){return al})),n.d(t,"le",(function(){return ol})),n.d(t,"me",(function(){return ul})),n.d(t,"ne",(function(){return sl})),n.d(t,"oe",(function(){return Yl})),n.d(t,"pe",(function(){return ai})),n.d(t,"qe",(function(){return oi})),n.d(t,"re",(function(){return Mn})),n.d(t,"se",(function(){return $l})),n.d(t,"te",(function(){return Vi})),n.d(t,"ue",(function(){return Ll})),n.d(t,"ve",(function(){return Zc})),n.d(t,"we",(function(){return vp})),n.d(t,"xe",(function(){return an})),n.d(t,"ye",(function(){return pn})),n.d(t,"ze",(function(){return hr})),n.d(t,"Ae",(function(){return ui})),n.d(t,"Be",(function(){return si})),n.d(t,"Ce",(function(){return lf})),n.d(t,"De",(function(){return di})),n.d(t,"Ee",(function(){return pi})),n.d(t,"Fe",(function(){return gl})),n.d(t,"Ge",(function(){return yl})),n.d(t,"He",(function(){return bl})),n.d(t,"Ie",(function(){return xl})),n.d(t,"Je",(function(){return wl})),n.d(t,"Ke",(function(){return Ji})),n.d(t,"Le",(function(){return aa})),n.d(t,"Me",(function(){return hi})),n.d(t,"Ne",(function(){return lr})),n.d(t,"Oe",(function(){return Ql})),n.d(t,"Pe",(function(){return Zl})),n.d(t,"Qe",(function(){return tr})),n.d(t,"Re",(function(){return mi})),n.d(t,"Se",(function(){return wc})),n.d(t,"Te",(function(){return Oc})),n.d(t,"Ue",(function(){return Di})),n.d(t,"Ve",(function(){return fr})),n.d(t,"We",(function(){return dr})),n.d(t,"Xe",(function(){return vi})),n.d(t,"Ye",(function(){return cf})),n.d(t,"Ze",(function(){return ql})),n.d(t,"af",(function(){return Ii})),n.d(t,"bf",(function(){return Mi})),n.d(t,"cf",(function(){return Rl})),n.d(t,"df",(function(){return De})),n.d(t,"ef",(function(){return gi})),n.d(t,"ff",(function(){return yi})),n.d(t,"gf",(function(){return Dn})),n.d(t,"hf",(function(){return Fn})),n.d(t,"if",(function(){return Pn})),n.d(t,"jf",(function(){return zn})),n.d(t,"kf",(function(){return Ln})),n.d(t,"lf",(function(){return Bn})),n.d(t,"mf",(function(){return Wn})),n.d(t,"nf",(function(){return ze})),n.d(t,"of",(function(){return hc})),n.d(t,"pf",(function(){return en})),n.d(t,"qf",(function(){return tc})),n.d(t,"rf",(function(){return rn})),n.d(t,"sf",(function(){return Gl})),n.d(t,"tf",(function(){return jp})),n.d(t,"uf",(function(){return ua})),n.d(t,"vf",(function(){return kc})),n.d(t,"wf",(function(){return O})),n.d(t,"xf",(function(){return w})),n.d(t,"yf",(function(){return Lc})),n.d(t,"zf",(function(){return pr})),n.d(t,"Af",(function(){return pe})),n.d(t,"Bf",(function(){return ea})),n.d(t,"Cf",(function(){return ta})),n.d(t,"Df",(function(){return Un})),n.d(t,"Ef",(function(){return na})),n.d(t,"Ff",(function(){return gp})),n.d(t,"Gf",(function(){return yp})),n.d(t,"Hf",(function(){return Zs})),n.d(t,"If",(function(){return Qs})),n.d(t,"Jf",(function(){return Hn})),n.d(t,"Kf",(function(){return Xn}));var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var l=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return f(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],i=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,i)}))}},e}();function f(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function d(){return p}var p=null,h=new Map,m=new Map;function v(e,t){var n=k(e,t);return h.get(n)}function g(e){return m.get(e)}function y(e){for(var t=h.entries(),n=[];;){var r=t.next(),i=r.done,a=r.value;if(i)break;var o=a[0],u=a[1];o.split("_")[0]===e&&n.push(u)}return n}function b(e){var t=e.kernelName,n=e.backendName,r=k(t,n);if(h.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");h.set(r,e)}function x(e){var t=e.kernelName;m.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),m.set(t,e)}function w(e,t){var n=k(e,t);if(!h.has(n))throw new Error("The kernel '"+e+"' for backend '"+t+"' is not registered");h.delete(n)}function O(e){if(!m.has(e))throw new Error("The gradient '"+e+"' for backend is not registered");m.delete(e)}function k(e,t){return t+"_"+e}function E(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function S(e,t,n){return Math.max(e,Math.min(t,n))}function C(e){return e%2==0?e:e+1}function _(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function j(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function A(e,t,n){void 0===n&&(n=""),j(D(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function T(e){j(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function N(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||$(e)&&!n)for(var r=0;r<e.length;++r)N(e[r],t,n);else t.push(e);return t}function R(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function D(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function I(e){return e%1==0}function M(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function F(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function P(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function z(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,i){var a=0;!function o(){if(e())r();else{a++;var u=t(a);null!=n&&a>=n?i():setTimeout(o,u)}}()}))}function L(e,t){for(var n=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function B(e,t){var n=t.length;return j((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),j(e.every((function(e){return I(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function W(e,t){for(var n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||i?null:B(t,e).sort(),o=0,u=0;u<e.length;++u){if(null!=a){if(a[o]===u&&1!==e[u])throw new Error("Can't squeeze axis "+u+" since its dim '"+e[u]+"' is not 1");(null==a[o]||a[o]>u)&&1===e[u]&&(n.push(e[u]),r.push(u)),a[o]<=u&&o++}1!==e[u]&&(n.push(e[u]),r.push(u))}return{newShape:n,keptDims:r}}function U(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function V(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function H(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function q(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function G(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function $(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function K(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function X(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function Y(e){return"string"==typeof e||e instanceof String}function J(e){return"boolean"==typeof e}function Z(e){return"number"==typeof e}function Q(e){return Array.isArray(e)?Q(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":Z(e)?"float32":Y(e)?"string":J(e)?"bool":"float32"}function ee(e){return!!(e&&e.constructor&&e.call&&e.apply)}function te(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function ne(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function re(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=N(e)),n&&H(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)0!==Math.round(e[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function ie(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var i=new Array;if(1===n.length)for(var a=n[0],o=0;o<a;o++)i[o]=r[t+o];else{a=n[0];var u=n.slice(1),s=u.reduce((function(e,t){return e*t}));for(o=0;o<a;o++)i[o]=e(t+o*s,u,r)}return i}(0,e,t)}function ae(e,t){for(var n=oe(e,t),r=0;r<n.length;r++)n[r]=1;return n}function oe(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function ue(){return d().platform.now()}function se(e){e.forEach((function(t){j(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function ce(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",d().platform.encode(e,t)}function le(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",d().platform.decode(e,t)}function fe(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function de(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}var pe=Object.freeze({shuffle:E,clamp:S,nearestLargerEven:C,sum:_,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var i=Number(e[r])-Number(t[r]);n+=i*i}return n},assert:j,assertShapesMatch:A,assertNonNull:T,flatten:N,sizeFromShape:R,isScalarShape:function(e){return 0===e.length},arraysEqual:D,isInt:I,tanh:M,sizeToSquarishShape:F,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return E(t),t},rightPad:P,repeatedTry:z,inferFromImplicitShape:L,parseAxisParam:B,squeezeShape:W,getTypedArrayFromDType:U,getArrayFromDType:V,checkConversionForErrors:H,isValidDtype:q,hasEncodingLoss:G,isTypedArray:$,bytesPerElement:K,bytesFromStringArray:X,isString:Y,isBoolean:J,isNumber:Z,inferDtype:Q,isFunction:ee,nearestDivisor:te,computeStrides:ne,toTypedArray:re,toNestedArray:ie,makeOnesTypedArray:ae,makeZerosTypedArray:oe,now:ue,assertNonNegativeIntegerDimensions:se,fetch:function(e,t){return d().platform.fetch(e,t)},encodeString:ce,decodeString:le,locToIndex:fe,indexToLoc:de}),he=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new me)}return e.prototype.profileKernel=function(e,t,n){var r,i=this,a=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),a.then((function(a){var o="";null!=a.getExtraProfileInfo&&(o=a.getExtraProfileInfo()),i.logger.logKernelProfile(e,n,r,a.kernelMs,t,o)}))}))})),r},e}(),me=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,i,a){var o="number"==typeof r?P(r+"ms",9):r.error,u=P(e,25),s=t.rank,c=t.size,l=P(t.shape.toString(),14),f="";for(var d in i){var p=i[d].shape||t.shape,h=p.length;f+=d+": "+h+"D "+(h>0?p:"")+" "}console.log("%c"+u+"\t%c"+o+"\t%c"+s+"D "+l+"\t%c"+c+"\t%c"+f+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function ve(e,t,n){return P(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":Y(e)?"'"+e+"'":"bool"===n?ge(e):parseFloat(e.toFixed(7)).toString(),t)}function ge(e){return 0===e?"false":"true"}function ye(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var be=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=R(e),null!=n){var i=n.length;j(i===this.size,(function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||V(t,this.size),this.strides=ne(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),j(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var i=this.locToIndex(n);this.values[i]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,i=e;r<i.length;r++){var a=i[r];if(a<0||a>=this.shape[n]){var o="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(o)}n++}for(var u=e[e.length-1],s=0;s<e.length-1;++s)u+=this.strides[s]*e[s];return this.values[u]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return xe().makeTensor(this.values,this.shape,this.dtype)},e}(),xe=null,we=null,Oe=null,ke=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=R(e),this.strides=ne(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),j(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},e.prototype.asType=function(e){return this.throwIfDisposed(),we.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,we.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return we.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,ie(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return ie(this.shape,this.dataSync())},e.prototype.data=function(){return s(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=xe().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return le(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=xe().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return le(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,xe().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(xe().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),we.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),we.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),we.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),we.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),we.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),we.clone(this)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var i=ne(t),a=function(e,t,n,r){var i=R(t),a=r[r.length-1],o=new Array(a).fill(0),u=t.length,s="complex64"===n?ye(e):e;if(u>1)for(var c=0;c<i/a;c++)for(var l=c*a,f=0;f<a;f++)o[f]=Math.max(o[f],ve(s[l+f],0,n).length);return o}(e,t,n,i),o=t.length,u=function e(t,n,r,i,a,o){void 0===o&&(o=!0);var u="complex64"===r?2:1,s=n[0],c=n.length;if(0===c)return"complex64"===r?[ve(ye(t)[0],0,r)]:"bool"===r?[ge(t[0])]:[t[0].toString()];if(1===c){if(s>20){var l=3*u,f=Array.from(t.slice(0,l)),d=Array.from(t.slice((s-3)*u,s*u));return"complex64"===r&&(f=ye(f),d=ye(d)),["["+f.map((function(e,t){return ve(e,a[t],r)})).join(", ")+", ..., "+d.map((function(e,t){return ve(e,a[s-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?ye(t):Array.from(t)).map((function(e,t){return ve(e,a[t],r)})).join(", ")+"]"]}var p=n.slice(1),h=i.slice(1),m=i[0]*u,v=[];if(s>20){for(var g=0;g<3;g++){var y=(b=g*m)+m;v.push.apply(v,e(t.slice(b,y),p,r,h,a,!1))}for(v.push("..."),g=s-3;g<s;g++)y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),p,r,h,a,g===s-1))}else for(g=0;g<s;g++){var b;y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),p,r,h,a,g===s-1))}var x=2===c?",":"";for(v[0]="["+v[0]+x,g=1;g<v.length-1;g++)v[g]=" "+v[g]+x;var w=",\n";for(g=2;g<c;g++)w+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(o?"":w),v}(e,t,n,i,a),s=["Tensor"];return r&&(s.push("  dtype: "+n),s.push("  rank: "+o),s.push("  shape: ["+t+"]"),s.push("  values:")),s.push(u.map((function(e){return"    "+e})).join("\n")),s.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),we.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),we.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),we.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),we.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),we.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),we.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),we.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),we.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),we.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),we.unstack(this,e)},e.prototype.batchNormalization=function(e,t,n,r,i){return void 0===n&&(n=.001),Oe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),we.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),we.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),we.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),we.cast(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),we.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),we.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),we.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),we.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),we.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),we.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),we.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),we.mulStrict(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),we.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),we.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),we.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),we.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),we.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),we.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),we.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),we.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),we.squaredDifferenceStrict(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),we.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),we.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),we.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),we.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),we.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),we.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),we.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),we.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),we.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),we.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),we.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),we.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),we.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),we.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),we.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),we.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),we.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),we.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),we.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),we.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),we.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),we.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),we.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),we.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),we.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),we.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),we.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),we.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),we.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),we.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),we.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),we.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),we.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),we.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),we.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),we.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),we.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),we.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),we.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),we.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),we.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),we.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),we.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),we.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),we.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),we.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),we.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),we.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),we.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),we.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),we.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),we.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),we.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),we.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),we.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),we.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),we.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),we.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),we.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),we.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),we.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),we.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),we.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),we.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,i,a){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),we.conv1d(this,e,t,n,r,i,a)},e.prototype.conv2d=function(e,t,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),we.conv2d(this,e,t,n,r,i,a)},e.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),we.conv2dTranspose(this,e,t,n,r,i)},e.prototype.depthwiseConv2D=function(e,t,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),we.depthwiseConv2d(this,e,t,n,r,i,a)},e.prototype.separableConv2d=function(e,t,n,r,i,a){return void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),we.separableConv2d(this,e,t,n,r,i,a)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),we.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),we.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),we.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),we.pool(this,e,t,n,r,i)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),xe().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),we.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),we.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),we.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),we.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,i,a,o,u){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===u&&(u=0),this.throwIfDisposed(),we.stridedSlice(this,e,t,n,r,i,a,o,u)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),we.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),we.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),we.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),we.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),we.spectral.irfft(this)},e}();Object.defineProperty(ke,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Ee,Se,Ce,_e,je,Ae,Te=function(e){function t(t,n,r,i){var a=e.call(this,t.shape,t.dtype,t.dataId,i)||this;return a.trainable=n,a.name=r,a}return u(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!D(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");xe().disposeTensor(this),this.dataId=e.dataId,xe().incRef(this,null)},t.prototype.dispose=function(){xe().disposeVariable(this),this.isDisposedInternal=!0},t}(ke);Object.defineProperty(Te,Symbol.hasInstance,{value:function(e){return e instanceof ke&&null!=e.assign&&e.assign instanceof Function}}),(Ae=Ee||(Ee={})).R0="R0",Ae.R1="R1",Ae.R2="R2",Ae.R3="R3",Ae.R4="R4",Ae.R5="R5",Ae.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Se||(Se={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Ce||(Ce={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(_e||(_e={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(je||(je={}));var Ne={float32:_e,int32:Se,bool:Ce,complex64:je};function Re(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Ne[e][t]}function De(e){return Re(e,"int32")}function Ie(e,t){if(e.dtype===t.dtype)return[e,t];var n=Re(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Me(e,t){j(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function Fe(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof ke)n.push(t);else if(i=t,Array.isArray(i)||"object"==typeof i){var i,a=t;for(var o in a){var u=a[o];r.has(u)||(r.add(u),e(u,n,r))}}}(e,t,new Set),t}var Pe,ze=Object.freeze({makeTypesMatch:Ie,assertTypesMatch:Me,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:Fe}),Le=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Be=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Le}return e.prototype.ready=function(){return s(this,void 0,void 0,(function(){var e,t,n;return c(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return c(this,(function(i){switch(i.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new he(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;y(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;y(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,a=r.then((function(n){return!(i<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,a=r.asyncInit;if(a||i)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,i=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun((function(){return r.startScope(i)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[],{}),t},e.prototype.runKernel=function(e,t,n,r,i){return this.runKernelFunc(null,t,null,e,n,r,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),i=0;n.forEach((function(e){i+="complex64"===e.dtype?3:1}));var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-i-a;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,i,a,o){var u,s=this,c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var f,d=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var h,m=v(r,this.backendName);if(null!=m)f=function(){var e=s.backend.numDataIds();h=m.kernelFunc({inputs:t,attrs:i,backend:s.backend});var n=Array.isArray(h)?h:[h];s.shouldCheckForMemLeaks()&&s.checkKernelForMemLeak(r,e,n);var u=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return s.makeTensorFromDataId(t,n,r)}));if(l){var f=s.getTensorsForGradient(r,t,u);if(null==f){null==o&&(o=[]);var d=u.filter((function(e,t){return o[t]}));f=(a||[]).slice().concat(d)}c=s.saveTensorsForBackwardMode(f)}return u};else{var g=function(e){l&&(c=e.map((function(e){return s.keep(s.clone(e))})))};f=function(){var t=s.backend.numDataIds();h=s.tidy((function(){return e(s.backend,g)}));var n=Array.isArray(h)?h:[h];return s.shouldCheckForMemLeaks()&&s.checkKernelForMemLeak(r,t,n),n}}return this.scopedRun((function(){return s.state.kernelDepth++}),(function(){return s.state.kernelDepth--}),(function(){u=s.ENV.getBool("DEBUG")?s.profiler.profileKernel(r,t,(function(){return f()})):f()})),l&&this.addTapeNode(r,t,u,n,c,i),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:u.map((function(e){return e.shape}))}),Array.isArray(h)?u:u[0]},e.prototype.saveTensorsForBackwardMode=function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))},e.prototype.getTensorsForGradient=function(e,t,n){var r=g(e);if(null!=r){var i=r.inputsToSave||[],a=r.outputsToSave||[],o=void 0;r.saveAllInputs?(j(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),o=Object.keys(t).map((function(e){return t[e]}))):o=i.map((function(e){return t[e]}));var u=n.filter((function(e,t){return a[t]}));return o.concat(u)}return null},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var i=e;"string"===n&&Y(e[0])&&(i=e.map((function(e){return ce(e)})));var a=r.write(i,t,n),o=new ke(t,n,a,this.nextTensorId());if(this.incRef(o,r),"string"===n){var u=this.state.tensorInfo.get(a),s=X(i);this.state.numBytes+=s-u.bytes,u.bytes=s}return o},e.prototype.makeTensorFromDataId=function(e,t,n,r){var i=new ke(t,n=n||"float32",e,this.nextTensorId());return this.incRef(i,r),i},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var i=new Te(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*K(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Te||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return s(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,i,a){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=g(e);null!=s&&(r=s.gradFunc),null!=r&&(u.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],i=oe(r.size,r.dtype);return o.makeTensor(i,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],i,a)}),this.state.activeTape.push(u)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Fe(e),r=new Set(n.map((function(e){return e.id}))),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||r.has(a.id)||a.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var i=this;if(void 0===r&&(r=!1),j(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun((function(){return i.startTape()}),(function(){return i.endTape()}),(function(){return i.tidy("forward",e)}));j(a instanceof ke,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},i={},a=0;a<t.length;a++)r[t[a].id]=!0;for(a=0;a<e.length;a++){var o=(h=e[a]).inputs;for(var u in o){for(var s=o[u],c=!1,l=0;l<t.length;l++)if(r[s.id]){h.outputs.forEach((function(e){return r[e.id]=!0})),c=!0,i[h.id]=!0;break}if(c)break}}var f={};f[n.id]=!0;var d={};for(a=e.length-1;a>=0;a--)for(o=(h=e[a]).inputs,l=0;l<h.outputs.length;l++)if(f[h.outputs[l].id]){for(var u in o)f[o[u].id]=!0,d[h.id]=!0;break}var p=[];for(a=0;a<e.length;a++){var h;if(i[(h=e[a]).id]&&d[h.id]){var m={};for(var u in h.inputs){var v=h.inputs[u];r[v.id]&&(m[u]=v)}var g=Object.assign({},h);g.inputs=m,g.outputs=h.outputs,p.push(g)}}return p}(this.state.activeTape,t,a);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,u={};u[a.id]=null==n?(r=ae(R(e=a.shape),"float32"),We.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var i=t[r],a=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?a.push(n):a.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.kernelName+".");var o=i.gradient(a),u=function(t){if(!(t in o))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(o)+".");var r=n((function(){return o[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=i.inputs[t];if(!D(r.shape,a.shape))throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==e[a.id])e[a.id]=r;else{var u=e[a.id];e[a.id]=u.add(r),u.dispose()}};for(var s in i.inputs)u(s)},i=t.length-1;i>=0;i--)r(i)}(u,o,(function(e){return i.tidy(e)}));var s=t.map((function(e){return u[e.id]}));return 0===i.state.gradientDepth&&(i.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),i.state.activeTape=null),{value:a,grads:s}}))},e.prototype.customGrad=function(e){var t=this;return j(ee(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];j(r.every((function(e){return e instanceof ke})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var a={};return r.forEach((function(e,t){a[t]=e})),t.runKernelFunc((function(t,i){return j((n=e.apply(void 0,r.concat([i]))).value instanceof ke,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),j(ee(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),a,(function(e,t){var i=n.gradFunc(e,t),a=Array.isArray(i)?i:[i];j(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),j(a.every((function(e){return e instanceof ke})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return s(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return t=ue(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=ue()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Le,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),We=function(){var t=function(){if(null==Pe){var t=void 0;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof e)t=e;else if("undefined"!=typeof r)t=r;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}Pe=t}return Pe}();if(null==t._tfengine){var n=new l(t);t._tfengine=new Be(n)}return function(e){p=e}(t._tfengine.ENV),xe=function(){return t._tfengine},t._tfengine}();function Ue(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Ve=d();Ve.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ve.registerFlag("IS_BROWSER",(function(){return Ue()})),Ve.registerFlag("IS_NODE",(function(){return"undefined"!=typeof r&&void 0!==r.versions&&void 0!==r.versions.node})),Ve.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ve.registerFlag("PROD",(function(){return!1})),Ve.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ve.getBool("DEBUG")})),Ve.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ve.registerFlag("IS_TEST",(function(){return!1}));var He,qe,Ge,$e={},Ke={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Xe(e,t){$e[e]=t}function Ye(e){e in $e||($e[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete $e[e]}),!1),1===e?t.getContext("webgl",Ke)||t.getContext("experimental-webgl",Ke):t.getContext("webgl2",Ke)}(e));var t=$e[e];return t.isContextLost()?(delete $e[e],Ye(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),$e[e])}function Je(e,t){return[t,e]}function Ze(e){var t=R(e);return F(Math.ceil(t/4))}function Qe(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function et(e,t){var n,r,i,a,o,u,s,c,l,f=e;return 2===d().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,i=f.RGBA16F,a=f.RGBA32F,o=f.RED,u=4,s=1,c=f.HALF_FLOAT,l=f.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,a=f.RGBA,o=e.RGBA,u=4,s=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:s,textureTypeHalfFloat:c,textureTypeFloat:l}}function tt(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+rt(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(He||(He={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(qe||(qe={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Ge||(Ge={}));function nt(e){return!!(d().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function rt(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function it(e,t,n){return _t(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function at(e,t,n){var r=_t(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(tt(e,t,(function(){return e.shaderSource(r,n)})),tt(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function ot(e,t,n){var r=_t(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(tt(e,t,(function(){return e.shaderSource(r,n)})),tt(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=ct.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],i=e.split("\n"),a=i.length.toString().length+2,o=i.map((function(e,t){return P((t+1).toString(),a)+e})),u=0,s=0;s<o.length;s++)u=Math.max(o[s].length,u);var c=o.slice(0,r-1),l=o.slice(r-1,r),f=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+P(l[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var ut,st,ct=/ERROR: [0-9]+:([0-9]+):/g;function lt(e,t){return _t(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function ft(e,t,n){if(tt(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function dt(e,t,n){if(tt(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function pt(e,t,n){var r=_t(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return tt(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),tt(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function ht(e,t,n){var r=_t(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return tt(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),tt(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function mt(e,t){return _t(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function vt(e,t){var n=d().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function gt(e,t){return _t(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function yt(e,t,n,r,i,a,o,u){var s=e.getAttribLocation(n,r);return-1!==s&&(tt(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,i)})),tt(e,t,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,o,u)})),tt(e,t,(function(){return e.enableVertexAttribArray(s)})),!0)}function bt(e,t,n,r){jt(e,r),tt(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),tt(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function xt(e,t,n,r){return _t(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function wt(e,t,n){return e.getUniformLocation(t,n)}function Ot(e,t,n,r,i,a){tt(e,t,(function(){return bt(e,t,r,a)})),tt(e,t,(function(){return e.uniform1i(i,a)}))}function kt(e,t,n,r){tt(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),tt(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Et(e,t,n){tt(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),tt(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function St(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ct(e,t))}function Ct(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function _t(e,t,n,r){var i=tt(e,t,(function(){return n()}));if(null==i)throw new Error(r);return i}function jt(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function At(e,t){return void 0===t&&(t=2),R(e.slice(0,e.length-t))}function Tt(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Nt(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[At(e)].concat(Tt(e))),t}function Rt(e,t){var n;void 0===t&&(t=!1);var r=d().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?C(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var i=W(e);e=i.newShape}var a=R(e);if(e.length<=1&&a<=r)return[1,a];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var o=At(e),u=2,s=2;return e.length&&(u=(n=Tt(e))[0],s=n[1]),F(a=o*(u/2)*(s/2)).map((function(e){return 2*e}))}return F(a)}function Dt(e){return e%2==0}function It(e,t){if(D(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Dt(n)&&Dt(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Dt(e[0])&&Dt(t[0])}function Mt(e){if(null==ut){var t=Ye(e);ut=t.getParameter(t.MAX_TEXTURE_SIZE)}return ut}function Ft(e){if(null==st){var t=Ye(e);st=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,st)}function Pt(e){if(0===e)return 0;var t=Ye(e);return zt(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:zt(t,"EXT_disjoint_timer_query")?1:0}function zt(e,t){return null!=e.getExtension(t)}function Lt(e){try{if(null!=Ye(e))return!0}catch(e){return!1}return!1}function Bt(e){if(0===e)return!1;var t=Ye(e);if(1===e){if(!zt(t,"OES_texture_float"))return!1}else if(!zt(t,"EXT_color_buffer_float"))return!1;return Ut(t)}function Wt(e){if(0===e)return!1;var t=Ye(e);if(1!==e){if(zt(t,"EXT_color_buffer_float"))return Ut(t);if(zt(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=et(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),a}(t,n)}return!1}return!!zt(t,"OES_texture_float")&&!!zt(t,"WEBGL_color_buffer_float")&&Ut(t)}function Ut(e){var t=et(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function Vt(e){return 2===e&&null!=Ye(e).fenceSync}var Ht=Object.freeze({callAndCheck:tt,canBeRepresented:nt,getWebGLErrorMessage:rt,getExtensionOrThrow:it,createVertexShader:at,createFragmentShader:ot,createProgram:lt,linkProgram:ft,validateProgram:dt,createStaticVertexBuffer:pt,createStaticIndexBuffer:ht,getNumChannels:function(){return 2===d().getNumber("WEBGL_VERSION")?1:4},createTexture:mt,validateTextureSize:vt,createFramebuffer:gt,bindVertexBufferToProgramAttribute:yt,bindTextureUnit:bt,unbindTextureUnit:function(e,t,n){jt(e,n),tt(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),tt(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:xt,getProgramUniformLocation:wt,bindTextureToProgramUniformSampler:Ot,bindCanvasToFramebuffer:function(e,t){tt(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),tt(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),tt(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:kt,unbindColorTextureFromFramebuffer:Et,validateFramebuffer:St,getFramebufferErrorMessage:Ct,getBatchDim:At,getRowsCols:Tt,getShapeAs3D:Nt,getTextureShapeFromLogicalShape:Rt,isReshapeFree:It,getWebGLMaxTextureSize:Mt,resetMaxTextureSize:function(){ut=null},resetMaxTexturesInShader:function(){st=null},getMaxTexturesInShader:Ft,getWebGLDisjointQueryTimerVersion:Pt,hasExtension:zt,isWebGLVersionEnabled:Lt,isCapableOfRenderingToFloatTexture:Bt,isDownloadFloatTextureEnabled:Wt,isWebGLFenceEnabled:Vt}),qt=d();function Gt(){d().set("PROD",!0)}function $t(){d().set("DEBUG",!0)}function Kt(){d().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Xt(e){d().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Yt(){We.disposeVariables()}function Jt(){return We}function Zt(){return We.memory()}function Qt(e){return We.profile(e)}function en(e,t){return We.tidy(e,t)}function tn(e){Fe(e).forEach((function(e){return e.dispose()}))}function nn(e){return We.keep(e)}function rn(e){return We.time(e)}function an(e){return We.setBackend(e)}function on(){return We.ready()}function un(){return We.backendName}function sn(e){We.removeBackend(e)}function cn(e){return We.findBackend(e)}function ln(e){return We.findBackendFactory(e)}function fn(e,t,n){return void 0===n&&(n=1),We.registerBackend(e,t,n)}function dn(){return We.backend}function pn(e,t){d().setPlatform(e,t)}function hn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];d().getBool("IS_TEST")||console.warn.apply(console,e)}function mn(e,t){var n=e;if($(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||$(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&d().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||$(t)){j(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),j(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var i=n.slice(1),a=0;a<t.length;++a)e(t[a],i,r.concat(a))}else j(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function vn(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function gn(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof ke)return vn(r,e.dtype,t,n),e;var i=Q(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),vn(r,i,t,n),null==e||!$(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var a=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=mn(e,i);$(e)||Array.isArray(e)||(e=[e]);var u="string"!==i?re(e,i,d().getBool("DEBUG")):N(e,[],!0);return We.makeTensor(u,o,i)}function yn(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return gn(e,t+"["+r+"]",n)}),r)}function bn(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function xn(e,t,n){for(var r=e.length+t.length,i=[],a=0,o=0,u=0;u<r;u++)-1===n.indexOf(u)?i.push(e[a++]):i.push(t[o++]);return i}function wn(e,t){for(var n=[],r=e.length,i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((function(t){return e[t]}))]}function On(e,t){return xn(e,t.map((function(e){return 1})),t)}function kn(e,t,n){j(bn(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function En(e,t){if(bn(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Sn(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Cn(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function _n(e,t){var n=e[0].length;e.forEach((function(e,t){j(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),j(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,i){for(var a=0;a<n;a++)j(a===t||e[a]===r[a],(function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."}))}))}function jn(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function An(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];We.startScope(n);try{var i=r.apply(void 0,e);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),We.endScope(i),i}catch(e){throw We.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}qt.registerFlag("HAS_WEBGL",(function(){return qt.getNumber("WEBGL_VERSION")>0})),qt.registerFlag("WEBGL_VERSION",(function(){return Lt(2)?2:Lt(1)?1:0})),qt.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===qt.get("WEBGL_VERSION")})),qt.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),qt.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),qt.registerFlag("WEBGL_PACK",(function(){return qt.getBool("HAS_WEBGL")})),qt.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_PACK_CLIP",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),qt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_PACK_REDUCE",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_CONV_IM2COL",(function(){return qt.getBool("WEBGL_PACK")})),qt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Mt(qt.getNumber("WEBGL_VERSION"))})),qt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Ft(qt.getNumber("WEBGL_VERSION"))})),qt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=qt.getNumber("WEBGL_VERSION");return 0===e?0:Pt(e)})),qt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return qt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),qt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Bt(qt.getNumber("WEBGL_VERSION"))})),qt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!qt.getBool("WEBGL_FORCE_F16_TEXTURES")&&qt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),qt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Wt(qt.getNumber("WEBGL_VERSION"))})),qt.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Vt(qt.getNumber("WEBGL_VERSION"))})),qt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return qt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Oe=Xt;var Tn=An({complex_:function(e,t){var n=gn(e,"real","complex"),r=gn(t,"imag","complex");return A(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),We.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),Nn=An({real_:function(e){var t=gn(e,"input","real");return We.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),Rn=An({imag_:function(e){var t=gn(e,"input","imag");return We.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function Dn(e,t,n){return In(e,t,mn(e,n),n)}function In(e,t,n,r){if(null==r&&(r=Q(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!$(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){se(t);var i=R(t),a=R(n);j(i===a,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+a}));for(var o=0;o<n.length;++o){var u=n[o],s=o!==n.length-1||u!==R(t.slice(o));j(n[o]===t[o]||!s,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return $(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?re(e,r,d().getBool("DEBUG")):N(e,[],!0),We.makeTensor(e,t,r)}function Mn(e,t){if(($(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&$(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return In(e,[],[],t)}function Fn(e,t){T(e);var n=mn(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return In(e,null,n,t)}function Pn(e,t,n){if(T(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=mn(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return In(e,t,r,n)}function zn(e,t,n){if(T(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=mn(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return In(e,t,r,n)}function Ln(e,t,n){if(T(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=mn(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return In(e,t,r,n)}function Bn(e,t,n){if(T(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=mn(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return In(e,t,r,n)}function Wn(e,t,n){if(T(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=mn(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return In(e,t=t||r,r,n)}function Un(e,t,n,r){return void 0===t&&(t=!0),We.makeVariable(e,t,n,r)}function Vn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Vn(e,"float32"),r=Hn(e,"float32");return Tn(n,r)}var i=ae(R(e),t);return We.makeTensor(i,e,t)}function Hn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Hn(e,"float32"),r=Hn(e,"float32");return Tn(n,r)}var i=oe(R(e),t);return We.makeTensor(i,e,t)}function qn(e,t,n){return We.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Gn(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return We.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})}function $n(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Hn([0],r);var i=oe(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return Fn(i,r)}var Kn=An({onesLike_:function(e){var t=gn(e,"x","onesLike");if("complex64"===t.dtype){var n=Kn(Nn(t)),r=Xn(Rn(t));return Tn(n,r)}return We.runKernelFunc((function(e){return e.onesLike(t)}),{x:t},(function(e,t){return{x:function(){return Xn(e)}}}),"OnesLike")}}),Xn=An({zerosLike_:function(e){var t=gn(e,"x","zerosLike");return We.runKernelFunc((function(e){return e.zerosLike(t)}),{x:t},(function(e,t){return{x:function(){return Xn(e)}}}),"ZerosLike")}}),Yn=An({concat_:function(e,t){void 0===t&&(t=0),j(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=yn(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=B(t,n[0].shape)[0];var r=jn(n.map((function(e){return e.shape})),t);if(0===R(r))return Dn([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var i=n.map((function(e){return e.shape}));_n(i,t);var a=n,o={axis:t};return We.runKernelFunc((function(e){return e.concat(n,t)}),a,(function(e){var n=i.map((function(e){return e[t]}));return tr(e,n,t).map((function(e){return function(){return e}}))}),"Concat",o)}}),Jn=An({concat1d_:function(e){return Yn(e,0)}}),Zn=An({concat2d_:function(e,t){return Yn(e,t)}}),Qn=An({concat3d_:function(e,t){return Yn(e,t)}}),er=An({concat4d_:function(e,t){return Yn(e,t)}}),tr=An({split_:function(e,t,n){void 0===n&&(n=0);var r,i=gn(e,"x","split");return n=B(n,i.shape)[0],"number"==typeof t?(j(i.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(i.shape[n]/t)):(j(i.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),We.runKernelFunc((function(e){return e.split(i,r,n)}),{$x:i},(function(e){return{$x:function(){return Yn(e,n)}}}))}});function nr(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",se(e),new be(e,t,n)}function rr(e,t){void 0===t&&(t=!1),console.log(e.toString(t))}var ir=An({batchToSpaceND_:function(e,t,n){var r=gn(e,"x","batchToSpaceND"),i=t.reduce((function(e,t){return e*t}));return j(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),j(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),j(r.shape[0]%i==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i})),We.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),ar=An({cast_:function(e,t){var n=gn(e,"x","cast");if(!q(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return We.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),or=An({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=gn(e,"x","cumsum"),a=En([t|=0],i.rank),o=i;null!=a&&(o=i.transpose(a));var u=Cn(1,i.rank)[0],s=We.runKernelFunc((function(e){return e.cumsum(o,u,n,r)}),{permutedX:o},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=a&&(s=s.transpose(a)),s}}),ur=An({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=gn(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return j(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),j(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),j(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape})),We.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),sr=An({expandDims_:function(e,t){void 0===t&&(t=0);var n=gn(e,"x","expandDims",null);j(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(j(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),cr(n,r)}}),cr=An({reshape_:function(e,t){var n=gn(e,"x","reshape",null);t=L(t,n.size),j(n.size===R(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return We.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),lr=An({spaceToBatchND_:function(e,t,n){var r=gn(e,"x","spaceToBatchND");return j(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),j(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),j(r.shape.reduce((function(e,r,i){return i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),We.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),fr=An({squeeze_:function(e,t){var n=gn(e,"x","squeeze");return cr(n,W(n.shape,t).newShape)}}),dr=An({stack_:function(e,t){void 0===t&&(t=0);var n=yn(e,"tensors","stack");if(j(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,i=n[0].shape,a=n[0].dtype;j(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){A(i,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){j(a===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=n.map((function(e){return e.expandDims(t)}));return Yn(o,t)}}),pr=An({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=gn(e,"x","unstack");j(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return We.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return dr(e,t)}}}),"Unpack",r)}}),hr=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,a,o,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:return n=gn(e,"x","setdiff1d"),r=gn(t,"y","setdiff1d"),j(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),j(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),j(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return i=c.sent(),[4,r.data()];case 2:for(a=c.sent(),o=new Set(a),u=0,f=0;f<i.length;f++)o.has(i[f])||u++;for(s=new be([u],n.dtype),l=new be([u],"int32"),f=0,d=0;f<i.length;f++)o.has(i[f])||(s.values[d]=i[f],l.values[d]=f,d++);return[2,[s.toTensor(),l.toTensor()]]}}))}))};function mr(e,t,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);for(var a=t.length,o=0;o<a;++o)i=i.concat([e[o+1]/t[o],t[o]]);i=i.concat(e.slice(a+1))}return i}function vr(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<e;++i)i>=2*t+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function gr(e,t,n,r){void 0===r&&(r=!0);var i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?i.push(t[a-1]*e[a]):i.push(e[a]/t[a-1]):i.push(e[a]);return i}function yr(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function br(e,t,n){for(var r=e.slice(0,1),i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}var xr="Add",wr="AddN",Or="Div",kr="FusedBatchNorm",Er="SquaredDifference",Sr="Square",Cr="Transpose",_r="NonMaxSuppressionV5",jr="BroadcastTo",Ar="OneHot",Tr="Identity",Nr="Tile",Rr="PadV2",Dr="FromPixels",Ir="MaxPoolWithArgmax",Mr=An({add_:function(e,t){var n,r=gn(e,"a","add"),i=gn(t,"b","add");n=Ie(r,i),r=n[0],i=n[1];var a={a:r,b:i};return We.runKernelFunc((function(e,t){var n=e.add(r,i);return t([r,i]),n}),a,null,xr)}});function Fr(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var a=n-1-i,o=e[a]||1;(t[t.length-1-i]||1)>1&&1===o&&r.unshift(a)}return r}function Pr(e,t){for(var n=[],r=0;r<t.length;r++){var i=e[e.length-r-1],a=t.length-r-1,o=t[a];(null==i||1===i&&o>1)&&n.unshift(a)}return n}function zr(e,t){for(var n=[],r=Math.max(e.length,t.length),i=0;i<r;i++){var a=e[e.length-i-1];null==a&&(a=1);var o=t[t.length-i-1];if(null==o&&(o=1),1===a)n.unshift(o);else if(1===o)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}var Lr=An({abs_:function(e){var t=gn(e,"x","abs");return"complex64"===t.dtype?We.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):We.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),Br=An({acos_:function(e){var t=gn(e,"x","acos");return We.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Mn(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Wr=An({acosh_:function(e){var t=gn(e,"x","acosh");return We.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Ur=An({asin_:function(e){var t=gn(e,"x","asin");return We.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Mn(1).sub(n.toFloat().square()).sqrt())}}}))}}),Vr=An({asinh_:function(e){var t=gn(e,"x","asinh");return We.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Mn(1).add(n.toFloat().square()).sqrt())}}}))}}),Hr=An({atan_:function(e){var t=gn(e,"x","atan");return We.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),qr=An({atanh_:function(e){var t=gn(e,"x","atanh");return We.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(Mn(1).sub(n.toFloat().square()))}}}))}}),Gr=An({ceil_:function(e){var t=gn(e,"x","ceil");return We.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Xn(e)}}}))}}),$r=An({clipByValue_:function(e,t,n){var r=gn(e,"x","clipByValue");j(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var i=[r],a={min:t,max:n};return We.runKernelFunc((function(e,i){var a=e.clip(r,t,n);return i([r]),a}),{x:r},(function(e,r){var i=r[0];return{x:function(){return e.where(i.greaterEqual(t).logicalAnd(i.lessEqual(n)),Xn(e))}}}),"ClipByValue",a,i)}}),Kr=An({cos_:function(e){var t=gn(e,"x","cos"),n=[t];return We.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),Xr=An({cosh_:function(e){var t=gn(e,"x","cosh");return We.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Yr=An({erf_:function(e){var t=gn(e,"x","erf");return j("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),We.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Jr=An({exp_:function(e){var t=gn(e,"x","exp");return We.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Zr=An({expm1_:function(e){var t=gn(e,"x","expm1");return We.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Qr=An({floor_:function(e){var t=gn(e,"x","floor");return We.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Xn(e)}}}))}}),ei=An({log_:function(e){var t=gn(e,"x","log"),n=[t];return We.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),ti=An({log1p_:function(e){var t=gn(e,"x","log1p");return We.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),ni=An({logSigmoid_:function(e){var t=gn(e,"x","logSigmoid");return We.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),ri=An({neg_:function(e){var t=gn(e,"x","neg"),n=[t];return We.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),ii=An({reciprocal_:function(e){var t=gn(e,"x","reciprocal");return We.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),ai=An({round_:function(e){var t=gn(e,"x","round");return We.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Xn(e)}}}))}}),oi=An({rsqrt_:function(e){var t=gn(e,"x","rsqrt"),n=[t];return We.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),ui=An({sigmoid_:function(e){var t=gn(e,"x","sigmoid");return We.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(Mn(1).sub(n)))}}}),"Sigmoid")}}),si=An({sign_:function(e){var t=gn(e,"x","sign");return We.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Xn(e)}}}))}}),ci=An({isNaN_:function(e){var t=gn(e,"x","isNaN");return We.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Xn(e)}}}))}}),li=An({isInf_:function(e){var t=gn(e,"x","isInf");return We.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Xn(e)}}}))}}),fi=An({isFinite_:function(e){var t=gn(e,"x","isFinite");return We.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Xn(e)}}}))}}),di=An({sin_:function(e){var t=gn(e,"x","sin"),n=[t];return We.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),pi=An({sinh_:function(e){var t=gn(e,"x","sinh");return We.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),hi=An({softplus_:function(e){var t=gn(e,"x","softplus");return We.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),mi=An({sqrt_:function(e){var t=gn(e,"x","sqrt");return We.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),vi=An({step_:function(e,t){void 0===t&&(t=0);var n=gn(e,"x","step");return We.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Xn(e)}}}))}}),gi=An({tan_:function(e){var t=gn(e,"x","tan");return We.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),yi=An({tanh_:function(e){var t=gn(e,"x","tanh");return We.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return Mn(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}}),bi=An({addStrict_:function(e,t){var n=gn(e,"a","addStrict"),r=gn(t,"b","addStrict");return A(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),xi=An({atan2_:function(e,t){var n,r=gn(e,"a","atan2"),i=gn(t,"b","atan2");n=Ie(r,i),r=n[0],i=n[1];var a=zr(r.shape,i.shape);return We.runKernelFunc((function(e,t){var n=e.atan2(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Mr(n.square(),r.square()),i=e.mul(r.div(t)),o=Pr(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},$b:function(){var t=Mr(n.square(),r.square()),i=ri(e.mul(n.div(t))),o=Pr(r.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(r.shape)}}}))}}),wi=An({divStrict_:function(e,t){var n=gn(e,"a","div"),r=gn(t,"b","div");return A(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Oi=An({floorDiv_:function(e,t){var n,r=gn(e,"a","floorDiv"),i=gn(t,"b","floorDiv");n=Ie(r,i),r=n[0],i=n[1];var a=zr(r.shape,i.shape);return We.runKernelFunc((function(e,t){var n=e.floorDiv(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),i=Pr(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=Pr(r.shape,a);i.length>0&&(t=t.sum(i).reshape(r.shape));var o=r.square();return t.div(o.toFloat()).neg()}}}),"FloorDiv")}}),ki=An({maximum_:function(e,t){var n,r=gn(e,"a","maximum"),i=gn(t,"b","maximum");return n=Ie(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),zr(r.shape,i.shape),We.runKernelFunc((function(e,t){var n=e.maximum(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Ei=An({maximumStrict_:function(e,t){var n=gn(e,"a","maximumStrict"),r=gn(t,"b","maximumStrict");return A(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Si=An({minimum_:function(e,t){var n,r=gn(e,"a","minimum"),i=gn(t,"b","minimum");return n=Ie(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),zr(r.shape,i.shape),We.runKernelFunc((function(e,t){var n=e.minimum(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Ci=An({minimumStrict_:function(e,t){var n=gn(e,"a","minimumStrict"),r=gn(t,"b","minimumStrict");return A(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),_i=An({mod_:function(e,t){var n,r=gn(e,"a","mod"),i=gn(t,"b","mod");n=Ie(r,i),r=n[0],i=n[1];var a=zr(r.shape,i.shape);return We.runKernelFunc((function(e,t){var n=e.mod(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Pr(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=Pr(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}}))}}),ji=An({modStrict_:function(e,t){var n=gn(e,"a","modStrict"),r=gn(t,"b","modStrict");return A(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Ai=An({mul_:function(e,t){var n,r=gn(e,"a","mul"),i=gn(t,"b","mul");n=Ie(r,i),r=n[0],i=n[1];var a=zr(r.shape,i.shape);return We.runKernelFunc((function(e,t){var n=e.multiply(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),i=Pr(n.shape,a);return i.length>0?t.sum(i).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),i=Pr(r.shape,a);return i.length>0?t.sum(i).reshape(r.shape):t}}}),"Mul")}}),Ti=An({mulStrict_:function(e,t){var n=gn(e,"a","mul"),r=gn(t,"b","mul");return A(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Ni=An({pow_:function(e,t){var n,r=gn(e,"base","pow"),i=gn(t,"exp","pow");n=Ie(r,i),r=n[0],i=n[1];var a=zr(r.shape,i.shape),o=[r,i];return We.runKernelFunc((function(e,t){var n=e.pow(r,i);return t([r,i,n]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1],i=t[2];return{a:function(){var t=r.toFloat(),i=e.mul(t.mul(n.pow(t.sub(Mn(1))))),o=Pr(n.shape,a);return o.length>0&&(i=i.sum(o)),i.reshape(n.shape)},b:function(){var t=n.greater(0),o=n.log().where(t,Xn(n)),u=e.mul(i.mul(o)),s=Pr(r.shape,a);return s.length>0&&(u=u.sum(s)),u.reshape(r.shape)}}}),"Pow",{},o,[!0])}}),Ri=An({powStrict_:function(e,t){return A(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Di=An({squaredDifferenceStrict_:function(e,t){var n=gn(e,"a","squaredDifferenceStrict"),r=gn(t,"b","squaredDifferenceStrict");return A(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Ii=An({sub_:function(e,t){var n,r=gn(e,"a","sub"),i=gn(t,"b","sub");n=Ie(r,i),r=n[0],i=n[1];var a=zr(r.shape,i.shape);return We.runKernelFunc((function(e){return e.subtract(r,i)}),{a:r,b:i},(function(e){return{a:function(){var t=e,n=Pr(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Pr(i.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(i.shape)}}}),"Sub")}}),Mi=An({subStrict_:function(e,t){var n=gn(e,"a","subStrict"),r=gn(t,"b","subStrict");return A(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Fi=An({div_:function(e,t){var n,r=gn(e,"a","div"),i=gn(t,"b","div");if(n=Ie(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return Oi(r,i);var a={a:r,b:i};return We.runKernelFunc((function(e,t){var n=e.realDivide(r,i);return t([r,i]),n}),a,null,Or,{})}});function Pi(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],i=1,a=0;a<n.length-1;++a)i*=n[a];var o=e.shape,u=n.slice();u.pop();var s=1;for(a=r;a<e.rank;++a)s*=o[a],u.push(o[a]);var c=ne(e.shape).map((function(e){return e/s})).concat([1]).slice(0,r);return[u,i,s,c]}var zi=Object.freeze({prepareAndValidate:Pi});function Li(e){return e<=30?e:te(e,Math.floor(Math.sqrt(e)))}function Bi(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(a+" update.rank < "+i+". ");if(e.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+e.length-r)throw new Error(a+" update.rank != "+(i+e.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==t.shape[o])throw new Error(a+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==e[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+e[o+i]+")")}function Wi(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Bi(n,t,e)}function Ui(e,t,n){for(var r=t.shape.length,i=r>1?t.shape[r-1]:1,a=n.length,o=1,u=i;u<a;++u)o*=n[u];var s=i<1?1:i;return{sliceRank:i,numUpdates:R(t.shape)/s,sliceSize:o,strides:ne(n.slice(0,i)).concat([1]),outputSize:R(n)}}var Vi=Object.freeze({validateUpdateShape:Bi,validateInput:Wi,calculateShapes:Ui});function Hi(e,t,n){j(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),j(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){j(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},i=0;i<e.rank;++i)r(i)}function qi(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Gi(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function $i(e,t,n,r,i){var a=t[i],o=n[i]||1;(e&1<<i||null==a)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[i];return a<0&&(a+=u),S(0,a,u-1)}function Ki(e,t,n,r,i){var a=t[i],o=n[i]||1;(e&1<<i||null==a)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[i];return a<0&&(a+=u),o>0?S(0,a,u):S(-1,a,u-1)}function Xi(e,t,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Yi(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}var Ji=Object.freeze({assertParamsValid:Hi,maskToAxes:qi,computeOutShape:Gi,startForAxis:$i,stopForAxis:Ki,isSliceContinous:Xi,computeFlatOffset:Yi});function Zi(e){return j(ee(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=gn(t,"x","tf.grad",null),i=null!=n?gn(n,"dy","tf.grad"):null;return We.tidy((function(){var t=We.gradients((function(){return e(r)}),[r],i),n=t.value,a=t.grads;return null!=i&&A(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),ia(a),a[0]}))}}function Qi(e){return j(ee(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){j(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=yn(t,"args","tf.grads",null),i=null!=n?gn(n,"dy","tf.grads"):null;return We.tidy((function(){var t=We.gradients((function(){return e.apply(void 0,r)}),r,i),n=t.value,a=t.grads;return null!=i&&A(n.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ia(a),a}))}}function ea(e){return j(ee(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){j(t instanceof ke,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),j(null==n||n instanceof ke,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=We.gradients((function(){return e(t)}),[t],n),i=r.grads,a=r.value;return ia(i),{grad:i[0],value:a}}}function ta(e){return j(ee(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){j(Array.isArray(t)&&t.every((function(e){return e instanceof ke})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),j(null==n||n instanceof ke,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=We.gradients((function(){return e.apply(void 0,t)}),t,n);return null!=n&&A(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ia(r.grads),r}}function na(e,t){j(ee(e),(function(){return"The f passed in variableGrads(f) must be a function"})),j(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Te})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],We.registeredVariables)t.push(We.registeredVariables[r]);var i=n?t.filter((function(e){return!e.trainable})):null,a=t.length;j((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var o=We.gradients(e,t,null,!0),u=o.value,s=o.grads;j(s.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),j(0===u.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+u.rank+" tensor"}));var c={};return t.forEach((function(e,t){null!=s[t]&&(c[e.name]=s[t])})),null!=i&&i.forEach((function(e){return c[e.name]=null})),{value:u,grads:c}}function ra(e){return We.customGrad(e)}function ia(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var aa=An({softmax_:function(e,t){void 0===t&&(t=-1);var n=gn(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return We.runKernelFunc((function(e,r){var i=e.softmax(n,t);return r([i]),i}),{logits:n},(function(e,n){var r=n[0],i=e.mul(r);return{logits:function(){return i.sub(i.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),oa=An({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=gn(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return ra((function(e,n){var r=e.max(t,!0),i=e.sub(r),a=i.toFloat().sub(i.exp().sum(t,!0).log());return n([a]),{value:a,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),ua=An({transpose_:function(e,t){var n=gn(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),j(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){j(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return We.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},null,"Transpose",r)}}),sa=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),ca=function(){function e(){}return e.prototype.time=function(e){return la("time")},e.prototype.read=function(e){return la("read")},e.prototype.readSync=function(e){return la("readSync")},e.prototype.numDataIds=function(){return la("numDataIds")},e.prototype.disposeData=function(e){return la("disposeData")},e.prototype.write=function(e,t,n){return la("write")},e.prototype.move=function(e,t,n,r){return la("move")},e.prototype.memory=function(){return la("memory")},e.prototype.floatPrecision=function(){return la("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return la("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,la("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return la("slice")},e.prototype.stridedSlice=function(e,t,n,r){return la("stridedSlice")},e.prototype.unstack=function(e,t){return la("unstack")},e.prototype.reverse=function(e,t){return la("reverse")},e.prototype.concat=function(e,t){return la("concat")},e.prototype.neg=function(e){return la("neg")},e.prototype.add=function(e,t){return la("add")},e.prototype.addN=function(e){return la("addN")},e.prototype.subtract=function(e,t){return la("subtract")},e.prototype.multiply=function(e,t){return la("multiply")},e.prototype.realDivide=function(e,t){return la("realDivide")},e.prototype.floorDiv=function(e,t){return la("floorDiv")},e.prototype.sum=function(e,t){return la("sum")},e.prototype.prod=function(e,t){return la("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return la("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return la("argMin")},e.prototype.argMax=function(e,t){return la("argMax")},e.prototype.equal=function(e,t){return la("equal")},e.prototype.notEqual=function(e,t){return la("notEqual")},e.prototype.less=function(e,t){return la("less")},e.prototype.lessEqual=function(e,t){return la("lessEqual")},e.prototype.greater=function(e,t){return la("greater")},e.prototype.greaterEqual=function(e,t){return la("greaterEqual")},e.prototype.logicalNot=function(e){return la("logicalNot")},e.prototype.logicalAnd=function(e,t){return la("logicalAnd")},e.prototype.logicalOr=function(e,t){return la("logicalOr")},e.prototype.where=function(e){return la("where")},e.prototype.select=function(e,t,n){return la("select")},e.prototype.topk=function(e,t,n){return la("topk")},e.prototype.min=function(e,t){return la("min")},e.prototype.minimum=function(e,t){return la("minimum")},e.prototype.mod=function(e,t){return la("mod")},e.prototype.max=function(e,t){return la("max")},e.prototype.maximum=function(e,t){return la("maximum")},e.prototype.all=function(e,t){return la("all")},e.prototype.any=function(e,t){return la("any")},e.prototype.squaredDifference=function(e,t){return la("squaredDifference")},e.prototype.ceil=function(e){return la("ceil")},e.prototype.floor=function(e){return la("floor")},e.prototype.round=function(e){return la("round")},e.prototype.sign=function(e){return la("sign")},e.prototype.isNaN=function(e){return la("isNaN")},e.prototype.isInf=function(e){return la("isInf")},e.prototype.isFinite=function(e){return la("isFinite")},e.prototype.pow=function(e,t){return la("pow")},e.prototype.exp=function(e){return la("exp")},e.prototype.expm1=function(e){return la("expm1")},e.prototype.softmax=function(e,t){return la("softmax")},e.prototype.log=function(e){return la("log")},e.prototype.log1p=function(e){return la("log1p")},e.prototype.sqrt=function(e){return la("sqrt")},e.prototype.rsqrt=function(e){return la("rsqrt")},e.prototype.square=function(e){return la("square")},e.prototype.reciprocal=function(e){return la("reciprocal")},e.prototype.relu=function(e){return la("relu")},e.prototype.relu6=function(e){return la("relu6")},e.prototype.prelu=function(e,t){return la("prelu")},e.prototype.elu=function(e){return la("elu")},e.prototype.eluDer=function(e,t){return la("eluDer")},e.prototype.selu=function(e){return la("selu")},e.prototype.int=function(e){return la("int")},e.prototype.clip=function(e,t,n){return la("clip")},e.prototype.abs=function(e){return la("abs")},e.prototype.complexAbs=function(e){return la("complexAbs")},e.prototype.sigmoid=function(e){return la("sigmoid")},e.prototype.softplus=function(e){return la("softplus")},e.prototype.sin=function(e){return la("sin")},e.prototype.cos=function(e){return la("cos")},e.prototype.tan=function(e){return la("tan")},e.prototype.asin=function(e){return la("asin")},e.prototype.acos=function(e){return la("acos")},e.prototype.atan=function(e){return la("atan")},e.prototype.atan2=function(e,t){return la("atan2")},e.prototype.sinh=function(e){return la("sinh")},e.prototype.cosh=function(e){return la("cosh")},e.prototype.tanh=function(e){return la("tanh")},e.prototype.asinh=function(e){return la("asinh")},e.prototype.acosh=function(e){return la("acosh")},e.prototype.atanh=function(e){return la("atanh")},e.prototype.erf=function(e){return la("erf")},e.prototype.step=function(e,t){return la("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,la("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return la("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return la("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return la("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,la("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return la("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return la("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return la("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return la("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return la("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return la("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return la("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return la("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return la("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return la("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return la("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return la("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return la("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return la("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return la("reshape")},e.prototype.cast=function(e,t){return la("cast")},e.prototype.tile=function(e,t){return la("tile")},e.prototype.pad=function(e,t,n){return la("pad")},e.prototype.transpose=function(e,t){return la("transpose")},e.prototype.gather=function(e,t,n){return la("gather")},e.prototype.gatherND=function(e,t){return la("gatherND")},e.prototype.scatterND=function(e,t,n){return la("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return la("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return la("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return la("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return la("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return la("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return la("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,i,a){return la("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){return la("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,i,a,o){return la("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return la("multinomial")},e.prototype.oneHot=function(e,t,n,r){return la("oneHot")},e.prototype.cumsum=function(e,t,n,r){return la("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return la("nonMaxSuppression")},e.prototype.fft=function(e){return la("fft")},e.prototype.ifft=function(e){return la("ifft")},e.prototype.complex=function(e,t){return la("complex")},e.prototype.real=function(e){return la("real")},e.prototype.imag=function(e){return la("imag")},e.prototype.cropAndResize=function(e,t,n,r,i,a){return la("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return la("depthToSpace")},e.prototype.split=function(e,t,n){return la("split")},e.prototype.sparseToDense=function(e,t,n,r){return la("sparseToDense")},e.prototype.diag=function(e){return la("diag")},e.prototype.fill=function(e,t,n){return la("fill")},e.prototype.onesLike=function(e){return la("onesLike")},e.prototype.zerosLike=function(e){return la("zerosLike")},e.prototype.linspace=function(e,t,n){return la("linspace")},e.prototype.dispose=function(){return la("dispose")},e}();function la(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function fa(e,t,n,r,i,a,o){void 0===o&&(o="channelsLast");var u,s=va(t),c=s[0],l=s[1];if("channelsLast"===o)u=[c,l,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);u=[c,l,e[1],e[1]]}return pa(e,u,n,r,i,a,!1,o)}function da(e,t,n,r,i,a,o){void 0===o&&(o="NDHWC");var u,s,c=ga(t),l=c[0],f=c[1],d=c[2];if("NDHWC"===o)s="channelsLast",u=[l,f,d,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);s="channelsFirst",u=[l,f,d,e[1],e[1]]}return ha(e,u,n,r,i,!1,s,a)}function pa(e,t,n,r,i,a,o,u){void 0===o&&(o=!1),void 0===u&&(u="channelsLast");var s=[-1,-1,-1,-1],c=s[0],l=s[1],f=s[2],d=s[3];if("channelsLast"===u)c=e[0],l=e[1],f=e[2],d=e[3];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat "+u);c=e[0],d=e[1],l=e[2],f=e[3]}var p,h=t[0],m=t[1],v=t[3],g=va(n),y=g[0],b=g[1],x=va(r),w=x[0],O=x[1],k=ya(h,w),E=ya(m,O),S=function(e,t,n,r,i,a,o,u){var s,c,l;if("number"==typeof e){s={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,i){null==r&&(r=ma(e,t,n));var a=e[1],o=ba((e[0]-t+2*r)/n+1,i);j(I(o),(function(){return"The output # of rows ("+o+") must be an integer. Change the stride and/or zero pad parameters"}));var u=ba((a-t+2*r)/n+1,i);return j(I(u),(function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"})),[o,u]}([t,n],a,r,e,u);c=f[0],l=f[1]}else if("same"===e){c=Math.ceil(t/r),l=Math.ceil(n/i);var d=Math.max(0,(c-1)*r+a-t),p=Math.max(0,(l-1)*i+o-n),h=Math.floor(d/2),m=d-h,v=Math.floor(p/2);s={top:h,bottom:m,left:v,right:p-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);s={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-a+1)/r),l=Math.ceil((n-o+1)/i)}return{padInfo:s,outHeight:c,outWidth:l}}(i,l,f,y,b,k,E,a),C=S.padInfo,_=S.outHeight,A=S.outWidth,T=o?v*d:v;return"channelsFirst"===u?p=[c,T,_,A]:"channelsLast"===u&&(p=[c,_,A,T]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:f,inChannels:d,outHeight:_,outWidth:A,outChannels:T,padInfo:C,strideHeight:y,strideWidth:b,filterHeight:h,filterWidth:m,effectiveFilterHeight:k,effectiveFilterWidth:E,dilationHeight:w,dilationWidth:O,inShape:e,outShape:p,filterShape:t}}function ha(e,t,n,r,i,a,o,u){void 0===a&&(a=!1),void 0===o&&(o="channelsLast");var s=[-1,-1,-1,-1,-1],c=s[0],l=s[1],f=s[2],d=s[3],p=s[4];if("channelsLast"===o)c=e[0],l=e[1],f=e[2],d=e[3],p=e[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);c=e[0],p=e[1],l=e[2],f=e[3],d=e[4]}var h,m=t[0],v=t[1],g=t[2],y=t[4],b=ga(n),x=b[0],w=b[1],O=b[2],k=ga(r),E=k[0],S=k[1],C=k[2],_=ya(m,E),A=ya(v,S),T=ya(g,C),N=function(e,t,n,r,i,a,o,u,s,c,l){var f,d,p,h;if("number"==typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,i,a){null==i&&(i=ma(e,t,r));var o=e[1],u=e[2],s=ba((e[0]-t+2*i)/r+1,a);j(I(s),(function(){return"The output # of depths ("+s+") must be an integer. Change the stride and/or zero pad parameters"}));var c=ba((o-t+2*i)/r+1,a);j(I(c),(function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"}));var l=ba((u-t+2*i)/r+1,a);return j(I(l),(function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"})),[s,c,l,1]}([t,n,r,1],u,0,i,e,l);d=m[0],p=m[1],h=m[2]}else if("same"===e){var v=((d=Math.ceil(t/i))-1)*i+u-t,g=((p=Math.ceil(n/a))-1)*a+s-n,y=((h=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(v/2),x=v-b,w=Math.floor(g/2),O=g-w,k=Math.floor(y/2);f={top:w,bottom:O,left:k,right:y-k,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-u+1)/i),p=Math.ceil((n-s+1)/a),h=Math.ceil((r-c+1)/o)}return{padInfo:f,outDepth:d,outHeight:p,outWidth:h}}(i,l,f,d,x,w,O,_,A,T,u),R=N.padInfo,D=N.outDepth,M=N.outHeight,F=N.outWidth,P=a?y*p:y;return"channelsFirst"===o?h=[c,P,D,M,F]:"channelsLast"===o&&(h=[c,D,M,F,P]),{batchSize:c,dataFormat:o,inDepth:l,inHeight:f,inWidth:d,inChannels:p,outDepth:D,outHeight:M,outWidth:F,outChannels:P,padInfo:R,strideDepth:x,strideHeight:w,strideWidth:O,filterDepth:m,filterHeight:v,filterWidth:g,effectiveFilterDepth:_,effectiveFilterHeight:A,effectiveFilterWidth:T,dilationDepth:E,dilationHeight:S,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function ma(e,t,n,r){void 0===r&&(r=1);var i=ya(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function va(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function ga(e){return"number"==typeof e?[e,e,e]:e}function ya(e,t){return t<=1?e:e+(e-1)*(t-1)}function ba(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function xa(e){var t=va(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function wa(e,t){return xa(e)||xa(t)}function Oa(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function ka(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Hn(e.shape),i=e.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!G(e.dtype,t))return We.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e);return a=o.cast(t),o.dispose(),a}if("int32"===t)return n.int(e);if("bool"===t){var u=Mn(0,e.dtype);return a=n.notEqual(e,u),u.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Ea(e,t){return We.makeTensorFromDataId(e.dataId,t,e.dtype)}function Sa(e,t,n){var r=(t-e)/(n-1),i=oe(n,"float32");i[0]=e;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Fn(i,"float32")}var Ca=Object.freeze({castTensor:ka,reshapeTensor:Ea,linspaceImpl:Sa,upcastType:Re,axesAreInnerMostDims:bn,combineLocations:xn,computeOutAndReduceShapes:wn,expandShapeToKeepDim:On,assertAxesAreInnerMostDims:kn,getAxesPermutation:En,getUndoAxesPermutation:Sn,getInnerMostAxes:Cn,getBroadcastDims:Fr,getReductionAxes:Pr,assertAndGetBroadcastShape:zr,assertParamsConsistent:_n,computeOutShape:jn,computePool2DInfo:fa,computePool3DInfo:da,computeConv2DInfo:pa,computeConv3DInfo:ha,computeDefaultPad:ma,tupleValuesAreOne:xa,eitherStridesOrDilationsAreOne:wa,convertConv2DDataFormat:Oa,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Li});function _a(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function ja(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Aa(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Ta(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Na(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,i=e.length,a=0,o=!1;r<i;){var u=n(t,e[a=r+(i-r>>>1)]);u>0?r=a+1:(i=a,o=!u)}return o?r:-r-1}(e,t,n||Ra)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function Ra(e,t){return e>t?1:e<t?-1:0}function Da(e,t,n,r,i){return Ma(e,t,n,r,i,0).selectedIndices}function Ia(e,t,n,r,i,a){var o=Ma(e,t,n,r,i,a,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Ma(e,t,n,r,i,a,o,u){void 0===o&&(o=!1),void 0===u&&(u=!1);for(var s=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>i})).sort(za),c=a>0?-.5/a:0,l=[],f=[];l.length<n&&s.length>0;){var d=s.pop(),p=d.score,h=d.boxIndex,m=d.suppressBeginIndex;if(p<i)break;for(var v=!1,g=l.length-1;g>=m;--g){var y=Fa(e,h,l[g]);if(y>=r){v=!0;break}if(d.score=d.score*Pa(r,c,y),d.score<=i)break}d.suppressBeginIndex=l.length,v||(d.score===p?(l.push(h),f.push(d.score)):d.score>i&&Na(s,d,za))}var b=l.length;return u&&(l.fill(0,b),f.fill(0,b)),{selectedIndices:Fn(l,"int32"),selectedScores:Fn(f,"float32"),numValidOutputs:Mn(b,"int32")}}function Fa(e,t,n){var r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),l=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(u-a)*(s-o),h=(f-c)*(d-l);if(p<=0||h<=0)return 0;var m=Math.max(a,c),v=Math.max(o,l),g=Math.min(u,f),y=Math.min(s,d),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(p+h-b)}function Pa(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function za(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function La(e,t,n){var r=new Array(e.rank).fill(0),i=e.shape.slice();return t.map((function(t){i[n]=t;var a=e.slice(r,i);return r[n]+=t,a}))}function Ba(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var i=nr(n,e.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(e.rank),u=0;u<o.length;u++)o[u]=a[u]%e.shape[u];var s=e.locToIndex(o);i.values[r]=e.values[s]}return i.toTensor()}function Wa(e,t,n,r,i){for(var a=t[t.length-1],o=[e.length/a,a],u=o[0],s=o[1],c=U(n,u*r),l=U("int32",u*r),f=0;f<u;f++){for(var d=f*s,p=e.subarray(d,d+s),h=[],m=0;m<p.length;m++)h.push({value:p[m],index:m});h.sort((function(e,t){return t.value-e.value}));var v=f*r,g=c.subarray(v,v+r),y=l.subarray(v,v+r);for(m=0;m<r;m++)g[m]=h[m].value,y[m]=h[m].index}var b=t.slice();return b[b.length-1]=r,[Dn(c,b,n),Dn(l,b,"int32")]}function Ua(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var i=nr(e,"int32"),a=nr([n.length,e.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]),u=r*e.length;a.values.set(o,u)}return a.toTensor()}var Va=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Ha=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},qa=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,i=e.batchSize,a=e.inSize,o=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var u="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+s+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+u+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Ga(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function $a(e,t){return 1===t?[e]:Ga(e,t)}function Ka(){var e,t,n,r,i,a,o,u,s,c;return 2===d().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",u="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",s="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",u="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",s="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:u,defineSpecialInf:s,defineRound:c}}function Xa(e,t,n){void 0===n&&(n="index");var r=ne(t);return r.map((function(t,i){return"int "+e[i]+" = "+n+" / "+t+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+t:"index -= "+e[i]+" * "+t)+";"})).join("")}function Ya(e){var t=ne(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Ja="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Za(e,t,n,r){var i=[];e.forEach((function(e){var t=R(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(i.push("uniform sampler2D "+e.name+";"),i.push("uniform int offset"+e.name+";"))}));var a,o,u=i.join("\n"),s=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?function e(t){var n,r,i;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Ka(),"\n    vec4 "+r+"() {\n      return "+i.texture2D+"("+n+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Ka();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+a.texture2D+"("+t+", uv);\n    }\n  "}(t);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,a=i[0],o=i[1],u=Ka();if(null!=i&&D(t,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+a+".0);\n\n        return "+u.texture2D+"("+n+", uv);\n      }\n    ";var s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+s[0]+", "+s[1]+", row, col);\n      return "+u.texture2D+"("+n+", uv);\n    }\n  "}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===n[0]){var u=oo(t,n.slice(1));return"\n        "+e(u)+"\n        vec4 "+i+"(int b, int row, int col) {\n          return "+i+"("+uo(["b","row","col"],[1,2])+");\n        }\n      "}var s=o[0],c=o[1],l=Math.ceil(n[2]/2);return"\n    vec4 "+i+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+s+", "+c+", "+l*Math.ceil(n[1]/2)+", "+l+", b, row, col);\n      return "+Ka().texture2D+"("+r+", uv);\n    }\n  "}(t);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=o[0],s=o[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),f="int b, int row, int col",d="b * "+l+" + (row / 2) * "+c+" + (col / 2)",p=2;p<n-1;p++)f="int b"+p+", "+f,d="b"+p+" * "+(l*=t[n-p-1])+" + "+d;return"\n    vec4 "+i+"("+f+") {\n      int index = "+d+";\n      int texR = index / "+s+";\n      int texC = index - texR * "+s+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+s+", "+u+");\n      return "+Ka().texture2D+"("+r+", uv);\n    }\n  "}(t)}}(e):function e(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,i=r[0],a=r[1];if(1===i&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+o[0]+", "+o[1]+", "+ro(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+io(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,i=r[0],a=r[1];if(1===a&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=ro(t);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+a+", index + "+o+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t);case 2:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(null!=a&&D(n,a)){var o=a[0];return"\n    float "+i+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+o+".0);\n      return sampleTexture("+r+", uv);\n    }\n  "}var u=W(n),s=u.newShape,c=u.keptDims,l=s;if(l.length<n.length){var f=oo(t,l);return"\n      "+e(f)+"\n      float "+i+"(int row, int col) {\n        return "+i+"("+uo(["row","col"],c)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+n[1]+", 1)));\n        "+io(t)+"\n      }\n    ";var d=a[0],p=a[1],h=ro(r);return 1===p?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===d?"\n    float "+i+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+p+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+i+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+n[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+d+", "+p+", index);\n    return sampleTexture("+r+", uv);\n  }\n"}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],o=n[2],u=W(n),s=u.newShape,c=u.keptDims,l=s;if(l.length<n.length){var f=oo(t,l);return"\n        "+e(f)+"\n        float "+i+"(int row, int col, int depth) {\n          return "+i+"("+uo(["row","col","depth"],c)+");\n        }\n      "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+o+", 1)));\n        "+io(t)+"\n      }\n    ";var d=t.shapeInfo.texShape,p=d[0],h=d[1],m=t.shapeInfo.flatOffset;return h===a&&null==m?"\n        float "+i+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+o+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+p+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ":h===o&&null==m?"\n    float "+i+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+n[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+p+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n      float "+i+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+o+" + depth + "+ro(r)+";\n        vec2 uv = uvFromFlat("+p+", "+h+", index);\n        return sampleTexture("+r+", uv);\n      }\n  "}(t);case 4:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],o=n[2]*a,u=n[1]*o,s=W(n),c=s.newShape,l=s.keptDims;if(c.length<n.length){var f=oo(t,c);return"\n      "+e(f)+"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        return "+i+"("+uo(["row","col","depth","depth2"],l)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+u+", "+o+", "+a+", 1)));\n        "+io(t)+"\n      }\n    ";var d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],m=p[1];return m===u&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":m===a&&null==d?"\n      float "+i+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+n[1]*n[2]+", "+n[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+o+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+m+", index + "+ro(r)+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 5:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[4],o=n[3]*a,u=n[2]*o,s=n[1]*u,c=W(n),l=c.newShape,f=c.keptDims;if(l.length<n.length){var d=oo(t,l);return"\n      "+e(d)+"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+i+"("+uo(["row","col","depth","depth2","depth3"],f)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+u+", "+o+", "+a+")) +\n          depth3;\n        "+io(t)+"\n      }\n    ";var p=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,m=h[0],v=h[1];return v===s&&null==p?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+u+", "+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":v===a&&null==p?"\n      float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]+",\n               "+n[2]*n[3]+", "+n[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+u+" + depth * "+o+" +\n          depth2 * "+a+" + depth3 + "+ro(r)+";\n      vec2 uv = uvFromFlat("+m+", "+v+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 6:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=W(n),o=a.newShape,u=a.keptDims;if(o.length<n.length){var s=oo(t,o);return"\n      "+e(s)+"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+i+"("+uo(["row","col","depth","depth2","depth3","depth4"],u)+");\n      }\n    "}var c=n[5],l=n[4]*c,f=n[3]*l,d=n[2]*f,p=n[1]*d;if(t.shapeInfo.isUniform)return"\n      float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+p+", "+d+", "+f+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+c+", 1)));\n        "+io(t)+"\n      }\n    ";var h=t.shapeInfo.flatOffset,m=t.shapeInfo.texShape,v=m[0],g=m[1];return g===p&&null==h?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+d+", "+f+", "+l+", "+c+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":g===c&&null==h?"\n      float "+i+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]*n[4]+",\n               "+n[2]*n[3]*n[4]+",\n               "+n[3]*n[4]+",\n               "+n[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+p+" + col * "+d+" + depth * "+f+" +\n          depth2 * "+l+" + depth3 * "+c+" + depth4 + "+ro(r)+";\n      vec2 uv = uvFromFlat("+v+", "+g+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(e);var i=e.shapeInfo.logicalShape,a=t.logicalShape;return i.length<=a.length&&(r+=n?function(e,t){var n,r=e.name,i=r.charAt(0).toUpperCase()+r.slice(1),a="get"+i+"AtOutCoords",o=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,s=Fr(e.shapeInfo.logicalShape,t.logicalShape),c=ao(u),l=u-o,f=["x","y","z","w","u","v"];n=0===o?"":u<2&&s.length>=1?"coords = 0;":s.map((function(e){return"coords."+f[e+l]+" = 0;"})).join("\n");var d;d=u<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+l]})).join(", ");var p="return outputValue;",h=1===R(e.shapeInfo.logicalShape),m=1===R(t.logicalShape);if(1!==o||h||m){if(h&&!m)p=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){var v=o-2,g=o-1;s.indexOf(v)>-1&&s.indexOf(g)>-1?p="return vec4(outputValue.x);":s.indexOf(v)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+i+"("+d+");\n      "+p+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.texShape,o=e.shapeInfo.texShape,u=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&u===s&&null==e.shapeInfo.flatOffset&&D(o,a))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c=ao(s),l=Fr(e.shapeInfo.logicalShape,t.logicalShape),f=s-u,d=["x","y","z","w","u","v"];return"\n    float "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+(0===u?"":s<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords."+d[e+f]+" = 0;"})).join("\n"))+"\n      return get"+r+"("+(s<2&&u>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+f]})).join(", "))+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),c=t.texShape,l=Ka(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(l),d=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+Qa+"\n    "+eo+"\n    "+to+"\n  "}(l);return t.isPacked?(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(D(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),a=i,o="",u="b, r, c",s=2;s<e.length-1;s++)o="\n      int b"+s+" = index / "+(a*=e[e.length-s-1])+";\n      index -= b"+s+" * "+a+";\n    "+o,u="b"+s+", "+u;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+u+");\n    }\n  "}(e,t)}var n,r,i,a,o}(t.logicalShape,c),o=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(l)):(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return D(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Xa(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Xa(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Xa(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Xa(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),o=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(l)),r&&(d+=no),[d,f,o,u,a,s,n].join("\n")}var Qa="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",eo="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",to="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",no="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function ro(e){return"offset"+e}function io(e){var t=e.name,n=R(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function ao(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function oo(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function uo(e,t){return t.map((function(t){return e[t]})).join(", ")}var so=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,j(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var i=e[e.length-1],a=Math.ceil(i/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,u,s=this.outputShape,c=s.length,l=ao(c),f=$a("coords",c);if(1===a){var d=ao(u=c+1);o="\n        "+d+" sourceLocR = "+d+"("+f.join()+", 0);\n        ++"+f[c-1]+";\n        "+d+" sourceLocG = "+d+"("+f.join()+", 0);\n        ++"+f[c-2]+";\n        "+d+" sourceLocA = "+d+"("+f.join()+", 0);\n        --"+f[c-1]+";\n        "+d+" sourceLocB = "+d+"("+f.join()+", 0);\n        --"+f[c-2]+";"}else u=c,o="\n        "+l+" sourceLocR = coords;\n        ++"+f[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+f[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+f[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+f[c-2]+";";var p=["x","y","z","w","u","v"].slice(0,u),h="."+p[u-1],m=p.map((function(e){return"int "+e})),v=$a("sourceLocR",u-1).concat("inIdx.r"),g=$a("sourceLocG",u-1).concat("inIdx.g"),y=$a("sourceLocB",u-1).concat("inIdx.b"),b=$a("sourceLocA",u-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",O="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",k=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+p.join()+"),\n                                          vec2("+p.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+p.join()+"),\n                               vec2("+p.slice(-2).join()+"));\n      }\n      "+k+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+f[c-1]+" < "+(s[c-1]-1)+";\n        bool hasNextRow = "+f[c-2]+" < "+(s[c-2]-1)+";\n        "+o+"\n        ivec4 srcIdx = ivec4(sourceLocR"+h+", sourceLocG"+h+",\n          sourceLocB"+h+", sourceLocA"+h+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+O+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+O+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},co=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterHeight,s=e.effectiveFilterWidth,c=u-1-e.padInfo.top,l=s-1-e.padInfo.left,f=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+f+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+u+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+s+";\n            wC+= "+o+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},lo=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=l-1-e.padInfo.front,h=f-1-e.padInfo.top,m=d-1-e.padInfo.left,v=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+p+", "+h+", "+m+");\n      const float avgMultiplier = float("+v+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+u+") {\n          float dyD = float(dyDCorner + wD) / "+i+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+f+";\n              wR += "+s+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+d+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},fo=function(e,t,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],zr(e,t),zr(e,n);var o="0.0";null!=r&&(zr(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="1.0";null!=i&&(zr(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+u+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},po=function(e,t,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],zr(e,t),zr(e,n);var o="vec4(0.0)";null!=r&&(zr(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(zr(e,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+u+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},ho=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=zr(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},mo="return a + b;",vo="return a - b;",go="return a * b;",yo="return (a < 0.) ? b * a : a;",bo=function(e,t,n){this.variableNames=["A","B"],this.outputShape=zr(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},xo="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",wo=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=zr(t,n);var i=this.outputShape.length,a="";if(r)if(0===i||1===R(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+ao(i)+" coords = getOutputCoords();\n        ",1===i)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=$a("coords",i);a+="\n            bool nextRowOutOfBounds =\n              ("+o[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+o[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},Oo=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),ko=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Eo=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},So=function(e){this.outputShape=[],this.outputShape=jn(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var i=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var a=t.length,o=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Co=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=jn(e,t);var n=this.outputShape,r=n.length,i=ao(r),a=$a("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var u=new Array(e.length-1);u[0]=e[0][t];for(var s=1;s<u.length;s++)u[s]=u[s-1]+e[s][t];var c=o[t],l=o.slice(-2),f=o.join(),d="if ("+c+" < "+u[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+l.join()+"));\n        }";for(s=1;s<u.length;s++){var p=u[s-1];d+="\n        if ("+c+" < "+u[s]+"  && "+c+" >= "+u[s-1]+") {\n          return getChannel(\n            getT"+s+"("+_o(o,c,p)+"),\n            vec2("+_o(l,c,p)+"));\n        }"}var h=u.length,m=u[u.length-1];d+="\n        return getChannel(\n          getT"+h+"("+_o(o,c,m)+"),\n          vec2("+_o(l,c,m)+"));",this.userCode="\n      float getValue("+o.map((function(e){return"int "+e}))+") {\n        "+d+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function _o(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var jo=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ao=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,u=n-1-e.padInfo.left,s=a?1:2,c=a?2:3,l=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+s+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},To=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+i+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+o+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},No=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,u=t-1-e.padInfo.front,s=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+u+", "+s+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ro=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Do=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,a=t-1-e.padInfo.top,o=n-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+u+"; dm++) {\n              int d2 = d1 * "+u+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Io=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,u=e.strideWidth,s=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4,h="channelsLast"===e.dataFormat,m=h?1:2,v=h?2:3,g=h?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+o+", "+u+");\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+v+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+h+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===p)+") {\n\n              if ("+h+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+d+") *\n                    getW(wR, wC, "+d+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+d+", xR, xC) *\n                    getW(wR, wC, "+d+", d2);\n              }\n\n            } else if ("+(2===p)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2)\n              );\n\n              if ("+h+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===p)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2),\n                getW(wR, wC, "+d+" + 2, d2)\n              );\n\n              if ("+h+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1),\n                  getX(batch, xR, xC, "+d+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC),\n                  getX(batch, "+d+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},Mo=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,f=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),h=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+a+", "+o+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+u+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+s+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===h)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+p+") *\n                  getW(wF, wR, wC, "+p+", d2);\n              } else if ("+(2===h)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===h)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1),\n                  getX(batch, xF, xR, xC, "+p+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2),\n                  getW(wF, wR, wC, "+p+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Fo=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,u=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=e.outChannels/e.inChannels,m="",v="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",v="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+s+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+h+";\n        int q = d2 - d1 * "+h+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+v+"\n        setOutput(result);\n      }\n    "},Po=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var i=e.inHeight,a=e.inWidth,o=e.padInfo.top,u=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=p,m="int xR; int xC; int xCOffset;",v=0;v<d;v++)for(var g=0;g<p;g++)m+="\n          vec4 xTexelR"+v+"C"+2*g+" = vec4(0.);\n          vec4 wR"+v+"C"+g+" = vec4(0.);\n          vec4 xR"+v+"C"+g+" = vec4(0.);";for(v=0;v<d;v++)for(var y=0;y<h;y++){if(m+="\n          xR = xRCorner + "+v*l+";\n          xC = xCCorner + "+(g=2*y)*f+";\n        ",1===c){if(g<p&&(m+=u%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+v+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+v+"C"+g+" = vec4(previous.zw, xTexelR"+v+"C"+g+".xy);\n                } else {\n                  xR"+v+"C"+g+" = vec4(0, 0, xTexelR"+v+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = xTexelR"+v+"C"+g+";\n              ",g+1<p)){var b=u%2==0?C(f):f;f%2==0&&u%2==1||f%2!=0&&u%2!=1?(m+="\n                  xCOffset = xC + "+u%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+v+"C"+g+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+v+"C"+(g+1)+" = xTexelR"+v+"C"+(g+2)+";\n                "}}else g<p&&(m+="\n              if(xR >= 0 && xR < "+i+") {\n            ",u%2==1?(m+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n              ",g+1<p&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+v+"C"+(g+1)+" = vec4(xTexelR"+v+"C"+(g+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".xy, xTexelR"+v+"C"+(g+2)+".xy);\n              ",g+1<p&&(m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n                ")),m+="}");g<p&&(m+="\n            vec4 wTexelR"+v+"C"+g+" = getW("+v+", "+g+", d1, q);\n            wR"+v+"C"+g+" = vec4(wTexelR"+v+"C"+g+".xz, wTexelR"+v+"C"+g+".xz);\n          ",g+1<p&&(m+="\n              vec4 wTexelR"+v+"C"+(g+1)+" = getW("+v+", "+(g+1)+", d1, q);\n              wR"+v+"C"+(g+1)+" =\n                vec4(wTexelR"+v+"C"+(g+1)+".xz, wTexelR"+v+"C"+(g+1)+".xz);"))}for(v=0;v<d;v++)for(g=0;g<p;g++)m+="dotProd += xR"+v+"C"+g+" * wR"+v+"C"+g+";";var x="",w="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var O=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+s+", "+c+");\n      const ivec2 pads = ivec2("+o+", "+u+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+O+"\n        "+w+"\n        setOutput(result);\n      }\n    "},zo=function(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],o=e[1],u=e[2],s=e[3],c=t[0],l=n[0],f=n[1];this.outputShape=[c,l,f,s];var d="bilinear"===r?1:0,p=[o-1+".0",u-1+".0"],h=p[0],m=p[1],v=l>1?[""+(o-1)/(l-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],g=v[0],y=v[1],b=v[2],x=f>1?[""+(u-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=x[0],O=x[1],k=x[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+O+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+k+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+d+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Lo=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=e[e.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+ao(r)+" coords = getOutputCoords();\n        int end = "+Bo(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Bo(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Bo(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Wo=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=He.DENSE;var t=Ze(e),n=Ka();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Xa(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Uo=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=He.DENSE;var t=Ze(e),n=Ka();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Xa(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Vo=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Ho=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},qo=function(e){this.variableNames=["A"],this.outTexUsage=qe.DOWNLOAD;var t=Ka();this.outputShape=e,this.userCode="\n      "+Ja+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Go=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qe.DOWNLOAD;var t=Ka();this.outputShape=e,this.userCode="\n      "+Ja+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},$o=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Ka(),i=t[0],a=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+Ya(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},Ko=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Ka(),i=t[0],a=t[1];this.outputShape=e;var o="",u="result";n&&(u="floor(result * 255. + 0.5)");for(var s=0;s<=1;s++)for(var c=0;c<=1;c++){var l=2*s+c;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+s+" < "+e[1]+") {\n              localCoords[1] += "+s+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Ya(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+u+";\n      }\n    "},Xo=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Yo=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Jo=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var i=ao(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=0;a<e.length;a++)a===t?i.push("int(getIndices("+r[a]+"))"):i.push(""+r[a]);return i.join()}(e,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},Zo=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=ao(t.length),i=ao(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Qo(e,t){var n=Ka();return at(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function eu(e,t){return pt(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function tu(e,t){return ht(e,t,new Uint16Array([0,1,2,2,1,3]))}function nu(e,t,n,r,i,a,o){vt(n,r);var u=mt(e,t),s=e.TEXTURE_2D;return tt(e,t,(function(){return e.bindTexture(s,u)})),tt(e,t,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),tt(e,t,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),tt(e,t,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),tt(e,t,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),tt(e,t,(function(){return e.texImage2D(s,0,i,n,r,0,a,o,null)})),tt(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),u}function ru(e,t,n,r,i){var a=Je(n,r);return nu(e,t,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function iu(e,t,n,r,i){var a=Je(n,r);return nu(e,t,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function au(e,t,n,r,i){var a=Je(n,r);return nu(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function ou(e,t,n,r,i){var a=Qe(n,r);return nu(e,t,a[0],a[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function uu(e,t,n,r,i){var a=Qe(n,r);return nu(e,t,a[0],a[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function su(e,t,n,r){return tt(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),yt(e,t,n,"clipSpacePos",r,3,20,0)&&yt(e,t,n,"uv",r,2,20,12)}function cu(e,t,n,r,i,a,o){var u,s,c;tt(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),a instanceof Uint8Array?(u=new Uint8Array(r*i*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(u=new Float32Array(r*i*4),s=e.FLOAT,c=o.internalFormatPackedFloat),u.set(a),tt(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,i,0,e.RGBA,s,u)})),tt(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function lu(e,t,n,r){tt(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?tt(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):tt(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),tt(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function fu(e,t,n,r,i){var a=e.createBuffer();tt(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var o=16*n*r;return tt(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)})),tt(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),tt(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function du(e,t,n){var r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function pu(e,t,n,r,i){var a=Je(n,r),o=a[0],u=a[1],s=new Uint8Array(n*r*4);return tt(e,t,(function(){return e.readPixels(0,0,o,u,i.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}function hu(e,t,n,r,i,a,o,u){var s=e,c=new Float32Array(function(e,t){var n=Qe(e,t);return n[0]*n[1]*4}(a,o));return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,c),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),c}function mu(e,t,n,r){var i=new Float32Array(n*r*4);return tt(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,i)})),i}var vu=Object.freeze({createVertexShader:Qo,createVertexBuffer:eu,createIndexBuffer:tu,createFloat32MatrixTexture:ru,createFloat16MatrixTexture:iu,createUnsignedBytesMatrixTexture:au,createPackedMatrixTexture:ou,createFloat16PackedMatrixTexture:uu,bindVertexProgramAttributeStreams:su,uploadDenseMatrixToTexture:cu,uploadPixelDataToTexture:lu,createBufferFromOutputTexture:fu,downloadFloat32MatrixFromBuffer:du,downloadByteEncodedFloatMatrixFromOutputTexture:pu,downloadPackedMatrixFromBuffer:hu,downloadMatrixFromPackedOutputTexture:mu}),gu=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=d().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,Xe(t,e)):this.gl=Ye(t);var n="WEBGL_color_buffer_float";if(1===d().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=it(this.gl,this.debug,"OES_texture_float"),zt(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=it(this.gl,this.debug,"OES_texture_half_float");else if(d().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),zt(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=it(this.gl,this.debug,"EXT_color_buffer_half_float");else if(d().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",zt(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!zt(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=eu(this.gl,this.debug),this.indexBuffer=tu(this.gl,this.debug),this.framebuffer=gt(this.gl,this.debug),this.textureConfig=et(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return d().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;tt(t,this.debug,(function(){return t.finish()})),tt(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),tt(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),tt(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),tt(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),tt(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),ru(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),iu(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),au(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),lu(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),cu(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),uu(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),ou(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Et(this.gl,this.debug,this.framebuffer),this.outputTexture=null),tt(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return pu(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,a){return hu(this.gl,e,0,0,0,i,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return du(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=fu(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(d().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=i.clientWaitSync(a,0,0);return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=a}else d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return mu(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=ot(t,this.debug,e),r=Qo(t,this.debug),i=lt(t,this.debug);return tt(t,this.debug,(function(){return t.attachShader(i,r)})),tt(t,this.debug,(function(){return t.attachShader(i,n)})),ft(t,this.debug,i),this.debug&&dt(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=su(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&tt(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&dt(this.gl,this.debug,this.program),tt(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?xt(this.gl,this.debug,e,t):wt(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),tt(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Ot(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=Qe(t,n),i=r[0],a=r[1];this.setOutputMatrixTextureDriver(e,i,a)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&dt(this.gl,this.debug,this.program),St(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),tt(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),tt(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=it(this.gl,this.debug,2===d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(2!==d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return s(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){switch(n.label){case 0:return[4,z((function(){return t.disposed||t.isQueryAvailable(e,d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||z((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),kt(this.gl,this.debug,e,this.framebuffer),this.debug&&St(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(kt(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&St(this.gl)):Et(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;kt(r,this.debug,e,this.framebuffer),this.debug&&St(r),this.outputTexture=e,tt(r,this.debug,(function(){return r.viewport(0,0,t,n)})),tt(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this;this.throwIfDisposed(),tt(this.gl,this.debug,(function(){return i.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function yu(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,i=t[n],a=i.shape;if(!D(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!e.isUniform||!i.isUniform){var o=e.texShape,u=i.isUniform?null:i.texData.texShape;if(!D(o,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+u+" must match")}}))}var bu=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,i=n.inChannels,a=n.strideWidth,o=n.strideHeight,u=n.padInfo,s=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,f=n.dataFormat,d=u.left,p=u.top,h=i*r,m=Ka(),v="channelsLast"===f,g=v?0:1,y=v?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+s+")) * "+o+" - "+p+";\n            d0 = offsetY + "+l+" * (pos / "+h+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+s+".) * "+a+". - "+d+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+h+".) / "+i+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+v+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "},xu=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=t,u=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";a=.5===i?"inversesqrt("+s+")":1===i?"1.0/("+s+")":"exp(log("+s+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+u+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},wu=function(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},Ou=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=t,u=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";a=.5===i?"inversesqrt("+s+")":1===i?"1.0/("+s+")":"exp(log("+s+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+o+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+o+"; j <= "+o+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+u+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},ku=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,u=a-1-e.padInfo.left,s=i*a-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Eu=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterDepth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=u-1-e.padInfo.front,f=s-1-e.padInfo.top,d=c-1-e.padInfo.left,p=u*s*c-1;this.userCode="\n      const ivec3 pads = ivec3("+l+", "+f+", "+d+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n           wD += "+i+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+s+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+o+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+p+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+s+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Su=function(e,t,n,r,i,a,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===o&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var u=n?e[1]:e[2],s=Math.ceil(u/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",h="";a&&(p=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",h="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+p+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+f[0]+" * "+d[0]+");\n          result += ("+f[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+h+"\n\n        setOutput(result);\n      }\n    "},Cu=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),_u=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},ju=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=$a("rc",t),r=ao(t),i=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",i=e-2;i<e;i++)r+=n[i]+" >= "+t[i],i<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var a=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),o=2;o<e;o++)a=t[t.length-1-o]+","+a;n.push(a)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}},Au=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,i=ao(r),a=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+a+");\n      "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+u+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Tu=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,i=ao(r),a=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),u=$a("rc",r),s=$a("source",r),c=u[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+s.slice(-2).join()+")",f=[i+" rc = outputLoc;",u[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+u[r-2]+" += 1;\n       if("+u[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+u[r-1]+" += 1;\n         if("+c+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",h=0,m=1===r?2:4;h<m;h++)p+="\n        "+f[h]+"\n        if ("+d+") {\n          result["+h+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+h+"] = getChannel(getX("+s.join()+"), "+l+");\n        }\n      ";p+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+a+");\n      const "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+p+"\n        setOutput(result);\n      }\n    "},Nu=function(e,t,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,o=e.strideHeight,u=e.strideWidth,s=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;var h="avg"===t,m="((batch  * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + d",v="(xR * "+e.inWidth+" + xC) * "+e.inChannels+" + d",g="0.0";if(h||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+u+");\n        const ivec2 pads = ivec2("+d+", "+p+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+s+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+";\n                wC += "+c+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = "+(r?i?m:v:"wR * "+f+" + wC")+";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(a/4),x=a%4,w="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+u+");\n      const ivec2 pads = ivec2("+d+", "+p+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+l+";\n            wR += "+s+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+b+"; wC += 4) {\n            int xC = xCCorner + wC * "+c+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+c+", d),\n              getValue(batch, xR, xC + 2 * "+c+", d),\n              getValue(batch, xR, xC + 3 * "+c+", d)\n            );\n\n            "+w+"\n          }\n\n          int xC = xCCorner + "+b+";\n          if ("+(1===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(2===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+c+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(3===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+c+", d),\n              getValue(batch, xR, xC + 2 * "+c+", d),\n              initializationValue\n            );\n\n            "+w+"\n          }\n        }\n        setOutput("+y+");\n      }\n    "}},Ru=function(e,t,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var a=e.filterWidth,o=e.strideDepth,u=e.strideHeight,s=e.strideWidth,c=e.dilationDepth,l=e.dilationHeight,f=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var y="avg"===t,b="0.0";if(y||(b="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+u+", "+s+");\n        const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+d+";\n              wD += "+c+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+p+";\n                wR += "+l+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+f+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = "+(r?i?"(((batch * "+e.inDepth+" + xD) * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"((xD * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"wD * "+p+" * "+h+" +\n                      wR * "+h+" + wC")+";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / count");var w=4*Math.floor(a/4),O=a%4,k="\n      if ("+y+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+u+", "+s+");\n      const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n      const float initializationValue = "+b+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+b+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+d+";\n            wD += "+c+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+p+";\n            wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+w+"; wC += 4) {\n              int xC = xCCorner + wC * "+f+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+f+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+f+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+f+", ch)\n              );\n\n              "+k+"\n            }\n\n            int xC = xCCorner + "+w+";\n            if ("+(1===O)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+k+"\n            } else if ("+(2===O)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+f+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+k+"\n            } else if ("+(3===O)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+f+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+f+", ch),\n                initializationValue\n              );\n\n              "+k+"\n            }\n          }\n          setOutput("+x+");\n        }\n      }\n    "}},Du=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,i=e.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",u="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",u="min"):"max"===t&&(o="-1.0 / 1e-20",u="max");var s=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?s="sumValue":"prod"===t?s="prodValue":"all"===t?s="allValue":"any"===t&&(s="anyValue");var c=4*Math.floor(n/4),l=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+u+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===t?(o="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(o="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";i%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+p+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+s+");\n      }\n    "},Iu=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Xa(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Ya(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Mu=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],a=r[2],o=e.shape,u=o[1],s=o[2],c=[n&&u>1?i-1:i,n&&s>1?a-1:a],l=[n&&u>1?u-1:u,n&&s>1?s-1:s],f=c[0]/l[0],d=c[1]/l[1],p=1/f,h=1/d,m=2*Math.ceil(p)+2,v=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+u+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+s+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Fu=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],u=e[3];this.outputShape=[i,t,n,u];var s=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Pu=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=e[0],a=e[1],o=e[2],u=e[3];this.outputShape=[i,t,n,u];var s=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+",\n          "+s[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+o+".0,\n                                     "+o+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(u-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},zu=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],a=r[2],o=e.shape,u=o[1],s=o[2],c=[n&&u>1?i-1:i,n&&s>1?a-1:a],l=[n&&u>1?u-1:u,n&&s>1?s-1:s],f=c[0]/l[0],d=c[1]/l[1],p=1/f,h=1/d,m=2*Math.ceil(p)+2,v=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+u+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+s+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Lu=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],a=e[1],o=e[2],u=e[3];this.outputShape=[i,t,n,u];var s=[r&&t>1?a-1:a,r&&n>1?o-1:o],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Bu=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),i=ao(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Wu=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=$a("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],o=ao(n);function u(n){var r=e.map((function(r,i){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return u(e)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",u(e)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",u(e)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",u(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Uu=function(e,t,n,r,i,a,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var u=ao(i.length),s=ao(a.length),c="";1===n?c="i":2===n&&(c="i, j");var l="getIndices("+c+")",f="";1===r?f="i":2===r&&(f="i, coords[1]");var d="getUpdates("+f+")",p=t>1?"strides[j]":"strides";this.userCode="\n        "+u+" strides = "+u+"("+i+");\n\n        void main() {\n          "+s+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+p+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+d+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Vu=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var u=4*Math.floor(n/4),s=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";i%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var f="";i%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+u+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+u+";\n        if ("+(1===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Hu=function(e,t,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],u=[],s=0;s<t.length;s++)u.push(""+a[s]),s<e&&o.push(""+a[s]);r=o.join(),i=u.join()}var c=ao(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},qu=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=ao(this.rank),r="uniform int start["+this.rank+"];",i=function(e){if(1===e)return"sourceLoc";if(e<=6)return Gu.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Gu[t]+" = start["+t+"] + coords."+Gu[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+i+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Gu=["x","y","z","w","u","v"],$u=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=ao(this.rank),n=$a("coords",this.rank),r=$a("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+i+")",o="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",u=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",s=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+s+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+u+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Ku=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=ao(n.length),a=ao(n.length),o="";if(1===r)o="coords * strides + begin";else{var u=0;o=n.map((function(e,t){return u++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(u-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "},Xu=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,i=Yu(t,n),a=Ju(e,i,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var o=this.freeTextures[a].shift();return this.usedTextures[a].push(o),o}return this.numUsedTextures++,this.log(),i===Ge.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Ge.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Ge.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Ge.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Ge.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var i=Ju(t,Yu(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],o=a.indexOf(e);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(o,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Yu(e,t){if(e===qe.UPLOAD)return Ge.PACKED_2X2_FLOAT32;if(e===qe.RENDER||null==e)return function(e){return d().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Ge.PACKED_2X2_FLOAT32:Ge.UNPACKED_FLOAT32:e?Ge.PACKED_2X2_FLOAT16:Ge.UNPACKED_FLOAT16}(t);if(e===qe.DOWNLOAD||e===qe.PIXELS)return Ge.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Ju(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var Zu=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var i=ao(this.rank),a=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<e.length;i++)r.push("imod("+n[i]+", "+e[i]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},Qu=1.7580993408473768,es=1.0507009873554805,ts=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},ns="if (isnan(x)) return x;",rs="return abs(x);",is=ns+"\n  return (x < 0.0) ? 0.0 : x;\n",as=ns+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",os="return (x >= 0.0) ? x : (exp(x) - 1.0);",us="return -x;",ss="return ceil(x);",cs="return floor(x);",ls="return exp(x);",fs="return exp(x) - 1.0;",ds="return x;",ps="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",hs="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",ms="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",vs=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},gs=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=$a("rc",t),r=ao(t),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),o=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},ys={};function bs(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?ps:is;if("elu"===e)return t?ms:os;if("relu6"===e)return t?hs:as;if("prelu"===e)return t?xo:yo;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var xs=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!d().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var i=Ye(d().getNumber("WEBGL_VERSION"));r.binaryCache=((n=d().getNumber("WEBGL_VERSION"))in ys||(ys[n]={}),ys[n]),r.gpgpu=new gu(i),r.canvas=i.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Xu(r.gpgpu),r.numMBBeforeWarning=null==d().global.screen?1024:d().global.screen.height*d().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new sa(r,We),r}return u(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(d().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:qe.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(d().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:qe.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensors,a=t.slice,o=t.shape,u=t.isPacked;if(null!=a){var s;s=u?new vs(o,ds):new ts(o,ds);var c=this.runWebGLProgram(s,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeData(c.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,p=null!=this.activeTimers;return p&&(f=ue()),d="complex64"===r?_a(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(e),p&&(this.downloadWaitMs+=ue()-f),this.convertAndCacheOnCPU(e,d)},t.prototype.read=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,a,o,u,s,l,f,p,h,m,v,g,y,b,x,w,O,k,E;return c(this,(function(c){switch(c.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,i=n.shape,a=n.slice,o=n.dtype,u=n.complexTensors,s=n.isPacked,null!=a)return void 0,l=s?new vs(i,ds):new ts(i,ds),f=this.runWebGLProgram(l,[{dataId:e,shape:i,dtype:o}],o),p=this.read(f.dataId),this.disposeData(f.dataId),[2,p];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!d().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===d().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==o&&d().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(e),v=this.texData.get(m.dataId),h=(E=this.gpgpu).createBufferFromTexture.apply(E,[v.texture].concat(Ze(i)))),this.pendingRead.set(e,[]),"complex64"===o?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:c.sent(),c.label=2;case 2:return"complex64"!==o?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return y=c.sent(),b=y[0],x=y[1],g=_a(b,x),[3,5];case 4:null==h?g=this.getValuesFromTexture(e):(w=R(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,w)),c.label=5;case 5:return null!=m&&this.disposeData(m.dataId),O=this.convertAndCacheOnCPU(e,g),k=this.pendingRead.get(e),this.pendingRead.delete(e),k.forEach((function(e){return e(O)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,O]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!nt(n)){if(d().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,a=n.isPacked,o=R(r);if(d().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),s=this.texData.get(u.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[s.texture].concat(Ze(r))).subarray(0,o);return this.disposeData(u.dataId),c}var l=d().getBool("WEBGL_PACK")&&!0===a,f=l?Nt(r):r,p=l?new Go(f):new qo(f),h=this.runWebGLProgram(p,[{shape:f,dtype:i,dataId:e}],"float32"),m=this.texData.get(h.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,o);return this.disposeData(h.dataId),v},t.prototype.time=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,a,o,u;return c(this,(function(s){switch(s.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),i=N(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),a=N(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return u=s.sent(),o.kernelMs=_(u),o.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:a[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:o.kernelMs={error:"WebGL query timers are not supported in this environment."},s.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ue(),endMs:null}},t.prototype.endTimer=function(e){return d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ue(),e)},t.prototype.getQueryTime=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){return d().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,i=t.texShape,a=t.usage,o=t.isPacked,u=t.slice,s=u&&u.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return d().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=We.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&R(e.shape)<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:We.keep(e.clone()),imag:We.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===R(n))return Dn([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,i=Xi(e.shape,t,n);if(r||!i){var a=d().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $u(n):new qu(n),o=a.getCustomSetupFunc(t);return this.compileAndRun(a,[e],null,o)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),i=this.makeOutput(n,e.dtype),a=this.texData.get(i.dataId);Object.assign(a,r),a.shape=n,a.dtype=e.dtype;var o=Yi(t,e.strides);r.slice&&(o+=r.slice.flatOffset),a.slice={flatOffset:o,origDataId:r.slice&&r.slice.origDataId||e.dataId};var u=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,u+1),i},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var i=Gi(t,n,r);if(i.some((function(e){return 0===e})))return Dn([],i);var a=new Ku(t,r,i);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,t){var n=d().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wu(e.shape,t):new Bu(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return Nn(e)})),r=e.map((function(e){return Rn(e)}));return Tn(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>d().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(e.length/2),a=this.concat(e.slice(0,i),t),o=this.concat(e.slice(i),t);return this.concat([a,o],t)}if(d().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var u=new Co(e.map((function(e){return e.shape})),t);return this.compileAndRun(u,e)}var s=jn(e.map((function(e){return e.shape})),t),c=e.map((function(e){return e.as2D(-1,R(e.shape.slice(t)))})),l=new So(c.map((function(e){return e.shape})));return this.compileAndRun(l,c).reshape(s)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,us,e.dtype);var t=new ts(e.shape,us);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var i=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],o=n?e.shape[1]:e.shape[2],u=e.shape[0];if((1===i||1===a)&&o>1e3){n&&(e=ua(e,[0,2,1])),r&&(t=ua(t,[0,2,1]));var s=1===a?e:e.as3D(u,o,1),c=1===a?2:1,l=1===a?t.as3D(u,1,o):t;return this.multiply(s,l).sum(c,!0)}var f=Re(e.dtype,t.dtype),d=new Su(e.shape,[u,i,a],n,r);return this.compileAndRun(d,[e,t],f)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,a=e.bias,o=e.activation,u=e.preluActivationWeights,s=r?t.shape[2]:t.shape[1],c=i?n.shape[1]:n.shape[2],l=t.shape[0],f=Re(t.dtype,n.dtype),d=null!=a,p=null!=u,h=o?bs(o,!0):null,m=new Su(t.shape,[l,s,c],r,i,d,h,p),v=[t,n];return a&&v.push(a),u&&v.push(u),this.compileAndRun(m,v,f)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),i=new ho("return areal * breal - aimag * bimag;",e.shape,t.shape),a=new ho("return areal * bimag + aimag * breal;",e.shape,t.shape),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],u=this.compileAndRun(i,o),s=this.compileAndRun(a,o),c=this.complex(u,s);return u.dispose(),s.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,go,e.dtype);var l=new bo(go,e.shape,t.shape);return this.compileAndRun(l,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,a){var o=[e,t,n],u=null;null!=a&&(u=a.shape,o.push(a));var s=null;if(null!=i&&(s=i.shape,o.push(i)),d().getBool("WEBGL_PACK_NORMALIZATION")){var c=new po(e.shape,t.shape,n.shape,u,s,r);return this.compileAndRun(c,o)}var l=new fo(e.shape,t.shape,n.shape,u,s,r);return this.compileAndRun(l,o)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){var a=d().getBool("WEBGL_PACK_NORMALIZATION")?new Ou(e.shape,t,n,r,i):new xu(e.shape,t,n,r,i);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,t,n,r,i,a,o){var u=new wu(t.shape,r,i,a,o);return this.compileAndRun(u,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return le(e)}));return Ba(nr(e.shape,e.dtype,n),t)}var r=new Zu(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=d().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Tu(e.shape,t,n):new Au(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Jo(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){j(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=mr(e.shape,t,r),a=vr(i.length,t.length),o=gr(e.shape,t,r),u=yr(n,t.length),s=br(o,n,t.length);return ua(e.reshape(i),a).reshape(o).slice(u,s)},t.prototype.spaceToBatchND=function(e,t,n){j(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var a=1+t.length;a<e.shape.length;++a)i.push([0,0]);var o=e.pad(i),u=mr(o.shape,t,r,!1),s=vr(u.length,t.length,!1),c=gr(o.shape,t,r,!1);return ua(o.reshape(u),s).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],i=e.shape[1],a=Li(i),o=new Du({windowSize:a,inSize:i,batchSize:r},t),u=this.compileAndRun(o,[e],n);return 1===u.shape[1]?u:this.reduce(u,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],i=e.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var a=Li(i),o=new qa({windowSize:a,inSize:i,batchSize:r},t,null==n),u=[e];null!=n&&u.push(n);var s=this.compileAndRun(o,u,"int32");return 1===s.shape[1]?s:this.argReduce(e,t,s)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,i=Li(r[r.length-1]),a=new so(r,i,t,null==n),o=null==n?[e]:[e,n],u=this.compileAndRun(a,o,"int32");return u.rank===e.rank?this.argReducePacked(e,t,u):u},t.prototype.sum=function(e,t){kn("sum",t,e.rank);var n=wn(e.shape,t),r=n[0],i=R(n[1]),a=e.as2D(-1,i),o=De(e.dtype);return this.reduce(a,"sum",o).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=wn(e.shape,t),r=n[0],i=R(n[1]),a=e.as2D(-1,i),o=De(e.dtype);return this.reduce(a,"prod",o).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,i=En([r],e.rank),a=e;null!=i&&(a=ua(e,i),r=Cn(1,e.rank)[0]);var o=function(e,t,n){for(var r=[],i=e.length,a=0;a<i;a++)a!==t?r.push(e[a]):r.push(n);return r}(a.shape,r,n),u=R([a.shape[r]]),s=a.as2D(-1,u),c=De(e.dtype),l=this.segOpCompute(s,"unsortedSegmentSum",t,c,n).reshape(o);return null!=i&&(l=ua(l,Sn(i))),l},t.prototype.segOpCompute=function(e,t,n,r,i){var a=e.shape[0],o=e.shape[1],u=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=te(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=te(e,n+1);return n}(o,i),s=new Vu({windowSize:u,inSize:o,batchSize:a,numSegments:i},t),c=this.compileAndRun(s,[e,n],r);return c.shape[1]===i?c:(n=$n(0,i).tile([o/u]),this.segOpCompute(c,t,n,r,i))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(kn("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!d().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=wn(e.shape,r),a=i[0],o=R(i[1]),u=e.as2D(-1,o);return this.argReduce(u,n).reshape(a)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var i=new Lo(e.shape,n,r);return this.compileAndRun(i,[e])},t.prototype.equal=function(e,t){if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new bo("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new bo("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new bo("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new bo("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new bo("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new bo("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new ts(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new bo("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new bo("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Hu(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Re(t.dtype,n.dtype))},t.prototype.where=function(e){hn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Ua(e.shape,t)},t.prototype.topk=function(e,t,n){return Wa(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){kn("min",t,e.rank);var n=wn(e.shape,t),r=n[0],i=R(n[1]),a=e.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new bo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new bo("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);kn("max",t,e.rank);var n=wn(e.shape,t),r=n[0],i=R(n[1]),a=e.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new bo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){kn("all",t,e.rank);var n=wn(e.shape,t),r=n[0],i=R(n[1]),a=e.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(r)},t.prototype.any=function(e,t){kn("any",t,e.rank);var n=wn(e.shape,t),r=n[0],i=R(n[1]),a=e.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(r)},t.prototype.floorDiv=function(e,t){if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new bo("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,mo);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Re(e.dtype,t.dtype);if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,mo,n);var r=new bo(mo,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new vs(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,i){void 0===i&&(i=!1);var a=new wo(n,e.shape,t.shape,i);return this.compileAndRun(a,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,i=this.texData.get(e.dataId),a=this.texData.get(t.dataId),o=[[i.complexTensors.real,a.complexTensors.real],[i.complexTensors.imag,a.complexTensors.imag]].map((function(i){var a=i[0],o=i[1],u=r.makeComplexComponentTensorInfo(e,a),s=r.makeComplexComponentTensorInfo(t,o),c=new bo(n,e.shape,t.shape);return r.compileAndRun(c,[u,s],Re(a.dtype,o.dtype))})),u=o[0],s=o[1],c=this.complex(u,s);return u.dispose(),s.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>d().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var i=e.map((function(e){return e.dtype})).reduce((function(e,t){return Re(e,t)})),a=e.map((function(e){return e.shape})),o=d().getBool("WEBGL_PACK")?new Ha(e[0].shape,a):new Va(e[0].shape,a);return this.compileAndRun(o,e,i)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,vo);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Re(e.dtype,t.dtype);if(d().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,vo,e.dtype);var r=new bo(vo,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new bo("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Re(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ss,e.dtype);var t=new ts(e.shape,ss);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,cs,e.dtype);var t=new ts(e.shape,cs);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new ts(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new ts(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new ts(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new ts(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new ts(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ls,e.dtype);var t=new ts(e.shape,ls);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,fs,e.dtype);var t=new ts(e.shape,fs);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=B([t],e.shape),r=this.max(e,n),i=On(r.shape,n),a=this.subtract(e,r.reshape(i)),o=this.exp(a),u=this.sum(o,n).reshape(i);return Fi(o,u)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new ts(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new ts(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new ts(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new ts(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new ts(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=d().getBool("WEBGL_PACK")?new vs(e.shape,ps):new ts(e.shape,is),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=d().getBool("WEBGL_PACK")?new vs(e.shape,hs):new ts(e.shape,as),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo(xo,e.shape,t.shape):new bo(yo,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ms,e.dtype);var t=new ts(e.shape,os);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new bo("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new ts(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new ts(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,i=(r=d().getBool("WEBGL_PACK_CLIP")?new ko(e.shape):new Oo(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,i)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(d().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rs,e.dtype);var t=new ts(e.shape,rs);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new Eo(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new ts(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new ts(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new ts(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new bo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new ts(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new ts(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new ts(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new ts(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new ts(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new ts(e.shape,function(e){return void 0===e&&(e=0),ns+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,i,a){var o=e.shape,u=this.texData.get(e.dataId),s=n.inChannels,c=o[0]*o[1]*o[2],l=n.outChannels,f="channelsLast"===n.dataFormat,p=(1===c||1===l)&&s>1e3,h=o[2]%2!=0&&!!u.isPacked;if(p||!d().getBool("WEBGL_LAZILY_UNPACK")||!d().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!h){var m=f?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],v=this.reshape(e,[1,m,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:g,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),n.outShape)}var y=f?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),b={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},x=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,j(It(u.shape,b.shape),(function(){return"packed reshape "+u.shape+" to "+b.shape+" isn't free"}));var w=this.reshape(t,[1,n.inChannels,n.outChannels]),O=this.fusedBatchMatMul({a:b,b:w,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:a}),k=this.texData.get(O.dataId);return j(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),u.shape=x,k.shape=n.outShape,We.makeTensorFromDataId(O.dataId,n.outShape,O.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,i,a){var o=n.filterWidth,u=n.filterHeight,s=n.inChannels,c=n.outWidth,l=n.outHeight,f="channelsLast"===n.dataFormat,d=o*u*s,p=l*c,h=[d,p],m=e.squeeze([0]),v=t.reshape([1,d,-1]),g=new bu(h,m.shape,n),y=this.compileAndRun(g,[m]).reshape([1,h[0],h[1]]),b=null!=r,x=null!=a,w=i?bs(i,!0):null,O=new Su(y.shape,[1,p,n.outChannels],!0,!1,b,w,x),k=[y,v];r&&k.push(r),x&&k.push(a);var E=this.compileAndRun(O,k);return f?E.reshape([1,l,c,n.outChannels]):E.reshape([1,n.outChannels,l,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,i,a,o);if(d().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,i,a,o);var u=null!=i,s=null!=o,c=a?bs(a,!1):null,l=new Io(r,u,c,s),f=[t,n];return i&&f.push(i),o&&f.push(o),this.compileAndRun(l,f)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(d().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Io(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new Ao(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new jo(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,i=e.convInfo,a=e.bias,o=e.activation,u=e.preluActivationWeights,s=d().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,c=o?bs(o,s):null,l=[n,r],f=null!=a,p=null!=u;return f&&l.push(a),p&&l.push(u),s?(t=new Po(i,f,c,p),this.compileAndRun(t,l)):(t=new Fo(i,f,c,p),this.compileAndRun(t,l))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return d().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Po(n),this.compileAndRun(r,[e,t])):(r=new Fo(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Do(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Ro(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Mo(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new No(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new To(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new Nu(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new Nu(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var i=new Nu(r,"max",!0),a=this.compileAndRun(i,[t]),o=new ku(r),u=this.compileAndRun(o,[e,a],t.dtype);return a.dispose(),u},t.prototype.avgPoolBackprop=function(e,t,n){var r=new co(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return ka(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,a=0;a<e.rank;a++)a!==t&&(r[i++]=e.shape[a]);var o=new Array(e.rank).fill(0),u=e.shape.slice();u[t]=1;var s=new Array(n);for(a=0;a<s.length;a++)o[t]=a,s[a]=this.slice(e,o,u).reshape(r);return s},t.prototype.avgPool3d=function(e,t){var n=new Ru(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new lo(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new Ru(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var i=new Ru(r,"max",!0),a=this.compileAndRun(i,[t]),o=new Eu(r),u=this.compileAndRun(o,[e,a],t.dtype);return a.dispose(),u},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!It(e.shape,t)&&(null===n.texture||!It(n.shape,t))){var r=this.packedReshape(e,t);return We.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Ea(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var i=d().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Pu(e.shape,t,n,r):new Fu(e.shape,t,n,r);return this.compileAndRun(i,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Mu(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var i=new Lu(e.shape,t,n,r);return this.compileAndRun(i,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new zu(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var i=t?e:aa(e),a=i.shape[0],o=i.shape[1],u=new Cu(a,o,n),s=u.getCustomSetupFunc(r);return this.compileAndRun(u,[i],"int32",s)},t.prototype.oneHot=function(e,t,n,r){var i=new _u(e.size,t,n,r);return this.compileAndRun(i,[e])},t.prototype.diag=function(e){var t=new Ho(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return hn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Da(e.dataSync(),t.dataSync(),n,r,i)},t.prototype.cropAndResize=function(e,t,n,r,i,a){var o=new zo(e.shape,t.shape,r,i,a);return this.compileAndRun(o,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){j(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],i="NHWC"===n?e.shape[1]:e.shape[2],a="NHWC"===n?e.shape[2]:e.shape[3],o="NHWC"===n?e.shape[3]:e.shape[1],u=i*t,s=a*t,c=o/(t*t),l=new Vo("NHWC"===n?[r,u,s,c]:[r,c,u,s],t,n);return this.compileAndRun(l,[e])},t.prototype.split=function(e,t,n){return La(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Ui(0,e,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,u=r.strides,s=r.outputSize,c=[s/o,o],l=e.reshape([a,i]),f=t.reshape([a,o]);if(0===s)return Ea(Dn([]),n);var d=Mn(0),p=new Uu(a,i,l.rank,f.rank,u,c);return this.compileAndRun(p,[f,l,d]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var i=Ui(0,e,n),a=i.sliceRank,o=i.numUpdates,u=i.strides,s=i.outputSize,c=new Uu(o,a,e.rank,t.rank,u,[s,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Xo("return real * expR - imag * expI;",e.shape,t),i=new Xo("return real * expI + imag * expR;",e.shape,t),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],o=this.compileAndRun(r,a),u=this.compileAndRun(i,a),s=this.complex(o,u).as2D(e.shape[0],e.shape[1]);return o.dispose(),u.dispose(),s},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Pi(e,t),a=i[0],o=i[1],u=i[2],s=i[3],c=t.reshape([o,r]),l=e.reshape([e.size/u,u]),f=new Zo(r,s,[o,u]);return this.compileAndRun(f,[l,c]).reshape(a)},t.prototype.fill=function(e,t,n){if("string"===(n=n||Q(t))){var r=V(n,R(e));return r.fill(t),We.makeTensor(r,e,n,this)}var i=new Yo(e,t),a=i.getCustomSetupFunc(t);return this.compileAndRun(i,[],n,a)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return Sa(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return We.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new gs(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new ju(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[At(e.shape)].concat(Tt(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[At(t)].concat(Tt(t)),a=new Iu(i,n),o=this.runWebGLProgram(a,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,i=n.shape,a=n.dtype,o=Nt(i);return t=r?new Uo(o):new Wo(o),{dtype:a,shape:i,dataId:this.runWebGLProgram(t,[{shape:o,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,i){var a=this;void 0===i&&(i=!1);var o=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(o.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===He.DENSE){var s=Ze(e.outputShape);u.texShape=s.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===R(o.shape))return u.values=U(o.dtype,0),o;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&R(t.shape)<=d().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!It(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),c.push(t),n=a.texData.get(t.dataId),r.shape=i}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var f,p={shape:o.shape,texData:u,isUniform:!1},h=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var i=e.userCode;return e.constructor.name+"_"+r+"_"+i}(e,l,p),m=this.getAndSaveBinary(h,(function(){return function(e,t,n,r){var i=t.userCode,a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=a.map((function(e){return e.shapeInfo})),u={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Za(a,u,i,t.packedInputs),c=e.createProgram(s),l=null,f=e.getUniformLocation(c,"NAN",!1);1===d().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var p={},h=0;h<t.variableNames.length;h++){var m=t.variableNames[h];p[m]=e.getUniformLocation(c,m,!1),p["offset"+m]=e.getUniformLocation(c,"offset"+m,!1)}return{program:t,source:s,webGLProgram:c,uniformLocations:p,inShapeInfos:o,outShapeInfo:u,infLoc:l,nanLoc:f}}(a.gpgpu,e,l,p)})),v=null!=this.activeTimers;if(v&&(f=this.startTimer()),function(e,t,n,r,i){yu(t.inShapeInfos,n),yu([t.outShapeInfo],[r]);var a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,o[0],o[1]):e.setOutputMatrixTexture(a,o[0],o[1]),e.setProgram(t.webGLProgram),1===d().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var i=t.program.variableNames[r],a=t.uniformLocations[i],o=t.uniformLocations["offset"+i];if(null!=a)if(n.isUniform)if(R(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{var u=n.uniformValues;u instanceof Float32Array||(u=new Float32Array(u)),e.gl.uniform1fv(a,u)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)})),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,m,l,p,r),c.forEach((function(e){return a.disposeData(e.dataId)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!d().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var g=this.unpackTensor(o);return this.disposeData(o.dataId),g}return o},t.prototype.compileAndRun=function(e,t,n,r,i){void 0===i&&(i=!1),n=n||t[0].dtype;var a=this.runWebGLProgram(e,t,n,r,i);return We.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(d().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=en((function(){if(!d().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=d().getBool("DEBUG");d().set("DEBUG",!1);var n=e.abs(Mn(1e-8)).dataSync()[0];if(d().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,a=n.values,o=n.texture,u=n.usage,s=n.isPacked;if(null==o){var c,l=null!=this.activeTimers;l&&(c=ue());var f=n.texShape;if(null==f&&(f=Rt(r,s),n.texShape=f),null!=a){var d=Nt(r),p=void 0,h=f[1],m=f[0],v=a instanceof Uint8Array;s?(h=(t=Qe(f[0],f[1]))[0],m=t[1],p=new Ko(d,[m,h],v)):p=new $o(d,[m,h],v);var g=this.makeTensorInfo([m,h],i);this.texData.get(g.dataId).usage=v?qe.PIXELS:qe.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),h,m,a);var y=this.runWebGLProgram(p,[g],i,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,l&&(this.uploadWaitMs+=ue()-c)}else{var x=this.acquireTexture(f,u,i,s);n.texture=x}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*K(t)},t}(ca);function ws(e,t){return e(t={exports:{}},t.exports),t.exports}Ue()&&We.registerBackend("webgl",(function(){return new xs}),2),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;var Os=ws((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new r(e),a=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.alea=a}(0,e)})),ks=ws((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xor128=a}(0,e)})),Es=ws((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)})),Ss=ws((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&(a.x&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)})),Cs=ws((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),i=0,a=-32;a<s;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=u[127&a]^=r+o)?i+1:0);for(i>=128&&(u[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=u[i+34&127],n=u[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[i]=r^n;e.w=o,e.X=u,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&(a.X&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)})),_s=ws((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:this.tychei=a}(0,e)})),js=ws((function(e){!function(t,r){var i,a=this,o=256,u="random",s=r.pow(o,6),c=r.pow(2,52),l=2*c,f=255;function d(e,n,f){var d=[],g=m(function e(t,n){var r,i=[],a=typeof t;if(n&&"object"==a)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,v(t)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),v(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,v(t)]}}():e,3),d),y=new p(d),b=function(){for(var e=y.g(6),t=s,n=0;e<c;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(v(y.S),t),(n.pass||f||function(e,t,n,i){return i&&(i.S&&h(i,y),e.state=function(){return h(y,{})}),n?(r[u]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function p(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,u=r.S=[];for(n||(e=[n++]);i<o;)u[i]=i++;for(i=0;i<o;i++)u[i]=u[a=f&a+e[i%n]+(t=u[i])],u[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,u=r.S;e--;)t=u[i=f&i+1],n=n*o+u[f&(u[i]=u[a=f&a+t])+(u[a]=t)];return r.i=i,r.j=a,n})(o)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[f&i]=f&(n^=19*t[f&i])+r.charCodeAt(i++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(r.seedrandom=d,m(r.random(),t),e.exports){e.exports=d;try{i=n(362)}catch(e){}}}([],Math)}));js.alea=Os,js.xor128=ks,js.xorwow=Es,js.xorshift7=Ss,js.xor4096=Cs,js.tychei=_s;var As=js.alea,Ts=An({addN_:function(e){j(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),j(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return gn(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!D(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return We.runKernelFunc((function(e,n){return e.addN(t)}),r,null,"AddN")}});function Ns(){Xt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function Rs(e){return 0===e.rank||1===e.rank?e.as4D(1,1,1,e.size):2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Ds(e,t,n,r,i,a){null==a&&(a=.001);var o,u,s=gn(e,"x","batchNorm"),c=gn(t,"mean","batchNorm"),l=gn(n,"variance","batchNorm");null!=i&&(o=gn(i,"scale","batchNorm")),null!=r&&(u=gn(r,"offset","batchNorm")),j(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),j(null==u||c.rank===u.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),j(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f={x:s,scale:o,offset:u,mean:c,variance:l},d={varianceEpsilon:a};return We.runKernelFunc((function(e,t){var n=Rs(s),r=e.batchNormalization(n,Is(c),Is(l),a,Is(o),Is(u));return t([s,c,l,o]),r}),f,null,"FusedBatchNorm",d).reshape(s.shape)}function Is(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}var Ms=An({batchNormalization_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),Ns(),Ds(e,t,n,a,i,r)}}),Fs=An({batchNorm_:Ds});function Ps(e,t,n,r,i,a){var o,u,s=gn(e,"x","batchNorm"),c=gn(t,"mean","batchNorm"),l=gn(n,"variance","batchNorm");return null!=i&&(o=gn(i,"scale","batchNorm")),null!=r&&(u=gn(r,"offset","batchNorm")),j(2===s.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."})),j(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."})),j(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."})),null!=o&&j(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),null!=u&&j(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."})),Fs(s,c,l,u,o,a)}var zs=An({batchNormalization2d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),Ns(),Ps(e,t,n,a,i,r)}}),Ls=An({batchNorm2d_:Ps});function Bs(e,t,n,r,i,a){var o,u,s=gn(e,"x","batchNorm"),c=gn(t,"mean","batchNorm"),l=gn(n,"variance","batchNorm");return null!=i&&(o=gn(i,"scale","batchNorm")),null!=r&&(u=gn(r,"offset","batchNorm")),j(3===s.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."})),j(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."})),j(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."})),null!=o&&j(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),null!=u&&j(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."})),Fs(s,c,l,u,o,a)}var Ws=An({batchNormalization3d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),Ns(),Bs(e,t,n,a,i,r)}}),Us=An({batchNorm3d_:Bs});function Vs(e,t,n,r,i,a){var o,u,s=gn(e,"x","batchNorm"),c=gn(t,"mean","batchNorm"),l=gn(n,"variance","batchNorm");return null!=i&&(o=gn(i,"scale","batchNorm")),null!=r&&(u=gn(r,"offset","batchNorm")),j(4===s.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+s.rank+"."})),j(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."})),j(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."})),null!=o&&j(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),null!=u&&j(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."})),Fs(s,c,l,u,o,a)}var Hs=An({batchNormalization4d_:function(e,t,n,r,i,a){return void 0===r&&(r=.001),Ns(),Vs(e,t,n,a,i,r)}}),qs=An({batchNorm4d_:Vs}),Gs=An({broadcastTo_:function(e,t){var n=gn(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var i=n.shape.slice();i.length<t.length;)i.unshift(1);n=n.reshape(i)}for(var a=n.shape,o=Array.from(t),u=t.length-1;u>=0;u--)if(a[u]===t[u])o[u]=1;else if(1!==n.shape[u])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===s.length)return n.clone();var c={x:n},l={shape:t,inputShape:a};return We.runKernelFunc((function(e){return e.tile(n,o)}),c,(function(e){return{x:function(){return e.sum(s,!0)}}}),jr,l)}}),$s=An({clone_:function(e){var t=gn(e,"x","clone",null);return We.runKernelFunc((function(){return We.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{x:t},null,Tr)}}),Ks=An({logicalAnd_:function(e,t){var n=gn(e,"a","logicalAnd","bool"),r=gn(t,"b","logicalAnd","bool");return zr(n.shape,r.shape),We.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Xs=An({logicalNot_:function(e){var t=gn(e,"x","logicalNot","bool");return We.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),Ys=An({logicalOr_:function(e,t){var n=gn(e,"a","logicalOr","bool"),r=gn(t,"b","logicalOr","bool");return zr(n.shape,r.shape),We.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),Js=An({logicalXor_:function(e,t){var n=gn(e,"a","logicalXor","bool"),r=gn(t,"b","logicalXor","bool");return zr(n.shape,r.shape),Ys(e,t).logicalAnd(Ks(e,t).logicalNot())}}),Zs=An({where_:function(e,t,n){var r=gn(t,"a","where"),i=gn(n,"b","where"),a=gn(e,"condition","where","bool");return A(r.shape,i.shape,"Error in where: "),1===a.rank?j(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):A(a.shape,i.shape,"Error in where: "),We.runKernelFunc((function(e,t){var n=e.select(a,r,i);return t([a]),n}),{$condition:a,$a:r,$b:i},(function(e,t){var n=t[0];return{$condition:function(){return Xn(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),Qs=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return c(this,(function(i){switch(i.label){case 0:return[4,(t=gn(e,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=Ua(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},ec=An({divNoNan_:function(e,t){var n,r=gn(e,"a","div"),i=gn(t,"b","div");r=(n=Ie(r,i))[0],i=n[1];var a=Fi(r,i),o=Xn(a),u=i.equal(o);return Zs(u,o,a)}}),tc=An({tile_:function(e,t){var n=gn(e,"x","tile",null);j(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],i={x:n},a={reps:t};return We.runKernelFunc((function(e,r){var i=e.tile(n,t);return r([n]),i}),i,null,Nr,a,r)}}),nc=An({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var i=nr([e,t],r),a=e<=t?e:t,o=0;o<a;++o)i.set(1,o,o);var u=i.toTensor().as2D(e,t);if(null==n)return u;if(1===n.length)return tc(sr(u,0),[n[0],1,1]);if(2===n.length)return tc(sr(sr(u,0),0),[n[0],n[1],1,1]);if(3===n.length)return tc(sr(sr(sr(u,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),rc=An({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var i=gn(e,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var u=1===o?i.as2D(1,-1):i,s=We.runKernelFunc((function(e){return e.multinomial(u,r,t,n)}),{logits2D:u});return 1===o?s.as1D():s}}),ic=An({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=gn(e,"indices","oneHot","int32"),a=i.shape.concat([t]),o={indices:i=i.flatten()},u={depth:t,onValue:n,offValue:r};return We.runKernelFunc((function(e,a){return a([i]),e.oneHot(i,t,n,r)}),o,null,Ar,u).reshape(a)}}),ac=An({pad_:function(e,t,n){void 0===n&&(n=0);var r=gn(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:t,constantValue:n},a={x:r};return We.runKernelFunc((function(e,i){return i([r]),e.pad(r,t,n)}),a,null,Rr,i)}}),oc=An({pad1d_:function(e,t,n){return void 0===n&&(n=0),j(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),ac(e,[t],n)}}),uc=An({pad2d_:function(e,t,n){return void 0===n&&(n=0),j(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ac(e,t,n)}}),sc=An({pad3d_:function(e,t,n){return void 0===n&&(n=0),j(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ac(e,t,n)}}),cc=An({pad4d_:function(e,t,n){return void 0===n&&(n=0),j(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ac(e,t,n)}}),lc=An({rand_:function(e,t,n){var r=R(e),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=t();return We.makeTensor(i,e,n)}});function fc(){return 32===We.backend.floatPrecision()?.001:.1}function dc(e,t,n){var r=!0;if(($(e)||$(t))&&(r=!1),$(e)&&$(t)&&(r=!0),r){var i=e.constructor.name,a=t.constructor.name;if(i!==a)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var o=mn(e),u=mn(t);if(!D(o,u))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+u+"]")}var s=$(e)?e:N(e),c=$(t)?t:N(t);if(s.length!==c.length)throw new Error("Arrays have different lengths actual: "+s.length+" vs expected: "+c.length+".\nActual:   "+s+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var f=s[l],d=c[l];if(!n(f,d))throw new Error("Arrays differ: actual["+l+"] = "+f+", expected["+l+"] = "+d+".\nActual:   "+s+".\nExpected: "+c+".")}}function pc(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}var hc=Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=fc()),dc(e,t,(function(e,t){return pc(e,t,n)}))},testEpsilon:fc,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Y(e)||Y(e[0])||Y(t)||Y(t[0])?dc(e,n,(function(e,t){return e==t})):dc(e,t,(function(e,t){return pc(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=fc()),!pc(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),mc=function(){function e(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=As(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,a=void 0,o=void 0;do{o=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a}while(o>=1||0===o);var u=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*i*u,n=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),vc=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var i=r||Math.random();this.randu=As(i.toString()),this.randn=new mc(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,i,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-a+Math.log(a)),(i=this.randu())<t||Math.log(i)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),gc=function(){function e(e,t,n,r){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=As(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}(),yc=An({randomGamma_:function(e,t,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new vc(t,n,r,i),o=nr(e,r),u=0;u<o.values.length;u++)o.values[u]=a.nextValue();return o.toTensor()}}),bc=An({randomNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new mc(t,n,r,!1,i),o=nr(e,r),u=0;u<o.values.length;u++)o.values[u]=a.nextValue();return o.toTensor()}}),xc=An({randomUniform_:function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=nr(e,r),o=new gc(t,n,null,i),u=0;u<a.values.length;u++)a.values[u]=o.nextValue();return a.toTensor()}}),wc=An({square_:function(e){var t=gn(e,"x","square"),n=[t];return We.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),Oc=An({squaredDifference_:function(e,t){var n,r=gn(e,"a","squaredDifference"),i=gn(t,"b","squaredDifference");n=Ie(r,i),r=n[0],i=n[1],zr(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return We.runKernelFunc((function(e,t){var n=e.squaredDifference(r,i);return t([r,i]),n}),a,(function(e,t){var n=t[0],r=t[1],i=Mn(2);return{a:function(){return e.mul(n.sub(r).mul(i))},b:function(){return e.mul(r.sub(n).mul(i))}}}),Er,{},o,[])}}),kc=An({truncatedNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var a=new mc(t,n,r,!0,i),o=nr(e,r),u=0;u<o.values.length;u++)o.values[u]=a.nextValue();return o.toTensor()}}),Ec=An({equal_:function(e,t){var n,r=gn(e,"a","equal"),i=gn(t,"b","equal");return n=Ie(r,i),r=n[0],i=n[1],zr(r.shape,i.shape),We.runKernelFunc((function(e){return e.equal(r,i)}),{$a:r,$b:i})}}),Sc=An({equalStrict_:function(e,t){var n=gn(e,"a","equalStrict"),r=gn(t,"b","equalStrict");return A(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Cc=An({greater_:function(e,t){var n,r=gn(e,"a","greater"),i=gn(t,"b","greater");return n=Ie(r,i),r=n[0],i=n[1],zr(r.shape,i.shape),We.runKernelFunc((function(e){return e.greater(r,i)}),{a:r,b:i},null,"Greater")}}),_c=An({greaterEqual_:function(e,t){var n,r=gn(e,"a","greaterEqual"),i=gn(t,"b","greaterEqual");return n=Ie(r,i),r=n[0],i=n[1],zr(r.shape,i.shape),We.runKernelFunc((function(e,t){var n=e.greaterEqual(r,i);return t([r,i]),n}),{a:r,b:i},(function(e,t){var n=t[0],r=t[1];return{a:function(){return Xn(n)},b:function(){return Xn(r)}}}),"GreaterEqual")}}),jc=An({greaterEqualStrict_:function(e,t){var n=gn(e,"a","greaterEqualStrict"),r=gn(t,"b","greaterEqualStrict");return A(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Ac=An({greaterStrict_:function(e,t){var n=gn(e,"a","greaterStrict"),r=gn(t,"b","greaterStrict");return A(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Tc=An({less_:function(e,t){var n,r=gn(e,"a","less"),i=gn(t,"b","less");return n=Ie(r,i),r=n[0],i=n[1],zr(r.shape,i.shape),We.runKernelFunc((function(e){return e.less(r,i)}),{a:r,b:i},null,"Less")}}),Nc=An({lessEqual_:function(e,t){var n,r=gn(e,"a","lessEqual"),i=gn(t,"b","lessEqual");return n=Ie(r,i),r=n[0],i=n[1],zr(r.shape,i.shape),We.runKernelFunc((function(e,t){var n=e.lessEqual(r,i);return t([r,i]),n}),{a:r,b:i},null,"LessEqual")}}),Rc=An({lessEqualStrict_:function(e,t){var n=gn(e,"a","lessEqualStrict"),r=gn(t,"b","lessEqualStrict");return A(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Dc=An({lessStrict_:function(e,t){var n=gn(e,"a","lessStrict"),r=gn(t,"b","lessStrict");return A(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Ic=An({notEqual_:function(e,t){var n,r=gn(e,"a","notEqual"),i=gn(t,"b","notEqual");return n=Ie(r,i),r=n[0],i=n[1],zr(r.shape,i.shape),We.runKernelFunc((function(e){return e.notEqual(r,i)}),{a:r,b:i},null,"NotEqual")}}),Mc=An({notEqualStrict_:function(e,t){var n=gn(e,"a","notEqualStrict"),r=gn(t,"b","notEqualStrict");return A(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Fc(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Pc(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var zc=An({gather_:function(e,t,n){void 0===n&&(n=0);var r=gn(e,"x","gather"),i=gn(t,"indices","gather","int32");n=B(n,r.shape)[0];var a=function(e,t,n){for(var r=e.shape[n],i=[],a=1,o=1,u=0;u<n;u++)i.push(e.shape[u]),a*=e.shape[u];for(u=0;u<t.rank;u++)i.push(t.shape[u]);for(u=n+1;u<e.rank;u++)i.push(e.shape[u]),o*=e.shape[u];return{batchSize:a,sliceSize:o,dimSize:r,outputShape:i}}(r,i,n);return We.runKernelFunc((function(e,t){var a=e.gather(r,i.flatten(),n);return t([i]),a}),{x:r,indices:i},(function(e,t){var i=t[0];return{x:function(){var t=r.shape,a=i.size,o=t.slice(0,n),u=o.length,s=t.slice(n,t.length).slice(1),c=s.length,l=Fc(0,u),f=Fc(u+1,u+1+c),d=Pc([o,[a],s]),p=e.reshape(d),h=i.reshape([a]),m=Pc([[u],l,f]),v=p.transpose(m),g=Lc(v,h,r.shape[n]),y=Sn(m);return g.transpose(y)},indices:function(){return i}}}),"Gather",{axis:n}).reshape(a.outputShape)}}),Lc=An({unsortedSegmentSum_:function(e,t,n){var r=gn(e,"x","unsortedSegmentSum"),i=gn(t,"segmentIds","unsortedSegmentSum","int32");return j(I(n),(function(){return"numSegments must be of dtype int"})),We.runKernelFunc((function(e,t){var a=e.unsortedSegmentSum(r,i,n);return t([i]),a}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=ki(t,Xn(t)),r=zc(e,n),i=_c(t,Mn(0,"int32")),a=r.rank-i.rank,o=0;o<a;++o)i=sr(i,o+1);i=Ks(i,Vn(r.shape,"bool"));var u=Xn(r);return Zs(i,r,u)}(e,n)}}}))}}),Bc=function(e,t,n){return s(this,void 0,void 0,(function(){var r,i,a,o,u,s,l,f,d,p,h,m,v;return c(this,(function(c){switch(c.label){case 0:for(r=gn(e,"tensor","boolMask"),i=gn(t,"mask","boolMask","bool"),a=null==n?0:n,o=i.rank,u=r.shape,j(o>0,(function(){return"mask cannot be scalar"})),A(u.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),s=1,l=a;l<a+o;l++)s*=u[l];return f=u.slice(0,a).concat([s],u.slice(a+o)),d=r.reshape(f),p=i.reshape([-1]),[4,Qs(p)];case 1:return h=c.sent(),m=h.squeeze([1]),v=zc(d,m,a),e!==r&&r.dispose(),t!==i&&i.dispose(),m.dispose(),d.dispose(),p.dispose(),h.dispose(),[2,v]}}))}))};function Wc(e,t,n,r,i,a,o){void 0===a&&(a="NHWC"),j(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var u=e,s=t,c=!1;3===t.rank&&(c=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),u=[1,e[0],e[1],e[2]]),j(4===u.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+u.length+"."})),j(4===s.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank})),j(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var l="NHWC"===a?u[3]:u[1],f="NHWC"===a?s.shape[3]:s.shape[1];j(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."})),j(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&j(I(i),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var d=Oa(a),p=pa(u,n.shape,r,1,i,o,!1,d),h=We.runKernelFunc((function(e,t){var r=e.conv2dDerInput(s,n,p);return t([n,s]),r}),{dy4D:s,filter:n},(function(e,t){var n=t[0],u=t[1];return{dy4D:function(){return qc(e,n,r,i,a,1,o)},filter:function(){return $c(e,u,n.shape,r,i,a,o)}}}));return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function Uc(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function Vc(e,t,n,r,i){j(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var a=e,o=t,u=!1;4===t.rank&&(u=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var s=a[4],c=o.shape[4];j(5===a.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),j(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),j(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),j(s===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+s+") must match input depth for filter "+n.shape[3]+"."})),j(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."}));var l=ha(a,n.shape,r,1,i),f=We.runKernelFunc((function(e){return e.conv3dDerInput(o,n,l)}),{dy5D:o});return u?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var Hc=An({conv1d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NWC"),void 0===a&&(a=1);var u=gn(e,"x","conv1d"),s=gn(t,"filter","conv1d"),c=u,l=!1;2===u.rank&&(l=!0,c=u.as3D(1,u.shape[0],u.shape[1])),j(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."})),j(3===s.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+s.rank+"."})),null!=o&&j(I(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),j(c.shape[2]===s.shape[1],(function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+s.shape[1]+"."})),j(wa(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),j("NWC"===i,(function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."}));var f=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),p=qc(d,f,[1,n],r,"NHWC",[1,a],o);return l?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),qc=An({conv2d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var u=gn(e,"x","conv2d"),s=gn(t,"filter","conv2d"),c=u,l=!1;3===u.rank&&(l=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),j(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."})),j(4===s.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+s.rank+"."})),null!=o&&j(I(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var f="NHWC"===i?c.shape[3]:c.shape[1];j(f===s.shape[2],(function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+s.shape[2]+"."})),j(wa(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}));var d=Oa(i),p=pa(c.shape,s.shape,n,a,r,o,!1,d),h=[s,c],m=We.runKernelFunc((function(e,t){var n=e.conv2d(c,s,p);return t([s,c]),n}),{x:c,filter:s},(function(e,t){var o=t,u=o[0],s=o[1];return j(xa(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return Kc(s.shape,e,u,n,r,i)},filter:function(){return $c(s,e,u.shape,n,r,i)}}}),"Conv2D",p,h);return l?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Gc=An({conv3d_:function(e,t,n,r,i,a){void 0===i&&(i="NDHWC"),void 0===a&&(a=[1,1,1]);var o=gn(e,"x","conv3d"),u=gn(t,"filter","conv3d"),s=o,c=!1;4===o.rank&&(c=!0,s=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),j(5===s.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+s.rank+"."})),j(5===u.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+u.rank+"."})),j(s.shape[4]===u.shape[3],(function(){return"Error in conv3d: depth of input ("+s.shape[4]+") must match input depth for filter "+u.shape[3]+"."})),j(function(e,t){return Uc(e)||Uc(t)}(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),j("NDHWC"===i,(function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."}));var l=ha(s.shape,u.shape,n,a,r),f=We.runKernelFunc((function(e,t){var n=e.conv3d(s,u,l);return t([s,u]),n}),{x:s,$filter:u},(function(e,t){j(Uc(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var i=t[0],o=t[1];return{x:function(){return Vc(i.shape,e,o,n,r)},$filter:function(){return function(e,t,n,r,i){var a=e;4===e.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var o=t;4===o.rank&&(o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),j(5===a.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."})),j(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."})),j(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),j(a.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."})),j(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."}));var u=ha(a.shape,n,r,1,i);return We.runKernelFunc((function(e){return e.conv3dDerFilter(a,o,u)}),{x5D:a,dy5D:o})}(i,e,o.shape,n,r)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),$c=An({conv2dDerFilter_:function(e,t,n,r,i,a,o){void 0===a&&(a="NHWC");var u=e;3===e.rank&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),j(4===u.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+u.shape+"."})),j(4===s.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."})),j(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var c="NHWC"===a?u.shape[3]:u.shape[1],l="NHWC"===a?s.shape[3]:s.shape[1];j(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."})),j(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."})),null!=o&&j(I(i),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var f=Oa(a),d=pa(u.shape,n,r,1,i,o,!1,f);return We.runKernelFunc((function(e){return e.conv2dDerFilter(u,s,d)}),{x4D:u,dy4D:s})}}),Kc=An({conv2dDerInput_:Wc}),Xc=An({depthwiseConv2d_:function(e,t,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var u=gn(e,"x","depthwiseConv2d"),s=gn(t,"filter","depthwiseConv2d"),c=u,l=!1;3===u.rank&&(l=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),j(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."})),j(4===s.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+s.rank+"."})),j(c.shape[3]===s.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+s.shape[2]+"."})),null==a&&(a=[1,1]),j(wa(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&j(I(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var f=pa(c.shape,s.shape,n,a,r,o,!0),d=[c,s],p=We.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(c,s,f);return t([c,s]),n}),{x:c,filter:s},(function(e,t){j(xa(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var n=t[0],r=t[1];return{x:function(){return Yc(n.shape,e,r,f)},filter:function(){return Jc(n,e,r.shape,f)}}}),"DepthwiseConv2dNative",f,d);return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),Yc=An({depthwiseConv2dDerInput_:function(e,t,n,r){var i=t,a=!1;3===t.rank&&(a=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=We.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(i,n,r)}),{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Jc=An({depthwiseConv2dDerFilter_:function(e,t,n,r){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return 3===a.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),We.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(i,a,r)}),{x4D:i,dy4D:a})}}),Zc=An({separableConv2d_:function(e,t,n,r,i,a,o){void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC");var u=gn(e,"x","separableConv2d"),s=gn(t,"depthwiseFilter","separableConv2d"),c=gn(n,"pointwiseFilter","separableConv2d"),l=u,f=!1;if(3===u.rank&&(f=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");j(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."})),j(4===s.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+s.rank+"."})),j(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+s.rank+"."})),j(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."})),j(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."}));var d=s.shape[2],p=s.shape[3];j(c.shape[2]===d*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*p+", but got "+c.shape[2]+"."}));var h=Xc(l,s,r,i,o,a),m=qc(h,c,1,"valid",o);return f?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Qc=An({conv2dTranspose_:function(e,t,n,r,i,a){return Wc(n,gn(e,"x","conv2dTranspose"),gn(t,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),el=An({conv3dTranspose_:function(e,t,n,r,i){return Vc(n,gn(e,"x","conv3dTranspose"),gn(t,"filter","conv3dTranspose"),r,i)}}),tl=An({matMul_:function(e,t,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=gn(e,"a","matMul"),o=gn(t,"b","matMul");i=Ie(a,o),a=i[0],o=i[1];var u=n?a.shape[a.rank-2]:a.shape[a.rank-1],s=r?o.shape[o.rank-1]:o.shape[o.rank-2],c=n?a.shape[a.rank-1]:a.shape[a.rank-2],l=r?o.shape[o.rank-2]:o.shape[o.rank-1],f=a.shape.slice(0,-2),d=o.shape.slice(0,-2),p=R(f),h=R(d);j(a.rank>=2&&o.rank>=2&&a.rank===o.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."})),j(D(f,d),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."})),j(u===s,(function(){return"Error in matMul: inner shapes ("+u+") and ("+s+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=a.shape.slice(0,-2).concat([c,l]),v=n?a.as3D(p,u,c):a.as3D(p,c,u),g=r?o.as3D(h,l,s):o.as3D(h,s,l),y={transposeA:n,transposeB:r};return We.runKernelFunc((function(e,t){var i=e.batchMatMul(v,g,n,r);return t([v,g]),i}),{a:v,b:g},(function(e,t){var i=t,a=i[0],o=i[1];return n||r?!n&&r?{a:function(){return e.matMul(o,!1,!1)},b:function(){return e.matMul(a,!0,!1)}}:n&&!r?{a:function(){return o.matMul(e,!1,!0)},b:function(){return a.matMul(e,!1,!1)}}:{a:function(){return o.matMul(e,!0,!0)},b:function(){return e.matMul(a,!0,!0)}}:{a:function(){return e.matMul(o,!1,!0)},b:function(){return a.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(m)}}),nl=An({dot_:function(e,t){var n=gn(e,"t1","dot"),r=gn(t,"t2","dot");j(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var i=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return j(i===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),rl=An({outerProduct_:function(e,t){var n=gn(e,"v1","outerProduct"),r=gn(t,"v2","outerProduct");return j(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),il=An({reverse_:function(e,t){var n=gn(e,"x","reverse");if(0===n.rank)return n.clone();var r=B(t,n.shape);return We.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),al=An({reverse1d_:function(e){var t=gn(e,"x","reverse");return j(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),il(t,0)}}),ol=An({reverse2d_:function(e,t){var n=gn(e,"x","reverse");return j(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),il(n,t)}}),ul=An({reverse3d_:function(e,t){var n=gn(e,"x","reverse");return j(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),il(n,t)}}),sl=An({reverse4d_:function(e,t){var n=gn(e,"x","reverse");return j(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),il(n,t)}});function cl(e,t,n,r,i,a){var o=gn(e,"x","maxPool"),u=o,s=!1;3===o.rank&&(s=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),null==r&&(r=[1,1]),j(4===u.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."})),j(wa(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=a&&j(I(i),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var c=fa(u.shape,t,n,r,i,a);if(1===c.filterWidth&&1===c.filterHeight&&D(c.inShape,c.outShape))return o.clone();var l=[u],f=We.runKernelFunc((function(e,t){var n=e.maxPool(u,c);return t([u,n]),n}),{x:u},(function(e,a){var o=a[0],u=a[1];return{x:function(){return function(e,t,n,r,i,a,o,u){var s=gn(e,"dy","maxPoolBackprop"),c=gn(t,"input","maxPoolBackprop"),l=gn(n,"output","maxPoolBackprop");j(c.rank===s.rank,(function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+s.rank+")"})),null==a&&(a=[1,1]),j(wa(i,a),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"})),j(4===s.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."})),j(4===c.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."}));var f=fa(c.shape,r,i,a,o,u);return We.runKernelFunc((function(e){return e.maxPoolBackprop(s,c,l,f)}),{$dy:s,$input:c})}(e,o,u,t,n,r,i)}}}),"MaxPool",c,l);return s?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function ll(e,t,n,r,i,a){var o=gn(e,"x","avgPool","float32");null==r&&(r=[1,1]),j(wa(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var u=o,s=!1;3===o.rank&&(s=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),j(4===u.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."})),null!=a&&j(I(i),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var c=fa(u.shape,t,n,r,i,a);if(1===c.filterWidth&&1===c.filterHeight&&D(c.inShape,c.outShape))return o.clone();var l=We.runKernelFunc((function(e){return e.avgPool(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,i,a){var o=gn(e,"dy","avgPoolBackprop"),u=gn(t,"input","avgPoolBackprop");j(u.rank===o.rank,(function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+o.rank+")"})),null==i&&(i=[1,1]),j(wa(r,i),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}));var s=u,c=o,l=!1;3===u.rank&&(l=!0,s=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),c=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),j(4===c.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."})),j(4===s.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+"."}));var f=fa(s.shape,n,r,i,a),d=We.runKernelFunc((function(e){return e.avgPoolBackprop(c,s,f)}),{dy4D:c,input4D:s});return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(e,u,t,n,r,i)}}}),"AvgPool",c);return l=l.cast(o.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var fl=An({maxPool_:function(e,t,n,r,i){return cl(e,t,n,1,r,i)}}),dl=An({avgPool_:function(e,t,n,r,i){return ll(e,t,n,1,r,i)}}),pl=An({pool_:function(e,t,n,r,i,a){null==i&&(i=[1,1]),null==a&&(a=1),0===r&&(r="valid");var o=gn(e,"x","maxPool"),u=o,s=!1;3===o.rank&&(s=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),j(wa(a,i),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"}));var c,l=fa(u.shape,t,a,i,r),f=[l.dilationHeight,l.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),i=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],i[t]]}))}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var d=1===f[0]&&1===f[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),i=n.map((function(e){return e[1]})),a=e.concat(r,i),o=t.map((function(e,t){return(e-a[t]%e)%e})),u=i.map((function(e,t){return e+o[t]}));return[t.map((function(e,t){return[r[t],u[t]]})),t.map((function(e,t){return[0,o[t]]}))]}([l.inHeight,l.inWidth],f,c),h=p[0],m=p[1],v=d?r:"valid",g=d?u:lr(u,f,h),y=("avg"===n?function(){return ll(g,t,a,1,v)}:function(){return cl(g,t,a,1,v)})(),b=d?y:ir(y,f,m);return s?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),hl=An({maxPool3d_:function(e,t,n,r,i,a,o){void 0===a&&(a="NDHWC");var u=gn(e,"x","maxPool3d"),s=u,c=!1;4===u.rank&&(c=!0,s=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),null==o&&(o=[1,1,1]),j(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+s.rank+"."})),j("NDHWC"===a,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),j(wa(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&j(I(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var l=da(s.shape,t,n,o,r,i,a),f=We.runKernelFunc((function(e,t){var n=e.maxPool3d(s,l);return t([s,n]),n}),{x:s},(function(e,a){var u=a[0],s=a[1];return{x:function(){return function(e,t,n,r,i,a,o,u){var s=gn(e,"dy","maxPool3dBackprop"),c=gn(t,"input","maxPool3dBackprop"),l=gn(n,"output","maxPool3dBackprop"),f=s,d=c,p=l,h=!1;4===c.rank&&(h=!0,f=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),d=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),p=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),j(5===f.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+f.rank+"."})),j(5===d.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."})),j(5===p.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+p.rank+"."})),null==a&&(a=[1,1,1]),j(wa(i,a),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"})),null!=u&&j(I(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+o+"."}));var m=da(d.shape,r,i,a,o,u),v=We.runKernelFunc((function(e){return e.maxPool3dBackprop(f,d,p,m)}),{dy5D:f,input5D:d});return h?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}(e,u,s,t,n,o,r,i)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),ml=An({avgPool3d_:function(e,t,n,r,i,a,o){void 0===a&&(a="NDHWC");var u=gn(e,"x","avgPool3d","float32"),s=u,c=!1;4===u.rank&&(c=!0,s=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),null==o&&(o=[1,1,1]),j(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+s.rank+"."})),j("NDHWC"===a,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),j(wa(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&j(I(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var l=da(s.shape,t,n,o,r,i,a),f=We.runKernelFunc((function(e){return e.avgPool3d(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,i,a,o){var u=gn(e,"dy","avgPool3dBackprop"),s=gn(t,"input","avgPool3dBackprop"),c=u,l=s,f=!1;4===s.rank&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),j(5===c.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."})),j(5===l.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."})),null==i&&(i=[1,1,1]),j(wa(r,i),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"})),null!=o&&j(I(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var d=da(l.shape,n,r,i,a,o),p=We.runKernelFunc((function(e){return e.avgPool3dBackprop(c,l,d)}),{dy5D:c,input5D:l});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}(e,s,t,n,o,r,i)}}}));return f=f.cast(s.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),vl=An({maxPoolWithArgmax_:function(e,t,n,r,i){void 0===i&&(i=!1);var a=gn(e,"x","maxPoolWithArgmax"),o={filterSize:t,strides:n,pad:r,includeBatchInIndex:i},u=We.runKernel("MaxPoolWithArgmax",{x:a},o);return{result:u[0],indexes:u[1]}}}),gl=An({slice_:function(e,t,n){var r,i,a=gn(e,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice()).forEach((function(e){j(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),i=(i=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(j(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),a.shape[t]-r[t])})),Hi(a,r,i);var o=a.shape,u={begin:r,size:i};return We.runKernelFunc((function(e){return e.slice(a,r,i)}),{x:a},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],o[n]-r[n]-i[n]]);return{x:function(){return ac(e,t)}}}),"Slice",u)}}),yl=An({slice1d_:function(e,t,n){var r=gn(e,"x","slice1d");return j(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),gl(r,[t],[n])}}),bl=An({slice2d_:function(e,t,n){var r=gn(e,"x","slice2d");return j(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),gl(r,t,n)}}),xl=An({slice3d_:function(e,t,n){var r=gn(e,"x","slice3d");return j(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),gl(r,t,n)}}),wl=An({slice4d_:function(e,t,n){var r=gn(e,"x","slice4d");return j(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),gl(r,t,n)}});function Ol(e,t,n,r,i){return t.rank<n.rank&&(t=t.reshape(On(t.shape,r))),e.rank<n.rank&&(e=e.reshape(On(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==i?r:r.transpose(i)}}}var kl=An({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","all","bool"),i=B(t,r.shape),a=i,o=En(a,r.rank);null!=o&&(r=r.transpose(o),a=Cn(a.length,r.rank));var u=We.runKernelFunc((function(e){return e.all(r,a)}),{$x:r});if(n){var s=On(u.shape,i);return u.reshape(s)}return u}}),El=An({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","any","bool"),i=B(t,r.shape),a=i,o=En(a,r.rank);null!=o&&(r=r.transpose(o),a=Cn(a.length,r.rank));var u=We.runKernelFunc((function(e){return e.any(r,a)}),{$x:r});if(n){var s=On(u.shape,i);return u.reshape(s)}return u}}),Sl=An({argMax_:function(e,t){void 0===t&&(t=0);var n=gn(e,"x","argMax");null==t&&(t=0);var r=B(t,n.shape),i=En(r,n.rank);null!=i&&(n=n.transpose(i),r=Cn(r.length,n.rank));var a={axis:r[0]},o=[n];return We.runKernelFunc((function(e,t){var i=e.argMax(n,r[0]);return t([n]),i}),{x:n},(function(e,t){var n=t[0];return{x:function(){return Xn(n)}}}),"ArgMax",a,o)}}),Cl=An({argMin_:function(e,t){void 0===t&&(t=0);var n=gn(e,"x","argMin");null==t&&(t=0);var r=B(t,n.shape),i=En(r,n.rank);return null!=i&&(n=n.transpose(i),r=Cn(r.length,n.rank)),We.runKernelFunc((function(e,t){var i=e.argMin(n,r[0]);return t([n]),i}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Xn(n)}}}))}}),_l=An({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","logSumExp"),i=B(t,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),u=a.reshape(o.shape).add(o);if(n){var s=On(u.shape,i);return u.reshape(s)}return u}}),jl=An({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","max"),i=r,a=B(t,r.shape),o=a,u=En(o,r.rank);null!=u&&(r=r.transpose(u),o=Cn(o.length,r.rank));var s=[r],c=We.runKernelFunc((function(e,t){var n=e.max(r,o);return t([i,n]),n}),{x:r},(function(e,t){return Ol(e,t[1],t[0],a,u)}),"Max",{axes:o},s,[!0]);if(n){var l=On(c.shape,a);c=c.reshape(l)}return c}}),Al=An({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","mean"),i=B(t,r.shape),a=R(wn(r.shape,i)[1]);return ra((function(e){var r=Mn(a);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(Vn(e.shape,"float32")).div(a)}}}))(r)}}),Tl=An({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","min"),i=r,a=B(t,r.shape),o=a,u=En(o,r.rank);null!=u&&(r=r.transpose(u),o=Cn(o.length,r.rank));var s=[r],c=We.runKernelFunc((function(e,t){var n=e.min(r,o);return t([i,n]),n}),{x:r},(function(e,t){return Ol(e,t[1],t[0],a,u)}),"Min",{axes:o},s,[!0]);if(n){var l=On(c.shape,a);c=c.reshape(l)}return c}}),Nl=An({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=B(t,(e=gn(e,"x","moments")).shape),i=e.mean(r,n),a=i.shape;n||(a=On(i.shape,r));var o=e.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,n)}}}),Rl=An({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=B(t,r.shape);return ra((function(e){var t=En(i,e.rank),r=i,a=e;null!=t&&(a=e.transpose(t),r=Cn(r.length,e.rank));var o=function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(Vn(e.shape,"float32"))},u={axes:r},s=We.runKernelFunc((function(e){return e.sum(a,r)}),{x:a},(function(e){return{x:function(){return o(e)}}}),"Sum",u);if(n){var c=On(s.shape,i);s=s.reshape(c)}return{value:s,gradFunc:o}}))(r)}}),Dl=An({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=gn(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=B(t,r.shape),a=En(i,r.rank),o=i,u=r;null!=a&&(u=r.transpose(a),o=Cn(o.length,r.rank));var s=We.runKernelFunc((function(e){return e.prod(u,o)}),{permutedX:u});if(n){var c=On(s.shape,i);s=s.reshape(c)}return s}}),Il=An({elu_:function(e){var t=gn(e,"x","elu");return We.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return We.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),Ml=An({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=gn(e,"x","leakyRelu");return ki(Mn(t).mul(n),n)}}),Fl=An({prelu_:function(e,t){var n=gn(e,"x","prelu"),r=gn(t,"alpha","prelu");return We.runKernelFunc((function(e,t){var i=e.prelu(n,r);return t([n,r]),i}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],i=n.greater(0);return{x:function(){return Zs(i,e,e.mul(r))},alpha:function(){var t=Zs(i,Xn(e),e.mul(n)),a=Pr(r.shape,e.shape);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}}),"Prelu")}}),Pl=An({relu_:function(e){var t=gn(e,"x","relu");return"bool"===t.dtype?t.toInt():We.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),zl=An({relu6_:function(e){var t=gn(e,"x","relu6");return"bool"===t.dtype?t.toInt():We.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),Ll=An({selu_:function(e){var t=gn(e,"x","selu");return We.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(Mn(0)),r=Mn(Qu),i=Mn(es),a=e.mul(i),o=e.mul(r).mul(n.toFloat().exp());return Zs(t,a,o)}}}))}}),Bl=An({localResponseNormalization_:function(e,t,n,r,i){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var a=gn(e,"x","localResponseNormalization");j(4===a.rank||3===a.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."})),j(I(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var o=a,u=!1;3===a.rank&&(u=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var s=We.runKernelFunc((function(e,a){var u=e.localResponseNormalization4D(o,t,n,r,i);return a([o,u]),u}),{x4D:o},(function(e,a){var o=a[0],u=a[1];return{x4D:function(){return We.runKernelFunc((function(a){return a.LRNGrad(e,o,u,t,n,r,i)}),{})}}}));return u?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),Wl=An({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(Mn(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=gn(e,"x","norm"),t,n),a=i.shape;if(r){var o=B(n,e.shape);a=On(i.shape,o)}return i.reshape(a)}}),Ul=An({basicLSTMCell_:function(e,t,n,r,i,a){var o=gn(e,"forgetBias","basicLSTMCell"),u=gn(t,"lstmKernel","basicLSTMCell"),s=gn(n,"lstmBias","basicLSTMCell"),c=gn(r,"data","basicLSTMCell"),l=gn(i,"c","basicLSTMCell"),f=gn(a,"h","basicLSTMCell"),d=c.concat(f,1).matMul(u).add(s),p=d.shape[0],h=d.shape[1]/4,m=[p,h],v=d.slice([0,0],m),g=d.slice([0,h],m),y=d.slice([0,2*h],m),b=d.slice([0,3*h],m),x=v.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(o.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),Vl=An({multiRNNCell_:function(e,t,n,r){for(var i=gn(t,"data","multiRNNCell"),a=yn(n,"c","multiRNNCell"),o=yn(r,"h","multiRNNCell"),u=i,s=[],c=0;c<e.length;c++){var l=e[c](u,a[c],o[c]);s.push(l[0]),s.push(l[1]),u=l[1]}var f=[],d=[];for(c=0;c<s.length;c+=2)f.push(s[c]),d.push(s[c+1]);return[f,d]}}),Hl=An({movingAverage_:function(e,t,n,r,i){void 0===i&&(i=!0);var a=gn(e,"v","movingAverage"),o=gn(t,"x","movingAverage"),u=gn(n,"decay","movingAverage");Me(a,o),j(D(a.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var s=Mn(1),c=s.sub(u),l=o.sub(a).mul(c);if(i){j(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=gn(r,"step","movingAverage");l=l.div(s.sub(Ni(u,f)))}return a.add(l)}}),ql=An({stridedSlice_:function(e,t,n,r,i,a,o,u,s){if(void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===u&&(u=0),void 0===s&&(s=0),null==r&&(r=new Array(t.length)),0!==o)throw new Error("ellipsis mask is not yet supported");var c=gn(e,"x","stridedSlice"),l=qi(u),f=c.shape.slice();l.forEach((function(e){t[e]=0,n[e]=1,f.splice(e,0,1)})),c=c.reshape(f);for(var d=0;d<c.rank;d++)t[d]=$i(i,t,r,c.shape,d),n[d]=Ki(a,n,r,c.shape,d),r[d]=r[d]||1;var p=qi(s);p.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var h=Gi(t,n,r),m=h.filter((function(e,t){return-1===p.indexOf(t)}));return r.every((function(e){return 1===e}))?gl(c,t,h).reshape(m):We.runKernelFunc((function(e){return e.stridedSlice(c,t,n,r)}),{$x:c}).reshape(m)}}),Gl=An({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=gn(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var a=We.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),$l=An({scatterND_:function(e,t,n){var r=gn(e,"indices","scatterND","int32"),i=gn(t,"updates","scatterND");return Wi(i,r,n),We.runKernelFunc((function(e){return e.scatterND(r,i,n)}),{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),Kl=An({fft_:function(e){j("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return We.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),Xl=An({ifft_:function(e){j("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return We.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),Yl=An({rfft_:function(e,t){j("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],i=e.size/r;if(null!=t&&t<r){var a=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=e.slice(a,o),r=t}else if(null!=t&&t>r){var u=e.shape.map((function(e){return e}));u[e.shape.length-1]=t-r,n=e.concat(Hn(u),e.shape.length-1),r=t}else n=e;var s=n.zerosLike(),c=Tn(n,s).as2D(i,r),l=Kl(c),f=Math.floor(r/2)+1,d=Nn(l),p=Rn(l),h=d.split([f,r-f],d.shape.length-1),m=p.split([f,r-f],p.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=f,Tn(h[0],m[0]).reshape(v)}}),Jl=An({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),i=Xl(r);return Nn(i)}var a=[n,2*(t-1)],o=Nn(e).as2D(n,t),u=Rn(e).as2D(n,t),s=o.slice([0,1],[n,t-2]).reverse(1),c=u.slice([0,1],[n,t-2]).reverse(1).mul(Mn(-1)),l=o.concat(s,1),f=u.concat(c,1);return r=Tn(l,f).as2D(a[0],a[1]),i=Xl(r),Nn(i)}}),Zl=Object.freeze({fft:Kl,ifft:Xl,rfft:Yl,irfft:Jl}),Ql=An({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var i=gn(e,"sparseIndices","sparseToDense","int32"),a=gn(t,"sparseValues","sparseToDense"),o=gn(r,"defaultValue","sparseToDense",a.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var i=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==i))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+i+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o),We.runKernelFunc((function(e){return e.sparseToDense(i,a,n,o)}),{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),ef=An({gatherND_:function(e,t){var n=gn(t,"indices","gatherND","int32"),r=gn(e,"x","gatherND");return We.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),tf=An({diag_:function(e){var t=gn(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return We.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),nf=An({dropout_:function(e,t,n,r){var i=gn(e,"x","dropout");if(j("float32"===i.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."})),j(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof ke?i.clone():i;var a=function(e,t){if(null==t)return e.shape.slice();if(D(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),o=1-t,u=xc(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(u)}});function rf(e,t,n){for(var r=1-e%2,i=new Float32Array(e),a=0;a<e;++a){var o=2*Math.PI*a/(e+r-1);i[a]=t-n*Math.cos(o)}return Fn(i,"float32")}var af,of=An({hannWindow_:function(e){return rf(e,.5,.5)}}),uf=An({hammingWindow_:function(e){return rf(e,.54,.46)}}),sf=An({frame_:function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var a=0,o=[];a+t<=e.size;)o.push(gl(e,a,t)),a+=n;if(r)for(;a<e.size;){var u=a+t-e.size,s=Yn([gl(e,a,t-u),qn([u],i)]);o.push(s),a+=n}return 0===o.length?Pn([],[0,t]):Yn(o).as2D(o.length,t)}}),cf=An({stft_:function(e,t,n,r,i){var a;void 0===i&&(i=of),null==r&&(a=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=sf(e,t,n),u=Ai(o,i(t)),s=[],c=0;c<o.shape[0];c++)s.push(Yl(u.slice([c,0],[1,t]),r));return Yn(s)}}),lf=Object.freeze({hannWindow:of,hammingWindow:uf,frame:sf,stft:cf}),ff=function(e,t,n){return void 0===n&&(n=1),s(this,void 0,void 0,(function(){var r,i,a,o,u,s,l,f,d,p,h,m,v,g;return c(this,(function(c){switch(c.label){case 0:return r=gn(e,"predictions","inTopK"),i=gn(t,"targets","inTopK"),j(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),j(r.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank})),A(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],j(n>0&&n<=a,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n})),[4,r.data()];case 1:return o=c.sent(),[4,i.data()];case 2:for(u=c.sent(),s=[o.length/a,a],f=s[1],d=U("bool",l=s[0]),p=0;p<l;p++){for(h=p*f,m=o.subarray(h,h+f),v=[],g=0;g<m.length;g++)v.push({value:m[g],index:g});for(v.sort((function(e,t){return t.value-e.value})),d[p]=0,g=0;g<n;g++)if(v[g].index===u[p]){d[p]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),[2,Dn(d,i.shape,"bool")]}}))}))};!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(af||(af={}));var df=An({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=af.SUM_BY_NONZERO_WEIGHTS);var i=gn(e,"labels","absoluteDifference"),a=gn(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=gn(n,"weights","absoluteDifference")),A(i.shape,a.shape,"Error in absoluteDifference: ");var u=i.sub(a).abs();return pf(u,o,r)}}),pf=An({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=af.SUM_BY_NONZERO_WEIGHTS);var r=gn(e,"losses","computeWeightedLoss"),i=null;null!=t&&(i=gn(t,"weights","computeWeightedLoss"));var a=null==i?r:r.mul(i);if(n===af.NONE)return a;if(n===af.SUM)return a.sum();if(n===af.MEAN){if(null==i)return a.mean();var o=r.size/i.size,u=a.sum().div(i.sum());return o>1?u.div(Mn(o)):u}if(n===af.SUM_BY_NONZERO_WEIGHTS){if(null==i)return a.sum().div(Mn(r.size));var s=i.mul(Vn(r.shape)).notEqual(Mn(0)).sum().toFloat();return a.sum().div(s)}throw Error("Unknown reduction: "+n)}}),hf=An({cosineDistance_:function(e,t,n,r,i){void 0===i&&(i=af.SUM_BY_NONZERO_WEIGHTS);var a=gn(e,"labels","cosineDistance"),o=gn(t,"predictions","cosineDistance"),u=null;null!=r&&(u=gn(r,"weights","cosineDistance")),A(a.shape,o.shape,"Error in cosineDistance: ");var s=Mn(1).sub(a.mul(o).sum(n,!0));return pf(s,u,i)}}),mf=An({hingeLoss_:function(e,t,n,r){void 0===r&&(r=af.SUM_BY_NONZERO_WEIGHTS);var i=gn(e,"labels","hingeLoss"),a=gn(t,"predictions","hingeLoss"),o=null;null!=n&&(o=gn(n,"weights","hingeLoss")),A(i.shape,a.shape,"Error in hingeLoss: ");var u=Mn(1);i=Mn(2).mul(i).sub(u);var s=u.sub(i.mul(a)).relu();return pf(s,o,r)}}),vf=An({huberLoss_:function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=af.SUM_BY_NONZERO_WEIGHTS);var a=gn(e,"labels","huberLoss"),o=gn(t,"predictions","huberLoss"),u=null;null!=n&&(u=gn(n,"weights","huberLoss")),A(a.shape,o.shape,"Error in huberLoss: ");var s=Mn(r),c=o.sub(a).abs(),l=Si(c,s),f=c.sub(l),d=Mn(.5).mul(l.square()).add(s.mul(f));return pf(d,u,i)}}),gf=An({logLoss_:function(e,t,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=af.SUM_BY_NONZERO_WEIGHTS);var a=gn(e,"labels","logLoss"),o=gn(t,"predictions","logLoss"),u=null;null!=n&&(u=gn(n,"weights","logLoss")),A(a.shape,o.shape,"Error in logLoss: ");var s=Mn(1),c=Mn(r),l=a.mul(o.add(c).log()).neg().sub(s.sub(a).mul(s.sub(o).add(c).log()));return pf(l,u,i)}}),yf=An({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=af.SUM_BY_NONZERO_WEIGHTS);var i=gn(e,"labels","meanSquaredError"),a=gn(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=gn(n,"weights","meanSquaredError")),A(i.shape,a.shape,"Error in meanSquaredError: ");var u=i.squaredDifference(a);return pf(u,o,r)}}),bf=An({sigmoidCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=af.SUM_BY_NONZERO_WEIGHTS);var a=gn(e,"multiClassLabels","sigmoidCrossEntropy"),o=gn(t,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=gn(n,"weights","sigmoidCrossEntropy")),A(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var s=Mn(r),c=Mn(1),l=Mn(.5);a=a.mul(c.sub(s)).add(l.mul(s))}var f=function(e,t){var n=gn(e,"labels","sigmoidCrossEntropyWithLogits"),r=gn(t,"logits","sigmoidCrossEntropyWithLogits");A(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),a=r.mul(n),o=r.abs().neg().exp().log1p();return i.sub(a).add(o)}(a,o);return pf(f,u,i)}}),xf=An({softmaxCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=af.SUM_BY_NONZERO_WEIGHTS);var a=gn(e,"onehotLabels","softmaxCrossEntropy"),o=gn(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=gn(n,"weights","softmaxCrossEntropy")),A(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var s=Mn(r),c=Mn(1),l=Mn(a.shape[1]);a=a.mul(c.sub(s)).add(s.div(l))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return ra((function(e,t,r){var i=t.logSumExp([n],!0),a=t.toFloat().sub(i);return r([e,a]),{value:a.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],i=t[1],a=On(e.shape,[n]);return[e.reshape(a).mul(r.toFloat().sub(i.exp())),e.reshape(a).mul(i.exp().sub(r.toFloat()))]}}}))(e,t)}(a,o);return pf(f,u,i)}}),wf=Object.freeze({get Reduction(){return af},absoluteDifference:df,computeWeightedLoss:pf,cosineDistance:hf,hingeLoss:mf,huberLoss:vf,logLoss:gf,meanSquaredError:yf,sigmoidCrossEntropy:bf,softmaxCrossEntropy:xf});function Of(e,t){return void 0===t&&(t=!1),We.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],i=nc(n),a=e.clone(),o=Pn([[1]],[1,1]),u=o.clone(),s=n>=r?r:n,c=function(e){var t,s=a,c=u,l=i;t=We.tidy((function(){var t=a.slice([e,e],[n-e,1]),s=t.norm(),c=a.slice([e,e],[1,1]),l=Pn([[-1]]).where(c.greater(0),Pn([[1]])),f=c.sub(l.mul(s)),d=t.div(f);u=1===d.shape[0]?o.clone():o.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var p=l.matMul(f).div(s).neg(),h=a.slice([e,0],[n-e,r]),m=p.mul(u),v=u.transpose();if(0===e)a=h.sub(m.matMul(v.matMul(h)));else{var g=h.sub(m.matMul(v.matMul(h)));a=a.slice([0,0],[e,r]).concat(g,0)}var y=m.transpose(),b=i.slice([0,e],[n,i.shape[1]-e]);if(0===e)i=b.sub(b.matMul(u).matMul(y));else{var x=b.sub(b.matMul(u).matMul(y));i=i.slice([0,0],[n,e]).concat(x,1)}return[u,a,i]})),u=t[0],a=t[1],i=t[2],tn([s,c,l])},l=0;l<s;++l)c(l);return!t&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]}))}var kf=An({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=gn(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],u=a[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=u))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+u+").");t<0&&(t=o),n<0&&(n=u);var s=$n(0,o,1,"int32").reshape([-1,1]),c=$n(0,u,1,"int32"),l=Ii(s,c),f=Ks(l.lessEqual(Mn(+t,"int32")),l.greaterEqual(Mn(-n,"int32"))),d=Hn([o,u],r.dtype);return dr(pr(r.reshape([-1,o,u])).map((function(e){return Zs(f,e,d)}))).reshape(i)}}),Ef=An({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,j(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){j(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},i=1;i<e.length;++i)r(i)}else t=!0,e=tr(e,e.shape[0],0).map((function(e){return fr(e,[0])}));j(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var a=[],o=e,u=function(e){a.push(We.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=Rl(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(Wl(t,"euclidean"))})))};for(i=0;i<e.length;++i)u(i);return t?dr(a,0):a}}),Sf=An({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Of(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=pr(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];return r.forEach((function(e){var n=Of(e,t),r=n[0],o=n[1];i.push(r),a.push(o)})),[dr(i,0).reshape(e.shape),dr(a,0).reshape(e.shape)]}}),Cf=Object.freeze({bandPart:kf,gramSchmidt:Ef,qr:Sf});function _f(e,t,n,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);var o=e.shape[0];return n=Math.min(n,o),j(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),j(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),j(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),j(1===t.rank,(function(){return"scores must be a 1D tensor"})),j(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),j(0<=a&&a<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var jf=An({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=gn(e,"images","resizeBilinear");j(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),j(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],u=t[1],s=We.runKernelFunc((function(e,t){return t([i]),e.resizeBilinear(i,o,u,n)}),{x:i},(function(e,t){return{x:function(){return We.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:u});return a?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),Af=An({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=gn(e,"images","resizeNearestNeighbor");j(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),j(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),j("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=t[0],u=t[1],s=We.runKernelFunc((function(e,t){return t([i]),e.resizeNearestNeighbor(i,o,u,n)}),{batchImages:i},(function(e,t){return{batchImages:function(){return We.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return a?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),Tf=An({nonMaxSuppression_:function(e,t,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var a=gn(e,"boxes","nonMaxSuppression"),o=gn(t,"scores","nonMaxSuppression"),u=_f(a,o,n,r,i);n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold;var s={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return We.runKernelFunc((function(e){return e.nonMaxSuppression(a,o,n,r,i)}),{boxes:a,scores:o},null,"NonMaxSuppressionV3",s)}}),Nf=An({nonMaxSuppressionWithScore_:function(e,t,n,r,i,a){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var o=gn(e,"boxes","nonMaxSuppression"),u=gn(t,"scores","nonMaxSuppression"),s=_f(o,u,n,r,i,a),c={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:i=s.scoreThreshold,softNmsSigma:a=s.softNmsSigma},l=We.runKernel("NonMaxSuppressionV5",{boxes:o,scores:u},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),Rf=An({cropAndResize_:function(e,t,n,r,i,a){var o=gn(e,"image","cropAndResize"),u=gn(t,"boxes","cropAndResize","float32"),s=gn(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var c=u.shape[0];return j(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),j(2===u.rank&&4===u.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+u.shape+"."})),j(1===s.rank&&s.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+u.shape+"."})),j(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),j(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),j("bilinear"===i||"nearest"===i,(function(){return"method must be bilinear or nearest, but was "+i})),We.runKernelFunc((function(e,t){return e.cropAndResize(o,u,s,r,i,a)}),{images:o,boxes:u,boxInd:s},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),Df=Object.freeze({resizeBilinear:jf,resizeNearestNeighbor:Af,nonMaxSuppression:Tf,nonMaxSuppressionAsync:function(e,t,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),s(this,void 0,void 0,(function(){var a,o,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:return a=gn(e,"boxes","nonMaxSuppressionAsync"),o=gn(t,"scores","nonMaxSuppressionAsync"),u=_f(a,o,n,r,i),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return s=c.sent(),l=s[0],f=s[1],d=Da(l,f,n,r,i),a!==e&&a.dispose(),o!==t&&o.dispose(),[2,d]}}))}))},nonMaxSuppressionWithScore:Nf,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,i,a){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===a&&(a=0),s(this,void 0,void 0,(function(){var o,u,s,l,f,d,p;return c(this,(function(c){switch(c.label){case 0:return o=gn(e,"boxes","nonMaxSuppressionAsync"),u=gn(t,"scores","nonMaxSuppressionAsync"),s=_f(o,u,n,r,i,a),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,a=s.softNmsSigma,[4,Promise.all([o.data(),u.data()])];case 1:return l=c.sent(),f=l[0],d=l[1],p=Ia(f,d,n,r,i,a),o!==e&&o.dispose(),u!==t&&u.dispose(),[2,p]}}))}))},cropAndResize:Rf}),If=function(e,t){return!(e>0)||"linear"===t},Mf=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Ff=function(e,t){var n=t,r=Pr(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Pf=function(e,t,n){if("linear"===t)return e;if("relu"===t)return Pl(e);if("elu"===t)return Il(e);if("relu6"===t)return zl(e);if("prelu"===t)return Fl(e,n);throw new Error("Unknown fused activation "+t+".")},zf=An({fusedMatMul_:function(e){var t,n=e.a,r=e.b,i=e.transposeA,a=void 0!==i&&i,o=e.transposeB,u=void 0!==o&&o,s=e.bias,c=e.activation,l=void 0===c?"linear":c,f=e.preluActivationWeights;if(!1===If(We.state.gradientDepth,l)){var d=tl(n,r,a,u);return null!=s&&(d=Mr(d,s)),Pf(d,l,f)}var p=gn(n,"a","fused matMul"),h=gn(r,"b","fused matMul");t=Ie(p,h),p=t[0],h=t[1];var m=a?p.shape[p.rank-2]:p.shape[p.rank-1],v=u?h.shape[h.rank-1]:h.shape[h.rank-2],g=a?p.shape[p.rank-1]:p.shape[p.rank-2],y=u?h.shape[h.rank-2]:h.shape[h.rank-1],b=p.shape.slice(0,-2),x=h.shape.slice(0,-2),w=R(b),O=R(x);j(p.rank>=2&&h.rank>=2&&p.rank===h.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+h.rank+"."})),j(D(b,x),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+x+") of Tensors with shapes "+p.shape+" and "+h.shape+" must match."})),j(m===v,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+v+") of Tensors with shapes "+p.shape+" and "+h.shape+" and transposeA="+a+" and transposeB="+u+" must match."}));var k,E,S=p.shape.slice(0,-2).concat([g,y]),C=a?p.as3D(w,m,g):p.as3D(w,g,m),_=u?h.as3D(O,y,v):h.as3D(O,v,y);null!=s&&zr(S,(k=Ie(k=gn(s,"bias","fused matMul"),p)[0]).shape),null!=f&&(E=gn(f,"prelu weights","fused matMul"));var A={a:C,b:_};null!=s&&(A.bias=k),null!=f&&(A.preluActivationWeights=E);var T=[C,_];return We.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:C,b:_,transposeA:a,transposeB:u,bias:k,activation:l,preluActivationWeights:E});return t([C,_,n]),n}),A,(function(e,t){var n=t[0],r=t[1],i=t[2],o=Mf(e,i,l),c={};return null!=s&&(c={bias:function(){return Ff(k,o)}}),a||u?!a&&u?Object.assign({a:function(){return o.matMul(r,!1,!1)},b:function(){return o.matMul(n,!0,!1)}},c):a&&!u?Object.assign({a:function(){return r.matMul(o,!1,!0)},b:function(){return n.matMul(o,!1,!1)}},c):Object.assign({a:function(){return r.matMul(o,!0,!0)},b:function(){return o.matMul(n,!0,!0)}},c):Object.assign({a:function(){return o.matMul(r,!1,!0)},b:function(){return n.matMul(o,!0,!1)}},c)}),"_FusedMatMul",{transposeA:a,transposeB:u,activation:l},T,[!0]).reshape(S)}}),Lf=An({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=void 0===a?"NHWC":a,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(d=d||"linear",!1===If(We.state.gradientDepth,d)){var h=qc(t,n,r,i,o,s,c);return null!=l&&(h=Mr(h,l)),Pf(h,d,p)}var m=gn(t,"x","conv2d"),v=gn(n,"filter","conv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),j(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),j(4===v.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."})),null!=c&&j(I(i),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."})),j(g.shape[3]===v.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+v.shape[2]+"."})),j(wa(r,s),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"})),j("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var b,x,w=pa(g.shape,v.shape,r,s,i,c);null!=l&&(b=Ie(b=gn(l,"bias","fused conv2d"),m)[0],zr(w.outShape,b.shape)),null!=p&&(x=gn(p,"prelu weights","fused conv2d"));var O={x:g,filter:v};null!=l&&(O.bias=b),null!=p&&(O.preluActivationWeights=x);var k=[v,g],E=We.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:v,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([v,g,n]),n}),O,(function(e,t){var n=t,a=n[0],o=n[1],u=n[2],c=Mf(e,u,d);j(xa(s),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"}));var f={};return null!=l&&(f={bias:function(){return Ff(b,c)}}),Object.assign({x:function(){return Kc(o.shape,c,a,r,i)},filter:function(){return $c(o,c,a.shape,r,i)}},f)}),"FusedConv2D",{convInfo:w,activation:d},k,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),Bf=An({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,a=e.dataFormat,o=void 0===a?"NHWC":a,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(!1===If(We.state.gradientDepth,d)){var h=Xc(t,n,r,i,o,s,c);return null!=l&&(h=Mr(h,l)),Pf(h,d,p)}var m=gn(t,"x","depthwiseConv2d"),v=gn(n,"filter","depthwiseConv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),j(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."})),j(4===v.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+v.rank+"."})),j(g.shape[3]===v.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+v.shape[2]+"."})),null==s&&(s=[1,1]),j(wa(r,s),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"})),null!=c&&j(I(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+i+"."}));var b,x,w=pa(g.shape,v.shape,r,s,i,c,!0);null!=l&&(b=Ie(b=gn(l,"bias","fused conv2d"),m)[0],zr(w.outShape,b.shape)),null!=p&&(x=gn(p,"prelu weights","fused depthwiseConv2d"));var O={x:g,filter:v};null!=l&&(O.bias=b),null!=p&&(O.preluActivationWeights=x);var k=[v,g],E=We.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:v,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([v,g,n]),n}),O,(function(e,t){j(xa(s),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"}));var n=t[0],r=t[1],i=t[2],a=Mf(e,i,d),o={};return null!=l&&(o={bias:function(){return Ff(b,a)}}),Object.assign({x:function(){return Yc(r.shape,a,n,w)},filter:function(){return Jc(r,a,n.shape,w)}},o)}),"FusedDepthwiseConv2D",{convInfo:w,activation:d},k,[!0]);return y?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),Wf=Object.freeze({matMul:zf,conv2d:Lf,depthwiseConv2d:Bf}),Uf=Object.freeze({image:Df,linalg:Cf,losses:wf,spectral:Zl,fused:Wf,signal:lf,add:Mr,addN:Ts,batchNorm:Fs,batchNormalization:Ms,batchNorm2d:Ls,batchNormalization2d:zs,batchNorm3d:Us,batchNormalization3d:Ws,batchNorm4d:qs,batchNormalization4d:Hs,broadcastTo:Gs,clone:$s,div:Fi,divNoNan:ec,eye:nc,multinomial:rc,oneHot:ic,pad:ac,pad1d:oc,pad2d:uc,pad3d:sc,pad4d:cc,rand:lc,randomGamma:yc,randomNormal:bc,randomUniform:xc,square:wc,squaredDifference:Oc,tile:tc,truncatedNormal:kc,conv1d:Hc,conv2d:qc,conv3d:Gc,depthwiseConv2d:Xc,separableConv2d:Zc,conv2dTranspose:Qc,conv3dTranspose:el,op:An,booleanMaskAsync:Bc,complex:Tn,real:Nn,imag:Rn,concat:Yn,concat1d:Jn,concat2d:Zn,concat3d:Qn,concat4d:er,split:tr,matMul:tl,dot:nl,outerProduct:rl,reverse:il,reverse1d:al,reverse2d:ol,reverse3d:ul,reverse4d:sl,maxPool:fl,avgPool:dl,pool:pl,maxPool3d:hl,avgPool3d:ml,maxPoolWithArgmax:vl,slice:gl,slice1d:yl,slice2d:bl,slice3d:xl,slice4d:wl,abs:Lr,acos:Br,acosh:Wr,asin:Ur,asinh:Vr,atan:Hr,atanh:qr,ceil:Gr,clipByValue:$r,cos:Kr,cosh:Xr,erf:Yr,exp:Jr,expm1:Zr,floor:Qr,log:ei,log1p:ti,logSigmoid:ni,neg:ri,reciprocal:ii,round:ai,rsqrt:oi,sigmoid:ui,sign:si,isNaN:ci,isInf:li,isFinite:fi,sin:di,sinh:pi,softplus:hi,sqrt:mi,step:vi,tan:gi,tanh:yi,all:kl,any:El,argMax:Sl,argMin:Cl,logSumExp:_l,max:jl,mean:Al,min:Tl,moments:Nl,sum:Rl,prod:Dl,equal:Ec,equalStrict:Sc,greater:Cc,greaterEqual:_c,greaterEqualStrict:jc,greaterStrict:Ac,less:Tc,lessEqual:Nc,lessEqualStrict:Rc,lessStrict:Dc,notEqual:Ic,notEqualStrict:Mc,addStrict:bi,atan2:xi,divStrict:wi,floorDiv:Oi,maximum:ki,maximumStrict:Ei,minimum:Si,minimumStrict:Ci,mod:_i,modStrict:ji,mul:Ai,mulStrict:Ti,pow:Ni,powStrict:Ri,squaredDifferenceStrict:Di,sub:Ii,subStrict:Mi,elu:Il,leakyRelu:Ml,prelu:Fl,relu:Pl,relu6:zl,selu:Ll,logicalAnd:Ks,logicalNot:Xs,logicalOr:Ys,logicalXor:Js,where:Zs,whereAsync:Qs,buffer:nr,print:rr,batchToSpaceND:ir,cast:ar,cumsum:or,depthToSpace:ur,expandDims:sr,reshape:cr,spaceToBatchND:lr,squeeze:fr,stack:dr,unstack:pr,setdiff1dAsync:hr,fill:qn,linspace:Gn,ones:Vn,range:$n,scalar:Mn,tensor:Dn,tensor1d:Fn,tensor2d:Pn,tensor3d:zn,tensor4d:Ln,tensor5d:Bn,tensor6d:Wn,variable:Un,zeros:Hn,onesLike:Kn,zerosLike:Xn,transpose:ua,softmax:aa,logSoftmax:oa,localResponseNormalization:Bl,norm:Wl,gather:zc,unsortedSegmentSum:Lc,basicLSTMCell:Ul,multiRNNCell:Vl,movingAverage:Hl,stridedSlice:ql,topk:Gl,scatterND:$l,fft:Kl,ifft:Xl,rfft:Yl,irfft:Jl,sparseToDense:Ql,gatherND:ef,diag:tf,dropout:nf,hannWindow:of,hammingWindow:uf,frame:sf,stft:cf,inTopKAsync:ff});function Vf(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&j("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function Hf(e,t,n,r,i,a){for(var o=i.strideHeight,u=i.strideWidth,s=i.dilationHeight,c=i.dilationWidth,l=i.effectiveFilterHeight,f=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,h="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=nr(i.outShape,n),v=m.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],b=i.outShape[3],x=0;x<i.batchSize;++x)for(var w=x*g,O=x*r[0],k=0;k<i.inChannels;++k)for(var E=0;E<i.outHeight;++E)for(var S=E*o-d,C=Math.max(0,S),_=Math.min(i.inHeight,l+S),j=w+E*y,A=0;A<i.outWidth;++A){for(var T=A*u-p,N=Math.max(0,T),R=Math.min(i.inWidth,f+T),D=h,I=0,M=0,F=C;F<_;F+=s){for(var P=O+F*r[1],z=N;z<R;z+=c){var L=e[P+z*r[2]+k];"max"===a&&L>D?D=L:"avg"===a&&(I+=L,M++)}if(isNaN(D))break}v[j+A*b+k]="avg"===a?I/M:D}return m}function qf(e,t,n,r,i,a){void 0===i&&(i=!1),void 0===a&&(a=!1);for(var o=nr(r.outShape,"int32"),u=r.strideHeight,s=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=nr(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*u-p,x=b;x<0;)x+=c;for(var w=Math.min(r.inHeight,f+b),O=0;O<r.outWidth;++O){for(var k=O*s-h,E=k;E<0;)E+=l;for(var S=Math.min(r.inWidth,d+k),C=Number.NEGATIVE_INFINITY,_=-1,j=x;j<w;j+=c)for(var A=j-b,T=E;T<S;T+=l){var N=T-k,R=m.get(v,j,T,g);R>C&&(C=R,_=i?a?((v*r.inHeight+j)*r.inWidth+T)*r.inChannels+g:(j*r.inWidth+T)*r.inChannels+g:A*d+N)}o.set(_,v,y,O,g)}}return o}function Gf(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var $f=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new sa(t,We),t}return u(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,d().get("IS_NODE")&&hn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?_a(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return le(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return nr(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return We.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t=ue(),e(),[2,{kernelMs:ue()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:We.keep(e.clone()),imag:We.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(Vf(e,"slice"),Xi(e.shape,t,n)){var r=Yi(t,e.strides),i=R(n);return Dn(this.readSync(e.dataId).subarray(r,r+i),n,e.dtype)}for(var a=nr(n,e.dtype),o=this.bufferSync(e),u=0;u<a.size;++u){var s=a.indexToLoc(u).map((function(e,n){return e+t[n]}));a.values[u]=o.get.apply(o,s)}return a.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){Vf(e,"stridedSlice");var i=Gi(t,n,r);if(i.some((function(e){return 0===e})))return Dn([],i);for(var a=nr(i,e.dtype),o=this.bufferSync(e),u=0;u<a.size;u++){for(var s=a.indexToLoc(u),c=new Array(s.length),l=0;l<c.length;l++)c[l]=s[l]*r[l]+t[l];a.set.apply(a,[o.get.apply(o,c)].concat(s))}return a.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=nr([e.size,e.size],e.dtype),r=n.values,i=0;i<t.length;i++)r[i*e.size+i]=t[i];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,a=0;a<e.rank;a++)a!==t&&(r[i++]=e.shape[a]);var o=new Array(e.rank).fill(0),u=e.shape.slice();u[t]=1;var s=new Array(n);for(a=0;a<s.length;a++)o[t]=a,s[a]=this.slice(e,o,u).reshape(r);return s},t.prototype.reverse=function(e,t){Vf(e,"reverse");for(var n=nr(e.shape,e.dtype),r=this.bufferSync(e),i=function(i){var a=n.indexToLoc(i),o=a.slice();t.forEach((function(t){return o[t]=e.shape[t]-1-o[t]})),n.set.apply(n,[r.get.apply(r,o)].concat(a))},a=0;a<n.size;a++)i(a);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return Nn(e)})),i=e.map((function(e){return Rn(e)}));return Tn(this.concat(r,t),this.concat(i,t))}var a=e.map((function(e){var n=R(e.shape.slice(t));return e.as2D(-1,n)})),o=jn(a.map((function(e){return e.shape})),1),u=nr(o,e[0].dtype).values;if(1===a[0].shape[0]){var s=0;a.forEach((function(e){u.set(n.readSync(e.dataId),s),s+=e.size}))}else{var c=0;a.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var a=i*o[1]+c,s=0;s<e.shape[1];++s)u[a+s]=t[r++];c+=e.shape[1]}))}var l=jn(e.map((function(e){return e.shape})),t);return Dn(u,l,e[0].dtype)},t.prototype.neg=function(e){return Vf(e,"neg"),this.multiply(Mn(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Re(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;Vf(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=nr(e[0].shape,e[0].dtype),i=r.values,a=0;a<e.length;a++)for(var o=n[a],u=0;u<i.length;u++)i[u]+=o[u];return r.toTensor()},t.prototype.softmax=function(e,t){var n=B([t],e.shape),r=this.max(e,n),i=On(r.shape,n),a=this.subtract(e,r.reshape(i)),o=this.exp(a),u=this.sum(o,n).reshape(i);return Fi(o,u)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Re(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return Vf([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){Vf([e,t],"matMul");for(var i=n?e.shape[1]:e.shape[2],a=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],u=e.shape[0],s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=l[0],d=l[1],p=l[2],h=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=h[0],v=h[1],g=h[2],y=a*o,b=nr([u,a,o],e.dtype),x=b.values,w=this.blockSize,O=0;O<u;O++)for(var k=0;k<a;k+=w)for(var E=0;E<o;E+=w)for(var S=0;S<i;S+=w)for(var C=Math.min(k+w,a),_=Math.min(E+w,o),j=Math.min(S+w,i),A=k;A<C;A++)for(var T=E;T<_;T++){for(var N=0,R=S;R<j;R++)N+=s[O*f+A*d+R*p]*c[R*m+T*v+O*g];x[O*y+(A*o+T)]+=N}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,a=e.bias,o=e.activation,u=e.preluActivationWeights,s=this.batchMatMul(t,n,r,i);return a&&(s=this.add(s,a)),o&&(s=Gf(this,s,o,u)),s},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Re(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.floorDiv=function(e,t){return Vf([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){Vf(e,"sum"),kn("sum",t,e.rank);for(var n=wn(e.shape,t),r=n[0],i=n[1],a=Hn(r,Re(e.dtype,"int32")),o=R(i),u=this.readSync(a.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*o,f=0,d=0;d<o;++d)f+=s[l+d];u[c]=f}return a},t.prototype.prod=function(e,t){Vf(e,"sum");for(var n=wn(e.shape,t),r=n[0],i=n[1],a=Hn(r,Re(e.dtype,"int32")),o=R(i),u=this.readSync(a.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*o,f=1,d=0;d<o;++d)f*=s[l+d];u[c]=f}return a},t.prototype.unsortedSegmentSum=function(e,t,n){Vf(e,"unsortedSegmentSum");for(var r=[],i=e.rank-t.rank,a=0;a<i;++a)t=t.expandDims(a+1);for(a=0;a<n;++a){var o=Mn(a,"int32"),u=Ec(o,t).asType("float32").mul(e).sum(0);r.push(u)}return dr(r)},t.prototype.argMin=function(e,t){Vf(e,"argMin");var n=[t];kn("argMin",n,e.rank);for(var r=wn(e.shape,n),i=r[0],a=r[1],o=Hn(i,"int32"),u=R(a),s=this.readSync(o.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var f=l*u,d=c[f],p=0,h=0;h<u;++h){var m=c[f+h];m<d&&(d=m,p=h)}s[l]=p}return o},t.prototype.argMax=function(e,t){Vf(e,"argMax");var n=[t];kn("argMax",n,e.rank);for(var r=wn(e.shape,n),i=r[0],a=r[1],o=Hn(i,"int32"),u=R(a),s=this.readSync(o.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var f=l*u,d=c[f],p=0,h=0;h<u;++h){var m=c[f+h];m>d&&(d=m,p=h)}s[l]=p}return o},t.prototype.cumsum=function(e,t,n,r){if(Vf(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var i=Re(e.dtype,"int32"),a=Hn(e.shape,i),o=this.readSync(a.dataId),u=this.readSync(e.dataId),s=e.shape[e.rank-1],c=r?function(e,t){return e+s-t-1}:function(e,t){return e+t},l=0;l<u.length;l+=s)for(var f=0;f<s;f++){var d=c(l,f);if(0===f)o[d]=n?0:u[d];else{var p=c(l,f-1);o[d]=n?u[p]+o[p]:u[d]+o[p]}}return a},t.prototype.equal=function(e,t){return Vf([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return Vf([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return Vf([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return Vf([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return Vf([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return Vf([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){Vf(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return Vf([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return Vf([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){Vf([e,t,n],"select");for(var r=this.readSync(e.dataId),i=this.readSync(t.dataId),a=this.readSync(n.dataId),o=Hn(t.shape,Re(t.dtype,n.dtype)),u=this.readSync(o.dataId),s=0,c=0===e.rank||e.rank>1||1===t.rank?1:R(t.shape.slice(1)),l=0;l<r.length;l++)for(var f=0;f<c;f++)1===r[l]?u[s++]=i[l]:u[s++]=a[l];return o},t.prototype.where=function(e){Vf([e],"where");var t=this.readSync(e.dataId);return Ua(e.shape,t)},t.prototype.topk=function(e,t,n){return Vf(e,"topk"),Wa(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Vf(e,"min"),kn("min",t,e.rank);for(var n=wn(e.shape,t),r=n[0],i=n[1],a=Hn(r,e.dtype),o=R(i),u=this.readSync(a.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*o,f=s[l],d=0;d<o;++d){var p=s[l+d];p<f&&(f=p)}u[c]=f}return a},t.prototype.minimum=function(e,t){return Vf([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return Vf([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){Vf(e,"max"),kn("max",t,e.rank);for(var n=wn(e.shape,t),r=n[0],i=n[1],a=Hn(r,e.dtype),o=R(i),u=this.readSync(a.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*o,f=s[l],d=0;d<o;++d){var p=s[l+d];p>f&&(f=p)}u[c]=f}return a},t.prototype.maximum=function(e,t){return Vf([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){Vf(e,"all"),kn("all",t,e.rank);for(var n=wn(e.shape,t),r=n[0],i=n[1],a=Hn(r,e.dtype),o=R(i),u=this.readSync(a.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*o,f=s[l],d=0;d<o;++d){var p=s[l+d];f=f&&p}u[c]=f}return a},t.prototype.any=function(e,t){Vf(e,"any"),kn("any",t,e.rank);for(var n=wn(e.shape,t),r=n[0],i=n[1],a=Hn(r,e.dtype),o=R(i),u=this.readSync(a.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*o,f=s[l],d=0;d<o;++d){var p=s[l+d];f=f||p}u[c]=f}return a},t.prototype.squaredDifference=function(e,t){return Vf([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){Vf(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){Vf(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){Vf(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){Vf(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){Vf(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){Vf(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){Vf(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=Math.floor(t[r]);t[r]-i<.5?n[r]=Math.floor(t[r]):t[r]-i>.5?n[r]=Math.ceil(t[r]):n[r]=i%2==0?i:i+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){Vf(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){Vf(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){Vf(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){Vf(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log1p(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){Vf(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){Vf(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=1/Math.sqrt(i)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){Vf(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){Vf(e,"relu");for(var t=Hn(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return t},t.prototype.relu6=function(e){Vf(e,"relu");for(var t=Hn(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return t},t.prototype.prelu=function(e,t){return Vf([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){Vf(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?i:Math.exp(i)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){Vf([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=this.readSync(e.dataId),a=0;a<r.length;++a){var o=r[a];n[a]=o>=1?i[a]:i[a]*(o+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){Vf(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){Vf(e,"clip");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>n?n:o<t?t:o}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var i=n[2*r],a=n[2*r+1];t[r]=Math.hypot(i,a)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){Vf(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){Vf(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){Vf(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var a,o=r[i]>-t,u=r[i]<t,s=Math.exp(r[i]);a=u?s:o?r[i]:Math.log(1+s),n[i]=a}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){Vf(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){Vf(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){Vf(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){Vf(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){Vf(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){Vf(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return Vf([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){Vf(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){Vf(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){Vf(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=M(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){Vf(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){Vf(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){Vf(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){Vf(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=Math.sign(n[r]),a=Math.abs(n[r]),o=1/(1+.3275911*a);t[r]=i*(1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-a*a))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),Vf(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var a=r[i];isNaN(a)?n[i]=NaN:n[i]=a>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights,u=this.conv2d(t,n,r);return i&&(u=this.add(u,i)),a&&(u=Gf(this,u,a,o)),u},t.prototype.conv2d=function(e,t,n){Vf([e,t],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,u=n.padInfo.left,s=n.padInfo.top,c="channelsLast"===n.dataFormat,l=nr(n.outShape,e.dtype),f=e.strides[0],d=c?e.strides[1]:e.strides[2],p=c?e.strides[2]:1,h=c?1:e.strides[1],m=l.strides[0],v=c?l.strides[1]:l.strides[2],g=c?l.strides[2]:1,y=c?1:l.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=l.values,O=0;O<n.batchSize;++O)for(var k=O*f,E=O*m,S=0;S<n.outHeight;++S)for(var C=E+S*v,_=S*n.strideHeight-s,j=0;j<r;j++){var A=_+j*a;if(!(A<0||A>=n.inHeight))for(var T=j*t.strides[0],N=k+A*d,R=0;R<n.outWidth;++R)for(var D=C+R*g,I=R*n.strideWidth-u,M=0;M<i;M++){var F=I+M*o;if(!(F<0||F>=n.inWidth))for(var P=N+F*p,z=T+M*t.strides[1],L=0;L<n.inChannels;++L){for(var B=b[P+L*h],W=0;W<n.outChannels;++W)w[D+W*y]+=B*x[z+W];z+=n.outChannels}}}return l.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,i=n.filterHeight,a=n.filterWidth,o=n.dilationDepth,u=n.dilationHeight,s=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,f=n.padInfo.top,d=nr(n.outShape,e.dtype),p=this.readSync(e.dataId),h=this.readSync(t.dataId),m=d.values,v=0;v<n.batchSize;++v)for(var g=v*e.strides[0],y=v*d.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*d.strides[1],w=b*n.strideDepth-c,O=0;O<r;O++){var k=w+O*o;if(!(k<0||k>=n.inDepth))for(var E=O*t.strides[0],S=g+k*e.strides[1],C=0;C<n.outHeight;++C)for(var _=x+C*d.strides[2],j=C*n.strideHeight-f,A=0;A<i;A++){var T=j+A*u;if(!(T<0||T>=n.inHeight))for(var N=E+A*t.strides[1],R=S+T*e.strides[2],D=0;D<n.outWidth;++D)for(var I=_+D*n.outChannels,M=D*n.strideWidth-l,F=0;F<a;F++){var P=M+F*s;if(!(P<0||P>=n.inWidth))for(var z=N+F*t.strides[2],L=R+P*n.inChannels,B=z,W=0;W<n.inChannels;++W){for(var U=p[L+W],V=0;V<n.outChannels;++V)m[I+V]+=U*h[B+V];B+=n.outChannels}}}}return d.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){Vf([e,t],"conv2dDerInput");for(var r=nr(n.inShape,"float32"),i=r.values,a=this.readSync(e.dataId),o=this.readSync(t.dataId),u=t.strides,s=u[0],c=u[1],l=u[2],f=n.batchSize,d=n.filterHeight,p=n.filterWidth,h=n.inChannels,m=n.inHeight,v=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,O=n.dataFormat,k=d-1-n.padInfo.top,E=p-1-n.padInfo.left,S="channelsLast"===O,C=r.strides[0],_=S?r.strides[1]:r.strides[2],j=S?r.strides[2]:1,A=S?1:r.strides[1],T=e.strides[0],N=S?e.strides[1]:e.strides[2],R=S?e.strides[2]:1,D=S?1:e.strides[1],I=0;I<f;++I)for(var M=0;M<h;++M)for(var F=0;F<m;++F)for(var P=F-k,z=Math.max(0,Math.ceil(P/x)),L=Math.min(y,(d+P)/x),B=0;B<v;++B){for(var W=B-E,U=Math.max(0,Math.ceil(W/w)),V=Math.min(b,(p+W)/w),H=0,q=z;q<L;++q)for(var G=q*x-P,$=U;$<V;++$)for(var K=T*I+N*q+R*$,X=s*(d-1-G)+c*(p-1-($*w-W))+l*M,Y=0;Y<g;++Y)H+=a[K+D*Y]*o[X+Y];i[C*I+_*F+j*B+A*M]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=nr(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],u=a[1],s=a[2],c=a[3],l=this.readSync(e.dataId),f=e.strides,d=f[0],p=f[1],h=f[2],m=f[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],O=n.batchSize,k=n.filterDepth,E=n.filterHeight,S=n.filterWidth,C=n.inChannels,_=n.inDepth,j=n.inHeight,A=n.inWidth,T=n.outChannels,N=n.outDepth,R=n.outHeight,D=n.outWidth,I=n.strideDepth,M=n.strideHeight,F=n.strideWidth,P=k-1-n.padInfo.front,z=E-1-n.padInfo.top,L=S-1-n.padInfo.left,B=0;B<O;++B)for(var W=0;W<C;++W)for(var U=0;U<_;++U)for(var V=U-P,H=Math.max(0,Math.ceil(V/I)),q=Math.min(N,(k+V)/I),G=0;G<j;++G)for(var $=G-z,K=Math.max(0,Math.ceil($/M)),X=Math.min(R,(E+$)/M),Y=0;Y<A;++Y){for(var J=Y-L,Z=Math.max(0,Math.ceil(J/F)),Q=Math.min(D,(S+J)/F),ee=0,te=H;te<q;++te)for(var ne=te*I-V,re=K;re<X;++re)for(var ie=re*M-$,ae=Z;ae<Q;++ae)for(var oe=d*B+p*te+h*re+m*ae,ue=y*(k-1-ne)+b*(E-1-ie)+x*(S-1-(ae*F-J))+w*W,se=0;se<T;++se)ee+=l[oe+se]*v[ue+se];i[o*B+u*U+s*G+c*Y+W]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){Vf([e,t],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,u="channelsLast"===n.dataFormat,s=nr(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,f=this.bufferSync(e),d=this.bufferSync(t),p=0;p<a;++p)for(var h=Math.max(0,Math.ceil((l-p)/r)),m=Math.min(n.outHeight,(n.inHeight+l-p)/r),v=0;v<o;++v)for(var g=Math.max(0,Math.ceil((c-v)/i)),y=Math.min(n.outWidth,(n.inWidth+c-v)/i),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,O=0;O<n.batchSize;++O)for(var k=h;k<m;++k)for(var E=p+k*r-l,S=g;S<y;++S){var C=v+S*i-c;w+=u?f.get(O,E,C,b)*d.get(O,k,S,x):f.get(O,b,E,C)*d.get(O,x,k,S)}s.set(w,p,v,b,x)}return s.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,u=n.filterHeight,s=n.filterWidth,c=nr(n.filterShape,"float32"),l=c.values,f=c.strides,d=f[0],p=f[1],h=f[2],m=f[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],O=this.readSync(e.dataId),k=e.strides,E=k[0],S=k[1],C=k[2],_=k[3],j=n.padInfo.front,A=n.padInfo.left,T=n.padInfo.top,N=0;N<o;++N)for(var R=Math.max(0,Math.ceil((j-N)/r)),D=Math.min(n.outDepth,(n.inDepth+j-N)/r),I=N*d,M=0;M<u;++M)for(var F=Math.max(0,Math.ceil((T-M)/i)),P=Math.min(n.outHeight,(n.inHeight+T-M)/i),z=M*p+I,L=0;L<s;++L)for(var B=Math.max(0,Math.ceil((A-L)/a)),W=Math.min(n.outWidth,(n.inWidth+A-L)/a),U=L*h+z,V=0;V<n.inChannels;++V)for(var H=V*m+U,q=0;q<n.outChannels;++q){for(var G=0,$=0;$<n.batchSize;++$)for(var K=$*E,X=$*y,Y=R;Y<D;++Y)for(var J=(N+Y*r-j)*S+K,Z=Y*b+X,Q=F;Q<P;++Q)for(var ee=(M+Q*i-T)*C+J,te=Q*x+Z,ne=B;ne<W;++ne){var re=ne*w+te;G+=O[(L+ne*a-A)*_+ee+V]*v[re+q]}l[H+q]=G}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,a=e.activation,o=e.preluActivationWeights,u=this.depthwiseConv2D(t,n,r);return i&&(u=this.add(u,i)),a&&(u=Gf(this,u,a,o)),u},t.prototype.depthwiseConv2D=function(e,t,n){Vf([e,t],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,u=n.padInfo.left,s=n.padInfo.top,c=n.outChannels/n.inChannels,l=nr(n.outShape,e.dtype),f=this.readSync(e.dataId),d=this.readSync(t.dataId),p=l.values,h=0;h<n.batchSize;++h)for(var m=h*e.strides[0],v=h*l.strides[0],g=0;g<n.outHeight;++g)for(var y=v+g*l.strides[1],b=g*n.strideHeight-u,x=0;x<r;++x){var w=b+x*a;if(!(w<0||w>=n.inHeight))for(var O=x*t.strides[0],k=m+w*e.strides[1],E=0;E<n.outWidth;++E)for(var S=y+E*l.strides[2],C=E*n.strideWidth-s,_=0;_<i;++_){var j=C+_*o;if(!(j<0||j>=n.inWidth))for(var A=O+_*t.strides[1],T=k+j*n.inChannels,N=S,R=A,D=0;D<n.inChannels;++D){for(var I=f[T+D],M=0;M<c;++M)p[N+M]+=I*d[R+M];N+=c,R+=c}}}return l.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){Vf([e,t],"depthwiseConv2DDerInput");for(var r=nr(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],u=a[1],s=a[2],c=this.readSync(e.dataId),l=e.strides,f=l[0],d=l[1],p=l[2],h=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,O=n.inChannels,k=n.inHeight,E=n.inWidth,S=n.outChannels,C=n.outHeight,_=n.outWidth,j=n.strideHeight,A=n.strideWidth,T=x-1-n.padInfo.top,N=w-1-n.padInfo.left,R=S/O,D=0;D<b;++D)for(var I=0;I<O;++I)for(var M=0;M<k;++M)for(var F=M-T,P=Math.max(0,Math.ceil(F/j)),z=Math.min(C,(x+F)/j),L=0;L<E;++L){for(var B=L-N,W=Math.max(0,Math.ceil(B/A)),U=Math.min(_,(w+B)/A),V=0,H=P;H<z;++H)for(var q=H*j-F,G=W;G<U;++G)for(var $=f*D+d*H+p*G,K=v*(x-1-q)+g*(w-1-(G*A-B))+y*I,X=0;X<R;++X)V+=c[$+(I*R+X)]*h[K+X];i[o*D+u*M+s*L+I]=V}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){Vf([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,u=nr(n.filterShape,"float32"),s=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,f=this.bufferSync(e),d=this.bufferSync(t),p=0;p<a;++p)for(var h=Math.max(0,Math.ceil((c-p)/r)),m=Math.min(n.outHeight,(n.inHeight+c-p)/r),v=0;v<o;++v)for(var g=Math.max(0,Math.ceil((s-v)/i)),y=Math.min(n.outWidth,(n.inWidth+s-v)/i),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/l),w=b%l,O=0,k=0;k<n.batchSize;++k)for(var E=h;E<m;++E)for(var S=p+E*r-c,C=g;C<y;++C){var _=v+C*i-s;O+=f.get(k,S,_,x)*d.get(k,E,C,b)}u.set(O,p,v,x,w)}return u.toTensor()},t.prototype.tile=function(e,t){return Vf(e,"tile"),Ba(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){Vf(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),i=t.map((function(e){return e[0]})),a=this.bufferSync(e),o=nr(r,e.dtype);0!==n&&o.values.fill(n);for(var u=0;u<e.size;u++){var s=a.indexToLoc(u),c=s.map((function(e,t){return e+i[t]}));o.set.apply(o,[a.get.apply(a,s)].concat(c))}return o.toTensor()},t.prototype.gather=function(e,t,n){Vf([e,t],"gather");var r=e.shape.slice(),i=this.readSync(t.dataId);r[n]=i.length;for(var a=nr(r,e.dtype),o=this.bufferSync(e),u=0;u<a.size;++u){var s=a.indexToLoc(u),c=s.slice();c[n]=i[s[n]];var l=o.locToIndex(c);a.values[u]=o.values[l]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){Vf([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),i=mr(e.shape,t,r),a=vr(i.length,t.length),o=gr(e.shape,t,r),u=yr(n,t.length),s=br(o,n,t.length);return ua(e.reshape(i),a).reshape(o).slice(u,s)},t.prototype.spaceToBatchND=function(e,t,n){Vf([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var a=1+t.length;a<e.shape.length;++a)i.push([0,0]);var o=e.pad(i),u=mr(o.shape,t,r,!1),s=vr(u.length,t.length,!1),c=gr(o.shape,t,r,!1);return ua(o.reshape(u),s).reshape(c)},t.prototype.maxPool=function(e,t){return Vf(e,"maxPool"),Hf(this.readSync(e.dataId),e.shape,e.dtype,e.strides,t,"max").toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){Vf([t,n],"maxPoolBackprop");for(var i=this.readSync(t.dataId),a=nr(r.outShape,t.dtype,qf(i,t.shape,t.dtype,r).values),o=r.strideHeight,u=r.strideWidth,s=r.dilationHeight,c=r.dilationWidth,l=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=f-1-r.padInfo.left,p=l-1-r.padInfo.top,h=nr(t.shape,"float32"),m=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-p,w=b-d,O=0,k=0;k<l;k+=s){var E=(x+k)/o;if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var S=0;S<f;S+=c){var C=(w+S)/u;if(!(C<0||C>=r.outWidth||Math.floor(C)!==C)){var _=l*f-1-a.get(v,E,C,g)===k*f+S?1:0;0!==_&&(O+=m.get(v,E,C,g)*_)}}}h.set(O,v,y,b,g)}return h.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){Vf([e,t],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,u=n.dilationHeight,s=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,f=l-1-n.padInfo.left,d=c-1-n.padInfo.top,p=nr(t.shape,"float32"),h=1/(a*o),m=this.bufferSync(e),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-d,w=b-f,O=0,k=0;k<c;k+=u){var E=(x+k)/r;if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var S=0;S<l;S+=s){var C=(w+S)/i;C<0||C>=n.outWidth||Math.floor(C)!==C||(O+=m.get(v,E,C,g))}}p.set(O*h,v,y,b,g)}return p.toTensor()},t.prototype.pool3d=function(e,t,n){Vf(e,"pool3d");for(var r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(e.dataId),g=nr(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],O=t.outShape[4],k=0;k<t.batchSize;++k)for(var E=k*b,S=k*e.strides[0],C=0;C<t.inChannels;++C)for(var _=0;_<t.outDepth;++_){for(var j=_*r-d,A=j;A<0;)A+=o;for(var T=Math.min(t.inDepth,c+j),N=E+_*x,R=0;R<t.outHeight;++R){for(var D=R*i-p,I=D;I<0;)I+=u;for(var M=Math.min(t.inHeight,l+D),F=N+R*w,P=0;P<t.outWidth;++P){for(var z=P*a-h,L=z;L<0;)L+=s;for(var B=Math.min(t.inWidth,f+z),W=F+P*O,U=m,V=0,H=0,q=A;q<T;q+=o){for(var G=S+q*e.strides[1],$=I;$<M;$+=u){for(var K=G+$*e.strides[2],X=L;X<B;X+=s){var Y=v[K+X*e.strides[3]+C];if("max"===n&&Y>U?U=Y:"avg"===n&&(V+=Y,H++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}y[W+C]="avg"===n?V/H:U}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return Vf(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){Vf([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,o=n.filterDepth,u=n.filterHeight,s=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,m=d-1-n.padInfo.front,v=h-1-n.padInfo.left,g=p-1-n.padInfo.top,y=nr(t.shape,"float32"),b=1/(o*u*s),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var O=0;O<n.inChannels;++O)for(var k=0;k<n.inDepth;++k)for(var E=0;E<n.inHeight;++E)for(var S=0;S<n.inWidth;++S){for(var C=k-m,_=E-g,j=S-v,A=0,T=0;T<d;T+=c){var N=(C+T)/r;if(!(N<0||N>=n.outDepth||Math.floor(N)!==N))for(var R=0;R<p;R+=l){var D=(_+R)/i;if(!(D<0||D>=n.outHeight||Math.floor(D)!==D))for(var I=0;I<h;I+=f){var M=(j+I)/a;M<0||M>=n.outWidth||Math.floor(M)!==M||(A+=x.get(w,N,D,M,O))}}}y.set(A*b,w,k,E,S,O)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return Vf(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=nr(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,o=t.dilationDepth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,m=this.bufferSync(e),v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-d,x=b;x<0;)x+=o;for(var w=Math.min(t.inDepth,c+b),O=0;O<t.outHeight;++O){for(var k=O*i-p,E=k;E<0;)E+=u;for(var S=Math.min(t.inHeight,l+k),C=0;C<t.outWidth;++C){for(var _=C*a-h,j=_;j<0;)j+=s;for(var A=Math.min(t.inWidth,f+_),T=Number.NEGATIVE_INFINITY,N=-1,R=x;R<w;R+=o)for(var D=R-b,I=E;I<S;I+=u)for(var M=I-k,F=j;F<A;F+=s){var P=F-_,z=m.get(v,R,I,F,g);z>=T&&(T=z,N=D*l*f+M*l+P)}n.set(N,v,y,O,C,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){Vf([t,n],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(t,r),a=r.strideDepth,o=r.strideHeight,u=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=f-1-r.padInfo.front,m=p-1-r.padInfo.left,v=d-1-r.padInfo.top,g=nr(t.shape,"float32"),y=this.bufferSync(i),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var O=0;O<r.inDepth;++O)for(var k=0;k<r.inHeight;++k)for(var E=0;E<r.inWidth;++E){for(var S=O-h,C=k-v,_=E-m,j=0,A=0;A<f;A+=s){var T=(S+A)/a;if(!(T<0||T>=r.outDepth||Math.floor(T)!==T))for(var N=0;N<d;N+=c){var R=(C+N)/o;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var D=0;D<p;D+=l){var I=(_+D)/u;if(!(I<0||I>=r.outWidth||Math.floor(I)!==I)){var M=f*d*p-1-y.get(x,T,R,I,w)===A*d*p+N*p+D?1:0;0!==M&&(j+=b.get(x,T,R,I,w)*M)}}}}g.set(j,x,O,k,E,w)}return g.toTensor()},t.prototype.cast=function(e,t){return ka(e,t,this)},t.prototype.reshape=function(e,t){return Ea(e,t)},t.prototype.avgPool=function(e,t){return Vf(e,"avgPool"),Vf(e,"maxPool"),Hf(this.readSync(e.dataId),e.shape,e.dtype,e.strides,t,"avg").toTensor().toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){Vf(e,"resizeBilinear");for(var i=e.shape,a=i[0],o=i[1],u=i[2],s=i[3],c=this.readSync(e.dataId),l=new Float32Array(R([a,t,n,s])),f=[r&&t>1?o-1:o,r&&n>1?u-1:u],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0,h=f[0]/d[0],m=f[1]/d[1],v=0;v<a;v++)for(var g=0;g<t;g++)for(var y=h*g,b=Math.floor(y),x=y-b,w=Math.min(o-1,Math.ceil(y)),O=v*e.strides[0]+b*e.strides[1],k=v*e.strides[0]+w*e.strides[1],E=0;E<n;E++)for(var S=m*E,C=Math.floor(S),_=S-C,j=Math.min(u-1,Math.ceil(S)),A=O+C*e.strides[2],T=k+C*e.strides[2],N=O+j*e.strides[2],D=k+j*e.strides[2],I=0;I<s;I++){var M=c[A+I],F=c[T+I],P=M+(c[N+I]-M)*_,z=P+(F+(c[D+I]-F)*_-P)*x;l[p++]=z}return Dn(l,[a,t,n,s])},t.prototype.resizeBilinearBackprop=function(e,t,n){Vf([e,t],"resizeBilinearBackprop");for(var r=t.shape,i=r[0],a=r[1],o=r[2],u=r[3],s=e.shape,c=s[1],l=s[2],f=new Float32Array(i*a*o*u),d=[n&&c>1?a-1:a,n&&l>1?o-1:o],p=[n&&c>1?c-1:c,n&&l>1?l-1:l],h=d[0]/p[0],m=d[1]/p[1],v=this.readSync(e.dataId),g=0,y=0;y<i;y++)for(var b=y*t.strides[0],x=0;x<c;x++)for(var w=x*h,O=Math.floor(w),k=Math.min(Math.ceil(w),a-1),E=b+O*t.strides[1],S=b+k*t.strides[1],C=w-O,_=1-C,j=0;j<l;j++)for(var A=j*m,T=Math.floor(A),N=Math.min(Math.ceil(A),o-1),R=A-T,D=1-R,I=E+T*t.strides[2],M=E+N*t.strides[2],F=S+T*t.strides[2],P=S+N*t.strides[2],z=_*D,L=_*R,B=C*D,W=C*R,U=0;U<u;U++){var V=v[g++];f[I+U]+=V*z,f[M+U]+=V*L,f[F+U]+=V*B,f[P+U]+=V*W}return Ln(f,[i,o,a,u],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){Vf(e,"resizeNearestNeighbor");for(var i=e.shape,a=i[0],o=i[1],u=i[2],s=i[3],c=this.readSync(e.dataId),l=new Float32Array(a*t*n*s),f=[r&&t>1?o-1:o,r&&n>1?u-1:u],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=f[0]/d[0],h=f[1]/d[1],m=0,v=0;v<a;v++)for(var g=v*e.strides[0],y=0;y<t;y++)for(var b=p*y,x=g+Math.min(o-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var O=h*w,k=x+Math.min(u-1,r?Math.round(O):Math.floor(O))*e.strides[2],E=0;E<s;E++){var S=c[k+E];l[m++]=S}return Dn(l,[a,t,n,s],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){Vf([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,i=r[0],a=r[1],o=r[2],u=r[3],s=e.shape,c=s[1],l=s[2],f=new Float32Array(i*a*o*u),d=this.readSync(e.dataId),p=[n&&c>1?a-1:a,n&&l>1?o-1:o],h=[n&&c>1?c-1:c,n&&l>1?l-1:l],m=p[0]/h[0],v=p[1]/h[1],g=1/m,y=1/v,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<i;w++)for(var O=w*t.strides[0],k=0;k<a;k++)for(var E=O+k*t.strides[1],S=Math.floor(k*g),C=Math.floor(S-b/2),_=0;_<o;_++)for(var j=E+_*t.strides[2],A=Math.floor(_*y),T=Math.floor(A-x/2),N=0;N<u;N++){for(var R=0,D=0;D<b;D++){var I=D+C;if(!(I<0||I>=c)){var M=O+I*e.strides[1],F=I*m;if(k===Math.min(a-1,n?Math.round(F):Math.floor(F)))for(var P=0;P<x;P++){var z=P+T;if(!(z<0||z>=l)){var L=M+z*e.strides[2],B=z*v;_===Math.min(o-1,n?Math.round(B):Math.floor(B))&&(R+=d[L+N])}}}}f[j+N]=R}return Ln(f,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,i,a){Vf([e,t,n,i,a],"batchNorm");for(var o=this.readSync(e.dataId),u=this.readSync(t.dataId),s=this.readSync(n.dataId),c=i?this.readSync(i.dataId):new Float32Array([1]),l=a?this.readSync(a.dataId):new Float32Array([0]),f=new Float32Array(o.length),d=l.length,p=c.length,h=s.length,m=u.length,v=0,g=0,y=0,b=0,x=0;x<o.length;++x)f[x]=l[v++]+(o[x]-u[g++])*c[y++]/Math.sqrt(s[b++]+r),v>=d&&(v=0),g>=m&&(g=0),y>=p&&(y=0),b>=h&&(b=0);return Ln(f,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,i){Vf(e,"localResponseNormalization4D");var a=e.shape[3],o=a-1,u=this.readSync(e.dataId),s=e.size,c=new Float32Array(s);function l(e){for(var n=e%a,r=e-n+Math.max(0,n-t),i=e-n+Math.min(n+t,o),s=0;r<=i;r++){var c=u[r];s+=c*c}return s}for(var f=0;f<s;f++){var d=l(f),p=u[f]*Math.pow(n+r*d,-i);c[f]=p}return Ln(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,i,a,o){Vf(e,"LRNGrad");for(var u=e.shape[3],s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=this.readSync(n.dataId),f=new Float32Array(e.size),d=e.size,p=0;p<d;p++){for(var h=p%u,m=p-h+Math.max(0,h-r),v=p-h+Math.min(u,h+r+1),g=0,y=m;y<v;y++)g+=Math.pow(c[y],2);for(g=a*g+i,y=m;y<v;y++){var b=-2*a*o*c[y]*l[p]/g;p===y&&(b+=Math.pow(g,-o)),b*=s[p],f[y]+=b}}return Ln(f,e.shape)},t.prototype.multinomial=function(e,t,n,r){Vf(e,"multinomial");for(var i=t?e:aa(e),a=i.shape[0],o=i.shape[1],u=Hn([a,n],"int32"),s=this.readSync(u.dataId),c=this.readSync(i.dataId),l=0;l<a;++l){var f=l*o,d=new Float32Array(o-1);d[0]=c[f];for(var p=1;p<d.length;++p)d[p]=d[p-1]+c[f+p];for(var h=As(r.toString()),m=l*n,v=0;v<n;++v){var g=h();s[m+v]=d.length;for(var y=0;y<d.length;y++)if(g<d[y]){s[m+v]=y;break}}}return u},t.prototype.oneHot=function(e,t,n,r){Vf(e,"oneHot");var i=new Float32Array(e.size*t);i.fill(r);for(var a=this.readSync(e.dataId),o=0;o<e.size;++o)a[o]>=0&&a[o]<t&&(i[o*t+a[o]]=n);return Pn(i,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,i){return Vf(e,"nonMaxSuppression"),Da(this.readSync(e.dataId),this.readSync(t.dataId),n,r,i)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],i=nr(e.shape,"float32"),a=nr(e.shape,"float32"),o=Nn(e).as2D(n,r),u=Rn(e).as2D(n,r),s=0;s<n;s++)for(var c=o.slice([s,0],[1,r]),l=u.slice([s,0],[1,r]),f=Tn(c,l),d=this.readSync(this.fftImpl(f,t).dataId),p=0;p<r;p++){var h=ja(d,p);i.values[s*r+p]=h.real,a.values[s*r+p]=h.imag}return Tn(i.toTensor(),a.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(i=Tn(Nn(i).div(Mn(r)),Rn(i).div(Mn(r)))),i}var a=this.readSync(e.dataId),o=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(a,r,t));return Tn(o.real,o.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),i=t/2,a=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),o=Tn(a.real,a.imag).as1D(),u=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),s=Tn(u.real,u.imag).as1D();o=this.fftRadix2(o,i,n),s=this.fftRadix2(s,i,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),i=0;i<Math.ceil(e/2);i++){var a=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}(t,n),l=Tn(c.real,c.imag).mul(s),f=o.add(l),d=o.sub(l),p=Nn(f).concat(Nn(d)),h=Rn(f).concat(Rn(d));return Tn(p,h).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var a=0,o=0,u=0;u<t;u++){var s=Ta(i*u,t,n),c=ja(e,u);a+=c.real*s.real-c.imag*s.imag,o+=c.real*s.imag+c.imag*s.real}n&&(a/=t,o/=t),Aa(r,a,o,i)}return r},t.prototype.depthToSpace=function(e,t,n){j("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),j(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],i=e.shape[1],a=e.shape[2],o=e.shape[3],u=i*t,s=a*t,c=o/(t*t),l=this.readSync(e.dataId),f=new Float32Array(r*u*s*c),d=0,p=0;p<r;++p)for(var h=0;h<u;++h)for(var m=Math.floor(h/t),v=h%t,g=0;g<s;++g)for(var y=Math.floor(g/t),b=(v*t+g%t)*c,x=0;x<c;++x){var w=x+b+o*(y+a*(m+i*p));f[d++]=l[w]}return Ln(f,[r,u,s,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var i=zr(e.shape,t.shape),a=nr(i,n),o=this.readSync(e.dataId),u=this.readSync(t.dataId),s=Fr(e.shape,i),c=Fr(t.shape,i),l=a.values;if(s.length+c.length===0)for(var f=0;f<l.length;++f)l[f]=r(o[f%o.length],u[f%u.length]);else{var d=this.bufferSync(e),p=this.bufferSync(t),h=function(n){var i=a.indexToLoc(n),f=i.slice(-e.rank);s.forEach((function(e){return f[e]=0}));var h=d.locToIndex(f),m=i.slice(-t.rank);c.forEach((function(e){return m[e]=0}));var v=p.locToIndex(m);l[n]=r(o[h],u[v])};for(f=0;f<l.length;++f)h(f)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=zr(e.shape,t.shape),i=nr(r,"float32"),a=nr(r,"float32"),o=this.readSync(e.dataId),u=this.readSync(t.dataId),s=Fr(e.shape,r),c=Fr(t.shape,r),l=i.values,f=a.values;if(s.length+c.length===0)for(var d=0;d<l.length;d++){var p=d%o.length,h=d%u.length,m=n(o[2*p],o[2*p+1],u[2*h],u[2*h+1]);l[d]=m.real,f[d]=m.imag}else{var v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var a=i.indexToLoc(r),d=a.slice(-e.rank);s.forEach((function(e){return d[e]=0}));var p=v.locToIndex(d),h=a.slice(-t.rank);c.forEach((function(e){return h[e]=0}));var m=g.locToIndex(h),y=n(o[2*p],o[2*p+1],u[2*m],u[2*m+1]);l[r]=y.real,f[r]=y.imag};for(d=0;d<l.length;d++)y(d)}return this.complex(i.toTensor(),a.toTensor())},t.prototype.split=function(e,t,n){return La(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,i,a){for(var o=e.shape,u=o[0],s=o[1],c=o[2],l=o[3],f=t.shape[0],d=r[0],p=r[1],h=nr([f,d,p,l],"float32"),m=this.readSync(t.dataId),v=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=h.strides,x=0;x<f;x++){var w=4*x,O=m[w],k=m[w+1],E=m[w+2],S=m[w+3],C=v[x];if(!(C>=u))for(var _=d>1?(E-O)*(s-1)/(d-1):0,j=p>1?(S-k)*(c-1)/(p-1):0,A=0;A<d;A++){var T=d>1?O*(s-1)+A*_:.5*(O+E)*(s-1);if(T<0||T>s-1)for(var N=0;N<p;N++)for(var R=0;R<l;R++){var D=R+N*b[2]+A*b[1]+x*b[0];h.values[D]=a}else if("bilinear"===i){var I=Math.floor(T),M=Math.ceil(T),F=T-I;for(N=0;N<p;N++)if((q=p>1?k*(c-1)+N*j:.5*(k+S)*(c-1))<0||q>c-1)for(R=0;R<l;R++)D=R+N*b[2]+A*b[1]+x*b[0],h.values[D]=a;else{var P=Math.floor(q),z=Math.ceil(q),L=q-P;for(R=0;R<l;R++){var B=g[D=R+P*y[2]+I*y[1]+C*y[0]],W=g[D=R+z*y[2]+I*y[1]+C*y[0]],U=g[D=R+P*y[2]+M*y[1]+C*y[0]],V=B+(W-B)*L,H=U+(g[D=R+z*y[2]+M*y[1]+C*y[0]]-U)*L;D=R+N*b[2]+A*b[1]+x*b[0],h.values[D]=V+(H-V)*F}}}else for(N=0;N<p;++N){var q;if((q=p>1?k*(c-1)+N*j:.5*(k+S)*(c-1))<0||q>c-1)for(R=0;R<l;R++)D=R+N*b[2]+A*b[1]+x*b[0],h.values[D]=a;else{var G=Math.round(q),$=Math.round(T);for(R=0;R<l;R++){var K=R+G*y[2]+$*y[1]+C*y[0],X=R+N*b[2]+A*b[1]+x*b[0];h.values[X]=g[K]}}}}}return h.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var i=Ui(0,e,n),a=i.sliceRank,o=i.numUpdates,u=i.sliceSize,s=i.strides,c=i.outputSize;return this.scatter(e,t,n,c,u,o,a,s,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=Pi(e,t),a=i[0],o=i[1],u=i[2],s=i[3];if(0===o)return Dn([],a,e.dtype);for(var c=new be([o,u],e.dtype),l=this.readSync(t.dataId),f=this.readSync(e.dataId),d=0;d<o;d++){for(var p=[],h=0,m=0;m<r;m++){var v=l[d*r+m];h+=v*s[m],p.push(v)}if(h<0||h>=e.size/u)throw new Error("Invalid indices: "+p+" does not index into "+e.shape);for(var g=0;g<u;g++)c.values[d*u+g]=f[h*u+g]}return c.toTensor().reshape(a)},t.prototype.scatterND=function(e,t,n){var r=Ui(0,e,n),i=r.sliceRank,a=r.numUpdates,o=r.sliceSize,u=r.strides,s=r.outputSize,c=Mn(0);return this.scatter(e,t,n,s,o,a,i,u,c,!0)},t.prototype.fill=function(e,t,n){var r=V(n=n||Q(t),R(e));return r.fill(t),We.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=V(e.dtype,R(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return Sa(e,t,n)},t.prototype.scatter=function(e,t,n,r,i,a,o,u,s,c){var l=[r/i,i],f=this.readSync(e.dataId),d=this.readSync(t.dataId);if(0===r)return Dn([],n,t.dtype);var p=new be(l,t.dtype);p.values.fill(this.readSync(s.dataId)[0]);for(var h=0;h<a;h++){for(var m=[],v=0,g=0;g<o;g++){var y=f[h*o+g];m.push(y),v+=y*u[g]}if(v<0||v>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<i;b++)c?p.values[v*i+b]+=d[h*i+b]:p.values[v*i+b]=0===t.rank?d[0]:d[h*i+b]}return p.toTensor().reshape(n)},t}(ca);function Kf(e,t){return{kernelName:e,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,i=n.backend,a=r,o=a.a,u=a.b,s=i;Vf([o,u],e);var c=s.data.get(o.dataId).values,l=s.data.get(u.dataId).values,f=t(o.shape,u.shape,c,l,o.dtype),d=f[0],p=f[1];return{dataId:s.write(d,p,o.dtype),shape:p,dtype:o.dtype}}}}function Xf(e){return function(t,n,r,i,a){var o=zr(t,n),u=o.length,s=ne(o),c=U(a,R(o)),l=t.length,f=n.length,d=ne(t),p=ne(n),h=Fr(t,o),m=Fr(n,o);if(h.length+m.length===0)for(var v=0;v<c.length;++v)c[v]=e(r[v%r.length],i[v%i.length]);else{var g=function(t){var n=de(t,u,s),a=n.slice(-l);h.forEach((function(e){return a[e]=0}));var o=fe(a,l,d),v=n.slice(-f);m.forEach((function(e){return v[e]=0}));var g=fe(v,f,p);c[t]=e(r[o],i[g])};for(v=0;v<c.length;++v)g(v)}return[c,o]}}We.registerBackend("cpu",(function(){return new $f}),1);var Yf=Xf((function(e,t){return e/t})),Jf=Kf(Or,Yf),Zf={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,i=t.x,a=n,o=a.filterSize,u=a.strides,s=a.pad,c=a.includeBatchInIndex,l=r;Vf(i,"MaxPoolWithArgmax");var f=l.data.get(i.dataId).values,d=fa(i.shape,o,u,[1,1],s),p=function(e,t,n,r,i){var a=Hf(e,0,n,ne(t),i,"max"),o=qf(e,t,n,i,!0,r);return[a.values,o.values]}(f,i.shape,i.dtype,c,d),h=p[0],m=p[1],v=l.write(h,d.outShape,i.dtype),g=l.write(m,d.outShape,i.dtype);return[{dataId:v,shape:d.outShape,dtype:i.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}},Qf={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t,a=i.boxes,o=i.scores,u=r,s=u.maxOutputSize,c=u.iouThreshold,l=u.scoreThreshold,f=u.softNmsSigma,d=n;Vf(a,"NonMaxSuppressionWithScore");var p=Ia(d.data.get(a.dataId).values,d.data.get(o.dataId).values,s,c,l,f);return[p.selectedIndices,p.selectedScores]}},ed={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n;Vf(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),u=0;u<a.length;++u){var s=a[u];o[u]=s*s}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},td=Xf((function(e,t){var n=e-t;return n*n}));function nd(e,t,n,r,i){for(var a=R(t),o=t.length,u=ne(t),s=ne(i),c=U(n,R(i)),l=0;l<a;++l){for(var f=de(l,o,u),d=new Array(f.length),p=0;p<d.length;p++)d[p]=f[r[p]];c[fe(d,o,s)]=e[l]}return c}for(var rd=0,id=[Qf,ed,Kf(Er,td),Jf,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,i=t.x,a=n.perm,o=r;Vf(i,"transpose");for(var u=i.shape.length,s=new Array(u),c=0;c<s.length;c++)s[c]=i.shape[a[c]];var l=nd(o.data.get(i.dataId).values,i.shape,i.dtype,a,s);return{dataId:o.write(l,s,i.dtype),shape:s,dtype:i.dtype}}},Zf];rd<id.length;rd++)b(id[rd]);for(var ad,od=function(e){this.variableNames=["A"];var t=Ka(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},ud=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Ka(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},sd=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var i=ao(this.rank),a=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},cd=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=ao(this.rank),a=Ga("rc",this.rank),o=new Array(this.rank);for(r=0;r<t.length;r++)o[t[r]]=a[r];var u="vec2("+o.slice(-2).join()+")",s="++"+a[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+o.join()+"), "+u+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+s+") {\n        result[1] = "+c+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+s+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},ld=0,fd=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.pixels,a=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,u="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,s=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=s[0],l=s[1],f=[l,c],p=[l,c,a];(u||o)&&(null==ad&&(ad=document.createElement("canvas").getContext("2d")),ad.canvas.width=c,ad.canvas.height=l,ad.drawImage(i,0,0,c,l),i=ad.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=qe.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),i);var m=d().getBool("WEBGL_PACK")?new ud(p):new od(p),v=n.runWebGLProgram(m,[h],"int32");return n.disposeData(h.dataId),v}},{kernelName:Or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;return function(e,t,n){var r=new bo("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return d().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new wo("\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",e.shape,t.shape,!0)),n.runWebGLProgram(r,[e,t],"float32")}(r.a,r.b,n)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;hn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=t,a=i.boxes,o=i.scores,u=r,s=u.maxOutputSize,c=u.iouThreshold,l=u.scoreThreshold,f=u.softNmsSigma,d=n,p=Ia(d.readSync(a.dataId),d.readSync(o.dataId),s,c,l,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=n,a=new ts(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:Er,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,i=r.a,a=r.b,o=n,u=d().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new wo("return (a - b) * (a - b);",i.shape,a.shape):new bo("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(u,[i,a])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(e){for(var t,n=e.inputs,r=e.attrs,i=e.backend,a=n.x,o=r.perm,u=i,s=a.shape.length,c=new Array(s),l=0;l<c.length;l++)c[l]=a.shape[o[l]];if(u.shouldExecuteOnCPU([a])){var f=nd(u.texData.get(a.dataId).values,a.shape,a.dtype,o,c);t=u.makeTensorInfo(c,a.dtype),u.texData.get(t.dataId).values=f}else t=function(e,t,n){var r=d().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cd(e.shape,t):new sd(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}(a,o,u);return t}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,i=t.x,a=n,o=a.filterSize,u=a.strides,s=a.pad,c=a.includeBatchInIndex,l=r;j(4===i.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank "+i.shape.length+"."}));var f=[1,1];j(wa(u,f),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+u+" and dilations '"+f+"'"}));var d=fa(i.shape,o,u,f,s),p=function(e,t,n,r){var i=new Nu(n,"max",!1),a=r.runWebGLProgram(i,[e],"float32");return i=new Nu(n,"max",!0,!0,t),[a,r.runWebGLProgram(i,[e],"float32")]}(i,c,d,l);return[p[0],p[1]]}}];ld<fd.length;ld++)b(fd[ld]);for(var dd=0,pd=[{kernelName:xr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],i=zr(n.shape,r.shape);return{a:function(){var t=e,r=Pr(n.shape,i);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},b:function(){var t=e,n=Pr(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},{kernelName:jr,gradFunc:function(e,t,n){for(var r=n,i=r.inputShape,a=r.shape,o=Array.from(a),u=i.length-1;u>=0;u--)if(i[u]===a[u])o[u]=1;else if(1!==i[u])throw new Error("broadcastTo(): ["+i+"] cannot be broadcast to ["+a+"].");var s=[];for(u=0;u<o.length;u++)o[u]>1&&s.push(u);return{x:function(){return e.sum(s,!0)}}}},{kernelName:Or,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],i=zr(n.shape,r.shape);return{a:function(){var t=Fi(e,r.toFloat()),a=Pr(n.shape,i);return a.length>0?Rl(t,a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=Pr(r.shape,i);a.length>0&&(t=Rl(t,a).reshape(r.shape));var o=wc(r);return ri(Fi(t,o.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,i=t[0],a=t[1],o=t[2],u=t[3],s=Rs(i),c=null==u?Mn(1):u,l=Pr(a.shape,s.shape),f=[];if(1===a.rank){for(var d=0;d<s.shape.length-1;++d)f.push(s.shape[d]);f.push(1)}var p=Ii(i,a),h=Ai(e,c),m=oi(Mr(o,Mn(r))),v=Ai(Ai(Ai(m,m),m),Mn(-.5));return{x:function(){return 1===a.rank?cr(Ai(Ai(e,tc(m.as4D(1,1,1,a.shape[0]),f)),c),i.shape):cr(Ai(Ai(e,m),c),i.shape)},mean:function(){var e=Ai(Ai(m,Mn(-1)),h);return 1===a.rank&&(e=Rl(e,l)),cr(e,a.shape)},variance:function(){var e=Ai(Ai(v,p),h);return 1===a.rank&&(e=Rl(e,l)),cr(e,a.shape)},scale:function(){var t=Ai(p,m),n=Ai(e,t);return 1===a.rank&&(n=Rl(n,l)),cr(n,a.shape)},offset:function(){var t=e;return 1===a.rank&&(t=Rl(t,l)),cr(t,a.shape)}}}},{kernelName:Tr,gradFunc:function(e){return{x:function(){return e.toFloat()}}}},{kernelName:Ar,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Hn(n.shape,"float32")}}}},{kernelName:Rr,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],i=n.paddings.map((function(e){return e[0]}));return{x:function(){return e.slice(i,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:Er,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],i=Mn(2);return{a:function(){return Ai(e,Ai(i,Ii(n,r)))},b:function(){return Ai(e,Ai(i,Ii(r,n)))}}}},{kernelName:Nr,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],i=n.reps;return{x:function(){var t=Xn(r);if(1===r.rank)for(var n=0;n<i[0];++n)t=t.add(e.slice([n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(n=0;n<i[0];++n)for(var a=0;a<i[1];++a)t=t.add(e.slice([n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(n=0;n<i[0];++n)for(a=0;a<i[1];++a)for(var o=0;o<i[2];++o)t=t.add(e.slice([n*r.shape[0],a*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(n=0;n<i[0];++n)for(a=0;a<i[1];++a)for(o=0;o<i[2];++o)for(var u=0;u<i[3];++u)t=t.add(e.slice([n*r.shape[0],a*r.shape[1],o*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:"Transpose",gradFunc:function(e,t,n){var r=Sn(n.perm);return{x:function(){return ua(e,r)}}}}];dd<pd.length;dd++)x(pd[dd]);var hd=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();d().get("IS_BROWSER")&&d().setPlatform("browser",new hd);var md,vd=function(){function e(){this.util=n(364),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=d().global.fetch?d().global.fetch(e,t):(null==md&&(md=n(363)),md(e,t))},e.prototype.now=function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();d().get("IS_NODE")&&d().setPlatform("node",new vd);var gd={float32:4,int32:4,uint16:2,uint8:1,bool:1};function yd(e,t){for(var n={},r=0,i=function(t){var i=t.name,a=t.dtype,o=t.shape,u=R(o),s=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=gd[c.dtype],f=e.slice(r,r+u*l),d="uint8"===c.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===a)s=Float32Array.from(d,(function(e){return e*c.scale+c.min}));else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);s=Int32Array.from(d,(function(e){return Math.round(e*c.scale+c.min)}))}r+=u*l}else if("string"===a){var p=R(t.shape);s=[];for(var h=0;h<p;h++){var m=new Uint32Array(e.slice(r,r+4))[0];r+=4;var v=new Uint8Array(e.slice(r,r+m));s.push(v),r+=m}}else{var g=gd[a];if(f=e.slice(r,r+u*g),"float32"===a)s=new Float32Array(f);else if("int32"===a)s=new Int32Array(f);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);s=new Uint8Array(f)}r+=u*g}n[i]=Dn(s,o,a)},a=0,o=t;a<o.length;a++)i(o[a]);return n}function bd(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),i=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}var xd="undefined"!=typeof i&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function wd(e){return xd?i.byteLength(e):new Blob([e]).size}function Od(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function kd(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Ed(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:wd(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:wd(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Sd=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var i=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&i.push(n)})),i},e}(),Cd="://",_d=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){j(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Cd)&&(t=t.slice(0,t.indexOf(Cd))),j(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();j(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function jd(e){if(-1===e.indexOf(Cd))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+_d.getSchemes().join(","));return{scheme:e.split(Cd)[0],path:e.split(Cd)[1]}}function Ad(e,t,n){return void 0===n&&(n=!1),s(this,void 0,void 0,(function(){var r,i,a,o,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:return j(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),j((r=Sd.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),j(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),i=r[0],j((a=Sd.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),j(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),o=a[0],u=jd(e).scheme,s=jd(e).path,l=u===jd(e).scheme,[4,i.load()];case 1:return f=c.sent(),n&&l?[4,_d.getManager(u).removeModel(s)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[4,o.save(f)];case 4:return d=c.sent(),!n||l?[3,6]:[4,_d.getManager(u).removeModel(s)];case 5:c.sent(),c.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var Td="models_store",Nd="model_info_store";function Rd(){if(!d().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Dd(e){var t=e.result;t.createObjectStore(Td,{keyPath:"modelPath"}),t.createObjectStore(Nd,{keyPath:"modelPath"})}var Id=function(){function e(e){if(this.indexedDB=Rd(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Dd(i)},i.onsuccess=function(){var a=i.result;if(null==t){var o=a.transaction(Td,"readonly"),u=o.objectStore(Td).get(n.modelPath);u.onsuccess=function(){if(null==u.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(u.result.modelArtifacts)},u.onerror=function(e){return a.close(),r(u.error)},o.oncomplete=function(){return a.close()}}else{var s,c=Ed(t),l=a.transaction(Nd,"readwrite"),f=l.objectStore(Nd),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var i=(s=a.transaction(Td,"readwrite")).objectStore(Td).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});i.onsuccess=function(){return e({modelArtifactsInfo:c})},i.onerror=function(e){var t=(f=l.objectStore(Nd)).delete(n.modelPath);t.onsuccess=function(){return a.close(),r(i.error)},t.onerror=function(e){return a.close(),r(i.error)}}},d.onerror=function(e){return a.close(),r(d.error)},l.oncomplete=function(){null==s?a.close():s.oncomplete=function(){return a.close()}}}},i.onerror=function(e){return r(i.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Md=function(e){return d().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Id.URL_SCHEME)?(t=e.slice(Id.URL_SCHEME.length),new Id(t)):null;var t};Sd.registerSaveRouter(Md),Sd.registerLoadRouter(Md);var Fd=function(){function e(){this.indexedDB=Rd()}return e.prototype.listModels=function(){return s(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Dd(r)},r.onsuccess=function(){var e=r.result,i=e.transaction(Nd,"readonly"),a=i.objectStore(Nd).getAll();a.onsuccess=function(){for(var e={},n=0,r=a.result;n<r.length;n++){var i=r[n];e[i.modelPath]=i.modelArtifactsInfo}t(e)},a.onerror=function(t){return e.close(),n(a.error)},i.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return s(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){var r;return e=(r=e).startsWith(Id.URL_SCHEME)?r.slice(Id.URL_SCHEME.length):r,[2,new Promise((function(n,r){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return Dd(i)},i.onsuccess=function(){var t,a=i.result,o=a.transaction(Nd,"readwrite"),u=o.objectStore(Nd),s=u.get(e);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var i=u.delete(e),o=function(){var i=(t=a.transaction(Td,"readwrite")).objectStore(Td).delete(e);i.onsuccess=function(){return n(s.result.modelArtifactsInfo)},i.onerror=function(e){return r(s.error)}};i.onsuccess=o,i.onerror=function(e){return o(),a.close(),r(s.error)}},s.onerror=function(e){return a.close(),r(s.error)},o.oncomplete=function(){null==t?a.close():t.oncomplete=function(){return a.close()}}},i.onerror=function(e){return r(i.error)}}))]}))}))},e}();if(d().getBool("IS_BROWSER"))try{_d.registerManager(Id.URL_SCHEME,new Fd)}catch(Ae){}var Pd="/",zd="tensorflowjs_models",Ld="info",Bd="model_topology",Wd="weight_specs",Ud="weight_data",Vd="model_metadata";function Hd(e){return{info:[zd,e,Ld].join(Pd),topology:[zd,e,Bd].join(Pd),weightSpecs:[zd,e,Wd].join(Pd),weightData:[zd,e,Ud].join(Pd),modelMetadata:[zd,e,Vd].join(Pd)}}function qd(e){var t=e.split(Pd);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Pd)}var Gd=function(){function e(e){if(!d().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Hd(this.modelPath)}return e.prototype.save=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return c(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Ed(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(xd)return i.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,a,o,u;return c(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(a),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),null==(u=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(xd){var t=i.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(u),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),$d=function(e){return d().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gd.URL_SCHEME)?(t=e.slice(Gd.URL_SCHEME.length),new Gd(t)):null;var t};Sd.registerSaveRouter($d),Sd.registerLoadRouter($d);var Kd=function(){function e(){j(d().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),j("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,a;return c(this,(function(o){for(e={},t=zd+Pd,n=Pd+Ld,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(a=qd(i),e[a]=JSON.parse(this.LS.getItem(i)));return[2,e]}))}))},e.prototype.removeModel=function(e){return s(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){var i;if(e=(i=e).startsWith(Gd.URL_SCHEME)?i.slice(Gd.URL_SCHEME.length):i,t=Hd(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(d().getBool("IS_BROWSER"))try{_d.registerManager(Gd.URL_SCHEME,new Kd)}catch(Ae){}function Xd(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Yd=function(){function e(t){if(!d().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,a,o;return c(this,(function(u){switch(u.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,[4,Xd((function(){return a.dispatchEvent(new MouseEvent("click"))}))];case 2:return u.sent(),null==e.weightData?[3,4]:((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=t,[4,Xd((function(){return o.dispatchEvent(new MouseEvent("click"))}))]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Ed(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),Jd=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return s(this,void 0,void 0,(function(){var e,t,n=this;return c(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,i){var a=new FileReader;a.onload=function(a){var o=JSON.parse(a.target.result),u=o.modelTopology;if(null!=u){0===t.length&&r({modelTopology:u});var s=o.weightsManifest;if(null!=s){var c;try{c=n.checkManifestAndWeightFiles(s,t)}catch(e){return void i(e)}var l=[],f=[],d=[];s.forEach((function(e){e.paths.forEach((function(e){f.push(e),d.push(null)})),l.push.apply(l,e.weights)})),s.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,i=f.indexOf(e);d[i]=n,-1===d.indexOf(null)&&r({modelTopology:u,weightSpecs:l,weightData:Od(d),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy,userDefinedMetadata:o.userDefinedMetadata})},t.onerror=function(t){return i("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])}))}))}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(t){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return kd(e.name)})),i={},a=0,o=e;a<o.length;a++)o[a].paths.forEach((function(e){var a=kd(e);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");i[e]=t[r.indexOf(a)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return i},e}();function Zd(e,t,n,r){!function(e){j(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){j(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),j(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),j(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(e.map((function(a){return a.then((function(a){var o=n+ ++i/e.length*(r-n);return t(o),a})),a})))}function Qd(e,t){return s(this,void 0,void 0,(function(){var n,r,i,a,o,u,s,l,f;return c(this,(function(c){switch(c.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?d().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),i=0,a=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return o=c.sent(),[3,4];case 2:return[4,Zd(r,t.onProgress,i,a)];case 3:o=c.sent(),c.label=4;case 4:return u=o.map((function(e){return e.arrayBuffer()})),s=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(u)];case 5:return f=c.sent(),[3,8];case 6:return[4,Zd(u,t.onProgress,s,l)];case 7:f=c.sent(),c.label=8;case 8:return[2,f]}}))}))}function ep(e){var t=this;return function(n,r,i){return void 0===r&&(r=""),s(t,void 0,void 0,(function(){var t,a,o,u,s,l,f,d,p,h;return c(this,(function(c){switch(c.label){case 0:if(t=n.map((function(){return!1})),a={},o=null!=i?i.map((function(){return!1})):[],u=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var s="quantization"in e?e.quantization.dtype:e.dtype,c=gd[s]*R(e.shape),l=function(){t[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=i?i.forEach((function(t,n){t===e.name&&(l(),o[n]=!0)})):l(),u.push(e.name),r+=c}))})),!o.every((function(e){return e})))throw s=i.filter((function(e,t){return!o[t]})),new Error("Could not find weights in manifest with names: "+s.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),[4,e(f)];case 1:return d=c.sent(),p={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,i=0;i<t;i++)r+=d[h+i].byteLength;for(var o=new ArrayBuffer(r),u=new Uint8Array(o),s=0,c=0;c<t;c++){var l=new Uint8Array(d[h+c]);u.set(l,s),s+=l.byteLength}a[e].forEach((function(e){var t=yd(o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),h+=t})),[2,p]}}))}))}}Sd.registerSaveRouter((function(e){return d().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yd.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new Yd(e)}(e.slice(Yd.URL_SCHEME.length)):null}));var tp=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(j("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=d().platform.fetch,j(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&j(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i;return c(this,(function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=a.sent()).ok)return[2,{modelArtifactsInfo:Ed(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}}))}))},e.prototype.load=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,a,o,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=c.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");c.label=2;case 2:return c.trys.push([2,4,,5]),[4,e.json()];case 3:return t=c.sent(),[3,5];case 4:throw c.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,i=t.weightsManifest,a=t.generatedBy,o=t.convertedBy,u=t.format,s=t.userDefinedMetadata,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:d=c.sent(),l=d[0],f=d[1],c.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:f,userDefinedMetadata:s,generatedBy:a,convertedBy:o,format:u}]}}))}))},e.prototype.loadWeights=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,a,o,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],i=n[1],a=this.weightPathPrefix||r,o=[],u=0,s=e;u<s.length;u++)l=s[u],o.push.apply(o,l.weights);return f=[],e.forEach((function(e){e.paths.forEach((function(e){f.push(a+e+i)}))})),[4,Qd(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=c.sent(),[2,[o,Od(d)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function np(e){return null!=e.match(tp.URL_SCHEME_REGEX)}var rp=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return np(e)})):np(e))?ip(e,{onProgress:t}):null};function ip(e,t){return new tp(e,t)}Sd.registerSaveRouter(rp),Sd.registerLoadRouter(rp);var ap,op=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),up=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),sp=Object.freeze({browserFiles:function(e){return new Jd(e)},browserHTTPRequest:function(e,t){return ip(e,t)},concatenateArrayBuffers:Od,decodeWeights:yd,encodeWeights:function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,a,o,u=this;return c(this,(function(l){switch(l.label){case 0:for(n=[],r=[],i=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),a=function(a){var o=i[a],l=Array.isArray(e)?e[a].tensor:e[o];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+l.dtype);var f={name:o,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var d=new Promise((function(e){return s(u,void 0,void 0,(function(){var t,n,r,i,a,o,u;return c(this,(function(s){switch(s.label){case 0:return[4,l.bytes()];case 1:for(t=s.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),i=0,a=0;a<t.length;a++)o=t[a],u=new Uint8Array(new Uint32Array([o.length]).buffer),r.set(u,i),i+=4,r.set(o,i),i+=o.length;return e(r),[2]}}))}))}));r.push(d)}else r.push(l.data());null!=t&&(f.group=t),n.push(f)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:bd(l.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new op(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new op({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new op({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Sd.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Ed,getSaveHandlers:function(e){return Sd.getSaveHandlers(e)},http:ip,isHTTPScheme:np,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),s(this,void 0,void 0,(function(){return c(this,(function(i){return[2,ep((function(e){return Qd(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return Sd.registerLoadRouter(e)},registerSaveRouter:function(e){return Sd.registerSaveRouter(e)},weightsLoaderFactory:ep,withSaveHandler:function(e){return new up(e)},copyModel:function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Ad(e,t,!1)]}))}))},listModels:function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,a,o;return c(this,(function(u){switch(u.label){case 0:e=_d.getSchemes(),t={},n=0,r=e,u.label=1;case 1:return n<r.length?(i=r[n],[4,_d.getManager(i).listModels()]):[3,4];case 2:for(o in a=u.sent())t[i+Cd+o]=a[o];u.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){return[2,Ad(e,t,!0)]}))}))},removeModel:function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t=jd(e),[2,_d.getManager(t.scheme).removeModel(t.path)]}))}))}}),cp=An({confusionMatrix_:function(e,t,n){var r=gn(e,"labels","confusionMatrix"),i=gn(t,"predictions","confusionMatrix");j(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),j(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),j(1===i.rank,(function(){return"Expected the rank of predictions to be 1, but got "+i.rank})),j(r.shape[0]===i.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."})),j(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=ic(r.asType("int32"),n),o=ic(i.asType("int32"),n);return a.transpose().matMul(o).asType("int32")}}),lp=Object.freeze({confusionMatrix:cp}),fp=An({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,a=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(i&&i&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=v("FromPixels",We.backendName))return We.runKernel("FromPixels",{pixels:e},{numChannels:t});var u,s,c=i?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=c[0],f=c[1];if(o?u=e.getContext("2d").getImageData(0,0,l,f).data:r||n?u=e.data:(a||i)&&(null==ap&&(ap=document.createElement("canvas").getContext("2d")),ap.canvas.width=l,ap.canvas.height=f,ap.drawImage(e,0,0,l,f),u=ap.getImageData(0,0,l,f).data),4===t)s=new Int32Array(u);else{var d=l*f;s=new Int32Array(d*t);for(var p=0;p<d;p++)for(var h=0;h<t;++h)s[p*t+h]=u[4*p+h]}return zn(s,[f,l,t],"int32")}}),dp=Object.freeze({toPixels:function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,a,o,u,s,l,f,d,p,h,m,v,g,y,b,x,w,O,k,E,S;return c(this,(function(c){switch(c.label){case 0:if(n=gn(e,"img","toPixels"),e instanceof ke||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return u=c.sent(),s=n.min(),l=n.max(),[4,Promise.all([s.data(),l.data()])];case 2:if(f=c.sent(),d=f[0],p=f[1],h=d[0],m=p[0],s.dispose(),l.dispose(),"float32"===n.dtype){if(h<0||m>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+m+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||m>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+m+"].")}for(v="float32"===n.dtype?255:1,g=new Uint8ClampedArray(a*i*4),y=0;y<i*a;++y)b=void 0,x=void 0,w=void 0,O=void 0,1===o?(b=u[y]*v,x=u[y]*v,w=u[y]*v,O=255):3===o?(b=u[3*y]*v,x=u[3*y+1]*v,w=u[3*y+2]*v,O=255):4===o&&(b=u[4*y]*v,x=u[4*y+1]*v,w=u[4*y+2]*v,O=u[4*y+3]*v),g[0+(k=4*y)]=Math.round(b),g[k+1]=Math.round(x),g[k+2]=Math.round(w),g[k+3]=Math.round(O);return null!=t&&(t.width=a,t.height=i,E=t.getContext("2d"),S=new ImageData(g,a,i),E.putImageData(S,0,0)),n!==e&&n.dispose(),[2,g]}}))}))},fromPixels:fp}),pp=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),hp=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function mp(e){j(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),j("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),j(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),hp.register(e)}var vp=Object.freeze({Serializable:pp,SerializationMap:hp,registerClass:mp}),gp="1.7.2",yp=Object.freeze({gpgpu_util:vu,webgl_util:Ht,forceHalfFloat:function(){d().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:xs,setWebGLContext:Xe,GPGPUContext:gu}),bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),i=r.value,a=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:a[e.name]}}));this.applyGradients(o)}else this.applyGradients(a);return tn(a),t?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return na(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&tn(this.iterations_)},t.prototype.saveIterations=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Mn(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(pp);Object.defineProperty(bp,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var xp=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this)||this;return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=We.backend.epsilon()),i}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=We.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:en((function(){return Xn(i).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:en((function(){return Xn(i).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedGrads[r].variable,u=t.accumulatedUpdates[r].variable;en((function(){var e=o.mul(t.rho).add(a.square().mul(1-t.rho)),n=u.add(t.epsilon).sqrt().div(o.add(t.epsilon).sqrt()).mul(a),r=u.mul(t.rho).add(n.square().mul(1-t.rho));o.assign(e),u.assign(r);var s=n.mul(-t.learningRate).add(i);i.assign(s)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(tn(this.accumulatedGrads.map((function(e){return e.variable}))),tn(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(bp);mp(xp);var wp=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=We.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:en((function(){return qn(i.shape,t.initialAccumulatorValue).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedGrads[r].variable;en((function(){var e=o.add(a.square());o.assign(e);var n=a.div(e.add(We.backend.epsilon()).sqrt()).mul(-t.learningRate).add(i);i.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&tn(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(bp);mp(wp);var Op=function(e){function t(t,n,r,i){void 0===i&&(i=null);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],en((function(){a.accBeta1=Mn(n).variable(),a.accBeta2=Mn(r).variable()})),null==i&&(a.epsilon=We.backend.epsilon()),a}return u(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);en((function(){var r=Ii(1,t.accBeta1),i=Ii(1,t.accBeta2);n.forEach((function(n,a){var o=We.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:en((function(){return Xn(o).variable(!1)}))}),null==t.accumulatedSecondMoment[a]&&(t.accumulatedSecondMoment[a]={originalName:n+"/v",variable:en((function(){return Xn(o).variable(!1)}))});var u=Array.isArray(e)?e[a].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[a].variable,c=t.accumulatedSecondMoment[a].variable,l=s.mul(t.beta1).add(u.mul(1-t.beta1)),f=c.mul(t.beta2).add(u.square().mul(1-t.beta2)),d=l.div(r),p=f.div(i);s.assign(l),c.assign(f);var h=d.div(p.sqrt().add(t.epsilon)).mul(-t.learningRate).add(o);o.assign(h)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&tn(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&tn(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){var t,n=this;return c(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),en((function(){n.accBeta1.assign(Ni(n.beta1,n.iterations_+1)),n.accBeta2.assign(Ni(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(bp);mp(Op);var kp=function(e){function t(t,n,r,i,a){void 0===i&&(i=null),void 0===a&&(a=0);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.decay=a,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],en((function(){o.iteration=Mn(0).variable(),o.accBeta1=Mn(n).variable()})),null==i&&(o.epsilon=We.backend.epsilon()),o}return u(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);en((function(){var r=Ii(1,t.accBeta1),i=Fi(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,a){var o=We.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Xn(o).variable(!1)}),null==t.accumulatedWeightedInfNorm[a]&&(t.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:Xn(o).variable(!1)});var u=Array.isArray(e)?e[a].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[a].variable,c=t.accumulatedWeightedInfNorm[a].variable,l=s.mul(t.beta1).add(u.mul(1-t.beta1)),f=c.mul(t.beta2),d=u.abs(),p=f.maximum(d);s.assign(l),c.assign(p);var h=i.div(r).mul(l.div(p.add(t.epsilon))).add(o);o.assign(h)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&tn(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&tn(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(bp);mp(kp);var Ep=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=We.registeredVariables[n];en((function(){var e=t.c.mul(i).add(a);a.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=nn(Mn(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(bp);mp(Ep);var Sp=function(e){function t(t,n,r){void 0===r&&(r=!1);var i=e.call(this,t)||this;return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=Mn(i.momentum),i}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=We.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:en((function(){return Xn(i).variable(!1)}))});var a=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&en((function(){var e,n=t.m.mul(a).add(o);e=t.useNesterov?t.c.mul(o.add(n.mul(t.m))).add(i):t.c.mul(n).add(i),a.assign(n),i.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&tn(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Ep);mp(Sp);var Cp=function(e){function t(t,n,r,i,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===a&&(a=!1);var o=e.call(this)||this;if(o.learningRate=t,o.decay=n,o.momentum=r,o.epsilon=i,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=a,null==i&&(o.epsilon=We.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=We.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:en((function(){return Xn(i).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:en((function(){return Xn(i).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:en((function(){return Xn(i).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;en((function(){var e=o.mul(t.decay).add(a.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,s=n.mul(t.decay).add(a.mul(1-t.decay)),c=u.mul(t.momentum).add(a.mul(t.learningRate).div(e.sub(s.square().add(t.epsilon)).sqrt()));o.assign(e),n.assign(s),u.assign(c);var l=i.sub(c);i.assign(l)}else{var f=o.mul(t.decay).add(a.square().mul(1-t.decay));c=u.mul(t.momentum).add(a.mul(t.learningRate).div(f.add(t.epsilon).sqrt())),o.assign(f),u.assign(c),l=i.sub(c),i.assign(l)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&tn(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&tn(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&tn(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return s(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(bp);mp(Cp);var _p=function(){function e(){}return e.sgd=function(e){return new Ep(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Sp(e,t,n)},e.rmsprop=function(e,t,n,r,i){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new Cp(e,t,n,r,i)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Op(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new xp(e,t,n)},e.adamax=function(e,t,n,r,i){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new kp(e,t,n,r,i)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new wp(e,t)},e}(),jp={sgd:_p.sgd,momentum:_p.momentum,adadelta:_p.adadelta,adagrad:_p.adagrad,rmsprop:_p.rmsprop,adamax:_p.adamax,adam:_p.adam},Ap="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof a?a:function(e){return e()};function Tp(){return new Promise((function(e){return Ap((function(){return e()}))}))}ke.prototype.add=function(e){return Mr(this,e)},ke.prototype.broadcastTo=function(e){return Gs(this,e)},ke.prototype.div=function(e){return Fi(this,e)},ke.prototype.divNoNan=function(e){return ec(this,e)},ke.prototype.squaredDifference=function(e){return Oc(this,e)},ke.prototype.tile=function(e){return tc(this,e)},ke.prototype.oneHot=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=0),ic(this,e,t,n)},ke.prototype.transpose=function(e){return ua(this,e)},ke.prototype.pad=function(e,t){return ac(this,e,t)},ke.prototype.batchNorm=function(e,t,n,r,i){return Fs(this,e,t,n,r,i)},we=Uf}).call(this,n(53),n(206),n(116).Buffer,n(360).setImmediate)},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){var t,n,i="";if(e)if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(n=r(t))&&(i&&(i+=" "),i+=n);else"boolean"===typeof e||e.call||(i&&(i+=" "),i+=e);return i}t.a=function(){for(var e,t=0,n="";t<arguments.length;)(e=r(arguments[t++]))&&(n&&(n+=" "),n+=e);return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(39);function i(e,t){if(null==e)return{};var n,i,a=Object(r.a)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(71);function i(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Object(r.a)(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,u=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw a}}}}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=n.n(a),u=(n(8),n(43)),s=n.n(u),c=n(454),l=n(332),f=n(184),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var a=t.defaultTheme,u=t.withTheme,d=void 0!==u&&u,p=t.name,h=Object(i.a)(t,["defaultTheme","withTheme","name"]);var m=p,v=Object(c.a)(e,Object(r.a)({defaultTheme:a,Component:n,name:p||n.displayName,classNamePrefix:m},h)),g=o.a.forwardRef((function(e,t){e.classes;var u,s=e.innerRef,c=Object(i.a)(e,["classes","innerRef"]),h=v(Object(r.a)({},n.defaultProps,{},e)),m=c;return("string"===typeof p||d)&&(u=Object(f.a)()||a,p&&(m=Object(l.a)({theme:u,name:p,props:c})),d&&!m.theme&&(m.theme=u)),o.a.createElement(n,Object(r.a)({ref:s||t,classes:h},m))}));return s()(g,n),g}},p=n(59);t.a=function(e,t){return d(e,Object(r.a)({defaultTheme:p.a},t))}},function(e,t,n){e.exports=n(350)()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(128);var i=n(173),a=n(71);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(i.a)(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){e.exports=n(354)},function(e,t,n){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function i(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length/3,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb(".concat(n.map((function(e){return parseInt(e,16)})).join(", "),")"):""}function a(e){if(0===e.indexOf("#"))return e;var t=u(e).values;return"#".concat(t.map((function(e){return function(e){var t=e.toString(16);return 1===t.length?"0".concat(t):t}(e)})).join(""))}function o(e){var t=(e=u(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),s({type:c,values:l})}function u(e){if(e.type)return e;if("#"===e.charAt(0))return u(i(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(["Material-UI: unsupported `".concat(e,"` color."),"We support the following formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()."].join("\n"));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function s(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function c(e,t){var n=l(e),r=l(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function l(e){var t="hsl"===(e=u(e)).type?u(o(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return l(e)>.5?p(e,t):h(e,t)}function d(e,t){return e=u(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,s(e)}function p(e,t){if(e=u(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return s(e)}function h(e,t){if(e=u(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return s(e)}n.d(t,"g",(function(){return i})),n.d(t,"k",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"j",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"i",(function(){return h}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(160);var i=n(71),a=n(161);function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}(e,t)||Object(i.a)(e,t)||Object(a.a)()}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(30);function a(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){Object(i.a)(e,n),Object(i.a)(t,n)}}),[e,t])}},function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function u(e){r(o,i,a,u,s,"next",e)}function s(e){r(o,i,a,u,s,"throw",e)}u(void 0)}))}}n.d(t,"a",(function(){return i}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(184),i=(n(0),n(59));function a(){return Object(r.a)()||i.a}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(346)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function a(e){var t=r.useRef(e);return i((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),i=n(0),a=n.n(i),o=n(175);function u(e,t){var n=a.a.memo(a.a.forwardRef((function(t,n){return a.a.createElement(o.a,Object(r.a)({ref:n},t),e)})));return n.muiName=o.a.muiName,n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(129);var i=n(164),a=n(97);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(i.a)(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.r(t),n.d(t,"AdadeltaOptimizer",(function(){return r.a})),n.d(t,"AdagradOptimizer",(function(){return r.b})),n.d(t,"AdamOptimizer",(function(){return r.c})),n.d(t,"AdamaxOptimizer",(function(){return r.d})),n.d(t,"Add",(function(){return r.e})),n.d(t,"AddN",(function(){return r.f})),n.d(t,"BroadcastTo",(function(){return r.g})),n.d(t,"DataStorage",(function(){return r.h})),n.d(t,"Div",(function(){return r.i})),n.d(t,"ENV",(function(){return r.j})),n.d(t,"Environment",(function(){return r.k})),n.d(t,"FromPixels",(function(){return r.l})),n.d(t,"FusedBatchNorm",(function(){return r.m})),n.d(t,"Identity",(function(){return r.n})),n.d(t,"KernelBackend",(function(){return r.o})),n.d(t,"MaxPoolWithArgmax",(function(){return r.p})),n.d(t,"MomentumOptimizer",(function(){return r.q})),n.d(t,"NonMaxSuppressionV5",(function(){return r.r})),n.d(t,"OneHot",(function(){return r.s})),n.d(t,"Optimizer",(function(){return r.t})),n.d(t,"PadV2",(function(){return r.u})),n.d(t,"RMSPropOptimizer",(function(){return r.v})),n.d(t,"Rank",(function(){return r.w})),n.d(t,"Reduction",(function(){return r.x})),n.d(t,"SGDOptimizer",(function(){return r.y})),n.d(t,"Square",(function(){return r.z})),n.d(t,"SquaredDifference",(function(){return r.A})),n.d(t,"Tensor",(function(){return r.B})),n.d(t,"TensorBuffer",(function(){return r.C})),n.d(t,"Tile",(function(){return r.D})),n.d(t,"Transpose",(function(){return r.E})),n.d(t,"Variable",(function(){return r.F})),n.d(t,"abs",(function(){return r.G})),n.d(t,"acos",(function(){return r.H})),n.d(t,"acosh",(function(){return r.I})),n.d(t,"add",(function(){return r.J})),n.d(t,"addN",(function(){return r.K})),n.d(t,"addStrict",(function(){return r.L})),n.d(t,"all",(function(){return r.M})),n.d(t,"any",(function(){return r.N})),n.d(t,"argMax",(function(){return r.O})),n.d(t,"argMin",(function(){return r.P})),n.d(t,"asin",(function(){return r.Q})),n.d(t,"asinh",(function(){return r.R})),n.d(t,"atan",(function(){return r.S})),n.d(t,"atan2",(function(){return r.T})),n.d(t,"atanh",(function(){return r.U})),n.d(t,"avgPool",(function(){return r.V})),n.d(t,"avgPool3d",(function(){return r.W})),n.d(t,"backend",(function(){return r.X})),n.d(t,"backend_util",(function(){return r.Y})),n.d(t,"basicLSTMCell",(function(){return r.Z})),n.d(t,"batchNorm",(function(){return r.ab})),n.d(t,"batchNorm2d",(function(){return r.bb})),n.d(t,"batchNorm3d",(function(){return r.cb})),n.d(t,"batchNorm4d",(function(){return r.db})),n.d(t,"batchNormalization",(function(){return r.eb})),n.d(t,"batchNormalization2d",(function(){return r.fb})),n.d(t,"batchNormalization3d",(function(){return r.gb})),n.d(t,"batchNormalization4d",(function(){return r.hb})),n.d(t,"batchToSpaceND",(function(){return r.ib})),n.d(t,"booleanMaskAsync",(function(){return r.jb})),n.d(t,"broadcastTo",(function(){return r.kb})),n.d(t,"browser",(function(){return r.lb})),n.d(t,"buffer",(function(){return r.mb})),n.d(t,"cast",(function(){return r.nb})),n.d(t,"ceil",(function(){return r.ob})),n.d(t,"clipByValue",(function(){return r.pb})),n.d(t,"clone",(function(){return r.qb})),n.d(t,"complex",(function(){return r.rb})),n.d(t,"concat",(function(){return r.sb})),n.d(t,"concat1d",(function(){return r.tb})),n.d(t,"concat2d",(function(){return r.ub})),n.d(t,"concat3d",(function(){return r.vb})),n.d(t,"concat4d",(function(){return r.wb})),n.d(t,"conv1d",(function(){return r.xb})),n.d(t,"conv2d",(function(){return r.yb})),n.d(t,"conv2dTranspose",(function(){return r.zb})),n.d(t,"conv3d",(function(){return r.Ab})),n.d(t,"conv3dTranspose",(function(){return r.Bb})),n.d(t,"cos",(function(){return r.Cb})),n.d(t,"cosh",(function(){return r.Db})),n.d(t,"cumsum",(function(){return r.Eb})),n.d(t,"customGrad",(function(){return r.Fb})),n.d(t,"deprecationWarn",(function(){return r.Gb})),n.d(t,"depthToSpace",(function(){return r.Hb})),n.d(t,"depthwiseConv2d",(function(){return r.Ib})),n.d(t,"diag",(function(){return r.Jb})),n.d(t,"disableDeprecationWarnings",(function(){return r.Kb})),n.d(t,"dispose",(function(){return r.Lb})),n.d(t,"disposeVariables",(function(){return r.Mb})),n.d(t,"div",(function(){return r.Nb})),n.d(t,"divNoNan",(function(){return r.Ob})),n.d(t,"divStrict",(function(){return r.Pb})),n.d(t,"dot",(function(){return r.Qb})),n.d(t,"dropout",(function(){return r.Rb})),n.d(t,"elu",(function(){return r.Sb})),n.d(t,"enableDebugMode",(function(){return r.Tb})),n.d(t,"enableProdMode",(function(){return r.Ub})),n.d(t,"engine",(function(){return r.Vb})),n.d(t,"env",(function(){return r.Wb})),n.d(t,"equal",(function(){return r.Xb})),n.d(t,"equalStrict",(function(){return r.Yb})),n.d(t,"erf",(function(){return r.Zb})),n.d(t,"exp",(function(){return r.ac})),n.d(t,"expandDims",(function(){return r.bc})),n.d(t,"expm1",(function(){return r.cc})),n.d(t,"eye",(function(){return r.dc})),n.d(t,"fft",(function(){return r.ec})),n.d(t,"fill",(function(){return r.fc})),n.d(t,"findBackend",(function(){return r.gc})),n.d(t,"findBackendFactory",(function(){return r.hc})),n.d(t,"floor",(function(){return r.ic})),n.d(t,"floorDiv",(function(){return r.jc})),n.d(t,"frame",(function(){return r.kc})),n.d(t,"fused",(function(){return r.lc})),n.d(t,"gather",(function(){return r.mc})),n.d(t,"gatherND",(function(){return r.nc})),n.d(t,"gather_util",(function(){return r.oc})),n.d(t,"getBackend",(function(){return r.pc})),n.d(t,"getGradient",(function(){return r.qc})),n.d(t,"getKernel",(function(){return r.rc})),n.d(t,"getKernelsForBackend",(function(){return r.sc})),n.d(t,"grad",(function(){return r.tc})),n.d(t,"grads",(function(){return r.uc})),n.d(t,"greater",(function(){return r.vc})),n.d(t,"greaterEqual",(function(){return r.wc})),n.d(t,"greaterEqualStrict",(function(){return r.xc})),n.d(t,"greaterStrict",(function(){return r.yc})),n.d(t,"hammingWindow",(function(){return r.zc})),n.d(t,"hannWindow",(function(){return r.Ac})),n.d(t,"ifft",(function(){return r.Bc})),n.d(t,"imag",(function(){return r.Cc})),n.d(t,"image",(function(){return r.Dc})),n.d(t,"inTopKAsync",(function(){return r.Ec})),n.d(t,"io",(function(){return r.Fc})),n.d(t,"irfft",(function(){return r.Gc})),n.d(t,"isFinite",(function(){return r.Hc})),n.d(t,"isInf",(function(){return r.Ic})),n.d(t,"isNaN",(function(){return r.Jc})),n.d(t,"keep",(function(){return r.Kc})),n.d(t,"leakyRelu",(function(){return r.Lc})),n.d(t,"less",(function(){return r.Mc})),n.d(t,"lessEqual",(function(){return r.Nc})),n.d(t,"lessEqualStrict",(function(){return r.Oc})),n.d(t,"lessStrict",(function(){return r.Pc})),n.d(t,"linalg",(function(){return r.Qc})),n.d(t,"linspace",(function(){return r.Rc})),n.d(t,"localResponseNormalization",(function(){return r.Sc})),n.d(t,"log",(function(){return r.Tc})),n.d(t,"log1p",(function(){return r.Uc})),n.d(t,"logSigmoid",(function(){return r.Vc})),n.d(t,"logSoftmax",(function(){return r.Wc})),n.d(t,"logSumExp",(function(){return r.Xc})),n.d(t,"logicalAnd",(function(){return r.Yc})),n.d(t,"logicalNot",(function(){return r.Zc})),n.d(t,"logicalOr",(function(){return r.ad})),n.d(t,"logicalXor",(function(){return r.bd})),n.d(t,"losses",(function(){return r.cd})),n.d(t,"matMul",(function(){return r.dd})),n.d(t,"math",(function(){return r.ed})),n.d(t,"max",(function(){return r.fd})),n.d(t,"maxPool",(function(){return r.gd})),n.d(t,"maxPool3d",(function(){return r.hd})),n.d(t,"maxPoolWithArgmax",(function(){return r.id})),n.d(t,"maximum",(function(){return r.jd})),n.d(t,"maximumStrict",(function(){return r.kd})),n.d(t,"mean",(function(){return r.ld})),n.d(t,"memory",(function(){return r.md})),n.d(t,"min",(function(){return r.nd})),n.d(t,"minimum",(function(){return r.od})),n.d(t,"minimumStrict",(function(){return r.pd})),n.d(t,"mod",(function(){return r.qd})),n.d(t,"modStrict",(function(){return r.rd})),n.d(t,"moments",(function(){return r.sd})),n.d(t,"movingAverage",(function(){return r.td})),n.d(t,"mul",(function(){return r.ud})),n.d(t,"mulStrict",(function(){return r.vd})),n.d(t,"multiRNNCell",(function(){return r.wd})),n.d(t,"multinomial",(function(){return r.xd})),n.d(t,"neg",(function(){return r.yd})),n.d(t,"nextFrame",(function(){return r.zd})),n.d(t,"norm",(function(){return r.Ad})),n.d(t,"notEqual",(function(){return r.Bd})),n.d(t,"notEqualStrict",(function(){return r.Cd})),n.d(t,"oneHot",(function(){return r.Dd})),n.d(t,"ones",(function(){return r.Ed})),n.d(t,"onesLike",(function(){return r.Fd})),n.d(t,"op",(function(){return r.Gd})),n.d(t,"outerProduct",(function(){return r.Hd})),n.d(t,"pad",(function(){return r.Id})),n.d(t,"pad1d",(function(){return r.Jd})),n.d(t,"pad2d",(function(){return r.Kd})),n.d(t,"pad3d",(function(){return r.Ld})),n.d(t,"pad4d",(function(){return r.Md})),n.d(t,"pool",(function(){return r.Nd})),n.d(t,"pow",(function(){return r.Od})),n.d(t,"powStrict",(function(){return r.Pd})),n.d(t,"prelu",(function(){return r.Qd})),n.d(t,"print",(function(){return r.Rd})),n.d(t,"prod",(function(){return r.Sd})),n.d(t,"profile",(function(){return r.Td})),n.d(t,"rand",(function(){return r.Ud})),n.d(t,"randomGamma",(function(){return r.Vd})),n.d(t,"randomNormal",(function(){return r.Wd})),n.d(t,"randomUniform",(function(){return r.Xd})),n.d(t,"range",(function(){return r.Yd})),n.d(t,"ready",(function(){return r.Zd})),n.d(t,"real",(function(){return r.ae})),n.d(t,"reciprocal",(function(){return r.be})),n.d(t,"registerBackend",(function(){return r.ce})),n.d(t,"registerGradient",(function(){return r.de})),n.d(t,"registerKernel",(function(){return r.ee})),n.d(t,"relu",(function(){return r.fe})),n.d(t,"relu6",(function(){return r.ge})),n.d(t,"removeBackend",(function(){return r.he})),n.d(t,"reshape",(function(){return r.ie})),n.d(t,"reverse",(function(){return r.je})),n.d(t,"reverse1d",(function(){return r.ke})),n.d(t,"reverse2d",(function(){return r.le})),n.d(t,"reverse3d",(function(){return r.me})),n.d(t,"reverse4d",(function(){return r.ne})),n.d(t,"rfft",(function(){return r.oe})),n.d(t,"round",(function(){return r.pe})),n.d(t,"rsqrt",(function(){return r.qe})),n.d(t,"scalar",(function(){return r.re})),n.d(t,"scatterND",(function(){return r.se})),n.d(t,"scatter_util",(function(){return r.te})),n.d(t,"selu",(function(){return r.ue})),n.d(t,"separableConv2d",(function(){return r.ve})),n.d(t,"serialization",(function(){return r.we})),n.d(t,"setBackend",(function(){return r.xe})),n.d(t,"setPlatform",(function(){return r.ye})),n.d(t,"setdiff1dAsync",(function(){return r.ze})),n.d(t,"sigmoid",(function(){return r.Ae})),n.d(t,"sign",(function(){return r.Be})),n.d(t,"signal",(function(){return r.Ce})),n.d(t,"sin",(function(){return r.De})),n.d(t,"sinh",(function(){return r.Ee})),n.d(t,"slice",(function(){return r.Fe})),n.d(t,"slice1d",(function(){return r.Ge})),n.d(t,"slice2d",(function(){return r.He})),n.d(t,"slice3d",(function(){return r.Ie})),n.d(t,"slice4d",(function(){return r.Je})),n.d(t,"slice_util",(function(){return r.Ke})),n.d(t,"softmax",(function(){return r.Le})),n.d(t,"softplus",(function(){return r.Me})),n.d(t,"spaceToBatchND",(function(){return r.Ne})),n.d(t,"sparseToDense",(function(){return r.Oe})),n.d(t,"spectral",(function(){return r.Pe})),n.d(t,"split",(function(){return r.Qe})),n.d(t,"sqrt",(function(){return r.Re})),n.d(t,"square",(function(){return r.Se})),n.d(t,"squaredDifference",(function(){return r.Te})),n.d(t,"squaredDifferenceStrict",(function(){return r.Ue})),n.d(t,"squeeze",(function(){return r.Ve})),n.d(t,"stack",(function(){return r.We})),n.d(t,"step",(function(){return r.Xe})),n.d(t,"stft",(function(){return r.Ye})),n.d(t,"stridedSlice",(function(){return r.Ze})),n.d(t,"sub",(function(){return r.af})),n.d(t,"subStrict",(function(){return r.bf})),n.d(t,"sum",(function(){return r.cf})),n.d(t,"sumOutType",(function(){return r.df})),n.d(t,"tan",(function(){return r.ef})),n.d(t,"tanh",(function(){return r.ff})),n.d(t,"tensor",(function(){return r.gf})),n.d(t,"tensor1d",(function(){return r.hf})),n.d(t,"tensor2d",(function(){return r.if})),n.d(t,"tensor3d",(function(){return r.jf})),n.d(t,"tensor4d",(function(){return r.kf})),n.d(t,"tensor5d",(function(){return r.lf})),n.d(t,"tensor6d",(function(){return r.mf})),n.d(t,"tensor_util",(function(){return r.nf})),n.d(t,"test_util",(function(){return r.of})),n.d(t,"tidy",(function(){return r.pf})),n.d(t,"tile",(function(){return r.qf})),n.d(t,"time",(function(){return r.rf})),n.d(t,"topk",(function(){return r.sf})),n.d(t,"train",(function(){return r.tf})),n.d(t,"transpose",(function(){return r.uf})),n.d(t,"truncatedNormal",(function(){return r.vf})),n.d(t,"unregisterGradient",(function(){return r.wf})),n.d(t,"unregisterKernel",(function(){return r.xf})),n.d(t,"unsortedSegmentSum",(function(){return r.yf})),n.d(t,"unstack",(function(){return r.zf})),n.d(t,"util",(function(){return r.Af})),n.d(t,"valueAndGrad",(function(){return r.Bf})),n.d(t,"valueAndGrads",(function(){return r.Cf})),n.d(t,"variable",(function(){return r.Df})),n.d(t,"variableGrads",(function(){return r.Ef})),n.d(t,"version_core",(function(){return r.Ff})),n.d(t,"webgl",(function(){return r.Gf})),n.d(t,"where",(function(){return r.Hf})),n.d(t,"whereAsync",(function(){return r.If})),n.d(t,"zeros",(function(){return r.Jf})),n.d(t,"zerosLike",(function(){return r.Kf})),n.d(t,"constraints",(function(){return V})),n.d(t,"initializers",(function(){return Ke})),n.d(t,"layers",(function(){return $i})),n.d(t,"metrics",(function(){return Ki})),n.d(t,"models",(function(){return Xi})),n.d(t,"regularizers",(function(){return Yi})),n.d(t,"CallbackList",(function(){return xt})),n.d(t,"CustomCallback",(function(){return kt})),n.d(t,"History",(function(){return Ot})),n.d(t,"Callback",(function(){return Ji})),n.d(t,"callbacks",(function(){return ta})),n.d(t,"EarlyStopping",(function(){return ea})),n.d(t,"InputSpec",(function(){return ut})),n.d(t,"SymbolicTensor",(function(){return st})),n.d(t,"LayersModel",(function(){return Rn})),n.d(t,"input",(function(){return zn})),n.d(t,"loadLayersModel",(function(){return Pn})),n.d(t,"model",(function(){return Mn})),n.d(t,"registerCallbackConstructor",(function(){return Ln})),n.d(t,"sequential",(function(){return Fn})),n.d(t,"RNN",(function(){return ki})),n.d(t,"Sequential",(function(){return In})),n.d(t,"LayerVariable",(function(){return it})),n.d(t,"version_layers",(function(){return nn})),n.d(t,"GraphModel",(function(){return na.a})),n.d(t,"loadGraphModel",(function(){return na.c})),n.d(t,"deregisterOp",(function(){return na.b})),n.d(t,"registerOp",(function(){return na.d})),n.d(t,"version_converter",(function(){return na.e})),n.d(t,"data",(function(){return ra})),n.d(t,"version",(function(){return ia}));var r=n(2),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o,u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function l(){return null==o&&(o=Object(r.X)().epsilon()),o}var f=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return a(t,e),t}(Error),d=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return a(t,e),t}(Error),p=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return a(t,e),t}(Error),h=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return a(t,e),t}(Error),m=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return a(t,e),t}(Error);!function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}a(t,e)}(Error);function v(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}return(n=new Array(t)).fill(e),n}function g(e,t){if(!e)throw new m(t)}function y(e,t){for(var n=0,r=0,i=e;r<i.length;r++)i[r]===t&&n++;return n}function b(e){return 1===e.length?e[0]:e}function x(e){return Array.isArray(e)?e:[e]}function w(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function O(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var k={};function E(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function S(e,t,n,r,i){var a,o,s;if(void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r="object"),void 0===i&&(i=!1),"string"==typeof e){var c=e,l=void 0;if(c in n)l=n[c];else if(c in k)l=k[c];else if(null==(l=t[c]))throw new p("Unknown "+r+": "+e+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return l}var f=e;if(null==f.className||null==f.config)throw new p(r+": Improper config format: "+JSON.stringify(f)+".\n'className' and 'config' must set.");var d=f.className,h=void 0,m=void 0;if(d in n?(h=(a=n[d])[0],m=a[1]):d in k?(h=(o=k.className)[0],m=o[1]):d in t&&(h=(s=t[d])[0],m=s[1]),null==h)throw new p("Unknown "+r+": "+d+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(null!=m){for(var v={},g=0,y=Object.keys(k);g<y.length;g++)v[S=y[g]]=k[S];for(var b=0,x=Object.keys(n);b<x.length;b++)v[S=x[b]]=n[S];f.config.customObjects=v;for(var w=u({},k),O=0,E=Object.keys(n);O<E.length;O++){var S=E[O];k[S]=n[S]}!function e(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach((function(t){return e(t)}));else for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n],a=t[i];null!=a&&"object"==typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!=typeof a.value?e(a):t[i]=a.value)}}(f.config);var C=m(h,f.config,n,i);return k=u({},w),C}w=u({},k);for(var _=0,j=Object.keys(n);_<j.length;_++)S=j[_],k[S]=n[S];return C=new h(f.config),k=u({},w),C}function C(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function _(e){if(null==e)return e;for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];-1===t.indexOf(i)&&t.push(i)}return t}function j(e){if(null==e)throw new p("Invalid value in obj: "+JSON.stringify(e));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function A(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new p(n+" is not a valid "+t+".  Valid values are "+e+" or null/undefined.")}function T(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),g(n>=0),g(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function N(e,t){Array.isArray(e)?(r.Af.assert(e.length>0,(function(){return t+" is unexpectedly an empty array."})),e.forEach((function(e,n){return N(e,"element "+(n+1)+" of "+t)}))):r.Af.assert(Number.isInteger(e)&&e>0,(function(){return"Expected "+t+" to be a positive integer, but got "+function e(t){return null===t?"null":Array.isArray(t)?"["+t.map((function(t){return e(t)})).join(",")+"]":"string"==typeof t?'"'+t+'"':""+t}(e)+"."}))}function R(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function D(e,t){return Object(r.pf)((function(){return Object(r.Re)(Object(r.cf)(Object(r.vd)(e,e),t,!0))}))}var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getConfig=function(){return{}},t}(r.we.Serializable),M=function(e){function t(t){var n=e.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return a(t,e),t.prototype.apply=function(e){var t=this;return Object(r.pf)((function(){var n=D(e,t.axis),i=Object(r.pb)(n,0,t.maxValue);return Object(r.ud)(e,Object(r.Nb)(i,Object(r.J)(l(),n)))}))},t.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},t.className="MaxNorm",t}(I);r.we.registerClass(M);var F=function(e){function t(t){var n=e.call(this)||this;return n.defaultAxis=0,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return a(t,e),t.prototype.apply=function(e){var t=this;return Object(r.pf)((function(){return Object(r.Nb)(e,Object(r.J)(l(),D(e,t.axis)))}))},t.prototype.getConfig=function(){return{axis:this.axis}},t.className="UnitNorm",t}(I);r.we.registerClass(F);var P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return Object(r.fe)(e)},t.className="NonNeg",t}(I);r.we.registerClass(P);var z=function(e){function t(t){var n=e.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=t.minValue?t.minValue:n.defaultMinValue,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.rate=null!=t.rate?t.rate:n.defaultRate,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return a(t,e),t.prototype.apply=function(e){var t=this;return Object(r.pf)((function(){var n=D(e,t.axis),i=Object(r.J)(Object(r.ud)(t.rate,Object(r.pb)(n,t.minValue,t.maxValue)),Object(r.ud)(1-t.rate,n));return Object(r.ud)(e,Object(r.Nb)(i,Object(r.J)(l(),n)))}))},t.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},t.className="MinMaxNorm",t}(I);r.we.registerClass(z);var L={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function B(e){return E(e)}function W(e,t){return void 0===t&&(t={}),S(e,r.we.SerializationMap.getMap().classNameMap,t,"constraint")}function U(e){return null==e?null:"string"==typeof e?W({className:e in L?L[e]:e,config:{}}):e instanceof I?e:W(e)}var V=Object.freeze({maxNorm:function(e){return new M(e)},unitNorm:function(e){return new F(e)},nonNeg:function(){return new P},minMaxNorm:function(e){return new z(e)}}),H=["channelsFirst","channelsLast"],q=["valid","same","causal"],G=["max","avg"],$=["sum","mul","concat","ave"],K=new Map;function X(e){A(H,"DataFormat",e)}function Y(e){A(q,"PaddingMode",e)}function J(e){A(G,"PoolMode",e)}var Z=[];function Q(e,t){Z.push(e);try{var n=t();return Z.pop(),n}catch(e){throw Z.pop(),e}}function ee(e){if(!re(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Z.length?"":Z.join("/")+"/")+e}function te(e){if(!re(e))throw new Error("Not a valid tensor name: '"+e+"'");K.has(e)||K.set(e,0);var t=K.get(e);if(K.set(e,K.get(e)+1),t>0){var n=e+"_"+t;return K.set(n,1),n}return e}var ne=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function re(e){return!!e.match(ne)}function ie(e){return e===parseInt(e.toString(),10)}function ae(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,i=t;i<n;++i)r*=e[i];return r}function oe(e){return e=Array.isArray(e)?new Float32Array(e):e,Object(r.hf)(e)}function ue(e){return Object(r.nd)(oe(e)).dataSync()[0]}function se(e){return Object(r.fd)(oe(e)).dataSync()[0]}function ce(e,t){if(t<e)throw new p("end ("+t+") < begin ("+e+") is forbidden.");for(var n=[],r=e;r<t;++r)n.push(r);return n}function le(e,t){return e.asType(t)}function fe(e,t){void 0===t&&(t=-1);var n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function de(e,t,n){return Object(r.pf)((function(){switch(e.rank){case 1:return Object(r.Ge)(e,t,n);case 2:return Object(r.He)(e,[t,0],[n,e.shape[1]]);case 3:return Object(r.Ie)(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Object(r.Je)(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Object(r.Fe)(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Object(r.Fe)(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new p("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}))}function pe(e,t,n){return Object(r.pf)((function(){switch(e.rank){case 1:return Object(r.Ge)(e,t,n);case 2:return Object(r.He)(e,[0,t],[e.shape[0],n]);case 3:return Object(r.Ie)(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Object(r.Je)(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new p("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}}))}function he(e,t,n,i){return Object(r.pf)((function(){switch(e.rank){case 1:return Object(r.Ge)(e,t,n);case 2:switch(i){case 1:return de(e,t,n);case 2:return pe(e,t,n);default:throw new p("The axis is not within the rank of the tensor "+i)}case 3:switch(i){case 1:return de(e,t,n);case 2:return Object(r.Ie)(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return pe(e,t,n);default:throw new p("The axis is not within the rank of the tensor "+i)}case 4:switch(i){case 1:return de(e,t,n);case 2:return Object(r.Je)(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Object(r.Je)(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return pe(e,t,n);default:throw new p("The axis is not within the rank of the tensor "+i)}default:throw new p("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}}))}function me(e,t){var n;return void 0===t&&(t=-1),t<0&&(t=0!==(n=e[0].rank)?n:0),t===e[0].rank&&(t=-1),Object(r.sb)(e,t)}function ve(e,t){switch(e.rank){case 1:return Object(r.tb)([e,t]);case 2:return Object(r.ub)([e,t],0);case 3:return Object(r.vb)([e,t],0);case 4:return Object(r.wb)([e,t],0);default:throw new p("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function ge(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new p("The length of input n ("+t.length+") does not match the number of dimensions in input x ("+e.rank+")");return Object(r.qf)(e,t)}function ye(e,t,n,i,a){return void 0===t&&(t=0),void 0===n&&(n=1),Object(r.Wd)(e,t,n,i,a)}function be(e,t,n,i){if(e.rank<2||t.rank<2)throw new h("dot requires both inputs to be rank >= 2 but got x shape = "+e.shape+" and y shape = "+t.shape);if(t.rank>=3&&e.shape.slice(-1)[0]!==(f=t.shape.slice(-2)[0]))throw new h("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+e.shape+" and  y shape = "+t.shape);if(2===e.rank&&2===t.rank){var a=!1,o=!1;return r.lc.matMul({a:e,b:t,transposeA:a,transposeB:o,bias:i?Oe(e.rank,i,"channelsLast"):null,activation:n})}var u=e.shape.slice(),s=u.pop();e=e.reshape([-1,s]);var c=t.shape.slice(),l=c.pop(),f=c.pop(),d=c.concat([l]),p=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=t.transpose(p).reshape([f,-1]);var m=u.concat(d);return a=!1,o=!1,r.lc.matMul({a:e,b:t,transposeA:a,transposeB:o,bias:i?Oe(e.rank,i,"channelsLast"):null,activation:n}).reshape(m)}function xe(e,t,n){return Object(r.pf)((function(){return t=Array.isArray(t)?Object(r.hf)(t,"int32"):t.toInt(),Object(r.mc)(e,t,n)}))}function we(e){return Object(r.vd)(e,e)}function Oe(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new p("Unexpected bias dimensions: "+t.rank+"; expected it to be 1 or "+e);if(5===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1,1]):t.reshape([1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,1,r[0]]):t.reshape([1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1]):t.reshape([1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,r[0]]):t.reshape([1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1]):t.reshape([1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,r[0]]):t.reshape([1].concat(r))}else if(e<3)return t;throw new p("Unsupported input rank by biasAdd: "+t.rank)}function ke(e,t,n){return Object(r.pf)((function(){return null==n&&(n="channelsLast"),X(n),e.add(Oe(e.rank,t,n))}))}function Ee(e,t,n,i){return Object(r.pf)((function(){return Object(r.Rb)(e,t,n,i)}))}function Se(e,t,n){return void 0===n&&(n=!1),n?e():t()}var Ce=["fanIn","fanOut","fanAvg"],_e=["normal","uniform","truncatedNormal"];var je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.fromConfigUsesCustomObjects=function(){return!1},t.prototype.getConfig=function(){return{}},t}(r.we.Serializable),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){return Object(r.Jf)(e,t)},t.className="Zeros",t}(je);r.we.registerClass(Ae);var Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){return Object(r.Ed)(e,t)},t.className="Ones",t}(je);r.we.registerClass(Te);var Ne=function(e){function t(t){var n=e.call(this)||this;if("object"!=typeof t)throw new p("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new p("config must have value set but got "+t);return n.value=t.value,n}return a(t,e),t.prototype.apply=function(e,t){var n=this;return Object(r.pf)((function(){return Object(r.ud)(Object(r.re)(n.value),Object(r.Ed)(e,t))}))},t.prototype.getConfig=function(){return{value:this.value}},t.className="Constant",t}(je);r.we.registerClass(Ne);var Re=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=t.minval||n.DEFAULT_MINVAL,n.maxval=t.maxval||n.DEFAULT_MAXVAL,n.seed=t.seed,n}return a(t,e),t.prototype.apply=function(e,t){return Object(r.Xd)(e,this.minval,this.maxval,t)},t.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},t.className="RandomUniform",t}(je);r.we.registerClass(Re);var De=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return a(t,e),t.prototype.apply=function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new h("randomNormal does not support dType "+t+".");return ye(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="RandomNormal",t}(je);r.we.registerClass(De);var Ie=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return a(t,e),t.prototype.apply=function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new h("truncatedNormal does not support dType "+t+".");return Object(r.vf)(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="TruncatedNormal",t}(je);r.we.registerClass(Ie);var Me=function(e){function t(t){var n=e.call(this)||this;return n.gain=null!=t.gain?t.gain:1,n}return a(t,e),t.prototype.apply=function(e,t){var n=this;return Object(r.pf)((function(){if(2!==e.length||e[0]!==e[1])throw new p("Identity matrix initializer can only be used for 2D square matrices.");return Object(r.ud)(n.gain,Object(r.dc)(e[0]))}))},t.prototype.getConfig=function(){return{gain:this.gain}},t.className="Identity",t}(je);r.we.registerClass(Me);var Fe=function(e){function t(t){var n=e.call(this)||this;if(t.scale<0)throw new p("scale must be a positive float. Got: "+t.scale);return n.scale=null==t.scale?1:t.scale,n.mode=null==t.mode?"fanIn":t.mode,function(e){A(Ce,"FanMode",e)}(n.mode),n.distribution=null==t.distribution?"normal":t.distribution,function(e){A(_e,"Distribution",e)}(n.distribution),n.seed=t.seed,n}return a(t,e),t.prototype.apply=function(e,t){var n=function(e,t){var n,r;if(void 0===t&&(t="channelsLast"),X(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length))if("channelsFirst"===t){var i=ae(e,2);n=e[1]*i,r=e[0]*i}else"channelsLast"===t&&(i=ae(e,0,e.length-2),n=e[e.length-2]*i,r=e[e.length-1]*i);else{var a=ae(e);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}(e),i=n[0],a=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,i):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(i+a)/2),"normal"===this.distribution){var u=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new h(this.getClassName()+" does not support dType "+t+".");return Object(r.vf)(e,0,u,t,this.seed)}var s=Math.sqrt(3*o);return Object(r.Xd)(e,-s,s,t)},t.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},t.className="VarianceScaling",t}(je);r.we.registerClass(Fe);var Pe=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})||this}return a(t,e),t.prototype.getClassName=function(){return Fe.className},t.className="GlorotUniform",t}(Fe);r.we.registerClass(Pe);var ze=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})||this}return a(t,e),t.prototype.getClassName=function(){return Fe.className},t.className="GlorotNormal",t}(Fe);r.we.registerClass(ze);var Le=function(e){function t(t){return e.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return a(t,e),t.prototype.getClassName=function(){return Fe.className},t.className="HeNormal",t}(Fe);r.we.registerClass(Le);var Be=function(e){function t(t){return e.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})||this}return a(t,e),t.prototype.getClassName=function(){return Fe.className},t.className="HeUniform",t}(Fe);r.we.registerClass(Be);var We=function(e){function t(t){return e.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return a(t,e),t.prototype.getClassName=function(){return Fe.className},t.className="LeCunNormal",t}(Fe);r.we.registerClass(We);var Ue=function(e){function t(t){return e.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})||this}return a(t,e),t.prototype.getClassName=function(){return Fe.className},t.className="LeCunNormal",t}(Fe);r.we.registerClass(Ue);var Ve=function(e){function t(t){var n=e.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==t.gain?n.DEFAULT_GAIN:t.gain,n.seed=t.seed,null!=n.seed)throw new h("Random seed is not implemented for Orthogonal Initializer yet.");return n}return a(t,e),t.prototype.apply=function(e,t){var n=this;return Object(r.pf)((function(){if(2!==e.length)throw new h("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var t=ye(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),i=r.Qc.gramSchmidt(t);return e[0]>e[1]&&(i=i.transpose()),Object(r.ud)(n.gain,i)}))},t.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},t.className="Orthogonal",t}(je);r.we.registerClass(Ve);var He={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function qe(e,t){return void 0===t&&(t={}),S(e,r.we.SerializationMap.getMap().classNameMap,t,"initializer")}function Ge(e){return E(e)}function $e(e){if("string"==typeof e){var t=e in He?He[e]:e;if("GlorotNormal"===t)return new ze;if("GlorotUniform"===t)return new Pe;if("HeNormal"===t)return new Le;if("HeUniform"===t)return new Be;if("LeCunNormal"===t)return new We;if("LeCunUniform"===t)return new Ue;var n={};return n.className=t,n.config={},qe(n)}return e instanceof je?e:qe(e)}var Ke=Object.freeze({zeros:function(){return new Ae},ones:function(){return new Te},constant:function(e){return new Ne(e)},randomUniform:function(e){return new Re(e)},randomNormal:function(e){return new De(e)},truncatedNormal:function(e){return new Ie(e)},identity:function(e){return new Me(e)},varianceScaling:function(e){return new Fe(e)},glorotUniform:function(e){return new Pe(e)},glorotNormal:function(e){return new ze(e)},heNormal:function(e){return new Le(e)},heUniform:function(e){return new Be(e)},leCunNormal:function(e){return new We(e)},leCunUniform:function(e){return new Ue(e)},orthogonal:function(e){return new Ve(e)}}),Xe=0;function Ye(){return Xe++}var Je={};function Ze(e){return void 0===e&&(e=""),e in Je||(Je[e]=0),Je[e]+=1,e+Je[e].toString()}function Qe(e){return Array.isArray(e)&&Array.isArray(e[0])}function et(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function tt(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new p("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function nt(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new p("Expected exactly 1 Shape; got "+e.length)}return e}function rt(e){for(var t=0,n=0,r=e;n<r.length;n++){var i=r[n];0===i.shape.length?t+=1:t+=i.shape.reduce((function(e,t){return e*t}))}return t}var it=function(){function e(e,t,n,i,a){void 0===t&&(t="float32"),void 0===n&&(n="Variable"),void 0===i&&(i=!0),void 0===a&&(a=null),this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=Ye(),n=null==n?"Variable":n,this.originalName=ee(n),this.name=te(this.originalName),this.trainable_=i,this.constraint=a,this.val=Object(r.Df)(e,this.trainable_,this.name,this.dtype)}return e.prototype.read=function(){return this.assertNotDisposed(),this.val},e.prototype.write=function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},e.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},e.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(e.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e},enumerable:!0,configurable:!0}),e}();function at(e){return e.map((function(e){return e.read()}))}function ot(e){e.forEach((function(e){e[0].write(e[1])}))}var ut=function(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}},st=function(e,t,n,r,i,a,o){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=Ye(),null!=a&&(this.originalName=ee(a),this.name=te(this.originalName)),this.rank=t.length},ct=0,lt=function(){function e(e,t){this.callArgs=t,this.id=ct++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(var n=0,r=e.inboundLayers;n<r.length;n++){var i=r[n];null!=i&&i.outboundNodes.push(this)}e.outboundLayer.inboundNodes.push(this)}return e.prototype.getConfig=function(){for(var e=[],t=0,n=this.inboundLayers;t<n.length;t++){var r=n[t];null!=r?e.push(r.name):e.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},e}(),ft=0,dt=function(e){function t(t){var n=e.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=ft++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=t.name;if(!r){var i=n.getClassName();r=w(i)+"_"+Ze(i)}if(n.name=r,n.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){var a=void 0;if(null!=t.batchInputShape)a=t.batchInputShape;else if(null!=t.inputShape){var o=null;null!=t.batchSize&&(o=t.batchSize),a=[o].concat(t.inputShape)}n.batchInputShape=a;var u=t.dtype;null==u&&(u=t.inputDType),null==u&&(u="float32"),n.dtype=u}return null!=t.weights?n.initialWeights=t.weights:n.initialWeights=null,n._refCount=null,n.fastWeightInitDuringBuild=!1,n}return a(t,e),t.nodeKey=function(e,t){return e.name+"_ib-"+t.toString()},t.prototype.getNodeAtIndex=function(e,t){if(0===this.inboundNodes.length)throw new d("The layer has never been called and thus has no defined "+t+".");if(this.inboundNodes.length<=e)throw new p("Asked to get "+t+" at node "+e+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[e]},t.prototype.getInputAt=function(e){return b(this.getNodeAtIndex(e,"input").inputTensors)},t.prototype.getOutputAt=function(e){return b(this.getNodeAtIndex(e,"output").outputTensors)},Object.defineProperty(t.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new f("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new f("Layer "+this.name+" is not connected, no input to return.");return b(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new f("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new f("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return b(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),t.prototype.calculateLosses=function(){return this.losses.map((function(e){return e()}))},Object.defineProperty(t.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"built",{get:function(){return this._built},set:function(e){this._built=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},t.prototype.assertInputCompatibility=function(e){if(e=x(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=x(this.inputSpec);if(e.length!==t.length)throw new p("Layer "+this.name+" expects "+t.length+" inputs, but it received "+e.length+" input tensors. Input received: "+e);for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(null!=i){var a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new p("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+i.ndim+", found ndim="+a);if(null!=i.maxNDim&&a>i.maxNDim)throw new p("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+i.maxNDim+", found ndim="+a);if(null!=i.minNDim&&a<i.minNDim)throw new p("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+i.minNDim+", found ndim="+a+".");if(null!=i.dtype&&r.dtype!==i.dtype)throw new p("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+i.dtype+", found dtype="+r.dtype+".");if(i.axes){var o=r.shape;for(var u in i.axes){var s=Number(u),c=i.axes[u],l=s>=0?o[s]:o[o.length+s];if(null!=c&&-1===[c,null].indexOf(l))throw new p("Input "+n+" is incompatible with layer "+this.name+": expected axis "+s+" of input shape to have value "+c+" but got shape "+o+".")}}if(null!=i.shape)for(var f=0;f<i.shape.length;++f){var d=i.shape[f],h=r.shape[f];if(null!=d&&null!=h&&d!==h)throw new p("Input "+n+" is incompatible with layer "+this.name+": expected shape="+i.shape+", found shape="+r.shape+".")}}}}},t.prototype.call=function(e,t){return e},t.prototype.invokeCallHook=function(e,t){null!=this._callHook&&this._callHook(e,t)},t.prototype.setCallHook=function(e){this._callHook=e},t.prototype.clearCallHook=function(){this._callHook=null},t.prototype.apply=function(e,t){var n=this;t=t||{},this.assertNotDisposed();for(var r=x(e),i=!0,a=0,o=r;a<o.length;a++)if(!(o[a]instanceof st)){i=!1;break}for(var u=!0,s=0,c=r;s<c.length;s++)if(c[s]instanceof st){u=!1;break}if(i===u)throw new p("Arguments to apply() must be all SymbolicTensors or all Tensors");return Q(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);for(var i=[],a=0,o=x(e);a<o.length;a++){var s=o[a];i.push(s.shape)}n.build(b(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){for(var c=[],l=0,f=x(v=n.call(e,t));l<f.length;l++){var d=f[l];-1!==r.indexOf(d)&&(d=d.clone()),c.push(d)}if(v=b(c),null!=n.activityRegularizer)throw new h("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}var p=function(e){for(var t=[],n=0,r=e=x(e);n<r.length;n++){var i=r[n];t.push(i.shape)}return b(t)}(e),m=n.computeOutputShape(p),v=void 0,g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?p[0]:p),v=null!=m&&m.length>0&&Array.isArray(m[0])?m.map((function(r,i){return new st(g,r,n,x(e),t,n.name,i)})):new st(g,m,n,x(e),t,n.name),n.addInboundNode(e,v,null,null,p,m,t),n._refCount++,null!=n.activityRegularizer)throw new h("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return v}))},t.prototype.warnOnIncompatibleInputShape=function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(e)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor ("+JSON.stringify(e)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(t.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new f("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e=[],t=0,n=this.inboundNodes;t<n.length;t++){var r=n[t],i=JSON.stringify(r.outputShapes);-1===e.indexOf(i)&&e.push(i)}if(1===e.length){var a=this.inboundNodes[0].outputShapes;return Array.isArray(a)&&Array.isArray(a[0])&&1===a.length?a[0]:a}throw new f("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),t.prototype.countParams=function(){if(!this.built)throw new d("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return rt(this.weights)},t.prototype.build=function(e){this.built=!0},t.prototype.getWeights=function(e){return void 0===e&&(e=!1),at(e?this.trainableWeights:this.weights)},t.prototype.setWeights=function(e){var t=this;Object(r.pf)((function(){var n=t.weights;if(n.length!==e.length)throw new p('You called setWeights(weights) on layer "'+t.name+'" with a weight list of length '+e.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+e+"...");if(0!==n.length){for(var i=[],a=at(n),o=0;o<a.length;++o){var u=a[o],s=n[o],c=e[o];if(!r.Af.arraysEqual(u.shape,c.shape))throw new p("Layer weight shape "+u.shape+" not compatible with provided weight shape "+c.shape);i.push([s,c])}ot(i)}}))},t.prototype.addWeight=function(e,t,n,r,i,a,o){if(-1!==this._addedWeightNames.indexOf(e))throw new p("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=$e("zeros"));var u=r.apply(t,n),s=new it(u,n,e,a,o);return u.dispose(),null!=i&&this.addLoss((function(){return i.apply(s.read())})),null==a&&(a=!0),a?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s},t.prototype.setFastWeightInitDuringBuild=function(e){this.fastWeightInitDuringBuild=e},t.prototype.addLoss=function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=x(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,e))},t.prototype.computeOutputShape=function(e){return e},t.prototype.computeMask=function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer "+n.name+" does not support masking, but was passed an inputMask.")}))}return null}return t},t.prototype.addInboundNode=function(e,t,n,r,i,a,o){void 0===o&&(o=null);var u=x(e);t=x(t),n=x(n),r=x(r),i=et(i),a=et(a);for(var s=[],c=[],l=[],f=0,d=u;f<d.length;f++){var p=d[f];s.push(p.sourceLayer),c.push(p.nodeIndex),l.push(p.tensorIndex)}new lt({outboundLayer:this,inboundLayers:s,nodeIndices:c,tensorIndices:l,inputTensors:u,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},o);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h},t.prototype.getConfig=function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e},t.prototype.disposeWeights=function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length},t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},t}(r.we.Serializable);var pt,ht,mt=function(e){function t(t){var n=e.call(this,{dtype:t.dtype,name:null!=t.name?t.name:Ze("input").toString()})||this;if(null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new p("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=t.batchInputShape;if(null==r){if(null==t.inputShape)throw new p("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new p("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=t.dtype||"float32";n.batchInputShape=r,n.dtype=i,n.inputSpec=[{shape:r}];var a=new st(n.dtype,n.batchInputShape,n,[],{},n.name);return a.nodeIndex=0,a.tensorIndex=0,new lt({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return a(t,e),t.prototype.apply=function(e,t){throw new p("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},t.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},t.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},t.className="InputLayer",t}(dt);function vt(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new p("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new mt({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function gt(e){return s(this,void 0,void 0,(function(){var t,n,i,a,o,u,s,l;return c(this,(function(c){switch(c.label){case 0:if(null==e)return[2];for(a in t=[],n=[],i=[],e)"number"!=typeof(o=e[a])&&(u=o,t.push(u.data()),n.push(a),i.push(u));return t.length>0?[4,Promise.all(t)]:[3,2];case 1:for(s=c.sent(),l=0;l<s.length;++l)e[n[l]]=s[l][0];Object(r.Lb)(i),c.label=2;case 2:return[2]}}))}))}function yt(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}r.we.registerClass(mt),(ht=pt||(pt={}))[ht.SILENT=0]="SILENT",ht[ht.VERBOSE=1]="VERBOSE";var bt=function(){function e(){this.validationData=null}return e.prototype.setParams=function(e){this.params=e},e.prototype.onEpochBegin=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.onEpochEnd=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.onBatchBegin=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.onBatchEnd=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.onTrainBegin=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.onTrainEnd=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return[2]}))}))},e.prototype.setModel=function(e){},e}(),xt=function(){function e(e,t){void 0===t&&(t=10),null==e&&(e=[]),this.callbacks=e,this.queueLength=t}return e.prototype.append=function(e){this.callbacks.push(e)},e.prototype.setParams=function(e){for(var t=0,n=this.callbacks;t<n.length;t++)n[t].setParams(e)},e.prototype.setModel=function(e){for(var t=0,n=this.callbacks;t<n.length;t++)n[t].setModel(e)},e.prototype.onEpochBegin=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(e,t)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onEpochEnd=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(e,t)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onBatchBegin=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(e,t)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onBatchEnd=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return c(this,(function(i){switch(i.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(e,t)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.onTrainBegin=function(e){return s(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,r.label=1;case 1:return t<n.length?[4,n[t].onTrainBegin(e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.onTrainEnd=function(e){return s(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,r.label=1;case 1:return t<n.length?[4,n[t].onTrainEnd(e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e}(),wt=function(e){function t(){return e.call(this)||this}return a(t,e),t.prototype.onEpochBegin=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return this.seen=0,this.totals={},[2]}))}))},t.prototype.onBatchEnd=function(e,t){return s(this,void 0,void 0,(function(){var e,n,i,a,o=this;return c(this,(function(u){for(a in null==t&&(t={}),e=null==t.size?0:t.size,this.seen+=e,n=function(n){var a=t[n];if("number"==typeof a)i.totals.hasOwnProperty(n)||(i.totals[n]=0),i.totals[n]=i.totals[n]+a*e;else{var u=void 0;n in i.totals?u=i.totals[n]:i.totals[n]=0;var s=Object(r.pf)((function(){return Object(r.J)(o.totals[n],Object(r.ud)(a,e))}));i.totals[n]=s,null!=u&&u.dispose()}},i=this,t)n(a);return[2]}))}))},t.prototype.onEpochEnd=function(e,t){return s(this,void 0,void 0,(function(){var e,n,i,a,o,u=this;return c(this,(function(s){if(null!=t)for(e=function(e){if(null==n.totals[e])return"continue";"number"==typeof n.totals[e]?t[e]=n.totals[e]/n.seen:Object(r.pf)((function(){var n=Object(r.ud)(Object(r.Nb)(1,u.seen),u.totals[e]);t[e]=n,u.totals[e].dispose(),Object(r.Kc)(t[e])}))},n=this,i=0,a=this.params.metrics;i<a.length;i++)o=a[i],e(o);return[2]}))}))},t}(bt),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onTrainBegin=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return this.epoch=[],this.history={},[2]}))}))},t.prototype.onEpochEnd=function(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(r){for(n in null==t&&(t={}),this.epoch.push(e),t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n]);return[2]}))}))},t.prototype.syncData=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,a,o,u,s;return c(this,(function(c){switch(c.label){case 0:for(r in e=[],t=[],n=[],this.history)for(i=this.history[r],a=0;a<i.length;++a)"number"!=typeof i[a]&&(o=i[a],e.push(o.data()),t.push(r),n.push(a));return[4,Promise.all(e)];case 1:for(u=c.sent(),s=0;s<u.length;++s)this.history[t[s]][n[s]].dispose(),this.history[t[s]][n[s]]=u[s][0];return[2]}}))}))},t}(bt),kt=function(e){function t(t,n){var i=e.call(this)||this;if(i.currentEpoch=0,i.yieldEvery=n||"auto","auto"===i.yieldEvery&&(i.yieldEvery=125),"never"===i.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return r.Af.isNumber(i.yieldEvery)&&(i.maybeWait=function(e,t){var n,i=r.Af.now();return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var u=r.Af.now();return u-i<t?n:(i=u,n=e.apply(void 0,a))}}(i.maybeWait.bind(i),i.yieldEvery)),i.trainBegin=t.onTrainBegin,i.trainEnd=t.onTrainEnd,i.epochBegin=t.onEpochBegin,i.epochEnd=t.onEpochEnd,i.batchBegin=t.onBatchBegin,i.batchEnd=t.onBatchEnd,i.yield=t.onYield,i}return a(t,e),t.prototype.maybeWait=function(e,t,n){return s(this,void 0,void 0,(function(){var i;return c(this,(function(a){switch(a.label){case 0:return i=[],null==this.yield?[3,2]:[4,gt(n)];case 1:a.sent(),i.push(this.yield(e,t,n)),a.label=2;case 2:return i.push(Object(r.zd)()),[4,Promise.all(i)];case 3:return a.sent(),[2]}}))}))},t.prototype.onEpochBegin=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return this.currentEpoch=e,null==this.epochBegin?[3,3]:[4,gt(t)];case 1:return n.sent(),[4,this.epochBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onEpochEnd=function(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return n=[],null==this.epochEnd?[3,2]:[4,gt(t)];case 1:i.sent(),n.push(this.epochEnd(e,t)),i.label=2;case 2:return"epoch"===this.yieldEvery&&n.push(Object(r.zd)()),[4,Promise.all(n)];case 3:return i.sent(),[2]}}))}))},t.prototype.onBatchBegin=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,gt(t)];case 1:return n.sent(),[4,this.batchBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onBatchEnd=function(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return n=[],null==this.batchEnd?[3,2]:[4,gt(t)];case 1:i.sent(),n.push(this.batchEnd(e,t)),i.label=2;case 2:return"batch"===this.yieldEvery?n.push(Object(r.zd)()):r.Af.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),[4,Promise.all(n)];case 3:return i.sent(),[2]}}))}))},t.prototype.onTrainBegin=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return null==this.trainBegin?[3,3]:[4,gt(e)];case 1:return t.sent(),[4,this.trainBegin(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.onTrainEnd=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return null==this.trainEnd?[3,3]:[4,gt(e)];case 1:return t.sent(),[4,this.trainEnd(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t}(bt);function Et(e,t){return null==e&&(e={}),e instanceof bt?[e]:Array.isArray(e)&&e[0]instanceof bt?e:x(e).map((function(e){return new kt(e,t)}))}var St=function(){function e(){}return e.registerCallbackConstructor=function(t,n){r.Af.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, but got "+t})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)},e.checkForDuplicate=function(t){for(var n in e.constructors)e.constructors[+n].forEach((function(e){if(e===t)throw new p("Duplicate callback constructor.")}))},e.clear=function(){e.constructors={}},e.createCallbacks=function(t){var n=[];for(var r in e.constructors){var i=+r;t>=i&&n.push.apply(n,e.constructors[i])}return n.map((function(e){return new e}))},e.constructors={},e}();function Ct(e,t,n,r,i,a,o,u,s){var c=new Ot,l=[new wt].concat(St.createCallbacks(t));null!=e&&l.push.apply(l,e),l.push(c);var f=new xt(l);return f.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:t,doValidation:u,metrics:s}),{callbackList:f,history:c}}function _t(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),S(e,r.we.SerializationMap.getMap().classNameMap,t,"layer",n)}function jt(e,t){return Object(r.pf)((function(){"float32"!==e.dtype&&(e=e.asType("float32"));var n=Object(r.cf)(we(e),t,!0),i=Object(r.fc)(n.shape,l()),a=Object(r.Re)(Object(r.jd)(n,i));return Object(r.Nb)(e,a)}))}function At(e,t){return Object(r.pf)((function(){return Object(r.ld)(we(Object(r.af)(t,e)),-1)}))}function Tt(e,t){return Object(r.pf)((function(){return Object(r.ld)(Object(r.G)(Object(r.af)(t,e)),-1)}))}function Nt(e,t){return Object(r.pf)((function(){var n=Object(r.af)(e,t),i=Object(r.pb)(Object(r.G)(e),l(),Number.MAX_VALUE),a=Object(r.G)(Object(r.Nb)(n,i));return Object(r.ud)(100,Object(r.ld)(a,-1))}))}function Rt(e,t,n){return void 0===n&&(n=!1),Object(r.pf)((function(){if(n)t=Object(r.Le)(t);else{var i=Object(r.cf)(t,t.shape.length-1,!0);t=Object(r.Nb)(t,i)}return t=Object(r.pb)(t,l(),1-l()),Object(r.yd)(Object(r.cf)(Object(r.ud)(e.toFloat(),Object(r.Tc)(t)),t.shape.length-1))}))}function Dt(e,t){return Object(r.pf)((function(){var n=Object(r.ic)(function(e){var t=[ae(e.shape)];return e.reshape(t)}(e)).toInt(),i=(t=Object(r.pb)(t,l(),1-l())).shape;return Rt(Object(r.Dd)(n,i[i.length-1]).reshape(i),t,!1)}))}function It(e,t){return Object(r.pf)((function(){var n;return n=Object(r.pb)(t,l(),1-l()),n=Object(r.Tc)(Object(r.Nb)(n,Object(r.af)(1,n))),Object(r.ld)(function(e,t){if(!r.Af.arraysEqual(e.shape,t.shape))throw new p("logits and labels must have the same shape, but got shapes "+JSON.stringify(e.shape)+" and "+JSON.stringify(t.shape));return Object(r.pf)((function(){var n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())}))}(e,n),-1)}))}function Mt(e,t){return Object(r.pf)((function(){var n=jt(e,-1),i=jt(t,-1),a=Object(r.ud)(n,i);return Object(r.yd)(Object(r.cf)(a,-1))}))}var Ft={meanSquaredError:At,meanAbsoluteError:Tt,meanAbsolutePercentageError:Nt,meanSquaredLogarithmicError:function(e,t){return Object(r.pf)((function(){var n=Object(r.pb)(t,l(),Number.MAX_VALUE),i=Object(r.Tc)(Object(r.J)(1,n)),a=Object(r.pb)(e,l(),Number.MAX_VALUE),o=Object(r.Tc)(Object(r.J)(1,a));return Object(r.ld)(we(Object(r.af)(i,o)),-1)}))},squaredHinge:function(e,t){return Object(r.pf)((function(){var n=Object(r.jd)(0,Object(r.af)(1,Object(r.ud)(e,t)));return Object(r.ld)(we(n),-1)}))},hinge:function(e,t){return Object(r.pf)((function(){var n=Object(r.jd)(0,Object(r.af)(1,Object(r.ud)(e,t)));return Object(r.ld)(n,-1)}))},categoricalHinge:function(e,t){return Object(r.pf)((function(){var n=Object(r.cf)(Object(r.ud)(e,t),-1),i=Object(r.fd)(Object(r.ud)(Object(r.af)(1,e),t),-1);return Object(r.jd)(0,Object(r.J)(1,Object(r.af)(i,n)))}))},logcosh:function(e,t){return Object(r.pf)((function(){var n=Math.log(2),i=Object(r.af)(t,e),a=Object(r.af)(Object(r.J)(i,Object(r.Me)(Object(r.ud)(-2,i))),n);return Object(r.ld)(a,-1)}))},categoricalCrossentropy:Rt,sparseCategoricalCrossentropy:Dt,binaryCrossentropy:It,kullbackLeiblerDivergence:function(e,t){return Object(r.pf)((function(){var n=Object(r.pb)(e,l(),1),i=Object(r.pb)(t,l(),1);return Object(r.cf)(Object(r.ud)(e,Object(r.Tc)(Object(r.Nb)(n,i))),-1)}))},poisson:function(e,t){return Object(r.pf)((function(){var n=Object(r.Tc)(Object(r.J)(l(),t));return Object(r.ld)(Object(r.af)(t,Object(r.ud)(e,n)),-1)}))},cosineProximity:Mt};function Pt(e){if("string"==typeof e){if(e in Ft)return Ft[e];var t="Unknown loss "+e;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss "+e+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new p(t)}return e}function zt(e,t){return Object(r.pf)((function(){var n=Object(r.ud)(.5,Object(r.Fd)(t)),i=le(Object(r.vc)(t,n),e.dtype);return Object(r.ld)(Object(r.Xb)(e,i),-1)}))}function Lt(e,t){return Object(r.pf)((function(){return le(Object(r.Xb)(Object(r.O)(e,-1),Object(r.O)(t,-1)),"float32")}))}function Bt(e,t){return Object(r.pf)((function(){return Object(r.Yc)(e.equal(1),t.equal(1)).sum().cast("float32")}))}function Wt(e,t){return Object(r.pf)((function(){var n=Bt(e,t),i=function(e,t){return Object(r.pf)((function(){return Object(r.Yc)(e.equal(0),t.equal(1)).sum().cast("float32")}))}(e,t),a=n.add(i);return Object(r.Hf)(Object(r.vc)(a,0),n.div(a),0).cast("float32")}))}function Ut(e,t){return Object(r.pf)((function(){var n=Bt(e,t),i=function(e,t){return Object(r.pf)((function(){return Object(r.Yc)(e.equal(1),t.equal(0)).sum().cast("float32")}))}(e,t),a=n.add(i);return Object(r.Hf)(Object(r.vc)(a,0),n.div(a),0).cast("float32")}))}function Vt(e,t){return It(e,t)}function Ht(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),Object(r.Xb)(e,t).asType("float32")}var qt=Rt,Gt=Dt,$t={binaryAccuracy:zt,categoricalAccuracy:Lt,precision:Wt,categoricalCrossentropy:qt,sparseCategoricalCrossentropy:Gt,mse:At,MSE:At,mae:Tt,MAE:Tt,mape:Nt,MAPE:Nt,cosine:Mt};function Kt(e){if(g(null!==e,"Unknown LossOrMetricFn "+e),"string"==typeof e)return e;for(var t=void 0,n=0,r=Object.keys(Ft);n<r.length;n++){var i=r[n];if(Ft[i]===e){t=i;break}}if(void 0!==t)return t;for(var a=0,o=Object.keys($t);a<o.length;a++)if(i=o[a],$t[i]===e){t=i;break}return void 0!==t?t:e.name}function Xt(e,t,n){if(void 0===n&&(n=!1),null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if("string"!=typeof i)return!1;if(!e(t[i]))return!1}return!0}if(Array.isArray(t)){for(var a=0,o=t;a<o.length;a++)if(!e(o[a]))return!1;return!0}return!1}var u=typeof t;return"string"===u||"number"===u||"boolean"===u}(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>1048576&&console.warn('User-defined metadata of model "'+t+'" is too large in size (length='+r.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.")}}function Yt(e,t,n,r){void 0===r&&(r=console.log);var i,a=function(e){var t=!0,n=[],r=[];for(var i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(var a=0,o=n;a<o.length;a++){var u=o[a];if(u.length>1||1===u.length&&u[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,u)}if(t)for(var s=0,c=e.layers;s<c.length;s++){for(var l=!1,f=0,d=c[s].inboundNodes;f<d.length;f++){var p=d[f];if(-1!==r.indexOf(p)){if(l){t=!1;break}l=!0}}if(!t)break}return t}(e),o=["Layer (type)","Output shape","Param #"];if(a?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!a)for(var u in o.push("Receives inputs"),i=[],e.nodesByDepth)i.push.apply(i,e.nodesByDepth[u]);r("_".repeat(t)),Jt(o,n,r),r("=".repeat(t));for(var s=e.layers,c=0;c<s.length;++c)a?Zt(s[c],n,r):Qt(s[c],n,i,r),r((c===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var l=function(e){return null!=e.collectedTrainableWeights?rt(e.collectedTrainableWeights):rt(e.trainableWeights)}(e),f=rt(e.nonTrainableWeights);r("Total params: "+(l+f)),r("Trainable params: "+l),r("Non-trainable params: "+f),r("_".repeat(t))}function Jt(e,t,n){void 0===n&&(n=console.log);for(var r="",i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[i]).slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function Zt(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}Jt([e.name+" ("+e.getClassName()+")",r,e.countParams().toString()],t,n)}function Qt(e,t,n,r){var i;try{i=JSON.stringify(e.outputShape)}catch(e){i="multiple"}for(var a=[],o=0,u=e.inboundNodes;o<u.length;o++){var s=u[o];if(!(null!=n&&n.length>0&&-1===n.indexOf(s)))for(var c=0;c<s.inboundLayers.length;++c){var l=s.inboundLayers[c].name,f=s.nodeIndices[c],d=s.tensorIndices[c];a.push(l+"["+f+"]["+d+"]")}}var p=e.name,h=e.getClassName(),m=0===a.length?"":a[0];for(Jt([p+" ("+h+")",i,e.countParams().toString(),m],t,r),c=1;c<a.length;++c)Jt(["","","",a[c]],t,r)}function en(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function tn(e,t){if(null===e)return null;if("string"==typeof e)return O(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,i=0;i<r;++i){var a=e[i];en(t,i,a)?n.push(a):n.push(tn(a,t))}return n}for(var o={},u=0,s=Object.keys(e);u<s.length;u++){var c=s[u],l=e[c];if("name"===c&&"string"==typeof l)o[c]=l;else{var f=O(c);o[f]=tn(l,f)}}return o}var nn="1.7.2";var rn=function(){function e(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;for(var r=0,i=t;r<i.length;r++){var a=i[r];this.add(a.key,a.value)}}}return e.prototype.add=function(e,t,n){if(null!=this.id2Value[e.id])throw new p("Duplicate key: name="+e.name+", id="+e.id);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Object(r.nb)(t,e.dtype)}catch(n){throw new p("The dtype of the feed ("+t.dtype+") can not be cast to the dtype of the key '"+e.name+"' ("+e.dtype+").")}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this},e.prototype.addFeed=function(e){this.add(e.key,e.value)},e.prototype.hasKey=function(e){return null!=this.id2Value[e.id]},e.prototype.names=function(){return Object.keys(this.name2Id)},e.prototype.getValue=function(e){if(e instanceof st){if(null==this.id2Value[e.id])throw new p("Nonexistent key: "+e.name);return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new p("Feed dict has no SymbolicTensor name: "+e);return this.id2Value[t]},e.prototype.getMask=function(e){if(e instanceof st){if(null==this.id2Value[e.id])throw new p("Nonexistent key: "+e.name);return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new p("Feed dict has no SymbolicTensor name: "+e);return this.id2Mask[t]},e.prototype.disposeMasks=function(){null!=this.id2Mask&&Object(r.Lb)(this.id2Mask)},e}(),an={},on={};function un(e,t,n,i){for(var a=null!=n&&n.training,o=Array.isArray(e),u=o?e:[e],s=u.map((function(e){return e.name})),c=[],l=t.names(),f=0,d=s;f<d.length;f++){var p=d[f];-1!==l.indexOf(p)?c.push(t.getValue(p)):c.push(null)}null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);var h,m,v=s.join(",")+"|"+t.names().join(",");if(null==an[v]){var g=function(e,t){r.Af.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],i={};if(1===e.length){var a=cn(e[0],t);n=a.sorted,i=a.recipientMap}else for(var o=new Set,u=0,s=e;u<s.length;u++){for(var c=cn(s[u],t),l=c.sorted,f=c.recipientMap,d=0,p=l;d<p.length;d++){var h=p[d];o.has(h.name)||(n.push(h),o.add(h.name))}var m=function(e){null==i[e]&&(i[e]=new Set),f[e].forEach((function(t){return i[e].add(t)}))};for(var v in f)m(v)}return{sorted:n,recipientCounts:sn(i)}}(u,t);h=g.sorted,m=g.recipientCounts,an[v]=h,on[v]=m}h=an[v],m={},a||Object.assign(m,on[v]);for(var y=new rn(t),b=0;b<h.length;++b){if(null!=i){var w=Object(r.md)().numTensors;w>i.maxNumTensors&&(i.maxNumTensors=w),w<i.minNumTensors&&(i.minNumTensors=w)}var O=h[b],k=O.sourceLayer;if(!(k instanceof mt)){for(var E=[],S=[],C=[],_=!1,j=0,A=O.inputs;j<A.length;j++){var T=A[j],N=y.getValue(T),R=y.getMask(T);E.push(N),S.push(R),null!=R&&(_=!0),a||(m[T.name]--,0!==m[T.name]||t.hasKey(T)||-1!==s.indexOf(T.name)||N.isDisposed||!0===T.sourceLayer.stateful||C.push(N))}_&&((n=n||{}).mask=S[0]);var D=x(k.apply(E,n)),I=null;k.supportsMasking&&(I=k.computeMask(E,S));for(var M=ln(O),F=Array.isArray(M)?M:[M],P=0;P<F.length;++P){y.hasKey(F[P])||y.add(F[P],D[P],Array.isArray(I)?I[0]:I);var z=s.indexOf(F[P].name);-1!==z&&(c[z]=D[P])}a||Object(r.Lb)(C)}}return y.disposeMasks(),o?c:c[0]}function sn(e){var t={};for(var n in e)t[n]=e[n].size;return t}function cn(e,t){for(var n=new Set,r=[],i={},a=0,o=t.names();a<o.length;a++){var u=o[a];n.add(u)}var s=[],c=[];for(s.push(e);s.length>0;){var l=s[s.length-1];if(n.has(l.name))s.pop();else{var f=c[c.length-1]===s.length-1;if(0===l.inputs.length||f)s.pop(),r.push(l),n.add(l.name),f&&c.pop();else{c.push(s.length-1);for(var d=0,p=l.inputs;d<p.length;d++){var h=p[d];null==i[h.name]&&(i[h.name]=new Set),i[h.name].add(l.name),n.has(h.name)||s.push(h)}}}}return{sorted:r,recipientMap:i}}function ln(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r)for(var i=0,a=e.sourceLayer.inboundNodes[r].outputTensors;i<a.length;i++)if(a[i].id===e.id){n=r;break}t=e.sourceLayer.getOutputAt(n)}return t}var fn=function(e){function t(n){var r=e.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var i=r.getClassName().toLowerCase();r.name=Ze(i)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(n.inputs)?r.inputs=n.inputs.slice():r.inputs=[n.inputs],Array.isArray(n.outputs)?r.outputs=n.outputs.slice():r.outputs=[n.outputs],_(r.inputs).length!==r.inputs.length)throw new p("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map((function(e){return e.name})));_(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map((function(e){return e.name}))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];for(var a=0,o=r.outputs;a<o.length;a++){var u=(N=o[a]).sourceLayer,s=N.nodeIndex,c=N.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(s),r.outputLayersTensorIndices.push(c)}for(var l=0,f=r.inputs;l<f.length;l++)u=(N=f[l]).sourceLayer,s=N.nodeIndex,c=N.tensorIndex,g(0===s,"input layer has >1 nodes"),g(0===c,"input layer has >1 tensors"),r.inputLayers.push(u),r.inputLayersNodeIndices.push(s),r.inputLayersTensorIndices.push(c);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var h=0;h<r.inputLayers.length;h++){if(!((u=r.inputLayers[h])instanceof mt))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+n.inputs+". Input "+h+" (0-based) originates from layer type "+u.getClassName()+".");r.inputNames.push(u.name),r.feedInputShapes.push(u.batchInputShape),r.feedInputNames.push(u.name)}for(var m=0,v=r.outputLayers;m<v.length;m++)u=v[m],r.outputNames.push(u.name);r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));for(var y={},b={},x={},w={},O={},k=[],E=function e(n,i,a,o,u,s){null!=o&&null!=u&&null!=s||(o=n.sourceLayer,u=n.nodeIndex,s=n.tensorIndex);var c=o.inboundNodes[u];if(-1!==a.indexOf(c))throw new d("The tensor "+n.name+' at layer "'+o.name+'" is part of a cycle.');if(-1===i.indexOf(c)){r.containerNodes.add(t.nodeKey(o,u)),o.id in O||(O[o.id]=Object.keys(O).length),-1===a.indexOf(c)&&a.push(c);for(var l=c.inboundLayers.length,f=0;f<l;f++){e(c.inputTensors[f],i,a,c.inboundLayers[f],c.nodeIndices[f],c.tensorIndices[f])}for(i.push(c);a.indexOf(c)>=0;)a.splice(a.indexOf(c),1);k.push(c)}},S=[],j=[],A=0,T=r.outputs;A<T.length;A++){var N=T[A];E(N,S,j)}for(var R=0,D=k.slice().reverse();R<D.length;R++){b[(te=D[R]).id]=te,te.id in y||(y[te.id]=0);var I=y[te.id],M=null==x[te.outboundLayer.id]?0:x[te.outboundLayer.id];for(I=Math.max(I,M),x[te.outboundLayer.id]=I,w[te.outboundLayer.id]=te.outboundLayer,y[te.id]=I,h=0;h<te.inboundLayers.length;h++){var F=te.inboundLayers[h],P=(s=te.nodeIndices[h],F.inboundNodes[s]),z=null==y[P.id]?0:y[P.id];y[P.id]=Math.max(I+1,z),b[P.id]=P}}var L={};for(var B in y)(I=y[B])in L||(L[I]=[]),L[I].push(b[B]);var W={};for(var U in x)(I=x[U])in W||(W[I]=[]),W[I].push(w[U]);var V=Object.keys(W).map((function(e){return parseInt(e,10)})).sort(C);r.layers=[];for(var H=0,q=V;H<q.length;H++){var G=W[I=q[H]];G.sort((function(e,t){var n=O[e.id],r=O[t.id];return n<r?-1:n>r?1:0}));for(var $=0,K=G;$<K.length;$++)(u=K[$])instanceof t&&r.internalContainerRefs.push(u),r.layers.push(u)}r.layersByDepth=W,V=Object.keys(L).map((function(e){return parseInt(e,10)})).sort(C);for(var X=r.inputs.slice(),Y=[],J=0,Z=V;J<Z.length;J++)for(var Q=0,ee=L[I=Z[J]];Q<ee.length;Q++){var te;if(null!=(u=(te=ee[Q]).outboundLayer)){for(var ne=0,re=te.inputTensors;ne<re.length;ne++)if(N=re[ne],-1===X.indexOf(N))throw new d("Graph disconnected: cannot obtain value for tensor "+N+' at layer "'+u.name+'". The following previous layers were accessed without issue: '+Y);for(var ie=0,ae=te.outputTensors;ie<ae.length;ie++)N=ae[ie],X.push(N);Y.push(u.name)}}r.nodesByDepth=L;for(var oe=r.layers.map((function(e){return e.name})),ue=function(e){var t=oe.filter((function(t){return t===e})).length;if(1!==t)throw new d('The name "'+e+'" is used '+t+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(oe))},se=0,ce=oe;se<ce.length;se++)ue(ce[se]);return r.outboundNodes=[],r.inboundNodes=[],new lt({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return a(t,e),t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(var t=0,n=this.layers;t<n.length;t++){var r=n[t];e.numDisposedVariables+=r.dispose().numDisposedVariables}for(var i=0,a=this.internalContainerRefs;i<a.length;i++){var o=a[i];e.numDisposedVariables+=o.dispose().numDisposedVariables}}return e.refCountAfterDispose=this._refCount,e},Object.defineProperty(t.prototype,"trainable",{get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new p("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e=e.concat(r.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,o=this.layers;a<o.length;a++)r=o[a],i.push.apply(i,r.trainableWeights);return i.concat(e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.loadWeights=function(e,t){void 0===t&&(t=!0);for(var n={},r=0,i=0,a=this.layers;i<a.length;i++)for(var o=0,u=a[i].weights;o<u.length;o++){var s=u[o];if(null!=n[s.originalName])throw new p("Duplicate weight name: "+s.originalName);n[s.originalName]=s,r++}var c=[];for(var l in e){if(null!=n[l])c.push([n[l],e[l]]);else if(t)throw new p("Provided weight data has no target variable: "+l);delete n[l]}if(t){var f=[];for(var d in n)f.push(d);if(f.length>0)throw new p(f.length+" of "+r+" weights are not set: "+f)}ot(c)},t.prototype.updatedConfig=function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers "+nn,t.backend="TensorFlow.js",t},t.prototype.toJSON=function(e,t){void 0===t&&(t=!0);var n=function e(t,n){if(null===t||void 0===t)return null;if("string"==typeof t)return w(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){for(var r=[],i=t.length,a=0;a<i;++a){var o=t[a];en(n,a,o)?r.push(o):r.push(e(o,n))}return r}for(var u={},s=0,c=Object.keys(t);s<c.length;s++){var l=c[s],f=t[l];u[w(l)]="name"!==l&&"className"!==l||"string"!=typeof f?e(f,l):f}return u}(this.updatedConfig());return t?JSON.stringify(n):n},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){e=x(e);for(var r=new rn,i=0;i<n.inputs.length;++i)r.add(n.inputs[i],e[i]);return un(n.outputs,r,t)}))},t.prototype.computeMask=function(e,t){var n=this;return Object(r.pf)((function(){var r;return e=x(e),r=null==t?v(null,e.length):x(t),n.runInternalGraph(e,r)[1]}))},t.prototype.computeOutputShape=function(e){var t=et(e);if(t.length!==this.inputLayers.length)throw new p("Invalid inputShape argument "+e+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<t.length;r++){var i=this.inputLayers[r],a=t[r];n[_=i.name+"_0_0"]=a}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(C);if(o.length>1)for(var u=0,s=o;u<s.length;u++)for(var c=s[u],l=0,f=this.nodesByDepth[c];l<f.length;l++){var d=f[l];if(i=d.outboundLayer,-1===this.inputLayers.map((function(e){return e.id})).indexOf(i.id)){for(var h=[],m=0;m<d.inboundLayers.length;m++){var v=d.inboundLayers[m],y=d.nodeIndices[m],x=d.tensorIndices[m],w=n[_=v.name+"_"+y+"_"+x];h.push(w)}var O=et(i.computeOutputShape(b(h))),k=i.inboundNodes.indexOf(d);for(m=0;m<O.length;m++)n[_=i.name+"_"+k+"_"+m]=O[m]}}var E=[],S=[];for(r=0;r<this.outputLayers.length;r++){i=this.outputLayers[r],k=this.outputLayersNodeIndices[r],x=this.outputLayersTensorIndices[r];var _=i.name+"_"+k+"_"+x;S.push(_)}for(r=0;r<S.length;r++){var j=S[r];g(j in n),E.push(n[j])}return b(E)},t.prototype.runInternalGraph=function(e,t){null==t&&(t=v(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var i=this.inputs[r],a=e[r],o=t[r];n[i.id]=[a,o]}for(var u=0,s=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(C);u<s.length;u++)for(var c=s[u],l=0,f=this.nodesByDepth[c];l<f.length;l++){for(var d=f[l],p=d.outboundLayer,m=d.inputTensors,y=d.outputTensors,b=new Array,w=0,O=m;w<O.length;w++)(i=O[w]).id in n&&b.push(n[i.id]);if(b.length===m.length){var k={},E=void 0,S=void 0,_=void 0,j=void 0;if(null!=d.callArgs&&(k=d.callArgs),1===b.length){var A=b[0],T=A[0],N=A[1];null==k.mask&&(k.mask=N),_=x(p.call(T,k)),j=x(p.computeMask(T,N)),E=[T],S=[N]}else E=b.map((function(e){return e[0]})),S=b.map((function(e){return e[1]})),null==k.mask&&(k.mask=S),_=x(p.call(E,k)),j=x(p.computeMask(E,S));if(p.activityRegularizer)throw new h("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<y.length;++r)i=y[r],a=_[r],o=j[r],n[i.id]=[a,o]}}for(var R=[],D=[],I=[],M=0,F=this.outputs;M<F.length;M++){g((i=F[M]).id in n,"Could not compute output "+i.name+" : "+i.id);var P=n[i.id],z=P[0];o=P[1],I.push(z.shape),R.push(z),D.push(o)}return[R,D,I]},t.prototype.buildNodeConversionMap=function(e){for(var n,r={},i=0,a=this.layers;i<a.length;i++){var o=a[i];n=o instanceof t?1:0;for(var u=0;u<o.inboundNodes.length;u++){var s=t.nodeKey(o,u);this.containerNodes.has(s)&&(r[s]=n,n+=1)}}return r},t.prototype.getLayer=function(e,t){if(null!=t){if(this.layers.length<=t)throw new p("Was asked to retrieve layer at index "+t+", but model only has "+this.layers.length+" layer(s).");return this.layers[t]}if(null==e)throw new p("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var i=r[n];if(i.name===e)return i}throw new p("No such layer: "+e)},t.prototype.calculateLosses=function(){var e=this;return Object(r.pf)((function(){for(var n=[],r=0,i=e.layers;r<i.length;r++)for(var a=i[r],o=0;o<a.inboundNodes.length;++o){var u=t.nodeKey(a,o);e.containerNodes.has(u)&&n.push.apply(n,a.calculateLosses())}return n}))},t.prototype.getConfig=function(){for(var e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],i=0,a=this.layers;i<a.length;i++){for(var o=(x=a[i]).getClassName(),u=x.getConfig(),s=[],c=0;c<x.inboundNodes.length;c++){var l=x.inboundNodes[c],f=t.nodeKey(x,c),d={};if(this.containerNodes.has(f)){if(l.callArgs)try{JSON.stringify(l.callArgs),d=l.callArgs}catch(e){console.warn("Layer "+x.name+" was passed non-serializable keyword arguments: "+l.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),d={}}if(l.inboundLayers.length>0){for(var p=[],h=0;h<l.inboundLayers.length;h++){var m=l.inboundLayers[h],v=l.nodeIndices[h],g=l.tensorIndices[h];null==(O=n[t.nodeKey(m,v)])&&(O=0),p.push([m.name,O,g,d])}s.push(p)}}}var y={};y.name=x.name,y.className=o,y.config=u,y.inboundNodes=s,r.push(y)}e.layers=r;var b=[];for(h=0;h<this.inputLayers.length;h++){var x=this.inputLayers[h];v=this.inputLayersNodeIndices[h],f=t.nodeKey(x,v),this.containerNodes.has(f)&&(null!==(O=n[f])&&void 0!==O||(O=0),g=this.inputLayersTensorIndices[h],b.push([x.name,O,g]))}e.inputLayers=b;var w=[];for(h=0;h<this.outputLayers.length;h++){var O;if(x=this.outputLayers[h],v=this.outputLayersNodeIndices[h],f=t.nodeKey(x,v),this.containerNodes.has(f))null!==(O=n[f])&&void 0!==O||(O=0),g=this.outputLayersTensorIndices[h],w.push([x.name,O,g])}return e.outputLayers=w,e},t.fromConfig=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r=!1);var i={},a={};function o(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function u(e,t){for(var n,r=[],a=0,u=t;a<u.length;a++){var s=u[a],c=s[0],l=s[1],f=s[2];if(n=null==s[3]?{}:s[3],!(c in i))return void o(e,t);var d=i[c];if(d.inboundNodes.length<=l)return void o(e,t);var p=d.inboundNodes[l];r.push(p.outputTensors[f])}r.length>0&&e.apply(b(r),n)}function s(e){var n=e.name,a=_t(e,null!=t.customObjects?t.customObjects:{});a.setFastWeightInitDuringBuild(r),i[n]=a,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new p("Corrupted configuration, expected array for nodeData: "+e);o(a,e)}))}for(var c=t.name,l=t.layers,f=0,d=l;f<d.length;f++)s(v=d[f]);for(;!j(a);)for(var h=0,m=l;h<m.length;h++){var v=m[h];if((D=i[v.name]).name in a){var y=a[D.name];delete a[D.name];for(var x=0,w=y;x<w.length;x++)u(D,w[x])}}for(var O=[],k=[],E=0,S=t.inputLayers;E<S.length;E++){var C=(v=S[E])[0],_=v[1],A=v[2];g(C in i);var T=(D=i[C]).inboundNodes[_].outputTensors;O.push(T[A])}for(var N=0,R=t.outputLayers;N<R.length;N++){var D;C=(v=R[N])[0],_=v[1],A=v[2],g(C in i),T=(D=i[C]).inboundNodes[_].outputTensors,k.push(T[A])}return new e({inputs:O,outputs:k,name:c})},Object.defineProperty(t.prototype,"stateful",{get:function(){if(this._stateful)throw new p("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e=0,t=this.layers;e<t.length;e++)if(t[e].stateful)return!0;return!1},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){var e=this;Object(r.pf)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))},t}(dt);function dn(e,t){return function(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided "+n+" is an array of "+e.length+" element(s), but the model has "+r+" outputs. Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){var i=[];return t.forEach((function(t){t in e?i.push(e[t]):i.push(null)})),i}throw new Error("The model has multiple ("+r+") outputs, so "+n+" must be either an array with "+r+" elements or an object with "+t+" keys. Provided "+n+" not understood: "+JSON.stringify(e))}(e,t,"classWeight")}function pn(e,t,n,i){return s(this,void 0,void 0,(function(){var a,o,u,s,l;return c(this,(function(c){switch(c.label){case 0:if(null!=t||null!=i)throw new Error("Support sampleWeight is not implemented yet");return null==n?[3,2]:(a=Object(r.pf)((function(){if(1===e.shape.length)return e.clone();if(2===e.shape.length){if(e.shape[1]>1)return e.argMax(1);if(1===e.shape[1])return e.reshape([e.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+e.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+e.rank+") during handling of class weights. The rank is expected to be 1 or 2.")})),s=(u=Array).from,[4,a.data()]);case 1:return o=s.apply(u,[c.sent()]),Object(r.Lb)(a),l=[],o.forEach((function(e){if(null==n[e])throw new Error("classWeight must contain all classes in the training data. The class "+e+" exists in the data but not in classWeight");l.push(n[e])})),[2,Object(r.hf)(l,"float32")];case 2:return[2,null]}}))}))}function hn(e,t){return Object(r.ud)(e,t)}function mn(e,t){var n,i,a=t;n=a.xs,i=a.ys,r.Af.assert(null!=n&&null!=i,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+t}));var o=vn("input",e.inputNames,n),u=vn("output",e.outputNames,i),s=o[0].shape[0];r.Af.assert(o.length===e.inputs.length,(function(){return"LayersModel has "+e.inputs.length+" inputs, but the dataset provides "+o.length+" inputs.  (Expected input keys: "+JSON.stringify(e.inputNames)+")"})),r.Af.assert(u.length===e.outputs.length,(function(){return"LayersModel has "+e.outputs.length+" outputs, but the dataset provides "+u.length+" outputs.  (Expected output keys: "+JSON.stringify(e.outputNames)+")"}));for(var c=function(t){r.Af.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: input "+e.inputNames[t]+" has "+o[t].shape[0]+"; expected  "+s+" based on input "+e.inputNames[0]+"."}))},l=0;l<o.length;l++)c(l);for(var f=function(t){r.Af.assert(u[t].shape[0]===s,(function(){return"Batch size mismatch: output "+e.outputNames[t]+" has "+u[t].shape[0]+"; expected  "+s+" based on input "+e.inputNames[0]+"."}))},d=0;d<u.length;d++)f(d);return{xs:o,ys:u}}function vn(e,t,n){if(n instanceof r.B)return[n];if(Array.isArray(n))return r.Af.assert(n.length===t.length,(function(){return"Received an array of "+n.length+" Tensors, but expected "+t.length+" to match the "+e+" keys "+t+"."})),n;for(var i=[],a=0,o=t;a<o.length;a++){var u=o[a];if(null==n[u])throw new p("The feature data generated by the dataset lacks the required "+e+" key '"+u+"'.");i.push(n[u])}return i}function gn(e,t,n){return s(this,void 0,void 0,(function(){var i,a,o,u,s,l,f,d,p,m,v,g,y,b,w,O,k,E,S,C,_,j,A,T,N,R,D,I,M,F,P,z,L,B;return c(this,(function(c){switch(c.label){case 0:if(i=null!=n.batchesPerEpoch,r.Af.assert(null!=e.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),r.Af.assert(null!=n,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),r.Af.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs})),r.Af.assert(!i||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch})),r.Af.assert(null==n.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0,c.label=1;case 1:return c.trys.push([1,,26,27]),a=null!=n.validationData,o=void 0,u=void 0,a&&(yn(n.validationData)?r.Af.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches})):(s=function(e){if(3===e.length)throw new h("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData),o=s.xs,u=s.ys)),l=e.makeTrainFunction(),f=e.getDedupedMetricsNames(),void 0,d=a?f.slice().concat(f.map((function(e){return"val_"+e}))):f.slice(),p=Et(n.callbacks,n.yieldEvery),m=null==n.verbose?1:n.verbose,v=Ct(p,m,n.epochs,null,null,function(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(t,n),null,a,d),g=v.callbackList,y=v.history,g.setModel(e),e.history=y,[4,g.onTrainBegin()];case 2:return c.sent(),e.stopTraining_=!1,b=null==n.initialEpoch?0:n.initialEpoch,[4,t.iterator()];case 3:w=c.sent(),c.label=4;case 4:return b<n.epochs?(O={},[4,g.onEpochBegin(b)]):[3,23];case 5:return c.sent(),k=0,E=0,i?[3,7]:[4,t.iterator()];case 6:w=c.sent(),c.label=7;case 7:return!i||k<n.batchesPerEpoch?[4,w.next()]:[3,21];case 8:return S=c.sent(),i&&S.done?(console.warn("You provided `batchesPerEpoch` as "+n.batchesPerEpoch+", but your dataset iterator ran out of data after "+k+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):null==S.value?[3,15]:(C=mn(e,S.value),_=C.xs,j=C.ys,(A={}).batch=E,A.size=_[0].shape[0],[4,g.onBatchBegin(E,A)]);case 9:if(c.sent(),T=[],null==n.classWeight)return[3,13];N=dn(n.classWeight,e.outputNames),B=0,c.label=10;case 10:return B<N.length?(D=(R=T).push,[4,pn(j[B],null,N[B])]):[3,13];case 11:D.apply(R,[c.sent()]),c.label=12;case 12:return++B,[3,10];case 13:for(I=_.concat(j).concat(T),M=l(I),Object(r.Lb)(I),B=0;B<f.length;++B)F=f[B],P=M[B],A[F]=P,Object(r.Kc)(P);return[4,g.onBatchEnd(E,A)];case 14:c.sent(),yt(A),E++,k++,c.label=15;case 15:return(i?k>=n.batchesPerEpoch:S.done)?a?(z=void 0,yn(n.validationData)?(L=x,[4,e.evaluateDataset(n.validationData,{batches:n.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return z=L.apply(void 0,[c.sent()]),[3,18];case 17:z=x(e.evaluate(o,u,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0})),c.label=18;case 18:for(B=0;B<e.metricsNames.length;++B)O["val_"+e.metricsNames[B]]=z[B];c.label=19;case 19:return[3,21];case 20:return e.stopTraining_?[3,21]:[3,7];case 21:return[4,g.onEpochEnd(b,O)];case 22:return c.sent(),b++,e.stopTraining_?[3,23]:[3,4];case 23:return[4,g.onTrainEnd()];case 24:return c.sent(),[4,e.history.syncData()];case 25:return c.sent(),[2,e.history];case 26:return e.isTraining=!1,[7];case 27:return[2]}}))}))}function yn(e){return"function"==typeof e.iterator}function bn(e,t,n){return s(this,void 0,void 0,(function(){var i,a,o,u,s,l,f,d,p,m;return c(this,(function(v){switch(v.label){case 0:if(i=null!=(n=n||{}).batches,a=e.testFunction,o=[],n.verbose>0)throw new h("Verbose mode is not implemented yet.");return r.Af.assert(!i||n.batches>0&&Number.isInteger(n.batches),(function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches)})),function(e){return"function"==typeof e.next}(t)?(s=t,[3,3]):[3,1];case 1:return[4,t.iterator()];case 2:s=v.sent(),v.label=3;case 3:u=s,l=0,f=0,d=function(){var t;return c(this,(function(s){switch(s.label){case 0:return[4,u.next()];case 1:return t=s.sent(),o=Object(r.pf)((function(){if(t.value){var n=mn(e,t.value),i=n.xs,u=n.ys,s=i.concat(u),c=Object(r.pf)((function(){return a(s)}));if(Object(r.Lb)(s),0===f)for(var d=0;d<c.length;++d)o.push(Object(r.re)(0));var p=s[0].shape[0],h=function(e){var t=c[e],n=o[e];o[e]=Object(r.pf)((function(){return Object(r.J)(o[e],Object(r.ud)(p,t))})),f>0&&Object(r.Lb)(n)};for(d=0;d<c.length;++d)h(d);Object(r.Lb)(c),l+=p,++f}return o})),t.done?(i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+n.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}}))},v.label=4;case 4:return!i||f<n.batches?[5,d()]:[3,6];case 5:return"break"===v.sent()?[3,6]:[3,4];case 6:for(p=0;p<o.length;++p)m=o[p],o[p]=Object(r.Nb)(o[p],l),Object(r.Lb)(m);return[2,b(o)]}}))}))}function xn(e){r.Af.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got "+e}))}function wn(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return de(e,t,n-t)})):de(e,t,n-t)}function On(e,t){return Object(r.pf)((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return On(e,t)})):xe(e,"int32"===t.dtype?t:t.toInt())}))}function kn(e,t){for(var n=[],r=0,i=null;r<e;)(i=r+t)>=e&&(i=e),n.push([r,i]),r=i;return n}function En(e,t,n,i,a,o,u,l,f,d,m,v,g,y,b){return s(this,void 0,void 0,(function(){var s,x,w,O,k,E,S,C;return c(this,(function(_){switch(_.label){case 0:if(null==a&&(a=32),null==o&&(o=1),null==m&&(m=!0),null==g&&(g=0),s=!1,null!=f&&null!=d&&(s=!0),null!=b&&(s=!0,null==y))throw new p("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return null!=(x=e.checkNumSamples(n,a,y,"steps_per_epoch"))&&(w=ce(0,x)),null==u&&(u=1),O=Ct(l,u,o,g,x,y,a,s,v),k=O.callbackList,E=O.history,k.setModel(e),e.history=E,[4,k.onTrainBegin()];case 1:_.sent(),e.stopTraining_=!1,S=function(o){var u,l,p,v,g;return c(this,(function(b){switch(b.label){case 0:return[4,k.onEpochBegin(o)];case 1:if(b.sent(),u={},null==y)return[3,2];throw new h("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===m)throw new h("batch shuffling is not implemneted yet");m&&r.Af.shuffle(w),l=Object(r.hf)(w),p=kn(x,a),v=function(o){var h;return c(this,(function(c){switch(c.label){case 0:return h={},[4,k.onBatchBegin(o,h)];case 1:return c.sent(),Object(r.pf)((function(){var c=p[o][0],m=p[o][1],v=de(l,c,m-c);h.batch=o,h.size=m-c;for(var g=On(n,v),y=t(g),b=0;b<i.length;++b){var x=i[b],w=y[b];h[x]=w,Object(r.Kc)(w)}if(o===p.length-1&&s){var O=e.testLoop(f,d,a);for(b=0;b<i.length;++b)x=i[b],w=O[b],Object(r.Kc)(w),u["val_"+x]=w}})),[4,k.onBatchEnd(o,h)];case 2:return c.sent(),yt(h),e.stopTraining_?[2,"break"]:[2]}}))},g=0,b.label=3;case 3:return g<p.length?[5,v(g)]:[3,6];case 4:if("break"===b.sent())return[3,6];b.label=5;case 5:return++g,[3,3];case 6:l.dispose(),b.label=7;case 7:return[4,k.onEpochEnd(o,u)];case 8:return b.sent(),e.stopTraining_?[2,"break"]:[2]}}))},C=g,_.label=2;case 2:return C<o?[5,S(C)]:[3,5];case 3:if("break"===_.sent())return[3,5];_.label=4;case 4:return++C,[3,2];case 5:return[4,k.onTrainEnd()];case 6:return _.sent(),[4,e.history.syncData()];case 7:return _.sent(),[2,e.history]}}))}))}function Sn(e,t,n,i){return void 0===i&&(i={}),s(this,void 0,void 0,(function(){var a,o,u,s,l,f,d,m,v,g,y,b,x,w,O,k,E,S,C,_;return c(this,(function(c){switch(c.label){case 0:if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0,c.label=1;case 1:return c.trys.push([1,,7,8]),xn(m=null==i.batchSize?32:i.batchSize),!1,[4,e.standardizeUserData(t,n,i.sampleWeight,i.classWeight,!1,m)];case 2:if(v=c.sent(),a=v[0],o=v[1],d=v[2],g=!1,y=void 0,!(null!=i.validationData&&i.validationData.length>0))return[3,4];if(g=!0,2!==i.validationData.length)throw 3===i.validationData.length?new h("validationData including sample weights is not supported yet."):new p("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+i.validationData+" is invalid.");return u=i.validationData[0],s=i.validationData[1],!0,[4,e.standardizeUserData(u,s,null,null,!0,m)];case 3:return b=c.sent(),l=b[0],f=b[1],y=l.concat(f),[3,5];case 4:null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1?(g=!0,x=Math.floor(a[0].shape[0]*(1-i.validationSplit)),w=a[0].shape[0],l=wn(a,x,w),a=wn(a,0,x),f=wn(o,x,w),o=wn(o,0,x),y=l.concat(f)):null!=i.validationSteps&&(g=!0),c.label=5;case 5:return O=a.concat(o).concat(d),e.checkTrainableWeightsConsistency(),k=e.makeTrainFunction(),E=e.getDedupedMetricsNames(),S=void 0,C=void 0,g?(e.makeTestFunction(),S=e.testFunction,C=E.slice().concat(E.map((function(e){return"val_"+e})))):(S=null,y=[],C=E.slice()),_=Et(i.callbacks,i.yieldEvery),[4,En(e,k,O,E,m,i.epochs,i.verbose,_,S,y,i.shuffle,C,i.initialEpoch,null,null)];case 6:return[2,c.sent()];case 7:return e.isTraining=!1,_n(a,t),_n(o,n),_n(l,u),_n(f,s),null!=d&&Object(r.Lb)(d),[7];case 8:return[2]}}))}))}function Cn(e){var t=[];e instanceof r.B&&(e=[e]);for(var n=0;n<e.length;++n){var i=e[n];if(1===i.rank)t.push(fe(i,1));else{if(0===i.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(i)}}return t}function _n(e,t){if(null!=e){var n=[];if(t instanceof r.B)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var i in t){var a=t[i];n.push(a.id)}var o=[];if(e instanceof r.B)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var u in e){var s=e[u];-1===n.indexOf(s.id)&&o.push(s)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function jn(e){return Array.isArray(e)}function An(e){return!function(e){return e instanceof r.B}(e)&&!jn(e)}function Tn(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=""),null==t||0===t.length){if(null!=e){var a=!1;if(jn(e)&&e.length>0)a=!0;else if(An(e)){for(var o in e)if(e.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new p("Error when checking model "+i+" expected no data, but got "+e)}return[]}if(null==e)return t.map((function(e){return null}));var u;if(An(e)){e=e,u=[];for(var s=0,c=t;s<c.length;s++){var l=c[s];if(null==e[l])throw new p('No data provided for "'+l+'". Need data for each key in: '+t);u.push(e[l])}}else if(jn(e)){if((e=e).length!==t.length)throw new p("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+t.length+" Tensor(s), but instead got the following list of Tensor(s): "+e);u=e}else{if(e=e,t.length>1)throw new p("The model "+i+" expects "+t.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+e.shape);u=[e]}if(u=Cn(u),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var d=u[f];if(d.shape.length!==n[f].length)throw new p("Error when checking "+i+": expected "+t[f]+" to have "+n[f].length+" dimension(s). but got array with shape "+d.shape);for(var h=0;h<n[f].length;++h)if(0!==h||r){var m=d.shape[h],v=n[f][h];if(null!=v&&v>=0&&m!==v)throw new p("Error when checking "+i+": expected "+t[f]+" to have shape ["+n[f]+"], but got array with shape ["+d.shape+"].")}}return u}function Nn(e,t,n,r,i){var a;if(void 0===r&&(r=!0),void 0===i&&(i=""),Array.isArray(e)){if(e.length!==t.length)throw new p("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+t.length+" Tensor(s), but instead got "+e.length+" Tensors(s).");a=e}else{if(t.length>1)throw new p("The model expects "+t.length+" "+i+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(e.shape)+".");a=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var u=a[o];if(u.shape.length!==n[o].length)throw new p("Error when checking "+i+": expected "+t[o]+" to have "+n[o].length+" dimension(s), but got array with shape "+JSON.stringify(u.shape));for(var s=0;s<n[o].length;++s)if(0!==s||r){var c=u.shape[s],l=n[o][s];if(null!=l&&l!==c)throw new p("Error when checking "+i+": expected "+t[o]+" to have shape "+JSON.stringify(n[o])+" but got array with shape "+JSON.stringify(u.shape)+".")}}}var Rn=function(e){function t(t){var n=e.call(this,t)||this;return n.isTraining=!1,n}return a(t,e),t.prototype.summary=function(e,t,n){if(void 0===n&&(n=console.log),!this.built)throw new p("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Yt(this,e,t,n)},t.prototype.compile=function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return r.tf.adagrad(.01)},Adadelta:function(){return r.tf.adadelta(1,.95,l())},Adam:function(){return r.tf.adam(.001,.9,.999,l())},Adamax:function(){return r.tf.adamax(.002,.9,.999,l(),0)},RMSProp:function(){return r.tf.rmsprop(.001,.9,0,l())},SGD:function(){return r.tf.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new p("Unknown Optimizer "+e)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof r.t))throw new p("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new p("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");var i=e.loss;n=i.map((function(e){return Pt(e)}))}else{var a=Pt(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new p('Unknown entry in loss dictionary: "'+o+'". Only expected the following keys: '+this.outputNames);for(var u=0,s=this.outputNames;u<s.length;u++){var c=s[u];null==e.loss[c]&&console.warn('Output "'+c+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+c+" during training"),n.push(Pt(e.loss[c]))}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var f=0;f<this.outputs.length;++f){var d=this.internalOutputShapes[f],h=this.outputNames[f];this.feedOutputNames.push(h),this.feedOutputShapes.push(d),this.feedLossFns.push(this.lossFunctions[f])}var m=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Q("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===m.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var v=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+e);n=e}if(Array.isArray(n))return t.map((function(e){return n}));for(var r=[],i=0,a=t;i<a.length;i++){var o=a[i],u=n.hasOwnProperty(o)?n[o]:[];Array.isArray(u)||(u=[u]),r.push(u)}return r}(e.metrics,this.outputNames);Q("metric",(function(){for(var e=function(e){if(-1!==m.indexOf(e))return"continue";!function(n){for(var r,i,a,o=function(n){if("string"==typeof n&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(n)){var o=t.internalOutputShapes[e];1===o[o.length-1]||t.lossFunctions[e]===It?-1!==["accuracy","acc"].indexOf(n)?i=zt:-1!==["crossentropy","ce"].indexOf(n)&&(i=Vt):t.lossFunctions[e]===Dt?-1!==["accuracy","acc"].indexOf(n)?i=Ht:-1!==["crossentropy","ce"].indexOf(n)&&(i=Gt):-1!==["accuracy","acc"].indexOf(n)?i=Lt:-1!==["crossentropy","ce"].indexOf(n)&&(i=qt);var u=void 0;-1!==["accuracy","acc"].indexOf(n)?u="acc":-1!==["crossentropy","ce"].indexOf(n)&&(u="ce"),a=i,r=""+u}else{var s=function(e){if("string"==typeof e&&e in $t)return $t[e];if("string"!=typeof e&&null!=e)return e;throw new p("Unknown metric "+e)}(n);a=s,r=""+Kt(n)}var c;Q(r,(function(){c=a})),function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])}(e,r,c)},u=0,s=n;u<s.length;u++)o(s[u])}(v[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights},t.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},t.prototype.evaluate=function(e,t,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize;xn(r);var i=this.standardizeUserDataXY(e,t,!0,r);try{var a=i[0].concat(i[1]);this.makeTestFunction();var o=this.testFunction;return b(this.testLoop(o,a,r,n.verbose,n.steps))}finally{_n(i[0],e),_n(i[1],t)}},t.prototype.evaluateDataset=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){return this.makeTestFunction(),[2,bn(this,e,t)]}))}))},t.prototype.checkNumSamples=function(e,t,n,r){var i;if(void 0===r&&(r="steps"),null!=n){if(i=null,null!=t)throw new p("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+t)}else{if(null==e)throw new p("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return i},t.prototype.execute=function(e,t){if(Array.isArray(t)&&0===t.length)throw new p("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),i=n?t:[t],a=this.retrieveSymbolicTensors(i),o=new rn;if(e instanceof r.B&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new p("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var u=0;u<this.inputs.length;++u)o.add(this.inputs[u],e[u])}else for(var s=0,c=this.inputs;s<c.length;s++){var l=c[s],f=e[l.name];if(null==f)throw new p("No value is provided for the model's input "+l.name);o.add(l,f)}var d=un(a,o);return n?d:d[0]},t.prototype.retrieveSymbolicTensors=function(e){for(var t=v(null,e.length),n=e.length,r=0,i=this.layers;r<i.length;r++){for(var a=i[r],o=Array.isArray(a.output)?a.output:[a.output],u=o.map((function(e){return e.name})),s=0;s<e.length;++s){var c=u.indexOf(e[s]);if(-1!==c&&(t[s]=o[c],n--),0===n)break}if(0===n)break}if(n>0){var l=[];throw t.forEach((function(t,n){null==t&&l.push(e[n])})),new p("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(l))}return t},t.prototype.predictLoop=function(e,t,n){var i=this;return void 0===t&&(t=32),void 0===n&&(n=!1),Object(r.pf)((function(){var a=i.checkNumSamples(e);if(n)throw new h("Verbose predictLoop() is not implemented yet.");for(var o=kn(a,t),u=i.outputs.map((function(e){return[]})),s=function(t){Object(r.pf)((function(){var n=o[t][0],r=o[t][1],a=wn(e,n,r),u=[];if(Array.isArray(a))for(var s=0;s<a.length;++s)u.push({key:i.inputs[s],value:a[s]});else u.push({key:i.inputs[0],value:a});var c=new rn(u);return un(i.outputs,c)})).forEach((function(e,t){return u[t].push(e)}))},c=0;c<o.length;++c)s(c);return b(u.map((function(e){return Object(r.sb)(e,0)})))}))},t.prototype.predict=function(e,t){void 0===t&&(t={});var n=Cn(e);Nn(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return xn(r),this.predictLoop(n,r)}finally{_n(n,e)}},t.prototype.predictOnBatch=function(e){Nn(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)},t.prototype.standardizeUserDataXY=function(e,t,n,i){if(void 0===n&&(n=!0),null==this.optimizer_)throw new d("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var a=[],o=0;o<this.feedOutputShapes.length;++o){var u=this.feedOutputShapes[o];this.feedLossFns[o]===Dt?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(function(e,t,n){var i=_(e.map((function(e){return e.shape[0]})));i.sort();var a=_(t.map((function(e){return e.shape[0]})));if(a.sort(),i.length>1)throw new p("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map((function(e){return e.shape}))));if(a.length>1)throw new p("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map((function(e){return e.shape}))));if(i.length>0&&a.length>0&&!r.Af.arraysEqual(i,a))throw new p("Input Tensors should have the same number of samples as target Tensors. Found "+i[0]+" input sample(s) and "+a[0]+" target sample(s).")}(e=Tn(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Tn(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){for(var r=[At,It,Rt],i=0;i<e.length;++i){var a=e[i],o=t[i],u=n[i];if(null!=o){if(o===Rt&&1===a.shape[a.shape.length-1])throw new p("You are passing a target array of shape "+a.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var s=a.shape.slice(1),c=u.slice(1),l=0;l<s.length;++l){var f=s[l],d=c[l];if(null!=d&&f!==d)throw new p("A target Tensor with shape "+a.shape+" was passed for an output of shape "+u+", while using a loss function that expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&e[0].shape[0]%i!=0)throw new p("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+i+". Found: "+e[0].shape[0]+" sample(s).");return[e,t]},t.prototype.standardizeUserData=function(e,t,n,r,i,a){return void 0===i&&(i=!0),s(this,void 0,void 0,(function(){var o,u,s,l,f,d,p,h;return c(this,(function(c){switch(c.label){case 0:if(o=this.standardizeUserDataXY(e,t,i,a),u=o[0],s=o[1],null!=n)throw new Error("sample weight is not supported yet.");if(l=null,null==r)return[3,4];f=dn(r,this.outputNames),l=[],d=0,c.label=1;case 1:return d<f.length?(h=(p=l).push,[4,pn(s[d],null,f[d])]):[3,4];case 2:h.apply(p,[c.sent()]),c.label=3;case 3:return++d,[3,1];case 4:return[2,[u,s,l]]}}))}))},t.prototype.testLoop=function(e,t,n,i,a){var o=this;return void 0===i&&(i=0),Object(r.pf)((function(){var u=o.checkNumSamples(t,n,a,"steps"),s=[];if(i>0)throw new h("Verbose mode is not implemented yet.");if(null!=a)throw new h("steps mode in testLoop() is not implemented yet");for(var c=kn(u,n),l=Object(r.hf)(ce(0,u)),f=0;f<c.length;++f){var d=c[f][0],p=c[f][1],m=de(l,d,p-d),v=On(t,m),g=e(v);if(0===f)for(var y=0;y<g.length;++y)s.push(Object(r.re)(0));for(y=0;y<g.length;++y){var b=g[y];s[y]=Object(r.J)(s[y],Object(r.ud)(p-d,b))}}for(y=0;y<s.length;++y)s[y]=Object(r.Nb)(s[y],u);return s}))},t.prototype.getDedupedMetricsNames=function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],i=r;y(e,r)>1&&(i+="_"+y(e.slice(0,n),r)),t.push(i)}return t},t.prototype.makeTrainFunction=function(){var e=this;return function(t){var n=[],i=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),u=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:i[s]});var c,l=new rn(t),f=un(e.outputs,l,{training:!0});for(s=0;s<e.lossFunctions.length;++s){var d=(0,e.lossFunctions[s])(a[s],f[s]);null!=o[s]&&(d=hn(d,o[s]));var p=Object(r.ld)(d);n.push(p),c=0===s?d:Object(r.J)(c,d)}for(s=0;s<e.metricsTensors.length;++s){var h=void 0;if(e.outputs.length>1&&s<e.outputs.length)h=n[s];else{var m=e.metricsTensors[s][0],v=e.metricsTensors[s][1];h=Object(r.ld)(m(a[v],f[v]))}Object(r.Kc)(h),u.push(h)}return c=Object(r.ld)(c),e.calculateLosses().forEach((function(e){c=Object(r.J)(c,e)})),c}),!0,s)].concat(u)}},t.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(t){return Object(r.pf)((function(){for(var n,i=[],a=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),u=[],s=0;s<e.inputs.length;++s)u.push({key:e.inputs[s],value:a[s]});var c=new rn(u),l=un(e.outputs,c);for(s=0;s<e.lossFunctions.length;++s){var f=e.lossFunctions[s],d=Object(r.ld)(f(o[s],l[s]));n=0===s?d:Object(r.J)(n,d),i.push(n)}for(s=0;s<e.metricsTensors.length;++s){var p=e.metricsTensors[s][0],h=e.metricsTensors[s][1],m=Object(r.ld)(p(o[h],l[h]));i.push(m)}return i}))}},t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),s(this,void 0,void 0,(function(){return c(this,(function(r){return[2,Sn(this,e,t,n)]}))}))},t.prototype.fitDataset=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){return[2,gn(this,e,t)]}))}))},t.prototype.trainOnBatch=function(e,t){return s(this,void 0,void 0,(function(){var n,i,a,o,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:return[4,this.standardizeUserData(e,t)];case 1:n=c.sent(),i=n[0],a=n[1],o=this.makeTrainFunction(),u=o(i.concat(a)),s=[],l=0,f=u,c.label=2;case 2:return l<f.length?[4,f[l].data()]:[3,5];case 3:d=c.sent(),s.push(d[0]),c.label=4;case 4:return l++,[3,2];case 5:return Object(r.Lb)(u),[2,b(s)]}}))}))},t.prototype.getNamedWeights=function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n),a=0;a<r.length;++a)n&&!r[a].trainable||t.push({name:r[a].originalName,tensor:i[a]});return t},Object.defineProperty(t.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=e.prototype.dispose.call(this);if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var n=Object(r.md)().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-Object(r.md)().numTensors}return t},t.prototype.getLossIdentifiers=function(){var e;if("string"==typeof this.loss)e=w(this.loss);else if(Array.isArray(this.loss)){for(var t=0,n=this.loss;t<n.length;t++)if("string"!=typeof n[t])throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((function(e){return w(e)}))}else{var r=Object.keys(this.loss);e={};for(var i=this.loss,a=0,o=r;a<o.length;a++){var u=o[a];if("string"!=typeof i[u])throw new Error("Serialization of non-string loss is not supported.");e[u]=w(i[u])}}return e},t.prototype.getMetricIdentifiers=function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[w(Kt(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return w(Kt(e))}));var e={};for(var t in this.metrics)e[t]=w(Kt(this.metrics[t]));return e},t.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},t.prototype.loadTrainingConfig=function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=_t(tn(e.optimizer_config));if("string"==typeof e.loss)t=O(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return O(e)}));else if(null!=e.loss)for(var i in t={},e.loss)t[i]=O(e.loss[i]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return O(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=O(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})},t.prototype.save=function(e,t){return s(this,void 0,void 0,(function(){var n,i,a,o,u,s,l,f,d,h,m;return c(this,(function(c){switch(c.label){case 0:if("string"==typeof e){if(0===(n=r.Fc.getSaveHandlers(e)).length)throw new p("Cannot find any save handlers for URL '"+e+"'");if(n.length>1)throw new p("Found more than one ("+n.length+") save handlers for URL '"+e+"'");e=n[0]}if(null==e.save)throw new p("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,r.Fc.encodeWeights(this.getNamedWeights(t))];case 1:return i=c.sent(),!1,null,a=this.toJSON(null,!1),o={modelTopology:a,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v"+nn,convertedBy:null},null!=t&&t.includeOptimizer&&null!=this.optimizer?(o.trainingConfig=this.getTrainingConfig(),u="optimizer",h=(d=r.Fc).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,h.apply(d,[c.sent(),u])];case 3:s=c.sent(),l=s.data,f=s.specs,(m=i.specs).push.apply(m,f),i.data=r.Fc.concatenateArrayBuffers([i.data,l]),c.label=4;case 4:return null!=this.userDefinedMetadata&&(!0,Xt(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=i.data,o.weightSpecs=i.specs,[2,e.save(o)]}}))}))},t.prototype.setUserDefinedMetadata=function(e){Xt(e,this.name),this.userDefinedMetadata=e},t.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},t.className="Model",t}(fn);function Dn(e,t,n){return s(this,void 0,void 0,(function(){var i,a,o,u,s,l,f,d,h;return c(this,(function(c){switch(c.label){case 0:if(null==n&&(n={}),null==e.load)throw new p("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,e.load()];case 1:if(i=c.sent(),null!=(a=i.modelTopology).model_config&&(a=a.model_config),o=null==n.strict||n.strict,u=null!=i.weightData&&null!=i.weightSpecs&&o,s=_t(tn(a),t,u),null!=(l=i.trainingConfig)&&s.loadTrainingConfig(l),null!=i.userDefinedMetadata&&s.setUserDefinedMetadata(i.userDefinedMetadata),null==i.weightData)return[3,4];if(null==i.weightSpecs)throw new p("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return f=function(e,t){var n=r.Fc.decodeWeights(e,t),i={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):i[e.name]=n[e.name]})),{modelWeights:i,optimizerWeights:a}}(i.weightData,i.weightSpecs),d=f.modelWeights,h=f.optimizerWeights,s.loadWeights(d,o),null!=s.optimizer&&h.length>0?[4,s.optimizer.setWeights(h)]:[3,3];case 2:c.sent(),c.label=3;case 3:Object(r.Lb)(d),Object(r.Lb)(h.map((function(e){return e.tensor}))),c.label=4;case 4:return[2,s]}}))}))}r.we.registerClass(Rn);var In=function(e){function t(t){var n=e.call(this,{inputs:[],outputs:[]})||this;if(t=t||{},n.trainable=!0,n.built=!1,n.name=null!=t.name?t.name:Ze("sequential_"),null!=t.layers)for(var r=0,i=t.layers;r<i.length;r++){var a=i[r];n.add(a)}return n}return a(t,e),t.prototype.checkShape=function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new p("Negative dimension size caused by adding layer "+e.name+" with input shape ["+e.inboundNodes[0].inputTensors[0].shape+"]")},t.prototype.add=function(e){var n,r=e instanceof t||e instanceof Rn;if(r){if(1!==(n=e).outputs.length)throw new p("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new p("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new p("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var i=vt({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new p("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+e.name+" which has "+e.inboundNodes.length+" pre-existing inbound connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new p("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];var i=n.inboundNodes[r];if(0===i.inboundLayers.length)return i.inputTensors;for(var a=[],o=0;o<i.inboundLayers.length;o++)for(var u=0,s=e(i.inputTensors[o],i.inboundLayers[o],i.nodeIndices[o]);u<s.length;u++){var c=s[u];-1===a.indexOf(c)&&a.push(c)}return a}(this.outputs[0])}this.inboundNodes=[],new lt({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:v(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var a=e.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},t.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},t.prototype.call=function(e,t){return null==this.model&&this.build(),this.model.call(e,t)},t.prototype.build=function(e){if(nt(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Rn({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},t.prototype.countParams=function(){return this.built||this.build(),e.prototype.countParams.call(this)},t.prototype.summary=function(t,n,r){void 0===r&&(r=console.log),this.built||this.build(),e.prototype.summary.call(this,t,n,r)},t.prototype.setWeights=function(e){null==this.model&&this.build(),this.model.setWeights(e)},t.prototype.evaluate=function(e,t,n){if(void 0===n&&(n={}),!this.built)throw new d("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)},t.prototype.evaluateDataset=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){if(!this.built)throw new d("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(e,t)]}))}))},t.prototype.predict=function(e,t){return void 0===t&&(t={}),null==this.model&&this.build(),this.model.predict(e,t)},t.prototype.predictOnBatch=function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)},t.prototype.compile=function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(t.prototype,"optimizer",{get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e},enumerable:!0,configurable:!0}),t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),s(this,void 0,void 0,(function(){return c(this,(function(r){if(!this.built)throw new d("The model needs to be compiled before being used.");return[2,this.model.fit(e,t,n)]}))}))},t.prototype.fitDataset=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){if(!this.built)throw new d("The model needs to be compiled before being used.");return[2,this.model.fitDataset(e,t)]}))}))},t.prototype.trainOnBatch=function(e,t){return s(this,void 0,void 0,(function(){return c(this,(function(n){return[2,this.model.trainOnBatch(e,t)]}))}))},t.fromConfig=function(e,n,i,a){var o;void 0===i&&(i={}),void 0===a&&(a=!1);var u={};if(n instanceof Array){if(null==n[0].className||"Merge"===n[0].className)throw new p("Legacy serialization format not supported yet.");o=n}else r.Af.assert(null!=n.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),o=n.layers,delete n.layers,u=n;var s=new e(u);if(!(s instanceof t))throw new h("Sequential.fromConfig called on non-Sequential input: "+s);for(var c=0,l=o;c<l.length;c++){var f=_t(l[c],void 0,a);a&&f.setFastWeightInitDuringBuild(!0),s.add(f)}return s},Object.defineProperty(t.prototype,"stopTraining",{get:function(){if(null==this.model)throw new p("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new p("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t],i={};i.className=r.getClassName(),i.config=r.getConfig(),e.push(i)}return{name:this.name,layers:e}},t.className="Sequential",t}(Rn);function Mn(e){return new Rn(e)}function Fn(e){return new In(e)}function Pn(e,t){return null==t&&(t={}),function(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(i){if(null==t&&(t={}),"string"==typeof e){if(0===(n=r.Fc.getLoadHandlers(e,t.onProgress)).length)n.push(r.Fc.browserHTTPRequest(e,t));else if(n.length>1)throw new p("Found more than one ("+n.length+") load handlers for URL '"+e+"'");e=n[0]}return[2,Dn(e,void 0,t)]}))}))}(e,t)}function zn(e){return vt(e)}function Ln(e,t){St.registerCallbackConstructor(e,t)}r.we.registerClass(In);var Bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.getConfig=function(){return{}},t}(r.we.Serializable),Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=1),function(e,t){if(void 0===t&&(t=1),1!==t)throw new h("Support for alpha values other than 1 ("+t+") is not implemented yet.");return Object(r.Sb)(e)}(e,t)},t.className="elu",t}(Bn);r.we.registerClass(Wn);var Un=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return Object(r.ue)(e)},t.className="selu",t}(Bn);r.we.registerClass(Un);var Vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return Object(r.fe)(e)},t.className="relu",t}(Bn);r.we.registerClass(Vn);var Hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return Object(r.pf)((function(){return Object(r.od)(6,Object(r.fe)(e))}))},t.className="relu6",t}(Bn);r.we.registerClass(Hn);var qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return e},t.className="linear",t}(Bn);r.we.registerClass(qn);var Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return Object(r.Ae)(e)},t.className="sigmoid",t}(Bn);r.we.registerClass(Gn);var $n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return function(e){return Object(r.pf)((function(){var t=Object(r.J)(.5,Object(r.ud)(.2,e));return Object(r.pb)(t,0,1)}))}(e)},t.className="hardSigmoid",t}(Bn);r.we.registerClass($n);var Kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return Object(r.Me)(e)},t.className="softplus",t}(Bn);r.we.registerClass(Kn);var Xn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return function(e){return Object(r.pf)((function(){return Object(r.Nb)(e,Object(r.G)(e).add(1))}))}(e)},t.className="softsign",t}(Bn);r.we.registerClass(Xn);var Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e){return Object(r.ff)(e)},t.className="tanh",t}(Bn);r.we.registerClass(Yn);var Jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=-1),Object(r.Le)(e,t)},t.className="softmax",t}(Bn);r.we.registerClass(Jn);var Zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=-1),Object(r.Wc)(e,t)},t.className="logSoftmax",t}(Bn);function Qn(e){return e.getClassName()}function er(e,t){return void 0===t&&(t={}),S(e,r.we.SerializationMap.getMap().classNameMap,t,"activation")}function tr(e){var t;return null==e?er(t={className:"linear",config:{}}):"string"==typeof e?((t={}).className=e,t.config={},er(t)):e instanceof Bn?e:er(e)}function nr(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+e)}r.we.registerClass(Zn);var rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(r.we.Serializable),ir=function(e){function t(t){var n=e.call(this)||this;return nr(t),n.l1=null==t||null==t.l1?.01:t.l1,n.l2=null==t||null==t.l2?.01:t.l2,n.hasL1=0!==n.l1,n.hasL2=0!==n.l2,n}return a(t,e),t.prototype.apply=function(e){var t=this;return Object(r.pf)((function(){var n=Object(r.Jf)([1]);return t.hasL1&&(n=Object(r.J)(n,Object(r.cf)(Object(r.ud)(t.l1,Object(r.G)(e))))),t.hasL2&&(n=Object(r.J)(n,Object(r.cf)(Object(r.ud)(t.l2,we(e))))),n.asScalar()}))},t.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},t.fromConfig=function(e,t){return new e({l1:t.l1,l2:t.l2})},t.className="L1L2",t}(rr);r.we.registerClass(ir);var ar={l1l2:"L1L2"};function or(e){return E(e)}function ur(e,t){return void 0===t&&(t={}),S(e,r.we.SerializationMap.getMap().classNameMap,t,"regularizer")}function sr(e){return null==e?null:"string"==typeof e?ur({className:e in ar?ar[e]:e,config:{}}):e instanceof rr?e:ur(e)}var cr=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.supportsMasking=!0,null!=t&&(n.maxValue=t.maxValue),n}return a(t,e),t.prototype.call=function(e,t){e=tt(e);var n=Object(r.fe)(e);return null!=this.maxValue&&(n=Object(r.pb)(n,0,this.maxValue)),n},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={maxValue:this.maxValue},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ReLU",t}(dt);r.we.registerClass(cr);var lr=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_ALPHA=.3,null==t&&(t={}),n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return a(t,e),t.prototype.call=function(e,t){var n=tt(e);return Object(r.Lc)(n,this.alpha)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LeakyReLU",t}(dt);r.we.registerClass(lr);var fr=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;if(n.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),n.supportsMasking=!0,n.alphaInitializer=$e(t.alphaInitializer||n.DEFAULT_ALPHA_INITIALIZER),n.alphaRegularizer=sr(t.alphaRegularizer),n.alphaConstraint=U(t.alphaConstraint),null==t.sharedAxes)n.sharedAxes=null;else if(Array.isArray(t.sharedAxes))n.sharedAxes=t.sharedAxes;else{if("number"!=typeof t.sharedAxes)throw new p("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);n.sharedAxes=[t.sharedAxes]}return n}return a(t,e),t.prototype.build=function(e){var t=(e=nt(e)).slice(1);if(null!=this.sharedAxes)for(var n=0,r=this.sharedAxes;n<r.length;n++)t[(a=r[n])-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var i={};if(null!=this.sharedAxes)for(var a=1;a<e.length;++a)i[a]=e[a];this.inputSpec=[new ut({ndim:e.length,axes:i})],this.built=!0},t.prototype.call=function(e,t){return e=tt(e),Object(r.Qd)(e,this.alpha.read())},t.prototype.getConfig=function(){var t={alphaInitializer:Ge(this.alphaInitializer),alphaRegularizer:or(this.alphaRegularizer),alphaConstraint:B(this.alphaConstraint),sharedAxes:this.sharedAxes},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="PReLU",t}(dt);r.we.registerClass(fr);var dr=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;if(n.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==n.DEFAULT_ALPHA)throw new h("Non-default alpha value ("+t.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return a(t,e),t.prototype.call=function(e,t){var n=tt(e);return Object(r.Sb)(n)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ELU",t}(dt);r.we.registerClass(dr);var pr=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_THETA=1,null==t&&(t={}),n.theta=null==t.theta?n.DEFAULT_THETA:t.theta,n}return a(t,e),t.prototype.call=function(e,t){var n=tt(e);return n.mul(le(n.greater(this.theta),"float32"))},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={theta:this.theta},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ThresholdedReLU",t}(dt);r.we.registerClass(pr);var hr=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_AXIS=1,null==t&&(t={}),n.softmax=(new Jn).apply,n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n}return a(t,e),t.prototype.call=function(e,t){var n=tt(e);return this.softmax(n,this.axis)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Softmax",t}(dt);function mr(e,t,n){if("number"==typeof e)return v(e,t);if(e.length!==t)throw new p("The "+n+" argument must be an integer or tuple of "+t+" integers. Received: "+e.length+" elements.");for(var r=0;r<t;++r){var i=e[r];if(!ie(i))throw new p("The "+n+" argument must be an integer or tuple of "+t+" integers. Received: "+JSON.stringify(e)+" including a non-integer number "+i)}return e}function vr(e,t,n,r,i){return void 0===i&&(i=1),null==e?e:(a="same"===n?e:e-(t+(t-1)*(i-1))+1,Math.floor((a+r-1)/r));var a}function gr(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+se([n-t,0]);else{if("same"!==r)throw new p("Unsupport padding mode: "+r+".");e*=t}return e}function yr(e,t){return Object(r.pf)((function(){return X(t),"channelsFirst"===t?Object(r.uf)(e,[0,2,3,1]):e}))}function br(e,t){return Object(r.pf)((function(){return X(t),"channelsFirst"===t?Object(r.uf)(e,[0,2,3,4,1]):e}))}function xr(e,t,n,i,a,o,u,s){return void 0===i&&(i=[1,1]),void 0===a&&(a="valid"),void 0===s&&(s=null),Object(r.pf)((function(){if(null==o&&(o="channelsLast"),X(o),3!==e.rank&&4!==e.rank)throw new p("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+e.rank+".");if(3!==t.rank&&4!==t.rank)throw new p("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+e.rank+".");var c=yr(e,o);if("causal"===a)throw new h("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=r.lc.conv2d({x:c,filter:t,strides:i,pad:"same"===a?"same":"valid",dilations:u,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(c=Object(r.uf)(c,[0,3,1,2])),c}))}r.we.registerClass(hr);var wr=function(e){function t(n,r){var i=e.call(this,r)||this;if(i.bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(r),i.rank=n,N(i.rank,"rank"),1!==i.rank&&2!==i.rank&&3!==i.rank)throw new h("Convolution layer for rank other than 1, 2, or 3 ("+i.rank+") is not implemented yet.");if(i.kernelSize=mr(r.kernelSize,n,"kernelSize"),i.strides=mr(null==r.strides?1:r.strides,n,"strides"),i.padding=null==r.padding?"valid":r.padding,Y(i.padding),i.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,X(i.dataFormat),i.activation=tr(r.activation),i.useBias=null==r.useBias||r.useBias,i.biasInitializer=$e(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=U(r.biasConstraint),i.biasRegularizer=sr(r.biasRegularizer),i.activityRegularizer=sr(r.activityRegularizer),i.dilationRate=mr(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===i.rank&&Array.isArray(i.dilationRate)&&1!==i.dilationRate.length)throw new p("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(i.dilationRate));if(2===i.rank){if("number"==typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate];else if(2!==i.dilationRate.length)throw new p("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(i.dilationRate))}else if(3===i.rank)if("number"==typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate,i.dilationRate];else if(3!==i.dilationRate.length)throw new p("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(i.dilationRate));return i}return a(t,e),t.verifyArgs=function(e){if(g("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!T(e.kernelSize,"number",1,3))throw new p("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(e.kernelSize)+".")},t.prototype.getConfig=function(){var t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Qn(this.activation),useBias:this.useBias,biasInitializer:Ge(this.biasInitializer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),biasConstraint:B(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(dt),Or=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.kernel=null,t.verifyArgs(r),i.filters=r.filters,N(i.filters,"filters"),i.kernelInitializer=$e(r.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=U(r.kernelConstraint),i.kernelRegularizer=sr(r.kernelRegularizer),i}return a(t,e),t.prototype.build=function(e){var t;e=nt(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new p("The channel dimension of the input should be defined. Found "+e[n]);var r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(t={},t[n]=r,t)}],this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var t;e=tt(e);var i=null==n.bias?null:n.bias.read(),a=R(n.activation.getClassName());if(null!=a&&2===n.rank)t=xr(e,n.kernel.read(),i,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=function(e,t,n,i,a,o,u){return void 0===i&&(i=1),void 0===a&&(a="valid"),void 0===u&&(u=1),Object(r.pf)((function(){if(null==o&&(o="channelsLast"),X(o),3!==e.shape.length)throw new p("The input of a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead.");if(3!==t.shape.length)throw new p("The kernel for a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new p("The bias for a conv1dWithBias operation should be 1, but is "+t.shape.length+" instead");if("channelsFirst"===o&&(e=Object(r.uf)(e,[0,2,1])),"causal"===a)throw new h("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=Object(r.xb)(e,t,i,"same"===a?"same":"valid","NWC",u);return null!=n&&(s=ke(s,n)),s}))}(e,n.kernel.read(),i,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=xr(e,n.kernel.read(),i,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new h("convolutions greater than 3D are not implemented yet.");t=function(e,t,n,i,a,o,u){return void 0===i&&(i=[1,1,1]),void 0===a&&(a="valid"),Object(r.pf)((function(){if(null==o&&(o="channelsLast"),X(o),4!==e.rank&&5!==e.rank)throw new p("conv3dWithBias expects input to be of rank 4 or 5, but received "+e.rank+".");if(4!==t.rank&&5!==t.rank)throw new p("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+e.rank+".");var s=br(e,o);if("causal"===a)throw new h("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=Object(r.Ab)(s,t,i,"same"===a?"same":"valid","NDHWC",u),null!=n&&(s=ke(s,n)),"channelsFirst"===o&&(s=Object(r.uf)(s,[0,4,1,2,3])),s}))}(e,n.kernel.read(),i,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))},t.prototype.computeOutputShape=function(e){e=nt(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var i=vr(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(i)}var a=[e[0]];return"channelsLast"===this.dataFormat?(a=a.concat(t)).push(this.filters):(a.push(this.filters),a=a.concat(t)),a},t.prototype.getConfig=function(){var t={filters:this.filters,kernelInitializer:Ge(this.kernelInitializer),kernelRegularizer:or(this.kernelRegularizer),kernelConstraint:B(this.kernelConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.verifyArgs=function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new p("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},t}(wr),kr=function(e){function t(n){var r=e.call(this,2,n)||this;return t.verifyArgs(n),r}return a(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,t},t.verifyArgs=function(e){if("number"!=typeof e.kernelSize&&!T(e.kernelSize,"number",1,2))throw new p("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv2D",t}(Or);r.we.registerClass(kr);var Er=function(e){function t(n){var r=e.call(this,3,n)||this;return t.verifyArgs(n),r}return a(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,t},t.verifyArgs=function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new p("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv3D",t}(Or);r.we.registerClass(Er);var Sr=function(e){function t(t){var n=e.call(this,t)||this;if(n.inputSpec=[new ut({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new p("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return a(t,e),t.prototype.build=function(e){var t;if(4!==(e=nt(e)).length)throw new p("Input should have rank 4; Received input shape: "+JSON.stringify(e));var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new p("The channel dimension of the inputs should be defined. Found `None`.");var r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new ut({ndim:4,axes:(t={},t[n]=r,t)})],this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var t=tt(e);if(4!==t.shape.length)throw new p("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);var i,a,o=t.shape,u=o[0];"channelsFirst"===n.dataFormat?(i=2,a=3):(i=1,a=2);var s=o[i],c=o[a],l=n.kernelSize[0],f=n.kernelSize[1],d=n.strides[0],h=n.strides[1],m=[u,gr(s,d,l,n.padding),gr(c,h,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=Object(r.uf)(t,[0,2,3,1]));var v=Object(r.zb)(t,n.kernel.read(),m,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(v=Object(r.uf)(v,[0,3,1,2])),null!=n.bias&&(v=ke(v,n.bias.read(),n.dataFormat)),null!=n.activation&&(v=n.activation.apply(v)),v}))},t.prototype.computeOutputShape=function(e){var t,n,r,i=(e=nt(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var a=this.kernelSize[0],o=this.kernelSize[1],u=this.strides[0],s=this.strides[1];return i[t]=this.filters,i[n]=gr(i[n],u,a,this.padding),i[r]=gr(i[r],s,o,this.padding),i},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.dilationRate,t},t.className="Conv2DTranspose",t}(kr);r.we.registerClass(Sr);var Cr=function(e){function t(t){return e.call(this,2,t)||this}return a(t,e),t.className="SeparableConv2D",t}(function(e){function t(t,n){var r=e.call(this,t,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new p("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new p("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new p("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=$e(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=sr(n.depthwiseRegularizer),r.depthwiseConstraint=U(n.depthwiseConstraint),r.pointwiseInitializer=$e(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=sr(n.pointwiseRegularizer),r.pointwiseConstraint=U(n.pointwiseConstraint),r}return a(t,e),t.prototype.build=function(e){var t;if((e=nt(e)).length<this.rank+2)throw new p("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(e));var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n]||e[n]<0)throw new p("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[n]));for(var r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new ut({ndim:this.rank+2,axes:(t={},t[n]=r,t)})],this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var t;if(e=tt(e),1===n.rank)throw new h("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=Object(r.uf)(e,[0,2,3,1])),t=Object(r.ve)(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=ke(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=Object(r.uf)(t,[0,3,1,2])),t}))},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=Ge(this.depthwiseInitializer),t.pointwiseInitializer=Ge(this.pointwiseInitializer),t.depthwiseRegularizer=or(this.depthwiseRegularizer),t.pointwiseRegularizer=or(this.pointwiseRegularizer),t.depthwiseConstraint=B(this.depthwiseConstraint),t.pointwiseConstraint=B(this.pointwiseConstraint),t},t.className="SeparableConv",t}(Or));r.we.registerClass(Cr);var _r=function(e){function t(n){var r=e.call(this,1,n)||this;return t.verifyArgs(n),r.inputSpec=[{ndim:3}],r}return a(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.dataFormat,t},t.verifyArgs=function(e){if("number"!=typeof e.kernelSize&&!T(e.kernelSize,"number",1,1))throw new p("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv1D",t}(Or);r.we.registerClass(_r);var jr=function(e){function t(t){var n=e.call(this,t)||this;return"number"==typeof t.cropping?n.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?n.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:n.cropping=t.cropping,n.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,n.inputSpec=[{ndim:4}],n}return a(t,e),t.prototype.computeOutputShape=function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){return e=tt(e),"channelsLast"===n.dataFormat?he(he(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2),n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3):he(he(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3),n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))},t.prototype.getConfig=function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Cropping2D",t}(dt);r.we.registerClass(jr);var Ar=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==t.size?n.DEFAULT_SIZE:t.size,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,n}return a(t,e),t.prototype.computeOutputShape=function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}return t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2],[e[0],t,n,e[3]]},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var t=tt(e),i=t.shape;if("channelsFirst"===n.dataFormat){t=Object(r.uf)(t,[0,2,3,1]);var a=n.size[0]*i[2],o=n.size[1]*i[3],u=t.resizeNearestNeighbor([a,o]);return Object(r.uf)(u,[0,3,1,2])}return a=n.size[0]*i[1],o=n.size[1]*i[2],t.resizeNearestNeighbor([a,o])}))},t.prototype.getConfig=function(){var t={size:this.size,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="UpSampling2D",t}(dt);r.we.registerClass(Ar);var Tr=function(e){function t(t){var n=e.call(this,2,t)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,n.depthwiseInitializer=$e(t.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=U(t.depthwiseConstraint),n.depthwiseRegularizer=sr(t.depthwiseRegularizer),n}return a(t,e),t.prototype.build=function(e){if((e=nt(e)).length<4)throw new p("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(e)+".");var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new p("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+e[t]+").");var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var t=function(e,t,n,i,a,o){return void 0===n&&(n=[1,1]),void 0===i&&(i="valid"),Object(r.pf)((function(){null==a&&(a="channelsLast"),X(a);var u=yr(e,a);if(4!==e.rank)throw new p("Input for depthwiseConv2d is required to be 4-D, but is instead "+e.rank+"-D");if(4!==t.rank)throw new p("depthwiseKernel is required to be 4-D, but is instead "+t.rank+"-D");return u=Object(r.Ib)(u,t,n,"same"===i?"same":"valid","NHWC",o),"channelsFirst"===a&&(u=Object(r.uf)(u,[0,3,1,2])),u}))}(e=tt(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=ke(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))},t.prototype.computeOutputShape=function(e){e=nt(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=vr(t,this.kernelSize[0],this.padding,this.strides[0]),a=vr(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,a]:[e[0],i,a,r]},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=Ge(this.depthwiseInitializer),t.depthwiseRegularizer=or(this.depthwiseRegularizer),t.depthwiseConstraint=B(this.depthwiseRegularizer),t},t.className="DepthwiseConv2D",t}(wr);r.we.registerClass(Tr);var Nr=function(e){function t(t){var n=e.call(this,t)||this;return n.rate=Math.max(Math.min(t.rate,1),0),n.noiseShape=t.noiseShape,n.seed=t.seed,n.supportsMasking=!0,n}return a(t,e),t.prototype.getNoiseShape=function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r=tt(e);if(0<n.rate&&n.rate<1){var i=null!=t.training&&t.training,a=n.getNoiseShape(r);return Se((function(){return Ee(r,n.rate,a,n.seed)}),(function(){return r}),i)}return e}))},t.prototype.getConfig=function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.prototype.dispose=function(){return e.prototype.dispose.call(this)},t.className="Dropout",t}(dt);r.we.registerClass(Nr);var Rr=function(e){function t(t){var n=e.call(this,t)||this;return n.inputSpec=[{ndim:3}],n}return a(t,e),t.prototype.getNoiseShape=function(e){var t=e.shape;return[t[0],1,t[2]]},t.className="SpatialDropout1D",t}(Nr);r.we.registerClass(Rr);var Dr=function(e){function t(t){var n=e.call(this,t)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){var r=null;null!=t.batchSize&&(r=t.batchSize),n.batchInputShape=[r,t.inputDim]}return n.units=t.units,N(n.units,"units"),n.activation=tr(t.activation),null!=t.useBias&&(n.useBias=t.useBias),n.kernelInitializer=$e(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=$e(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=U(t.kernelConstraint),n.biasConstraint=U(t.biasConstraint),n.kernelRegularizer=sr(t.kernelRegularizer),n.biasRegularizer=sr(t.biasRegularizer),n.activityRegularizer=sr(t.activityRegularizer),n.supportsMasking=!0,n.inputSpec=[{minNDim:2}],n}return a(t,e),t.prototype.build=function(e){var t,n=(e=nt(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(t={},t[-1]=n,t)}],this.built=!0},t.prototype.computeOutputShape=function(e){var t=(e=nt(e)).slice();return t[t.length-1]=this.units,t},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r,i=tt(e),a=R(n.activation.getClassName());return null!=a?r=be(i,n.kernel.read(),a,n.bias?n.bias.read():null):(r=be(i,n.kernel.read()),null!=n.bias&&(r=ke(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Qn(this.activation),useBias:this.useBias,kernelInitializer:Ge(this.kernelInitializer),biasInitializer:Ge(this.biasInitializer),kernelRegularizer:or(this.kernelRegularizer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),kernelConstraint:B(this.kernelConstraint),biasConstraint:B(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dense",t}(dt);r.we.registerClass(Dr);var Ir=function(e){function t(t){var n=this;return t=t||{},(n=e.call(this,t)||this).inputSpec=[{minNDim:3}],n.dataFormat=t.dataFormat,n}return a(t,e),t.prototype.computeOutputShape=function(e){for(var t=0,n=(e=nt(e)).slice(1);t<n.length;t++)if(null==n[t])throw new p('The shape of the input to "Flatten" is not fully defined (got '+e.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],ae(e,1)]},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r=tt(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var i=[0],a=2;a<r.rank;++a)i.push(a);i.push(1),r=r.transpose(i)}return function(e){if(e.rank<=1)throw new p("batchFlatten requires a minimum rank of 2. Got rank: "+e.rank+".");var t=[e.shape[0],ae(e.shape,1)];return e.reshape(t)}(r)}))},t.prototype.getConfig=function(){var t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);var n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Flatten",t}(dt);r.we.registerClass(Ir);var Mr=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.activation=tr(t.activation),n}return a(t,e),t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r=tt(e);return n.activation.apply(r)}))},t.prototype.getConfig=function(){var t={activation:Qn(this.activation)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Activation",t}(dt);r.we.registerClass(Mr);var Fr=function(e){function t(t){var n=e.call(this,t)||this;return n.n=t.n,n.inputSpec=[{ndim:2}],n}return a(t,e),t.prototype.computeOutputShape=function(e){return[e[0],this.n,e[1]]},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){return function(e,t){return Object(r.pf)((function(){if(2!==e.shape.length)throw new p("repeat() expects a rank-2 tensor, but received a rank-"+e.shape.length+" tensor.");return ge(fe(e,1),[1,t,1])}))}(e=tt(e),n.n)}))},t.prototype.getConfig=function(){var t={n:this.n},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="RepeatVector",t}(dt);r.we.registerClass(Fr);var Pr=function(e){function t(t){var n=e.call(this,t)||this;n.targetShape=t.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return a(t,e),t.prototype.isUnknown=function(e){return e<0||null==e},t.prototype.fixUnknownDimension=function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),i=1,a=null,o=0;o<r.length;++o){var u=r[o];if(this.isUnknown(u)){if(null!==a)throw new p("Can only specifiy one unknown dimension.");a=o}else i*=u}var s=ae(e);if(null!==a){if(0===i||s%i!=0)throw new p(n);r[a]=s/i}else if(s!==i)throw new p(n);return r},t.prototype.computeOutputShape=function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r=tt(e),i=r.shape,a=i.slice(0,1).concat(n.fixUnknownDimension(i.slice(1),n.targetShape));return r.reshape(a)}))},t.prototype.getConfig=function(){var t={targetShape:this.targetShape},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Reshape",t}(dt);r.we.registerClass(Pr);var zr=function(e){function t(t){var n=e.call(this,t)||this;if(null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");var i=ce(1,t.dims.length+1);if(!r.Af.arraysEqual(t.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");return n.dims=t.dims,n.dimsIncludingBatch=[0].concat(n.dims),n.inputSpec=[new ut({ndim:n.dims.length+1})],n}return a(t,e),t.prototype.computeOutputShape=function(e){var t=(e=nt(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t},t.prototype.call=function(e,t){return Object(r.uf)(tt(e),this.dimsIncludingBatch)},t.prototype.getConfig=function(){var t={dims:this.dims},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Permute",t}(dt);r.we.registerClass(zr);var Lr=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.supportsMasking=!0,n.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0,n}return a(t,e),t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={maskValue:this.maskValue};return Object.assign(n,t),n},t.prototype.computeMask=function(e,t){var n=tt(e);return Object(r.N)(Object(r.Bd)(n,this.maskValue),-1)},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var i=tt(e),a=Object(r.N)(Object(r.Bd)(i,n.maskValue),-1,!0);return i.mul(a.asType(i.dtype))}))},t.className="Masking",t}(dt);r.we.registerClass(Lr);var Br=function(e){function t(t){var n=e.call(this,t)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){var r=null;null!=t.batchSize&&(r=t.batchSize),null==t.inputLength?n.batchInputShape=[r,null]:n.batchInputShape=[r].concat(x(t.inputLength))}return n.inputDim=t.inputDim,N(n.inputDim,"inputDim"),n.outputDim=t.outputDim,N(n.outputDim,"outputDim"),n.embeddingsInitializer=$e(t.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=sr(t.embeddingsRegularizer),n.activityRegularizer=sr(t.activityRegularizer),n.embeddingsConstraint=U(t.embeddingsConstraint),n.maskZero=t.maskZero,n.supportsMasking=t.maskZero,n.inputLength=t.inputLength,n}return a(t,e),t.prototype.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},t.prototype.warnOnIncompatibleInputShape=function(e){},t.prototype.computeMask=function(e,t){var n=this;return Object(r.pf)((function(){return n.maskZero?(e=tt(e),Object(r.Bd)(e,Object(r.Kf)(e))):null}))},t.prototype.computeOutputShape=function(e){if(e=nt(e),null==this.inputLength)return e.concat([this.outputDim]);var t=x(this.inputLength);if(t.length!==e.length-1)throw new p('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var n=0,r=0;r<t.length;++r){var i=t[r],a=e[r+1];if(null!=i&&null!=a&&i!==a)throw new p('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);null==i&&(t[n]=a),n++}return[e[0]].concat(t,[this.outputDim])},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r=tt(e);return"int32"!==r.dtype&&(r=le(r,"int32")),xe(n.embeddings.read(),r.as1D()).reshape(nt(n.computeOutputShape(r.shape)))}))},t.prototype.getConfig=function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Ge(this.embeddingsInitializer),embeddingsRegularizer:or(this.embeddingsRegularizer),activityRegularizer:or(this.activityRegularizer),embeddingsConstraint:B(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Embedding",t}(dt);r.we.registerClass(Br);var Wr=function(e){function t(t){var n=e.call(this,t||{})||this;return n.supportsMasking=!0,n}return a(t,e),t.prototype.mergeFunction=function(e){throw new h},t.prototype.computeElementwiseOpOutputShape=function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var i=e[e.length-t.length+r],a=t[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new p("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n},t.prototype.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[nt(e)]),(e=e).length<2)throw new p("A merge layer should be called on an Array of at least 2 inputs. Got "+e.length+" input(s).");for(var t=[],n=0,r=e;n<r.length;n++)null!=(o=r[n])&&null!==o[0]&&t.push(o[0]);if((t=_(t)).length>1)throw new p("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(e)+".");for(var i=null==e[0]?null:e[0].slice(1),a=1;a<e.length;++a){var o=null==e[a]?null:e[a].slice(1);i=this.computeElementwiseOpOutputShape(i,o)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===_(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){if(e=e,n.reshapeRequired){var t=[],i=e.map((function(e){return e.rank}));if(-1===i.indexOf(null)){for(var a=se(i),o=0,u=e;o<u.length;o++){for(var s=(p=u[o]).rank,c=0;c<a-s;++c)p=fe(p,1);t.push(p)}return n.mergeFunction(t)}for(var l=!1,f=0,d=e;f<d.length;f++){var p;if(null==(s=(p=d[f]).rank)){var h=p.shape,m=h[0],v=h.slice(1).concat([m]),g=p.reshape([m].concat(ae(h.slice(1))));g=(g=Object(r.uf)(g,[1,0])).reshape(v),t.push(g),l=!0}else if(s>1){var y=ce(1,s).concat([0]);t.push(Object(r.uf)(p,y)),l=!0}else t.push(p)}var b=n.mergeFunction(t),x=b.rank;if(l)if(null==x){var w=b.shape;v=[m=w[w.length-1]].concat(w.slice(0,w.length-1)),b=Object(r.uf)(b.reshape([-1,m]),[1,0]).reshape(v)}else x>1&&(y=[x-1].concat(ce(0,x-1)),b=Object(r.uf)(b,y));return b}return n.mergeFunction(e)}))},t.prototype.computeOutputShape=function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}for(var i=[],a=0,o=e;a<o.length;a++)null!=(r=o[a])&&null!==r[0]&&i.push(r[0]);return 1===(i=_(i)).length?i.concat(t):[null].concat(t)},t.prototype.computeMask=function(e,t){return Object(r.pf)((function(){if(null==t)return null;if(!Array.isArray(t))throw new p("`mask` should be an Array");if(!Array.isArray(e))throw new p("`inputs` should be an Array");if(t.length!==e.length)throw new p("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+e.length+" vs "+t.length+")");if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Object(r.bc)(e,0)})))[0],i=1;i<t.length-1;++i)n=Object(r.Yc)(n,t[i]);return n}))},t}(dt),Ur=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.mergeFunction=function(e){return Object(r.pf)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Object(r.J)(t,e[n]);return t}))},t.className="Add",t}(Wr);r.we.registerClass(Ur);var Vr=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.mergeFunction=function(e){return Object(r.pf)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Object(r.ud)(t,e[n]);return t}))},t.className="Multiply",t}(Wr);r.we.registerClass(Vr);var Hr=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.mergeFunction=function(e){return Object(r.pf)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Object(r.J)(t,e[n]);return Object(r.ud)(1/e.length,t)}))},t.className="Average",t}(Wr);r.we.registerClass(Hr);var qr=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.mergeFunction=function(e){return Object(r.pf)((function(){for(var t=e[0],n=1;n<e.length;++n)t=Object(r.jd)(t,e[n]);return t}))},t.className="Maximum",t}(Wr);r.we.registerClass(qr);var Gr=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.mergeFunction=function(e){return Object(r.pf)((function(){for(var t=e[0],n=1;n<e.length;++n)t=Object(r.od)(t,e[n]);return t}))},t.className="Minimum",t}(Wr);r.we.registerClass(Gr);var $r=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_AXIS=-1,null==t&&(t={}),n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return a(t,e),t.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new p("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var t=!0,n=0,i=e=e;n<i.length;n++)if(null!=(f=i[n])){t=!1;break}if(!t){for(var a=[],o=0;o<e.length;++o){var u=e[o].slice();u.splice(this.axis,1);for(var s=!1,c=0,l=a;c<l.length;c++){var f=l[c];if(r.Af.arraysEqual(f,u)){s=!0;break}}s||a.push(u)}if(a.length>1)throw new p("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},t.prototype.mergeFunction=function(e){var t=this;return Object(r.pf)((function(){return me(e,t.axis)}))},t.prototype.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new p("A `Concatenate` layer should be called on a list of inputs.");for(var t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,i=0,a=t.slice(1);i<a.length;i++){var o=a[i];if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n},t.prototype.computeMask=function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new p("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new p("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new p("Mismatch in the length of mask ("+t.length+") and the legnth of inputs ("+e.length+")");return Object(r.pf)((function(){var i=!0;if(t.forEach((function(e){null==e||(i=!1)})),i)return null;for(var a=[],o=0;o<e.length;++o)null==t[o]?a.push(Object(r.Fd)(e[o]).asType("bool")):t[o].rank<e[o].rank?a.push(Object(r.bc)(t[o],-1)):a.push(t[o]);var u=Object(r.sb)(a,n.axis);return Object(r.M)(u,-1,!1)}))},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Concatenate",t}(Wr);function Kr(e,t){for(;e<0;)e+=t;return e}r.we.registerClass($r);var Xr=function(e){function t(t){var n=e.call(this,t)||this;return n.axes=t.axes,n.normalize=null!=t.normalize&&t.normalize,n.supportsMasking=!0,n.reshapeRequired=!1,n}return a(t,e),t.prototype.build=function(e){r.Af.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new h("Dot layer does not support tensors of 4D or higher rank yet.");var i=this.interpretAxes(t,n);if(t[i[0]]!==n[i[1]])throw new p("Dimension incompatibility: "+t[i[0]]+" !== "+n[i[1]])},t.prototype.mergeFunction=function(e){if(2!==e.length)throw new p("A `Dot` layer must be called on exactly 2 inputs, but received "+e.length+" input(s).");var t,n=e[0],i=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return Kr(t,e[n].shape.length)})):[Kr(this.axes,n.shape.length),Kr(this.axes,i.shape.length)],this.normalize&&(n=jt(n,t[0]),i=jt(i,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new h("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.Af.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, but got "+e.shape.length})),r.Af.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, but got "+t.shape.length})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new h("batchDot is not implemented for complex64-type Tensors yet.");var i=e.shape.length,a=t.shape.length;null==n&&(n=[i-1,a-2]);var o=n;return Object(r.pf)((function(){var n,r;if(i>a){n=i-a;for(var u=[],s=0;s<n;++s)u.push(1);t=t.reshape(t.shape.concat(u))}else if(a>i){for(n=a-i,u=[],s=0;s<n;++s)u.push(1);e=e.reshape(e.shape.concat(u))}else n=0;if(2===e.shape.length&&2===t.shape.length)r=o[0]===o[1]?e.mulStrict(t).sum(o[0]):e.transpose([1,0]).mulStrict(t).sum(o[1]);else{var c=o[0]!==e.shape.length-1,l=o[1]===t.shape.length-1;r=e.matMul(t,c,l)}if(n>0){var f,d=[];for(s=f=i>a?i+a-3:i-1;s<f+n;++s)d.push(s);r=r.squeeze(d)}return 1===r.shape.length&&(r=r.expandDims(1)),r}))}(n,i,t)},t.prototype.interpretAxes=function(e,t){return Array.isArray(this.axes)?this.axes:[Kr(this.axes,e.length),Kr(this.axes,t.length)]},t.prototype.computeOutputShape=function(e){r.Af.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new h("Dot layer does not support tensors of 4D or higher rank yet.");var i=this.interpretAxes(t,n);t.splice(i[0],1),n.splice(i[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a},t.prototype.computeMask=function(e,t){return null},t.prototype.getConfig=function(){var t={axes:this.axes,normalize:this.normalize},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dot",t}(Wr);r.we.registerClass(Xr);var Yr=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.stddev=t.stddev,n}return a(t,e),t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={stddev:this.stddev};return Object.assign(n,t),n},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r=tt(e);return Se((function(){return ye(r.shape,0,n.stddev).add(r)}),(function(){return r}),t.training||!1)}))},t.className="GaussianNoise",t}(dt);r.we.registerClass(Yr);var Jr=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.rate=t.rate,n}return a(t,e),t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,t),n},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t);var r=tt(e);return n.rate>0&&n.rate<1?Se((function(){var e=Math.sqrt(n.rate/(1-n.rate));return r.mul(ye(r.shape,1,e))}),(function(){return r}),t.training||!1):r}))},t.className="GaussianDropout",t}(dt);r.we.registerClass(Jr);var Zr=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.rate=t.rate,n.noiseShape=t.noiseShape,n}return a(t,e),t.prototype._getNoiseShape=function(e){return this.noiseShape||tt(e).shape},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,t),n},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){if(n.rate<1&&n.rate>0){var i=n._getNoiseShape(e);return Se((function(){var t=tt(e),a=-1.7580993408473766,o=Object(r.wc)(Object(r.Xd)(i),n.rate);o=le(o,"float32");var u=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-u*a*n.rate;return t.mul(o).add(o.add(-1).mul(a)).mul(u).add(s)}),(function(){return tt(e)}),t.training||!1)}return e}))},t.className="AlphaDropout",t}(dt);function Qr(e,t,n,i,a,o){var u;if(void 0===o&&(o=.001),2===e.rank)u=Object(r.bb)(e,t,n,i,a,o);else if(3===e.rank)u=Object(r.cb)(e,t,n,i,a,o);else{if(4!==e.rank)throw new h("batchNormalization is not implemented for array of rank "+e.rank+" yet");u=Object(r.db)(e,t,n,i,a,o)}return u}function ei(e,t,n,i,a){return void 0===a&&(a=.001),r.Af.arraysEqual(i.slice().sort(),ce(0,e.rank-1))?function(e,t,n,i,a){return void 0===a&&(a=.001),Object(r.pf)((function(){var o=Object(r.sd)(e,i),u=o.mean,s=o.variance;return[Qr(e,u,s,n,t,a),u,s]}))}(e,t,n,i,a):function(e,t,n,i,a){return void 0===a&&(a=.001),Object(r.pf)((function(){for(var o=Object(r.sd)(e,i),u=o.mean,s=o.variance,c=[],l=0,f=ce(0,e.rank);l<f.length;l++){var d=f[l];-1!==i.indexOf(d)?c.push(1):c.push(e.shape[d])}var p=u.reshape(c),h=s.reshape(c),m=null==t?null:t.reshape(c),v=null==n?null:n.reshape(c);return[Qr(e,p,h,v,m,a),u,s]}))}(e,t,n,i,a)}r.we.registerClass(Zr);var ti=function(e){function t(t){var n=this;return null==t&&(t={}),(n=e.call(this,t)||this).supportsMasking=!0,n.axis=null==t.axis?-1:t.axis,n.momentum=null==t.momentum?.99:t.momentum,n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=$e(t.betaInitializer||"zeros"),n.gammaInitializer=$e(t.gammaInitializer||"ones"),n.movingMeanInitializer=$e(t.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=$e(t.movingVarianceInitializer||"ones"),n.betaConstraint=U(t.betaConstraint),n.gammaConstraint=U(t.gammaConstraint),n.betaRegularizer=sr(t.betaRegularizer),n.gammaRegularizer=sr(t.gammaRegularizer),n}return a(t,e),t.prototype.build=function(e){var t;e=nt(e);var n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(null==r)throw new p("Axis "+n+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(e)+".");this.inputSpec=[new ut({ndim:e.length,axes:(t={},t[n]=r,t)})];var i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var i=null!=t.training&&t.training,a=tt(e),o=a.shape,u=o.length,s=ce(0,u),c=n.axis>=0?n.axis:n.axis+u;s.splice(c,1);var l=v(1,u);l[c]=o[c];var f=s.slice();f.sort();var d=!r.Af.arraysEqual(f,ce(0,u).slice(0,u-1));if(!i)return function(){if(d){var e=n.movingMean.read().reshape(l),t=n.movingVariance.read().reshape(l),r=n.center?n.beta.read().reshape(l):null,i=n.scale?n.gamma.read().reshape(l):null;return Qr(a,e,t,r,i,n.epsilon)}return Qr(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=ei(a,n.gamma.read(),n.beta.read(),s,n.epsilon),h=p[0],m=p[1],g=p[2],y=function(e,t,n){Object(r.pf)((function(){var r=1-n,i=e.read(),a=i.sub(t).mul(r);e.write(i.sub(a))}))};return y(n.movingMean,m,n.momentum),y(n.movingVariance,g,n.momentum),h}))},t.prototype.getConfig=function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ge(this.betaInitializer),gammaInitializer:Ge(this.gammaInitializer),movingMeanInitializer:Ge(this.movingMeanInitializer),movingVarianceInitializer:Ge(this.movingVarianceInitializer),betaRegularizer:or(this.betaRegularizer),gammaRegularizer:or(this.gammaRegularizer),betaConstraint:B(this.betaConstraint),gammaConstraint:B(this.gammaConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="BatchNormalization",t}(dt);r.we.registerClass(ti);var ni=function(e){function t(t){var n=this;if(null==t&&(t={}),(n=e.call(this,t)||this).axis=null==t.axis?-1:t.axis,"number"==typeof n.axis){if(!Number.isInteger(n.axis))throw new Error("Expected axis to be an integer, but received "+n.axis)}else{if(!Array.isArray(n.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(n.axis));for(var r=0,i=n.axis;r<i.length;r++){var a=i[r];if(!Number.isInteger(a))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(n.axis))}}return n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=$e(t.betaInitializer||"zeros"),n.gammaInitializer=$e(t.gammaInitializer||"ones"),n.betaRegularizer=sr(t.betaRegularizer),n.gammaRegularizer=sr(t.gammaRegularizer),n.supportsMasking=!0,n}return a(t,e),t.prototype.build=function(e){var t=(e=nt(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);for(var r=0,i=this.axis;r<i.length;r++){var a=i[r];if(a<0||a>=t)throw new Error("Invalid axis: "+a)}if(this.axis.length!==_(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0},t.prototype.call=function(e,t){var n=this,i=tt(e),a=i.shape,o=a.length;return Object(r.pf)((function(){for(var e=Object(r.sd)(i,n.axis,!0),t=e.mean,u=e.variance,s=v(1,o),c=0,l=n.axis;c<l.length;c++){var f=l[c];s[f]=a[f]}for(var d=function(e){return null!=e&&e.shape.length!==o&&n.axis!==[o-1]?e.reshape(s):e},p=d(n.gamma.read()),h=d(n.beta.read()),m=[],g=[],y=0;y<o;++y)-1!==n.axis.indexOf(y)?(m.push(a[y]),g.push(1)):(m.push(1),g.push(a[y]));return t=t.tile(m),u=u.tile(m),p=p.tile(g),h=h.tile(g),Qr(i,t,u,h,p,n.epsilon)}))},t.prototype.getConfig=function(){var t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Ge(this.betaInitializer),gammaInitializer:Ge(this.gammaInitializer),betaRegularizer:or(this.betaRegularizer),gammaRegularizer:or(this.gammaRegularizer)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LayerNormalization",t}(dt);r.we.registerClass(ni);var ri=function(e){function t(t){var n=this;if(null==t&&(t={}),(n=e.call(this,t)||this).dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,null==t.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)n.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new p("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+t.padding.length+" array.");var r=void 0,i=void 0;if("number"==typeof t.padding[0])r=[t.padding[0],t.padding[0]],i=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new p("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+t.padding[0].length+" array.");if(r=t.padding[0],2!==t.padding[1].length)throw new p("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+t.padding[1].length+" array.");i=t.padding[1]}n.padding=[r,i]}return n.inputSpec=[new ut({ndim:4})],n}return a(t,e),t.prototype.computeOutputShape=function(e){var t,n;return e=nt(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){return function(e,t,n){return Object(r.pf)((function(){if(4!==e.rank)throw new p("temporalPadding expects input tensor to be 4-D, but received a "+e.rank+"-D tensor.");if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new p("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new p("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");var i;return i="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Object(r.Id)(e,i)}))}(tt(e),n.padding,n.dataFormat)}))},t.prototype.getConfig=function(){var t={padding:this.padding,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ZeroPadding2D",t}(dt);function ii(e,t,n,i,a,o){return Object(r.pf)((function(){var u;X(a),J(o),Y(i),null==n&&(n=[1,1]),null==i&&(i="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=yr(e,a);var s="same"===i?"same":"valid";return u="max"===o?Object(r.gd)(e,t,n,s):Object(r.V)(e,t,n,s),"channelsFirst"===a&&(u=Object(r.uf)(u,[0,3,1,2])),u}))}function ai(e,t,n,i,a,o){return Object(r.pf)((function(){var u;X(a),J(o),Y(i),null==n&&(n=[1,1,1]),null==i&&(i="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),e=br(e,a);var s="same"===i?"same":"valid";return u="max"===o?Object(r.hd)(e,t,n,s):Object(r.W)(e,t,n,s),"channelsFirst"===a&&(u=Object(r.uf)(u,[0,4,1,2,3])),u}))}r.we.registerClass(ri);var oi=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=2),n=e.call(this,t)||this,"number"==typeof t.poolSize)n.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new p("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));n.poolSize=t.poolSize}if(N(n.poolSize,"poolSize"),null==t.strides)n.strides=n.poolSize;else if("number"==typeof t.strides)n.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new p("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));n.strides=t.strides}return N(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,Y(n.padding),n.inputSpec=[new ut({ndim:3})],n}return a(t,e),t.prototype.computeOutputShape=function(e){var t=vr((e=nt(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){n.invokeCallHook(e,t),e=fe(tt(e),2);var i=n.poolingFunction(tt(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Object(r.Ve)(i,[2])}))},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(dt),ui=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,r,i){return X(i),Y(r),ii(e,t,n,r,i,"max")},t.className="MaxPooling1D",t}(oi);r.we.registerClass(ui);var si=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,r,i){return X(i),Y(r),ii(e,t,n,r,i,"avg")},t.className="AveragePooling1D",t}(oi);r.we.registerClass(si);var ci=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=[2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new p("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides];return N(n.poolSize,"poolSize"),N(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,X(n.dataFormat),Y(n.padding),n.inputSpec=[new ut({ndim:4})],n}return a(t,e),t.prototype.computeOutputShape=function(e){e=nt(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=vr(t,this.poolSize[0],this.padding,this.strides[0]),n=vr(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){return n.invokeCallHook(e,t),n.poolingFunction(tt(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(dt),li=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,r,i){return X(i),Y(r),ii(e,t,n,r,i,"max")},t.className="MaxPooling2D",t}(ci);r.we.registerClass(li);var fi=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,r,i){return X(i),Y(r),ii(e,t,n,r,i,"avg")},t.className="AveragePooling2D",t}(ci);r.we.registerClass(fi);var di=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=[2,2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new p("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides,t.strides];return N(n.poolSize,"poolSize"),N(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,X(n.dataFormat),Y(n.padding),n.inputSpec=[new ut({ndim:5})],n}return a(t,e),t.prototype.computeOutputShape=function(e){e=nt(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=vr(t,this.poolSize[0],this.padding,this.strides[0]),n=vr(n,this.poolSize[1],this.padding,this.strides[1]),r=vr(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){return n.invokeCallHook(e,t),n.poolingFunction(tt(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(dt),pi=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,r,i){return X(i),Y(r),ai(e,t,n,r,i,"max")},t.className="MaxPooling3D",t}(di);r.we.registerClass(pi);var hi=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,r,i){return X(i),Y(r),ai(e,t,n,r,i,"avg")},t.className="AveragePooling3D",t}(di);r.we.registerClass(hi);var mi=function(e){function t(t){var n=e.call(this,t)||this;return n.inputSpec=[new ut({ndim:3})],n}return a(t,e),t.prototype.computeOutputShape=function(e){return[e[0],e[2]]},t.prototype.call=function(e,t){throw new h},t}(dt),vi=function(e){function t(t){return e.call(this,t||{})||this}return a(t,e),t.prototype.call=function(e,t){return Object(r.pf)((function(){var t=tt(e);return Object(r.ld)(t,1)}))},t.className="GlobalAveragePooling1D",t}(mi);r.we.registerClass(vi);var gi=function(e){function t(t){return e.call(this,t||{})||this}return a(t,e),t.prototype.call=function(e,t){return Object(r.pf)((function(){var t=tt(e);return Object(r.fd)(t,1)}))},t.className="GlobalMaxPooling1D",t}(mi);r.we.registerClass(gi);var yi=function(e){function t(t){var n=e.call(this,t)||this;return n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,X(n.dataFormat),n.inputSpec=[new ut({ndim:4})],n}return a(t,e),t.prototype.computeOutputShape=function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]},t.prototype.call=function(e,t){throw new h},t.prototype.getConfig=function(){var t={dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(dt),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var t=tt(e);return"channelsLast"===n.dataFormat?Object(r.ld)(t,[1,2]):Object(r.ld)(t,[2,3])}))},t.className="GlobalAveragePooling2D",t}(yi);r.we.registerClass(bi);var xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var t=tt(e);return"channelsLast"===n.dataFormat?Object(r.fd)(t,[1,2]):Object(r.fd)(t,[2,3])}))},t.className="GlobalMaxPooling2D",t}(yi);function wi(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new p("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=i(t),constants:n=i(n)}}function Oi(e,t,n,i,a,o,u,s){return void 0===i&&(i=!1),void 0===u&&(u=!1),void 0===s&&(s=!1),Object(r.pf)((function(){var c=t.shape.length;if(c<3)throw new p("Input should be at least 3D, but is "+c+"D.");var l=[1,0].concat(ce(2,c));if(t=Object(r.uf)(t,l),null!=o)throw new h("The rnn() functoin of the deeplearn.js backend does not support constants yet.");u&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===c-1&&(a=Object(r.bc)(a,-1)),a=Object(r.uf)(a,l)),i&&(t=Object(r.je)(t,0),null!=a&&(a=Object(r.je)(a,0)));var f,d,m=[],v=n,g=t.shape[0],y=Object(r.zf)(t);null!=a&&(d=Object(r.zf)(a));for(var b,x=function(t){var n=y[t],i=Object(r.pf)((function(){return e(n,v)}));if(null==a)f=i[0],v=i[1];else{var o=Object(r.pf)((function(){var e=d[t],n=Object(r.Fd)(e).sub(e);return{output:i[0].mul(e).addStrict(v[0].mul(n)),newStates:v.map((function(t,r){return i[1][r].mul(e).addStrict(t.mul(n))}))}}));f=o.output,v=o.newStates}s&&m.push(f)},w=0;w<g;++w)x(w);return s&&(b=Object(r.We)(m,1)),[f,b,v]}))}r.we.registerClass(xi);var ki=function(e){function t(t){var n,r=e.call(this,t)||this;if(null==t.cell)throw new p("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(t.cell)?new Ni({cells:t.cell}):t.cell).stateSize)throw new p("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=t.returnSequences&&t.returnSequences,r.returnState=null!=t.returnState&&t.returnState,r.goBackwards=null!=t.goBackwards&&t.goBackwards,r._stateful=null!=t.stateful&&t.stateful,r.unroll=null!=t.unroll&&t.unroll,r.supportsMasking=!0,r.inputSpec=[new ut({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return a(t,e),t.prototype.getStates=function(){return null==this.states_?ce(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_},t.prototype.setStates=function(e){this.states_=e},t.prototype.computeOutputShape=function(e){Qe(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){for(var i=[],a=0,o=t;a<o.length;a++){var u=o[a];i.push([e[0],u])}return[n].concat(i)}return n},t.prototype.computeMask=function(e,t){var n=this;return Object(r.pf)((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))},Object.defineProperty(t.prototype,"states",{get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e},enumerable:!0,configurable:!0}),t.prototype.build=function(e){if(null!=this.numConstants)throw new h("Constants support is not implemented in RNN yet.");Qe(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e[e.length-1];this.inputSpec[0]=new ut({shape:[t,null,n]});var i,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.Af.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),i))throw new p("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=i.map((function(e){return new ut({shape:[null,e]})}));this.stateful&&this.resetStates()},t.prototype.resetStates=function(e,t){var n=this;void 0===t&&(t=!1),Object(r.pf)((function(){if(!n.stateful)throw new f("Cannot call resetStates() on an RNN Layer that is not stateful.");var i=n.inputSpec[0].shape[0];if(null==i)throw new p("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==n.states_)Array.isArray(n.cell.stateSize)?n.states_=n.cell.stateSize.map((function(e){return Object(r.Jf)([i,e])})):n.states_=[Object(r.Jf)([i,n.cell.stateSize])];else if(null==e)Object(r.Lb)(n.states_),null!=n.keptStates&&(Object(r.Lb)(n.keptStates),n.keptStates=[]),Array.isArray(n.cell.stateSize)?n.states_=n.cell.stateSize.map((function(e){return Object(r.Jf)([i,e])})):n.states_[0]=Object(r.Jf)([i,n.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==n.states_.length)throw new p("Layer "+n.name+" expects "+n.states_.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);!0===t?n.keptStates.push(n.states_.slice()):Object(r.Lb)(n.states_);for(var a=0;a<n.states_.length;++a){var o=e[a],u=Array.isArray(n.cell.stateSize)?n.cell.stateSize[a]:n.cell.stateSize,s=[i,u];if(!r.Af.arraysEqual(o.shape,s))throw new p("State "+a+" is incompatible with layer "+n.name+": expected shape="+s+", received shape="+o.shape);n.states_[a]=o}}n.states_=n.states_.map((function(e){return Object(r.Kc)(e.clone())}))}))},t.prototype.apply=function(t,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=wi(t,r,i,this.numConstants);t=a.inputs,r=a.initialState,i=a.constants;var o=[],u=[];if(null!=r){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(var s=0,c=r;s<c.length;s++){var l=c[s];this.stateSpec.push(new ut({shape:l.shape}))}u=u.concat(this.stateSpec)}if(null!=i&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof st){var f=[t].concat(o),d=this.inputSpec.concat(u),p=this.inputSpec;this.inputSpec=d;var h=e.prototype.apply.call(this,f,n);return this.inputSpec=p,h}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var r=null==t?null:t.mask,i=null==t?null:t.training,a=null==t?null:t.initialState;e=tt(e),null==a&&(a=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(a.length!==o)throw new p("RNN Layer has "+o+" state(s) but was passed "+a.length+" initial state(s).");n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var u={training:i},s=Oi((function(e,t){var r=n.cell.call([e].concat(t),u);return[r[0],r.slice(1)]}),e,a,n.goBackwards,r,null,n.unroll,n.returnSequences),c=s[0],l=s[1],f=s[2];n.stateful&&n.resetStates(f,i);var d=n.returnSequences?l:c;return n.returnState?[d].concat(f):d}))},t.prototype.getInitialState=function(e){var t=this;return Object(r.pf)((function(){var n=Object(r.Jf)(e.shape);return n=fe(n=Object(r.cf)(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?ge(n,[1,e]):n})):t.cell.stateSize>1?[ge(n,[1,t.cell.stateSize])]:[n]}))},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),t.prototype.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)},t.prototype.getConfig=function(){var t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var n=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:n};var r=e.prototype.getConfig.call(this);return Object.assign(t,r),t},t.fromConfig=function(e,t,n){void 0===n&&(n={});var r=_t(t.cell,n);return new e(Object.assign(t,{cell:r}))},t.className="RNN",t}(dt);r.we.registerClass(ki);var Ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(dt),Si=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,N(n.units,"units"),n.activation=tr(null==t.activation?n.DEFAULT_ACTIVATION:t.activation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=$e(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=$e(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=$e(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=sr(t.kernelRegularizer),n.recurrentRegularizer=sr(t.recurrentRegularizer),n.biasRegularizer=sr(t.biasRegularizer),n.kernelConstraint=U(t.kernelConstraint),n.recurrentConstraint=U(t.recurrentConstraint),n.biasConstraint=U(t.biasConstraint),n.dropout=ue([1,se([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=ue([1,se([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return a(t,e),t.prototype.build=function(e){e=nt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){if(2!==(e=e).length)throw new p("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var i=e[1];e=e[0];var a,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Ri((function(){return Object(r.Fd)(e)}),n.dropout,o)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Ri((function(){return Object(r.Fd)(i)}),n.recurrentDropout,o));var u=n.dropoutMask,s=n.recurrentDropoutMask;a=be(null!=u?Object(r.ud)(e,u):e,n.kernel.read()),null!=n.bias&&(a=ke(a,n.bias.read())),null!=s&&(i=Object(r.ud)(i,s));var c=Object(r.J)(a,be(i,n.recurrentKernel.read()));return null!=n.activation&&(c=n.activation.apply(c)),[c,c]}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Qn(this.activation),useBias:this.useBias,kernelInitializer:Ge(this.kernelInitializer),recurrentInitializer:Ge(this.recurrentInitializer),biasInitializer:Ge(this.biasInitializer),kernelRegularizer:or(this.kernelRegularizer),recurrentRegularizer:or(this.recurrentRegularizer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),kernelConstraint:B(this.kernelConstraint),recurrentConstraint:B(this.recurrentConstraint),biasConstraint:B(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="SimpleRNNCell",t}(Ei);r.we.registerClass(Si);var Ci=function(e){function t(t){return t.cell=new Si(t),e.call(this,t)||this}return a(t,e),t.prototype.call=function(t,n){var i=this;return Object(r.pf)((function(){null!=i.cell.dropoutMask&&(Object(r.Lb)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&(Object(r.Lb)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,u=null==n?null:n.initialState;return e.prototype.call.call(i,t,{mask:a,training:o,initialState:u})}))},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:Qn(this.activation),useBias:this.useBias,kernelInitializer:Ge(this.kernelInitializer),recurrentInitializer:Ge(this.recurrentInitializer),biasInitializer:Ge(this.biasInitializer),kernelRegularizer:or(this.kernelRegularizer),recurrentRegularizer:or(this.recurrentRegularizer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),kernelConstraint:B(this.kernelConstraint),recurrentConstraint:B(this.recurrentConstraint),biasConstraint:B(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return new e(t)},t.className="SimpleRNN",t}(ki);r.we.registerClass(Ci);var _i=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,N(n.units,"units"),n.activation=tr(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=tr(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=$e(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=$e(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=$e(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=sr(t.kernelRegularizer),n.recurrentRegularizer=sr(t.recurrentRegularizer),n.biasRegularizer=sr(t.biasRegularizer),n.kernelConstraint=U(t.kernelConstraint),n.recurrentConstraint=U(t.recurrentConstraint),n.biasConstraint=U(t.biasConstraint),n.dropout=ue([1,se([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=ue([1,se([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return a(t,e),t.prototype.build=function(e){var t=(e=nt(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){if(2!==(e=e).length)throw new p("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var i=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Ri((function(){return Object(r.Fd)(e)}),n.dropout,i,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Ri((function(){return Object(r.Fd)(a)}),n.recurrentDropout,i,3));var o,u,s,c=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Object(r.ud)(e,c[0]));var f=be(e,n.kernel.read());n.useBias&&(f=ke(f,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Object(r.ud)(a,l[0]));var d=n.recurrentKernel.read(),h=Object(r.Qe)(d,[2*n.units,n.units],d.rank-1),m=h[0],v=h[1],g=be(a,m),y=Object(r.Qe)(f,3,f.rank-1),b=y[0],x=y[1],w=y[2],O=Object(r.Qe)(g,2,g.rank-1),k=O[0],E=O[1];o=n.recurrentActivation.apply(Object(r.J)(b,k)),u=n.recurrentActivation.apply(Object(r.J)(x,E));var S=be(Object(r.ud)(u,a),v);s=n.activation.apply(Object(r.J)(w,S));var C=Object(r.J)(Object(r.ud)(o,a),Object(r.ud)(Object(r.J)(1,Object(r.yd)(o)),s));return[C,C]}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Qn(this.activation),recurrentActivation:Qn(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ge(this.kernelInitializer),recurrentInitializer:Ge(this.recurrentInitializer),biasInitializer:Ge(this.biasInitializer),kernelRegularizer:or(this.kernelRegularizer),recurrentRegularizer:or(this.recurrentRegularizer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),kernelConstraint:B(this.kernelConstraint),recurrentConstraint:B(this.recurrentConstraint),biasConstraint:B(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="GRUCell",t}(Ei);r.we.registerClass(_i);var ji=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new _i(t),e.call(this,t)||this}return a(t,e),t.prototype.call=function(t,n){var i=this;return Object(r.pf)((function(){null!=i.cell.dropoutMask&&(Object(r.Lb)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&(Object(r.Lb)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,u=null==n?null:n.initialState;return e.prototype.call.call(i,t,{mask:a,training:o,initialState:u})}))},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:Qn(this.activation),recurrentActivation:Qn(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ge(this.kernelInitializer),recurrentInitializer:Ge(this.recurrentInitializer),biasInitializer:Ge(this.biasInitializer),kernelRegularizer:or(this.kernelRegularizer),recurrentRegularizer:or(this.recurrentRegularizer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),kernelConstraint:B(this.kernelConstraint),recurrentConstraint:B(this.recurrentConstraint),biasConstraint:B(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="GRU",t}(ki);r.we.registerClass(ji);var Ai=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,N(n.units,"units"),n.activation=tr(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=tr(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=$e(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=$e(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=$e(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=t.unitForgetBias,n.kernelRegularizer=sr(t.kernelRegularizer),n.recurrentRegularizer=sr(t.recurrentRegularizer),n.biasRegularizer=sr(t.biasRegularizer),n.kernelConstraint=U(t.kernelConstraint),n.recurrentConstraint=U(t.recurrentConstraint),n.biasConstraint=U(t.biasConstraint),n.dropout=ue([1,se([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=ue([1,se([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return a(t,e),t.prototype.build=function(e){var t,n,r=(e=nt(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var i=this.biasInitializer,o=this.units;n=new((t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.apply=function(e,t){var n=i.apply([o]),r=(new Te).apply([o]),a=i.apply([2*o]);return ve(ve(n,r),a)},t}(je)).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var i=null!=t.training&&t.training;if(3!==(e=e).length)throw new p("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var a=e[1],o=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Ri((function(){return Object(r.Fd)(e)}),n.dropout,i,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Ri((function(){return Object(r.Fd)(a)}),n.recurrentDropout,i,4));var u,s,c,l,f=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=Object(r.ud)(e,f[0]));var h=be(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Object(r.ud)(a,d[0])),h=Object(r.J)(h,be(a,n.recurrentKernel.read())),n.useBias&&(h=ke(h,n.bias.read()));var m=Object(r.Qe)(h,4,h.rank-1),v=m[0],g=m[1],y=m[2],b=m[3];u=n.recurrentActivation.apply(v),s=n.recurrentActivation.apply(g),c=Object(r.J)(Object(r.ud)(s,o),Object(r.ud)(u,n.activation.apply(y))),l=n.recurrentActivation.apply(b);var x=Object(r.ud)(l,n.activation.apply(c));return[x,x,c]}))},t.prototype.getConfig=function(){var t={units:this.units,activation:Qn(this.activation),recurrentActivation:Qn(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ge(this.kernelInitializer),recurrentInitializer:Ge(this.recurrentInitializer),biasInitializer:Ge(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:or(this.kernelRegularizer),recurrentRegularizer:or(this.recurrentRegularizer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),kernelConstraint:B(this.kernelConstraint),recurrentConstraint:B(this.recurrentConstraint),biasConstraint:B(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LSTMCell",t}(Ei);r.we.registerClass(Ai);var Ti=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Ai(t),e.call(this,t)||this}return a(t,e),t.prototype.call=function(t,n){var i=this;return Object(r.pf)((function(){null!=i.cell.dropoutMask&&(Object(r.Lb)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&(Object(r.Lb)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,u=null==n?null:n.initialState;return e.prototype.call.call(i,t,{mask:a,training:o,initialState:u})}))},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:Qn(this.activation),recurrentActivation:Qn(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Ge(this.kernelInitializer),recurrentInitializer:Ge(this.recurrentInitializer),biasInitializer:Ge(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:or(this.kernelRegularizer),recurrentRegularizer:or(this.recurrentRegularizer),biasRegularizer:or(this.biasRegularizer),activityRegularizer:or(this.activityRegularizer),kernelConstraint:B(this.kernelConstraint),recurrentConstraint:B(this.recurrentConstraint),biasConstraint:B(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="LSTM",t}(ki);r.we.registerClass(Ti);var Ni=function(e){function t(t){var n=e.call(this,t)||this;return n.cells=t.cells,n}return a(t,e),Object.defineProperty(t.prototype,"stateSize",{get:function(){for(var e=[],t=0,n=this.cells.slice().reverse();t<n.length;t++){var r=n[t];Array.isArray(r.stateSize)?e.push.apply(e,r.stateSize):e.push(r.stateSize)}return e},enumerable:!0,configurable:!0}),t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){for(var r=(e=e).slice(1),i=[],a=0,o=n.cells.slice().reverse();a<o.length;a++){var u=o[a];Array.isArray(u.stateSize)?i.push(r.splice(0,u.stateSize.length)):i.push(r.splice(0,1))}i.reverse();for(var s,c=[],l=0;l<n.cells.length;++l)u=n.cells[l],r=i[l],s=0===l?[e[0]].concat(r):[s[0]].concat(r),s=u.call(s,t),c.push(s.slice(1));r=[];for(var f=0,d=c.slice().reverse();f<d.length;f++){var p=d[f];r.push.apply(r,p)}return[s[0]].concat(r)}))},t.prototype.build=function(e){var t;Qe(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){Q("RNNCell_"+r,(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0},t.prototype.getConfig=function(){for(var t=[],n=0,r=this.cells;n<r.length;n++){var i=r[n];t.push({className:i.getClassName(),config:i.getConfig()})}var a={cells:t},o=e.prototype.getConfig.call(this);return Object.assign(a,o),a},t.fromConfig=function(e,t,n){void 0===n&&(n={});for(var r=[],i=0,a=t.cells;i<a.length;i++){var o=a[i];r.push(_t(o,n))}return new e({cells:r})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,o=this.cells;a<o.length;a++)r=o[a],i.push.apply(i,r.trainableWeights);return i.concat(e)}return e},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.weights)}return at(e)},t.prototype.setWeights=function(e){for(var t=[],n=0,r=this.cells;n<r.length;n++)for(var i=r[n],a=i.weights.length,o=e.splice(a),u=0;u<i.weights.length;++u)t.push([i.weights[u],o[u]]);ot(t)},t.className="StackedRNNCells",t}(Ei);function Ri(e,t,n,i){function a(){return Ee(e(),t)}if(void 0===n&&(n=null),void 0===i&&(i=1),i>1){for(var o=[],u=0;u<i;u++)o.push(Se(a,e,n));return o.map((function(e){return Object(r.Kc)(e.clone())}))}return Object(r.Kc)(Se(a,e,n).clone())}r.we.registerClass(Ni);var Di=function(e){function t(t){var n=e.call(this,t)||this;return n.layer=t.layer,n}return a(t,e),t.prototype.build=function(e){this.built=!0},Object.defineProperty(t.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.layer.getWeights()},t.prototype.setWeights=function(e){this.layer.setWeights(e)},t.prototype.getConfig=function(){var t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.prototype.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)},t.fromConfig=function(e,t,n){void 0===n&&(n={});var r=_t(t.layer,n);delete t.layer;var i={layer:r};return Object.assign(i,t),new e(i)},t}(dt),Ii=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n}return a(t,e),t.prototype.build=function(t){if((t=nt(t)).length<3)throw new p("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];var n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),e.prototype.build.call(this,t)},t.prototype.computeOutputShape=function(e){var t=[(e=nt(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){return Oi((function(e,r){return[tt(n.layer.call(e,t)),[]]}),e=tt(e),[],!1,null,null,!1,!0)[1]}))},t.className="TimeDistributed",t}(Di);r.we.registerClass(Ii);var Mi=function(e){function t(t){var n=e.call(this,t)||this,r=t.layer.getConfig(),i={};i.className=t.layer.getClassName(),i.config=r,n.forwardLayer=_t(i),r.goBackwards=!0!==r.goBackwards;var a={};if(a.className=t.layer.getClassName(),a.config=r,n.backwardLayer=_t(a),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,n.mergeMode=void 0===t.mergeMode?"concat":t.mergeMode,function(e){A($,"BidirectionalMergeMode",e)}(n.mergeMode),t.weights)throw new h("weights support is not implemented for Bidirectional layer yet.");return n._stateful=t.layer.stateful,n.returnSequences=t.layer.returnSequences,n.returnState=t.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=t.layer.inputSpec,n.numConstants=null,n}return a(t,e),Object.defineProperty(t.prototype,"trainable",{get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},t.prototype.setWeights=function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))},t.prototype.computeOutputShape=function(e){var t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),t=i[0]):t=i[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):b(n)},t.prototype.apply=function(t,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=wi(t,r,i,this.numConstants);if(t=a.inputs,r=a.initialState,i=a.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(null==r||0===r.length)&&null==i)return e.prototype.apply.call(this,t,n);var o=[],u=[];if(null!=r){var s=r.length;if(s%2>0)throw new p("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push.apply(o,r);var c=r.map((function(e){return new ut({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,s/2),this.backwardLayer.stateSpec=c.slice(s/2),u.push.apply(u,c)}if(null!=i)throw new h("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof st,f=0,d=o;f<d.length;f++)if(d[f]instanceof st!==l)throw new p("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){var m=[t].concat(o),v=this.inputSpec.concat(u),g=this.inputSpec;this.inputSpec=v;var y=e.prototype.apply.call(this,m,n);return this.inputSpec=g,y}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return Object(r.pf)((function(){var i,a,o,u,s=t.initialState;if(null==s)i=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var c=s.slice(0,s.length/2),l=s.slice(s.length/2);i=n.forwardLayer.call(e,Object.assign(t,{initialState:c})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),n.returnSequences&&(a=Object(r.je)(a,1)),"concat"===n.mergeMode?u=me([i,a]):"sum"===n.mergeMode?u=Object(r.J)(i,a):"ave"===n.mergeMode?u=Object(r.ud)(.5,Object(r.J)(i,a)):"mul"===n.mergeMode?u=Object(r.ud)(i,a):null==n.mergeMode&&(u=[i,a]),n.returnState?null==n.mergeMode?u.concat(o):[u].concat(o):u}))},t.prototype.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},t.prototype.build=function(e){var t=this;Q(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Q(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0},t.prototype.computeMask=function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)},t.prototype.getConfig=function(){var t={mergeMode:this.mergeMode},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t){var n=_t(t.layer);if(delete t.layer,null!=t.numConstants)throw new h("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)},t.className="Bidirectional",t}(Di);function Fi(e){return new si(e)}function Pi(e){return new fi(e)}function zi(e){return new hi(e)}function Li(e){return new gi(e)}function Bi(e){return new xi(e)}function Wi(e){return new ui(e)}function Ui(e){return new li(e)}r.we.registerClass(Mi);var Vi=Li,Hi=Bi,qi=Wi,Gi=Ui;var $i=Object.freeze({inputLayer:function(e){return new mt(e)},elu:function(e){return new dr(e)},reLU:function(e){return new cr(e)},leakyReLU:function(e){return new lr(e)},prelu:function(e){return new fr(e)},softmax:function(e){return new hr(e)},thresholdedReLU:function(e){return new pr(e)},conv1d:function(e){return new _r(e)},conv2d:function(e){return new kr(e)},conv2dTranspose:function(e){return new Sr(e)},conv3d:function(e){return new Er(e)},separableConv2d:function(e){return new Cr(e)},cropping2D:function(e){return new jr(e)},upSampling2d:function(e){return new Ar(e)},depthwiseConv2d:function(e){return new Tr(e)},activation:function(e){return new Mr(e)},dense:function(e){return new Dr(e)},dropout:function(e){return new Nr(e)},spatialDropout1d:function(e){return new Rr(e)},flatten:function(e){return new Ir(e)},repeatVector:function(e){return new Fr(e)},reshape:function(e){return new Pr(e)},permute:function(e){return new zr(e)},embedding:function(e){return new Br(e)},add:function(e){return new Ur(e)},average:function(e){return new Hr(e)},concatenate:function(e){return new $r(e)},maximum:function(e){return new qr(e)},minimum:function(e){return new Gr(e)},multiply:function(e){return new Vr(e)},dot:function(e){return new Xr(e)},batchNormalization:function(e){return new ti(e)},layerNormalization:function(e){return new ni(e)},zeroPadding2d:function(e){return new ri(e)},averagePooling1d:Fi,avgPool1d:function(e){return Fi(e)},avgPooling1d:function(e){return Fi(e)},averagePooling2d:Pi,avgPool2d:function(e){return Pi(e)},avgPooling2d:function(e){return Pi(e)},averagePooling3d:zi,avgPool3d:function(e){return zi(e)},avgPooling3d:function(e){return zi(e)},globalAveragePooling1d:function(e){return new vi(e)},globalAveragePooling2d:function(e){return new bi(e)},globalMaxPooling1d:Li,globalMaxPooling2d:Bi,maxPooling1d:Wi,maxPooling2d:Ui,maxPooling3d:function(e){return new pi(e)},gru:function(e){return new ji(e)},gruCell:function(e){return new _i(e)},lstm:function(e){return new Ti(e)},lstmCell:function(e){return new Ai(e)},simpleRNN:function(e){return new Ci(e)},simpleRNNCell:function(e){return new Si(e)},rnn:function(e){return new ki(e)},stackedRNNCells:function(e){return new Ni(e)},bidirectional:function(e){return new Mi(e)},timeDistributed:function(e){return new Ii(e)},globalMaxPool1d:Vi,globalMaxPool2d:Hi,maxPool1d:qi,maxPool2d:Gi,Layer:dt,RNN:ki,RNNCell:Ei,input:zn,gaussianNoise:function(e){return new Yr(e)},gaussianDropout:function(e){return new Jr(e)},alphaDropout:function(e){return new Zr(e)},masking:function(e){return new Lr(e)}});var Ki=Object.freeze({binaryAccuracy:function(e,t){return zt(e,t)},binaryCrossentropy:function(e,t){return Vt(e,t)},sparseCategoricalAccuracy:function(e,t){return Ht(e,t)},categoricalAccuracy:function(e,t){return Lt(e,t)},categoricalCrossentropy:function(e,t){return qt(e,t)},precision:function(e,t){return Wt(e,t)},recall:function(e,t){return Ut(e,t)},cosineProximity:function(e,t){return Mt(e,t)},meanAbsoluteError:function(e,t){return Tt(e,t)},meanAbsolutePercentageError:function(e,t){return Nt(e,t)},MAPE:function(e,t){return Nt(e,t)},mape:function(e,t){return Nt(e,t)},meanSquaredError:function(e,t){return At(e,t)},MSE:function(e,t){return At(e,t)},mse:function(e,t){return At(e,t)}}),Xi=Object.freeze({modelFromJSON:function(e,t){return s(this,void 0,void 0,(function(){var n,i,a,o,u,s,l,f;return c(this,(function(c){switch(c.label){case 0:return"modelTopology"in e||(e={modelTopology:e}),null!=(n=(e=e).modelTopology).model_config&&(n=n.model_config),i=tn(n),a=_t(i,t),null==e.weightsManifest?[3,2]:[4,r.Fc.loadWeights(e.weightsManifest,e.pathPrefix,a.weights.map((function(e){return e.originalName})))];case 1:for(o=c.sent(),u={},s=0,l=a.weights;s<l.length;s++)f=l[s],u[f.originalName]=o[f.originalName];a.loadWeights(u),Object(r.Lb)(o),c.label=2;case 2:return[2,a]}}))}))}});var Yi=Object.freeze({l1l2:function(e){return new ir(e)},l1:function(e){return function(e){return nr(e),new ir({l1:null!=e?e.l1:null,l2:0})}(e)},l2:function(e){return function(e){return nr(e),new ir({l2:null!=e?e.l2:null,l1:0})}(e)}}),Ji=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return a(t,e),t.prototype.setModel=function(e){if(!(e instanceof Rn))throw new Error("model must be a LayersModel, not some other Container");this.model=e},t}(bt);function Zi(e,t){return e<t}function Qi(e,t){return e>t}var ea=function(e){function t(t){var n=e.call(this)||this;if(null==t&&(t={}),t.restoreBestWeights)throw new h("restoreBestWeights = True is not implemented in EarlyStopping yet.");return n.monitor=t.monitor||"val_loss",n.minDelta=Math.abs(t.minDelta||0),n.patience=t.patience||0,n.verbose=t.verbose||0,n.mode=t.mode||"auto",n.baseline=t.baseline,-1===["auto","min","max"].indexOf(n.mode)&&(console.warn("EarlyStopping mode '"+n.mode+"' is invalid. Falling back to mode 'auto'."),n.mode="auto"),"min"===n.mode?n.monitorFunc=Zi:"max"===n.mode||-1!==n.monitor.indexOf("acc")?n.monitorFunc=Qi:n.monitorFunc=Zi,n.monitorFunc===Zi&&(n.minDelta*=-1),n}return a(t,e),t.prototype.onTrainBegin=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===Zi?1/0:-1/0,[2]}))}))},t.prototype.onEpochEnd=function(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return[4,gt(t)];case 1:return r.sent(),null==(n=this.getMonitorValue(t))||(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0))),[2]}}))}))},t.prototype.onTrainEnd=function(e){return s(this,void 0,void 0,(function(){return c(this,(function(e){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]}))}))},t.prototype.getMonitorValue=function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(e)),t},t}(Ji);var ta={earlyStopping:function(e){return new ea(e)}},na=n(157),ra=n(95),ia={"tfjs-core":r.Ff,"tfjs-data":ra.version_data,"tfjs-layers":nn,"tfjs-converter":na.e,tfjs:"1.7.2"}},,function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(5),i={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o(e){return"".concat(Math.round(e),"ms")}t.a={easing:i,duration:a,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,u=void 0===n?a.standard:n,s=t.easing,c=void 0===s?i.easeInOut:s,l=t.delay,f=void 0===l?0:l;Object(r.a)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof u?u:o(u)," ").concat(c," ").concat("string"===typeof f?f:o(f))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(e){return e.scrollTop};function i(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:i.transitionDelay}}},function(e,t,n){"use strict";var r=n(180),i="object"==typeof self&&self&&self.Object===Object&&self,a=r.a||i||Function("return this")();t.a=a},function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a=function(e,t){}},function(e,t,n){"use strict";n.d(t,"f",(function(){return me})),n.d(t,"c",(function(){return ve})),n.d(t,"e",(function(){return he})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return Y})),n.d(t,"a",(function(){return $}));var r=n(3),i=n(83),a=(n(31),n(61)),o=n(34),u=n(73),s=n(39),c={}.constructor;function l(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(l);if(e.constructor!==c)return e;var t={};for(var n in e)t[n]=l(e[n]);return t}function f(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=l(t),a=r.plugins.onCreateRule(e,i,n);return a||(e[0],null)}var d=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n};function p(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=d(e[r]," ");else n=d(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n}function h(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function m(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,a=void 0===i?0:i,o=t.fallbacks;if(e&&a++,o)if(Array.isArray(o))for(var u=0;u<o.length;u++){var s=o[u];for(var c in s){var l=s[c];null!=l&&(r&&(r+="\n"),r+=""+h(c+": "+p(l)+";",a))}}else for(var f in o){var d=o[f];null!=d&&(r&&(r+="\n"),r+=""+h(f+": "+p(d)+";",a))}for(var m in t){var v=t[m];null!=v&&"fallbacks"!==m&&(r&&(r+="\n"),r+=""+h(m+": "+p(v)+";",a))}return(r||n.allowEmpty)&&e?(r&&(r="\n"+r+"\n"),h(e+" {"+r,--a)+h("}",a)):r}var v=/([[\].#*$><+~=|^:(),"'`\s])/g,g="undefined"!==typeof CSS&&CSS.escape,y=function(e){return g?g(e):e.replace(v,"\\$1")},b=function(){function e(e,t,n){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,o=e in this.style;if(a&&!o&&!r)return this;var u=a&&o;if(u?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var s=this.options.sheet;return s&&s.attached,this},e}(),x=function(e){function t(t,n,r){var i;(i=e.call(this,t,n,r)||this).selectorText=void 0,i.id=void 0,i.renderable=void 0;var a=r.selector,o=r.scoped,s=r.sheet,c=r.generateId;return a?i.selectorText=a:!1!==o&&(i.id=c(Object(u.a)(Object(u.a)(i)),s),i.selectorText="."+y(i.id)),i}Object(o.a)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=p(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return m(this.selectorText,this.style,n)},Object(a.a)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(b),w={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new x(e,t,n)}},O={indent:1,children:!0},k=/@([\w-]+)/,E=function(){function e(e,t,n){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.query=n.name;var i=e.match(k);for(var a in this.at=i?i[1]:"unknown",this.options=n,this.rules=new $(Object(r.a)({},n,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.toString=function(e){if(void 0===e&&(e=O),null==e.indent&&(e.indent=O.indent),null==e.children&&(e.children=O.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {\n"+t+"\n}":""},e}(),S=/@media|@supports\s+/,C={onCreateRule:function(e,t,n){return S.test(e)?new E(e,t,n):null}},_={indent:1,children:!0},j=/@keyframes\s+([\w-]+)/,A=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var i=e.match(j);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var a=n.scoped,o=n.sheet,u=n.generateId;for(var s in this.id=!1===a?this.name:y(u(this,o)),this.rules=new $(Object(r.a)({},n,{parent:this})),t)this.rules.add(s,t[s],Object(r.a)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=_),null==e.indent&&(e.indent=_.indent),null==e.children&&(e.children=_.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),T=/@keyframes\s+/,N=/\$([\w-]+)/g,R=function(e,t){return"string"===typeof e?e.replace(N,(function(e,n){return n in t?t[n]:e})):e},D=function(e,t,n){var r=e[t],i=R(r,n);i!==r&&(e[t]=i)},I={onCreateRule:function(e,t,n){return"string"===typeof e&&T.test(e)?new A(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&D(e,"animation-name",n.keyframes),"animation"in e&&D(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return R(e,r.keyframes);default:return e}}},M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).renderable=void 0,t}return Object(o.a)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return m(this.key,this.style,n)},t}(b),F={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new M(e,t,n):null}},P=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=m(this.at,this.style[n]),this.style[n+1]&&(t+="\n");return t}return m(this.at,this.style,e)},e}(),z=/@font-face/,L={onCreateRule:function(e,t,n){return z.test(e)?new P(e,t,n):null}},B=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return m(this.key,this.style,e)},e}(),W={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new B(e,t,n):null}},U=function(){function e(e,t,n){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),V={"@charset":!0,"@import":!0,"@namespace":!0},H=[w,C,I,F,L,W,{onCreateRule:function(e,t,n){return e in V?new U(e,t,n):null}}],q={process:!0},G={force:!0,process:!0},$=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var i=this.options,a=i.parent,o=i.sheet,u=i.jss,s=i.Renderer,c=i.generateId,l=i.scoped,d=Object(r.a)({classes:this.classes,parent:a,sheet:o,jss:u,Renderer:s,generateId:c,scoped:l,name:e},n),p=e;e in this.raw&&(p=e+"-d"+this.counter++),this.raw[p]=t,p in this.classes&&(d.selector="."+y(this.classes[p]));var h=f(p,t,d);if(!h)return null;this.register(h);var m=void 0===d.index?this.index.length:d.index;return this.index.splice(m,0,h),h},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof x?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof A&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof x?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof A&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.map[e],t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=q);var i=this.options,a=i.jss.plugins,o=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var u=t,s=u.style;if(a.onUpdate(n,t,o,r),r.process&&s&&s!==u.style){for(var c in a.onProcessStyle(u.style,u,o),u.style){var l=u.style[c];l!==s[c]&&u.prop(c,l,G)}for(var f in s){var d=u.style[f],p=s[f];null==d&&d!==p&&u.prop(f,null,G)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var a=this.index[i].toString(e);(a||r)&&(t&&(t+="\n"),t+=a)}return t},e}(),K=function(){function e(e,t){for(var n in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(r.a)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new $(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!!t&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),X=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Y=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Object(s.a)(t,["attached"]),i="",a=0;a<this.registry.length;a++){var o=this.registry[a];null!=n&&o.attached!==n||(i&&(i+="\n"),i+=o.toString(r))}return i},Object(a.a)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),J=new Y,Z="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),Q="2f1acc6c3a606b082e5eef5e54414ffb";null==Z[Q]&&(Z[Q]=0);var ee=Z[Q]++,te=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",a="";return r&&(r.options.classNamePrefix&&(a=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(a||"c")+ee+i+t:a+n.key+"-"+ee+(i?"-"+i:"")+"-"+t}},ne=function(e){var t;return function(){return t||(t=e()),t}};function re(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}}function ie(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=p(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(i){return!1}return!0}function ae(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}}function oe(e,t){return e.selectorText=t,e.selectorText===t}var ue=ne((function(){return document.querySelector("head")}));function se(e){var t=J.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=ue(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var ce=ne((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),le=function(e,t,n){var r=e.cssRules.length;(void 0===n||n>r)&&(n=r);try{if("insertRule"in e)e.insertRule(t,n);else if("appendRule"in e){e.appendRule(t)}}catch(i){return!1}return e.cssRules[n]},fe=function(){function e(e){this.getPropertyValue=re,this.setProperty=ie,this.removeProperty=ae,this.setSelector=oe,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,e&&J.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=ce();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=se(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else ue().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){var e=this.element.parentNode;e&&e.removeChild(this.element)},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;return("conditional"!==e.type&&"keyframes"!==e.type||!1!==(i=le(n,r.toString({children:!1}),t)))&&(this.insertRules(r.rules,i),i)}if(e.renderable&&e.renderable.parentStyleSheet===this.element.sheet)return e.renderable;var a=e.toString();if(!a)return!1;var o=le(n,a,t);return!1!==o&&(this.hasInsertedRules=!0,e.renderable=o,o)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),!0)},t.indexOf=function(e){for(var t=this.element.sheet.cssRules,n=0;n<t.length;n++)if(e===t[n])return n;return-1},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),de=0,pe=function(){function e(e){this.id=de++,this.version="10.1.1",this.plugins=new X,this.options={id:{minify:!1},createGenerateId:te,Renderer:i.a?fe:null,plugins:[]},this.generateId=te({minify:!1});for(var t=0;t<H.length;t++)this.plugins.use(H[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Object(r.a)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===J.index?0:J.index+1);var i=new K(e,Object(r.a)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(i),i},t.removeStyleSheet=function(e){return e.detach(),J.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var i=Object(r.a)({},n,{name:e,jss:this,Renderer:this.options.Renderer});i.generateId||(i.generateId=this.generateId),i.classes||(i.classes={}),i.keyframes||(i.keyframes={});var a=f(e,t,i);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}();function he(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var a=he(r);a&&(t||(t={}),t[n]=a)}}return t}var me="undefined"!==typeof CSS&&CSS&&"number"in CSS,ve=function(e){return new pe(e)};ve()},function(e,t,n){"use strict";n.r(t);var r=n(170);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";n.r(t);var r=n(85);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=this,u=function(){e.apply(o,i)};clearTimeout(t),t=setTimeout(u,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),i=n(62);function a(){return r.useContext(i.a)}},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e){var t=e.controlled,n=e.default,i=(e.name,e.state,r.useRef(void 0!==t).current),a=r.useState(n),o=a[0],u=a[1];return[i?t:o,r.useCallback((function(e){i||u(e)}),[])]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(166);var i=n(97),a=n(167);function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}(e,t)||Object(i.a)(e,t)||Object(a.a)()}},,function(e,t,n){"use strict";var r=n(46),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),m=s(n),v=0;v<o.length;++v){var g=o[v];if(!a[g]&&(!r||!r[g])&&(!m||!m[g])&&(!u||!u[g])){var y=d(n,g);try{c(t,g,y)}catch(b){}}}}return t}},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a=function(e,t){if(!e)throw new Error("Invariant failed")}},function(e,t,n){"use strict";e.exports=n(353)},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},function(e,t,n){"use strict";function r(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(0),i=r.createContext({});t.a=i},function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return g}));var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(182),s=n(446),c=n(7),l=n(444),f=n(170),d=n(12),p=n(26),h=n(19),m={left:"right",right:"left",top:"down",bottom:"up"};function v(e){return-1!==["left","right"].indexOf(e)}function g(e,t){return"rtl"===e.direction&&v(t)?m[t]:t}var y={enter:p.b.enteringScreen,exit:p.b.leavingScreen},b=a.forwardRef((function(e,t){var n=e.anchor,c=void 0===n?"left":n,p=e.BackdropProps,v=e.children,b=e.classes,x=e.className,w=e.elevation,O=void 0===w?16:w,k=e.ModalProps,E=(k=void 0===k?{}:k).BackdropProps,S=Object(i.a)(k,["BackdropProps"]),C=e.onClose,_=e.open,j=void 0!==_&&_,A=e.PaperProps,T=void 0===A?{}:A,N=e.SlideProps,R=e.transitionDuration,D=void 0===R?y:R,I=e.variant,M=void 0===I?"temporary":I,F=Object(i.a)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","transitionDuration","variant"]),P=Object(h.a)(),z=a.useRef(!1);a.useEffect((function(){z.current=!0}),[]);var L=g(P,c),B=a.createElement(f.a,Object(r.a)({elevation:"temporary"===M?O:0,square:!0},T,{className:Object(o.a)(b.paper,b["paperAnchor".concat(Object(d.a)(L))],T.className,"temporary"!==M&&b["paperAnchorDocked".concat(Object(d.a)(L))])}),v);if("permanent"===M)return a.createElement("div",Object(r.a)({className:Object(o.a)(b.root,b.docked,x),ref:t},F),B);var W=a.createElement(l.a,Object(r.a)({in:j,direction:m[L],timeout:D,appear:z.current},N),B);return"persistent"===M?a.createElement("div",Object(r.a)({className:Object(o.a)(b.root,b.docked,x),ref:t},F),W):a.createElement(u.a,Object(r.a)({BackdropProps:Object(r.a)({},p,{},E,{transitionDuration:D}),BackdropComponent:s.a,className:Object(o.a)(b.root,b.modal,x),open:j,onClose:C,ref:t},F,S),W)}));t.a=Object(c.a)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return C})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return h}));var r=n(3);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],u=e&&i(e),s=t&&i(t),c=u||s;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,d=o.length;d>=0;d--){var p=o[d];"."===p?a(o,d):".."===p?(a(o,d),f++):f&&(a(o,d),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var h=o.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var s=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=u(t),i=u(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(45);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function d(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function p(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function h(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function m(e,t,n,i){var a;"string"===typeof e?(a=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(a=Object(r.a)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(u){throw u instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):u}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&s(e.state,t.state)}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var y=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}function x(){try{return window.history.state||{}}catch(e){return{}}}function w(e){void 0===e&&(e={}),y||Object(c.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,u=void 0!==o&&o,s=a.getUserConfirmation,f=void 0===s?b:s,v=a.keyLength,w=void 0===v?6:v,O=e.basename?p(l(e.basename)):"";function k(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return O&&(a=d(a,O)),m(a,r,n)}function E(){return Math.random().toString(36).substr(2,w)}var S=g();function C(e){Object(r.a)(z,e),z.length=t.length,S.notifyListeners(z.location,z.action)}function _(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||T(k(e.state))}function j(){T(k(x()))}var A=!1;function T(e){if(A)A=!1,C();else{S.confirmTransitionTo(e,"POP",f,(function(t){t?C({action:"POP",location:e}):function(e){var t=z.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(A=!0,I(i))}(e)}))}}var N=k(x()),R=[N.key];function D(e){return O+h(e)}function I(e){t.go(e)}var M=0;function F(e){1===(M+=e)&&1===e?(window.addEventListener("popstate",_),i&&window.addEventListener("hashchange",j)):0===M&&(window.removeEventListener("popstate",_),i&&window.removeEventListener("hashchange",j))}var P=!1;var z={length:t.length,action:"POP",location:N,createHref:D,push:function(e,r){var i=m(e,r,E(),z.location);S.confirmTransitionTo(i,"PUSH",f,(function(e){if(e){var r=D(i),a=i.key,o=i.state;if(n)if(t.pushState({key:a,state:o},null,r),u)window.location.href=r;else{var s=R.indexOf(z.location.key),c=R.slice(0,s+1);c.push(i.key),R=c,C({action:"PUSH",location:i})}else window.location.href=r}}))},replace:function(e,r){var i=m(e,r,E(),z.location);S.confirmTransitionTo(i,"REPLACE",f,(function(e){if(e){var r=D(i),a=i.key,o=i.state;if(n)if(t.replaceState({key:a,state:o},null,r),u)window.location.replace(r);else{var s=R.indexOf(z.location.key);-1!==s&&(R[s]=i.key),C({action:"REPLACE",location:i})}else window.location.replace(r)}}))},go:I,goBack:function(){I(-1)},goForward:function(){I(1)},block:function(e){void 0===e&&(e=!1);var t=S.setPrompt(e);return P||(F(1),P=!0),function(){return P&&(P=!1,F(-1)),t()}},listen:function(e){var t=S.appendListener(e);return F(1),function(){F(-1),t()}}};return z}var O={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function k(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function E(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function S(e){window.location.replace(k(window.location.href)+"#"+e)}function C(e){void 0===e&&(e={}),y||Object(c.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?b:i,o=n.hashType,u=void 0===o?"slash":o,s=e.basename?p(l(e.basename)):"",f=O[u],v=f.encodePath,x=f.decodePath;function w(){var e=x(E());return s&&(e=d(e,s)),m(e)}var C=g();function _(e){Object(r.a)(L,e),L.length=t.length,C.notifyListeners(L.location,L.action)}var j=!1,A=null;function T(){var e,t,n=E(),r=v(n);if(n!==r)S(r);else{var i=w(),o=L.location;if(!j&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(A===h(i))return;A=null,function(e){if(j)j=!1,_();else{C.confirmTransitionTo(e,"POP",a,(function(t){t?_({action:"POP",location:e}):function(e){var t=L.location,n=I.lastIndexOf(h(t));-1===n&&(n=0);var r=I.lastIndexOf(h(e));-1===r&&(r=0);var i=n-r;i&&(j=!0,M(i))}(e)}))}}(i)}}var N=E(),R=v(N);N!==R&&S(R);var D=w(),I=[h(D)];function M(e){t.go(e)}var F=0;function P(e){1===(F+=e)&&1===e?window.addEventListener("hashchange",T):0===F&&window.removeEventListener("hashchange",T)}var z=!1;var L={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=k(window.location.href)),n+"#"+v(s+h(e))},push:function(e,t){var n=m(e,void 0,void 0,L.location);C.confirmTransitionTo(n,"PUSH",a,(function(e){if(e){var t=h(n),r=v(s+t);if(E()!==r){A=t,function(e){window.location.hash=e}(r);var i=I.lastIndexOf(h(L.location)),a=I.slice(0,i+1);a.push(t),I=a,_({action:"PUSH",location:n})}else _()}}))},replace:function(e,t){var n=m(e,void 0,void 0,L.location);C.confirmTransitionTo(n,"REPLACE",a,(function(e){if(e){var t=h(n),r=v(s+t);E()!==r&&(A=t,S(r));var i=I.indexOf(h(L.location));-1!==i&&(I[i]=t),_({action:"REPLACE",location:n})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return z||(P(1),z=!0),function(){return z&&(z=!1,P(-1)),t()}},listen:function(e){var t=C.appendListener(e);return P(1),function(){P(-1),t()}}};return L}function _(e,t,n){return Math.min(Math.max(e,t),n)}function j(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,o=t.initialIndex,u=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=g();function f(e){Object(r.a)(x,e),x.length=x.entries.length,l.notifyListeners(x.location,x.action)}function d(){return Math.random().toString(36).substr(2,c)}var p=_(u,0,a.length-1),v=a.map((function(e){return m(e,void 0,"string"===typeof e?d():e.key||d())})),y=h;function b(e){var t=_(x.index+e,0,x.entries.length-1),r=x.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var x={length:v.length,action:"POP",location:v[p],index:p,entries:v,createHref:y,push:function(e,t){var r=m(e,t,d(),x.location);l.confirmTransitionTo(r,"PUSH",n,(function(e){if(e){var t=x.index+1,n=x.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),f({action:"PUSH",location:r,index:t,entries:n})}}))},replace:function(e,t){var r=m(e,t,d(),x.location);l.confirmTransitionTo(r,"REPLACE",n,(function(e){e&&(x.entries[x.index]=r,f({action:"REPLACE",location:r}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=x.index+e;return t>=0&&t<x.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return x}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(11),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var a=n(288),o=n(289);t.getDrawArea=function(e){if(e instanceof HTMLElement)return e;if(a.isSurface(e))return e.drawArea;if(a.isSurfaceInfo(e))return o.visor().surface({name:e.name,tab:e.tab,styles:e.styles}).drawArea;throw new Error("Not a drawable")},t.shallowEquals=function(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(e[a]!==t[a])return!1}return!0},t.nextFrame=function(){return i(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return requestAnimationFrame(e)}));case 2:case"end":return e.stop()}}),e)})))}},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=a.default.memo(a.default.forwardRef((function(t,n){return a.default.createElement(o.default,(0,i.default)({ref:n},t),e)})));0;return n.muiName=o.default.muiName,n};var i=r(n(426)),a=r(n(0)),o=r(n(90))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n(3),i=n(5),a=["xs","sm","md","lg","xl"];function o(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,o=e.unit,u=void 0===o?"px":o,s=e.step,c=void 0===s?5:s,l=Object(i.a)(e,["values","unit","step"]);function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(u,")")}function d(e,t){var r=a.indexOf(t);return r===a.length-1?f(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(u,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[a[r+1]]?n[a[r+1]]:t)-c/100).concat(u,")")}return Object(r.a)({keys:a,values:n,up:f,down:function(e){var t=a.indexOf(e)+1,r=n[a[t]];return t===a.length?f("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-c/100).concat(u,")")},between:d,only:function(e){return d(e,e)},width:function(e){return n[e]}},l)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0),i=n(20),a=!0,o=!1,u=null,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function l(){a=!1}function f(){"hidden"===this.visibilityState&&o&&(a=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||("TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable)}(t)}function p(){o=!0,window.clearTimeout(u),u=window.setTimeout((function(){o=!1}),100)}function h(){return{isFocusVisible:d,onBlurVisible:p,ref:r.useCallback((function(e){var t,n=i.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("touchstart",l,!0),t.addEventListener("visibilitychange",f,!0))}),[])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(27);function i(e){return Object(r.a)(e).defaultView||window}},function(e,t,n){"use strict";var r=n(158),i=Object(r.a)();t.a=i},function(e,t,n){"use strict";var r=n(0),i=r.createContext();t.a=i},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r=n(0),i=r.createContext();function a(){return r.useContext(i)}t.a=i},function(e,t,n){"use strict";n.r(t),n.d(t,"hexToRgb",(function(){return r.g})),n.d(t,"rgbToHex",(function(){return r.k})),n.d(t,"hslToRgb",(function(){return r.h})),n.d(t,"decomposeColor",(function(){return r.b})),n.d(t,"recomposeColor",(function(){return r.j})),n.d(t,"getContrastRatio",(function(){return r.e})),n.d(t,"getLuminance",(function(){return r.f})),n.d(t,"emphasize",(function(){return r.c})),n.d(t,"fade",(function(){return r.d})),n.d(t,"darken",(function(){return r.a})),n.d(t,"lighten",(function(){return r.i})),n.d(t,"createMuiTheme",(function(){return i.a})),n.d(t,"createStyles",(function(){return a})),n.d(t,"makeStyles",(function(){return o.a})),n.d(t,"responsiveFontSizes",(function(){return m})),n.d(t,"styled",(function(){return v.a})),n.d(t,"easing",(function(){return g.c})),n.d(t,"duration",(function(){return g.b})),n.d(t,"useTheme",(function(){return y.a})),n.d(t,"withStyles",(function(){return b.a})),n.d(t,"withTheme",(function(){return _})),n.d(t,"createGenerateClassName",(function(){return j.a})),n.d(t,"jssPreset",(function(){return A.a})),n.d(t,"ServerStyleSheets",(function(){return I})),n.d(t,"StylesProvider",(function(){return D.b})),n.d(t,"MuiThemeProvider",(function(){return M.a})),n.d(t,"ThemeProvider",(function(){return M.a}));var r=n(13),i=n(158);function a(e){return e}var o=n(282),u=n(3),s=n(15);function c(e){return String(parseFloat(e)).length===String(e).length}function l(e){return parseFloat(e)}function f(e){return function(t,n){var r=String(t).match(/[\d.\-+]*\s*(.*)/)[1]||"";if(r===n)return t;var i=l(t);if("px"!==r)if("em"===r)i=l(t)*l(e);else if("rem"===r)return i=l(t)*l(e),t;var a=i;if("px"!==n)if("em"===n)a=i/l(e);else{if("rem"!==n)return t;a=i/l(e)}return parseFloat(a.toFixed(5))+n}}function d(e){var t=e.size,n=e.grid,r=t-t%n,i=r+n;return t-r<i-t?r:i}function p(e){var t=e.lineHeight;return e.pixels/(t*e.htmlFontSize)}function h(e){var t=e.cssProperty,n=e.min,r=e.max,i=e.unit,a=void 0===i?"rem":i,o=e.breakpoints,u=void 0===o?[600,960,1280]:o,c=e.transform,l=void 0===c?null:c,f=Object(s.a)({},t,"".concat(n).concat(a)),d=(r-n)/u[u.length-1];return u.forEach((function(e){var r=n+d*e;null!==l&&(r=l(r)),f["@media (min-width:".concat(e,"px)")]=Object(s.a)({},t,"".concat(Math.round(1e4*r)/1e4).concat(a))})),f}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.breakpoints,r=void 0===n?["sm","md","lg"]:n,i=t.disableAlign,a=void 0!==i&&i,o=t.factor,s=void 0===o?2:o,l=t.variants,m=void 0===l?["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]:l,v=Object(u.a)({},e);v.typography=Object(u.a)({},v.typography);var g=v.typography,y=f(g.htmlFontSize),b=r.map((function(e){return v.breakpoints.values[e]}));return m.forEach((function(e){var t=g[e],n=parseFloat(y(t.fontSize,"rem"));if(!(n<=1)){var r=n,i=1+(r-1)/s,o=t.lineHeight;if(!c(o)&&!a)throw new Error(["Material-UI: unsupported non-unitless line height with grid alignment.","Use unitless line heights instead."].join("\n"));c(o)||(o=parseFloat(y(o,"rem"))/parseFloat(n));var l=null;a||(l=function(e){return d({size:e,grid:p({pixels:4,lineHeight:o,htmlFontSize:g.htmlFontSize})})}),g[e]=Object(u.a)({},t,{},h({cssProperty:"fontSize",min:i,max:r,unit:"rem",breakpoints:b,transform:l}))}})),v}var v=n(159),g=n(26),y=n(19),b=n(7),x=n(5),w=n(0),O=n.n(w),k=(n(8),n(43)),E=n.n(k),S=n(184);function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=function(e){var n=O.a.forwardRef((function(n,r){var i=n.innerRef,a=Object(x.a)(n,["innerRef"]),o=Object(S.a)()||t;return O.a.createElement(e,Object(u.a)({theme:o,ref:i||r},a))}));return E()(n,e),n};return n}C();var _=C({defaultTheme:n(59).a}),j=n(440),A=n(334),T=n(105),N=n(61),R=n(32),D=n(467),I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(T.a)(this,e),this.options=t}return Object(N.a)(e,[{key:"collect",value:function(e){var t=new Map;this.sheetsRegistry=new R.b;var n=Object(j.a)();return O.a.createElement(D.b,Object(u.a)({sheetsManager:t,serverGenerateClassName:n,sheetsRegistry:this.sheetsRegistry},this.options),e)}},{key:"toString",value:function(){return this.sheetsRegistry?this.sheetsRegistry.toString():""}},{key:"getStyleElement",value:function(e){return O.a.createElement("style",Object(u.a)({id:"jss-server-side",key:"jss-server-side",dangerouslySetInnerHTML:{__html:this.toString()}},e))}}]),e}(),M=n(471)},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){var r=n(180),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.a.process,u=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();t.a=u}).call(this,n(215)(e))},function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty,o="undefined"!==typeof Element;e.exports=function(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var u,s,c,l=r(t),f=r(n);if(l&&f){if((s=t.length)!=n.length)return!1;for(u=s;0!==u--;)if(!e(t[u],n[u]))return!1;return!0}if(l!=f)return!1;var d=t instanceof Date,p=n instanceof Date;if(d!=p)return!1;if(d&&p)return t.getTime()==n.getTime();var h=t instanceof RegExp,m=n instanceof RegExp;if(h!=m)return!1;if(h&&m)return t.toString()==n.toString();var v=i(t);if((s=v.length)!==i(n).length)return!1;for(u=s;0!==u--;)if(!a.call(n,v[u]))return!1;if(o&&t instanceof Element&&n instanceof Element)return t===n;for(u=s;0!==u--;)if(("_owner"!==(c=v[u])||!t.$$typeof)&&!e(t[c],n[c]))return!1;return!0}return t!==t&&n!==n}(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(117),i=n(54),a={prepend:!1};t.subSurface=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.getDrawArea(e),u=r.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=r.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),c=Object.assign({},a,n),l=o.querySelector("div[data-name=".concat(t,"]"));if(!l){if((l=document.createElement("div")).setAttribute("class","".concat(u)),l.dataset.name=t,c.title){var f=document.createElement("div");f.setAttribute("class","subsurface-title ".concat(s)),f.innerText=c.title,l.appendChild(f)}c.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l},t.getDefaultWidth=function(e){for(var t=0,n=e;n&&0===n.clientWidth;)n=n.parentElement,t=50;return n.clientWidth-t},t.getDefaultHeight=function(e){return 0===e.clientHeight?200:e.clientHeight}},function(e,t,n){"use strict";n.r(t);var r=n(216);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a.a})),n.d(t,"d",(function(){return o.a})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return u.a})),n.d(t,"g",(function(){return s.a})),n.d(t,"h",(function(){return c.a})),n.d(t,"i",(function(){return l.a})),n.d(t,"j",(function(){return f.a})),n.d(t,"l",(function(){return d.a})),n.d(t,"m",(function(){return p.a})),n.d(t,"n",(function(){return h.a})),n.d(t,"o",(function(){return m.a})),n.d(t,"k",(function(){return v.a})),n.d(t,"p",(function(){return g.a}));var r=n(12);function i(e,t){return function(){return null}}var a=n(22),o=n(37),u=n(48),s=n(27),c=n(58),l=n(214),f=n(30),d=n(122),p=n(40),h=n(21),m=n(16),v=n(96),g=n(57)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(128);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";var r=n(331);t.a=function(e,t){return t?Object(r.a)(e,t,{clone:!1}):e}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return F})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return A})),n.d(t,"g",(function(){return z}));var r=n(34),i=n(0),a=n.n(i),o=n(8),u=n.n(o),s=n(52),c=n(222),l=n.n(c),f=n(315),d=n.n(f);function p(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var h=a.a.createContext||function(e,t){var n,r,a="__create-react-context-"+d()()+"__",o=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=p(t.props.value),t}l()(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(r,i):1073741823,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},r.render=function(){return this.props.children},n}(i.Component);o.childContextTypes=((n={})[a]=u.a.object.isRequired,n);var s=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}l()(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return s.contextTypes=((r={})[a]=u.a.object,r),{Provider:o,Consumer:s}},m=n(45),v=n(3),g=n(223),y=n.n(g),b=(n(46),n(39)),x=(n(43),function(e){var t=h();return t.displayName=e,t}("Router")),w=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return a.a.createElement(x.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(a.a.Component);a.a.Component;var O=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(a.a.Component);var k={},E=0;function S(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(k[e])return k[e];var t=y.a.compile(e);return E<1e4&&(k[e]=t,E++),t}(e)(t,{pretty:!0})}function C(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return a.a.createElement(x.Consumer,null,(function(e){e||Object(m.a)(!1);var r=e.history,o=e.staticContext,u=i?r.push:r.replace,c=Object(s.c)(t?"string"===typeof n?S(n,t.params):Object(v.a)({},n,{pathname:S(n.pathname,t.params)}):n);return o?(u(c),null):a.a.createElement(O,{onMount:function(){u(c)},onUpdate:function(e,t){var n=Object(s.c)(t.to);Object(s.f)(n,Object(v.a)({},c,{key:n.key}))||u(c)},to:n})}))}var _={},j=0;function A(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=_[n]||(_[n]={});if(r[e])return r[e];var i=[],a={regexp:y()(e,i,t),keys:i};return j<1e4&&(r[e]=a,j++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),d=e===l;return a&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var T=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(x.Consumer,null,(function(t){t||Object(m.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?A(n.pathname,e.props):t.match,i=Object(v.a)({},t,{location:n,match:r}),o=e.props,u=o.children,s=o.component,c=o.render;return Array.isArray(u)&&0===u.length&&(u=null),a.a.createElement(x.Provider,{value:i},i.match?u?"function"===typeof u?u(i):u:s?a.a.createElement(s,i):c?c(i):null:"function"===typeof u?u(i):null)}))},t}(a.a.Component);function N(e){return"/"===e.charAt(0)?e:"/"+e}function R(e,t){if(!e)return t;var n=N(e);return 0!==t.pathname.indexOf(n)?t:Object(v.a)({},t,{pathname:t.pathname.substr(n.length)})}function D(e){return"string"===typeof e?e:Object(s.e)(e)}function I(e){return function(){Object(m.a)(!1)}}function M(){}a.a.Component;var F=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(x.Consumer,null,(function(t){t||Object(m.a)(!1);var n,r,i=e.props.location||t.location;return a.a.Children.forEach(e.props.children,(function(e){if(null==r&&a.a.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?A(i.pathname,Object(v.a)({},e.props,{path:o})):t.match}})),r?a.a.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(a.a.Component);var P=a.a.useContext;function z(){return P(x).history}},function(e,t,n){"use strict";n.r(t);var r=n(218);n.d(t,"default",(function(){return r.a}));var i=n(38);n.d(t,"useFormControl",(function(){return i.a}))},function(e,t,n){"use strict";n.r(t);var r=n(304);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(177);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(302);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(221);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(176);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";t.a={black:"#000",white:"#fff"}},function(e,t,n){"use strict";function r(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(r(e.value)&&""!==e.value||t&&r(e.defaultValue)&&""!==e.defaultValue)}function a(e){return e.startAdornment}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"===("undefined"===typeof window?"undefined":r(window))&&"object"===("undefined"===typeof document?"undefined":r(document))&&9===document.nodeType;t.a=i},function(e,t,n){"use strict";var r=n(0),i=n.n(r);t.a=i.a.createContext(null)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(12),c={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},l=a.forwardRef((function(e,t){var n=e.align,u=void 0===n?"inherit":n,l=e.classes,f=e.className,d=e.color,p=void 0===d?"initial":d,h=e.component,m=e.display,v=void 0===m?"initial":m,g=e.gutterBottom,y=void 0!==g&&g,b=e.noWrap,x=void 0!==b&&b,w=e.paragraph,O=void 0!==w&&w,k=e.variant,E=void 0===k?"body1":k,S=e.variantMapping,C=void 0===S?c:S,_=Object(i.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),j=h||(O?"p":C[E]||c[E])||"span";return a.createElement(j,Object(r.a)({className:Object(o.a)(l.root,f,"inherit"!==E&&l[E],"initial"!==p&&l["color".concat(Object(s.a)(p))],x&&l.noWrap,y&&l.gutterBottom,O&&l.paragraph,"inherit"!==u&&l["align".concat(Object(s.a)(u))],"initial"!==v&&l["display".concat(Object(s.a)(v))]),ref:t},_))}));t.a=Object(u.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n,r="boolean"===typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},a={key:r,value:e[r]};return n(i,a)}}),a=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==a.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=a.push(t)-1,s=Object.keys(t).sort(i&&i(t));for(o="",n=0;n<s.length;n++){var c=s[n],l=e(t[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return a.splice(u,1),"{"+o+"}"}}(e)}},,function(e,t,n){"use strict";n.r(t);var r=n(310);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(175);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";var r=n(127);n.d(t,"a",(function(){return r.b}))},function(e,t,n){"use strict";n.r(t);var r=n(305);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(307);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"vega",(function(){return d$})),n.d(t,"vegaLite",(function(){return p$})),n.d(t,"guessMode",(function(){return O$})),n.d(t,"default",(function(){return E$}));var r={};n.r(r),n.d(r,"aggregate",(function(){return Wa})),n.d(r,"bin",(function(){return Va})),n.d(r,"collect",(function(){return Ga})),n.d(r,"compare",(function(){return $a})),n.d(r,"countpattern",(function(){return Xa})),n.d(r,"cross",(function(){return Ja})),n.d(r,"density",(function(){return Qa})),n.d(r,"dotbin",(function(){return io})),n.d(r,"expression",(function(){return ao})),n.d(r,"extent",(function(){return uo})),n.d(r,"facet",(function(){return lo})),n.d(r,"field",(function(){return po})),n.d(r,"filter",(function(){return mo})),n.d(r,"flatten",(function(){return vo})),n.d(r,"fold",(function(){return go})),n.d(r,"formula",(function(){return yo})),n.d(r,"generate",(function(){return bo})),n.d(r,"impute",(function(){return Oo})),n.d(r,"joinaggregate",(function(){return ko})),n.d(r,"kde",(function(){return So})),n.d(r,"key",(function(){return Co})),n.d(r,"load",(function(){return jo})),n.d(r,"lookup",(function(){return To})),n.d(r,"multiextent",(function(){return No})),n.d(r,"multivalues",(function(){return Do})),n.d(r,"params",(function(){return Mo})),n.d(r,"pivot",(function(){return Fo})),n.d(r,"prefacet",(function(){return zo})),n.d(r,"project",(function(){return Lo})),n.d(r,"proxy",(function(){return Bo})),n.d(r,"quantile",(function(){return Uo})),n.d(r,"relay",(function(){return Ho})),n.d(r,"sample",(function(){return qo})),n.d(r,"sequence",(function(){return Go})),n.d(r,"sieve",(function(){return $o})),n.d(r,"subflow",(function(){return so})),n.d(r,"timeunit",(function(){return bs})),n.d(r,"tupleindex",(function(){return Os})),n.d(r,"values",(function(){return ks})),n.d(r,"window",(function(){return js}));var i={};n.r(i),n.d(i,"bound",(function(){return Qp})),n.d(i,"identifier",(function(){return th})),n.d(i,"mark",(function(){return nh})),n.d(i,"overlap",(function(){return rh})),n.d(i,"render",(function(){return fh})),n.d(i,"viewlayout",(function(){return Ih}));var a={};n.r(a),n.d(a,"interpolate",(function(){return dv})),n.d(a,"interpolateArray",(function(){return iv})),n.d(a,"interpolateBasis",(function(){return qm})),n.d(a,"interpolateBasisClosed",(function(){return Gm})),n.d(a,"interpolateDate",(function(){return ov})),n.d(a,"interpolateDiscrete",(function(){return fg})),n.d(a,"interpolateHue",(function(){return dg})),n.d(a,"interpolateNumber",(function(){return uv})),n.d(a,"interpolateNumberArray",(function(){return nv})),n.d(a,"interpolateObject",(function(){return sv})),n.d(a,"interpolateRound",(function(){return pv})),n.d(a,"interpolateString",(function(){return fv})),n.d(a,"interpolateTransformCss",(function(){return gg})),n.d(a,"interpolateTransformSvg",(function(){return yg})),n.d(a,"interpolateZoom",(function(){return wg})),n.d(a,"interpolateRgb",(function(){return Zm})),n.d(a,"interpolateRgbBasis",(function(){return ev})),n.d(a,"interpolateRgbBasisClosed",(function(){return tv})),n.d(a,"interpolateHsl",(function(){return kg})),n.d(a,"interpolateHslLong",(function(){return Eg})),n.d(a,"interpolateLab",(function(){return zg})),n.d(a,"interpolateHcl",(function(){return Bg})),n.d(a,"interpolateHclLong",(function(){return Wg})),n.d(a,"interpolateCubehelix",(function(){return Yg})),n.d(a,"interpolateCubehelixLong",(function(){return Jg})),n.d(a,"piecewise",(function(){return $v})),n.d(a,"quantize",(function(){return Zg}));var o={};n.r(o),n.d(o,"axisticks",(function(){return hy})),n.d(o,"datajoin",(function(){return my})),n.d(o,"encode",(function(){return yy})),n.d(o,"legendentries",(function(){return _y})),n.d(o,"linkpath",(function(){return Dy})),n.d(o,"pie",(function(){return zy})),n.d(o,"scale",(function(){return Wy})),n.d(o,"sortitems",(function(){return qy})),n.d(o,"stack",(function(){return $y})),n.d(o,"validTicks",(function(){return fy}));var u={};n.r(u),n.d(u,"contour",(function(){return mb})),n.d(u,"geojson",(function(){return vb})),n.d(u,"geopath",(function(){return RO})),n.d(u,"geopoint",(function(){return DO})),n.d(u,"geoshape",(function(){return IO})),n.d(u,"graticule",(function(){return zO})),n.d(u,"heatmap",(function(){return LO})),n.d(u,"isocontour",(function(){return ib})),n.d(u,"kde2d",(function(){return fb})),n.d(u,"projection",(function(){return WO}));var s={};n.r(s),n.d(s,"force",(function(){return Ik}));var c={};n.r(c),n.d(c,"nest",(function(){return $k})),n.d(c,"pack",(function(){return wE})),n.d(c,"partition",(function(){return CE})),n.d(c,"stratify",(function(){return DE})),n.d(c,"tree",(function(){return qE})),n.d(c,"treelinks",(function(){return $E})),n.d(c,"treemap",(function(){return tS}));var l={};n.r(l),n.d(l,"loess",(function(){return iS})),n.d(l,"regression",(function(){return oS}));var f={};n.r(f),n.d(f,"voronoi",(function(){return DS}));var d={};n.r(d),n.d(d,"wordcloud",(function(){return $S}));var p={};n.r(p),n.d(p,"crossfilter",(function(){return eC})),n.d(p,"resolvefilter",(function(){return nC}));var h={};n.r(h),n.d(h,"version",(function(){return rC.a})),n.d(h,"bandwidthNRD",(function(){return Gi})),n.d(h,"bin",(function(){return $i})),n.d(h,"bootstrapCI",(function(){return Yi})),n.d(h,"dotbin",(function(){return Ji})),n.d(h,"quantiles",(function(){return Vi})),n.d(h,"quartiles",(function(){return Hi})),n.d(h,"random",(function(){return Ki})),n.d(h,"setRandom",(function(){return Xi})),n.d(h,"randomLCG",(function(){return Zi})),n.d(h,"randomInteger",(function(){return Qi})),n.d(h,"randomKDE",(function(){return sa})),n.d(h,"randomLogNormal",(function(){return pa})),n.d(h,"sampleLogNormal",(function(){return ca})),n.d(h,"densityLogNormal",(function(){return la})),n.d(h,"cumulativeLogNormal",(function(){return fa})),n.d(h,"quantileLogNormal",(function(){return da})),n.d(h,"randomMixture",(function(){return ha})),n.d(h,"randomNormal",(function(){return ua})),n.d(h,"sampleNormal",(function(){return ra})),n.d(h,"densityNormal",(function(){return ia})),n.d(h,"cumulativeNormal",(function(){return aa})),n.d(h,"quantileNormal",(function(){return oa})),n.d(h,"randomUniform",(function(){return ba})),n.d(h,"sampleUniform",(function(){return ma})),n.d(h,"densityUniform",(function(){return va})),n.d(h,"cumulativeUniform",(function(){return ga})),n.d(h,"quantileUniform",(function(){return ya})),n.d(h,"regressionLinear",(function(){return Ea})),n.d(h,"regressionLog",(function(){return Sa})),n.d(h,"regressionExp",(function(){return _a})),n.d(h,"regressionPow",(function(){return ja})),n.d(h,"regressionQuad",(function(){return Aa})),n.d(h,"regressionPoly",(function(){return Ta})),n.d(h,"regressionLoess",(function(){return Da})),n.d(h,"sampleCurve",(function(){return Pa})),n.d(h,"timeUnits",(function(){return au})),n.d(h,"timeFloor",(function(){return gu})),n.d(h,"utcFloor",(function(){return Ou})),n.d(h,"timeUnitSpecifier",(function(){return Qu})),n.d(h,"timeFormat",(function(){return es})),n.d(h,"utcFormat",(function(){return ts})),n.d(h,"timeInterval",(function(){return Hu})),n.d(h,"timeOffset",(function(){return $u})),n.d(h,"timeSequence",(function(){return Yu})),n.d(h,"utcInterval",(function(){return qu})),n.d(h,"utcOffset",(function(){return Ku})),n.d(h,"utcSequence",(function(){return Ju})),n.d(h,"timeBin",(function(){return ys})),n.d(h,"accessor",(function(){return Me.f})),n.d(h,"accessorName",(function(){return Me.h})),n.d(h,"accessorFields",(function(){return Me.g})),n.d(h,"id",(function(){return Me.w})),n.d(h,"identity",(function(){return Me.x})),n.d(h,"zero",(function(){return Me.kb})),n.d(h,"one",(function(){return Me.O})),n.d(h,"truthy",(function(){return Me.gb})),n.d(h,"falsy",(function(){return Me.r})),n.d(h,"logger",(function(){return Me.K})),n.d(h,"None",(function(){return Me.d})),n.d(h,"Error",(function(){return Me.b})),n.d(h,"Warn",(function(){return Me.e})),n.d(h,"Info",(function(){return Me.c})),n.d(h,"Debug",(function(){return Me.a})),n.d(h,"mergeConfig",(function(){return Me.N})),n.d(h,"writeConfig",(function(){return Me.jb})),n.d(h,"panLinear",(function(){return Me.Q})),n.d(h,"panLog",(function(){return Me.R})),n.d(h,"panPow",(function(){return Me.S})),n.d(h,"panSymlog",(function(){return Me.T})),n.d(h,"zoomLinear",(function(){return Me.lb})),n.d(h,"zoomLog",(function(){return Me.mb})),n.d(h,"zoomPow",(function(){return Me.nb})),n.d(h,"zoomSymlog",(function(){return Me.ob})),n.d(h,"quarter",(function(){return Me.V})),n.d(h,"utcquarter",(function(){return Me.hb})),n.d(h,"array",(function(){return Me.i})),n.d(h,"clampRange",(function(){return Me.j})),n.d(h,"compare",(function(){return Me.k})),n.d(h,"constant",(function(){return Me.l})),n.d(h,"debounce",(function(){return Me.m})),n.d(h,"error",(function(){return Me.n})),n.d(h,"extend",(function(){return Me.o})),n.d(h,"extent",(function(){return Me.p})),n.d(h,"extentIndex",(function(){return Me.q})),n.d(h,"fastmap",(function(){return Me.s})),n.d(h,"field",(function(){return Me.t})),n.d(h,"flush",(function(){return Me.u})),n.d(h,"hasOwnProperty",(function(){return Me.v})),n.d(h,"inherits",(function(){return Me.y})),n.d(h,"inrange",(function(){return Me.z})),n.d(h,"isArray",(function(){return Me.A})),n.d(h,"isBoolean",(function(){return Me.B})),n.d(h,"isDate",(function(){return Me.C})),n.d(h,"isFunction",(function(){return Me.D})),n.d(h,"isNumber",(function(){return Me.E})),n.d(h,"isObject",(function(){return Me.F})),n.d(h,"isRegExp",(function(){return Me.G})),n.d(h,"isString",(function(){return Me.H})),n.d(h,"key",(function(){return Me.I})),n.d(h,"lerp",(function(){return Me.J})),n.d(h,"lruCache",(function(){return Me.L})),n.d(h,"merge",(function(){return Me.M})),n.d(h,"pad",(function(){return Me.P})),n.d(h,"peek",(function(){return Me.U})),n.d(h,"repeat",(function(){return Me.W})),n.d(h,"span",(function(){return Me.X})),n.d(h,"splitAccessPath",(function(){return Me.Y})),n.d(h,"stringValue",(function(){return Me.Z})),n.d(h,"toBoolean",(function(){return Me.ab})),n.d(h,"toDate",(function(){return Me.bb})),n.d(h,"toNumber",(function(){return Me.cb})),n.d(h,"toString",(function(){return Me.eb})),n.d(h,"toSet",(function(){return Me.db})),n.d(h,"truncate",(function(){return Me.fb})),n.d(h,"visitArray",(function(){return Me.ib})),n.d(h,"loader",(function(){return Kr})),n.d(h,"read",(function(){return $r})),n.d(h,"inferType",(function(){return Ct})),n.d(h,"inferTypes",(function(){return _t})),n.d(h,"typeParsers",(function(){return kt})),n.d(h,"format",(function(){return Yt})),n.d(h,"formats",(function(){return Jt})),n.d(h,"responseType",(function(){return Zt})),n.d(h,"Bounds",(function(){return zs})),n.d(h,"Gradient",(function(){return Hs})),n.d(h,"GroupItem",(function(){return Gs})),n.d(h,"ResourceLoader",(function(){return Xs})),n.d(h,"Item",(function(){return qs})),n.d(h,"Scenegraph",(function(){return Vd})),n.d(h,"Handler",(function(){return Zd})),n.d(h,"Renderer",(function(){return tp})),n.d(h,"CanvasHandler",(function(){return rp})),n.d(h,"CanvasRenderer",(function(){return sp})),n.d(h,"SVGHandler",(function(){return pp})),n.d(h,"SVGRenderer",(function(){return Op})),n.d(h,"SVGStringRenderer",(function(){return Mp})),n.d(h,"RenderType",(function(){return Up})),n.d(h,"renderModule",(function(){return Hp})),n.d(h,"intersect",(function(){return qp})),n.d(h,"Marks",(function(){return Fd})),n.d(h,"boundClip",(function(){return Yp})),n.d(h,"boundContext",(function(){return of})),n.d(h,"boundStroke",(function(){return ef})),n.d(h,"boundItem",(function(){return Pd})),n.d(h,"boundMark",(function(){return Ld})),n.d(h,"pathCurves",(function(){return Gc})),n.d(h,"pathSymbols",(function(){return ll})),n.d(h,"pathRectangle",(function(){return Sl})),n.d(h,"pathTrail",(function(){return Cl})),n.d(h,"pathParse",(function(){return Xc})),n.d(h,"pathRender",(function(){return ol})),n.d(h,"point",(function(){return Jd})),n.d(h,"domCreate",(function(){return Gd})),n.d(h,"domFind",(function(){return $d})),n.d(h,"domChild",(function(){return Kd})),n.d(h,"domClear",(function(){return Xd})),n.d(h,"openTag",(function(){return vp})),n.d(h,"closeTag",(function(){return gp})),n.d(h,"font",(function(){return Td})),n.d(h,"fontFamily",(function(){return Ad})),n.d(h,"fontSize",(function(){return Ed})),n.d(h,"lineHeight",(function(){return Sd})),n.d(h,"multiLineOffset",(function(){return _d})),n.d(h,"textMetrics",(function(){return yd})),n.d(h,"resetSVGClipId",(function(){return Kf})),n.d(h,"sceneEqual",(function(){return Jp})),n.d(h,"pathEqual",(function(){return Zp})),n.d(h,"sceneToJSON",(function(){return Wd})),n.d(h,"sceneFromJSON",(function(){return Ud})),n.d(h,"intersectPath",(function(){return gf})),n.d(h,"intersectPoint",(function(){return yf})),n.d(h,"intersectRule",(function(){return xf})),n.d(h,"intersectBoxLine",(function(){return wf})),n.d(h,"sceneZOrder",(function(){return Tf})),n.d(h,"sceneVisit",(function(){return Nf})),n.d(h,"scenePickVisit",(function(){return Rf})),n.d(h,"Dataflow",(function(){return vi})),n.d(h,"EventStream",(function(){return ut})),n.d(h,"Parameters",(function(){return Qe})),n.d(h,"Pulse",(function(){return ri})),n.d(h,"MultiPulse",(function(){return si})),n.d(h,"Operator",(function(){return rt})),n.d(h,"Transform",(function(){return bi})),n.d(h,"changeset",(function(){return Je})),n.d(h,"ingest",(function(){return qe})),n.d(h,"isTuple",(function(){return Ue})),n.d(h,"definition",(function(){return Oi})),n.d(h,"transform",(function(){return ki})),n.d(h,"transforms",(function(){return wi})),n.d(h,"tupleid",(function(){return Ve})),n.d(h,"scale",(function(){return Zv})),n.d(h,"scheme",(function(){return sy})),n.d(h,"interpolate",(function(){return iy})),n.d(h,"interpolateColors",(function(){return ty})),n.d(h,"interpolateRange",(function(){return ey})),n.d(h,"quantizeInterpolator",(function(){return ny})),n.d(h,"projection",(function(){return jO})),n.d(h,"View",(function(){return KA})),n.d(h,"expressionFunction",(function(){return kA})),n.d(h,"formatLocale",(function(){return cm})),n.d(h,"timeFormatLocale",(function(){return Gr})),n.d(h,"parse",(function(){return aD})),n.d(h,"runtime",(function(){return MA})),n.d(h,"runtimeContext",(function(){return PA}));var m={};n.r(m),n.d(m,"invalidSpec",(function(){return CM})),n.d(m,"FIT_NON_SINGLE",(function(){return _M})),n.d(m,"containerSizeNonSingle",(function(){return jM})),n.d(m,"containerSizeNotCompatibleWithAutosize",(function(){return AM})),n.d(m,"droppingFit",(function(){return TM})),n.d(m,"cannotProjectOnChannelWithoutField",(function(){return NM})),n.d(m,"cannotProjectAggregate",(function(){return RM})),n.d(m,"nearestNotSupportForContinuous",(function(){return DM})),n.d(m,"selectionNotSupported",(function(){return IM})),n.d(m,"selectionNotFound",(function(){return MM})),n.d(m,"SCALE_BINDINGS_CONTINUOUS",(function(){return FM})),n.d(m,"LEGEND_BINDINGS_PROJECT_LENGTH",(function(){return PM})),n.d(m,"noSameUnitLookup",(function(){return zM})),n.d(m,"noSuchRepeatedValue",(function(){return LM})),n.d(m,"columnsNotSupportByRowCol",(function(){return BM})),n.d(m,"CONCAT_CANNOT_SHARE_AXIS",(function(){return WM})),n.d(m,"REPEAT_CANNOT_SHARE_AXIS",(function(){return UM})),n.d(m,"unrecognizedParse",(function(){return VM})),n.d(m,"differentParse",(function(){return HM})),n.d(m,"invalidTransformIgnored",(function(){return qM})),n.d(m,"NO_FIELDS_NEEDS_AS",(function(){return GM})),n.d(m,"encodingOverridden",(function(){return $M})),n.d(m,"projectionOverridden",(function(){return KM})),n.d(m,"primitiveChannelDef",(function(){return XM})),n.d(m,"invalidFieldType",(function(){return YM})),n.d(m,"nonZeroScaleUsedWithLengthMark",(function(){return JM})),n.d(m,"invalidFieldTypeForCountAggregate",(function(){return ZM})),n.d(m,"invalidAggregate",(function(){return QM})),n.d(m,"missingFieldType",(function(){return eF})),n.d(m,"droppingColor",(function(){return tF})),n.d(m,"emptyFieldDef",(function(){return nF})),n.d(m,"latLongDeprecated",(function(){return rF})),n.d(m,"LINE_WITH_VARYING_SIZE",(function(){return iF})),n.d(m,"incompatibleChannel",(function(){return aF})),n.d(m,"invalidEncodingChannel",(function(){return oF})),n.d(m,"facetChannelShouldBeDiscrete",(function(){return uF})),n.d(m,"facetChannelDropped",(function(){return sF})),n.d(m,"discreteChannelCannotEncode",(function(){return cF})),n.d(m,"lineWithRange",(function(){return lF})),n.d(m,"orientOverridden",(function(){return fF})),n.d(m,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return dF})),n.d(m,"RANGE_STEP_DEPRECATED",(function(){return pF})),n.d(m,"cannotUseScalePropertyWithNonColor",(function(){return hF})),n.d(m,"unaggregateDomainHasNoEffectForRawField",(function(){return mF})),n.d(m,"unaggregateDomainWithNonSharedDomainOp",(function(){return vF})),n.d(m,"unaggregatedDomainWithLogScale",(function(){return gF})),n.d(m,"cannotApplySizeToNonOrientedMark",(function(){return yF})),n.d(m,"scaleTypeNotWorkWithChannel",(function(){return bF})),n.d(m,"scaleTypeNotWorkWithFieldDef",(function(){return xF})),n.d(m,"scalePropertyNotWorkWithScaleType",(function(){return wF})),n.d(m,"scaleTypeNotWorkWithMark",(function(){return OF})),n.d(m,"stepDropped",(function(){return kF})),n.d(m,"mergeConflictingProperty",(function(){return EF})),n.d(m,"mergeConflictingDomainProperty",(function(){return SF})),n.d(m,"independentScaleMeansIndependentGuide",(function(){return CF})),n.d(m,"domainSortDropped",(function(){return _F})),n.d(m,"UNABLE_TO_MERGE_DOMAINS",(function(){return jF})),n.d(m,"MORE_THAN_ONE_SORT",(function(){return AF})),n.d(m,"INVALID_CHANNEL_FOR_AXIS",(function(){return TF})),n.d(m,"cannotStackRangedMark",(function(){return NF})),n.d(m,"cannotStackNonLinearScale",(function(){return RF})),n.d(m,"stackNonSummativeAggregate",(function(){return DF})),n.d(m,"invalidTimeUnit",(function(){return IF})),n.d(m,"dayReplacedWithDate",(function(){return MF})),n.d(m,"droppedDay",(function(){return FF})),n.d(m,"errorBarCenterAndExtentAreNotNeeded",(function(){return PF})),n.d(m,"errorBarCenterIsUsedWithWrongExtent",(function(){return zF})),n.d(m,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return LF})),n.d(m,"errorBarCenterIsNotNeeded",(function(){return BF})),n.d(m,"errorBand1DNotSupport",(function(){return WF})),n.d(m,"channelRequiredForBinned",(function(){return UF})),n.d(m,"domainRequiredForThresholdScale",(function(){return VF}));var v={};n.r(v),n.d(v,"symbols",(function(){return VV})),n.d(v,"gradient",(function(){return HV})),n.d(v,"labels",(function(){return qV})),n.d(v,"entries",(function(){return GV})),n.d(v,"getFirstConditionValue",(function(){return KV}));var g={};n.r(g),n.d(g,"compile",(function(){return FG})),n.d(g,"extractTransforms",(function(){return BG})),n.d(g,"normalize",(function(){return LB})),n.d(g,"version",(function(){return WG}));var y={};n.r(y),n.d(y,"dark",(function(){return qG})),n.d(y,"excel",(function(){return GG})),n.d(y,"fivethirtyeight",(function(){return $G})),n.d(y,"ggplot2",(function(){return KG})),n.d(y,"latimes",(function(){return JG})),n.d(y,"quartz",(function(){return ZG})),n.d(y,"vox",(function(){return QG})),n.d(y,"urbaninstitute",(function(){return t$})),n.d(y,"googlecharts",(function(){return n$})),n.d(y,"version",(function(){return r$}));var b=n(11),x=n.n(b);function w(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function O(){}var k=function(e){return null==e?O:function(){return this.querySelector(e)}};function E(){return[]}var S=function(e){return new Array(e.length)};function C(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}C.prototype={constructor:C,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _(e,t,n,r,i,a){for(var o,u=0,s=t.length,c=a.length;u<c;++u)(o=t[u])?(o.__data__=a[u],r[u]=o):n[u]=new C(e,a[u]);for(;u<s;++u)(o=t[u])&&(i[u]=o)}function j(e,t,n,r,i,a,o){var u,s,c,l={},f=t.length,d=a.length,p=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(p[u]=c="$"+o.call(s,s.__data__,u,t),c in l?i[u]=s:l[c]=s);for(u=0;u<d;++u)(s=l[c="$"+o.call(e,a[u],u,a)])?(r[u]=s,s.__data__=a[u],l[c]=null):n[u]=new C(e,a[u]);for(u=0;u<f;++u)(s=t[u])&&l[p[u]]===s&&(i[u]=s)}function A(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var T="http://www.w3.org/1999/xhtml",N={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},R=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),N.hasOwnProperty(t)?{space:N[t],local:e}:e};function D(e){return function(){this.removeAttribute(e)}}function I(e){return function(){this.removeAttributeNS(e.space,e.local)}}function M(e,t){return function(){this.setAttribute(e,t)}}function F(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function P(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function z(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var L=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function B(e){return function(){this.style.removeProperty(e)}}function W(e,t,n){return function(){this.style.setProperty(e,t,n)}}function U(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function V(e,t){return e.style.getPropertyValue(t)||L(e).getComputedStyle(e,null).getPropertyValue(t)}function H(e){return function(){delete this[e]}}function q(e,t){return function(){this[e]=t}}function G(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function $(e){return e.trim().split(/^|\s+/)}function K(e){return e.classList||new X(e)}function X(e){this._node=e,this._names=$(e.getAttribute("class")||"")}function Y(e,t){for(var n=K(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function J(e,t){for(var n=K(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Z(e){return function(){Y(this,e)}}function Q(e){return function(){J(this,e)}}function ee(e,t){return function(){(t.apply(this,arguments)?Y:J)(this,e)}}X.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function te(){this.textContent=""}function ne(e){return function(){this.textContent=e}}function re(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ie(){this.innerHTML=""}function ae(e){return function(){this.innerHTML=e}}function oe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ue(){this.nextSibling&&this.parentNode.appendChild(this)}function se(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ce(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===T&&t.documentElement.namespaceURI===T?t.createElement(e):t.createElementNS(n,e)}}function le(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var fe=function(e){var t=R(e);return(t.local?le:ce)(t)};function de(){return null}function pe(){var e=this.parentNode;e&&e.removeChild(this)}function he(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function me(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}var ve={},ge=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(ve={mouseenter:"mouseover",mouseleave:"mouseout"}));function ye(e,t,n){return e=be(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function be(e,t,n){return function(r){var i=ge;ge=r;try{e.call(this,this.__data__,t,n)}finally{ge=i}}}function xe(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function we(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function Oe(e,t,n){var r=ve.hasOwnProperty(e.type)?ye:be;return function(i,a,o){var u,s=this.__on,c=r(t,a,o);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=t);this.addEventListener(e.type,c,n),u={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function ke(e,t,n){var r=L(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ee(e,t){return function(){return ke(this,e,t)}}function Se(e,t){return function(){return ke(this,e,t.apply(this,arguments))}}var Ce=[null];function _e(e,t){this._groups=e,this._parents=t}function je(){return new _e([[document.documentElement]],Ce)}_e.prototype=je.prototype={constructor:_e,select:function(e){"function"!==typeof e&&(e=k(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,u=t[i],s=u.length,c=r[i]=new Array(s),l=0;l<s;++l)(a=u[l])&&(o=e.call(a,a.__data__,l,u))&&("__data__"in a&&(o.__data__=a.__data__),c[l]=o);return new _e(r,this._parents)},selectAll:function(e){var t;"function"!==typeof e&&(e=null==(t=e)?E:function(){return this.querySelectorAll(t)});for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var u,s=n[o],c=s.length,l=0;l<c;++l)(u=s[l])&&(i.push(e.call(u,u.__data__,l,s)),a.push(u));return new _e(i,a)},filter:function(e){var t;"function"!==typeof e&&(t=e,e=function(){return this.matches(t)});for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a)for(var o,u=n[a],s=u.length,c=i[a]=[],l=0;l<s;++l)(o=u[l])&&e.call(o,o.__data__,l,u)&&c.push(o);return new _e(i,this._parents)},data:function(e,t){if(!e)return h=new Array(this.size()),l=-1,this.each((function(e){h[++l]=e})),h;var n,r=t?j:_,i=this._parents,a=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var o=a.length,u=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var f=i[l],d=a[l],p=d.length,h=e.call(f,f&&f.__data__,l,i),m=h.length,v=s[l]=new Array(m),g=u[l]=new Array(m);r(f,d,v,g,c[l]=new Array(p),h,t);for(var y,b,x=0,w=0;x<m;++x)if(y=v[x]){for(x>=w&&(w=x+1);!(b=g[w])&&++w<m;);y._next=b||null}}return(u=new _e(u,i))._enter=s,u._exit=c,u},enter:function(){return new _e(this._enter||this._groups.map(S),this._parents)},exit:function(){return new _e(this._exit||this._groups.map(S),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s,c=t[u],l=n[u],f=c.length,d=o[u]=new Array(f),p=0;p<f;++p)(s=c[p]||l[p])&&(d[p]=s);for(;u<r;++u)o[u]=t[u];return new _e(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=A);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,u=n[a],s=u.length,c=i[a]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new _e(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,u=a.length;o<u;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=R(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?I:D:"function"===typeof t?n.local?z:P:n.local?F:M)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?B:"function"===typeof t?U:W)(e,t,null==n?"":n)):V(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?H:"function"===typeof t?G:q)(e,t)):this.node()[e]},classed:function(e,t){var n=$(e+"");if(arguments.length<2){for(var r=K(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?ee:t?Z:Q)(n,t))},text:function(e){return arguments.length?this.each(null==e?te:("function"===typeof e?re:ne)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ie:("function"===typeof e?oe:ae)(e)):this.node().innerHTML},raise:function(){return this.each(ue)},lower:function(){return this.each(se)},append:function(e){var t="function"===typeof e?e:fe(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:fe(e),r=null==t?de:"function"===typeof t?t:k(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(pe)},clone:function(e){return this.select(e?me:he)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=xe(e+""),o=a.length;if(!(arguments.length<2)){for(u=t?Oe:we,null==n&&(n=!1),r=0;r<o;++r)this.each(u(a[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?Se:Ee)(e,t))}};var Ae=function(e){return"string"===typeof e?new _e([[document.querySelector(e)]],[document.documentElement]):new _e([[e]],Ce)},Te=n(108),Ne=n.n(Te),Re=n(183),De=n.n(Re),Ie=n(224),Me=n(1);function Fe(e){var t=e||Me.x,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0,(i=n.indexOf(e))>=0&&n.splice(i,1)),n},n}var Pe=n(17),ze=function(e,t){return Le.apply(this,arguments)};function Le(){return(Le=Object(Pe.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var Be=Symbol("vega_id"),We=1;function Ue(e){return!(!e||!Ve(e))}function Ve(e){return e[Be]}function He(e,t){return e[Be]=t,e}function qe(e){var t=e===Object(e)?e:{data:e};return Ve(t)?t:He(t,We++)}function Ge(e){return $e(e,qe({}))}function $e(e,t){for(var n in e)t[n]=e[n];return t}function Ke(e,t){return He(t,Ve(e))}function Xe(e,t){return e?t?function(n,r){return e(n,r)||Ve(t(n))-Ve(t(r))}:function(t,n){return e(t,n)||Ve(t)-Ve(n)}:null}function Ye(e){return e&&e.constructor===Je}function Je(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:Je,insert:function(t){for(var n=Object(Me.i)(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function(e){for(var n=Object(Me.D)(e)?r:t,i=Object(Me.i)(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(e,t,r){var a={field:t,value:Object(Me.l)(r)};return Object(Me.D)(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function(e,t){return Object(Me.D)(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function(){return a=!0,this},pulse:function(o,u){var s,c,l,f,d,p,h={},m={};for(s=0,c=u.length;s<c;++s)h[Ve(u[s])]=1;for(s=0,c=t.length;s<c;++s)h[Ve(d=t[s])]=-1;for(s=0,c=r.length;s<c;++s)f=r[s],u.forEach((function(e){f(e)&&(h[Ve(e)]=-1)}));for(s=0,c=e.length;s<c;++s)p=Ve(d=e[s]),h[p]?h[p]=1:o.add.push(qe(e[s]));for(s=0,c=u.length;s<c;++s)d=u[s],h[Ve(d)]<0&&o.rem.push(d);function v(e,t,n){n?e[t]=n(e):o.encode=t,a||(m[Ve(e)]=e)}for(s=0,c=n.length;s<c;++s)d=(l=n[s]).tuple,f=l.field,(p=h[Ve(d)])>0&&(v(d,f,l.value),o.modifies(f));for(s=0,c=i.length;s<c;++s)l=i[s],f=l.filter,u.forEach((function(e){f(e)&&h[Ve(e)]>0&&v(e,l.field,l.value)})),o.modifies(l.field);if(a)o.mod=t.length||r.length?u.filter((function(e){return h[Ve(e)]>0})):u.slice();else for(p in m)o.mod.push(m[p]);return o}}}var Ze="_:mod:_";function Qe(){Object.defineProperty(this,Ze,{writable:!0,value:{}})}var et=Qe.prototype;et.set=function(e,t,n,r){var i=this,a=i[e],o=i[Ze];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=Object(Me.A)(n)?1+n.length:-1),i},et.modified=function(e,t){var n,r=this[Ze];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(Me.A)(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},et.clear=function(){return this[Ze]={},this};var tt=0,nt=new Qe;function rt(e,t,n,r){this.id=++tt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}var it=rt.prototype;function at(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}it.targets=function(){return this._targets||(this._targets=Fe(Me.w))},it.set=function(e){return this.value!==e?(this.value=e,1):0},it.skip=at(1),it.modified=at(2),it.parameters=function(e,t,n){t=!1!==t;var r,i,a,o,u=this,s=u._argval=u._argval||new Qe,c=u._argops=u._argops||[],l=[];function f(e,n,r){r instanceof rt?(r!==u&&(t&&r.targets().add(u),l.push(r)),c.push({op:r,name:e,index:n})):s.set(e,n,r)}for(r in e)if(i=e[r],"pulse"===r)Object(Me.i)(i).forEach((function(e){e instanceof rt?e!==u&&(e.targets().add(u),l.push(e)):Object(Me.n)("Pulse parameters must be operator instances.")})),u.source=i;else if(Object(Me.A)(i))for(s.set(r,-1,Array(a=i.length)),o=0;o<a;++o)f(r,o,i[o]);else f(r,-1,i);return this.marshall().clear(),n&&(c.initonly=!0),l},it.marshall=function(e){var t,n,r,i,a,o=this._argval||nt,u=this._argops;if(u){for(n=0,r=u.length;n<r;++n)a=(i=(t=u[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);if(u.initonly){for(n=0;n<r;++n)(t=u[n]).op.targets().remove(this);this._argops=null,this._update=null}}return o},it.evaluate=function(e){var t=this._update;if(t){var n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},it.run=function(e){return e.stamp<this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e);var t};var ot=0;function ut(e,t,n){this.id=++ot,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function st(e,t,n){return new ut(e,t,n)}var ct=ut.prototype;ct._filter=Me.gb,ct._apply=Me.x,ct.targets=function(){return this._targets||(this._targets=Fe(Me.w))},ct.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},ct.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},ct.filter=function(e){var t=st(e);return this.targets().add(t),t},ct.apply=function(e){var t=st(null,e);return this.targets().add(t),t},ct.merge=function(){var e=st();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},ct.throttle=function(e){var t=-1;return this.filter((function(){var n=Date.now();return n-t>e?(t=n,1):0}))},ct.debounce=function(e){var t=st();return this.targets().add(st(null,null,Object(Me.m)(e,(function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},ct.between=function(e,t){var n=!1;return e.targets().add(st(null,null,(function(){n=!0}))),t.targets().add(st(null,null,(function(){n=!1}))),this.filter((function(){return n}))};var lt=/^([A-Za-z]+:)?\/\//,ft=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,dt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;function pt(e,t){return ht.apply(this,arguments)}function ht(){return(ht=Object(Pe.a)(x.a.mark((function e(t,n){var r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return r=e.sent,i=r.href,e.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function mt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=Object(Pe.a)(x.a.mark((function e(t,n){var r,i,a,o,u,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(Me.o)({},this.options,n),r=this.fileAccess,i={href:null},s=ft.test(t.replace(dt,"")),null!=t&&"string"===typeof t&&s||Object(Me.n)("Sanitize failure, invalid URI: "+Object(Me.Z)(t)),c=lt.test(t),(u=n.baseURL)&&!c&&(t.startsWith("/")||"/"===u[u.length-1]||(t="/"+t),t=u+t),o=(a=t.startsWith("file://"))||"file"===n.mode||"http"!==n.mode&&!c&&r,a?t=t.slice("file://".length):t.startsWith("//")&&("file"===n.defaultProtocol?(t=t.slice(2),o=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!o}),i.href=t,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin+""),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function gt(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:yt}function yt(){return bt.apply(this,arguments)}function bt(){return(bt=Object(Pe.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(Me.n)("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e){return e?function(){var t=Object(Pe.a)(x.a.mark((function t(n,r){var i,a,o;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(Me.o)({},this.options.http,r),a=r&&r.response,t.next=4,e(n,i);case 4:return o=t.sent,t.abrupt("return",o.ok?Object(Me.D)(o[a])?o[a]():o.text():Object(Me.n)(o.status+""+o.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():wt}function wt(){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(Pe.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(Me.n)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kt={boolean:Me.ab,integer:Me.cb,number:Me.cb,date:Me.bb,string:Me.eb,unknown:Me.x},Et=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return jt(e)&&Number.isInteger(+e)},jt,function(e){return!Number.isNaN(Date.parse(e))}],St=["boolean","integer","number","date"];function Ct(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o=0,u=e.length,s=Et.length,c=Et.map((function(e,t){return t+1}));for(r=0,u=e.length;r<u;++r)for(n=t?e[r][t]:e[r],i=0;i<s;++i)if(c[i]&&(null!=(a=n)&&a===a)&&!Et[i](n)&&(c[i]=0,++o===Et.length))return"string";return o=c.reduce((function(e,t){return 0===e?t:e}),0)-1,St[o]}function _t(e,t){return t.reduce((function(t,n){return t[n]=Ct(e,n),t}),{})}function jt(e){return!Number.isNaN(+e)&&!(e instanceof Date)}var At={},Tt={};function Nt(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Rt(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Dt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function It(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Dt(-t,6):t>9999?"+"+Dt(t,6):Dt(t,4))+"-"+Dt(e.getUTCMonth()+1,2)+"-"+Dt(e.getUTCDate(),2)+(a?"T"+Dt(n,2)+":"+Dt(r,2)+":"+Dt(i,2)+"."+Dt(a,3)+"Z":i?"T"+Dt(n,2)+":"+Dt(r,2)+":"+Dt(i,2)+"Z":r||n?"T"+Dt(n,2)+":"+Dt(r,2)+"Z":"")}var Mt=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],a=e.length,o=0,u=0,s=a<=0,c=!1;function l(){if(s)return Tt;if(c)return c=!1,At;var t,r,i=o;if(34===e.charCodeAt(i)){for(;o++<a&&34!==e.charCodeAt(o)||34===e.charCodeAt(++o););return(t=o)>=a?s=!0:10===(r=e.charCodeAt(o++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(o)&&++o),e.slice(i+1,t-1).replace(/""/g,'"')}for(;o<a;){if(10===(r=e.charCodeAt(t=o++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(o)&&++o;else if(r!==n)continue;return e.slice(i,t)}return s=!0,e.slice(i,a)}for(10===e.charCodeAt(a-1)&&--a,13===e.charCodeAt(a-1)&&--a;(r=l())!==Tt;){for(var f=[];r!==At&&r!==Tt;)f.push(r),r=l();t&&null==(f=t(f,u++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return o(t[e])})).join(e)}))}function a(t){return t.map(o).join(e)}function o(e){return null==e?"":e instanceof Date?It(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,a=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Nt(e);return function(r,i){return t(n(r),i,e)}}(e,t):Nt(e)}));return a.columns=i||[],a},parseRows:r,format:function(t,n){return null==n&&(n=Rt(t)),[n.map(o).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Rt(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(a).join("\n")},formatRow:a,formatValue:o}};function Ft(e){var t=function(t,n){var r={delimiter:e};return Pt(t,n?Object(Me.o)(n,r):r)};return t.responseType="text",t}function Pt(e,t){return t.header&&(e=t.header.map(Me.Z).join(t.delimiter)+"\n"+e),Mt(t.delimiter).parse(e+"")}Pt.responseType="text";var zt=n(172),Lt=function(e){return e},Bt=function(e){if(null==e)return Lt;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var s=2,c=e.length,l=new Array(c);for(l[0]=(t+=e[0])*r+a,l[1]=(n+=e[1])*i+o;s<c;)l[s]=e[s],++s;return l}},Wt=function(e,t){return"string"===typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return Ut(e,t)}))}:Ut(e,t)};function Ut(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=Vt(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Vt(e,t){var n=Bt(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],a=0,o=i.length;a<o;++a)t.push(n(i[a],a));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,o)}function a(e){return n(e)}function o(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function u(e){for(var t=o(e);t.length<4;)t.push(t[0]);return t}function s(e){return e.map(u)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=a(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(a);break;case"LineString":n=o(t.arcs);break;case"MultiLineString":n=t.arcs.map(o);break;case"Polygon":n=s(t.arcs);break;case"MultiPolygon":n=t.arcs.map(s);break;default:return null}return{type:r,coordinates:n}}(t)}var Ht=function(e,t){var n={},r={},i={},a=[],o=-1;function u(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),a.push(i)}}return t.forEach((function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++o],t[o]=n,t[r]=i)})),t.forEach((function(t){var n,a,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),u=o[0],s=o[1];if(n=i[u])if(delete i[n.end],n.push(t),n.end=s,a=r[s]){delete r[a.start];var c=a===n?n:n.concat(a);r[c.start=n.start]=i[c.end=a.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[s])if(delete r[n.start],n.unshift(t),n.start=u,a=i[u]){delete i[a.end];var l=a===n?n:a.concat(n);r[l.start=a.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=u]=i[n.end=s]=n})),u(i,r),u(r,i),t.forEach((function(e){n[e<0?~e:e]||a.push([e])})),a},qt=function(e){return Vt(e,Gt.apply(this,arguments))};function Gt(e,t,n){var r,i,a;if(arguments.length>1)r=$t(e,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Ht(e,r)}}function $t(e,t,n){var r,i=[],a=[];function o(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:r})}function u(e){e.forEach(o)}function s(e){e.forEach(u)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":u(t.arcs);break;case"MultiLineString":case"Polygon":s(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(s)}(t.arcs)}}(t),a.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}var Kt={interior:function(e,t){return e!==t},exterior:function(e,t){return e===t}};function Xt(e,t){var n,r,i,a;return e=Object(zt.a)(e,t),t&&t.feature?(n=Wt,i=t.feature):t&&t.mesh?(n=qt,i=t.mesh,a=Kt[t.filter]):Object(Me.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r,a):Object(Me.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}Xt.responseType="json";var Yt={dsv:Pt,csv:Ft(","),tsv:Ft("\t"),json:zt.a,topojson:Xt};function Jt(e,t){return arguments.length>1?(Yt[e]=t,this):Object(Me.v)(Yt,e)?Yt[e]:null}function Zt(e){var t=Jt(e);return t&&t.responseType||"text"}var Qt=new Date,en=new Date;function tn(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return u;do{u.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return u},i.filter=function(n){return tn((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Qt.setTime(+t),en.setTime(+r),e(Qt),e(en),Math.floor(n(Qt,en))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}function nn(e){return tn((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}var rn=nn(0),an=nn(1),on=nn(2),un=nn(3),sn=nn(4),cn=nn(5),ln=nn(6),fn=(rn.range,an.range,on.range,un.range,sn.range,cn.range,ln.range,tn((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1}))),dn=fn;fn.range;function pn(e){return tn((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}var hn=pn(0),mn=pn(1),vn=pn(2),gn=pn(3),yn=pn(4),bn=pn(5),xn=pn(6),wn=(hn.range,mn.range,vn.range,gn.range,yn.range,bn.range,xn.range,tn((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1}))),On=wn,kn=(wn.range,tn((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));kn.every=function(e){return isFinite(e=Math.floor(e))&&e>0?tn((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var En=kn,Sn=(kn.range,tn((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Sn.every=function(e){return isFinite(e=Math.floor(e))&&e>0?tn((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Cn=Sn;Sn.range;function _n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jn(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function An(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Tn,Nn,Rn,Dn,In,Mn={"-":"",_:" ",0:"0"},Fn=/^\s*\d+/,Pn=/^%/,zn=/[\\^$*+?|[\]().{}]/g;function Ln(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Bn(e){return e.replace(zn,"\\$&")}function Wn(e){return new RegExp("^(?:"+e.map(Bn).join("|")+")","i")}function Un(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function Vn(e,t,n){var r=Fn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Hn(e,t,n){var r=Fn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function qn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Gn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function $n(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Kn(e,t,n){var r=Fn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Yn(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jn(e,t,n){var r=Fn.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Zn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Qn(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function er(e,t,n){var r=Fn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function tr(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nr(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rr(e,t,n){var r=Fn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ir(e,t,n){var r=Fn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ar(e,t,n){var r=Fn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function or(e,t,n){var r=Pn.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ur(e,t,n){var r=Fn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function sr(e,t,n){var r=Fn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cr(e,t){return Ln(e.getDate(),t,2)}function lr(e,t){return Ln(e.getHours(),t,2)}function fr(e,t){return Ln(e.getHours()%12||12,t,2)}function dr(e,t){return Ln(1+On.count(En(e),e),t,3)}function pr(e,t){return Ln(e.getMilliseconds(),t,3)}function hr(e,t){return pr(e,t)+"000"}function mr(e,t){return Ln(e.getMonth()+1,t,2)}function vr(e,t){return Ln(e.getMinutes(),t,2)}function gr(e,t){return Ln(e.getSeconds(),t,2)}function yr(e){var t=e.getDay();return 0===t?7:t}function br(e,t){return Ln(hn.count(En(e)-1,e),t,2)}function xr(e,t){var n=e.getDay();return e=n>=4||0===n?yn(e):yn.ceil(e),Ln(yn.count(En(e),e)+(4===En(e).getDay()),t,2)}function wr(e){return e.getDay()}function Or(e,t){return Ln(mn.count(En(e)-1,e),t,2)}function kr(e,t){return Ln(e.getFullYear()%100,t,2)}function Er(e,t){return Ln(e.getFullYear()%1e4,t,4)}function Sr(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ln(t/60|0,"0",2)+Ln(t%60,"0",2)}function Cr(e,t){return Ln(e.getUTCDate(),t,2)}function _r(e,t){return Ln(e.getUTCHours(),t,2)}function jr(e,t){return Ln(e.getUTCHours()%12||12,t,2)}function Ar(e,t){return Ln(1+dn.count(Cn(e),e),t,3)}function Tr(e,t){return Ln(e.getUTCMilliseconds(),t,3)}function Nr(e,t){return Tr(e,t)+"000"}function Rr(e,t){return Ln(e.getUTCMonth()+1,t,2)}function Dr(e,t){return Ln(e.getUTCMinutes(),t,2)}function Ir(e,t){return Ln(e.getUTCSeconds(),t,2)}function Mr(e){var t=e.getUTCDay();return 0===t?7:t}function Fr(e,t){return Ln(rn.count(Cn(e)-1,e),t,2)}function Pr(e,t){var n=e.getUTCDay();return e=n>=4||0===n?sn(e):sn.ceil(e),Ln(sn.count(Cn(e),e)+(4===Cn(e).getUTCDay()),t,2)}function zr(e){return e.getUTCDay()}function Lr(e,t){return Ln(an.count(Cn(e)-1,e),t,2)}function Br(e,t){return Ln(e.getUTCFullYear()%100,t,2)}function Wr(e,t){return Ln(e.getUTCFullYear()%1e4,t,4)}function Ur(){return"+0000"}function Vr(){return"%"}function Hr(e){return+e}function qr(e){return Math.floor(+e/1e3)}function Gr(e){return Tn=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,c=Wn(i),l=Un(i),f=Wn(a),d=Un(a),p=Wn(o),h=Un(o),m=Wn(u),v=Un(u),g=Wn(s),y=Un(s),b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:cr,e:cr,f:hr,H:lr,I:fr,j:dr,L:pr,m:mr,M:vr,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Hr,s:qr,S:gr,u:yr,U:br,V:xr,w:wr,W:Or,x:null,X:null,y:kr,Y:Er,Z:Sr,"%":Vr},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Cr,e:Cr,f:Nr,H:_r,I:jr,j:Ar,L:Tr,m:Rr,M:Dr,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Hr,s:qr,S:Ir,u:Mr,U:Fr,V:Pr,w:zr,W:Lr,x:null,X:null,y:Br,Y:Wr,Z:Ur,"%":Vr},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:Qn,e:Qn,f:ar,H:tr,I:tr,j:er,L:ir,m:Zn,M:nr,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:Jn,Q:ur,s:sr,S:rr,u:Hn,U:qn,V:Gn,w:Vn,W:$n,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:Xn,Y:Kn,Z:Yn,"%":or};function O(e,t){return function(n){var r,i,a,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(i=Mn[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function k(e,t){return function(n){var r,i,a=An(1900,void 0,1);if(E(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=jn(An(a.y,0,1))).getUTCDay(),r=i>4||0===i?an.ceil(r):an(r),r=dn.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=_n(An(a.y,0,1))).getDay(),r=i>4||0===i?mn.ceil(r):mn(r),r=On.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?jn(An(a.y,0,1)).getUTCDay():_n(An(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,jn(a)):_n(a)}}function E(e,t,n,r){for(var i,a,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=w[i in Mn?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=O(n,b),b.X=O(r,b),b.c=O(t,b),x.x=O(n,x),x.X=O(r,x),x.c=O(t,x),{format:function(e){var t=O(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=O(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}(e),Nn=Tn.format,Rn=Tn.parse,Dn=Tn.utcFormat,In=Tn.utcParse,Tn}Gr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var $r=function(e,t,n){var r=Jt((t=t||{}).type||"json");return r||Object(Me.n)("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function(e,t,n){if(!e.length)return;n=n||Rn;var r,i,a,o,u,s,c,l=e.columns||Object.keys(e[0]);"auto"===t&&(t=_t(e,l));for(l=Object.keys(t),r=l.map((function(e){var r,i,a=t[e];if(a&&(a.startsWith("date:")||a.startsWith("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?In(i):n(i);if(!kt[a])throw Error("Illegal format pattern: "+e+":"+a);return kt[a]})),o=0,s=e.length,c=l.length;o<s;++o)for(i=e[o],u=0;u<c;++u)a=l[u],i[a]=r[u](i[a])}(e,t.parse,n),Object(Me.v)(e,"columns")&&delete e.columns,e};var Kr=function(e,t){return function(n){return{options:n||{},sanitize:mt,load:pt,fileAccess:!!t,file:gt(t),http:xt(e)}}}("undefined"!==typeof fetch&&fetch,null),Xr=$r;function Yr(){return(Yr=Object(Pe.a)(x.a.mark((function e(t,n){var r,i,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=0,e.prev=2,e.next=5,r.loader().load(t,{context:"dataflow",response:Zt(n&&n.type)});case 5:a=e.sent;try{a=Xr(a,n)}catch(o){i=-2,r.warn("Data ingestion failed",t,o)}e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),i=-1,r.warn("Loading failed",t,e.t0);case 13:return e.abrupt("return",{data:a,status:i});case 14:case"end":return e.stop()}}),e,this,[[2,9]])})))).apply(this,arguments)}function Jr(){return(Jr=Object(Pe.a)(x.a.mark((function e(t,n,r){var i,a,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=(i=this)._pending||Zr(i)).requests+=1,e.next=4,i.request(n,r);case 4:return o=e.sent,i.pulse(t,i.changeset().remove(Me.gb).insert(o.data||[])),a.done(),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Zr(e){var t,n=new Promise((function(e){t=e}));return n.requests=0,n.done=function(){0===--n.requests&&(e._pending=null,t(e))},e._pending=n}var Qr={skip:!0};function ei(e,t,n,r,i,a){var o,u,s=Object(Me.o)({},a,Qr);Object(Me.D)(n)||(n=Object(Me.l)(n)),void 0===r?o=function(t){return e.touch(n(t))}:Object(Me.D)(r)?(u=new rt(null,r,i,!1),o=function(t){u.evaluate(t);var r=n(t),i=u.value;Ye(i)?e.pulse(r,i,a):e.update(r,i,s)}):o=function(t){return e.update(n(t),r,s)},t.apply(o)}function ti(e,t,n,r,i,a){if(void 0===r)t.targets().add(n);else{var o=a||{},u=new rt(null,function(e,t){return t=Object(Me.D)(t)?t:Object(Me.l)(t),e?function(n,r){var i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);u.modified(o.force),u.rank=t.rank,t.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),e.connect(n,[u]))}}var ni={};function ri(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var ii=ri.prototype;function ai(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function oi(e,t){var n=[];return Object(Me.ib)(e,t,(function(e){n.push(e)})),n}function ui(e,t){var n={};return e.visit(t,(function(e){n[Ve(e)]=1})),function(e){return n[Ve(e)]?null:e}}function si(e,t,n,r){var i,a,o,u,s,c=this,l=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if((i=n[o]).stamp===t){if(i.fields)for(s in a=c.fields||(c.fields={}),i.fields)a[s]=1;i.changed(c.ADD)&&(l|=c.ADD),i.changed(c.REM)&&(l|=c.REM),i.changed(c.MOD)&&(l|=c.MOD)}this.changes=l}ii.StopPropagation=ni,ii.ADD=1,ii.REM=2,ii.MOD=4,ii.ADD_REM=3,ii.ADD_MOD=5,ii.ALL=7,ii.REFLOW=8,ii.SOURCE=16,ii.NO_SOURCE=32,ii.NO_FIELDS=64,ii.fork=function(e){return new ri(this.dataflow).init(this,e)},ii.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},ii.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?((e=new ri(this.dataflow).init(this)).add=e.source,e):e},ii.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},ii.runAfter=function(e){this.dataflow.runAfter(e)},ii.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},ii.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,ui(this,1))),this},ii.modifies=function(e){var t=this.fields||(this.fields={});return Object(Me.A)(e)?e.forEach((function(e){return t[e]=!0})):t[e]=!0,this},ii.modified=function(e,t){var n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?Object(Me.A)(e)?e.some((function(e){return n[e]})):n[e]:!!n)},ii.filter=function(e,t){var n=this;return 1&e&&(n.addF=ai(n.addF,t)),2&e&&(n.remF=ai(n.remF,t)),4&e&&(n.modF=ai(n.modF,t)),16&e&&(n.srcF=ai(n.srcF,t)),n},ii.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=oi(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=oi(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=oi(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},ii.visit=function(e,t){var n,r,i=this,a=t;return 16&e?(Object(Me.ib)(i.source,i.srcF,a),i):(1&e&&Object(Me.ib)(i.add,i.addF,a),2&e&&Object(Me.ib)(i.rem,i.remF,a),4&e&&Object(Me.ib)(i.mod,i.modF,a),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(Me.ib)(n,ui(i,5),a):Object(Me.ib)(n,i.srcF,a))),i)};var ci=Object(Me.y)(si,ri);function li(){return(li=Object(Pe.a)(x.a.mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d,p,h;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(i=this).logLevel(),o=[],!i._pulse){e.next=3;break}return e.abrupt("return",di(i));case 3:if(!i._pending){e.next=6;break}return e.next=6,i._pending;case 6:if(!n){e.next=9;break}return e.next=9,ze(i,n);case 9:if(i._touched.length){e.next=12;break}return i.info("Dataflow invoked, but nothing to do."),e.abrupt("return",i);case 12:u=++i._clock,s=0,i._pulse=new ri(i,u,t),a>=Me.c&&(f=Date.now(),i.debug("-- START PROPAGATION ("+u+") -----")),i._touched.forEach((function(e){return i._enqueue(e,!0)})),i._touched=Fe(Me.w),e.prev=17;case 18:if(!(i._heap.size()>0)){e.next=36;break}if((c=i._heap.pop()).rank===c.qrank){e.next=23;break}return i._enqueue(c,!0),e.abrupt("continue",18);case 23:if(!(l=c.run(i._getPulse(c,t))).then){e.next=30;break}return e.next=27,l;case 27:l=e.sent,e.next=31;break;case 30:l.async&&(o.push(l.async),l=ni);case 31:a>=Me.a&&i.debug(c.id,l===ni?"STOP":l,c),l!==ni&&c._targets&&c._targets.forEach((function(e){return i._enqueue(e)})),++s,e.next=18;break;case 36:e.next=42;break;case 38:e.prev=38,e.t0=e.catch(17),i._heap.clear(),d=e.t0;case 42:if(i._input={},i._pulse=null,a>=Me.c&&(f=Date.now()-f,i.info("> Pulse "+u+": "+s+" operators; "+f+"ms")),d&&(i._postrun=[],i.error(d)),!i._postrun.length){e.next=56;break}p=i._postrun.sort((function(e,t){return t.priority-e.priority})),i._postrun=[],h=0;case 50:if(!(h<p.length)){e.next=56;break}return e.next=53,ze(i,p[h].callback);case 53:++h,e.next=50;break;case 56:if(!r){e.next=59;break}return e.next=59,ze(i,r);case 59:return o.length&&Promise.all(o).then((function(e){return i.runAsync(null,(function(){e.forEach((function(e){try{e(i)}catch(t){i.error(t)}}))}))})),e.abrupt("return",i);case 61:case"end":return e.stop()}}),e,this,[[17,38]])})))).apply(this,arguments)}function fi(){return(fi=Object(Pe.a)(x.a.mark((function e(t,n,r){var i,a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._running){e.next=5;break}return e.next=3,this._running;case 3:e.next=0;break;case 5:return i=function(){return a._running=null},(this._running=this.evaluate(t,n,r)).then(i,i),e.abrupt("return",this._running);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function di(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}ci.fork=function(e){var t=new ri(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(function(e){return t.add.push(e)})),e&t.REM&&this.visit(t.REM,(function(e){return t.rem.push(e)})),e&t.MOD&&this.visit(t.MOD,(function(e){return t.mod.push(e)}))),t},ci.changed=function(e){return this.changes&e},ci.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Object(Me.A)(e)?e.some((function(e){return n[e]})):n[e]:0},ci.filter=function(){Object(Me.n)("MultiPulse does not support filtering.")},ci.materialize=function(){Object(Me.n)("MultiPulse does not support materialization.")},ci.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n};var pi={skip:!1,force:!1};function hi(e){var t=[];return{clear:function(){return t=[]},size:function(){return t.length},peek:function(){return t[0]},push:function(n){return t.push(n),mi(t,0,t.length-1,e)},pop:function(){var n,r=t.pop();return t.length?(n=t[0],t[0]=r,function(e,t,n){var r,i=t,a=e.length,o=e[t],u=1+(t<<1);for(;u<a;)(r=u+1)<a&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],u=1+((t=u)<<1);e[t]=o,mi(e,i,t,n)}(t,0,e)):n=r,n}}}function mi(e,t,n,r){var i,a,o;for(i=e[n];n>t&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function vi(){this.logger(Object(Me.K)()),this.logLevel(Me.b),this._clock=0,this._rank=0;try{this._loader=Kr()}catch(e){}this._touched=Fe(Me.w),this._input={},this._pulse=null,this._heap=hi((function(e,t){return e.qrank-t.qrank})),this._postrun=[]}var gi=vi.prototype;function yi(e){return function(){return this._log[e].apply(this,arguments)}}function bi(e,t){rt.call(this,e,null,t)}gi.stamp=function(){return this._clock},gi.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},gi.cleanThreshold=1e4,gi.add=function(e,t,n,r){var i,a=1;return e instanceof rt?i=e:e&&e.prototype instanceof rt?i=new e:Object(Me.D)(e)?i=new rt(null,e):(a=0,i=new rt(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},gi.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},gi.rank=function(e){e.rank=++this._rank},gi.rerank=function(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;--r>=0;)i.push(t=n[r]),t===e&&Object(Me.n)("Cycle detected in dataflow graph.")},gi.pulse=function(e,t,n){this.touch(e,n||pi);var r=new ri(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},gi.touch=function(e,t){var n=t||pi;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},gi.update=function(e,t,n){var r=n||pi;return(e.set(t)||r.force)&&this.touch(e,r),this},gi.changeset=Je,gi.ingest=function(e,t,n){return this.pulse(e,this.changeset().insert(Xr(t,n)))},gi.parse=Xr,gi.preload=function(e,t,n){return Jr.apply(this,arguments)},gi.request=function(e,t){return Yr.apply(this,arguments)},gi.events=function(e,t,n,r){for(var i,a=this,o=st(n,r),u=function(e){e.dataflow=a;try{o.receive(e)}catch(t){a.error(t)}finally{a.run()}},s=0,c=(i="string"===typeof e&&"undefined"!==typeof document?document.querySelectorAll(e):Object(Me.i)(e)).length;s<c;++s)i[s].addEventListener(t,u);return o},gi.on=function(e,t,n,r,i){return(e instanceof rt?ti:ei)(this,e,t,n,r,i),this},gi.evaluate=function(e,t,n){return li.apply(this,arguments)},gi.run=function(e,t,n){return this._pulse?di(this):(this.evaluate(e,t,n),this)},gi.runAsync=function(e,t,n){return fi.apply(this,arguments)},gi.runAfter=function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}},gi._enqueue=function(e,t){var n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},gi._getPulse=function(e,t){var n=e.source,r=this._clock;return n&&Object(Me.A)(n)?new si(this,r,n.map((function(e){return e.pulse})),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==ni&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)},gi.logger=function(e){return arguments.length?(this._log=e,this):this._log},gi.error=yi("error"),gi.warn=yi("warn"),gi.info=yi("info"),gi.debug=yi("debug"),gi.logLevel=yi("level");var xi=Object(Me.y)(bi,rt);xi.run=function(e){var t,n=this;return e.stamp<this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e).then?t=t.then((function(e){return n.pulse=e})):t!==e.StopPropagation&&(this.pulse=t),t)},xi.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},xi.transform=function(){};var wi={};function Oi(e){var t=ki(e);return t&&t.Definition||null}function ki(e){return e=e&&e.toLowerCase(),Object(Me.v)(wi,e)?wi[e]:null}function Ei(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function Si(e,t,n){return n||e+(t?"_"+t:"")}var Ci={values:Ai({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Ai({name:"count",set:"cell.num"}),__count__:Ai({name:"count",set:"this.missing + this.valid"}),missing:Ai({name:"missing",set:"this.missing"}),valid:Ai({name:"valid",set:"this.valid"}),sum:Ai({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),product:Ai({name:"product",init:"this.product = 1;",add:"this.product *= v;",rem:"this.product /= v;",set:"this.valid ? this.product : undefined"}),mean:Ai({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:Ai({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:Ai({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:Ai({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:Ai({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:Ai({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:Ai({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:Ai({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Ai({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Ai({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Ai({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Ai({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Ai({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Ai({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Ai({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Ai({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (Number.isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Ai({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (Number.isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},_i=Object.keys(Ci);function ji(e,t){return Ci[e](t)}function Ai(e){return function(t){var n=Object(Me.o)({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function Ti(e,t){return e.idx-t.idx}function Ni(e,t){var n=t||Me.x,r=function(e,t){var n,r=e.reduce((function e(n,r){function i(t){n[t]||e(n,n[t]=Ci[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n}),e.reduce((function(e,t){return e[t.name]=t,e}),{})),i=[];for(n in r)i.push(r[n]);return i.sort(Ti)}(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",u="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",s="var cell = this.cell;";return r.forEach((function(e){i+=e.init,o+=e.add,u+=e.rem})),e.slice().sort(Ti).forEach((function(e){s+="t["+Object(Me.Z)(e.out)+"]="+e.set+";"})),s+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",u),a.prototype.set=Function("t",s),a.prototype.get=n,a.fields=e.map((function(e){return e.out})),a}var Ri=n(6),Di=x.a.mark(Ii);function Ii(e,t){var n,r,i,a,o,u,s;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t){c.next=21;break}n=Object(Ri.a)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){c.next=9;break}return c.next=9,i;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:a=-1,o=Object(Ri.a)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=32;break}if(s=u.value,!(null!=(s=t(s,++a,e))&&(s=+s)>=s)){c.next=30;break}return c.next=30,s;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),Di,null,[[2,13,16,19],[23,34,37,40]])}var Mi=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};function Fi(e,t){var n;if(void 0===t){var r,i=Object(Ri.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n<a||void 0===n&&a>=a)&&(n=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,s=Object(Ri.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function Pi(e,t){var n;if(void 0===t){var r,i=Object(Ri.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n>a||void 0===n&&a>=a)&&(n=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,s=Object(Ri.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function zi(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}var Li=x.a.mark(Wi),Bi=function(e){return null===e?NaN:+e};function Wi(e,t){var n,r,i,a,o,u,s;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t){c.next=21;break}n=Object(Ri.a)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){c.next=9;break}return c.next=9,i;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:a=-1,o=Object(Ri.a)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=32;break}if(s=u.value,!(null!=(s=t(s,++a,e))&&(s=+s)>=s)){c.next=30;break}return c.next=30,s;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),Li,null,[[2,13,16,19],[23,34,37,40]])}function Ui(e,t,n){if(r=(e=Float64Array.from(Wi(e,n))).length){if((t=+t)<=0||r<2)return Pi(e);if(t>=1)return Fi(e);var r,i=(r-1)*t,a=Math.floor(i),o=Fi(function e(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mi;i>r;){if(i-r>600){var o=i-r+1,u=n-r+1,s=Math.log(o),c=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*c*(o-c)/o)*(u-o/2<0?-1:1),f=Math.max(r,Math.floor(n-u*c/o+l)),d=Math.min(i,Math.floor(n+(o-u)*c/o+l));e(t,n,f,d,a)}var p=t[n],h=r,m=i;for(zi(t,r,n),a(t[i],p)>0&&zi(t,r,i);h<m;){for(zi(t,h,m),++h,--m;a(t[h],p)<0;)++h;for(;a(t[m],p)>0;)--m}0===a(t[r],p)?zi(t,r,m):zi(t,++m,i),m<=n&&(r=m+1),n<=m&&(i=m-1)}return t}(e,a).subarray(0,a+1));return o+(Pi(e.subarray(a+1))-o)*(i-a)}}var Vi=function(e,t,n){var r=Float64Array.from(Ii(e,n));return r.sort(Mi),t.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bi;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}(r,e)}))},Hi=function(e,t){return Vi(e,[.25,.5,.75],t)};function qi(e,t){var n=function(e,t){var n,r=0,i=0,a=0;if(void 0===t){var o,u=Object(Ri.a)(e);try{for(u.s();!(o=u.n()).done;){var s=o.value;null!=s&&(s=+s)>=s&&(a+=(n=s-i)*(s-(i+=n/++r)))}}catch(p){u.e(p)}finally{u.f()}}else{var c,l=-1,f=Object(Ri.a)(e);try{for(f.s();!(c=f.n()).done;){var d=c.value;null!=(d=t(d,++l,e))&&(d=+d)>=d&&(a+=(n=d-i)*(d-(i+=n/++r)))}}catch(p){f.e(p)}finally{f.f()}}if(r>1)return a/(r-1)}(e,t);return n?Math.sqrt(n):n}var Gi=function(e,t){var n=e.length,r=qi(e,t),i=Hi(e,t),a=(i[2]-i[0])/1.34;return 1.06*(r=Math.min(r,a)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)},$i=function(e){var t,n,r,i,a,o,u,s,c=e.maxbins||20,l=e.base||10,f=Math.log(l),d=e.divide||[5,2],p=e.extent[0],h=e.extent[1],m=e.span||h-p||Math.abs(p)||1;if(e.step)t=e.step;else if(e.steps){for(a=m/c,o=0,u=e.steps.length;o<u&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(c)/f),r=e.minstep||0,t=Math.max(r,Math.pow(l,Math.round(Math.log(m)/f)-n));Math.ceil(m/t)>c;)t*=l;for(o=0,u=d.length;o<u;++o)(a=t/d[o])>=r&&m/a<=c&&(t=a)}return i=(a=Math.log(t))>=0?0:1+~~(-a/f),s=Math.pow(l,-i-1),(e.nice||void 0===e.nice)&&(p=p<(a=Math.floor(p/t+s)*t)?a-t:a,h=Math.ceil(h/t)*t),{start:p,stop:h===p?p+t:h,step:t}},Ki=Math.random;function Xi(e){Ki=e}var Yi=function(e,t,n,r){if(!e.length)return[void 0,void 0];var i,a,o,u,s=Float64Array.from(Ii(e,r)),c=s.length,l=t;for(o=0,u=Array(l);o<l;++o){for(i=0,a=0;a<c;++a)i+=s[~~(Ki()*c)];u[o]=i/c}return u.sort(Mi),[Ui(u,n/2),Ui(u,1-n/2)]},Ji=function(e,t,n,r){r=r||function(e){return e};for(var i,a=0,o=1,u=e.length,s=new Float64Array(u),c=r(e[0]),l=c,f=c+t;o<u;++o){if((i=r(e[o]))>=f){for(l=(c+l)/2;a<o;++a)s[a]=l;f=i+t,c=i}l=i}for(l=(c+l)/2;a<o;++a)s[a]=l;return n?function(e,t){var n,r,i=e.length,a=0,o=1;for(;e[a]===e[o];)++o;for(;o<i;){for(n=o+1;e[o]===e[n];)++n;if(e[o]-e[o-1]<t){for(r=o+(a+n-o-o>>1);r<o;)e[r++]=e[o];for(;r>o;)e[r--]=e[a]}a=o,o=n}return e}(s,t+t/4):s};var Zi=function(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}},Qi=function(e,t){null==t&&(t=e,e=0);var n,r,i,a={};return a.min=function(e){return arguments.length?(i=r-(n=e||0),a):n},a.max=function(e){return arguments.length?(i=(r=e||0)-n,a):r},a.sample=function(){return n+Math.floor(i*Ki())},a.pdf=function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},a.cdf=function(e){var t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},a.icdf=function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN},a.min(e).max(t)},ea=Math.sqrt(2*Math.PI),ta=Math.SQRT2,na=NaN;function ra(e,t){e=e||0,t=null==t?1:t;var n,r,i=0,a=0;if(na===na)i=na,na=NaN;else{do{n=(i=2*Ki()-1)*i+(a=2*Ki()-1)*a}while(0===n||n>1);i*=r=Math.sqrt(-2*Math.log(n)/n),na=a*r}return e+i*t}function ia(e,t,n){var r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*ea)}function aa(e,t,n){var r,i=(e-(t=t||0))/(n=null==n?1:n),a=Math.abs(i);if(a>37)r=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(r=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),r/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):r=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-r:r}function oa(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*ta*function(e){var t,n=-Math.log((1-e)*(1+e));n<6.25?t=1.6536545626831027+(t=.24015818242558962+(t=(t=(t=.00018673420803405714+(t=(t=(t=4.2347877827932404e-7+(t=(t=(t=1.0512122733215323e-9+(t=(t=(t=26335093153082323e-28+(t=(t=(t=6637638134358324e-30+(t=20972767875968562e-33+(t=(t=11157877678025181e-33+(t=128584807152564e-32+(t=(t=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?(n=Math.sqrt(n)-3.25,t=3.0838856104922208+(t=1.0052589676941592+(t=.005370914553590064+(t=(t=.002491442096107851+(t=(t=.0009532893797373805+(t=(t=24031110387097894e-21+(t=6828485145957318e-20+(t=(t=12475304481671779e-21+(t=29234449089955446e-22+(t=(t=15027403968909828e-22+(t=1.8239629214389228e-8+(t=(t=9.075656193888539e-8+(t=2.2137376921775787e-9)*n)*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=4.849906401408584+(t=1.0103004648645344+(t=(t=(t=7599527703001776e-20+(t=(t=4526062597223154e-21+(t=(t=2.2900482228026655e-7+(t=(t=2.914795345090108e-8+(t=(t=7.61570120807834e-9+(t=(t=1.5076572693500548e-9+(t=(t=-27109920616438573e-27)*n-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n):t=1/0;return t*e}(2*e-1)}var ua=function(e,t){var n,r,i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:function(){return ra(n,r)},pdf:function(e){return ia(e,n,r)},cdf:function(e){return aa(e,n,r)},icdf:function(e){return oa(e,n,r)}};return i.mean(e).stdev(t)},sa=function(e,t){var n=ua(),r={},i=0;return r.data=function(n){return arguments.length?(e=n,i=n?n.length:0,r.bandwidth(t)):e},r.bandwidth=function(n){return arguments.length?(!(t=n)&&e&&(t=Gi(e)),r):t},r.sample=function(){return e[~~(Ki()*i)]+t*n.sample()},r.pdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.pdf((r-e[o])/t);return a/t/i},r.cdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.cdf((r-e[o])/t);return a/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(e)};function ca(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+ra()*t)}function la(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;var r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*ea*e)}function fa(e,t,n){return aa(Math.log(e),t,n)}function da(e,t,n){return Math.exp(oa(e,t,n))}var pa=function(e,t){var n,r,i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:function(){return ca(n,r)},pdf:function(e){return la(e,n,r)},cdf:function(e){return fa(e,n,r)},icdf:function(e){return da(e,n,r)}};return i.mean(e).stdev(t)},ha=function(e,t){var n,r={},i=0;function a(e){var t,n=[],r=0;for(t=0;t<i;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<i;++t)n[t]/=r;return n}return r.weights=function(e){return arguments.length?(n=a(t=e||[]),r):t},r.distributions=function(n){return arguments.length?(n?(i=n.length,e=n):(i=0,e=[]),r.weights(t)):e},r.sample=function(){for(var t=Ki(),r=e[i-1],a=n[0],o=0;o<i-1;a+=n[++o])if(t<a){r=e[o];break}return r.sample()},r.pdf=function(t){for(var r=0,a=0;a<i;++a)r+=n[a]*e[a].pdf(t);return r},r.cdf=function(t){for(var r=0,a=0;a<i;++a)r+=n[a]*e[a].cdf(t);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(e).weights(t)};function ma(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*Ki()}function va(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function ga(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function ya(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}var ba=function(e,t){var n,r,i={min:function(e){return arguments.length?(n=e||0,i):n},max:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:function(){return ma(n,r)},pdf:function(e){return va(e,n,r)},cdf:function(e){return ga(e,n,r)},icdf:function(e){return ya(e,n,r)}};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)},xa=function(e,t,n,r){var i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]};function wa(e,t,n,r){e=e.filter((function(e){var r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort((function(e,n){return t(e)-t(n)}));var i,a,o,u,s=e.length,c=new Float64Array(s),l=new Float64Array(s),f=0,d=0,p=0,h=Object(Ri.a)(e);try{for(h.s();!(u=h.n()).done;)o=u.value,c[f]=i=+t(o),l[f]=a=+n(o),d+=(i-d)/++f,p+=(a-p)/f}catch(m){h.e(m)}finally{h.f()}for(f=0;f<s;++f)c[f]-=d,l[f]-=p;return[c,l,d,p]}function Oa(e,t,n,r){var i,a,o,u=-1,s=Object(Ri.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;i=t(c),a=n(c),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++u)}}catch(l){s.e(l)}finally{s.f()}}var ka=function(e,t,n,r,i){var a=0,o=0;return Oa(e,t,n,(function(e,t){var n=t-i(e),u=t-r;a+=n*n,o+=u*u})),1-a/o},Ea=function(e,t,n){var r=0,i=0,a=0,o=0,u=0;Oa(e,t,n,(function(e,t){++u,r+=(e-r)/u,i+=(t-i)/u,a+=(e*t-a)/u,o+=(e*e-o)/u}));var s=xa(r,i,a,o),c=function(e){return s[0]+s[1]*e};return{coef:s,predict:c,rSquared:ka(e,t,n,i,c)}},Sa=function(e,t,n){var r=0,i=0,a=0,o=0,u=0;Oa(e,t,n,(function(e,t){++u,e=Math.log(e),r+=(e-r)/u,i+=(t-i)/u,a+=(e*t-a)/u,o+=(e*e-o)/u}));var s=xa(r,i,a,o),c=function(e){return s[0]+s[1]*Math.log(e)};return{coef:s,predict:c,rSquared:ka(e,t,n,i,c)}},Ca=n(14),_a=function(e,t,n){var r,i,a,o=wa(e,t,n),u=Object(Ca.a)(o,4),s=u[0],c=(u[1],u[2]),l=u[3],f=0,d=0,p=0,h=0,m=0;Oa(e,t,n,(function(e,t){r=s[m++],i=Math.log(t),f+=(t*i-f)/m,d+=((a=r*t)-d)/m,p+=(a*i-p)/m,h+=(r*a-h)/m}));var v=xa(d/l,f/l,p/l,h/l),g=Object(Ca.a)(v,2),y=g[0],b=g[1],x=function(e){return Math.exp(y+b*(e-c))};return{coef:[Math.exp(y-b*c),b],predict:x,rSquared:ka(e,t,n,l,x)}},ja=function(e,t,n){var r=0,i=0,a=0,o=0,u=0,s=0;Oa(e,t,n,(function(e,t){var n=Math.log(e),c=Math.log(t);++s,r+=(n-r)/s,i+=(c-i)/s,a+=(n*c-a)/s,o+=(n*n-o)/s,u+=(t-u)/s}));var c=xa(r,i,a,o),l=function(e){return c[0]*Math.pow(e,c[1])};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:ka(e,t,n,u,l)}},Aa=function(e,t,n){var r,i,a,o,u=wa(e,t,n),s=Object(Ca.a)(u,4),c=s[0],l=s[1],f=s[2],d=s[3],p=c.length,h=0,m=0,v=0,g=0,y=0;for(r=0;r<p;)i=c[r],a=l[r++],h+=((o=i*i)-h)/r,m+=(o*i-m)/r,v+=(o*o-v)/r,g+=(i*a-g)/r,y+=(o*a-y)/r;var b=v-h*h,x=h*b-m*m,w=(y*h-g*m)/x,O=(g*b-y*m)/x,k=-w*h,E=function(e){return w*(e-=f)*e+O*e+k+d};return{coef:[k-O*f+w*f*f+d,O-2*w*f,w],predict:E,rSquared:ka(e,t,n,d,E)}},Ta=function(e,t,n,r){if(1===r)return Ea(e,t,n);if(2===r)return Aa(e,t,n);var i,a,o,u,s,c=wa(e,t,n),l=Object(Ca.a)(c,4),f=l[0],d=l[1],p=l[2],h=l[3],m=f.length,v=[],g=[],y=r+1;for(i=0;i<y;++i){for(o=0,u=0;o<m;++o)u+=Math.pow(f[o],i)*d[o];for(v.push(u),s=new Float64Array(y),a=0;a<y;++a){for(o=0,u=0;o<m;++o)u+=Math.pow(f[o],i+a);s[a]=u}g.push(s)}g.push(v);var b=function(e){var t,n,r,i,a,o=e.length-1,u=[];for(t=0;t<o;++t){for(i=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][i])&&(i=n);for(r=t;r<o+1;++r)a=e[r][t],e[r][t]=e[r][i],e[r][i]=a;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=e[r][n]*u[r];u[n]=(e[o][n]-a)/e[n][n]}return u}(g),x=function(e){e-=p;var t=h+b[0]+b[1]*e+b[2]*e*e;for(i=3;i<y;++i)t+=b[i]*Math.pow(e,i);return t};return{coef:Na(y,b,-p,h),predict:x,rSquared:ka(e,t,n,h,x)}};function Na(e,t,n,r){var i,a,o,u,s=Array(e);for(i=0;i<e;++i)s[i]=0;for(i=e-1;i>=0;--i)for(o=t[i],u=1,s[i]+=o,a=1;a<=i;++a)u*=(i+1-a)/a,s[i-a]+=o*Math.pow(n,a)*u;return s[0]+=r,s}var Ra=function(e,t){return Ui(e,.5,t)},Da=function(e,t,n,r){for(var i=wa(e,t,n,!0),a=Object(Ca.a)(i,4),o=a[0],u=a[1],s=a[2],c=a[3],l=o.length,f=Math.max(2,~~(r*l)),d=new Float64Array(l),p=new Float64Array(l),h=new Float64Array(l).fill(1),m=-1;++m<=2;){for(var v=[0,f-1],g=0;g<l;++g){for(var y=o[g],b=v[0],x=v[1],w=y-o[b]>o[x]-y?b:x,O=0,k=0,E=0,S=0,C=0,_=1/Math.abs(o[w]-y||1),j=b;j<=x;++j){var A=o[j],T=u[j],N=Ia(Math.abs(y-A)*_)*h[j],R=A*N;O+=N,k+=R,E+=T*N,S+=T*R,C+=A*R}var D=xa(k/O,E/O,S/O,C/O),I=Object(Ca.a)(D,2),M=I[0],F=I[1];d[g]=M+F*y,p[g]=Math.abs(u[g]-d[g]),Ma(o,g+1,v)}if(2===m)break;var P=Ra(p);if(Math.abs(P)<1e-12)break;for(var z,L,B=0;B<l;++B)z=p[B]/(6*P),h[B]=z>=1?1e-12:(L=1-z*z)*L}return function(e,t,n,r){for(var i,a=e.length,o=[],u=0,s=0,c=[];u<a;++u)i=e[u]+n,c[0]===i?c[1]+=(t[u]-c[1])/++s:(s=0,c[1]+=r,c=[i,t[u]],o.push(c));return c[1]+=r,o}(o,d,s,c)};function Ia(e){return(e=1-e*e*e)*e*e}function Ma(e,t,n){var r=e[t],i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}var Fa=.1*Math.PI/180,Pa=function(e,t,n,r){n=n||25,r=Math.max(n,r||200);var i=function(t){return[t,e(t)]},a=t[0],o=t[1],u=o-a,s=u/r,c=[i(a)],l=[];if(n===r){for(var f=1;f<r;++f)c.push(i(a+f/n*u));return c.push(i(o)),c}l.push(i(o));for(var d=n;--d>0;)l.push(i(a+d/n*u));for(var p=c[0],h=l[l.length-1];h;){var m=i((p[0]+h[0])/2);m[0]-p[0]>=s&&za(p,m,h)>Fa?l.push(m):(p=h,c.push(h),l.pop()),h=l[l.length-1]}return c};function za(e,t,n){var r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function La(e){this._key=e?Object(Me.t)(e):Ve,this.reset()}var Ba=La.prototype;function Wa(e){bi.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ba.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ba.add=function(e){this._add.push(e)},Ba.rem=function(e){this._rem.push(e)},Ba.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),c={};for(e=0;e<u;++e)c[a(i[e])]=1;for(e=0,t=0;e<o;++e)c[a(n=r[e])]?c[a(n)]=0:s[t++]=n;return this._rem=[],this._add=s},Ba.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;--r>=0;)t=e(n[r])+"",Object(Me.v)(i,t)||(i[t]=1,++a);return a},Ba.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Object(Me.q)(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},Ba.argmin=function(e){return this.extent(e)[0]||{}},Ba.argmax=function(e){return this.extent(e)[1]||{}},Ba.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):void 0},Ba.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):void 0},Ba.quartile=function(e){return this._get===e&&this._q||(this._q=Hi(this.values(),e),this._get=e),this._q},Ba.q1=function(e){return this.quartile(e)[0]},Ba.q2=function(e){return this.quartile(e)[1]},Ba.q3=function(e){return this.quartile(e)[2]},Ba.ci=function(e){return this._get===e&&this._ci||(this._ci=Yi(this.values(),1e3,.05,e),this._get=e),this._ci},Ba.ci0=function(e){return this.ci(e)[0]},Ba.ci1=function(e){return this.ci(e)[1]},Wa.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:_i},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Ua=Object(Me.y)(Wa,bi);Ua.transform=function(e,t){var n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(function(e){return n.add(e)}))):(n.value=n.value||n.init(e),t.visit(t.REM,(function(e){return n.rem(e)})),t.visit(t.ADD,(function(e){return n.add(e)}))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),n.changes(r)},Ua.cross=function(){var e=this,t=e.value,n=e._dnames,r=n.map((function(){return{}})),i=n.length;function a(e){var t,a,o,u;for(t in e)for(o=e[t].tuple,a=0;a<i;++a)r[a][u=o[n[a]]]=u}a(e._prev),a(t),function a(o,u,s){var c,l,f=n[s],d=r[s++];for(c in d)u[f]=d[c],l=o?o+"|"+c:c,s<i?a(l,u,s):t[l]||e.cell(l,u)}("",{},0)},Ua.init=function(e){var t=this._inputs=[],n=this._outputs=[],r={};function i(e){for(var n,i=Object(Me.i)(Object(Me.g)(e)),a=0,o=i.length;a<o;++a)r[n=i[a]]||(r[n]=1,t.push(n))}this._dims=Object(Me.i)(e.groupby),this._dnames=this._dims.map((function(e){var t=Object(Me.h)(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:Ei(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,c,l,f=e.fields||[null],d=e.ops||["count"],p=e.as||[],h=f.length,m={};for(h!==d.length&&Object(Me.n)("Unmatched number of fields and aggregate ops."),l=0;l<h;++l)a=f[l],o=d[l],null==a&&"count"!==o&&Object(Me.n)("Null aggregate field specified."),c=Si(o,s=Object(Me.h)(a),p[l]),n.push(c),"count"!==o?((u=m[s])||(i(a),(u=m[s]=[]).field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(ji(o,c))):this._counts.push(c);return this._measures=this._measures.map((function(e){return Ni(e,e.field)})),{}},Ua.cellkey=Ei(),Ua.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},Ua.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new La),n},Ua.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?Ke(t.tuple,o):qe(o)},Ua.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},Ua.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},Ua.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},Ua.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,c=e.add,l=e.rem,f=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&s?l:f).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e};function Va(e){bi.call(this,null,e)}Va.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Ha=Object(Me.y)(Va,bi);Ha.transform=function(e,t){var n,r=!1!==e.interval,i=this._bins(e),a=i.start,o=i.step,u=e.as||["bin0","bin1"],s=u[0],c=u[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(Object(Me.g)(e.field))?t.ADD_MOD:t.ADD,t.visit(n,r?function(e){var t=i(e);e[s]=t,e[c]=null==t?null:a+o*(1+(t-a)/o)}:function(e){e[s]=i(e)}),t.modifies(r?u:s)},Ha._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=$i(e),a=i.step,o=i.start,u=o+Math.ceil((i.stop-o)/a)*a;null!=(t=e.anchor)&&(n=t-(o+a*Math.floor((t-o)/a)),o+=n,u+=n);var s=function(e){var t=r(e);return null==t?null:t<o?-1/0:t>u?1/0:(t=Math.max(o,Math.min(+t,u-a)),o+a*Math.floor(1e-14+(t-o)/a))};return s.start=o,s.stop=i.stop,s.step=a,this.value=Object(Me.f)(s,Object(Me.g)(r),e.name||"bin_"+Object(Me.h)(r))};var qa=function(e,t,n){var r=e,i=t||[],a=n||[],o={},u=0;return{add:function(e){a.push(e)},remove:function(e){o[r(e)]=++u},size:function(){return i.length},data:function(e,t){return u&&(i=i.filter((function(e){return!o[r(e)]})),o={},u=0),t&&e&&i.sort(e),a.length&&(i=e?Object(Me.M)(e,i,a.sort(e)):i.concat(a),a=[]),i}}};function Ga(e){bi.call(this,[],e)}function $a(e){rt.call(this,null,Ka,e)}function Ka(e){return this.value&&!e.modified()?this.value:Object(Me.k)(e.fields,e.orders)}function Xa(e){bi.call(this,null,e)}Ga.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(Me.y)(Ga,bi).transform=function(e,t){var n=t.fork(t.ALL),r=qa(Ve,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(Xe(i),a),t.source&&t.source.root&&(this.value.root=t.source.root),n},Object(Me.y)($a,rt),Xa.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Ya=Object(Me.y)(Xa,bi);function Ja(e){bi.call(this,null,e)}Ya.transform=function(e,t){function n(t){return function(n){for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,a)||[],s=0,c=i.length;s<c;++s)o.test(r=i[s])||t(r)}}var r=this._parameterCheck(e,t),i=this._counts,a=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],c=n((function(e){i[e]=1+(i[e]||0)})),l=n((function(e){i[e]-=1}));return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,l)),this._finish(t,s)},Ya._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Ya._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],c=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=qe({}),r[u]=n,r[s]=i,c.add.push(r)):0===i?(r&&c.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,c.mod.push(r));return c.modifies(t)},Ja.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(Me.y)(Ja,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,a,o=[],u={},s=e.length,c=0;c<s;++c)for(u[t]=a=e[c],i=0;i<s;++i)u[n]=e[i],r(u)&&(o.push(qe(u)),(u={})[t]=a);return o}(r,a,o,e.filter||Me.gb)):n.mod=r,n.source=this.value,n.modifies(i)};var Za={kde:sa,mixture:ha,normal:ua,lognormal:pa,uniform:ba};function Qa(e){bi.call(this,null,e)}var eo=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],to={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:eo},{name:"weights",type:"number",array:!0}]};function no(e,t){return e?e.map((function(e,n){return t[n]||Object(Me.h)(e)})):null}function ro(e,t,n){var r,i,a,o,u,s,c=[],l=function(e){return e(o)};if(null==t)c.push(e.map(n));else for(r={},i=0,a=e.length;i<a;++i)o=e[i],(s=r[u=t.map(l)])||(r[u]=s=[],s.dims=u,c.push(s)),s.push(n(o));return c}Qa.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:eo.concat(to)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(Me.y)(Qa,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=function e(t,n){var r=t.function;Object(Me.v)(Za,r)||Object(Me.n)("Unknown distribution function: "+r);var i=Za[r]();for(var a in t)"field"===a?i.data((t.from||n()).map(t[a])):"distributions"===a?i[a](t[a].map((function(t){return e(t,n)}))):"function"===typeof i[a]&&i[a](t[a]);return i}(e.distribution,function(e){return function(){return e.materialize(e.SOURCE).source}}(t)),i=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200,o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&Object(Me.n)("Invalid density method: "+o),e.extent||r.data||Object(Me.n)("Missing density extent parameter."),o=r[o];var u=e.as||["value","density"],s=e.extent||Object(Me.p)(r.data()),c=Pa(o,s,i,a).map((function(e){var t={};return t[u[0]]=e[0],t[u[1]]=e[1],qe(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n};function io(e){bi.call(this,null,e)}function ao(e){rt.call(this,null,oo,e),this.modified(!0)}function oo(e){var t=e.expr;return this.value&&!e.modified("expr")?this.value:Object(Me.f)((function(n){return t(n,e)}),Object(Me.g)(t),Object(Me.h)(t))}function uo(e){bi.call(this,[void 0,void 0],e)}function so(e,t){rt.call(this,e),this.parent=t}io.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},Object(Me.y)(io,bi).transform=function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;for(var n,r=t.materialize(t.SOURCE).source,i=ro(t.source,e.groupby,Me.x),a=e.smooth||!1,o=e.field,u=e.step||function(e,t){return Object(Me.X)(Object(Me.p)(e,t))/30}(r,o),s=Xe((function(e,t){return o(e)-o(t)})),c=e.as||"bin",l=i.length,f=1/0,d=-1/0,p=0;p<l;++p){var h=i[p].sort(s);n=-1;var m,v=Object(Ri.a)(Ji(h,u,a,o));try{for(v.s();!(m=v.n()).done;){var g=m.value;g<f&&(f=g),g>d&&(d=g),h[++n][c]=g}}catch(y){v.e(y)}finally{v.f()}}return this.value={start:f,stop:d,step:u},t.reflow(!0).modifies(c)},Object(Me.y)(ao,rt),uo.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(Me.y)(uo,bi).transform=function(e,t){var n,r=this.value,i=e.field,a=r[0],o=r[1];if(((n=t.changed()||t.modified(i.fields)||e.modified("field"))||null==a)&&(a=1/0,o=-1/0),t.visit(n?t.SOURCE:t.ADD,(function(e){var t=i(e);null!=t&&((t=+t)<a&&(a=t),t>o&&(o=t))})),!Number.isFinite(a)||!Number.isFinite(o)){var u=Object(Me.h)(i);u&&(u=' for field "'.concat(u,'"')),t.dataflow.warn("Infinite extent".concat(u,": [").concat(a,", ").concat(o,"]")),a=o=void 0}this.value=[a,o]};var co=Object(Me.y)(so,rt);function lo(e){bi.call(this,{},e),this._keys=Object(Me.s)();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}co.connect=function(e){return this.targets().add(e),e.source=this},co.add=function(e){this.value.add.push(e)},co.rem=function(e){this.value.rem.push(e)},co.mod=function(e){this.value.mod.push(e)},co.init=function(e){this.value.init(e,e.NO_SOURCE)},co.evaluate=function(){return this.value};var fo=Object(Me.y)(lo,bi);function po(e){rt.call(this,null,ho,e)}function ho(e){return this.value&&!e.modified()?this.value:Object(Me.A)(e.name)?Object(Me.i)(e.name).map((function(e){return Object(Me.t)(e)})):Object(Me.t)(e.name,e.as)}function mo(e){bi.call(this,Object(Me.s)(),e)}function vo(e){bi.call(this,[],e)}function go(e){bi.call(this,[],e)}function yo(e){bi.call(this,null,e)}function bo(e){bi.call(this,[],e)}fo.activate=function(e){this._targets[this._targets.active++]=e},fo.subflow=function(e,t,n,r){var i,a,o=this.value,u=Object(Me.v)(o,e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[e])&&a.tuple,u=(i=n.dataflow).add(new so(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=u,this.activate(u)),u},fo.transform=function(e,t){var n=t.dataflow,r=this,i=e.key,a=e.subflow,o=this._keys,u=e.modified("key");function s(e){return r.subflow(e,a,t)}return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,(function(e){var t=Ve(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(function(e){var t=i(e);o.set(Ve(e),t),s(t).add(e)})),u||t.modified(i.fields)?t.visit(t.MOD,(function(e){var t=Ve(e),n=o.get(t),r=i(e);n===r?s(r).mod(e):(o.set(t,r),s(n).rem(e),s(r).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(function(e){s(o.get(Ve(e))).mod(e)})),u&&t.visit(t.REFLOW,(function(e){var t=Ve(e),n=o.get(t),r=i(e);n!==r&&(o.set(t,r),s(n).rem(e),s(r).add(e))})),o.empty>n.cleanThreshold&&n.runAfter(o.clean),t},Object(Me.y)(po,rt),mo.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(Me.y)(mo,bi).transform=function(e,t){var n=t.dataflow,r=this.value,i=t.fork(),a=i.add,o=i.rem,u=i.mod,s=e.expr,c=!0;function l(t){var n=Ve(t),i=s(t,e),l=r.get(n);i&&l?(r.delete(n),a.push(t)):i||l?c&&i&&!l&&u.push(t):(r.set(n,1),o.push(t))}return t.visit(t.REM,(function(e){var t=Ve(e);r.has(t)?r.delete(t):o.push(e)})),t.visit(t.ADD,(function(t){s(t,e)?a.push(t):r.set(Ve(t),1)})),t.visit(t.MOD,l),e.modified()&&(c=!1,t.visit(t.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},vo.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Object(Me.y)(vo,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=no(r,e.as||[]),a=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,u,s,c=r.map((function(t){return t(e)})),l=c.reduce((function(e,t){return Math.max(e,t.length)}),0),f=0;f<l;++f){for(u=Ge(e),t=0;t<o;++t)u[i[t]]=null==(s=c[t][f])?null:s;a&&(u[a]=f),n.add.push(u)}})),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(i)},go.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(Me.y)(go,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Me.h),a=e.as||["key","value"],o=a[0],u=a[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,a=0;a<s;++a)(t=Ge(e))[o]=i[a],t[u]=r[a](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(a)},yo.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(Me.y)(yo,bi).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,(function(t){return t[r]=n(t,e)}))},Object(Me.y)(bo,bi).transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),u=e.size-a.length,s=e.generator;if(u>0){for(n=[];--u>=0;)n.push(i=qe(s(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var xo={value:"value",median:Ra,mean:function(e,t){var n=0,r=0;if(void 0===t){var i,a=Object(Ri.a)(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(o=+o)>=o&&(++n,r+=o)}}catch(f){a.e(f)}finally{a.f()}}else{var u,s=-1,c=Object(Ri.a)(e);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=t(l,++s,e))&&(l=+l)>=l&&(++n,r+=l)}}catch(f){c.e(f)}finally{c.f()}}if(n)return r/n},min:Pi,max:Fi},wo=[];function Oo(e){bi.call(this,[],e)}function ko(e){Wa.call(this,e)}Oo.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(Me.y)(Oo,bi).transform=function(e,t){var n,r,i,a,o,u,s,c,l,f,d=t.fork(t.ALL),p=function(e){var t,n=e.method||xo.value;if(null!=xo[n])return n===xo.value?(t=void 0!==e.value?e.value:0,function(){return t}):xo[n];Object(Me.n)("Unrecognized imputation method: "+n)}(e),h=function(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),m=Object(Me.h)(e.field),v=Object(Me.h)(e.key),g=(e.groupby||[]).map(Me.h),y=function(e,t,n,r){var i,a,o,u,s,c,l,f,d=function(e){return e(f)},p=[],h=r?r.slice():[],m={},v={};for(h.forEach((function(e,t){m[e]=t+1})),u=0,l=e.length;u<l;++u)f=e[u],c=n(f),s=m[c]||(m[c]=h.push(c)),a=(i=t?t.map(d):wo)+"",(o=v[a])||(o=v[a]=[],p.push(o),o.values=i),o[s-1]=f;return p.domain=h,p}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,w=y.domain.length;for(o=0,c=y.length;o<c;++o)for(i=(n=y[o]).values,r=NaN,s=0;s<w;++s)if(null==n[s]){for(a=y.domain[s],f={_impute:!0},u=0,l=i.length;u<l;++u)f[g[u]]=i[u];f[v]=a,f[m]=Number.isNaN(r)?r=p(n,h):r,b.push(qe(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=b,d},ko.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:_i},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var Eo=Object(Me.y)(ko,Wa);function So(e){bi.call(this,null,e)}function Co(e){rt.call(this,null,_o,e)}function _o(e){return this.value&&!e.modified()?this.value:Object(Me.I)(e.fields,e.flat)}function jo(e){bi.call(this,[],e),this._pending=null}function Ao(e,t,n){n.forEach(qe);var r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r}function To(e){bi.call(this,{},e)}function No(e){rt.call(this,null,Ro,e)}function Ro(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function Do(e){rt.call(this,null,Io,e)}function Io(e){return this.value&&!e.modified()?this.value:e.values.reduce((function(e,t){return e.concat(t)}),[])}function Mo(e){bi.call(this,null,e)}function Fo(e){Wa.call(this,e)}Eo.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs,!0))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,(function(e){r.add(e)}))):(n=r.value=r.value||this.init(e),t.visit(t.REM,(function(e){r.rem(e)})),t.visit(t.ADD,(function(e){r.add(e)}))),r.changes(),t.visit(t.SOURCE,(function(e){Object(Me.o)(e,n[r.cellkey(e)].tuple)})),t.reflow(i).modifies(this._outputs)},Eo.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},So.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(Me.y)(So,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,i=ro(r,e.groupby,e.field),a=(e.groupby||[]).map(Me.h),o=e.bandwidth,u=e.cumulative?"cdf":"pdf",s=e.as||["value","density"],c=[],l=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==u&&"cdf"!==u&&Object(Me.n)("Invalid density method: "+u),"shared"===e.resolve&&(l||(l=Object(Me.p)(r,e.field)),f=d=e.steps||d),i.forEach((function(t){var n=sa(t,o)[u],r=e.counts?t.length:1,i=l||Object(Me.p)(t);Pa(n,i,f,d).forEach((function(e){for(var n={},i=0;i<a.length;++i)n[a[i]]=t.dims[i];n[s[0]]=e[0],n[s[1]]=e[1]*r,c.push(qe(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n},Object(Me.y)(Co,rt),Object(Me.y)(jo,bi).transform=function(e,t){var n=this,r=t.dataflow;return this._pending?Ao(this,t,this._pending):function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?Ao(this,t,r.parse(e.values,e.format)):e.async?{async:r.request(e.url,e.format).then((function(e){return n._pending=Object(Me.i)(e.data),function(e){return e.touch(n)}}))}:r.request(e.url,e.format).then((function(e){return Ao(n,t,Object(Me.i)(e.data))}))},To.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(Me.y)(To,bi).transform=function(e,t){var n,r,i=t,a=e.as,o=e.fields,u=e.index,s=e.values,c=null==e.default?null:e.default,l=e.modified(),f=l?t.SOURCE:t.ADD,d=o.length;return s?(r=s.length,d>1&&!a&&Object(Me.n)('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*r&&Object(Me.n)('The "as" parameter has too few output field names.'),a=a||s.map(Me.h),n=function(e){for(var t,n,i=0,l=0;i<d;++i)if(null==(n=u.get(o[i](e))))for(t=0;t<r;++t,++l)e[a[l]]=c;else for(t=0;t<r;++t,++l)e[a[l]]=s[t](n)}):(a||Object(Me.n)("Missing output field names."),n=function(e){for(var t,n=0;n<d;++n)t=u.get(o[n](e)),e[a[n]]=null==t?c:t}),l?i=t.reflow(!0):f|=o.some((function(e){return t.modified(e.fields)}))?t.MOD:0,t.visit(f,n),i.modifies(a)},Object(Me.y)(No,rt),Object(Me.y)(Do,rt),Object(Me.y)(Mo,bi),Mo.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},Fo.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:_i,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var Po=Object(Me.y)(Fo,Wa);function zo(e){lo.call(this,e)}function Lo(e){bi.call(this,null,e)}function Bo(e){bi.call(this,null,e)}Po._transform=Po.transform,Po.transform=function(e,t){return this._transform(function(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",a=Object(Me.g)(n).concat(Object(Me.g)(r)),o=function(e,t,n){var r={},i=[];return n.visit(n.SOURCE,(function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort((function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)})),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:o.map((function(){return i})),fields:o.map((function(e){return function(e,t,n,r){return Object(Me.f)((function(r){return t(r)===e?n(r):NaN}),r,e+"")}(e,n,r,a)})),as:o.map((function(e){return e+""})),modified:e.modified.bind(e)}}(e,t),t)},Object(Me.y)(zo,lo).transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(Object(Me.g)(i)))&&Object(Me.n)("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,(function(e){var a=n.subflow(Ve(e),r,t,e);i?i(e).forEach((function(e){a.mod(e)})):a.mod(e)})),t.visit(t.ADD,(function(e){var a=n.subflow(Ve(e),r,t,e);i?i(e).forEach((function(e){a.add(qe(e))})):a.add(e)})),t.visit(t.REM,(function(e){var a=n.subflow(Ve(e),r,t,e);i?i(e).forEach((function(e){a.rem(e)})):a.rem(e)})),t},Lo.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(Me.y)(Lo,bi).transform=function(e,t){var n,r,i=e.fields,a=no(e.fields,e.as||[]),o=i?function(e,t){return function(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,i,a)}:$e;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=Ve(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=o(e,qe({}));r[Ve(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){n.mod.push(o(e,r[Ve(e)]))})),n},Object(Me.y)(Bo,bi).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var Wo=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a};function Uo(e){bi.call(this,null,e)}Uo.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};var Vo=Object(Me.y)(Uo,bi);function Ho(e){bi.call(this,null,e)}function qo(e){bi.call(this,[],e),this.count=0}function Go(e){bi.call(this,null,e)}function $o(e){bi.call(this,null,e),this.modified(!0)}Vo.transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;var i=ro(t.materialize(t.SOURCE).source,e.groupby,e.field),a=(e.groupby||[]).map(Me.h),o=[],u=e.step||.01,s=e.probs||Wo(u/2,1-1e-14,u),c=s.length;return i.forEach((function(e){for(var t=Vi(e,s),n=0;n<c;++n){for(var i={},u=0;u<a.length;++u)i[a[u]]=e.dims[u];i[r[0]]=s[n],i[r[1]]=t[n],o.push(qe(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n},Object(Me.y)(Ho,bi).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=Ve(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=Ge(e);r[Ve(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){var t,i=r[Ve(e)];for(t in e)i[t]=e[t],n.modifies(t);n.mod.push(i)}))),n},qo.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(Me.y)(qo,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,a=this.value,o=this.count,u=0,s=a.reduce((function(e,t){return e[Ve(t)]=1,e}),{});function c(e){var t,r;a.length<i?a.push(e):(r=~~((o+1)*Ki()))<a.length&&r>=u&&(t=a[r],s[Ve(t)]&&n.rem.push(t),a[r]=e),++o}if(t.rem.length&&(t.visit(t.REM,(function(e){var t=Ve(e);s[t]&&(s[t]=-1,n.rem.push(e)),--o})),a=a.filter((function(e){return-1!==s[Ve(e)]}))),(t.rem.length||r)&&a.length<i&&t.source&&(u=o=a.length,t.visit(t.SOURCE,(function(e){s[Ve(e)]||c(e)})),u=-1),r&&a.length>i){for(var l=0,f=a.length-i;l<f;++l)s[Ve(a[l])]=-1,n.rem.push(a[l]);a=a.slice(f)}return t.mod.length&&t.visit(t.MOD,(function(e){s[Ve(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,c),(t.add.length||u<0)&&(n.add=a.filter((function(e){return!s[Ve(e)]}))),this.count=o,this.value=n.source=a,n},Go.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(Me.y)(Go,bi).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Wo(e.start,e.stop,e.step||1).map((function(e){var t={};return t[r]=e,qe(t)})),n.add=t.add.concat(this.value),n}},Object(Me.y)($o,bi).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation};var Ko="year",Xo="quarter",Yo="month",Jo="week",Zo="date",Qo="day",eu="hours",tu="minutes",nu="seconds",ru="milliseconds",iu=[Ko,Xo,Yo,Jo,Zo,Qo,eu,tu,nu,ru].reduce((function(e,t,n){return e[t]=1+n,e}),{});function au(e){var t=Object(Me.i)(e).slice(),n={};return t.length||Object(Me.n)("Missing time unit."),t.forEach((function(e){Object(Me.v)(iu,e)?n[e]=1:Object(Me.n)("Invalid time unit: ".concat(e,"."))})),(n[Jo]||n[Qo])&&(n[Xo]||n[Yo]||n[Zo])&&Object(Me.n)("Incompatible time units: ".concat(e)),t.sort((function(e,t){return iu[e]-iu[t]})),t}var ou,uu,su=n(9),cu=new Date;function lu(e,t,n,r){var i=t||1,a=Object(Me.U)(e),o=function(e,t,r){return function(e,t,n){return t<=1?e:n?function(r,i){return n+t*Math.floor((e(r,i)-n)/t)}:function(n,r){return t*Math.floor(e(n,r)/t)}}(n[r||e],e===a&&i,t)},u=new Date,s=Object(Me.db)(e),c=s[Ko]?o(Ko):Object(Me.l)(2012),l=s[Yo]?o(Yo):s[Xo]?o(Xo):Me.kb,f=s[Jo]&&s[Qo]?o(Qo,1,Jo+Qo):s[Jo]?o(Jo,1):s[Qo]?o(Qo,1):s[Zo]?o(Zo,1):Me.O,d=s[eu]?o(eu):Me.kb,p=s[tu]?o(tu):Me.kb,h=s[nu]?o(nu):Me.kb,m=s[ru]?o(ru):Me.kb;return function(e){u.setTime(+e);var t=c(u);return r(t,l(u),f(u,t),d(u),p(u),h(u),m(u))}}function fu(e,t,n){return t+7*e-(n+6)%7}var du=(ou={},Object(su.a)(ou,Ko,(function(e){return e.getFullYear()})),Object(su.a)(ou,Xo,(function(e){return 3*~~(e.getMonth()/3)})),Object(su.a)(ou,Yo,(function(e){return e.getMonth()})),Object(su.a)(ou,Zo,(function(e){return e.getDate()})),Object(su.a)(ou,eu,(function(e){return e.getHours()})),Object(su.a)(ou,tu,(function(e){return e.getMinutes()})),Object(su.a)(ou,nu,(function(e){return e.getSeconds()})),Object(su.a)(ou,ru,(function(e){return e.getMilliseconds()})),Object(su.a)(ou,Qo,(function(e,t){return fu(1,e.getDay(),mu(t))})),Object(su.a)(ou,Jo,(function(e,t){return fu(hu(e),0,mu(t))})),Object(su.a)(ou,Jo+Qo,(function(e,t){return fu(hu(e),e.getDay(),mu(t))})),ou);function pu(e){return cu.setFullYear(e),cu.setMonth(0),cu.setDate(1),cu.setHours(0,0,0,0),cu}function hu(e){return hn.count(pu(e.getFullYear())-1,e)}function mu(e){return pu(e).getDay()}function vu(e,t,n,r,i,a,o){if(0<=e&&e<100){var u=new Date(-1,t,n,r,i,a,o);return u.setFullYear(e),u}return new Date(e,t,n,r,i,a,o)}function gu(e,t){return lu(e,t||1,du,vu)}var yu=(uu={},Object(su.a)(uu,Ko,(function(e){return e.getUTCFullYear()})),Object(su.a)(uu,Xo,(function(e){return 3*~~(e.getUTCMonth()/3)})),Object(su.a)(uu,Yo,(function(e){return e.getUTCMonth()})),Object(su.a)(uu,Zo,(function(e){return e.getUTCDate()})),Object(su.a)(uu,eu,(function(e){return e.getUTCHours()})),Object(su.a)(uu,tu,(function(e){return e.getUTCMinutes()})),Object(su.a)(uu,nu,(function(e){return e.getUTCSeconds()})),Object(su.a)(uu,ru,(function(e){return e.getUTCMilliseconds()})),Object(su.a)(uu,Qo,(function(e,t){return fu(1,e.getUTCDay(),xu(t))})),Object(su.a)(uu,Jo,(function(e,t){return fu(bu(e),0,xu(t))})),Object(su.a)(uu,Jo+Qo,(function(e,t){return fu(bu(e),e.getUTCDay(),xu(t))})),uu);function bu(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return rn.count(t-1,e)}function xu(e){return cu.setTime(Date.UTC(e,0,1)),cu.getUTCDay()}function wu(e,t,n,r,i,a,o){if(0<=e&&e<100){var u=new Date(Date.UTC(-1,t,n,r,i,a,o));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,r,i,a,o))}function Ou(e,t){return lu(e,t||1,yu,wu)}var ku=tn((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),Eu=ku,Su=(ku.range,tn((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()}))),Cu=Su,_u=(Su.range,tn((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()}))),ju=_u,Au=(_u.range,tn((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()}))),Tu=Au,Nu=(Au.range,tn((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));Nu.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?tn((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Nu:null};var Ru,Du,Iu,Mu=Nu,Fu=(Nu.range,tn((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Pu=Fu,zu=(Fu.range,tn((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()}))),Lu=zu,Bu=(zu.range,tn((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()}))),Wu=Bu,Uu=(Bu.range,Ru={},Object(su.a)(Ru,Ko,En),Object(su.a)(Ru,Xo,Eu.every(3)),Object(su.a)(Ru,Yo,Eu),Object(su.a)(Ru,Jo,hn),Object(su.a)(Ru,Zo,On),Object(su.a)(Ru,Qo,On),Object(su.a)(Ru,eu,Cu),Object(su.a)(Ru,tu,ju),Object(su.a)(Ru,nu,Tu),Object(su.a)(Ru,ru,Mu),Ru),Vu=(Du={},Object(su.a)(Du,Ko,Cn),Object(su.a)(Du,Xo,Pu.every(3)),Object(su.a)(Du,Yo,Pu),Object(su.a)(Du,Jo,rn),Object(su.a)(Du,Zo,dn),Object(su.a)(Du,Qo,dn),Object(su.a)(Du,eu,Lu),Object(su.a)(Du,tu,Wu),Object(su.a)(Du,nu,Tu),Object(su.a)(Du,ru,Mu),Du);function Hu(e){return Uu[e]}function qu(e){return Vu[e]}function Gu(e,t,n){return e?e.offset(t,n):void 0}function $u(e,t,n){return Gu(Hu(e),t,n)}function Ku(e,t,n){return Gu(qu(e),t,n)}function Xu(e,t,n,r){return e?e.range(t,n,r):void 0}function Yu(e,t,n,r){return Xu(Hu(e),t,n,r)}function Ju(e,t,n,r){return Xu(qu(e),t,n,r)}var Zu=(Iu={},Object(su.a)(Iu,Ko,"%Y "),Object(su.a)(Iu,Xo,"Q%q "),Object(su.a)(Iu,Yo,"%b "),Object(su.a)(Iu,Zo,"%d "),Object(su.a)(Iu,Jo,"W%U "),Object(su.a)(Iu,Qo,"%a "),Object(su.a)(Iu,eu,"%H:00"),Object(su.a)(Iu,tu,"00:%M"),Object(su.a)(Iu,nu,":%S"),Object(su.a)(Iu,ru,".%L"),Object(su.a)(Iu,"".concat(Ko,"-").concat(Yo),"%Y-%m "),Object(su.a)(Iu,"".concat(Ko,"-").concat(Yo,"-").concat(Zo),"%Y-%m-%d "),Object(su.a)(Iu,"".concat(eu,"-").concat(tu),"%H:%M"),Iu);function Qu(e,t){var n,r,i=Object(Me.o)({},Zu,t),a=au(e),o=a.length,u="",s=0;for(s=0;s<o;)for(n=a.length;n>s;--n)if(null!=i[r=a.slice(s,n).join("-")]){u+=i[r],s=n;break}return u.trim()}function es(e){return ns(Nn,Hu,e)}function ts(e){return ns(Dn,qu,e)}function ns(e,t,n){return Object(Me.H)(n)?e(n):function(e,t,n){n=n||{},Object(Me.F)(n)||Object(Me.n)("Invalid time multi-format specifier: ".concat(n));var r=t(nu),i=t(tu),a=t(eu),o=t(Zo),u=t(Jo),s=t(Yo),c=t(Xo),l=t(Ko),f=e(n[ru]||".%L"),d=e(n[nu]||":%S"),p=e(n[tu]||"%I:%M"),h=e(n[eu]||"%I %p"),m=e(n[Zo]||n[Qo]||"%a %d"),v=e(n[Jo]||"%b %d"),g=e(n[Yo]||"%B"),y=e(n[Xo]||"%B"),b=e(n[Ko]||"%Y");return function(e){return(r(e)<e?f:i(e)<e?d:a(e)<e?p:o(e)<e?h:s(e)<e?u(e)<e?m:v:l(e)<e?c(e)<e?g:y:b)(e)}}(e,t,n)}var rs=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return Mi(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}};var is=Math.sqrt(50),as=Math.sqrt(10),os=Math.sqrt(2),us=function(e,t,n){var r,i,a,o,u=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=ss(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(e+u)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(e-u)/o;return r&&a.reverse(),a};function ss(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=is?10:a>=as?5:a>=os?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=is?10:a>=as?5:a>=os?2:1)}function cs(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=is?i*=10:a>=as?i*=5:a>=os&&(i*=2),t<e?-i:i}var ls=[Ko,Yo,Zo,eu,tu,nu,ru],fs=ls.slice(0,-1),ds=fs.slice(0,-1),ps=ds.slice(0,-1),hs=ps.slice(0,-1),ms=[Ko,Yo],vs=[Ko],gs=[[fs,1,1e3],[fs,5,5e3],[fs,15,15e3],[fs,30,3e4],[ds,1,6e4],[ds,5,3e5],[ds,15,9e5],[ds,30,18e5],[ps,1,36e5],[ps,3,108e5],[ps,6,216e5],[ps,12,432e5],[hs,1,864e5],[[Ko,Jo],1,6048e5],[ms,1,2592e6],[ms,3,7776e6],[vs,1,31536e6]],ys=function(e){var t,n,r=e.extent,i=e.maxbins||40,a=Math.abs(Object(Me.X)(r))/i,o=rs((function(e){return e[2]})).right(gs,a);return o===gs.length?(t=vs,n=cs(r[0]/31536e6,r[1]/31536e6,i)):o?(t=(o=gs[a/gs[o-1][2]<gs[o][2]/a?o-1:o])[0],n=o[1]):(t=ls,n=Math.max(cs(r[0],r[1],i),1)),{units:t,step:n}};function bs(e){bi.call(this,null,e)}var xs=["unit0","unit1"];bs.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"string",array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:xs}]};var ws=Object(Me.y)(bs,bi);function Os(e){bi.call(this,Object(Me.s)(),e)}function ks(e){bi.call(this,null,e)}ws.transform=function(e,t){var n=e.field,r=!1!==e.interval,i="utc"===e.timezone,a=this._floor(e,t),o=(i?qu:Hu)(a.unit).offset,u=e.as||xs,s=u[0],c=u[1],l=a.start||1/0,f=a.stop||-1/0,d=a.step,p=t.ADD;return(e.modified()||t.modified(Object(Me.g)(n)))&&(p=(t=t.reflow(!0)).SOURCE,l=1/0,f=-1/0),t.visit(p,(function(e){var t,i,u=n(e);null==u?(e[s]=null,r&&(e[c]=null)):(e[s]=t=i=a(u),r&&(e[c]=i=o(t,d)),t<l&&(l=t),i>f&&(f=i))})),a.start=l,a.stop=f,t.modifies(r?u:s)},ws._floor=function(e,t){var n="utc"===e.timezone,r=e.units?{units:e.units,step:e.step||1}:ys({extent:e.extent||Object(Me.p)(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),i=r.units,a=r.step;i=au(i);var o=this.value||{},u=(n?Ou:gu)(i,a);return u.unit=Object(Me.U)(i),u.units=i,u.step=a,u.start=o.start,u.stop=o.stop,this.value=u},Object(Me.y)(Os,bi).transform=function(e,t){var n=t.dataflow,r=e.field,i=this.value,a=!0;function o(e){i.set(r(e),e)}return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,(function(e){i.delete(r(e))})),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()},Object(Me.y)(ks,bi).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Xe(e.sort)):t.source).map(e.field))};var Es={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=Es.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){return e=0},next:function(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function(e,t){(t=+t)>0||Object(Me.n)("ntile num must be greater than zero.");var n=Es.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return(t=+t)>0||Object(Me.n)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){var t;return{init:function(){return t=null},next:function(n){var r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){var t,n;return{init:function(){return t=null,n=-1},next:function(r){var i=r.data;return r.index<=n?t:(n=function(e,t,n){for(var r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};var Ss=Object.keys(Es);function Cs(e){var t=Object(Me.i)(e.ops),n=Object(Me.i)(e.fields),r=Object(Me.i)(e.params),i=Object(Me.i)(e.as),a=this.outputs=[],o=this.windows=[],u={},s={},c=!0,l=[],f=[];function d(e){Object(Me.i)(Object(Me.g)(e)).forEach((function(e){return u[e]=1}))}d(e.sort),t.forEach((function(e,t){var u=n[t],p=Object(Me.h)(u),h=Si(e,p,i[t]);if(d(u),a.push(h),Object(Me.v)(Es,e))o.push(function(e,t,n,r){var i=Es[e](t,n);return{init:i.init||Me.kb,update:function(e,t){t[r]=i.next(e)}}}(e,n[t],r[t],h));else{if(null==u&&"count"!==e&&Object(Me.n)("Null aggregate field specified."),"count"===e)return void l.push(h);c=!1;var m=s[p];m||((m=s[p]=[]).field=u,f.push(m)),m.push(ji(e,h))}})),(l.length||f.length)&&(this.cell=function(e,t,n){e=e.map((function(e){return Ni(e,e.field)}));var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var u=r.data=new La;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(u&&u.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<i;++e)a[e].init()},r}(f,l,c)),this.inputs=Object.keys(u)}var _s=Cs.prototype;function js(e){bi.call(this,{},e),this._mlen=0,this._mods=[]}_s.init=function(){this.windows.forEach((function(e){return e.init()})),this.cell&&this.cell.init()},_s.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)},js.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ss.concat(_i)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var As=Object(Me.y)(js,bi);function Ts(e,t,n,r){var i=r.sort,a=i&&!r.ignorePeers,o=r.frame||[null,0],u=e.data(n),s=u.length,c=0,l=a?rs(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:i||Object(Me.l)(-1)};for(t.init();c<s;++c)Ns(f,o,c,s),a&&Rs(f,l),t.update(f,u[c])}function Ns(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Rs(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}As.transform=function(e,t){var n,r,i=this,a=i.state,o=e.modified(),u=Xe(e.sort);this.stamp=t.stamp,a&&!o||(a=i.state=new Cs(e));var s=Ei(e.groupby);function c(e){return i.group(s(e))}for(o||t.modified(a.inputs)?(i.value={},t.visit(t.SOURCE,(function(e){c(e).add(e)}))):(t.visit(t.REM,(function(e){c(e).remove(e)})),t.visit(t.ADD,(function(e){c(e).add(e)}))),n=0,r=i._mlen;n<r;++n)Ts(i._mods[n],a,u,e);return i._mlen=0,i._mods=[],t.reflow(o).modifies(a.outputs)},As.group=function(e){var t=this.value[e];return t||((t=this.value[e]=qa(Ve)).stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t};var Ds="top",Is="left",Ms="right",Fs="end",Ps="row";function zs(e){this.clear(),e&&this.union(e)}var Ls=zs.prototype;Ls.clone=function(){return new zs(this)},Ls.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Ls.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Ls.equals=function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},Ls.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},Ls.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},Ls.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},Ls.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Ls.scale=function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},Ls.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},Ls.rotate=function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},Ls.rotatedPoints=function(e,t,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*i+c,s*r+u*i+l,u*r-s*o+c,s*r+u*o+l,u*a-s*i+c,s*a+u*i+l,u*a-s*o+c,s*a+u*o+l]},Ls.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},Ls.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},Ls.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},Ls.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},Ls.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},Ls.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},Ls.width=function(){return this.x2-this.x1},Ls.height=function(){return this.y2-this.y1};var Bs=0;function Ws(e){return e&&e.gradient}function Us(e,t,n){var r=e.id,i=e.gradient,a="radial"===i?"p_":"";return r||(r=e.id="gradient_"+Bs++,"radial"===i?(e.x1=Vs(e.x1,.5),e.y1=Vs(e.y1,.5),e.r1=Vs(e.r1,0),e.x2=Vs(e.x2,.5),e.y2=Vs(e.y2,.5),e.r2=Vs(e.r2,.5),a="p_"):(e.x1=Vs(e.x1,0),e.y1=Vs(e.y1,0),e.x2=Vs(e.x2,1),e.y2=Vs(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Vs(e,t){return null!=e?e:t}var Hs=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}};function qs(e){this.mark=e,this.bounds=this.bounds||new zs}function Gs(e){qs.call(this,e),this.items=this.items||[]}function $s(e,t){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}function Ks(){return"undefined"!==typeof Image?Image:null}function Xs(e){this._pending=0,this._loader=e||Kr()}Object(Me.y)(Gs,qs);var Ys=Xs.prototype;function Js(e){e._pending+=1}function Zs(e){e._pending-=1}function Qs(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ec(e){this._context=e}Ys.pending=function(){return this._pending},Ys.sanitizeURL=function(e){var t=this;return Js(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return Zs(t),e})).catch((function(){return Zs(t),null}))},Ys.loadImage=function(e){var t=this,n=Ks();return Js(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n,a=Object(Me.v)(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=a&&(i.crossOrigin=a),i.onload=function(){return Zs(t)},i.onerror=function(){return Zs(t)},i.src=r,i})).catch((function(e){return Zs(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},Ys.ready=function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))},ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Qs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Qs(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var tc=function(){};function nc(e){this._context=e}nc.prototype={areaStart:tc,areaEnd:tc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Qs(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rc(e){this._context=e}rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Qs(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ic(e,t){this._basis=new ec(e),this._beta=t}ic.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+r*o),this._beta*t[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var ac=function e(t){function n(e){return 1===t?new ec(e):new ic(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function oc(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function uc(e,t){this._context=e,this._k=(1-t)/6}uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:oc(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:oc(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var sc=function e(t){function n(e){return new uc(e,t)}return n.tension=function(t){return e(+t)},n}(0);function cc(e,t){this._context=e,this._k=(1-t)/6}cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oc(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var lc=function e(t){function n(e){return new cc(e,t)}return n.tension=function(t){return e(+t)},n}(0);function fc(e,t){this._context=e,this._k=(1-t)/6}fc.prototype={areaStart:tc,areaEnd:tc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:oc(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var dc=function e(t){function n(e){return new fc(e,t)}return n.tension=function(t){return e(+t)},n}(0),pc=Math.abs,hc=Math.atan2,mc=Math.cos,vc=Math.max,gc=Math.min,yc=Math.sin,bc=Math.sqrt,xc=Math.PI,wc=xc/2,Oc=2*xc;function kc(e){return e>1?0:e<-1?xc:Math.acos(e)}function Ec(e){return e>=1?wc:e<=-1?-wc:Math.asin(e)}function Sc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>1e-12){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>1e-12){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Cc(e,t){this._context=e,this._alpha=t}Cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Sc(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var _c=function e(t){function n(e){return t?new Cc(e,t):new uc(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function jc(e,t){this._context=e,this._alpha=t}jc.prototype={areaStart:tc,areaEnd:tc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Sc(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ac=function e(t){function n(e){return t?new jc(e,t):new fc(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Tc(e,t){this._context=e,this._alpha=t}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sc(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Nc=function e(t){function n(e){return t?new Tc(e,t):new cc(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Rc(e){this._context=e}Rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var Dc=function(e){return new Rc(e)};function Ic(e){this._context=e}Ic.prototype={areaStart:tc,areaEnd:tc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Mc(e){return e<0?-1:1}function Fc(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(Mc(a)+Mc(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function Pc(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function zc(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function Lc(e){this._context=e}function Bc(e){this._context=new Wc(e)}function Wc(e){this._context=e}function Uc(e){this._context=e}function Vc(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}Lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zc(this,this._t0,Pc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zc(this,Pc(this,n=Fc(this,e,t)),n);break;default:zc(this,this._t0,n=Fc(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Bc.prototype=Object.create(Lc.prototype)).point=function(e,t){Lc.prototype.point.call(this,t,e)},Wc.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Vc(e),i=Vc(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Hc(e,t){this._context=e,this._t=t}Hc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var qc={basis:{curve:function(e){return new ec(e)}},"basis-closed":{curve:function(e){return new nc(e)}},"basis-open":{curve:function(e){return new rc(e)}},bundle:{curve:ac,tension:"beta",value:.85},cardinal:{curve:sc,tension:"tension",value:0},"cardinal-open":{curve:lc,tension:"tension",value:0},"cardinal-closed":{curve:dc,tension:"tension",value:0},"catmull-rom":{curve:_c,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Ac,tension:"alpha",value:.5},"catmull-rom-open":{curve:Nc,tension:"alpha",value:.5},linear:{curve:Dc},"linear-closed":{curve:function(e){return new Ic(e)}},monotone:{horizontal:function(e){return new Bc(e)},vertical:function(e){return new Lc(e)}},natural:{curve:function(e){return new Uc(e)}},step:{curve:function(e){return new Hc(e,.5)}},"step-after":{curve:function(e){return new Hc(e,1)}},"step-before":{curve:function(e){return new Hc(e,0)}}};function Gc(e,t,n){var r=Object(Me.v)(qc,e)&&qc[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var $c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Kc=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],Xc=function(e){var t,n,r,i,a,o,u,s,c,l,f,d=[];for(s=0,l=(t=e.slice().replace(Kc[0],"###$1").split(Kc[1]).slice(1)).length;s<l;++s){for(r=(n=t[s]).slice(1).trim().replace(Kc[2],"$1###$2").split(Kc[3]),i=[o=n.charAt(0)],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(u=$c[o.toLowerCase()],i.length-1>u)for(c=1,f=i.length;c<f;c+=u)d.push([o].concat(i.slice(c,c+u)));else d.push(i)}return d},Yc=Math.PI/180,Jc=Math.PI/2,Zc=2*Math.PI,Qc=Math.sqrt(3)/2,el={},tl={},nl=[].join;function rl(e){var t=nl.call(e);if(tl[t])return tl[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,d=s*o,p=c*u,h=Math.cos(i),m=Math.sin(i),v=Math.cos(a),g=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),w=n+h-x*m,O=r+m+x*h,k=n+v,E=r+g,S=k+x*g,C=E-x*v;return tl[t]=[l*w+f*O,d*w+p*O,l*S+f*C,d*S+p*C,l*k+f*E,d*k+p*E]}var il=["l",0,0,0,0,0,0,0];function al(e,t,n){var r=il[0]=e[0];if("a"===r||"A"===r)il[1]=t*e[1],il[2]=n*e[2],il[3]=e[3],il[4]=e[4],il[5]=e[5],il[6]=t*e[6],il[7]=n*e[7];else if("h"===r||"H"===r)il[1]=t*e[1];else if("v"===r||"V"===r)il[1]=n*e[1];else for(var i=1,a=e.length;i<a;++i)il[i]=(i%2==1?t:n)*e[i];return il}var ol=function(e,t,n,r,i,a){var o,u,s,c,l,f=null,d=0,p=0,h=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==a&&(a=i),e.beginPath&&e.beginPath();for(var v=0,g=t.length;v<g;++v){switch(o=t[v],1===i&&1===a||(o=al(o,i,a)),o[0]){case"l":d+=o[1],p+=o[2],e.lineTo(d+n,p+r);break;case"L":d=o[1],p=o[2],e.lineTo(d+n,p+r);break;case"h":d+=o[1],e.lineTo(d+n,p+r);break;case"H":d=o[1],e.lineTo(d+n,p+r);break;case"v":p+=o[1],e.lineTo(d+n,p+r);break;case"V":p=o[1],e.lineTo(d+n,p+r);break;case"m":d+=o[1],p+=o[2],e.moveTo(d+n,p+r);break;case"M":d=o[1],p=o[2],e.moveTo(d+n,p+r);break;case"c":u=d+o[5],s=p+o[6],h=d+o[3],m=p+o[4],e.bezierCurveTo(d+o[1]+n,p+o[2]+r,h+n,m+r,u+n,s+r),d=u,p=s;break;case"C":d=o[5],p=o[6],h=o[3],m=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,h+n,m+r,d+n,p+r);break;case"s":u=d+o[3],s=p+o[4],h=2*d-h,m=2*p-m,e.bezierCurveTo(h+n,m+r,d+o[1]+n,p+o[2]+r,u+n,s+r),h=d+o[1],m=p+o[2],d=u,p=s;break;case"S":u=o[3],s=o[4],h=2*d-h,m=2*p-m,e.bezierCurveTo(h+n,m+r,o[1]+n,o[2]+r,u+n,s+r),d=u,p=s,h=o[1],m=o[2];break;case"q":u=d+o[3],s=p+o[4],h=d+o[1],m=p+o[2],e.quadraticCurveTo(h+n,m+r,u+n,s+r),d=u,p=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),d=u,p=s,h=o[1],m=o[2];break;case"t":u=d+o[1],s=p+o[2],null===f[0].match(/[QqTt]/)?(h=d,m=p):"t"===f[0]?(h=2*d-c,m=2*p-l):"q"===f[0]&&(h=2*d-h,m=2*p-m),c=h,l=m,e.quadraticCurveTo(h+n,m+r,u+n,s+r),p=s,h=(d=u)+o[1],m=p+o[2];break;case"T":u=o[1],s=o[2],h=2*d-h,m=2*p-m,e.quadraticCurveTo(h+n,m+r,u+n,s+r),d=u,p=s;break;case"a":ul(e,d+n,p+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+p+r]),d+=o[6],p+=o[7];break;case"A":ul(e,d+n,p+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],p=o[7];break;case"z":case"Z":e.closePath()}f=o}};function ul(e,t,n,r){for(var i=function(e,t,n,r,i,a,o,u,s){var c=nl.call(arguments);if(el[c])return el[c];var l=o*Yc,f=Math.sin(l),d=Math.cos(l),p=d*(u-e)*.5+f*(s-t)*.5,h=d*(s-t)*.5-f*(u-e)*.5,m=p*p/((n=Math.abs(n))*n)+h*h/((r=Math.abs(r))*r);m>1&&(n*=m=Math.sqrt(m),r*=m);var v=d/n,g=f/n,y=-f/r,b=d/r,x=v*u+g*s,w=y*u+b*s,O=v*e+g*t,k=y*e+b*t,E=(O-x)*(O-x)+(k-w)*(k-w),S=1/E-.25;S<0&&(S=0);var C=Math.sqrt(S);a==i&&(C=-C);var _=.5*(x+O)-C*(k-w),j=.5*(w+k)+C*(O-x),A=Math.atan2(w-j,x-_),T=Math.atan2(k-j,O-_),N=T-A;N<0&&1===a?N+=Zc:N>0&&0===a&&(N-=Zc);for(var R=Math.ceil(Math.abs(N/(Jc+.001))),D=[],I=0;I<R;++I){var M=A+I*N/R,F=A+(I+1)*N/R;D[I]=[_,j,M,F,n,r,f,d]}return el[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=rl(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var sl=.5773502691896257,cl={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Zc)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,a=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-a),e.lineTo(i,-a),e.lineTo(0,-n),e.lineTo(-i,-a),e.lineTo(-r,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Qc*n,i=r-n*sl,a=n/4;e.moveTo(0,-r-i),e.lineTo(-a,r-i),e.lineTo(a,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Qc*n,i=r-n*sl;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Qc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Qc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Qc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Qc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function ll(e){return Object(Me.v)(cl,e)?cl[e]:function(e){if(!Object(Me.v)(fl,e)){var t=Xc(e);fl[e]={draw:function(e,n){ol(e,t,0,0,Math.sqrt(n)/2)}}}return fl[e]}(e)}var fl={};var dl=Math.PI,pl=2*dl,hl=pl-1e-6;function ml(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vl(){return new ml}ml.prototype=vl.prototype={constructor:ml,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-e,s=r-t,c=a-e,l=o-t,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(l*u-s*c)>1e-6&&i){var d=n-a,p=r-o,h=u*u+s*s,m=d*d+p*p,v=Math.sqrt(h),g=Math.sqrt(f),y=i*Math.tan((dl-Math.acos((h+f-m)/(2*v*g)))/2),b=y/g,x=y/v;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*c)+","+(t+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*p)+","+(this._x1=e+x*u)+","+(this._y1=t+x*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%pl+pl),f>hl?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=dl)+","+l+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var gl=vl,yl=.448084975506;function bl(e){return e.x}function xl(e){return e.y}function wl(e){return e.width}function Ol(e){return e.height}function kl(e){return"function"===typeof e?e:function(){return+e}}function El(e,t,n){return Math.max(t,Math.min(e,n))}var Sl=function(){var e=bl,t=xl,n=wl,r=Ol,i=kl(0),a=i,o=i,u=i,s=null;function c(c,l,f){var d,p=null!=l?l:+e.call(this,c),h=null!=f?f:+t.call(this,c),m=+n.call(this,c),v=+r.call(this,c),g=Math.min(m,v)/2,y=El(+i.call(this,c),0,g),b=El(+a.call(this,c),0,g),x=El(+o.call(this,c),0,g),w=El(+u.call(this,c),0,g);if(s||(s=d=gl()),y<=0&&b<=0&&x<=0&&w<=0)s.rect(p,h,m,v);else{var O=p+m,k=h+v;s.moveTo(p+y,h),s.lineTo(O-b,h),s.bezierCurveTo(O-yl*b,h,O,h+yl*b,O,h+b),s.lineTo(O,k-w),s.bezierCurveTo(O,k-yl*w,O-yl*w,k,O-w,k),s.lineTo(p+x,k),s.bezierCurveTo(p+yl*x,k,p,k-yl*x,p,k-x),s.lineTo(p,h+y),s.bezierCurveTo(p,h+yl*y,p+yl*y,h,p+y,h),s.closePath()}if(d)return s=null,d+""||null}return c.x=function(t){return arguments.length?(e=kl(t),c):e},c.y=function(e){return arguments.length?(t=kl(e),c):t},c.width=function(e){return arguments.length?(n=kl(e),c):n},c.height=function(e){return arguments.length?(r=kl(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(i=kl(e),a=null!=t?kl(t):i,u=null!=n?kl(n):i,o=null!=r?kl(r):a,c):i},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c},Cl=function(){var e,t,n,r,i,a,o,u,s=null;function c(e,t,n){var r=n/2;if(i){var c=o-t,l=e-a;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*u,p=(l/=f)*u,h=Math.atan2(l,c);s.moveTo(a-d,o-p),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,h-Math.PI,h),s.lineTo(a+d,o+p),s.arc(a,o,u,h,h+Math.PI)}else s.arc(e,t,r,0,Zc);s.closePath()}else i=1;a=e,o=t,u=r}function l(a){var o,u,l,f=a.length,d=!1;for(null==s&&(s=l=gl()),o=0;o<=f;++o)!(o<f&&r(u=a[o],o,a))===d&&(d=!d)&&(i=0),d&&c(+e(u,o,a),+t(u,o,a),+n(u,o,a));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l},_l=function(e){return function(){return e}};function jl(e){return e.innerRadius}function Al(e){return e.outerRadius}function Tl(e){return e.startAngle}function Nl(e){return e.endAngle}function Rl(e){return e&&e.padAngle}function Dl(e,t,n,r,i,a,o,u){var s=n-e,c=r-t,l=o-i,f=u-a,d=f*s-l*c;if(!(d*d<1e-12))return[e+(d=(l*(t-a)-f*(e-i))/d)*s,t+d*c]}function Il(e,t,n,r,i,a,o){var u=e-n,s=t-r,c=(o?a:-a)/bc(u*u+s*s),l=c*s,f=-c*u,d=e+l,p=t+f,h=n+l,m=r+f,v=(d+h)/2,g=(p+m)/2,y=h-d,b=m-p,x=y*y+b*b,w=i-a,O=d*m-h*p,k=(b<0?-1:1)*bc(vc(0,w*w*x-O*O)),E=(O*b-y*k)/x,S=(-O*y-b*k)/x,C=(O*b+y*k)/x,_=(-O*y+b*k)/x,j=E-v,A=S-g,T=C-v,N=_-g;return j*j+A*A>T*T+N*N&&(E=C,S=_),{cx:E,cy:S,x01:-l,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}function Ml(e){return e[0]}function Fl(e){return e[1]}var Pl=function(){var e=Ml,t=Fl,n=_l(!0),r=null,i=Dc,a=null;function o(o){var u,s,c,l=o.length,f=!1;for(null==r&&(a=i(c=gl())),u=0;u<=l;++u)!(u<l&&n(s=o[u],u,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(s,u,o),+t(s,u,o));if(c)return a=null,c+""||null}return o.x=function(t){return arguments.length?(e="function"===typeof t?t:_l(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:_l(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:_l(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o},zl=function(){var e=Ml,t=null,n=_l(0),r=Fl,i=_l(!0),a=null,o=Dc,u=null;function s(s){var c,l,f,d,p,h=s.length,m=!1,v=new Array(h),g=new Array(h);for(null==a&&(u=o(p=gl())),c=0;c<=h;++c){if(!(c<h&&i(d=s[c],c,s))===m)if(m=!m)l=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=c-1;f>=l;--f)u.point(v[f],g[f]);u.lineEnd(),u.areaEnd()}m&&(v[c]=+e(d,c,s),g[c]=+n(d,c,s),u.point(t?+t(d,c,s):v[c],r?+r(d,c,s):g[c]))}if(p)return u=null,p+""||null}function c(){return Pl().defined(i).curve(o).context(a)}return s.x=function(n){return arguments.length?(e="function"===typeof n?n:_l(+n),t=null,s):e},s.x0=function(t){return arguments.length?(e="function"===typeof t?t:_l(+t),s):e},s.x1=function(e){return arguments.length?(t=null==e?null:"function"===typeof e?e:_l(+e),s):t},s.y=function(e){return arguments.length?(n="function"===typeof e?e:_l(+e),r=null,s):n},s.y0=function(e){return arguments.length?(n="function"===typeof e?e:_l(+e),s):n},s.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:_l(+e),s):r},s.lineX0=s.lineY0=function(){return c().x(e).y(n)},s.lineY1=function(){return c().x(e).y(r)},s.lineX1=function(){return c().x(t).y(n)},s.defined=function(e){return arguments.length?(i="function"===typeof e?e:_l(!!e),s):i},s.curve=function(e){return arguments.length?(o=e,null!=a&&(u=o(a)),s):o},s.context=function(e){return arguments.length?(null==e?a=u=null:u=o(a=e),s):a},s},Ll={draw:function(e,t){var n=Math.sqrt(t/xc);e.moveTo(n,0),e.arc(0,0,n,0,Oc)}},Bl=(Math.sqrt(1/3),Math.sin(xc/10)/Math.sin(7*xc/10));Math.sin(Oc/10),Math.cos(Oc/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function Wl(e,t){return null!=e?e:t}var Ul=function(e){return e.x||0},Vl=function(e){return e.y||0},Hl=function(e){return!(!1===e.defined)},ql=function(){var e=jl,t=Al,n=_l(0),r=null,i=Tl,a=Nl,o=Rl,u=null;function s(){var s,c,l=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-wc,p=a.apply(this,arguments)-wc,h=pc(p-d),m=p>d;if(u||(u=s=gl()),f<l&&(c=f,f=l,l=c),f>1e-12)if(h>Oc-1e-12)u.moveTo(f*mc(d),f*yc(d)),u.arc(0,0,f,d,p,!m),l>1e-12&&(u.moveTo(l*mc(p),l*yc(p)),u.arc(0,0,l,p,d,m));else{var v,g,y=d,b=p,x=d,w=p,O=h,k=h,E=o.apply(this,arguments)/2,S=E>1e-12&&(r?+r.apply(this,arguments):bc(l*l+f*f)),C=gc(pc(f-l)/2,+n.apply(this,arguments)),_=C,j=C;if(S>1e-12){var A=Ec(S/l*yc(E)),T=Ec(S/f*yc(E));(O-=2*A)>1e-12?(x+=A*=m?1:-1,w-=A):(O=0,x=w=(d+p)/2),(k-=2*T)>1e-12?(y+=T*=m?1:-1,b-=T):(k=0,y=b=(d+p)/2)}var N=f*mc(y),R=f*yc(y),D=l*mc(w),I=l*yc(w);if(C>1e-12){var M,F=f*mc(b),P=f*yc(b),z=l*mc(x),L=l*yc(x);if(h<xc&&(M=Dl(N,R,z,L,F,P,D,I))){var B=N-M[0],W=R-M[1],U=F-M[0],V=P-M[1],H=1/yc(kc((B*U+W*V)/(bc(B*B+W*W)*bc(U*U+V*V)))/2),q=bc(M[0]*M[0]+M[1]*M[1]);_=gc(C,(l-q)/(H-1)),j=gc(C,(f-q)/(H+1))}}k>1e-12?j>1e-12?(v=Il(z,L,N,R,f,j,m),g=Il(F,P,D,I,f,j,m),u.moveTo(v.cx+v.x01,v.cy+v.y01),j<C?u.arc(v.cx,v.cy,j,hc(v.y01,v.x01),hc(g.y01,g.x01),!m):(u.arc(v.cx,v.cy,j,hc(v.y01,v.x01),hc(v.y11,v.x11),!m),u.arc(0,0,f,hc(v.cy+v.y11,v.cx+v.x11),hc(g.cy+g.y11,g.cx+g.x11),!m),u.arc(g.cx,g.cy,j,hc(g.y11,g.x11),hc(g.y01,g.x01),!m))):(u.moveTo(N,R),u.arc(0,0,f,y,b,!m)):u.moveTo(N,R),l>1e-12&&O>1e-12?_>1e-12?(v=Il(D,I,F,P,l,-_,m),g=Il(N,R,z,L,l,-_,m),u.lineTo(v.cx+v.x01,v.cy+v.y01),_<C?u.arc(v.cx,v.cy,_,hc(v.y01,v.x01),hc(g.y01,g.x01),!m):(u.arc(v.cx,v.cy,_,hc(v.y01,v.x01),hc(v.y11,v.x11),!m),u.arc(0,0,l,hc(v.cy+v.y11,v.cx+v.x11),hc(g.cy+g.y11,g.cx+g.x11),m),u.arc(g.cx,g.cy,_,hc(g.y11,g.x11),hc(g.y01,g.x01),!m))):u.arc(0,0,l,w,x,m):u.lineTo(D,I)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-xc/2;return[mc(r)*n,yc(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:_l(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:_l(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:_l(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:_l(+e),s):r},s.startAngle=function(e){return arguments.length?(i="function"===typeof e?e:_l(+e),s):i},s.endAngle=function(e){return arguments.length?(a="function"===typeof e?e:_l(+e),s):a},s.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:_l(+e),s):o},s.context=function(e){return arguments.length?(u=null==e?null:e,s):u},s}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),Gl=zl().x(Ul).y1(Vl).y0((function(e){return(e.y||0)+(e.height||0)})).defined(Hl),$l=zl().y(Vl).x1(Ul).x0((function(e){return(e.x||0)+(e.width||0)})).defined(Hl),Kl=Pl().x(Ul).y(Vl).defined(Hl),Xl=Sl().x(Ul).y(Vl).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return Wl(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return Wl(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return Wl(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return Wl(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),Yl=function(){var e=_l(Ll),t=_l(64),n=null;function r(){var r;if(n||(n=r=gl()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"===typeof t?t:_l(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:_l(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((function(e){return ll(e.shape||"circle")})).size((function(e){return Wl(e.size,64)})),Jl=Cl().x(Ul).y(Vl).defined(Hl).size((function(e){return e.size||1}));function Zl(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Ql(e,t,n,r){return Xl.context(e)(t,n,r)}var ef=function(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e};var tf,nf,rf,af=Zc-1e-8;function of(e){return tf=e,of}function uf(){}function sf(e,t){tf.add(e,t)}function cf(e,t){sf(nf=e,rf=t)}function lf(e){sf(e,tf.y1)}function ff(e){sf(tf.x1,e)}function df(e,t,n,r){var i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function pf(e,t,n,r,i){var a,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(a=u*u+s*o)>=0&&(c=(-u+(a=Math.sqrt(a)))/o,l=(-u-a)/o):c=.5*s/u,0<c&&c<1&&i(hf(c,e,t,n,r)),0<l&&l<1&&i(hf(l,e,t,n,r))}function hf(e,t,n,r,i){var a=1-e,o=a*a,u=e*e;return o*a*t+3*o*e*n+3*a*u*r+u*e*i}of.beginPath=uf,of.closePath=uf,of.moveTo=cf,of.lineTo=cf,of.rect=function(e,t,n,r){sf(e+n,t+r),cf(e,t)},of.quadraticCurveTo=function(e,t,n,r){df(nf,e,n,lf),df(rf,t,r,ff),cf(n,r)},of.bezierCurveTo=function(e,t,n,r,i,a){pf(nf,e,n,i,lf),pf(rf,t,r,a,ff),cf(i,a)},of.arc=function(e,t,n,r,i,a){if(nf=n*Math.cos(i)+e,rf=n*Math.sin(i)+t,Math.abs(i-r)>af)sf(e-n,t-n),sf(e+n,t+n);else{var o,u,s=function(r){return sf(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(i),i!==r)if((r%=Zc)<0&&(r+=Zc),(i%=Zc)<0&&(i+=Zc),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=Zc,o=r-r%Jc,u=0;u<4&&o>i;++u,o-=Jc)s(o);else for(o=r-r%Jc+Jc,u=0;u<4&&o<i;++u,o+=Jc)s(o)}};var mf=(mf=$s(1,1))?mf.getContext("2d"):null,vf=new zs;function gf(e){return function(t,n){if(!mf)return!0;e(mf,t),vf.clear().union(t.bounds).intersect(n).round();for(var r=vf.x1,i=vf.y1,a=vf.x2,o=vf.y2,u=i;u<=o;++u)for(var s=r;s<=a;++s)if(mf.isPointInPath(s,u))return!0;return!1}}function yf(e,t){return t.contains(e.x||0,e.y||0)}function bf(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return t.intersects(vf.set(n,r,n+i,r+a))}function xf(e,t){var n=e.x||0,r=e.y||0;return wf(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function wf(e,t,n,r,i){var a,o,u,s,c=e.x1,l=e.y1,f=e.x2,d=e.y2,p=r-t,h=i-n,m=0,v=1;for(s=0;s<4;++s){if(0===s&&(a=-p,o=-(c-t)),1===s&&(a=p,o=f-t),2===s&&(a=-h,o=-(l-n)),3===s&&(a=h,o=d-n),Math.abs(a)<1e-10&&o<0)return!1;if(u=o/a,a<0){if(u>v)return!1;u>m&&(m=u)}else if(a>0){if(u<m)return!1;u<v&&(v=u)}}return!0}var Of=function(e,t){e.globalCompositeOperation=t.blend||"source-over"};function kf(e,t){return null==e?t:e}function Ef(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}var Sf=function(e,t,n){return Ws(n)?function(e,t,n){var r,i=n.width(),a=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+kf(t.x1,.5)*i,n.y1+kf(t.y1,.5)*a,Math.max(i,a)*kf(t.r1,0),n.x1+kf(t.x2,.5)*i,n.y1+kf(t.y2,.5)*a,Math.max(i,a)*kf(t.r2,.5));else{var o=kf(t.x1,0),u=kf(t.y1,0),s=kf(t.x2,1),c=kf(t.y2,0);if(o!==s&&u!==c&&i!==a){var l=$s(Math.ceil(i),Math.ceil(a)),f=l.getContext("2d");return f.scale(i,a),f.fillStyle=Ef(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,i,a),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*i,n.y1+u*a,n.x1+s*i,n.y1+c*a)}return Ef(r,t.stops)}(e,n,t.bounds):n},Cf=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=Sf(e,t,t.fill),!0)},_f=[],jf=function(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=Sf(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||_f),e.lineDashOffset=t.strokeDashOffset||0),!0))};function Af(e,t){return e.zindex-t.zindex||e.index-t.index}function Tf(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(Af)}function Nf(e,t){var n,r,i=e.items;if(i&&i.length){var a=Tf(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function Rf(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=Tf(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Df(e){return function(t,n,r){Nf(n,(function(n){r&&!r.intersects(n.bounds)||If(e,t,n,n)}))}}function If(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(Of(t,n),n.fill&&Cf(t,n,i)&&t.fill(),n.stroke&&jf(t,n,i)&&t.stroke()))}function Mf(e){return e=e||Me.gb,function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,Rf(n,(function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return e(t,n,r,i,a,o)?n:void 0}))}}function Ff(e,t){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function Pf(e){return Mf(Ff(e))}function zf(e,t){return"translate("+e+","+t+")"}function Lf(e){return"rotate("+e+")"}function Bf(e){return zf(e.x||0,e.y||0)}function Wf(e){return zf(e.x||0,e.y||0)+(e.angle?" "+Lf(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}var Uf=function(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,a=n.angle||0;e.translate(r,i),a&&e.rotate(a*=Yc),e.beginPath(),t(e,n),a&&e.rotate(-a),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",Wf(n)),e("d",t(null,n))},bound:function(e,n){var r=n.x||0,i=n.y||0;return t(of(e),n),ef(e,n).translate(r,i),n.angle&&e.rotate(n.angle*Yc,r,i),e},draw:Df(r),pick:Pf(r),isect:n||gf(r)}},Vf=Uf("arc",(function(e,t){return ql.context(e)(t)}));var Hf=function(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var i,a=Ff(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(of(e),r),ef(e,r[0]))},draw:(i=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||If(i,e,t.items[0],t.items)}),pick:function(e,t,n,r,i,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,u,n,r)?u[0]:null)},isect:yf,tip:n}},qf=Hf("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?$l:Gl).curve(Gc(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],a="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][a]-i))<u&&(u=r,n=e[o]);return n}));function Gf(e,t){e.beginPath(),Zl(t)?Ql(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}var $f=1;function Kf(){$f=1}var Xf=function(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+$f++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(Me.D)(r)?o.path=r(null):Zl(n)?o.path=Ql(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"};function Yf(e){var t=null!=(t=e.strokeWidth)?t:1;return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Jf(e,t){var n=Yf(t);e("d",Ql(null,t,n,n))}function Zf(e,t,n,r){var i=Yf(t);e.beginPath(),Ql(e,t,(n||0)+i,(r||0)+i)}var Qf=Ff(Zf),ed=Ff(Zf,!1);var td={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",Bf(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ef(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;Nf(t,(function(t){var i=t.x||0,a=t.y||0,o=t.strokeForeground,u=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&u&&(Zf(e,t,i,a),Of(e,t),t.fill&&Cf(e,t,u)&&e.fill(),t.stroke&&!o&&jf(e,t,u)&&e.stroke()),e.save(),e.translate(i,a),t.clip&&Gf(e,t),n&&n.translate(-i,-a),Nf(t,(function(t){r.draw(e,t,n)})),n&&n.translate(i,a),e.restore(),o&&t.stroke&&u&&(Zf(e,t,i,a),Of(e,t),jf(e,t,u)&&e.stroke())}))},pick:function(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,u=n*e.pixelRatio,s=r*e.pixelRatio;return Rf(t,(function(c){var l,f,d,p,h,m,v,g,y;if((!(g=c.bounds)||g.contains(i,a))&&(p=c.x||0,h=c.y||0,m=p+(c.width||0),v=h+(c.height||0),!(y=c.clip)||!(i<p||i>m||a<p||a>v)))return e.save(),e.translate(p,h),p=i-p,h=a-h,y&&Zl(c)&&!Qf(e,c,u,s)?(e.restore(),null):(f=c.strokeForeground,(d=!1!==t.interactive)&&f&&c.stroke&&ed(e,c,u,s)?(e.restore(),c):(!(l=Rf(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,p,h)?o.pick(e,n,r,p,h):null})))&&d&&(c.fill||!f&&c.stroke)&&Qf(e,c,u,s)&&(l=c),e.restore(),l||null))}))},isect:bf,content:function(e,t,n){e("clip-path",t.clip?Xf(n,t,t):null)},background:function(e,t){e("class","background"),Jf(e,t)},foreground:function(e,t){e("class","foreground"),t.strokeForeground?Jf(e,t):e("d","")}};function nd(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function rd(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function id(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function ad(e,t){return"center"===e?t/2:"right"===e?t:0}function od(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var ud={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=nd(t,n),i=t.x||0,a=t.y||0,o=rd(t,r),u=id(t,r),s=!1===t.aspect?"none":"xMidYMid";i-=ad(t.align,o),a-=od(t.baseline,u),!r.src&&r.toDataURL?e("href",r.toDataURL(),"http://www.w3.org/1999/xlink","xlink:href"):e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",zf(i,a)),e("width",o),e("height",u),e("preserveAspectRatio",s)},bound:function(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=rd(t,n),o=id(t,n);return r-=ad(t.align,a),i-=od(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function(e,t,n){var r=this;Nf(t,(function(t){if(!n||n.intersects(t.bounds)){var i,a,o,u,s=nd(t,r),c=t.x||0,l=t.y||0,f=rd(t,s),d=id(t,s);c-=ad(t.align,f),l-=od(t.baseline,d),!1!==t.aspect&&(a=s.width/s.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(l+=(d-(u=f/a))/2,d=u):(c+=(f-(u=d*a))/2,f=u))),(s.complete||s.toDataURL)&&(Of(e,t),e.globalAlpha=null!=(i=t.opacity)?i:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(s,c,l,f,d))}}))},pick:Mf(),isect:Me.gb,get:nd,xOffset:ad,yOffset:od},sd=Hf("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return Kl.curve(Gc(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}));function cd(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,a=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*Yc,s=t.pathCache;s&&s.path===n||((t.pathCache=s=Xc(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(u),ol(e,s,0,0,a,o),e.rotate(-u),e.translate(-r,-i)):ol(e,s,r,i,a,o)}var ld={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",Wf(t)),e("d",t.path)},bound:function(e,t){return cd(of(e),t)?e.set(0,0,0,0):ef(e,t,!0),t.angle&&e.rotate(t.angle*Yc,t.x||0,t.y||0),e},draw:Df(cd),pick:Pf(cd),isect:gf(cd)};function fd(e,t){e.beginPath(),Ql(e,t)}var dd={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Ql(null,t))},bound:function(e,t){var n,r;return ef(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:Df(fd),pick:Pf(fd),isect:bf};function pd(e,t,n){var r,i,a,o;return!(!t.stroke||!jf(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}var hd={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",Bf(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return ef(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){Nf(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&pd(e,t,r)&&(Of(e,t),e.stroke())}}))},pick:Mf((function(e,t,n,r){return!!e.isPointInStroke&&(pd(e,t,1)&&e.isPointInStroke(n,r))})),isect:xf},md=Uf("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),vd=Uf("symbol",(function(e,t){return Yl.context(e)(t)}),yf),gd=Object(Me.L)(),yd={height:Ed,measureWidth:Od,estimateWidth:xd,width:xd,canvas:bd};function bd(e){yd.width=e&&mf?Od:xd}function xd(e,t){return wd(jd(e,t),Ed(e))}function wd(e,t){return~~(.8*e.length*t)}function Od(e,t){return Ed(e)<=0||!(t=jd(e,t))?0:kd(t,Td(e))}function kd(e,t){var n="(".concat(t,") ").concat(e),r=gd.get(n);return void 0===r&&(mf.font=t,r=mf.measureText(e).width,gd.set(n,r)),r}function Ed(e){return null!=e.fontSize?+e.fontSize||0:11}function Sd(e){return null!=e.lineHeight?e.lineHeight:Ed(e)+2}function Cd(e){return t=e.lineBreak&&e.text&&!Object(Me.A)(e.text)?e.text.split(e.lineBreak):e.text,Object(Me.A)(t)?t.length>1?t:t[0]:t;var t}function _d(e){var t=Cd(e);return(Object(Me.A)(t)?t.length-1:0)*Sd(e)}function jd(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(yd.width===Od){var t=Td(e);return function(e){return kd(e,t)}}var n=Ed(e);return function(e){return wd(e,n)}}(e);if(r(t)<n)return t;var i,a=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(a),o){for(;u<s;)i=u+s>>>1,r(t.slice(i))>n?u=i+1:s=i;return a+t.slice(u)}for(;u<s;)i=1+(u+s>>>1),r(t.slice(0,i))<n?u=i:s=i-1;return t.slice(0,u)+a}(e,n):n}function Ad(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Td(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ed(e)+"px "+Ad(e,t)}function Nd(e){var t=e.baseline,n=Ed(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*Sd(e):"line-bottom"===t?.29*n-.5*Sd(e):0)}bd(!0);var Rd={left:"start",center:"middle",right:"end"},Dd=new zs;function Id(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-Jc,n+=i*Math.cos(t),r+=i*Math.sin(t)),Dd.x1=n,Dd.y1=r,Dd}function Md(e,t,n){var r,i=yd.height(t),a=t.align,o=Id(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+Nd(t)-Math.round(.8*i),f=Cd(t);if(Object(Me.A)(f)?(i+=Sd(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,yd.width(t,n))}),0)):r=yd.width(t,f),"center"===a?c-=r/2:"right"===a&&(c-=r),e.set(c+=u,l+=s,c+r,l+i),t.angle&&!n)e.rotate(t.angle*Yc,u,s);else if(2===n)return e.rotatedPoints(t.angle*Yc,u,s);return e}var Fd={arc:Vf,area:qf,group:td,image:ud,line:sd,path:ld,rect:dd,rule:hd,shape:md,symbol:vd,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+Nd(t),a=Id(t),o=a.x1,u=a.y1,s=t.angle||0;e("text-anchor",Rd[t.align]||"start"),s?(n=zf(o,u)+" "+Lf(s),(r||i)&&(n+=" "+zf(r,i))):n=zf(o+r,u+i),e("transform",n)},bound:Md,draw:function(e,t,n){Nf(t,(function(t){var r,i,a,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=Td(t),e.textAlign=t.align||"left",i=(r=Id(t)).x1,a=r.y1,t.angle&&(e.save(),e.translate(i,a),e.rotate(t.angle*Yc),i=a=0),i+=t.dx||0,a+=(t.dy||0)+Nd(t),s=Cd(t),Of(e,t),Object(Me.A)(s))for(u=Sd(t),o=0;o<s.length;++o)c=jd(t,s[o]),t.fill&&Cf(e,t,l)&&e.fillText(c,i,a),t.stroke&&jf(e,t,l)&&e.strokeText(c,i,a),a+=u;else c=jd(t,s),t.fill&&Cf(e,t,l)&&e.fillText(c,i,a),t.stroke&&jf(e,t,l)&&e.strokeText(c,i,a);t.angle&&e.restore()}}))},pick:Mf((function(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Id(t),u=o.x1,s=o.y1,c=Md(Dd,t,1),l=-t.angle*Yc,f=Math.cos(l),d=Math.sin(l),p=f*i-d*a+(u-f*u+d*s),h=d*i+f*a+(s-d*u-f*s);return c.contains(p,h)})),isect:function(e,t){var n=Md(Dd,e,2);return wf(t,n[0],n[1],n[2],n[3])||wf(t,n[0],n[1],n[4],n[5])||wf(t,n[4],n[5],n[6],n[7])||wf(t,n[2],n[3],n[6],n[7])}},trail:Hf("trail",(function(e,t){return Jl.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))},Pd=function(e,t,n){var r=Fd[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new zs),e,n)},zd={mark:null},Ld=function(e,t,n){var r,i,a,o,u=Fd[e.marktype],s=u.bound,c=e.items,l=c&&c.length;if(u.nested)return l?a=c[0]:(zd.mark=e,a=zd),o=Pd(a,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new zs,l)for(r=0,i=c.length;r<i;++r)t.union(Pd(c[r],s,n));return e.bounds=t},Bd=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant"];function Wd(e,t){return JSON.stringify(e,Bd,t)}function Ud(e){return function e(t){var n,r,i,a=t.marktype,o=t.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=t,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&e(o[r]);a&&Ld(t);return t}("string"===typeof e?JSON.parse(e):e)}function Vd(e){arguments.length?this.root=Ud(e):(this.root=qd({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Gs(this.root)])}var Hd=Vd.prototype;function qd(e,t){return{bounds:new zs,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function Gd(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function $d(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Kd(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Gd(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function Xd(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Yd(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}Hd.toJSON=function(e){return Wd(this.root,e||0)},Hd.mark=function(e,t,n){var r=qd(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var Jd=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]};function Zd(e,t){this._active=null,this._handlers={},this._loader=e||Kr(),this._tooltip=t||Qd}function Qd(e,t,n,r){e.element().setAttribute("title",r||"")}var ep=Zd.prototype;function tp(e){this._el=null,this._bgcolor=null,this._loader=new Xs(e)}ep.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},ep.element=function(){return this._el},ep.canvas=function(){return this._el&&this._el.firstChild},ep.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},ep.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},ep.on=function(){},ep.off=function(){},ep._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},ep.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},ep.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},ep.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=Gd(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)})).catch((function(){}))},ep.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=Fd[o.marktype]).tip){for((a=Jd(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},ep.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,u=i.width(),s=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:u,height:s,left:a,top:o,right:a+u,bottom:o+s}}};var np=tp.prototype;np.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},np.element=function(){return this._el},np.canvas=function(){return this._el&&this._el.firstChild},np.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},np.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},np.dirty=function(){},np.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},np._render=function(){},np.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},np._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(e){e&&i(),n._ready=null}))}return r},np.sanitizeURL=function(e){return this._load("sanitizeURL",e)},np.loadImage=function(e){return this._load("loadImage",e)};function rp(e,t){Zd.call(this,e,t),this._down=null,this._touch=null,this._first=!0}var ip=Object(Me.y)(rp,Zd);function ap(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i||(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r)),this.fire(e,r)}}function op(e){return function(t){this.fire(e,t),this._active=null}}ip.initialize=function(e,t,n){var r=this._canvas=e&&$d(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){ip[e]?ip[e].call(i,t):i.fire(e,t)}))}))}return Zd.prototype.initialize.call(this,e,t,n)},ip.canvas=function(){return this._canvas},ip.context=function(){return this._canvas.getContext("2d")},ip.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],ip.DOMMouseScroll=function(e){this.fire("mousewheel",e)},ip.mousemove=ap("mousemove","mouseover","mouseout"),ip.dragover=ap("dragover","dragenter","dragleave"),ip.mouseout=op("mouseout"),ip.dragleave=op("dragleave"),ip.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},ip.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},ip.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},ip.touchmove=function(e){this.fire("touchmove",e,!0)},ip.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},ip.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,"click"===e&&a&&a.href?this.handleHref(t,a,a.href):"mousemove"!==e&&"mouseout"!==e||this.handleTooltip(t,a,"mouseout"!==e),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},ip.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},ip.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},ip.pickEvent=function(e){var t=Jd(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},ip.pick=function(e,t,n,r,i){var a=this.context();return Fd[e.marktype].pick.call(this,a,e,t,n,r,i)};var up="undefined"!==typeof window&&window.devicePixelRatio||1;function sp(e){tp.call(this,e),this._redraw=!1,this._dirty=new zs}var cp=Object(Me.y)(sp,tp),lp=tp.prototype,fp=new zs;function dp(e,t,n){return fp.set(0,0,t,n).translate(-e[0],-e[1])}function pp(e,t){Zd.call(this,e,t);var n=this;n._hrefHandler=mp(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=mp(n,(function(e,t){n.handleTooltip(e,t,"mouseout"!==e.type)}))}cp.initialize=function(e,t,n,r,i,a){return this._options=a,this._canvas=$s(1,1,a&&a.type),e&&(Xd(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),lp.initialize.call(this,e,t,n,r,i)},cp.resize=function(e,t,n,r){return lp.resize.call(this,e,t,n,r),function(e,t,n,r,i,a){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?up:i;for(var c in e.width=t*s,e.height=n*s,a)u[c]=a[c];o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},cp.canvas=function(){return this._canvas},cp.context=function(){return this._canvas?this._canvas.getContext("2d"):null},cp.dirty=function(e){var t=function(e,t){if(null==t)return e;for(var n=fp.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},cp._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=dp(n,r,i).expand(1)):a=function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a.intersect(dp(n,r,i)),n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},cp.draw=function(e,t,n){var r=Fd[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),Object(Me.D)(n)?(e.beginPath(),n(e),e.clip()):Gf(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},cp.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var hp=Object(Me.y)(pp,Zd);function mp(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function vp(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function gp(e){return"</"+e+">"}hp.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener("mouseout",this._tooltipHandler)),this._svg=r=e&&$d(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener("mouseout",this._tooltipHandler)),Zd.prototype.initialize.call(this,e,t,n)},hp.canvas=function(){return this._svg},hp.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:mp(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},hp.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var yp={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},bp={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},xp=Object.keys(bp),wp=yp.xmlns;function Op(e){tp.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var kp=Object(Me.y)(Op,tp),Ep=tp.prototype;function Sp(e,t,n){var r,i,a;if("radial"===t.gradient){var o=Kd(e,n++,"pattern",wp);o.setAttribute("id","p_"+t.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=Kd(o,0,"rect",wp)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+Ip()+"#"+t.id+")"),(e=Kd(e,n++,"radialGradient",wp)).setAttribute("id",t.id),e.setAttribute("fx",t.x1),e.setAttribute("fy",t.y1),e.setAttribute("fr",t.r1),e.setAttribute("cx",t.x2),e.setAttribute("cy",t.y2),e.setAttribute("r",t.r2)}else(e=Kd(e,n++,"linearGradient",wp)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2);for(r=0,i=t.stops.length;r<i;++r)(a=Kd(e,r,"stop",wp)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);return Xd(e,r),n}function Cp(e,t,n){var r;return(e=Kd(e,n,"clipPath",wp)).setAttribute("id",t.id),t.path?(r=Kd(e,0,"path",wp)).setAttribute("d",t.path):((r=Kd(e,0,"rect",wp)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)),Xd(e,1),n+1}function _p(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function jp(e,t,n,r,i){var a,o=e._svg;if(!o&&(o=Gd(a=t.ownerDocument,r,wp),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=Gd(a,"path",wp);o.appendChild(u),u.__data__=e;var s=Gd(a,"g",wp);o.appendChild(s),s.__data__=e;var c=Gd(a,"path",wp);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}kp.initialize=function(e,t,n,r){return e&&(this._svg=Kd(e,0,"svg",wp),this._svg.setAttribute("class","marks"),Xd(e,1),this._root=Kd(this._svg,0,"g",wp),Xd(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Ep.initialize.call(this,e,t,n,r)},kp.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Ep.background.apply(this,arguments)},kp.resize=function(e,t,n,r){return Ep.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},kp.canvas=function(){return this._svg},kp.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in yp)e[t]=yp[t];var n=this._bgcolor?vp("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+gp("rect"):"";return vp("svg",e)+n+this._svg.innerHTML+gp("svg")},kp._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),Xd(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},kp.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=Kd(t,0,"defs",wp)),i=Sp(r,n.gradient[e],i);for(e in n.clipping)r||(n.el=r=Kd(t,0,"defs",wp)),i=Cp(r,n.clipping[e],i);r&&(0===i?(t.removeChild(r),n.el=null):Xd(r,i))},kp._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},kp.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},kp.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},kp._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=Fd[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,_p(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,_p(t,s)),t._update=s));return!this._dirtyAll},kp.draw=function(e,t,n){if(!this.isDirty(t))return t._svg;var r,i=this,a=this._svg,o=Fd[t.marktype],u=!1===t.interactive?"none":null,s="g"===o.tag,c=null,l=0;function f(e){var t=i.isDirty(e),n=jp(e,r,c,o.tag,a);t&&(i._update(o,n,e),s&&function(e,t,n){t=t.lastChild.previousSibling;var r,i=0;Nf(n,(function(n){r=e.draw(t,n,r),++i})),Xd(t,1+i)}(i,n,e)),c=n,++l}return(r=jp(t,e,n,"g",a)).setAttribute("class",Yd(t)),s||r.style.setProperty("pointer-events",u),t.clip?r.setAttribute("clip-path",Xf(i,t,t.group)):r.removeAttribute("clip-path"),o.nested?t.items.length&&f(t.items[0]):Nf(t,f),Xd(r,l),r};var Ap=null,Tp=null,Np={group:function(e,t,n){var r,i;Ap=r=t.childNodes[2],Tp=r.__values__,e.foreground(Dp,n,this),Tp=t.__values__,Ap=t.childNodes[1],e.content(Dp,n,this),Ap=i=t.childNodes[0],e.background(Dp,n,this);var a=!1===n.mark.interactive?"none":null;if(a!==Tp.events&&(r.style.setProperty("pointer-events",a),i.style.setProperty("pointer-events",a),Tp.events=a),n.strokeForeground&&n.stroke){var o=n.fill;r.style.removeProperty("display"),this.style(i,n),i.style.removeProperty("stroke"),o&&(n.fill=null),Tp=r.__values__,this.style(r,n),o&&(n.fill=o),Ap=null}else r.style.setProperty("display","none"),r.style.setProperty("fill","none")},image:function(e,t,n){!1===n.smooth?(Rp(t,"image-rendering","optimizeSpeed"),Rp(t,"image-rendering","pixelated")):Rp(t,"image-rendering",null)},text:function(e,t,n){var r,i,a,o,u=Cd(n);Object(Me.A)(u)?(r=(i=u.map((function(e){return jd(n,e)}))).join("\n"))!==Tp.text&&(Xd(t,0),a=t.ownerDocument,o=Sd(n),i.forEach((function(e,r){var i=Gd(a,"tspan",wp);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",o)),t.appendChild(i)})),Tp.text=r):(i=jd(n,u))!==Tp.text&&(t.textContent=i,Tp.text=i),Rp(t,"font-family",Ad(n)),Rp(t,"font-size",Ed(n)+"px"),Rp(t,"font-style",n.fontStyle),Rp(t,"font-variant",n.fontVariant),Rp(t,"font-weight",n.fontWeight)}};function Rp(e,t,n){n!==Tp[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Tp[t]=n)}function Dp(e,t,n){t!==Tp[e]&&(null!=t?n?Ap.setAttributeNS(n,e,t):Ap.setAttribute(e,t):n?Ap.removeAttributeNS(n,e):Ap.removeAttribute(e),Tp[e]=t)}function Ip(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Mp(e){tp.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}kp._update=function(e,t,n){Ap=t,Tp=t.__values__,e.attr(Dp,n,this);var r=Np[e.type];r&&r.call(this,e,t,n),Ap&&this.style(Ap,n)},kp.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=xp.length;n<r;++n)o=t[i=xp[n]],"font"===i&&(o=Ad(t)),o!==Tp[i]&&(a=bp[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(Ws(o)&&(o=Us(o,this._defs.gradient,Ip())),e.style.setProperty(a,o+"")),Tp[i]=o)};var Fp,Pp=Object(Me.y)(Mp,tp),zp=tp.prototype;function Lp(e,t,n,r){Fp[r||e]=t}function Bp(e,t,n,r){if(null==e)return"";var i,a,o,u,s,c="";for("bgrect"===n&&!1===t.interactive&&(c+="pointer-events: none; "),"bgfore"===n&&(!1===t.interactive&&(c+="pointer-events: none; "),c+="display: none; "),"image"===n&&!1===e.smooth&&(c+="image-rendering: optimizeSpeed; image-rendering: pixelated; "),"text"===n&&(c+="font-family: "+Ad(e)+"; ",c+="font-size: "+Ed(e)+"px; ",e.fontStyle&&(c+="font-style: "+e.fontStyle+"; "),e.fontVariant&&(c+="font-variant: "+e.fontVariant+"; "),e.fontWeight&&(c+="font-weight: "+e.fontWeight+"; ")),i=0,a=xp.length;i<a;++i)o=xp[i],u=bp[o],null==(s=e[o])?"fill"===u&&(c+="fill: none; "):"transparent"!==s||"fill"!==u&&"stroke"!==u?(Ws(s)&&(s=Us(s,r.gradient,"")),c+=u+": "+s+"; "):c+=u+": none; ";return c?'style="'+c.trim()+'"':null}function Wp(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}Pp.resize=function(e,t,n,r){zp.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in yp)o[u]=yp[u];a.head=vp("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),a.bg=s?vp("rect",{width:this._width,height:this._height,style:"fill: "+s+";"})+gp("rect"):"",a.root=vp("g",{transform:"translate("+i+")"}),a.foot=gp("g")+gp("svg"),this},Pp.background=function(){var e=zp.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},Pp.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},Pp._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},Pp.buildDefs=function(){var e,t,n,r,i,a=this._defs,o="";for(t in a.gradient){for(i=(n=a.gradient[t]).stops,"radial"===n.gradient?(o+=vp(r="pattern",{id:"p_"+t,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=vp("rect",{width:"1",height:"1",fill:"url(#"+t+")"})+gp("rect"),o+=gp(r),o+=vp(r="radialGradient",{id:t,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=vp(r="linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<i.length;++e)o+=vp("stop",{offset:i[e].offset,"stop-color":i[e].color})+gp("stop");o+=gp(r)}for(t in a.clipping)n=a.clipping[t],o+=vp("clipPath",{id:t}),n.path?o+=vp("path",{d:n.path})+gp("path"):o+=vp("rect",{x:0,y:0,width:n.width,height:n.height})+gp("rect"),o+=gp("clipPath");return o.length>0?vp("defs")+o+gp("defs"):""},Pp.attributes=function(e,t){return Fp={},e(Lp,t,this),Fp},Pp.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},Pp.mark=function(e){var t,n=this,r=Fd[e.marktype],i=r.tag,a=this._defs,o="";function u(u){var s=n.href(u);if(s&&(o+=vp("a",s)),t="g"!==i?Bp(u,e,i,a):null,o+=vp(i,n.attributes(r.attr,u),t),"text"===i){var c=Cd(u);if(Object(Me.A)(c))for(var l={x:0,dy:Sd(u)},f=0;f<c.length;++f)o+=vp("tspan",f?l:null)+Wp(jd(u,c[f]))+gp("tspan");else o+=Wp(jd(u,c))}else if("g"===i){var d=u.strokeForeground,p=u.fill,h=u.stroke;d&&h&&(u.stroke=null),o+=vp("path",n.attributes(r.background,u),Bp(u,e,"bgrect",a))+gp("path"),o+=vp("g",n.attributes(r.content,u))+n.markGroup(u)+gp("g"),d&&h?(p&&(u.fill=null),u.stroke=h,o+=vp("path",n.attributes(r.foreground,u),Bp(u,e,"bgrect",a))+gp("path"),p&&(u.fill=p)):o+=vp("path",n.attributes(r.foreground,u),Bp({},e,"bgfore",a))+gp("path")}o+=gp(i),s&&(o+=gp("a"))}return"g"!==i&&!1===e.interactive&&(t='style="pointer-events: none;"'),o+=vp("g",{class:Yd(e),"clip-path":e.clip?Xf(n,e,e.group):null},t),r.nested?e.items&&e.items.length&&u(e.items[0]):Nf(e,u),o+gp("g")},Pp.markGroup=function(e){var t=this,n="";return Nf(e,(function(e){n+=t.mark(e)})),n};var Up={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},Vp={};function Hp(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Vp[e]=t,this):Vp[e]}function qp(e,t,n){var r=[],i=(new zs).union(t),a=e.marktype;return a?Gp(e,i,n,r):"group"===a?$p(e,i,n,r):Object(Me.n)("Intersect scene must be mark node or group item.")}function Gp(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var i=e.items,a=e.marktype,o=i.length,u=0;if("group"===a)for(;u<o;++u)$p(i[u],t,n,r);else for(var s=Fd[a].isect;u<o;++u){var c=i[u];Kp(c,t,s)&&r.push(c)}}return r}function $p(e,t,n,r){n&&n(e.mark)&&Kp(e,t,Fd.group.isect)&&r.push(e);var i=e.items,a=i&&i.length;if(a){var o=e.x||0,u=e.y||0;t.translate(-o,-u);for(var s=0;s<a;++s)Gp(i[s],t,n,r);t.translate(o,u)}return r}function Kp(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}Vp.canvas=Vp.png={renderer:sp,headless:sp,handler:rp},Vp.svg={renderer:Op,headless:Mp,handler:pp},Vp.none={};var Xp=new zs,Yp=function(e){var t=e.clip;if(Object(Me.D)(t))t(of(Xp.clear()));else{if(!t)return;Xp.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(Xp)};function Jp(e,t,n){return e===t||("path"===n?Zp(e,t):e instanceof Date&&t instanceof Date?+e===+t:Object(Me.E)(e)&&Object(Me.E)(t)?Math.abs(e-t)<=1e-9:e&&t&&(Object(Me.F)(e)||Object(Me.F)(t))?null!=e&&null!=t&&function(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!Jp(e[n],t[n],n))return!1;return typeof e===typeof t}(e,t):e==t)}function Zp(e,t){return Jp(Xc(e),Xc(t))}function Qp(e){bi.call(this,null,e)}function eh(e,t,n){return t(e.bounds.clear(),e,n)}Object(Me.y)(Qp,bi).transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=Fd[a],u=o.bound,s=i.bounds;if(o.nested)i.items.length&&r.dirty(i.items[0]),s=eh(i,u),i.items.forEach((function(e){e.bounds.clear().union(s)}));else if("group"===a||e.modified())switch(t.visit(t.MOD,(function(e){r.dirty(e)})),s.clear(),i.items.forEach((function(e){s.union(eh(e,u))})),i.role){case"axis":case"legend":case"title":t.reflow()}else n=t.changed(t.REM),t.visit(t.ADD,(function(e){s.union(eh(e,u))})),t.visit(t.MOD,(function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(eh(e,u))})),n&&(s.clear(),i.items.forEach((function(e){s.union(e.bounds)})));return Yp(i),t.modifies("bounds")};function th(e){bi.call(this,0,e)}function nh(e){bi.call(this,null,e)}function rh(e){bi.call(this,null,e)}th.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(Me.y)(th,bi).transform=function(e,t){var n=function(e){var t=e._signals[":vega_identifier:"];t||(e._signals[":vega_identifier:"]=t=e.add(0));return t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,(function(e){e[i]||(e[i]=++r)})),n.set(this.value=r),t},Object(Me.y)(nh,bi).transform=function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r="group"===n.marktype?Gs:qs;return t.visit(t.ADD,(function(e){r.call(e,n)})),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var ih=Object(Me.y)(rh,bi),ah={parity:function(e){return e.filter((function(e,t){return t%2?e.opacity=0:1}))},greedy:function(e,t){var n;return e.filter((function(e,r){return r&&oh(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)}))}};function oh(e,t,n){return n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)}function uh(e,t){for(var n,r=1,i=e.length,a=e[0].bounds;r<i;a=n,++r)if(oh(a,n=e[r].bounds,t))return!0}function sh(e){var t=e.bounds;return t.width()>1&&t.height()>1}function ch(e){return e.forEach((function(e){return e.opacity=1})),e}function lh(e,t){return e.reflow(t.modified()).modifies("opacity")}function fh(e){bi.call(this,null,e)}ih.transform=function(e,t){var n,r,i,a=ah[e.method]||ah.parity,o=t.materialize(t.SOURCE).source,u=e.separation||0;if(o&&o.length){if(!e.method)return e.modified("method")&&(ch(o),t=lh(t,e)),t;if((o=o.filter(sh)).length){if(e.sort&&(o=o.slice().sort(e.sort)),n=ch(o),t=lh(t,e),n.length>=3&&uh(n,u)){do{n=a(n,u)}while(n.length>=3&&uh(n,u));n.length<3&&!Object(Me.U)(o).opacity&&(n.length>1&&(Object(Me.U)(n).opacity=0),Object(Me.U)(o).opacity=1)}return e.boundScale&&e.boundTolerance>=0&&(r=function(e,t,n){var r=e.range(),i=new zs;return t===Ds||"bottom"===t?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}(e.boundScale,e.boundOrient,+e.boundTolerance),o.forEach((function(e){r(e)||(e.opacity=0)}))),i=n[0].mark.bounds.clear(),o.forEach((function(e){e.opacity&&i.union(e.bounds)})),t}}},Object(Me.y)(fh,bi).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,(function(e){n.dirty(e)})),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var dh=new zs;function ph(e,t,n){return e[t]===n?0:(e[t]=n,1)}function hh(e){var t=e.items[0].datum.orient;return t===Is||t===Ms}function mh(e,t,n,r){var i,a,o=t.items[0],u=o.datum,s=u.orient,c=null!=u.translate?u.translate:.5,l=function(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(u),f=o.range,d=o.offset,p=o.position,h=o.minExtent,m=o.maxExtent,v=u.title&&o.items[l[2]].items[0],g=o.titlePadding,y=o.bounds,b=v&&_d(v),x=0,w=0;switch(dh.clear().union(y),y.clear(),(i=l[0])>-1&&y.union(o.items[i].bounds),(i=l[1])>-1&&y.union(o.items[i].bounds),s){case Ds:x=p||0,w=-d,a=Math.max(h,Math.min(m,-y.y1)),y.add(0,-a).add(f,0),v&&vh(e,v,a,g,b,0,-1,y);break;case Is:x=-d,w=p||0,a=Math.max(h,Math.min(m,-y.x1)),y.add(-a,0).add(0,f),v&&vh(e,v,a,g,b,1,-1,y);break;case Ms:x=n+d,w=p||0,a=Math.max(h,Math.min(m,y.x2)),y.add(0,0).add(a,f),v&&vh(e,v,a,g,b,1,1,y);break;case"bottom":x=p||0,w=r+d,a=Math.max(h,Math.min(m,y.y2)),y.add(0,0).add(f,a),v&&vh(e,v,a,g,0,0,1,y);break;default:x=o.x,w=o.y}return ef(y.translate(x,w),o),ph(o,"x",x+c)|ph(o,"y",w+c)&&(o.bounds=dh,e.dirty(o),o.bounds=y,e.dirty(o)),o.mark.bounds.clear().union(y)}function vh(e,t,n,r,i,a,o,u){var s=t.bounds;if(t.auto){var c=o*(n+i+r),l=0,f=0;e.dirty(t),a?l=(t.x||0)-(t.x=c):f=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(s.translate(-l,-f)),e.dirty(t)}u.union(s)}var gh=n(10);function yh(e){return(new zs).set(0,0,e.width||0,e.height||0)}function bh(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function xh(e,t,n){var r=Object(Me.F)(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function wh(e){return e<0?Math.ceil(-e):0}function Oh(e,t,n){var r,i,a,o,u,s,c,l,f,d,p,h=!n.nodirty,m="flush"===n.bounds?yh:bh,v=dh.set(0,0,0,0),g=xh(n.align,"column"),y=xh(n.align,Ps),b=xh(n.padding,"column"),x=xh(n.padding,Ps),w=n.columns||t.length,O=w<0?1:Math.ceil(t.length/w),k=t.length,E=Array(k),S=Array(w),C=0,_=Array(k),j=Array(O),A=0,T=Array(k),N=Array(k),R=Array(k);for(i=0;i<w;++i)S[i]=0;for(i=0;i<O;++i)j[i]=0;for(i=0;i<k;++i)s=t[i],u=R[i]=m(s),s.x=s.x||0,T[i]=0,s.y=s.y||0,N[i]=0,a=i%w,o=~~(i/w),C=Math.max(C,c=Math.ceil(u.x2)),A=Math.max(A,l=Math.ceil(u.y2)),S[a]=Math.max(S[a],c),j[o]=Math.max(j[o],l),E[i]=b+wh(u.x1),_[i]=x+wh(u.y1),h&&e.dirty(t[i]);for(i=0;i<k;++i)i%w===0&&(E[i]=0),i<w&&(_[i]=0);if("each"===g)for(a=1;a<w;++a){for(p=0,i=a;i<k;i+=w)p<E[i]&&(p=E[i]);for(i=a;i<k;i+=w)E[i]=p+S[a-1]}else if("all"===g){for(p=0,i=0;i<k;++i)i%w&&p<E[i]&&(p=E[i]);for(i=0;i<k;++i)i%w&&(E[i]=p+C)}else for(g=!1,a=1;a<w;++a)for(i=a;i<k;i+=w)E[i]+=S[a-1];if("each"===y)for(o=1;o<O;++o){for(p=0,r=(i=o*w)+w;i<r;++i)p<_[i]&&(p=_[i]);for(i=o*w;i<r;++i)_[i]=p+j[o-1]}else if("all"===y){for(p=0,i=w;i<k;++i)p<_[i]&&(p=_[i]);for(i=w;i<k;++i)_[i]=p+A}else for(y=!1,o=1;o<O;++o)for(r=(i=o*w)+w;i<r;++i)_[i]+=j[o-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%w?f:0),T[i]+=f-t[i].x;for(a=0;a<w;++a)for(d=0,i=a;i<k;i+=w)d+=_[i],N[i]+=d-t[i].y;if(g&&xh(n.center,"column")&&O>1)for(i=0;i<k;++i)(f=(u="all"===g?C:S[i%w])-R[i].x2-t[i].x-T[i])>0&&(T[i]+=f/2);if(y&&xh(n.center,Ps)&&1!==w)for(i=0;i<k;++i)(d=(u="all"===y?A:j[~~(i/w)])-R[i].y2-t[i].y-N[i])>0&&(N[i]+=d/2);for(i=0;i<k;++i)v.union(R[i].translate(T[i],N[i]));switch(f=xh(n.anchor,"x"),d=xh(n.anchor,"y"),xh(n.anchor,"column")){case Fs:f-=v.width();break;case"middle":f-=v.width()/2}switch(xh(n.anchor,Ps)){case Fs:d-=v.height();break;case"middle":d-=v.height()/2}for(f=Math.round(f),d=Math.round(d),v.clear(),i=0;i<k;++i)t[i].mark.bounds.clear();for(i=0;i<k;++i)(s=t[i]).x+=T[i]+=f,s.y+=N[i]+=d,v.union(s.mark.bounds.union(s.bounds.translate(T[i],N[i]))),h&&e.dirty(s);return v}function kh(e,t,n){var r,i,a,o,u,s,c,l=function(e){for(var t,n,r,i,a,o,u,s=e.items,c=s.length,l=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};l<c;++l)if(u=(o=s[l]).items,"group"===o.marktype)switch(o.role){case"axis":case"legend":case"title":break;case"row-header":(t=f.rowheaders).push.apply(t,Object(gh.a)(u));break;case"row-footer":(n=f.rowfooters).push.apply(n,Object(gh.a)(u));break;case"column-header":(r=f.colheaders).push.apply(r,Object(gh.a)(u));break;case"column-footer":(i=f.colfooters).push.apply(i,Object(gh.a)(u));break;case"row-title":f.rowtitle=u[0];break;case"column-title":f.coltitle=u[0];break;default:(a=f.marks).push.apply(a,Object(gh.a)(u))}return f}(t),f=l.marks,d="flush"===n.bounds?Eh:Sh,p=n.offset,h=n.columns||f.length,m=h<0?1:Math.ceil(f.length/h),v=m*h,g=Oh(e,f,n);l.rowheaders&&(s=xh(n.headerBand,Ps,null),r=jh(e,l.rowheaders,f,h,m,-xh(p,"rowHeader"),Ch,0,d,"x1",0,h,1,s)),l.colheaders&&(s=xh(n.headerBand,"column",null),i=jh(e,l.colheaders,f,h,h,-xh(p,"columnHeader"),Ch,1,d,"y1",0,1,h,s)),l.rowfooters&&(s=xh(n.footerBand,Ps,null),a=jh(e,l.rowfooters,f,h,m,xh(p,"rowFooter"),_h,0,d,"x2",h-1,h,1,s)),l.colfooters&&(s=xh(n.footerBand,"column",null),o=jh(e,l.colfooters,f,h,h,xh(p,"columnFooter"),_h,1,d,"y2",v-h,1,h,s)),l.rowtitle&&(u=xh(n.titleAnchor,Ps),c=xh(p,"rowTitle"),c=u===Fs?a+c:r-c,s=xh(n.titleBand,Ps,.5),Ah(e,l.rowtitle,c,0,g,s)),l.coltitle&&(u=xh(n.titleAnchor,"column"),c=xh(p,"columnTitle"),c=u===Fs?o+c:i-c,s=xh(n.titleBand,"column",.5),Ah(e,l.coltitle,c,1,g,s))}function Eh(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Sh(e,t){return e.bounds[t]}function Ch(e,t){return Math.floor(Math.min(e,t))}function _h(e,t){return Math.ceil(Math.max(e,t))}function jh(e,t,n,r,i,a,o,u,s,c,l,f,d,p){var h,m,v,g,y,b,x,w,O,k=n.length,E=0,S=0;if(!k)return E;for(h=l;h<k;h+=f)n[h]&&(E=o(E,s(n[h],c)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=a,m=0,g=t.length;m<g;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(h=l,m=0,g=t.length;m<g;++m,h+=f){for(y=(b=t[m]).mark.bounds,v=h;v>=0&&null==(x=n[v]);v-=d);u?(w=null==p?x.x:Math.round(x.bounds.x1+p*x.bounds.width()),O=E):(w=E,O=null==p?x.y:Math.round(x.bounds.y1+p*x.bounds.height())),y.union(b.bounds.translate(w-(b.x||0),O-(b.y||0))),b.x=w,b.y=O,e.dirty(b),S=o(S,y[c])}return S}function Ah(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function Th(e,t,n,r,i,a,o){var u=function(e,t){var n=e[t]||{};return function(t,r){return null!=n[t]?n[t]:null!=e[t]?e[t]:r}}(n,t),s=function(e,t){var n=-1/0;return e.forEach((function(e){null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,u("offset",0)),c=u("anchor","start"),l=c===Fs?1:"middle"===c?.5:0,f={align:"each",bounds:u("bounds","flush"),columns:"vertical"===u("direction")?1:e.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(t){case Is:f.anchor={x:Math.floor(r.x1)-s,column:Fs,y:l*(o||r.height()+2*r.y1),row:c};break;case Ms:f.anchor={x:Math.ceil(r.x2)+s,y:l*(o||r.height()+2*r.y1),row:c};break;case Ds:f.anchor={y:Math.floor(i.y1)-s,row:Fs,x:l*(a||i.width()+2*i.x1),column:c};break;case"bottom":f.anchor={y:Math.ceil(i.y2)+s,x:l*(a||i.width()+2*i.x1),column:c};break;case"top-left":f.anchor={x:s,y:s};break;case"top-right":f.anchor={x:a-s,y:s,column:Fs};break;case"bottom-left":f.anchor={x:s,y:o-s,row:Fs};break;case"bottom-right":f.anchor={x:a-s,y:o-s,column:Fs,row:Fs}}return f}function Nh(e,t){var n,r,i=t.items[0],a=i.datum,o=i.orient,u=i.bounds,s=i.x,c=i.y;return i._bounds?i._bounds.clear().union(u):i._bounds=u.clone(),u.clear(),function(e,t,n){var r=t.padding,i=r-n.x,a=r-n.y;if(t.datum.title){var o=t.items[1].items[0],u=o.anchor,s=t.titlePadding||0,c=r-o.x,l=r-o.y;switch(o.orient){case Is:i+=Math.ceil(o.bounds.width())+s;break;case Ms:case"bottom":break;default:a+=o.bounds.height()+s}switch((i||a)&&Dh(e,n,i,a),o.orient){case Is:l+=Rh(t,n,o,u,1,1);break;case Ms:c+=Rh(t,n,o,Fs,0,0)+s,l+=Rh(t,n,o,u,1,1);break;case"bottom":c+=Rh(t,n,o,u,0,0),l+=Rh(t,n,o,Fs,-1,0,1)+s;break;default:c+=Rh(t,n,o,u,0,0)}(c||l)&&Dh(e,o,c,l),(c=Math.round(o.bounds.x1-r))<0&&(Dh(e,n,-c,0),Dh(e,o,-c,0))}else(i||a)&&Dh(e,n,i,a)}(e,i,i.items[0].items[0]),u=function(e,t){return e.items.forEach((function(e){return t.union(e.bounds)})),t.x1=e.padding,t.y1=e.padding,t}(i,u),n=2*i.padding,r=2*i.padding,u.empty()||(n=Math.ceil(u.width()+n),r=Math.ceil(u.height()+r)),"symbol"===a.type&&function(e){var t=e.reduce((function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e}),{});e.forEach((function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),"none"!==o&&(i.x=s=0,i.y=c=0),i.width=n,i.height=r,ef(u.set(s,c,s+n,c+r),i),i.mark.bounds.clear().union(u),i}function Rh(e,t,n,r,i,a,o){var u="symbol"!==e.datum.type,s=n.datum.vgrad,c=(!u||!a&&s||o?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,l=s&&a?c:0,f=s&&a?0:c,d=i<=0?0:_d(n);return Math.round("start"===r?l:r===Fs?f-d:.5*(c-d))}function Dh(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Ih(e){bi.call(this,null,e)}Object(Me.y)(Ih,bi).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach((function(t){e.layout&&kh(n,t,e.layout),function(e,t,n){var r,i,a,o,u,s=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),f=(new zs).set(0,0,c,l),d=f.clone(),p=f.clone(),h=[];for(o=0,u=s.length;o<u;++o)switch((i=s[o]).role){case"axis":(hh(i)?d:p).union(mh(e,i,c,l));break;case"title":r=i;break;case"legend":h.push(Nh(e,i));break;case"frame":case"scope":case"row-header":case"row-footer":case"row-title":case"column-header":case"column-footer":case"column-title":d.union(i.bounds),p.union(i.bounds);break;default:f.union(i.bounds)}if(h.length){var m={};for(var v in h.forEach((function(e){"none"!==(a=e.orient||Ms)&&(m[a]||(m[a]=[])).push(e)})),m){var g=m[v];Oh(e,g,Th(g,v,n.legends,d,p,c,l))}h.forEach((function(t){var r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&"fit"===n.autosize.type)switch(t.orient){case Is:case Ms:f.add(r.x1,0).add(r.x2,0);break;case Ds:case"bottom":f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(p),r&&f.union(function(e,t,n,r,i){var a,o=t.items[0],u=o.frame,s=o.orient,c=o.anchor,l=o.offset,f=o.padding,d=o.items[0].items[0],p=o.items[1]&&o.items[1].items[0],h=s===Is||s===Ms?r:n,m=0,v=0,g=0,y=0,b=0;if("group"!==u?s===Is?(m=i.y2,h=i.y1):s===Ms?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):s===Is&&(m=r,h=0),a="start"===c?m:c===Fs?h:(m+h)/2,p&&p.text){switch(s){case Ds:case"bottom":b=d.bounds.height()+f;break;case Is:y=d.bounds.width()+f;break;case Ms:y=-d.bounds.width()-f}dh.clear().union(p.bounds),dh.translate(y-(p.x||0),b-(p.y||0)),ph(p,"x",y)|ph(p,"y",b)&&(e.dirty(p),p.bounds.clear().union(dh),p.mark.bounds.clear().union(dh),e.dirty(p)),dh.clear().union(p.bounds)}else dh.clear();switch(dh.union(d.bounds),s){case Ds:v=a,g=i.y1-dh.height()-l;break;case Is:v=i.x1-dh.width()-l,g=a;break;case Ms:v=i.x2+dh.width()+l,g=a;break;case"bottom":v=a,g=i.y2+l;break;default:v=o.x,g=o.y}return ph(o,"x",v)|ph(o,"y",g)&&(dh.translate(v,g),e.dirty(o),o.bounds.clear().union(dh),t.bounds.clear().union(dh),e.dirty(o)),o.bounds}(e,r,c,l,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){var i=r.autosize||{},a=i.type;if(e._autosize<1||!a)return;var o=e._width,u=e._height,s=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-s)),f=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-f));if("padding"===i.contains){var h=e.padding();o-=h.left+h.right,u-=h.top+h.bottom}"none"===a?(c=0,d=0,s=o,f=u):"fit"===a?(s=Math.max(0,o-c-l),f=Math.max(0,u-d-p)):"fit-x"===a?(s=Math.max(0,o-c-l),u=f+d+p):"fit-y"===a?(o=s+c+l,f=Math.max(0,u-d-p)):"pad"===a&&(o=s+c+l,u=f+d+p);e._resizeView(o,u,s,f,[c,d],i.resize)}(e,t,f,n)}(n,t,e)})),e.modified()&&t.reflow(),t};var Mh=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0},Fh="log",Ph="utc",zh="continuous",Lh=rs(Mi),Bh=Lh.right,Wh=Lh.left,Uh=Bh;function Vh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Hh(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}var qh=Symbol("implicit");function Gh(){var e=new Map,t=[],n=[],r=qh;function i(i){var a=i+"",o=e.get(a);if(!o){if(r!==qh)return r;e.set(a,o=t.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,a=Object(Ri.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o+"";e.has(u)||e.set(u,t.push(o))}}catch(s){a.e(s)}finally{a.f()}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Gh(t,n).unknown(r)},Vh.apply(i,arguments),i}function $h(){var e,t,n=Gh().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=a[1]<a[0],f=a[l-0],d=a[1-l],p=Mh(n,u,s);e=(d-f)/(p||1),o&&(e=Math.floor(e)),f+=(d-f-e*(n-u))*c,t=e*(1-u),o&&(f=Math.round(f),t=Math.round(t));var h=Wo(n).map((function(t){return f+e*t}));return i(l?h.reverse():h)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(a=[+e[0],+e[1]],l()):a.slice()},n.rangeRound=function(e){return a=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=+e[0],c=+e[1],l=a[1]<a[0],f=l?i().reverse():i(),d=f.length-1;if(s===s&&c===c&&(c<s&&(u=s,s=c,c=u),!(c<f[0]||s>a[1-l])))return n=Math.max(0,Bh(f,s)-1),o=s===c?n:Bh(f,c)-1,s-f[n]>t+1e-10&&++n,l&&(u=n,n=d-o,o=d-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return $h().domain(r()).range(a).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}var Kh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xh(e){if(!(t=Kh.exec(e)))throw new Error("invalid format: "+e);var t;return new Yh({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Yh(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}Xh.prototype=Yh.prototype,Yh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Jh,Zh,Qh,em,tm=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},nm=function(e){return(e=tm(Math.abs(e)))?e[1]:NaN},rm=function(e,t){var n=tm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},im={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return rm(100*e,t)},r:rm,s:function(e,t){var n=tm(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Jh=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+tm(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},am=function(e){return e},om=Array.prototype.map,um=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],sm=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?am:(t=om.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(e.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?am:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(om.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=Xh(e)).fill,n=e.align,f=e.sign,d=e.symbol,p=e.zero,h=e.width,m=e.comma,v=e.precision,g=e.trim,y=e.type;"n"===y?(m=!0,y="g"):im[y]||(void 0===v&&(v=12),g=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?a:/[%p]/.test(y)?s:"",w=im[y],O=/[defgprs%]/.test(y);function k(e){var i,a,s,d=b,k=x;if("c"===y)k=w(e)+k,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),v),g&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==f&&(E=!1),d=(E?"("===f?f:c:"-"===f||"("===f?"":f)+d,k=("s"===y?um[8+Jh/3]:"")+k+(E&&"("===f?")":""),O)for(i=-1,a=e.length;++i<a;)if(48>(s=e.charCodeAt(i))||s>57){k=(46===s?o+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var S=d.length+e.length+k.length,C=S<h?new Array(h-S+1).join(t):"";switch(m&&p&&(e=r(C+e,C.length?h-k.length:1/0),C=""),n){case"<":e=d+e+k+C;break;case"=":e=d+C+e+k;break;case"^":e=C.slice(0,S=C.length>>1)+d+e+k+C.slice(S);break;default:e=C+d+e+k}return u(e)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=Xh(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(nm(t)/3))),i=Math.pow(10,-r),a=um[8+r/3];return function(e){return n(i*e)+a}}}};function cm(e){return Zh=sm(e),Qh=Zh.format,em=Zh.formatPrefix,Zh}cm({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var lm=function(e,t,n,r){var i,a=cs(e,t,n);switch((r=Xh(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(nm(t)/3)))-nm(Math.abs(e)))}(a,o))||(r.precision=i),em(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nm(t)-nm(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-nm(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return Qh(r)},fm=Array.prototype.map;function dm(e){return fm.call(e,(function(e){return+e}))}var pm=Array.prototype.slice;var hm=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function mm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vm(){}var gm="\\s*([+-]?\\d+)\\s*",ym="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bm="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xm=/^#([0-9a-f]{3,8})$/,wm=new RegExp("^rgb\\("+[gm,gm,gm]+"\\)$"),Om=new RegExp("^rgb\\("+[bm,bm,bm]+"\\)$"),km=new RegExp("^rgba\\("+[gm,gm,gm,ym]+"\\)$"),Em=new RegExp("^rgba\\("+[bm,bm,bm,ym]+"\\)$"),Sm=new RegExp("^hsl\\("+[ym,bm,bm]+"\\)$"),Cm=new RegExp("^hsla\\("+[ym,bm,bm,ym]+"\\)$"),_m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function jm(){return this.rgb().formatHex()}function Am(){return this.rgb().formatRgb()}function Tm(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Nm(t):3===n?new Mm(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new Mm(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new Mm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=wm.exec(e))?new Mm(t[1],t[2],t[3],1):(t=Om.exec(e))?new Mm(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=km.exec(e))?Rm(t[1],t[2],t[3],t[4]):(t=Em.exec(e))?Rm(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Sm.exec(e))?Lm(t[1],t[2]/100,t[3]/100,1):(t=Cm.exec(e))?Lm(t[1],t[2]/100,t[3]/100,t[4]):_m.hasOwnProperty(e)?Nm(_m[e]):"transparent"===e?new Mm(NaN,NaN,NaN,0):null}function Nm(e){return new Mm(e>>16&255,e>>8&255,255&e,1)}function Rm(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mm(e,t,n,r)}function Dm(e){return e instanceof vm||(e=Tm(e)),e?new Mm((e=e.rgb()).r,e.g,e.b,e.opacity):new Mm}function Im(e,t,n,r){return 1===arguments.length?Dm(e):new Mm(e,t,n,null==r?1:r)}function Mm(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Fm(){return"#"+zm(this.r)+zm(this.g)+zm(this.b)}function Pm(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function zm(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Lm(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Um(e,t,n,r)}function Bm(e){if(e instanceof Um)return new Um(e.h,e.s,e.l,e.opacity);if(e instanceof vm||(e=Tm(e)),!e)return new Um;if(e instanceof Um)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Um(o,u,s,e.opacity)}function Wm(e,t,n,r){return 1===arguments.length?Bm(e):new Um(e,t,n,null==r?1:r)}function Um(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Vm(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Hm(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}hm(vm,Tm,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:jm,formatHex:jm,formatHsl:function(){return Bm(this).formatHsl()},formatRgb:Am,toString:Am}),hm(Mm,Im,mm(vm,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Mm(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Mm(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fm,formatHex:Fm,formatRgb:Pm,toString:Pm})),hm(Um,Wm,mm(vm,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Um(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Um(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Mm(Vm(e>=240?e-240:e+120,i,r),Vm(e,i,r),Vm(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var qm=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Hm((n-r/t)*t,o,i,a,u)}},Gm=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return Hm((n-r/t)*t,i,a,o,u)}},$m=function(e){return function(){return e}};function Km(e,t){return function(n){return e+n*t}}function Xm(e,t){var n=t-e;return n?Km(e,n>180||n<-180?n-360*Math.round(n/360):n):$m(isNaN(e)?t:e)}function Ym(e){return 1===(e=+e)?Jm:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):$m(isNaN(t)?n:t)}}function Jm(e,t){var n=t-e;return n?Km(e,n):$m(isNaN(e)?t:e)}var Zm=function e(t){var n=Ym(t);function r(e,t){var r=n((e=Im(e)).r,(t=Im(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Jm(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Qm(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=Im(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}var ev=Qm(qm),tv=Qm(Gm),nv=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}};function rv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var iv=function(e,t){return(rv(t)?nv:av)(e,t)};function av(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=dv(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}var ov=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},uv=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},sv=function(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=dv(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},cv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lv=new RegExp(cv.source,"g");var fv=function(e,t){var n,r,i,a=cv.lastIndex=lv.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=cv.exec(e))&&(r=lv.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:uv(n,r)})),a=lv.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})},dv=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?$m(t):("number"===r?uv:"string"===r?(n=Tm(t))?(t=n,Zm):fv:t instanceof Tm?Zm:t instanceof Date?ov:rv(t)?nv:Array.isArray(t)?av:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?sv:uv)(e,t)},pv=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},hv=function(e){return+e},mv=[0,1];function vv(e){return e}function gv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function yv(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=gv(i,r),a=n(o,a)):(r=gv(r,i),a=n(a,o)),function(e){return a(r(e))}}function bv(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=gv(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Uh(e,t,1,r)-1;return a[n](i[n](t))}}function xv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wv(){var e,t,n,r,i,a,o=mv,u=mv,s=dv,c=vv;function l(){var e=Math.min(o.length,u.length);return c!==vv&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?bv:yv,i=a=null,f}function f(t){return isNaN(t=+t)?n:(i||(i=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((a||(a=r(u,o.map(e),uv)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,hv),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=pv,l()},f.clamp=function(e){return arguments.length?(c=!!e||vv,l()):c!==vv},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function Ov(){return wv()(vv,vv)}function kv(e){var t=e.domain;return e.ticks=function(e){var n=t();return us(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return lm(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),(r=ss(u,s,n))>0?r=ss(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=ss(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}var Ev=function(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e};function Sv(e){return Math.log(e)}function Cv(e){return Math.exp(e)}function _v(e){return-Math.log(-e)}function jv(e){return-Math.exp(-e)}function Av(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Tv(e){return function(t){return-e(-t)}}function Nv(e){var t,n,r=e(Sv,Cv),i=r.domain,a=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(a),n=function(e){return 10===e?Av:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(a),i()[0]<0?(t=Tv(t),n=Tv(n),e(_v,jv)):e(Sv,Cv),r}return r.base=function(e){return arguments.length?(a=+e,o()):a},r.domain=function(e){return arguments.length?(i(e),o()):i()},r.ticks=function(e){var r,o=i(),u=o[0],s=o[o.length-1];(r=s<u)&&(d=u,u=s,s=d);var c,l,f,d=t(u),p=t(s),h=null==e?10:+e,m=[];if(!(a%1)&&p-d<h){if(d=Math.floor(d),p=Math.ceil(p),u>0){for(;d<=p;++d)for(l=1,c=n(d);l<a;++l)if(!((f=c*l)<u)){if(f>s)break;m.push(f)}}else for(;d<=p;++d)for(l=a-1,c=n(d);l>=1;--l)if(!((f=c*l)<u)){if(f>s)break;m.push(f)}2*m.length<h&&(m=us(u,s,h))}else m=us(d,p,Math.min(p-d,h)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===a?".0e":","),"function"!==typeof i&&(i=Qh(i)),e===1/0)return i;null==e&&(e=10);var o=Math.max(1,a*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*a<a-.5&&(r*=a),r<=o?i(e):""}},r.nice=function(){return i(Ev(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Rv(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Dv(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Iv(e){return e<0?-e*e:e*e}function Mv(e){var t=e(vv,vv),n=1;function r(){return 1===n?e(vv,vv):.5===n?e(Dv,Iv):e(Rv(n),Rv(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},kv(t)}function Fv(){var e=Mv(wv());return e.copy=function(){return xv(e,Fv()).exponent(e.exponent())},Vh.apply(e,arguments),e}function Pv(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zv(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Lv(e){var t=1,n=e(Pv(t),zv(t));return n.constant=function(n){return arguments.length?e(Pv(t=+n),zv(t)):t},kv(n)}function Bv(e){return new Date(e)}function Wv(e){return e instanceof Date?+e:+new Date(+e)}function Uv(e,t,n,r,i,a,o,u,s){var c=Ov(),l=c.invert,f=c.domain,d=s(".%L"),p=s(":%S"),h=s("%I:%M"),m=s("%I %p"),v=s("%a %d"),g=s("%b %d"),y=s("%B"),b=s("%Y"),x=[[o,1,1e3],[o,5,5e3],[o,15,15e3],[o,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function w(u){return(o(u)<u?d:a(u)<u?p:i(u)<u?h:r(u)<u?m:t(u)<u?n(u)<u?v:g:e(u)<u?y:b)(u)}function O(t,n,r){if(null==t&&(t=10),"number"===typeof t){var i,a=Math.abs(r-n)/t,o=rs((function(e){return e[2]})).right(x,a);return o===x.length?(i=cs(n/31536e6,r/31536e6,t),t=e):o?(i=(o=x[a/x[o-1][2]<x[o][2]/a?o-1:o])[1],t=o[0]):(i=Math.max(cs(n,r,t),1),t=u),t.every(i)}return t}return c.invert=function(e){return new Date(l(e))},c.domain=function(e){return arguments.length?f(Array.from(e,Wv)):f().map(Bv)},c.ticks=function(e){var t,n=f(),r=n[0],i=n[n.length-1],a=i<r;return a&&(t=r,r=i,i=t),t=(t=O(e,r,i))?t.range(r,i+1):[],a?t.reverse():t},c.tickFormat=function(e,t){return null==t?w:s(t)},c.nice=function(e){var t=f();return(e=O(e,t[0],t[t.length-1]))?f(Ev(t,e)):c},c.copy=function(){return xv(c,Uv(e,t,n,r,i,a,o,u,s))},c}function Vv(){var e,t,n,r,i,a=0,o=1,u=vv,s=!1;function c(t){return isNaN(t=+t)?i:u(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function l(e){return function(t){var n,r,i,a;return arguments.length?(n=t,i=(r=Object(Ca.a)(n,2))[0],a=r[1],u=e(i,a),c):[u(0),u(1)]}}return c.domain=function(i){var u,s;return arguments.length?(u=i,s=Object(Ca.a)(u,2),a=s[0],o=s[1],e=r(a=+a),t=r(o=+o),n=e===t?0:1/(t-e),c):[a,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=l(dv),c.rangeRound=l(pv),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),c}}function Hv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qv(){var e=kv(Vv()(vv));return e.copy=function(){return Hv(e,qv())},Hh.apply(e,arguments)}function Gv(){var e=Mv(Vv());return e.copy=function(){return Hv(e,Gv()).exponent(e.exponent())},Hh.apply(e,arguments)}function $v(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}function Kv(){var e,t,n,r,i,a,o,u=0,s=.5,c=1,l=1,f=vv,d=!1;function p(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(l*e<l*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function h(e){return function(t){var n,r,i,a,o;return arguments.length?(n=t,i=(r=Object(Ca.a)(n,3))[0],a=r[1],o=r[2],f=$v(e,[i,a,o]),p):[f(0),f(.5),f(1)]}}return p.domain=function(o){var f,d;return arguments.length?(f=o,d=Object(Ca.a)(f,3),u=d[0],s=d[1],c=d[2],e=a(u=+u),t=a(s=+s),n=a(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),l=t<e?-1:1,p):[u,s,c]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(f=e,p):f},p.range=h(dv),p.rangeRound=h(pv),p.unknown=function(e){return arguments.length?(o=e,p):o},function(o){return a=o,e=o(u),t=o(s),n=o(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),l=t<e?-1:1,p}}function Xv(){var e=Mv(Kv());return e.copy=function(){return Hv(e,Xv()).exponent(e.exponent())},Hh.apply(e,arguments)}var Yv={};function Jv(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){var n,r,i,a,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(c<0&&(c=i),n=i);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=Object(Me.db)(Object(Me.i)(n)),r}function Zv(e,t,n){return arguments.length>1?(Yv[e]=Jv(e,t,n),this):Qv(e)?Yv[e]:void 0}function Qv(e){return Object(Me.v)(Yv,e)}function eg(e,t){var n=Yv[e];return n&&n.metadata[t]}function tg(e){return eg(e,zh)}function ng(e){return eg(e,"discrete")}function rg(e){return eg(e,"discretizing")}function ig(e){return eg(e,Fh)}function ag(e){return eg(e,"interpolating")}function og(e){return eg(e,"quantile")}Zv("identity",(function e(t){var n;function r(e){return isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,hv),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,hv):[0,1],kv(r)})),Zv("linear",(function e(){var t=Ov();return t.copy=function(){return xv(t,e())},Vh.apply(t,arguments),kv(t)}),zh),Zv(Fh,(function e(){var t=Nv(wv()).domain([1,10]);return t.copy=function(){return xv(t,e()).base(t.base())},Vh.apply(t,arguments),t}),[zh,Fh]),Zv("pow",Fv,zh),Zv("sqrt",(function(){return Fv.apply(null,arguments).exponent(.5)}),zh),Zv("symlog",(function e(){var t=Lv(wv());return t.copy=function(){return xv(t,e()).constant(t.constant())},Vh.apply(t,arguments)}),zh),Zv("time",(function(){return Vh.apply(Uv(En,Eu,hn,On,Cu,ju,Tu,Mu,Nn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[zh,"temporal"]),Zv(Ph,(function(){return Vh.apply(Uv(Cn,Pu,rn,dn,Lu,Wu,Tu,Mu,Dn).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[zh,"temporal"]),Zv("sequential",qv,[zh,"interpolating"]),Zv("".concat("sequential","-").concat("linear"),qv,[zh,"interpolating"]),Zv("".concat("sequential","-").concat(Fh),(function e(){var t=Nv(Vv()).domain([1,10]);return t.copy=function(){return Hv(t,e()).base(t.base())},Hh.apply(t,arguments)}),[zh,"interpolating",Fh]),Zv("".concat("sequential","-").concat("pow"),Gv,[zh,"interpolating"]),Zv("".concat("sequential","-").concat("sqrt"),(function(){return Gv.apply(null,arguments).exponent(.5)}),[zh,"interpolating"]),Zv("".concat("sequential","-").concat("symlog"),(function e(){var t=Lv(Vv());return t.copy=function(){return Hv(t,e()).constant(t.constant())},Hh.apply(t,arguments)}),[zh,"interpolating"]),Zv("".concat("diverging","-").concat("linear"),(function e(){var t=kv(Kv()(vv));return t.copy=function(){return Hv(t,e())},Hh.apply(t,arguments)}),[zh,"interpolating"]),Zv("".concat("diverging","-").concat(Fh),(function e(){var t=Nv(Kv()).domain([.1,1,10]);return t.copy=function(){return Hv(t,e()).base(t.base())},Hh.apply(t,arguments)}),[zh,"interpolating",Fh]),Zv("".concat("diverging","-").concat("pow"),Xv,[zh,"interpolating"]),Zv("".concat("diverging","-").concat("sqrt"),(function(){return Xv.apply(null,arguments).exponent(.5)}),[zh,"interpolating"]),Zv("".concat("diverging","-").concat("symlog"),(function e(){var t=Lv(Kv());return t.copy=function(){return Hv(t,e()).constant(t.constant())},Hh.apply(t,arguments)}),[zh,"interpolating"]),Zv("quantile",(function e(){var t,n=[],r=[],i=[];function a(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=Ui(n,e/t);return o}function o(e){return isNaN(e=+e)?t:r[Uh(i,e)]}return o.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},o.domain=function(e){if(!arguments.length)return n.slice();n=[];var t,r=Object(Ri.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;null==i||isNaN(i=+i)||n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n.sort(Mi),a()},o.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return i.slice()},o.copy=function(){return e().domain(n).range(r).unknown(t)},Vh.apply(o,arguments)}),["discretizing","quantile"]),Zv("quantize",(function e(){var t,n=0,r=1,i=1,a=[.5],o=[0,1];function u(e){return e<=e?o[Uh(a,e,0,i)]:t}function s(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*r-(e-i)*n)/(i+1);return u}return u.domain=function(e){var t,i;return arguments.length?(t=e,i=Object(Ca.a)(t,2),n=i[0],r=i[1],n=+n,r=+r,s()):[n,r]},u.range=function(e){return arguments.length?(i=(o=Array.from(e)).length-1,s()):o.slice()},u.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=i?[a[i-1],r]:[a[t-1],a[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return a.slice()},u.copy=function(){return e().domain([n,r]).range(o).unknown(t)},Vh.apply(kv(u),arguments)}),"discretizing"),Zv("threshold",(function e(){var t,n=[.5],r=[0,1],i=1;function a(e){return e<=e?r[Uh(n,e,0,i)]:t}return a.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(n).range(r).unknown(t)},Vh.apply(a,arguments)}),"discretizing"),Zv("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(Uh(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=dm(e),r):t.slice()},r.range=function(e){return arguments.length?(n=pm.call(e),r):n.slice()},r.tickFormat=function(e,n){return lm(t[0],Object(Me.U)(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),["discrete","discretizing"]),Zv("ordinal",Gh,"discrete"),Zv("band",$h,"discrete"),Zv("point",(function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return e(n())},t}($h().paddingInner(1))}),"discrete");var ug,sg,cg,lg,fg=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},dg=function(e,t){var n=Xm(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},pg=180/Math.PI,hg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},mg=function(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*pg,skewX:Math.atan(s)*pg,scaleX:o,scaleY:u}};function vg(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var u=[],s=[];return a=e(a),o=e(o),function(e,r,i,a,o,u){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:uv(e,i)},{i:s-2,x:uv(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,u,s),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:uv(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,u,s),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:uv(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,u,s),function(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:uv(e,n)},{i:u-2,x:uv(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,u,s),a=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var gg=vg((function(e){return"none"===e?hg:(ug||(ug=document.createElement("DIV"),sg=document.documentElement,cg=document.defaultView),ug.style.transform=e,e=cg.getComputedStyle(sg.appendChild(ug),null).getPropertyValue("transform"),sg.removeChild(ug),e=e.slice(7,-1).split(","),mg(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),yg=vg((function(e){return null==e?hg:(lg||(lg=document.createElementNS("http://www.w3.org/2000/svg","g")),lg.setAttribute("transform",e),(e=lg.transform.baseVal.consolidate())?(e=e.matrix,mg(e.a,e.b,e.c,e.d,e.e,e.f)):hg)}),", ",")",")"),bg=Math.SQRT2;function xg(e){return((e=Math.exp(e))+1/e)/2}var wg=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],u=t[0],s=t[1],c=t[2],l=u-i,f=s-a,d=l*l+f*f;if(d<1e-12)r=Math.log(c/o)/bg,n=function(e){return[i+e*l,a+e*f,o*Math.exp(bg*e*r)]};else{var p=Math.sqrt(d),h=(c*c-o*o+4*d)/(2*o*2*p),m=(c*c-o*o-4*d)/(2*c*2*p),v=Math.log(Math.sqrt(h*h+1)-h),g=Math.log(Math.sqrt(m*m+1)-m);r=(g-v)/bg,n=function(e){var t,n=e*r,u=xg(v),s=o/(2*p)*(u*(t=bg*n+v,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[i+s*l,a+s*f,o*u/xg(bg*n+v)]}}return n.duration=1e3*r,n};function Og(e){return function(t,n){var r=e((t=Wm(t)).h,(n=Wm(n)).h),i=Jm(t.s,n.s),a=Jm(t.l,n.l),o=Jm(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}var kg=Og(Xm),Eg=Og(Jm),Sg=Math.PI/180,Cg=180/Math.PI;function _g(e){if(e instanceof Ag)return new Ag(e.l,e.a,e.b,e.opacity);if(e instanceof Fg)return Pg(e);e instanceof Mm||(e=Dm(e));var t,n,r=Dg(e.r),i=Dg(e.g),a=Dg(e.b),o=Tg((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?t=n=o:(t=Tg((.4360747*r+.3850649*i+.1430804*a)/.96422),n=Tg((.0139322*r+.0971045*i+.7141733*a)/.82521)),new Ag(116*o-16,500*(t-o),200*(o-n),e.opacity)}function jg(e,t,n,r){return 1===arguments.length?_g(e):new Ag(e,t,n,null==r?1:r)}function Ag(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Tg(e){return e>6/29*(6/29)*(6/29)?Math.pow(e,1/3):e/(6/29*3*(6/29))+4/29}function Ng(e){return e>6/29?e*e*e:6/29*3*(6/29)*(e-4/29)}function Rg(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Dg(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ig(e){if(e instanceof Fg)return new Fg(e.h,e.c,e.l,e.opacity);if(e instanceof Ag||(e=_g(e)),0===e.a&&0===e.b)return new Fg(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Cg;return new Fg(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Mg(e,t,n,r){return 1===arguments.length?Ig(e):new Fg(e,t,n,null==r?1:r)}function Fg(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Pg(e){if(isNaN(e.h))return new Ag(e.l,0,0,e.opacity);var t=e.h*Sg;return new Ag(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function zg(e,t){var n=Jm((e=jg(e)).l,(t=jg(t)).l),r=Jm(e.a,t.a),i=Jm(e.b,t.b),a=Jm(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}function Lg(e){return function(t,n){var r=e((t=Mg(t)).h,(n=Mg(n)).h),i=Jm(t.c,n.c),a=Jm(t.l,n.l),o=Jm(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}hm(Ag,jg,mm(vm,{brighter:function(e){return new Ag(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Ag(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Mm(Rg(3.1338561*(t=.96422*Ng(t))-1.6168667*(e=1*Ng(e))-.4906146*(n=.82521*Ng(n))),Rg(-.9787684*t+1.9161415*e+.033454*n),Rg(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),hm(Fg,Mg,mm(vm,{brighter:function(e){return new Fg(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Fg(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Pg(this).rgb()}}));var Bg=Lg(Xm),Wg=Lg(Jm),Ug=1.97294,Vg=-.90649*Ug,Hg=1.78277*Ug,qg=-.6557636667999999;function Gg(e){if(e instanceof Kg)return new Kg(e.h,e.s,e.l,e.opacity);e instanceof Mm||(e=Dm(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(qg*r+Vg*t-Hg*n)/(qg+Vg-Hg),a=r-i,o=(Ug*(n-i)- -.29227*a)/-.90649,u=Math.sqrt(o*o+a*a)/(Ug*i*(1-i)),s=u?Math.atan2(o,a)*Cg-120:NaN;return new Kg(s<0?s+360:s,u,i,e.opacity)}function $g(e,t,n,r){return 1===arguments.length?Gg(e):new Kg(e,t,n,null==r?1:r)}function Kg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Xg(e){return function t(n){function r(t,r){var i=e((t=$g(t)).h,(r=$g(r)).h),a=Jm(t.s,r.s),o=Jm(t.l,r.l),u=Jm(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}hm(Kg,$g,mm(vm,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Kg(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Kg(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Sg,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Mm(255*(t+n*(-.14861*r+1.78277*i)),255*(t+n*(-.29227*r+-.90649*i)),255*(t+n*(Ug*r)),this.opacity)}}));var Yg=Xg(Xm),Jg=Xg(Jm),Zg=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n},Qg=["clamp","base","constant","exponent"];function ey(e,t){var n=t[0],r=Object(Me.U)(t)-n;return function(t){return e(n+t*r)}}function ty(e,t,n){return $v(iy(t||"rgb",n),e)}function ny(e,t){for(var n=new Array(t),r=t+1,i=0;i<t;)n[i]=e(++i/r);return n}function ry(e,t,n){var r,i,a,o=n-t;return o&&Number.isFinite(o)?(r=(i=e.type).indexOf("-"),i=r<0?i:i.slice(r+1),a=Zv(i)().domain([t,n]).range([0,1]),Qg.forEach((function(t){return e[t]?a[t](e[t]()):0})),a):Object(Me.l)(.5)}function iy(e,t){var n=a[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function ay(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function oy(e,t){for(var n in e)sy(n,t(e[n]))}var uy={};function sy(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(uy[e]=t,this):uy[e]}oy({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},ay),oy({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return ty(ay(e))}));var cy=function(e){return Object(Me.A)(e)?e.map((function(e){return String(e)})):String(e)};function ly(e,t,n){var r;return Object(Me.E)(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,~~(Object(Me.X)(e.domain())/n)||1))),Object(Me.F)(t)&&(r=t.step,t=t.interval),Object(Me.H)(t)&&(t="time"===e.type?Hu(t):e.type==Ph?qu(t):Object(Me.n)("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function fy(e,t,n){var r=e.range(),i=Math.floor(r[0]),a=Math.ceil(Object(Me.U)(r));if(i>a&&(r=a,a=i,i=r),t=t.filter((function(t){return t=e(t),i<=t&&t<=a})),n>0&&t.length>1){for(var o=[t[0],Object(Me.U)(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=o)}return t}function dy(e,t){return e.bins?fy(e,e.bins):e.ticks?e.ticks(t):e.domain()}function py(e,t,n,r,i){var a,o,u=e.type,s="time"===u||"time"===r?es(n):u===Ph||r===Ph?ts(n):e.tickFormat?e.tickFormat(t,n):n?Qh(n):cy;if(ig(u)){var c=function(e){var t=Xh(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return function(e,t){return function(n){var r,i,a=e(n),o=a.indexOf(t);if(o<0)return a;for(i=(r=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(a,o))<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}(Qh(t),Qh(".1f")(1)[1])}return Qh(t)}(n);s=i||e.bins?c:(a=s,o=c,function(e){return a(e)?o(e):""})}return s}function hy(e){bi.call(this,null,e)}function my(e){bi.call(this,null,e)}function vy(){return qe({})}function gy(e){return e.exit}function yy(e){bi.call(this,null,e)}Object(Me.y)(hy,bi).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=ly(i,null==e.count?e.values?e.values.length:10:e.count,e.minstep),o=e.format||py(i,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?fy(i,e.values,a):dy(i,a);return r&&(n.rem=r),r=u.map((function(e,t){return qe({index:t/(u.length-1||1),value:e,label:o(e)})})),e.extra&&r.length&&r.push(qe({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Object(Me.y)(my,bi).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||vy,a=e.key||Ve,o=this.value;return Object(Me.A)(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&Object(Me.n)("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Object(Me.s)().test(gy),o.lookup=function(e){return o.get(a(e))}),t.visit(t.ADD,(function(e){var t=a(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(function(e){var t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(function(e){var t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},Object(Me.y)(yy,bi).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,a=t.encode;if(Object(Me.A)(a)){if(!n.changed()&&!a.every((function(e){return i[e]})))return t.StopPropagation;a=a[0],n.encode=null}var o="enter"===a,u=i.update||Me.r,s=i.enter||Me.r,c=i.exit||Me.r,l=(a&&!o?i[a]:u)||Me.r;if(t.changed(t.ADD)&&(t.visit(t.ADD,(function(t){s(t,e),u(t,e)})),n.modifies(s.output),n.modifies(u.output),l!==Me.r&&l!==u&&(t.visit(t.ADD,(function(t){l(t,e)})),n.modifies(l.output))),t.changed(t.REM)&&c!==Me.r&&(t.visit(t.REM,(function(t){c(t,e)})),n.modifies(c.output)),o||l!==Me.r){var f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,(function(t){var i=s(t,e)||r;(l(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(s.output)):t.visit(f,(function(t){(l(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:t.StopPropagation};var by,xy,wy=(by={},Object(su.a)(by,"quantile","quantiles"),Object(su.a)(by,"quantize","thresholds"),Object(su.a)(by,"threshold","domain"),by),Oy=(xy={},Object(su.a)(xy,"quantile","quantiles"),Object(su.a)(xy,"quantize","domain"),xy);function ky(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=Object(Me.U)(e),t}(e.bins):e.type===Fh?function(e,t){var n=dy(e,t),r=e.base(),i=Math.log(r),a=Math.max(1,r*t/n.length);return n.filter((function(e){var t=e/Math.pow(r,Math.round(Math.log(e)/i));return t*r<r-.5&&(t*=r),t<=a}))}(e,t):wy[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[wy[e.type]]()):dy(e,t)}function Ey(e,t,n,r,i,a){var o=Oy[e.type]&&"time"!==i&&i!==Ph?function(e,t){var n,r=e[Oy[e.type]](),i=r.length,a=i>1?r[1]-r[0]:r[0];for(n=1;n<i;++n)a=Math.min(a,r[n]-r[n-1]);return lm(0,a,30,t)}(e,r):py(e,t,r,i,a);return"symbol"===n&&function(e){return wy[e.type]||e.bins}(e)?function(e){return function(t,n,r){var i=Sy(r[n+1],Sy(r.max,1/0)),a=Cy(t,e),o=Cy(i,e);return a&&o?a+" \u2013 "+o:o?"< "+o:"\u2265 "+a}}(o):"discrete"===n?function(e){return function(t,n){return n?e(t):null}}(o):function(e){return function(t){return e(t)}}(o)}function Sy(e,t){return null!=e?e:t}function Cy(e,t){return Number.isFinite(e)?t(e):null}function _y(e){bi.call(this,[],e)}Object(Me.y)(_y,bi).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o,u=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=this.value,c=e.type||"symbol",l=e.scale,f=+e.limit,d=ly(l,null==e.count?5:e.count,e.minstep),p=!!e.values||"symbol"===c,h=e.format||Ey(l,d,c,e.formatSpecifier,e.formatType,p),m=e.values||ky(l,d);return s&&(u.rem=s),"symbol"===c?(f&&m.length>f?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),s=m.slice(0,f-1),o=!0):s=m,Object(Me.D)(i=e.size)?(e.values||0!==l(s[0])||(s=s.slice(1)),a=s.reduce((function(t,n){return Math.max(t,i(n,e))}),0)):i=Object(Me.l)(a=i||8),s=s.map((function(t,n){return qe({index:n,label:h(t,n,s),value:t,offset:a,size:i(t,e)})})),o&&(o=m[s.length],s.push(qe({index:s.length,label:"\u2026".concat(m.length-s.length," entries"),value:o,offset:a,size:i(o,e)})))):"gradient"===c?(n=l.domain(),r=ry(l,n[0],Object(Me.U)(n)),m.length<3&&!e.values&&n[0]!==Object(Me.U)(n)&&(m=[n[0],Object(Me.U)(n)]),s=m.map((function(e,t){return qe({index:t,label:h(e,t,m),value:e,perc:r(e)})}))):(i=m.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+Object(Me.U)(t),a=i-r;if("threshold"===e.type){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(e){return(e-r)/a}}(l),s=m.map((function(e,t){return qe({index:t,label:h(e,t,m),value:e,perc:t?r(e):0,perc2:t===i?1:r(m[t+1])})}))),u.source=s,u.add=s,this.value=s,u};var jy=Object(Me.s)({line:Iy,"line-radial":function(e,t,n,r){return Iy(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:My,"arc-radial":function(e,t,n,r){return My(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:Fy,"curve-radial":function(e,t,n,r){return Fy(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*i+","+t*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}});function Ay(e){return e.source.x}function Ty(e){return e.source.y}function Ny(e){return e.target.x}function Ry(e){return e.target.y}function Dy(e){bi.call(this,{},e)}function Iy(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function My(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function Fy(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),u=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function Py(e,t){var n=0;if(void 0===t){var r,i=Object(Ri.a)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;(a=+a)&&(n+=a)}}catch(l){i.e(l)}finally{i.f()}}else{var o,u=-1,s=Object(Ri.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;(c=+t(c,++u,e))&&(n+=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function zy(e){bi.call(this,null,e)}Dy.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(Me.y)(Dy,bi).transform=function(e,t){var n=e.sourceX||Ay,r=e.sourceY||Ty,i=e.targetX||Ny,a=e.targetY||Ry,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",c=jy.get(s+"-"+u)||jy.get(s);return c||Object(Me.n)("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(function(e){e[o]=c(n(e),r(e),i(e),a(e))})),t.reflow(e.modified()).modifies(o)},zy.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(Me.y)(zy,bi).transform=function(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],u=a[1],s=e.field||Me.O,c=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(s),p=d.length,h=c,m=(l-c)/Py(d),v=Wo(p);for(e.sort&&v.sort((function(e,t){return d[e]-d[t]})),n=0;n<p;++n)i=d[v[n]],(r=f[v[n]])[o]=h,r[u]=h+=i*m;return this.value=d,t.reflow(e.modified()).modifies(a)};function Ly(e){return tg(e)&&"sequential"!==e}var By=Object(Me.db)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Wy(e){bi.call(this,null,e),this.modified(!0)}function Uy(e,t,n){ig(e)&&(Math.abs(t.reduce((function(e,t){return e+(t<0?-1:t>0?1:0)}),0))!==t.length&&n.warn("Log scale domain includes zero: "+Object(Me.Z)(t)));return t}function Vy(e,t,n){return Object(Me.D)(e)&&(t||n)?ey(e,Hy(t||[0,1],n)):e}function Hy(e,t){return t?e.slice().reverse():e}function qy(e){bi.call(this,null,e)}Object(Me.y)(Wy,bi).transform=function(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if("sequential"===n)return"sequential-linear";(function(e){var t=e.type;return tg(t)&&"time"!==t&&t!==Ph&&(e.scheme||e.range&&e.range.length&&e.range.every(Me.H))})(e)&&(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0,r=2===t?"sequential-":3===t?"diverging-":"");return(r+n||"linear").toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=Zv(i)()),e)if(!By[i]){if("padding"===i&&Ly(r.type))continue;Object(Me.D)(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,a=t.range;if(null!=t.rangeStep)a=function(e,t,n){"band"!==e&&"point"!==e&&Object(Me.n)("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i="point"===e?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Mh(n,i,r)]}(r,t,n);else if(t.scheme&&(a=function(e,t,n){var r,i,a=t.schemeExtent;Object(Me.A)(t.scheme)?i=ty(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),(i=sy(r))||Object(Me.n)("Unrecognized scheme name: ".concat(t.scheme)));return n="threshold"===e?n+1:"bin-ordinal"===e?n-1:"quantile"===e||"quantize"===e?+t.schemeCount||5:n,ag(e)?Vy(i,a,t.reverse):Object(Me.D)(i)?ny(Vy(i,a),n):"ordinal"===e?i:i.slice(0,n)}(r,t,n),Object(Me.D)(a))){if(e.interpolator)return e.interpolator(a);Object(Me.n)("Scale type ".concat(r," does not support interpolating color schemes."))}if(a&&ag(r))return e.interpolator(ty(Hy(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(iy(t.interpolate,t.interpolateGamma)):Object(Me.D)(e.round)?e.round(i):Object(Me.D)(e.rangeRound)&&e.interpolate(i?pv:dv);a&&e.range(Hy(a,t.reverse))}(r,e,function(e,t,n){var r=t.bins;if(r&&!Object(Me.A)(r)){var i=e.domain(),a=i[0],o=Object(Me.U)(i),u=null==r.start?a:r.start,s=null==r.stop?o:r.stop,c=r.step;c||Object(Me.n)("Scale bins parameter missing step property."),u<a&&(u=c*Math.ceil(a/c)),s>o&&(s=c*Math.floor(o/c)),r=Wo(u,s+c/2,c)}r?e.bins=r:e.bins&&delete e.bins;"bin-ordinal"===e.type&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){var r=function(e,t,n){return t?(e.domain(Uy(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,a,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&function(e){var t=e.type;return!e.bins&&("linear"===t||"pow"===t||"sqrt"===t)}(e);if(!o)return 0;Ly(u)&&t.padding&&o[0]!==Object(Me.U)(o)&&(o=function(e,t,n,r,i,a){var o=Math.abs(Object(Me.U)(n)-n[0]),u=o/(o-2*r),s=e===Fh?Object(Me.mb)(t,null,u):"sqrt"===e?Object(Me.nb)(t,null,u,.5):"pow"===e?Object(Me.nb)(t,null,u,i||1):"symlog"===e?Object(Me.ob)(t,null,u,a||1):Object(Me.lb)(t,null,u);return(t=t.slice())[0]=s[0],t[t.length-1]=s[1],t}(u,o,t.range,t.padding,t.exponent,t.constant));(s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid&&(((a=t.domainMid)<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a)));e.domain(Uy(u,o,n)),"ordinal"===u&&e.unknown(t.domainImplicit?qh:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&ly(e,t.nice)||null);return o.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)},Object(Me.y)(qy,bi).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Xe(e.sort)),this.modified(n),t};var Gy=["y0","y1"];function $y(e){bi.call(this,null,e)}function Ky(e,t,n,r,i){for(var a,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(a=e[s])[r]=o,a[i]=o+=Math.abs(n(a))}function Xy(e,t,n,r,i){for(var a,o=1/e.sum,u=0,s=e.length,c=0,l=0;c<s;++c)(a=e[c])[r]=u,a[i]=u=o*(l+=Math.abs(n(a)))}function Yy(e,t,n,r,i){for(var a,o,u=0,s=0,c=e.length,l=0;l<c;++l)(a=+n(o=e[l]))<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function Jy(){}$y.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:Gy}]},Object(Me.y)($y,bi).transform=function(e,t){var n,r,i,a,o=e.as||Gy,u=o[0],s=o[1],c=Xe(e.sort),l=e.field||Me.O,f="center"===e.offset?Ky:"normalize"===e.offset?Xy:Yy;for(n=function(e,t,n,r){var i,a,o,u,s,c,l,f,d,p=[],h=function(e){return e(s)};if(null==t)p.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)s=e[a],c=t.map(h),(l=i[c])||(i[c]=l=[],p.push(l)),l.push(s);for(c=0,d=0,u=p.length;c<u;++c){for(l=p[c],a=0,f=0,o=l.length;a<o;++a)f+=Math.abs(r(l[a]));l.sum=f,f>d&&(d=f),n&&l.sort(n)}return p.max=d,p}(t.source,e.groupby,c,l),r=0,i=n.length,a=n.max;r<i;++r)f(n[r],a,l,u,s);return t.reflow(e.modified()).modifies(o)};var Zy=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Qy=function(){var e=1,t=1,n=o;function r(e,t){return t.map((function(t){return i(e,t)}))}function i(r,i){var o=[],u=[];return function(n,r,i){var o,u,s,c,l,f,d=new Array,p=new Array;o=u=-1,c=n[0]>=r,Zy[c<<1].forEach(h);for(;++o<e-1;)s=c,c=n[o+1]>=r,Zy[s|c<<1].forEach(h);Zy[c<<0].forEach(h);for(;++u<t-1;){for(o=-1,c=n[u*e+e]>=r,l=n[u*e]>=r,Zy[c<<1|l<<2].forEach(h);++o<e-1;)s=c,c=n[u*e+e+o+1]>=r,f=l,l=n[u*e+o+1]>=r,Zy[s|c<<1|l<<2|f<<3].forEach(h);Zy[c|l<<3].forEach(h)}o=-1,l=n[u*e]>=r,Zy[l<<2].forEach(h);for(;++o<e-1;)f=l,l=n[u*e+o+1]>=r,Zy[l<<2|f<<3].forEach(h);function h(e){var t,n,r=[e[0][0]+o,e[0][1]+u],s=[e[1][0]+o,e[1][1]+u],c=a(r),l=a(s);(t=p[c])?(n=d[l])?(delete p[t.end],delete d[n.start],t===n?(t.ring.push(s),i(t.ring)):d[t.start]=p[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete p[t.end],t.ring.push(s),p[t.end=l]=t):(t=d[l])?(n=p[c])?(delete d[t.start],delete p[n.end],t===n?(t.ring.push(s),i(t.ring)):d[n.start]=p[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=c]=t):d[c]=p[l]={start:c,end:l,ring:[r,s]}}Zy[l<<3].forEach(h)}(r,i,(function(e){n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?o.push([e]):u.push(e)})),u.forEach((function(e){for(var t,n=0,r=o.length;n<r;++n)if(-1!==eb((t=o[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:o}}function a(t){return 2*t[0]+t[1]*(e+1)*4}function o(n,r,i){n.forEach((function(n){var a,o=n[0],u=n[1],s=0|o,c=0|u,l=r[c*e+s];o>0&&o<e&&s===o&&(a=r[c*e+s-1],n[0]=o+(i-a)/(l-a)-.5),u>0&&u<t&&c===u&&(a=r[(c-1)*e+s],n[1]=u+(i-a)/(l-a)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.ceil(n[0]),a=Math.ceil(n[1]);return i>0&&a>0||Object(Me.n)("invalid size"),e=i,t=a,r},r.smooth=function(e){return arguments.length?(n=e?o:Jy,r):n===o},r};function eb(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=tb(e,t[r]))return n;return 0}function tb(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,u=o-1;a<o;u=a++){var s=e[a],c=s[0],l=s[1],f=e[u],d=f[0],p=f[1];if(nb(s,f,t))return 0;l>r!==p>r&&n<(d-c)*(r-l)/(p-l)+c&&(i=-i)}return i}function nb(e,t,n){var r,i,a,o;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],a=n[r],o=t[r],i<=a&&a<=o||o<=a&&a<=i)}var rb=function(e,t,n){return function(r){var i=Object(Me.p)(r),a=n?Math.min(i[0],0):i[0],o=i[1],u=o-a,s=t?cs(a,o,e):u/(e+1);return Wo(s,o,s)}};function ib(e){bi.call(this,null,e)}function ab(e,t,n,r,i){var a=e.x1||0,o=e.y1||0,u=t*n<0;function s(e){e.forEach(c)}function c(e){u&&e.reverse(),e.forEach(l)}function l(e){e[0]=(e[0]-a)*t+r,e[1]=(e[1]-o)*n+i}return function(e){return e.coordinates.forEach(s),e}}function ob(e,t,n){var r=e>=0?e:Gi(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function ub(e){return Object(Me.D)(e)?e:Object(Me.l)(+e)}ib.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Object(Me.y)(ib,bi).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Me.x,a=Qy().smooth(!1!==e.smooth),o=e.thresholds||function(e,t,n){var r=rb(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((function(e){return Fi(t(e).values)})))}(r,i,e),u=null===e.as?null:e.as||"contour",s=[];return r.forEach((function(t){var n=i(t),r=a.size([n.width,n.height])(n.values,Object(Me.A)(o)?o:o(n.values));!function(e,t,n,r){var i=r.scale||t.scale,a=r.translate||t.translate;Object(Me.D)(i)&&(i=i(n,r));Object(Me.D)(a)&&(a=a(n,r));if((1===i||null==i)&&!a)return;var o=(Object(Me.E)(i)?i:i[0])||1,u=(Object(Me.E)(i)?i:i[1])||1,s=a&&a[0]||0,c=a&&a[1]||0;e.forEach(ab(t,o,u,s,c))}(r,n,t,e),r.forEach((function(e){s.push($e(t,qe(null!=u?Object(su.a)({},u,e):e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=s,n};var sb=function(){var e=function(e){return e[0]},t=function(e){return e[1]},n=Me.O,r=[-1,-1],i=960,a=500,o=2;function u(u,s){var c=ob(r[0],u,e)>>o,l=ob(r[1],u,t)>>o,f=c?c+2:0,d=l?l+2:0,p=2*f+(i>>o),h=2*d+(a>>o),m=new Float32Array(p*h),v=new Float32Array(p*h),g=m;u.forEach((function(r){var i=f+(+e(r)>>o),a=d+(+t(r)>>o);i>=0&&i<p&&a>=0&&a<h&&(m[i+a*p]+=+n(r))})),c>0&&l>0?(cb(p,h,m,v,c),lb(p,h,v,m,l),cb(p,h,m,v,c),lb(p,h,v,m,l),cb(p,h,m,v,c),lb(p,h,v,m,l)):c>0?(cb(p,h,m,v,c),cb(p,h,v,m,c),cb(p,h,m,v,c),g=v):l>0&&(lb(p,h,m,v,l),lb(p,h,v,m,l),lb(p,h,m,v,l),g=v);for(var y=s?Math.pow(2,-2*o):1/Py(g),b=0,x=p*h;b<x;++b)g[b]*=y;return{values:g,scale:1<<o,width:p,height:h,x1:f,y1:d,x2:f+(i>>o),y2:d+(a>>o)}}return u.x=function(t){return arguments.length?(e=ub(t),u):e},u.y=function(e){return arguments.length?(t=ub(e),u):t},u.weight=function(e){return arguments.length?(n=ub(e),u):n},u.size=function(e){if(!arguments.length)return[i,a];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);return t>=0||t>=0||Object(Me.n)("invalid size"),i=t,a=n,u},u.cellSize=function(e){return arguments.length?((e=+e)>=1||Object(Me.n)("invalid cell size"),o=Math.floor(Math.log(e)/Math.LN2),u):1<<o},u.bandwidth=function(e){return arguments.length?(1===(e=Object(Me.i)(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&Object(Me.n)("invalid bandwidth"),r=e,u):r},u};function cb(e,t,n,r,i){for(var a=1+(i<<1),o=0;o<t;++o)for(var u=0,s=0;u<e+i;++u)u<e&&(s+=n[u+o*e]),u>=i&&(u>=a&&(s-=n[u-a+o*e]),r[u-i+o*e]=s/Math.min(u+1,e-1+a-u,a))}function lb(e,t,n,r,i){for(var a=1+(i<<1),o=0;o<e;++o)for(var u=0,s=0;u<t+i;++u)u<t&&(s+=n[o+u*e]),u>=i&&(u>=a&&(s-=n[o+(u-a)*e]),r[o+(u-i)*e]=s/Math.min(u+1,t-1+a-u,a))}function fb(e){bi.call(this,null,e)}fb.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var db=Object(Me.y)(fb,bi),pb=["x","y","weight","size","cellSize","bandwidth"];function hb(e,t){return pb.forEach((function(n){return null!=t[n]?e[n](t[n]):0})),e}function mb(e){bi.call(this,null,e)}db.transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,a,o,u,s=[],c=function(e){return e(a)};if(null==t)s.push(e);else for(n={},r=0,i=e.length;r<i;++r)a=e[r],o=t.map(c),(u=n[o])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(a);return s}(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(Me.h),o=hb(sb(),e),u=e.as||"grid";return n=i.map((function(t){return qe(function(e,t){for(var n=0;n<a.length;++n)e[a[n]]=t[n];return e}(Object(su.a)({},u,o(t,e.counts)),t.dims))})),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r},mb.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Object(Me.y)(mb,bi).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=Qy().smooth(!1!==e.smooth),o=e.values,u=e.thresholds||rb(e.count||10,e.nice,!!o),s=e.size;return o||(o=t.materialize(t.SOURCE).source,r=ab(n=hb(sb(),e)(o,!0),n.scale||1,n.scale||1,0,0),s=[n.width,n.height],o=n.values),u=Object(Me.A)(u)?u:u(o),o=a.size(s)(o,u),r&&o.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(o||[]).map(qe),i};function vb(e){bi.call(this,null,e)}vb.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(Me.y)(vb,bi).transform=function(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],u=a&&a[1],s=e.geojson||!a&&Me.x,c=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(Object(Me.g)(s))||o&&t.modified(Object(Me.g)(o))||u&&t.modified(Object(Me.g)(u)),this.value&&!n||(c=t.SOURCE,this._features=r=[],this._points=i=[]),s&&t.visit(c,(function(e){r.push(s(e))})),o&&u&&(t.visit(c,(function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:"FeatureCollection",features:r}};var gb=function(e){return e};function yb(e,t){e&&xb.hasOwnProperty(e.type)&&xb[e.type](e,t)}var bb={Feature:function(e,t){yb(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)yb(n[r].geometry,t)}},xb={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){wb(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)wb(n[r],t,0)},Polygon:function(e,t){Ob(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ob(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)yb(n[r],t)}};function wb(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ob(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)wb(e[n],t,1);t.polygonEnd()}var kb=function(e,t){e&&bb.hasOwnProperty(e.type)?bb[e.type](e,t):yb(e,t)},Eb=function(){return new Sb};function Sb(){this.reset()}Sb.prototype={constructor:Sb,reset:function(){this.s=this.t=0},add:function(e){_b(Cb,e,this.t),_b(this,Cb.s,this.s),this.s?this.t+=Cb.t:this.s=Cb.t},valueOf:function(){return this.s}};var Cb=new Sb;function _b(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}var jb=Math.PI,Ab=jb/2,Tb=jb/4,Nb=2*jb,Rb=180/jb,Db=jb/180,Ib=Math.abs,Mb=Math.atan,Fb=Math.atan2,Pb=Math.cos,zb=Math.ceil,Lb=Math.exp,Bb=(Math.floor,Math.log),Wb=Math.pow,Ub=Math.sin,Vb=Math.sign||function(e){return e>0?1:e<0?-1:0},Hb=Math.sqrt,qb=Math.tan;function Gb(e){return e>1?0:e<-1?jb:Math.acos(e)}function $b(e){return e>1?Ab:e<-1?-Ab:Math.asin(e)}function Kb(){}var Xb,Yb,Jb,Zb,Qb=Eb(),ex=Eb(),tx={point:Kb,lineStart:Kb,lineEnd:Kb,polygonStart:function(){tx.lineStart=nx,tx.lineEnd=ax},polygonEnd:function(){tx.lineStart=tx.lineEnd=tx.point=Kb,Qb.add(Ib(ex)),ex.reset()},result:function(){var e=Qb/2;return Qb.reset(),e}};function nx(){tx.point=rx}function rx(e,t){tx.point=ix,Xb=Jb=e,Yb=Zb=t}function ix(e,t){ex.add(Zb*e-Jb*t),Jb=e,Zb=t}function ax(){ix(Xb,Yb)}var ox=tx,ux=1/0,sx=ux,cx=-ux,lx=cx;var fx,dx,px,hx,mx={point:function(e,t){e<ux&&(ux=e);e>cx&&(cx=e);t<sx&&(sx=t);t>lx&&(lx=t)},lineStart:Kb,lineEnd:Kb,polygonStart:Kb,polygonEnd:Kb,result:function(){var e=[[ux,sx],[cx,lx]];return cx=lx=-(sx=ux=1/0),e}},vx=0,gx=0,yx=0,bx=0,xx=0,wx=0,Ox=0,kx=0,Ex=0,Sx={point:Cx,lineStart:_x,lineEnd:Tx,polygonStart:function(){Sx.lineStart=Nx,Sx.lineEnd=Rx},polygonEnd:function(){Sx.point=Cx,Sx.lineStart=_x,Sx.lineEnd=Tx},result:function(){var e=Ex?[Ox/Ex,kx/Ex]:wx?[bx/wx,xx/wx]:yx?[vx/yx,gx/yx]:[NaN,NaN];return vx=gx=yx=bx=xx=wx=Ox=kx=Ex=0,e}};function Cx(e,t){vx+=e,gx+=t,++yx}function _x(){Sx.point=jx}function jx(e,t){Sx.point=Ax,Cx(px=e,hx=t)}function Ax(e,t){var n=e-px,r=t-hx,i=Hb(n*n+r*r);bx+=i*(px+e)/2,xx+=i*(hx+t)/2,wx+=i,Cx(px=e,hx=t)}function Tx(){Sx.point=Cx}function Nx(){Sx.point=Dx}function Rx(){Ix(fx,dx)}function Dx(e,t){Sx.point=Ix,Cx(fx=px=e,dx=hx=t)}function Ix(e,t){var n=e-px,r=t-hx,i=Hb(n*n+r*r);bx+=i*(px+e)/2,xx+=i*(hx+t)/2,wx+=i,Ox+=(i=hx*e-px*t)*(px+e),kx+=i*(hx+t),Ex+=3*i,Cx(px=e,hx=t)}var Mx=Sx;function Fx(e){this._context=e}Fx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Nb)}},result:Kb};var Px,zx,Lx,Bx,Wx,Ux=Eb(),Vx={point:Kb,lineStart:function(){Vx.point=Hx},lineEnd:function(){Px&&qx(zx,Lx),Vx.point=Kb},polygonStart:function(){Px=!0},polygonEnd:function(){Px=null},result:function(){var e=+Ux;return Ux.reset(),e}};function Hx(e,t){Vx.point=qx,zx=Bx=e,Lx=Wx=t}function qx(e,t){Bx-=e,Wx-=t,Ux.add(Hb(Bx*Bx+Wx*Wx)),Bx=e,Wx=t}var Gx=Vx;function $x(){this._string=[]}function Kx(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}$x.prototype={_radius:4.5,_circle:Kx(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Kx(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var Xx=function(e,t){var n,r,i=4.5;function a(e){return e&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),kb(e,n(r))),r.result()}return a.area=function(e){return kb(e,n(ox)),ox.result()},a.measure=function(e){return kb(e,n(Gx)),Gx.result()},a.bounds=function(e){return kb(e,n(mx)),mx.result()},a.centroid=function(e){return kb(e,n(Mx)),Mx.result()},a.projection=function(t){return arguments.length?(n=null==t?(e=null,gb):(e=t).stream,a):e},a.context=function(e){return arguments.length?(r=null==e?(t=null,new $x):new Fx(t=e),"function"!==typeof i&&r.pointRadius(i),a):t},a.pointRadius=function(e){return arguments.length?(i="function"===typeof e?e:(r.pointRadius(+e),+e),a):i},a.projection(e).context(t)},Yx=function(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:Kb,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},Jx=function(e,t){return Ib(e[0]-t[0])<1e-6&&Ib(e[1]-t[1])<1e-6};function Zx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var Qx=function(e,t,n,r,i){var a,o,u=[],s=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(Jx(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);i.lineEnd()}else u.push(n=new Zx(r,e,null,!0)),s.push(n.o=new Zx(r,null,n,!1)),u.push(n=new Zx(o,e,null,!1)),s.push(n.o=new Zx(o,null,n,!0))}})),u.length){for(s.sort(t),ew(u),ew(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var c,l,f=u[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(a=0,o=c.length;a<o;++a)i.point((l=c[a])[0],l[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((l=c[a])[0],l[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}};function ew(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function tw(e){return[Fb(e[1],e[0]),$b(e[2])]}function nw(e){var t=e[0],n=e[1],r=Pb(n);return[r*Pb(t),r*Ub(t),Ub(n)]}function rw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function iw(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function aw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ow(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function uw(e){var t=Hb(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var sw=Eb();function cw(e){return Ib(e[0])<=jb?e[0]:Vb(e[0])*((Ib(e[0])+jb)%Nb-jb)}var lw=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var fw=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return lw(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}(lw);fw.right,fw.left;var dw=Array.prototype,pw=(dw.slice,dw.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var hw=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--o]=r[t];return n};var mw=function(e,t,n,r){return function(i){var a,o,u,s=t(i),c=Yx(),l=t(c),f=!1,d={point:p,lineStart:m,lineEnd:v,polygonStart:function(){d.point=g,d.lineStart=y,d.lineEnd=b,o=[],a=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=v,o=hw(o);var e=function(e,t){var n=cw(t),r=t[1],i=Ub(r),a=[Ub(n),-Pb(n),0],o=0,u=0;sw.reset(),1===i?r=Ab+1e-6:-1===i&&(r=-Ab-1e-6);for(var s=0,c=e.length;s<c;++s)if(f=(l=e[s]).length)for(var l,f,d=l[f-1],p=cw(d),h=d[1]/2+Tb,m=Ub(h),v=Pb(h),g=0;g<f;++g,p=b,m=w,v=O,d=y){var y=l[g],b=cw(y),x=y[1]/2+Tb,w=Ub(x),O=Pb(x),k=b-p,E=k>=0?1:-1,S=E*k,C=S>jb,_=m*w;if(sw.add(Fb(_*E*Ub(S),v*O+_*Pb(S))),o+=C?k+E*Nb:k,C^p>=n^b>=n){var j=iw(nw(d),nw(y));uw(j);var A=iw(a,j);uw(A);var T=(C^k>=0?-1:1)*$b(A[2]);(r>T||r===T&&(j[0]||j[1]))&&(u+=C^k>=0?1:-1)}}return(o<-1e-6||o<1e-6&&sw<-1e-6)^1&u}(a,r);o.length?(f||(i.polygonStart(),f=!0),Qx(o,gw,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(t,n){e(t,n)&&i.point(t,n)}function h(e,t){s.point(e,t)}function m(){d.point=h,s.lineStart()}function v(){d.point=p,s.lineEnd()}function g(e,t){u.push([e,t]),l.point(e,t)}function y(){l.lineStart(),u=[]}function b(){g(u[0][0],u[0][1]),l.lineEnd();var e,t,n,r,s=l.clean(),d=c.result(),p=d.length;if(u.pop(),a.push(u),u=null,p)if(1&s){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else p>1&&2&s&&d.push(d.pop().concat(d.shift())),o.push(d.filter(vw))}return d}};function vw(e){return e.length>1}function gw(e,t){return((e=e.x)[0]<0?e[1]-Ab-1e-6:Ab-e[1])-((t=t.x)[0]<0?t[1]-Ab-1e-6:Ab-t[1])}var yw=mw((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var u=a>0?jb:-jb,s=Ib(a-n);Ib(s-jb)<1e-6?(e.point(n,r=(r+o)/2>0?Ab:-Ab),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(a,r),t=0):i!==u&&s>=jb&&(Ib(n-i)<1e-6&&(n-=1e-6*i),Ib(a-u)<1e-6&&(a-=1e-6*u),r=function(e,t,n,r){var i,a,o=Ub(e-n);return Ib(o)>1e-6?Mb((Ub(t)*(a=Pb(r))*Ub(n)-Ub(r)*(i=Pb(t))*Ub(e))/(i*a*o)):(t+r)/2}(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=a,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Ab,r.point(-jb,i),r.point(0,i),r.point(jb,i),r.point(jb,0),r.point(jb,-i),r.point(0,-i),r.point(-jb,-i),r.point(-jb,0),r.point(-jb,i);else if(Ib(e[0]-t[0])>1e-6){var a=e[0]<t[0]?jb:-jb;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-jb,-Ab]);var bw=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function xw(e,t){return[Ib(e)>jb?e+Math.round(-e/Nb)*Nb:e,t]}function ww(e,t,n){return(e%=Nb)?t||n?bw(kw(e),Ew(t,n)):kw(e):t||n?Ew(t,n):xw}function Ow(e){return function(t,n){return[(t+=e)>jb?t-Nb:t<-jb?t+Nb:t,n]}}function kw(e){var t=Ow(e);return t.invert=Ow(-e),t}function Ew(e,t){var n=Pb(e),r=Ub(e),i=Pb(t),a=Ub(t);function o(e,t){var o=Pb(t),u=Pb(e)*o,s=Ub(e)*o,c=Ub(t),l=c*n+u*r;return[Fb(s*i-l*a,u*n-c*r),$b(l*i+s*a)]}return o.invert=function(e,t){var o=Pb(t),u=Pb(e)*o,s=Ub(e)*o,c=Ub(t),l=c*i-s*a;return[Fb(s*i+c*a,u*n+l*r),$b(l*n-u*r)]},o}xw.invert=xw;function Sw(e,t,n,r,i,a){if(n){var o=Pb(t),u=Ub(t),s=r*n;null==i?(i=t+r*Nb,a=t-s/2):(i=Cw(o,i),a=Cw(o,a),(r>0?i<a:i>a)&&(i+=r*Nb));for(var c,l=i;r>0?l>a:l<a;l-=s)c=tw([o,-u*Pb(l),-u*Ub(l)]),e.point(c[0],c[1])}}function Cw(e,t){(t=nw(t))[0]-=e,uw(t);var n=Gb(-t[1]);return((-t[2]<0?-n:n)+Nb-1e-6)%Nb}var _w=function(e){var t=Pb(e),n=6*Db,r=t>0,i=Ib(t)>1e-6;function a(e,n){return Pb(e)*Pb(n)>t}function o(e,n,r){var i=[1,0,0],a=iw(nw(e),nw(n)),o=rw(a,a),u=a[0],s=o-u*u;if(!s)return!r&&e;var c=t*o/s,l=-t*u/s,f=iw(i,a),d=ow(i,c);aw(d,ow(a,l));var p=f,h=rw(d,p),m=rw(p,p),v=h*h-m*(rw(d,d)-1);if(!(v<0)){var g=Hb(v),y=ow(p,(-h-g)/m);if(aw(y,d),y=tw(y),!r)return y;var b,x=e[0],w=n[0],O=e[1],k=n[1];w<x&&(b=x,x=w,w=b);var E=w-x,S=Ib(E-jb)<1e-6;if(!S&&k<O&&(b=O,O=k,k=b),S||E<1e-6?S?O+k>0^y[1]<(Ib(y[0]-x)<1e-6?O:k):O<=y[1]&&y[1]<=k:E>jb^(x<=y[0]&&y[0]<=w)){var C=ow(p,(-h+g)/m);return aw(C,d),[y,tw(C)]}}}function u(t,n){var i=r?e:jb-e,a=0;return t<-i?a|=1:t>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return mw(a,(function(e){var t,n,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,d){var p,h=[f,d],m=a(f,d),v=r?m?0:u(f,d):m?u(f+(f<0?jb:-jb),d):0;if(!t&&(c=s=m)&&e.lineStart(),m!==s&&(!(p=o(t,h))||Jx(t,p)||Jx(h,p))&&(h[0]+=1e-6,h[1]+=1e-6,m=a(h[0],h[1])),m!==s)l=0,m?(e.lineStart(),p=o(h,t),e.point(p[0],p[1])):(p=o(t,h),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(i&&t&&r^m){var g;v&n||!(g=o(h,t,!0))||(l=0,r?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!m||t&&Jx(t,h)||e.point(h[0],h[1]),t=h,s=m,n=v},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(c&&s)<<1}}}),(function(t,r,i,a){Sw(a,e,n,i,t,r)}),r?[0,-e]:[-jb,e-jb])};function jw(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,u,c){var l=0,f=0;if(null==i||(l=o(i,u))!==(f=o(a,u))||s(i,a)<0^u>0)do{c.point(0===l||3===l?e:n,l>1?r:t)}while((l=(l+u+4)%4)!==f);else c.point(a[0],a[1])}function o(r,i){return Ib(r[0]-e)<1e-6?i>0?0:3:Ib(r[0]-n)<1e-6?i>0?2:1:Ib(r[1]-t)<1e-6?i>0?1:0:i>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var s,c,l,f,d,p,h,m,v,g,y,b=o,x=Yx(),w={point:O,lineStart:function(){w.point=k,c&&c.push(l=[]);g=!0,v=!1,h=m=NaN},lineEnd:function(){s&&(k(f,d),p&&v&&x.rejoin(),s.push(x.result()));w.point=O,v&&b.lineEnd()},polygonStart:function(){b=x,s=[],c=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=c.length;n<i;++n)for(var a,o,u=c[n],s=1,l=u.length,f=u[0],d=f[0],p=f[1];s<l;++s)a=d,o=p,f=u[s],d=f[0],p=f[1],o<=r?p>r&&(d-a)*(r-o)>(p-o)*(e-a)&&++t:p<=r&&(d-a)*(r-o)<(p-o)*(e-a)&&--t;return t}(),n=y&&t,i=(s=hw(s)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&Qx(s,u,t,a,o),o.polygonEnd());b=o,s=c=l=null}};function O(e,t){i(e,t)&&b.point(e,t)}function k(a,o){var u=i(a,o);if(c&&l.push([a,o]),g)f=a,d=o,p=u,g=!1,u&&(b.lineStart(),b.point(a,o));else if(u&&v)b.point(a,o);else{var s=[h=Math.max(-1e9,Math.min(1e9,h)),m=Math.max(-1e9,Math.min(1e9,m))],x=[a=Math.max(-1e9,Math.min(1e9,a)),o=Math.max(-1e9,Math.min(1e9,o))];!function(e,t,n,r,i,a){var o,u=e[0],s=e[1],c=0,l=1,f=t[0]-u,d=t[1]-s;if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-s,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>c&&(c=o)}if(o=a-s,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<l&&(l=o)}return c>0&&(e[0]=u+c*f,e[1]=s+c*d),l<1&&(t[0]=u+l*f,t[1]=s+l*d),!0}}}}}(s,x,e,t,n,r)?u&&(b.lineStart(),b.point(a,o),y=!1):(v||(b.lineStart(),b.point(s[0],s[1])),b.point(x[0],x[1]),u||b.lineEnd(),y=!1)}h=a,m=o,v=u}return w}}function Aw(e){return function(t){var n=new Tw;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Tw(){}function Nw(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),kb(n,e.stream(mx)),t(mx.result()),null!=r&&e.clipExtent(r),e}function Rw(e,t,n){return Nw(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,u])}),n)}function Dw(e,t,n){return Rw(e,[[0,0],t],n)}function Iw(e,t,n){return Nw(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])}),n)}function Mw(e,t,n){return Nw(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])}),n)}Tw.prototype={constructor:Tw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Fw=Pb(30*Db),Pw=function(e,t){return+t?function(e,t){function n(r,i,a,o,u,s,c,l,f,d,p,h,m,v){var g=c-r,y=l-i,b=g*g+y*y;if(b>4*t&&m--){var x=o+d,w=u+p,O=s+h,k=Hb(x*x+w*w+O*O),E=$b(O/=k),S=Ib(Ib(O)-1)<1e-6||Ib(a-f)<1e-6?(a+f)/2:Fb(w,x),C=e(S,E),_=C[0],j=C[1],A=_-r,T=j-i,N=y*A-g*T;(N*N/b>t||Ib((g*A+y*T)/b-.5)>.3||o*d+u*p+s*h<Fw)&&(n(r,i,a,o,u,s,_,j,S,x/=k,w/=k,O,m,v),v.point(_,j),n(_,j,S,x,w,O,c,l,f,d,p,h,m,v))}}return function(t){var r,i,a,o,u,s,c,l,f,d,p,h,m={point:v,lineStart:g,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=g}};function v(n,r){n=e(n,r),t.point(n[0],n[1])}function g(){l=NaN,m.point=y,t.lineStart()}function y(r,i){var a=nw([r,i]),o=e(r,i);n(l,f,c,d,p,h,l=o[0],f=o[1],c=r,d=a[0],p=a[1],h=a[2],16,t),t.point(l,f)}function b(){m.point=v,t.lineEnd()}function x(){g(),m.point=w,m.lineEnd=O}function w(e,t){y(r=e,t),i=l,a=f,o=d,u=p,s=h,m.point=y}function O(){n(l,f,c,d,p,h,i,a,r,o,u,s,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return Aw({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var zw=Aw({point:function(e,t){this.stream.point(e*Db,t*Db)}});function Lw(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r}function Bw(e,t,n,r){var i=Pb(r),a=Ub(r),o=i*e,u=a*e,s=i/e,c=a/e,l=(a*n-i*t)/e,f=(a*t+i*n)/e;function d(e,r){return[o*e-u*r+t,n-u*e-o*r]}return d.invert=function(e,t){return[s*e-c*t+l,f-c*e-s*t]},d}function Ww(e){return Uw((function(){return e}))()}function Uw(e){var t,n,r,i,a,o,u,s,c,l,f=150,d=480,p=250,h=0,m=0,v=0,g=0,y=0,b=0,x=null,w=yw,O=null,k=gb,E=.5;function S(e){return s(e[0]*Db,e[1]*Db)}function C(e){return(e=s.invert(e[0],e[1]))&&[e[0]*Rb,e[1]*Rb]}function _(){var e=Bw(f,0,0,b).apply(null,t(h,m)),r=(b?Bw:Lw)(f,d-e[0],p-e[1],b);return n=ww(v,g,y),u=bw(t,r),s=bw(n,u),o=Pw(u,E),j()}function j(){return c=l=null,S}return S.stream=function(e){return c&&l===e?c:c=zw(function(e){return Aw({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(w(o(k(l=e)))))},S.preclip=function(e){return arguments.length?(w=e,x=void 0,j()):w},S.postclip=function(e){return arguments.length?(k=e,O=r=i=a=null,j()):k},S.clipAngle=function(e){return arguments.length?(w=+e?_w(x=e*Db):(x=null,yw),j()):x*Rb},S.clipExtent=function(e){return arguments.length?(k=null==e?(O=r=i=a=null,gb):jw(O=+e[0][0],r=+e[0][1],i=+e[1][0],a=+e[1][1]),j()):null==O?null:[[O,r],[i,a]]},S.scale=function(e){return arguments.length?(f=+e,_()):f},S.translate=function(e){return arguments.length?(d=+e[0],p=+e[1],_()):[d,p]},S.center=function(e){return arguments.length?(h=e[0]%360*Db,m=e[1]%360*Db,_()):[h*Rb,m*Rb]},S.rotate=function(e){return arguments.length?(v=e[0]%360*Db,g=e[1]%360*Db,y=e.length>2?e[2]%360*Db:0,_()):[v*Rb,g*Rb,y*Rb]},S.angle=function(e){return arguments.length?(b=e%360*Db,_()):b*Rb},S.precision=function(e){return arguments.length?(o=Pw(u,E=e*e),j()):Hb(E)},S.fitExtent=function(e,t){return Rw(S,e,t)},S.fitSize=function(e,t){return Dw(S,e,t)},S.fitWidth=function(e,t){return Iw(S,e,t)},S.fitHeight=function(e,t){return Mw(S,e,t)},function(){return t=e.apply(this,arguments),S.invert=t.invert&&C,_()}}function Vw(e){var t=0,n=jb/3,r=Uw(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Db,n=e[1]*Db):[t*Rb,n*Rb]},i}function Hw(e,t){var n=Ub(e),r=(n+Ub(t))/2;if(Ib(r)<1e-6)return function(e){var t=Pb(e);function n(e,n){return[e*t,Ub(n)/t]}return n.invert=function(e,n){return[e/t,$b(n*t)]},n}(e);var i=1+n*(2*r-n),a=Hb(i)/r;function o(e,t){var n=Hb(i-2*r*Ub(t))/r;return[n*Ub(e*=r),a-n*Pb(e)]}return o.invert=function(e,t){var n=a-t;return[Fb(e,Ib(n))/r*Vb(n),$b((i-(e*e+n*n)*r*r)/(2*r))]},o}var qw=function(){return Vw(Hw).scale(155.424).center([0,33.6442])},Gw=function(){return qw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function $w(e){return function(t,n){var r=Pb(t),i=Pb(n),a=e(r*i);return[a*i*Ub(t),a*Ub(n)]}}function Kw(e){return function(t,n){var r=Hb(t*t+n*n),i=e(r),a=Ub(i),o=Pb(i);return[Fb(t*a,r*o),$b(r&&n*a/r)]}}var Xw=$w((function(e){return Hb(2/(1+e))}));Xw.invert=Kw((function(e){return 2*$b(e/2)}));var Yw=$w((function(e){return(e=Gb(e))&&e/Ub(e)}));Yw.invert=Kw((function(e){return e}));function Jw(e,t){return[e,Bb(qb((Ab+t)/2))]}Jw.invert=function(e,t){return[e,2*Mb(Lb(t))-Ab]};function Zw(e){var t,n,r,i=Ww(e),a=i.center,o=i.scale,u=i.translate,s=i.clipExtent,c=null;function l(){var a=jb*o(),u=i(function(e){function t(t){return(t=e(t[0]*Db,t[1]*Db))[0]*=Rb,t[1]*=Rb,t}return e=ww(e[0]*Db,e[1]*Db,e.length>2?e[2]*Db:0),t.invert=function(t){return(t=e.invert(t[0]*Db,t[1]*Db))[0]*=Rb,t[1]*=Rb,t},t}(i.rotate()).invert([0,0]));return s(null==c?[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]:e===Jw?[[Math.max(u[0]-a,c),t],[Math.min(u[0]+a,n),r]]:[[c,Math.max(u[1]-a,t)],[n,Math.min(u[1]+a,r)]])}return i.scale=function(e){return arguments.length?(o(e),l()):o()},i.translate=function(e){return arguments.length?(u(e),l()):u()},i.center=function(e){return arguments.length?(a(e),l()):a()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),l()):null==c?null:[[c,t],[n,r]]},l()}function Qw(e){return qb((Ab+e)/2)}function eO(e,t){var n=Pb(e),r=e===t?Ub(e):Bb(n/Pb(t))/Bb(Qw(t)/Qw(e)),i=n*Wb(Qw(e),r)/r;if(!r)return Jw;function a(e,t){i>0?t<1e-6-Ab&&(t=1e-6-Ab):t>Ab-1e-6&&(t=Ab-1e-6);var n=i/Wb(Qw(t),r);return[n*Ub(r*e),i-n*Pb(r*e)]}return a.invert=function(e,t){var n=i-t,a=Vb(r)*Hb(e*e+n*n);return[Fb(e,Ib(n))/r*Vb(n),2*Mb(Wb(i/a,1/r))-Ab]},a}function tO(e,t){return[e,t]}tO.invert=tO;function nO(e,t){var n=Pb(e),r=e===t?Ub(e):(n-Pb(t))/(t-e),i=n/r+e;if(Ib(r)<1e-6)return tO;function a(e,t){var n=i-t,a=r*e;return[n*Ub(a),i-n*Pb(a)]}return a.invert=function(e,t){var n=i-t;return[Fb(e,Ib(n))/r*Vb(n),i-Vb(r)*Hb(e*e+n*n)]},a}var rO=1.340264,iO=-.081106,aO=893e-6,oO=.003796,uO=Hb(3)/2;function sO(e,t){var n=$b(uO*Ub(t)),r=n*n,i=r*r*r;return[e*Pb(n)/(uO*(rO+3*iO*r+i*(7*aO+9*oO*r))),n*(rO+iO*r+i*(aO+oO*r))]}sO.invert=function(e,t){for(var n,r=t,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(rO+iO*i+a*(aO+oO*i))-t)/(rO+3*iO*i+a*(7*aO+9*oO*i)))*r)*i*i,!(Ib(n)<1e-12));++o);return[uO*e*(rO+3*iO*i+a*(7*aO+9*oO*i))/Pb(r),$b(Ub(r)/uO)]};function cO(e,t){var n=Pb(t),r=Pb(e)*n;return[n*Ub(e)/r,Ub(t)/r]}cO.invert=Kw(Mb);function lO(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?gb:Aw({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function fO(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}fO.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(Ib(n)>1e-6&&--i>0);return[e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};function dO(e,t){return[Pb(t)*Ub(e),Ub(t)]}dO.invert=Kw($b);function pO(e,t){var n=Pb(t),r=1+Pb(e)*n;return[n*Ub(e)/r,Ub(t)/r]}pO.invert=Kw((function(e){return 2*Mb(e)}));function hO(e,t){return[Bb(qb((Ab+t)/2)),-e]}hO.invert=function(e,t){return[-t,2*Mb(Lb(e))-Ab]};var mO=Math.abs,vO=(Math.atan,Math.atan2,Math.ceil,Math.cos),gO=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),yO=(Math.tan,Math.PI),bO=yO/2,xO=(Math.SQRT1_2,OO(2));OO(yO);function wO(e){return e>1?bO:e<-1?-bO:Math.asin(e)}function OO(e){return e>0?Math.sqrt(e):0}function kO(e,t){var n,r=e*gO(t),i=30;do{t-=n=(t+gO(t)-r)/(1+vO(t))}while(mO(n)>1e-6&&--i>0);return t/2}var EO=function(e,t,n){function r(r,i){return[e*r*vO(i=kO(n,i)),t*gO(i)]}return r.invert=function(r,i){return i=wO(i/t),[r/(e*vO(i)),wO((2*i+gO(2*i))/n)]},r}(xO/bO,xO,yO),SO=Xx(),CO=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function _O(e,t){return function n(){var r=t();return r.type=e,r.path=Xx().projection(r),r.copy=r.copy||function(){var e=n();return CO.forEach((function(t){r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function jO(e,t){if(!e||"string"!==typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(TO[e]=_O(e,t),this):TO[e]||null}function AO(e){return e&&e.path||SO}var TO={albers:Gw,albersusa:function(){var e,t,n,r,i,a,o=Gw(),u=qw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=qw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){a=[e,t]}};function l(e){var t=e[0],o=e[1];return a=null,n.point(t,o),a||(r.point(t,o),a)||(i.point(t,o),a)}function f(){return e=t=null,l}return l.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(e)},l.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([o.stream(t=n),u.stream(n),s.stream(n)])},l.precision=function(e){return arguments.length?(o.precision(e),u.precision(e),s.precision(e),f()):o.precision()},l.scale=function(e){return arguments.length?(o.scale(e),u.scale(.35*e),s.scale(e),l.translate(o.translate())):o.scale()},l.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),a=+e[0],l=+e[1];return n=o.translate(e).clipExtent([[a-.455*t,l-.238*t],[a+.455*t,l+.238*t]]).stream(c),r=u.translate([a-.307*t,l+.201*t]).clipExtent([[a-.425*t+1e-6,l+.12*t+1e-6],[a-.214*t-1e-6,l+.234*t-1e-6]]).stream(c),i=s.translate([a-.205*t,l+.212*t]).clipExtent([[a-.214*t+1e-6,l+.166*t+1e-6],[a-.115*t-1e-6,l+.234*t-1e-6]]).stream(c),f()},l.fitExtent=function(e,t){return Rw(l,e,t)},l.fitSize=function(e,t){return Dw(l,e,t)},l.fitWidth=function(e,t){return Iw(l,e,t)},l.fitHeight=function(e,t){return Mw(l,e,t)},l.scale(1070)},azimuthalequalarea:function(){return Ww(Xw).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return Ww(Yw).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return Vw(eO).scale(109.5).parallels([30,30])},conicequalarea:qw,conicequidistant:function(){return Vw(nO).scale(131.154).center([0,13.9389])},equalEarth:function(){return Ww(sO).scale(177.158)},equirectangular:function(){return Ww(tO).scale(152.63)},gnomonic:function(){return Ww(cO).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,a,o=1,u=0,s=0,c=1,l=1,f=gb,d=null,p=gb;function h(){return r=i=null,a}return a={stream:function(e){return r&&i===e?r:r=f(p(i=e))},postclip:function(r){return arguments.length?(p=r,d=e=t=n=null,h()):p},clipExtent:function(r){return arguments.length?(p=null==r?(d=e=t=n=null,gb):jw(d=+r[0][0],e=+r[0][1],t=+r[1][0],n=+r[1][1]),h()):null==d?null:[[d,e],[t,n]]},scale:function(e){return arguments.length?(f=lO((o=+e)*c,o*l,u,s),h()):o},translate:function(e){return arguments.length?(f=lO(o*c,o*l,u=+e[0],s=+e[1]),h()):[u,s]},reflectX:function(e){return arguments.length?(f=lO(o*(c=e?-1:1),o*l,u,s),h()):c<0},reflectY:function(e){return arguments.length?(f=lO(o*c,o*(l=e?-1:1),u,s),h()):l<0},fitExtent:function(e,t){return Rw(a,e,t)},fitSize:function(e,t){return Dw(a,e,t)},fitWidth:function(e,t){return Iw(a,e,t)},fitHeight:function(e,t){return Mw(a,e,t)}}},mercator:function(){return Zw(Jw).scale(961/Nb)},mollweide:function(){return Ww(EO).scale(169.529)},naturalEarth1:function(){return Ww(fO).scale(175.295)},orthographic:function(){return Ww(dO).scale(249.5).clipAngle(90.000001)},stereographic:function(){return Ww(pO).scale(250).clipAngle(142)},transversemercator:function(){var e=Zw(hO),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var NO in TO)jO(NO,TO[NO]);function RO(e){bi.call(this,null,e)}function DO(e){bi.call(this,null,e)}function IO(e){bi.call(this,null,e)}function MO(e,t,n){var r=pw(e,t-1e-6,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function FO(e,t,n){var r=pw(e,t-1e-6,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function PO(){var e,t,n,r,i,a,o,u,s,c,l,f,d=10,p=d,h=90,m=360,v=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return pw(zb(r/h)*h,n,h).map(l).concat(pw(zb(u/m)*m,o,m).map(f)).concat(pw(zb(t/d)*d,e,d).filter((function(e){return Ib(e%h)>1e-6})).map(s)).concat(pw(zb(a/p)*p,i,p).filter((function(e){return Ib(e%m)>1e-6})).map(c))}return g.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(n).reverse().slice(1),f(u).reverse().slice(1))]}},g.extent=function(e){return arguments.length?g.extentMajor(e).extentMinor(e):g.extentMinor()},g.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),g.precision(v)):[[r,u],[n,o]]},g.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],a=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),a>i&&(n=a,a=i,i=n),g.precision(v)):[[t,a],[e,i]]},g.step=function(e){return arguments.length?g.stepMajor(e).stepMinor(e):g.stepMinor()},g.stepMajor=function(e){return arguments.length?(h=+e[0],m=+e[1],g):[h,m]},g.stepMinor=function(e){return arguments.length?(d=+e[0],p=+e[1],g):[d,p]},g.precision=function(d){return arguments.length?(v=+d,s=MO(a,i,90),c=FO(t,e,v),l=MO(u,o,90),f=FO(r,n,v),g):v},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function zO(e){bi.call(this,[],e),this.generator=PO()}function LO(e){bi.call(this,null,e)}function BO(e){if(!Object(Me.D)(e))return!1;var t=Object(Me.db)(Object(Me.g)(e));return t.$x||t.$y||t.$value||t.$max}function WO(e){bi.call(this,null,e),this.modified(!0)}function UO(e,t,n){Object(Me.D)(e[t])&&e[t](n)}RO.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(Me.y)(RO,bi).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Me.x,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=AO(e.projection),n.materialize().reflow()):o=i===Me.x||t.modified(i.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(o,(function(e){e[a]=r(i(e))})),r.pointRadius(u),n.modifies(a)},DO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(Me.y)(DO,bi).transform=function(e,t){var n,r=e.projection,i=e.fields[0],a=e.fields[1],o=e.as||["x","y"],u=o[0],s=o[1];function c(e){var t=r([i(e),a(e)]);t?(e[u]=t[0],e[s]=t[1]):(e[u]=void 0,e[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(n=t.modified(i.fields)||t.modified(a.fields),t.visit(n?t.ADD_MOD:t.ADD,c)),t.modifies(o)},IO.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(Me.y)(IO,bi).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",a=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}(AO(e.projection),e.field||Object(Me.t)("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,(function(e){e[i]=r})),n.modifies(i)},zO.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(Me.y)(zO,bi).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)Object(Me.D)(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(Ke(r[0],n)):t.add.push(qe(n)),r[0]=n,t},LO.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Object(Me.y)(LO,bi).transform=function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||Me.x,a=function(e,t){var n;Object(Me.D)(e)?(n=function(n){return e(n,t)}).dep=BO(e):e?n=Object(Me.l)(e):(n=function(e){return e.$value/e.$max||0}).dep=!0;return n}(e.opacity,e),o=function(e,t){var n;Object(Me.D)(e)?(n=function(n){return Im(e(n,t))}).dep=BO(e):n=Object(Me.l)(Im(e||"#888"));return n}(e.color,e),u=e.as||"image",s={$x:0,$y:0,$value:0,$max:r?Fi(n.map((function(e){return Fi(i(e).values)}))):0};return n.forEach((function(e){var t=i(e),n=Object(Me.o)({},e,s);r||(n.$max=Fi(t.values||[])),e[u]=function(e,t,n,r){for(var i=e.width,a=e.height,o=e.x1||0,u=e.y1||0,s=e.x2||i,c=e.y2||a,l=e.values,f=l?function(e){return l[e]}:Me.kb,d=$s(s-o,c-u),p=d.getContext("2d"),h=p.getImageData(0,0,s-o,c-u),m=h.data,v=u,g=0;v<c;++v){t.$y=v-u;for(var y=o,b=v*i;y<s;++y,g+=4){t.$x=y-o,t.$value=f(y+b);var x=n(t);m[g+0]=x.r,m[g+1]=x.g,m[g+2]=x.b,m[g+3]=~~(255*r(t))}}return p.putImageData(h,0,0),d}(t,n,o.dep?o:Object(Me.l)(o(n)),a.dep?a:Object(Me.l)(a(n)))})),t.reflow(!0).modifies(u)},Object(Me.y)(WO,bi).transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function(e){var t=jO((e||"mercator").toLowerCase());t||Object(Me.n)("Unrecognized projection type: "+e);return t()}(e.type),CO.forEach((function(t){null!=e[t]&&UO(n,t,e[t])}))):CO.forEach((function(t){e.modified(t)&&UO(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){var n=function(e){return 1===(e=Object(Me.i)(e)).length?e[0]:{type:"FeatureCollection",features:e.reduce((function(e,t){return e.concat(function(e){return"FeatureCollection"===e.type?e.features:Object(Me.i)(e).filter((function(e){return null!=e})).map((function(e){return"Feature"===e.type?e:{type:"Feature",geometry:e}}))}(t))}),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};function VO(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,u,s,c,l,f,d,p=e._root,h={data:r},m=e._x0,v=e._y0,g=e._x1,y=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((c=t>=(a=(m+g)/2))?m=a:g=a,(l=n>=(o=(v+y)/2))?v=o:y=o,i=p,!(p=p[f=l<<1|c]))return i[f]=h,e;if(u=+e._x.call(null,p.data),s=+e._y.call(null,p.data),t===u&&n===s)return h.next=p,i?i[f]=h:e._root=h,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(c=t>=(a=(m+g)/2))?m=a:g=a,(l=n>=(o=(v+y)/2))?v=o:y=o}while((f=l<<1|c)===(d=(s>=o)<<1|u>=a));return i[d]=p,i[f]=h,e}var HO=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function qO(e){return e[0]}function GO(e){return e[1]}function $O(e,t,n){var r=new KO(null==t?qO:t,null==n?GO:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function KO(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function XO(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var YO=$O.prototype=KO.prototype;YO.copy=function(){var e,t,n=new KO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=XO(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=XO(t));return n},YO.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return VO(this.cover(t,n),t,n,e)},YO.addAll=function(e){var t,n,r,i,a=e.length,o=new Array(a),u=new Array(a),s=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,u[n]=i,r<s&&(s=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(s>l||c>f)return this;for(this.cover(s,c).cover(l,f),n=0;n<a;++n)VO(this,o[n],u[n],e[n]);return this},YO.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,u,s=i-n,c=this._root;n>e||e>=i||r>t||t>=a;)switch(u=(t<r)<<1|e<n,(o=new Array(4))[u]=c,c=o,s*=2,u){case 0:i=n+s,a=r+s;break;case 1:n=i-s,a=r+s;break;case 2:i=n+s,r=a-s;break;case 3:n=i-s,r=a-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},YO.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},YO.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},YO.find=function(e,t,n){var r,i,a,o,u,s,c,l=this._x0,f=this._y0,d=this._x1,p=this._y1,h=[],m=this._root;for(m&&h.push(new HO(m,l,f,d,p)),null==n?n=1/0:(l=e-n,f=t-n,d=e+n,p=t+n,n*=n);s=h.pop();)if(!(!(m=s.node)||(i=s.x0)>d||(a=s.y0)>p||(o=s.x1)<l||(u=s.y1)<f))if(m.length){var v=(i+o)/2,g=(a+u)/2;h.push(new HO(m[3],v,g,o,u),new HO(m[2],i,g,v,u),new HO(m[1],v,a,o,g),new HO(m[0],i,a,v,g)),(c=(t>=g)<<1|e>=v)&&(s=h[h.length-1],h[h.length-1]=h[h.length-1-c],h[h.length-1-c]=s)}else{var y=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);l=e-w,f=t-w,d=e+w,p=t+w,r=m.data}}return r},YO.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,u,s,c,l,f,d,p=this._root,h=this._x0,m=this._y0,v=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((c=a>=(u=(h+v)/2))?h=u:v=u,(l=o>=(s=(m+g)/2))?m=s:g=s,t=p,!(p=p[f=l<<1|c]))return this;if(!p.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=i,this)},YO.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},YO.root=function(){return this._root},YO.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},YO.visit=function(e){var t,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new HO(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&s.length){var c=(r+a)/2,l=(i+o)/2;(n=s[3])&&u.push(new HO(n,c,l,a,o)),(n=s[2])&&u.push(new HO(n,r,l,c,o)),(n=s[1])&&u.push(new HO(n,c,i,a,l)),(n=s[0])&&u.push(new HO(n,r,i,c,l))}return this},YO.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new HO(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,u=t.y0,s=t.x1,c=t.y1,l=(o+s)/2,f=(u+c)/2;(a=i[0])&&n.push(new HO(a,o,u,l,f)),(a=i[1])&&n.push(new HO(a,l,u,s,f)),(a=i[2])&&n.push(new HO(a,o,f,l,c)),(a=i[3])&&n.push(new HO(a,l,f,s,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},YO.x=function(e){return arguments.length?(this._x=e,this):this._x},YO.y=function(e){return arguments.length?(this._y=e,this):this._y};var JO=function(e){return function(){return e}},ZO=function(){return 1e-6*(Math.random()-.5)};function QO(e){return e.x+e.vx}function ek(e){return e.y+e.vy}function tk(e){return e.index}function nk(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}var rk={value:function(){}};function ik(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new ak(r)}function ak(e){this._=e}function ok(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function uk(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function sk(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=rk,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}ak.prototype=ik.prototype={constructor:ak,on:function(e,t){var n,r=this._,i=ok(e+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=sk(r[n],e.name,t);else if(null==t)for(n in r)r[n]=sk(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=uk(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ak(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var ck,lk,fk=ik,dk=0,pk=0,hk=0,mk=0,vk=0,gk=0,yk="object"===typeof performance&&performance.now?performance:Date,bk="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xk(){return vk||(bk(wk),vk=yk.now()+gk)}function wk(){vk=0}function Ok(){this._call=this._time=this._next=null}function kk(e,t,n){var r=new Ok;return r.restart(e,t,n),r}function Ek(){vk=(mk=yk.now())+gk,dk=pk=0;try{!function(){xk(),++dk;for(var e,t=ck;t;)(e=vk-t._time)>=0&&t._call.call(null,e),t=t._next;--dk}()}finally{dk=0,function(){var e,t,n=ck,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ck=t);lk=e,Ck(r)}(),vk=0}}function Sk(){var e=yk.now(),t=e-mk;t>1e3&&(gk-=t,mk=e)}function Ck(e){dk||(pk&&(pk=clearTimeout(pk)),e-vk>24?(e<1/0&&(pk=setTimeout(Ek,e-yk.now()-gk)),hk&&(hk=clearInterval(hk))):(hk||(mk=yk.now(),hk=setInterval(Sk,1e3)),dk=1,bk(Ek)))}function _k(e){return e.x}function jk(e){return e.y}Ok.prototype=kk.prototype={constructor:Ok,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?xk():+n)+(null==t?0:+t),this._next||lk===this||(lk?lk._next=this:ck=this,lk=this),this._call=e,this._time=n,Ck()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ck())}};var Ak=Math.PI*(3-Math.sqrt(5)),Tk={center:function(e,t){var n;function r(){var r,i,a=n.length,o=0,u=0;for(r=0;r<a;++r)o+=(i=n[r]).x,u+=i.y;for(o=o/a-e,u=u/a-t,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=u}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r},collide:function(e){var t,n,r=1,i=1;function a(){for(var e,a,u,s,c,l,f,d=t.length,p=0;p<i;++p)for(a=$O(t,QO,ek).visitAfter(o),e=0;e<d;++e)u=t[e],l=n[u.index],f=l*l,s=u.x+u.vx,c=u.y+u.vy,a.visit(h);function h(e,t,n,i,a){var o=e.data,d=e.r,p=l+d;if(!o)return t>s+p||i<s-p||n>c+p||a<c-p;if(o.index>u.index){var h=s-o.x-o.vx,m=c-o.y-o.vy,v=h*h+m*m;v<p*p&&(0===h&&(v+=(h=ZO())*h),0===m&&(v+=(m=ZO())*m),v=(p-(v=Math.sqrt(v)))/v*r,u.vx+=(h*=v)*(p=(d*=d)/(f+d)),u.vy+=(m*=v)*p,o.vx-=h*(p=1-p),o.vy-=m*p)}}}function o(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,i,a=t.length;for(n=new Array(a),r=0;r<a;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!==typeof e&&(e=JO(null==e?1:+e)),a.initialize=function(e){t=e,u()},a.iterations=function(e){return arguments.length?(i=+e,a):i},a.strength=function(e){return arguments.length?(r=+e,a):r},a.radius=function(t){return arguments.length?(e="function"===typeof t?t:JO(+t),u(),a):e},a},nbody:function(){var e,t,n,r,i=JO(-30),a=1,o=1/0,u=.81;function s(r){var i,a=e.length,o=$O(e,_k,jk).visitAfter(l);for(n=r,i=0;i<a;++i)t=e[i],o.visit(f)}function c(){if(e){var t,n,a=e.length;for(r=new Array(a),t=0;t<a;++t)n=e[t],r[n.index]=+i(n,t,e)}}function l(e){var t,n,i,a,o,u=0,s=0;if(e.length){for(i=a=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(u+=t.value,s+=n,i+=n*t.x,a+=n*t.y);e.x=i/s,e.y=a/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{u+=r[t.data.index]}while(t=t.next)}e.value=u}function f(e,i,s,c){if(!e.value)return!0;var l=e.x-t.x,f=e.y-t.y,d=c-i,p=l*l+f*f;if(d*d/u<p)return p<o&&(0===l&&(p+=(l=ZO())*l),0===f&&(p+=(f=ZO())*f),p<a&&(p=Math.sqrt(a*p)),t.vx+=l*e.value*n/p,t.vy+=f*e.value*n/p),!0;if(!(e.length||p>=o)){(e.data!==t||e.next)&&(0===l&&(p+=(l=ZO())*l),0===f&&(p+=(f=ZO())*f),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(d=r[e.data.index]*n/p,t.vx+=l*d,t.vy+=f*d)}while(e=e.next)}}return s.initialize=function(t){e=t,c()},s.strength=function(e){return arguments.length?(i="function"===typeof e?e:JO(+e),c(),s):i},s.distanceMin=function(e){return arguments.length?(a=e*e,s):Math.sqrt(a)},s.distanceMax=function(e){return arguments.length?(o=e*e,s):Math.sqrt(o)},s.theta=function(e){return arguments.length?(u=e*e,s):Math.sqrt(u)},s},link:function(e){var t,n,r,i,a,o=tk,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},s=JO(30),c=1;function l(r){for(var i=0,o=e.length;i<c;++i)for(var u,s,l,f,d,p,h,m=0;m<o;++m)s=(u=e[m]).source,f=(l=u.target).x+l.vx-s.x-s.vx||ZO(),d=l.y+l.vy-s.y-s.vy||ZO(),f*=p=((p=Math.sqrt(f*f+d*d))-n[m])/p*r*t[m],d*=p,l.vx-=f*(h=a[m]),l.vy-=d*h,s.vx+=f*(h=1-h),s.vy+=d*h}function f(){if(r){var u,s,c=r.length,l=e.length,f=new Map(r.map((function(e,t){return[o(e,t,r),e]})));for(u=0,i=new Array(c);u<l;++u)(s=e[u]).index=u,"object"!==typeof s.source&&(s.source=nk(f,s.source)),"object"!==typeof s.target&&(s.target=nk(f,s.target)),i[s.source.index]=(i[s.source.index]||0)+1,i[s.target.index]=(i[s.target.index]||0)+1;for(u=0,a=new Array(l);u<l;++u)s=e[u],a[u]=i[s.source.index]/(i[s.source.index]+i[s.target.index]);t=new Array(l),d(),n=new Array(l),p()}}function d(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+s(e[t],t,e)}return null==e&&(e=[]),l.initialize=function(e){r=e,f()},l.links=function(t){return arguments.length?(e=t,f(),l):e},l.id=function(e){return arguments.length?(o=e,l):o},l.iterations=function(e){return arguments.length?(c=+e,l):c},l.strength=function(e){return arguments.length?(u="function"===typeof e?e:JO(+e),d(),l):u},l.distance=function(e){return arguments.length?(s="function"===typeof e?e:JO(+e),p(),l):s},l},x:function(e){var t,n,r,i=JO(.1);function a(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vx+=(r[a]-i.x)*n[a]*e}function o(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!==typeof e&&(e=JO(null==e?0:+e)),a.initialize=function(e){t=e,o()},a.strength=function(e){return arguments.length?(i="function"===typeof e?e:JO(+e),o(),a):i},a.x=function(t){return arguments.length?(e="function"===typeof t?t:JO(+t),o(),a):e},a},y:function(e){var t,n,r,i=JO(.1);function a(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vy+=(r[a]-i.y)*n[a]*e}function o(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!==typeof e&&(e=JO(null==e?0:+e)),a.initialize=function(e){t=e,o()},a.strength=function(e){return arguments.length?(i="function"===typeof e?e:JO(+e),o(),a):i},a.y=function(t){return arguments.length?(e="function"===typeof t?t:JO(+t),o(),a):e},a}},Nk=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Rk=["static","iterations"],Dk=["x","y","vx","vy"];function Ik(e){bi.call(this,null,e)}Ik.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Dk}]};var Mk=Object(Me.y)(Ik,bi);function Fk(e,t,n,r){var i,a,o,u,s=Object(Me.i)(t.forces);for(i=0,a=Nk.length;i<a;++i)"forces"!==(o=Nk[i])&&t.modified(o)&&e[o](t[o]);for(i=0,a=s.length;i<a;++i)u="forces"+i,(o=n||t.modified("forces",i)?zk(s[i]):r&&Pk(s[i],r)?e.force(u):null)&&e.force(u,o);for(a=e.numForces||0;i<a;++i)e.force("forces"+i,null);return e.numForces=s.length,e}function Pk(e,t){var n,r;for(n in e)if(Object(Me.D)(r=e[n])&&t.modified(Object(Me.g)(r)))return 1;return 0}function zk(e){var t,n;for(n in Object(Me.v)(Tk,e.force)||Object(Me.n)("Unrecognized force: "+e.force),t=Tk[e.force](),e)Object(Me.D)(t[n])&&Lk(t[n],e[n],e);return t}function Lk(e,t,n){e(Object(Me.D)(t)?function(e){return t(e,n)}:t)}Mk.transform=function(e,t){var n,r,i=this.value,a=t.changed(t.ADD_REM),o=e.modified(Nk),u=e.iterations||300;if(i?(a&&(t.modifies("index"),i.nodes(t.source)),(o||t.changed(t.MOD))&&Fk(i,e,0,t)):(this.value=i=function(e,t){var n=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,u=new Map,s=kk(l),c=fk("tick","end");function l(){f(),c.call("tick",t),n<r&&(s.stop(),c.call("end",t))}function f(r){var s,c,l=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,u.forEach((function(e){e(n)})),s=0;s<l;++s)null==(c=e[s]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return t}function d(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(n),a=n*Ak;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),d(),t={tick:f,restart:function(){return s.restart(l),t},stop:function(){return s.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),u.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(a=+e,t):a},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},force:function(e,n){return arguments.length>1?(null==n?u.delete(e):u.set(e,p(n)),t):u.get(e)},find:function(t,n,r){var i,a,o,u,s,c=0,l=e.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(i=t-(u=e[c]).x)*i+(a=n-u.y)*a)<r&&(s=u,r=o);return s},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}(e),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},Fk(n,t,!0).on("end",(function(){r=!0}))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,function(){n.touch(r).run()})),e.static||(a=!0,i.tick()),t.modifies("index")),o||a||e.modified(Rk)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/u)),e.static)for(i.stop();--u>=0;)i.tick();else if(i.stopped()&&i.restart(),!a)return t.StopPropagation;return this.finish(e,t)},Mk.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if("forces"===(n=i[a]).name&&"link"===n.op._argval.force)for(var u,s=n.op._argops,c=0,l=s.length;c<l;++c)if("links"===s[c].name&&(u=s[c].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(Dk)};var Bk=function(e,t,n){var r={};return e.each((function(e){var i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e};function Wk(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Uk(e,t){var n,r,i,a,o,u=new Gk(e),s=+e.value&&(u.value=e.value),c=[u];for(null==t&&(t=Vk);n=c.pop();)if(s&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)c.push(r=n.children[a]=new Gk(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(qk)}function Vk(e){return e.children}function Hk(e){e.data=e.data.data}function qk(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Gk(e){this.data=e,this.depth=this.height=0,this.parent=null}function $k(e){bi.call(this,null,e)}function Kk(e){return e.values}function Xk(){var e,t=[];return e={entries:function(e){return function e(n,r){if(++r>t.length)return n;var i,a=[];for(i in n)a.push({key:i,values:e(n[i],r)});return a}(function e(n,r){if(r>=t.length)return n;for(var i,a,o,u=-1,s=n.length,c=t[r++],l={},f={};++u<s;)(o=l[i=c(a=n[u])+""])?o.push(a):l[i]=[a];for(i in l)f[i]=e(l[i],r);return f}(e,0),0)},key:function(n){return t.push(n),e}}}function Yk(e){bi.call(this,null,e)}function Jk(e,t){return e.parent===t.parent?1:2}Gk.prototype=Uk.prototype={constructor:Gk,count:function(){return this.eachAfter(Wk)},each:function(e){var t,n,r,i,a=this,o=[a];do{for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Uk(this).eachBefore(Hk)}},$k.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(Me.y)($k,bi).transform=function(e,t){t.source||Object(Me.n)("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each((function(e){e.children&&Ue(e.data)&&i.rem.push(e.data)})),this.value=a=Uk({values:Object(Me.i)(e.keys).reduce((function(e,t){return e.key(t),e}),Xk()).entries(i.source)},Kk),n&&a.each((function(e){e.children&&(e=qe(e.data),i.add.push(e),i.source.push(e))})),Bk(a,Ve,Ve)),i.source.root=a,i},Object(Me.y)(Yk,bi).transform=function(e,t){t.source&&t.source.root||Object(Me.n)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Xe(e.sort,(function(e){return e.data}))),function(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?Jk:Me.O);try{this.value=n(i)}catch(o){Object(Me.n)(o)}return i.each((function(e){!function(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,a)})),t.reflow(e.modified()).modifies(a).modifies("leaf")};var Zk=Array.prototype.slice;var Qk=function(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Zk.call(e))).length,a=[];r<i;)t=e[r],n&&nE(n,t)?++r:(n=iE(a=eE(a,t)),r=0);return n};function eE(e,t){var n,r;if(rE(t,e))return[t];for(n=0;n<e.length;++n)if(tE(t,e[n])&&rE(aE(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(tE(aE(e[n],e[r]),t)&&tE(aE(e[n],t),e[r])&&tE(aE(e[r],t),e[n])&&rE(oE(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function tE(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function nE(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rE(e,t){for(var n=0;n<t.length;++n)if(!nE(e,t[n]))return!1;return!0}function iE(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return aE(e[0],e[1]);case 3:return oE(e[0],e[1],e[2])}var t}function aE(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,u=t.r,s=a-n,c=o-r,l=u-i,f=Math.sqrt(s*s+c*c);return{x:(n+a+s/f*l)/2,y:(r+o+c/f*l)/2,r:(f+i+u)/2}}function oE(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,u=t.y,s=t.r,c=n.x,l=n.y,f=n.r,d=r-o,p=r-c,h=i-u,m=i-l,v=s-a,g=f-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,x=y-c*c-l*l+f*f,w=p*h-d*m,O=(h*x-m*b)/(2*w)-r,k=(m*v-h*g)/w,E=(p*b-d*x)/(2*w)-i,S=(d*g-p*v)/w,C=k*k+S*S-1,_=2*(a+O*k+E*S),j=O*O+E*E-a*a,A=-(C?(_+Math.sqrt(_*_-4*C*j))/(2*C):j/_);return{x:r+O+k*A,y:i+E+S*A,r:A}}function uE(e,t,n){var r,i,a,o,u=e.x-t.x,s=e.y-t.y,c=u*u+s*s;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*u-a*s,n.y=e.y-r*s+a*u):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*u-a*s,n.y=t.y+r*s+a*u)):(n.x=t.x+n.r,n.y=t.y)}function sE(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cE(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function lE(e){this._=e,this.next=null,this.previous=null}function fE(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,u,s,c,l,f;if((t=e[0]).x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;uE(n,t,r=e[2]),t=new lE(t),n=new lE(n),r=new lE(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(u=3;u<i;++u){uE(t._,n._,r=e[u]),r=new lE(r),s=n.next,c=t.previous,l=n._.r,f=t._.r;do{if(l<=f){if(sE(s._,r._)){n=s,t.next=n,n.previous=t,--u;continue e}l+=s._.r,s=s.next}else{if(sE(c._,r._)){(t=c).next=n,n.previous=t,--u;continue e}f+=c._.r,c=c.previous}}while(s!==c.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=cE(t);(r=r.next)!==n;)(o=cE(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Qk(t),u=0;u<i;++u)(t=e[u]).x-=r.x,t.y-=r.y;return r.r}function dE(e){return null==e?null:pE(e)}function pE(e){if("function"!==typeof e)throw new Error;return e}function hE(){return 0}var mE=function(e){return function(){return e}};function vE(e){return Math.sqrt(e.value)}function gE(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function yE(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,u=e(n)*t||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=fE(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function bE(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var xE=["x","y","r","depth","children"];function wE(e){Yk.call(this,e)}wE.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xE.length,default:xE}]};var OE=Object(Me.y)(wE,Yk);OE.layout=function(){var e=null,t=1,n=1,r=hE;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(gE(e)).eachAfter(yE(r,.5)).eachBefore(bE(1)):i.eachBefore(gE(vE)).eachAfter(yE(hE,1)).eachAfter(yE(r,i.r/Math.min(t,n))).eachBefore(bE(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=dE(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"===typeof e?e:mE(+e),i):r},i},OE.params=["radius","size","padding"],OE.fields=xE;var kE=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},EE=function(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,c=e.value&&(r-t)/e.value;++u<s;)(a=o[u]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c},SE=["x0","y0","x1","y1","depth","children"];function CE(e){Yk.call(this,e)}CE.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:SE.length,default:SE}]};var _E=Object(Me.y)(CE,Yk);_E.layout=function(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&EE(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,u=r.y1-n;o<i&&(i=o=(i+o)/2),u<a&&(a=u=(a+u)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=u}}(t,a)),r&&i.eachBefore(kE),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},_E.params=["size","round","padding"],_E.fields=SE;var jE={depth:-1},AE={};function TE(e){return e.id}function NE(e){return e.parentId}var RE=function(){var e=TE,t=NE;function n(n){var r,i,a,o,u,s,c,l=n.length,f=new Array(l),d={};for(i=0;i<l;++i)r=n[i],u=f[i]=new Gk(r),null!=(s=e(r,i,n))&&(s+="")&&(d[c="$"+(u.id=s)]=c in d?AE:u);for(i=0;i<l;++i)if(u=f[i],null!=(s=t(n[i],i,n))&&(s+="")){if(!(o=d["$"+s]))throw new Error("missing: "+s);if(o===AE)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=jE,a.eachBefore((function(e){e.depth=e.parent.depth+1,--l})).eachBefore(qk),a.parent=null,l>0)throw new Error("cycle");return a}return n.id=function(t){return arguments.length?(e=pE(t),n):e},n.parentId=function(e){return arguments.length?(t=pE(e),n):t},n};function DE(e){bi.call(this,null,e)}function IE(e,t){return e.parent===t.parent?1:2}function ME(e){var t=e.children;return t?t[0]:e.t}function FE(e){var t=e.children;return t?t[t.length-1]:e.t}function PE(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function zE(e,t,n){return e.a.parent===t.parent?e.a:n}function LE(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}DE.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(Me.y)(DE,bi).transform=function(e,t){t.source||Object(Me.n)("Stratify transform requires an upstream data source.");var n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),a=!this.value||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?Bk(RE().id(e.key).parentId(e.parentKey)(i.source),e.key,Me.gb):Bk(RE()([{}]),e.key,e.key)),i.source.root=this.value=n,i},LE.prototype=Object.create(Gk.prototype);function BE(e,t){return e.parent===t.parent?1:2}function WE(e,t){return e+t.x}function UE(e,t){return Math.max(e,t.y)}var VE={tidy:function(){var e=IE,t=1,n=1,r=null;function i(i){var s=function(e){for(var t,n,r,i,a,o=new LE(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=t.children[i]=new LE(r[i],i)),n.parent=t;return(o.parent=new LE(null,0)).children=[o],o}(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(u);else{var c=i,l=i,f=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>l.x&&(l=e),e.depth>f.depth&&(f=e)}));var d=c===l?1:e(c,l)/2,p=d-c.x,h=t/(l.x+d+p),m=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+p)*h,e.y=e.depth*m}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,u=n,s=a.parent.children[0],c=a.m,l=o.m,f=u.m,d=s.m;u=FE(u),a=ME(a),u&&a;)s=ME(s),(o=FE(o)).a=t,(i=u.z+f-a.z-c+e(u._,a._))>0&&(PE(zE(u,t,r),t,i),c+=i,l+=i),f+=u.m,c+=a.m,d+=s.m,l+=o.m;u&&!FE(o)&&(o.t=u,o.m+=f-l),a&&!ME(s)&&(s.t=a,s.m+=c-d,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=BE,t=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(WE,0)/e.length}(n),t.y=function(e){return 1+e.reduce(UE,0)}(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)}));var u=function(e){for(var t;t=e.children;)e=t[0];return e}(i),s=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),c=u.x-e(u,s)/2,l=s.x+e(s,u)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-c)/(l-c)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},HE=["x","y","depth","children"];function qE(e){Yk.call(this,e)}qE.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:HE.length,default:HE}]};var GE=Object(Me.y)(qE,Yk);function $E(e){bi.call(this,[],e)}GE.layout=function(e){var t=e||"tidy";if(Object(Me.v)(VE,t))return VE[t]();Object(Me.n)("Unrecognized Tree layout method: "+t)},GE.params=["size","nodeSize"],GE.fields=HE,$E.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(Me.y)($E,bi).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||Object(Me.n)("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(function(e){a[Ve(e)]=1})),r.each((function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[Ve(t)]&&a[Ve(n)]&&i.add.push(qe({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(function(e){a[Ve(e)]=1})),n.forEach((function(e){(a[Ve(e.source)]||a[Ve(e.target)])&&i.mod.push(e)}))),i};var KE=function(e,t,n,r,i){for(var a,o=e.children,u=-1,s=o.length,c=e.value&&(i-n)/e.value;++u<s;)(a=o[u]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c},XE=(1+Math.sqrt(5))/2;function YE(e,t,n,r,i,a){for(var o,u,s,c,l,f,d,p,h,m,v,g=[],y=t.children,b=0,x=0,w=y.length,O=t.value;b<w;){s=i-n,c=a-r;do{l=y[x++].value}while(!l&&x<w);for(f=d=l,v=l*l*(m=Math.max(c/s,s/c)/(O*e)),h=Math.max(d/v,v/f);x<w;++x){if(l+=u=y[x].value,u<f&&(f=u),u>d&&(d=u),v=l*l*m,(p=Math.max(d/v,v/f))>h){l-=u;break}h=p}g.push(o={value:l,dice:s<c,children:y.slice(b,x)}),o.dice?EE(o,n,r,i,O?r+=c*l/O:a):KE(o,n,r,O?n+=s*l/O:i,a),O-=l,b=x}return g}var JE=function e(t){function n(e,n,r,i,a){YE(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(XE),ZE=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,c,l,f=-1,d=o.length,p=e.value;++f<d;){for(s=(u=o[f]).children,c=u.value=0,l=s.length;c<l;++c)u.value+=s[c].value;u.dice?EE(u,n,r,i,r+=(a-r)*u.value/p):KE(u,n,r,n+=(i-n)*u.value/p,a),p-=u.value}else e._squarify=o=YE(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(XE),QE={binary:function(e,t,n,r,i){var a,o,u=e.children,s=u.length,c=new Array(s+1);for(c[0]=o=a=0;a<s;++a)c[a+1]=o+=u[a].value;!function e(t,n,r,i,a,o,s){if(t>=n-1){var l=u[t];return l.x0=i,l.y0=a,l.x1=o,void(l.y1=s)}var f=c[t],d=r/2+f,p=t+1,h=n-1;for(;p<h;){var m=p+h>>>1;c[m]<d?p=m+1:h=m}d-c[p-1]<c[p]-d&&t+1<p&&--p;var v=c[p]-f,g=r-v;if(o-i>s-a){var y=(i*g+o*v)/r;e(t,p,v,i,a,y,s),e(p,n,g,y,a,o,s)}else{var b=(a*g+s*v)/r;e(t,p,v,i,a,o,b),e(p,n,g,i,b,o,s)}}(0,s,e.value,t,n,r,i)},dice:EE,slice:KE,slicedice:function(e,t,n,r,i){(1&e.depth?KE:EE)(e,t,n,r,i)},squarify:JE,resquarify:ZE},eS=["x0","y0","x1","y1","depth","children"];function tS(e){Yk.call(this,e)}tS.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eS.length,default:eS}]};var nS=Object(Me.y)(tS,Yk);nS.layout=function(){var e=function(){var e=JE,t=!1,n=1,r=1,i=[0],a=hE,o=hE,u=hE,s=hE,c=hE;function l(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(kE),e}function f(t){var n=i[t.depth],r=t.x0+n,l=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),t.x0=r,t.y0=l,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=a(t)/2,r+=c(t)-n,l+=o(t)-n,(f-=u(t)-n)<r&&(r=f=(r+f)/2),(d-=s(t)-n)<l&&(l=d=(l+d)/2),e(t,r,l,f,d))}return l.round=function(e){return arguments.length?(t=!!e,l):t},l.size=function(e){return arguments.length?(n=+e[0],r=+e[1],l):[n,r]},l.tile=function(t){return arguments.length?(e=pE(t),l):e},l.padding=function(e){return arguments.length?l.paddingInner(e).paddingOuter(e):l.paddingInner()},l.paddingInner=function(e){return arguments.length?(a="function"===typeof e?e:mE(+e),l):a},l.paddingOuter=function(e){return arguments.length?l.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):l.paddingTop()},l.paddingTop=function(e){return arguments.length?(o="function"===typeof e?e:mE(+e),l):o},l.paddingRight=function(e){return arguments.length?(u="function"===typeof e?e:mE(+e),l):u},l.paddingBottom=function(e){return arguments.length?(s="function"===typeof e?e:mE(+e),l):s},l.paddingLeft=function(e){return arguments.length?(c="function"===typeof e?e:mE(+e),l):c},l}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){Object(Me.v)(QE,t)?e.tile(QE[t]):Object(Me.n)("Unrecognized Treemap layout method: "+t)},e},nS.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],nS.fields=eS;var rS=function(e,t){var n,r,i,a,o,u,s=[],c=function(e){return e(a)};if(null==t)s.push(e);else for(n={},r=0,i=e.length;r<i;++r)a=e[r],(u=n[o=t.map(c)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(a);return s};function iS(e){bi.call(this,null,e)}iS.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(Me.y)(iS,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,i=rS(r,e.groupby),a=(e.groupby||[]).map(Me.h),o=a.length,u=e.as||[Object(Me.h)(e.x),Object(Me.h)(e.y)],s=[];i.forEach((function(t){Da(t,e.x,e.y,e.bandwidth||.3).forEach((function(e){for(var n={},r=0;r<o;++r)n[a[r]]=t.dims[r];n[u[0]]=e[0],n[u[1]]=e[1],s.push(qe(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n};var aS={linear:Ea,log:Sa,exp:_a,pow:ja,quad:Aa,poly:Ta};function oS(e){bi.call(this,null,e)}function uS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cS(e,t,n){return t&&sS(e.prototype,t),n&&sS(e,n),e}oS.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(aS)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(Me.y)(oS,bi).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,i=rS(r,e.groupby),a=(e.groupby||[]).map(Me.h),o=e.method||"linear",u=e.order||3,s=function(e,t){return"poly"===e?t:"quad"===e?2:1}(o,u),c=e.as||[Object(Me.h)(e.x),Object(Me.h)(e.y)],l=aS[o],f=[],d=e.extent;Object(Me.v)(aS,o)||Object(Me.n)("Invalid regression method: "+o),null!=d&&"log"===o&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach((function(n){if(n.length<=s)t.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=l(n,e.x,e.y,u);if(e.params)f.push(qe({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var i=d||Object(Me.p)(n,e.x),p=function(e){for(var t={},r=0;r<a.length;++r)t[a[r]]=n.dims[r];t[c[0]]=e[0],t[c[1]]=e[1],f.push(qe(t))};"linear"===o?i.forEach((function(e){return p([e,r.predict(e)])})):Pa(r.predict,i,25,200).forEach(p)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n};var lS=Math.pow(2,-52),fS=new Uint32Array(512),dS=function(){function e(t){uS(this,e);var n=t.length>>1;if(n>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return cS(e,null,[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xS,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wS,i=t.length,a=new Float64Array(2*i),o=0;o<i;o++){var u=t[o];a[2*o]=n(u),a[2*o+1]=r(u)}return new e(a)}}]),cS(e,[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,a=e.length>>1,o=1/0,u=1/0,s=-1/0,c=-1/0,l=0;l<a;l++){var f=e[2*l],d=e[2*l+1];f<o&&(o=f),d<u&&(u=d),f>s&&(s=f),d>c&&(c=d),this._ids[l]=l}for(var p,h,m,v=(o+s)/2,g=(u+c)/2,y=1/0,b=0;b<a;b++){var x=pS(v,g,e[2*b],e[2*b+1]);x<y&&(p=b,y=x)}var w=e[2*p],O=e[2*p+1];y=1/0;for(var k=0;k<a;k++)if(k!==p){var E=pS(w,O,e[2*k],e[2*k+1]);E<y&&E>0&&(h=k,y=E)}for(var S=e[2*h],C=e[2*h+1],_=1/0,j=0;j<a;j++)if(j!==p&&j!==h){var A=gS(w,O,S,C,e[2*j],e[2*j+1]);A<_&&(m=j,_=A)}var T=e[2*m],N=e[2*m+1];if(_===1/0){for(var R=0;R<a;R++)this._dists[R]=e[2*R]-e[0]||e[2*R+1]-e[1];yS(this._ids,this._dists,0,a-1);for(var D=new Uint32Array(a),I=0,M=0,F=-1/0;M<a;M++){var P=this._ids[M];this._dists[P]>F&&(D[I++]=P,F=this._dists[P])}return this.hull=D.subarray(0,I),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(mS(w,O,S,C,T,N)){var z=h,L=S,B=C;h=m,S=T,C=N,m=z,T=L,N=B}var W=function(e,t,n,r,i,a){var o=n-e,u=r-t,s=i-e,c=a-t,l=o*o+u*u,f=s*s+c*c,d=.5/(o*c-u*s);return{x:e+(c*l-u*f)*d,y:t+(o*f-s*l)*d}}(w,O,S,C,T,N);this._cx=W.x,this._cy=W.y;for(var U=0;U<a;U++)this._dists[U]=pS(e[2*U],e[2*U+1],W.x,W.y);yS(this._ids,this._dists,0,a-1),this._hullStart=p;var V=3;n[p]=t[m]=h,n[h]=t[p]=m,n[m]=t[h]=p,r[p]=0,r[h]=1,r[m]=2,i.fill(-1),i[this._hashKey(w,O)]=p,i[this._hashKey(S,C)]=h,i[this._hashKey(T,N)]=m,this.trianglesLen=0,this._addTriangle(p,h,m,-1,-1,-1);for(var H,q,G=0;G<this._ids.length;G++){var $=this._ids[G],K=e[2*$],X=e[2*$+1];if(!(G>0&&Math.abs(K-H)<=lS&&Math.abs(X-q)<=lS)&&(H=K,q=X,$!==p&&$!==h&&$!==m)){for(var Y=0,J=0,Z=this._hashKey(K,X);J<this._hashSize&&(-1===(Y=i[(Z+J)%this._hashSize])||Y===n[Y]);J++);for(var Q=Y=t[Y],ee=void 0;ee=n[Q],!mS(K,X,e[2*Q],e[2*Q+1],e[2*ee],e[2*ee+1]);)if((Q=ee)===Y){Q=-1;break}if(-1!==Q){var te=this._addTriangle(Q,$,n[Q],-1,-1,r[Q]);r[$]=this._legalize(te+2),r[Q]=te,V++;for(var ne=n[Q];ee=n[ne],mS(K,X,e[2*ne],e[2*ne+1],e[2*ee],e[2*ee+1]);)te=this._addTriangle(ne,$,ee,r[$],-1,r[ne]),r[$]=this._legalize(te+2),n[ne]=ne,V--,ne=ee;if(Q===Y)for(;mS(K,X,e[2*(ee=t[Q])],e[2*ee+1],e[2*Q],e[2*Q+1]);)te=this._addTriangle(ee,$,Q,-1,r[Q],r[ee]),this._legalize(te+2),r[ee]=te,n[Q]=Q,V--,Q=ee;this._hullStart=t[$]=Q,n[Q]=t[ne]=$,n[$]=ne,i[this._hashKey(K,X)]=$,i[this._hashKey(e[2*Q],e[2*Q+1])]=Q}}}this.hull=new Uint32Array(V);for(var re=0,ie=this._hullStart;re<V;re++)this.hull[re]=ie,ie=n[ie];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,i=0,a=0;;){var o=n[e],u=e-e%3;if(a=u+(e+2)%3,-1!==o){var s=o-o%3,c=u+(e+1)%3,l=s+(o+2)%3,f=t[a],d=t[e],p=t[c],h=t[l];if(vS(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1],r[2*h],r[2*h+1])){t[e]=h,t[o]=f;var m=n[l];if(-1===m){var v=this._hullStart;do{if(this._hullTri[v]===l){this._hullTri[v]=e;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(e,m),this._link(o,n[a]),this._link(a,l);var g=s+(o+1)%3;i<fS.length&&(fS[i++]=g)}else{if(0===i)break;e=fS[--i]}}else{if(0===i)break;e=fS[--i]}}return a}},{key:"_link",value:function(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,i,a){var o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}]),e}();function pS(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}function hS(e,t,n,r,i,a){var o=(r-t)*(i-e),u=(n-e)*(a-t);return Math.abs(o-u)>=33306690738754716e-32*Math.abs(o+u)?o-u:0}function mS(e,t,n,r,i,a){return(hS(i,a,e,t,n,r)||hS(e,t,n,r,i,a)||hS(n,r,i,a,e,t))<0}function vS(e,t,n,r,i,a,o,u){var s=e-o,c=t-u,l=n-o,f=r-u,d=i-o,p=a-u,h=l*l+f*f,m=d*d+p*p;return s*(f*m-h*p)-c*(l*m-h*d)+(s*s+c*c)*(l*p-f*d)<0}function gS(e,t,n,r,i,a){var o=n-e,u=r-t,s=i-e,c=a-t,l=o*o+u*u,f=s*s+c*c,d=.5/(o*c-u*s),p=(c*l-u*f)*d,h=(o*f-s*l)*d;return p*p+h*h}function yS(e,t,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var a=e[i],o=t[a],u=i-1;u>=n&&t[e[u]]>o;)e[u+1]=e[u--];e[u+1]=a}else{var s=n+1,c=r;bS(e,n+r>>1,s),t[e[n]]>t[e[r]]&&bS(e,n,r),t[e[s]]>t[e[r]]&&bS(e,s,r),t[e[n]]>t[e[s]]&&bS(e,n,s);for(var l=e[s],f=t[l];;){do{s++}while(t[e[s]]<f);do{c--}while(t[e[c]]>f);if(c<s)break;bS(e,s,c)}e[n+1]=e[c],e[c]=l,r-s+1>=c-n?(yS(e,t,s,r),yS(e,t,n,c-1)):(yS(e,t,n,c-1),yS(e,t,s,r))}}function bS(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function xS(e){return e[0]}function wS(e){return e[1]}var OS=function(){function e(){uS(this,e),this._x0=this._y0=this._x1=this._y1=null,this._=""}return cS(e,[{key:"moveTo",value:function(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function(e,t,n){var r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),e}(),kS=function(){function e(){uS(this,e),this._=[]}return cS(e,[{key:"moveTo",value:function(e,t){this._.push([e,t])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(e,t){this._.push([e,t])}},{key:"value",value:function(){return this._.length?this._:null}}]),e}(),ES=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=Object(Ca.a)(n,4),i=r[0],a=r[1],o=r[2],u=r[3];if(uS(this,e),!((o=+o)>=(i=+i))||!((u=+u)>=(a=+a)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=o,this.xmin=i,this.ymax=u,this.ymin=a,this._init()}return cS(e,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var e,t,n=this.delaunay,r=n.points,i=n.hull,a=n.triangles,o=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2),s=0,c=0,l=a.length;s<l;s+=3,c+=2){var f=2*a[s],d=2*a[s+1],p=2*a[s+2],h=r[f],m=r[f+1],v=r[d],g=r[d+1],y=r[p],b=r[p+1],x=v-h,w=g-m,O=y-h,k=b-m,E=x*x+w*w,S=O*O+k*k,C=2*(x*k-w*O);if(C)if(Math.abs(C)<1e-8)e=(h+y)/2,t=(m+b)/2;else{var _=1/C;e=h+(k*E-w*S)*_,t=m+(x*S-O*E)*_}else e=(h+y)/2-1e8*k,t=(m+b)/2+1e8*O;u[c]=e,u[c+1]=t}var j,A,T,N=i[i.length-1],R=4*N,D=r[2*N],I=r[2*N+1];o.fill(0);for(var M=0;M<i.length;++M)j=R,A=D,T=I,R=4*(N=i[M]),D=r[2*N],I=r[2*N+1],o[j+2]=o[R]=T-I,o[j+3]=o[R+1]=D-A}},{key:"render",value:function(e){var t=null==e?e=new OS:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,a=n.hull,o=this.circumcenters,u=this.vectors;if(a.length<=1)return null;for(var s=0,c=r.length;s<c;++s){var l=r[s];if(!(l<s)){var f=2*Math.floor(s/3),d=2*Math.floor(l/3),p=o[f],h=o[f+1],m=o[d],v=o[d+1];this._renderSegment(p,h,m,v,e)}}for(var g,y=a[a.length-1],b=0;b<a.length;++b){g=y,y=a[b];var x=2*Math.floor(i[y]/3),w=o[x],O=o[x+1],k=4*g,E=this._project(w,O,u[k+2],u[k+3]);E&&this._renderSegment(w,O,E[0],E[1],e)}return t&&t.value()}},{key:"renderBounds",value:function(e){var t=null==e?e=new OS:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function(e,t){var n=null==t?t=new OS:void 0,r=this._clip(e);if(null!==r){t.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||t.lineTo(r[a],r[a+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:x.a.mark((function e(){var t,n,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.delaunay.points,n=0,r=t.length/2;case 2:if(!(n<r)){e.next=10;break}if(!(i=this.cellPolygon(n))){e.next=7;break}return e.next=7,i;case 7:++n,e.next=2;break;case 10:case"end":return e.stop()}}),e,this)}))},{key:"cellPolygon",value:function(e){var t=new kS;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function(e,t,n,r,i){var a,o=this._regioncode(e,t),u=this._regioncode(n,r);0===o&&0===u?(i.moveTo(e,t),i.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,u))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(e,t,n){return(t=+t)===t&&(n=+n)===n&&this.delaunay._step(e,t,n)===e}},{key:"neighbors",value:x.a.mark((function e(t){var n,r,i,a,o,u,s,c,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._clip(t))){e.next=33;break}r=Object(Ri.a)(this.delaunay.neighbors(t)),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=25;break}if(a=i.value,!(o=this._clip(a))){e.next=23;break}u=0,s=n.length;case 10:if(!(u<s)){e.next=23;break}c=0,l=o.length;case 12:if(!(c<l)){e.next=20;break}if(n[u]!=o[c]||n[u+1]!=o[c+1]||n[(u+2)%s]!=o[(c+l-2)%l]||n[(u+3)%s]!=o[(c+l-1)%l]){e.next=17;break}return e.next=16,a;case 16:return e.abrupt("break",23);case 17:c+=2,e.next=12;break;case 20:u+=2,e.next=10;break;case 23:e.next=5;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),r.e(e.t0);case 30:return e.prev=30,r.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[3,27,30,33]])}))},{key:"_cell",value:function(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,a=n.triangles,o=r[e];if(-1===o)return null;var u=[],s=o;do{var c=Math.floor(s/3);if(u.push(t[2*c],t[2*c+1]),a[s=s%3===2?s-2:s+1]!==e)break;s=i[s]}while(s!==o&&-1!==s);return u}},{key:"_clip",value:function(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}},{key:"_clipFinite",value:function(e,t){for(var n,r,i,a,o,u=t.length,s=null,c=t[u-2],l=t[u-1],f=this._regioncode(c,l),d=0;d<u;d+=2)if(n=c,r=l,c=t[d],l=t[d+1],i=f,f=this._regioncode(c,l),0===i&&0===f)a=o,o=0,s?s.push(c,l):s=[c,l];else{var p=void 0,h=void 0,m=void 0,v=void 0,g=void 0;if(0===i){if(null===(p=this._clipSegment(n,r,c,l,i,f)))continue;var y=p,b=Object(Ca.a)(y,4);h=b[0],m=b[1],v=b[2],g=b[3]}else{if(null===(p=this._clipSegment(c,l,n,r,f,i)))continue;var x=p,w=Object(Ca.a)(x,4);v=w[0],g=w[1],h=w[2],m=w[3],a=o,o=this._edgecode(h,m),a&&o&&this._edge(e,a,o,s,s.length),s?s.push(h,m):s=[h,m]}a=o,o=this._edgecode(v,g),a&&o&&this._edge(e,a,o,s,s.length),s?s.push(v,g):s=[v,g]}if(s)a=o,o=this._edgecode(s[0],s[1]),a&&o&&this._edge(e,a,o,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}},{key:"_clipSegment",value:function(e,t,n,r,i,a){for(;;){if(0===i&&0===a)return[e,t,n,r];if(i&a)return null;var o=void 0,u=void 0,s=i||a;8&s?(o=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):4&s?(o=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):2&s?(u=t+(r-t)*(this.xmax-e)/(n-e),o=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),o=this.xmin),i?(e=o,t=u,i=this._regioncode(e,t)):(n=o,r=u,a=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(e,t,n,r,i,a){var o,u=Array.from(t);if((o=this._project(u[0],u[1],n,r))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],i,a))&&u.push(o[0],o[1]),u=this._clipFinite(e,u))for(var s,c=0,l=u.length,f=this._edgecode(u[l-2],u[l-1]);c<l;c+=2)s=f,f=this._edgecode(u[c],u[c+1]),s&&f&&(c=this._edge(e,s,f,u,c),l=u.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(e,t,n,r,i){for(;t!==n;){var a=void 0,o=void 0;switch(t){case 5:t=4;continue;case 4:t=6,a=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,a=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,a=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(e,a,o)||(r.splice(i,0,a,o),i+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var s=(u+2)%r.length,c=(u+4)%r.length;(r[u]===r[s]&&r[s]===r[c]||r[u+1]===r[s+1]&&r[s+1]===r[c+1])&&(r.splice(s,2),u-=2)}return i}},{key:"_project",value:function(e,t,n,r){var i,a,o,u=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<u&&(o=this.ymin,a=e+(u=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<u&&(o=this.ymax,a=e+(u=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<u&&(a=this.xmax,o=t+(u=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<u&&(a=this.xmin,o=t+(u=i)*r)}return[a,o]}},{key:"_edgecode",value:function(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}]),e}(),SS=x.a.mark(RS),CS=2*Math.PI;function _S(e){return e[0]}function jS(e){return e[1]}function AS(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var TS=function(){function e(t){uS(this,e),this._delaunator=new dS(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return cS(e,null,[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_S,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jS,i=arguments.length>3?arguments[3]:void 0;return new e("length"in t?NS(t,n,r,i):Float64Array.from(RS(t,n,r,i)))}}]),cS(e,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){for(var t=e.triangles,n=e.coords,r=0;r<t.length;r+=3){var i=2*t[r],a=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(function(e,t){return t})).sort((function(e,n){return t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[t[2*n],t[2*n+1],t[2*r],t[2*r+1]],a=1e-8*Math.sqrt(Math.pow(i[3]-i[1],2)+Math.pow(i[2]-i[0],2)),o=0,u=t.length/2;o<u;++o){var s=AS(t[2*o],t[2*o+1],a);t[2*o]=s[0],t[2*o+1]=s[1]}this._delaunator=new dS(t)}else delete this.collinear;for(var c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),p=this._hullIndex.fill(-1),h=0,m=c.length;h<m;++h){var v=f[h%3===2?h-2:h+1];-1!==c[h]&&-1!==d[v]||(d[v]=h)}for(var g=0,y=l.length;g<y;++g)p[l[g]]=g;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],this.triangles[1]=l[1],this.triangles[2]=l[1],d[l[0]]=1,2===l.length&&(d[l[1]]=0))}},{key:"voronoi",value:function(e){return new ES(this,e)}},{key:"neighbors",value:x.a.mark((function e(t){var n,r,i,a,o,u,s,c,l,f,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.inedges,r=this.hull,i=this._hullIndex,a=this.halfedges,o=this.triangles,!(u=this.collinear)){e.next=10;break}if(!((s=u.indexOf(t))>0)){e.next=6;break}return e.next=6,u[s-1];case 6:if(!(s<u.length-1)){e.next=9;break}return e.next=9,u[s+1];case 9:return e.abrupt("return");case 10:if(-1!==(c=n[t])){e.next=13;break}return e.abrupt("return");case 13:l=c,f=-1;case 14:return e.next=16,f=o[l];case 16:if(o[l=l%3===2?l-2:l+1]===t){e.next=19;break}return e.abrupt("return");case 19:if(-1!==(l=a[l])){e.next=26;break}if((d=r[(i[t]+1)%r.length])===f){e.next=25;break}return e.next=25,d;case 25:return e.abrupt("return");case 26:if(l!==c){e.next=14;break}case 27:case"end":return e.stop()}}),e,this)}))},{key:"find",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!==e||(t=+t)!==t)return-1;for(var r,i=n;(r=this._step(n,e,t))>=0&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function(e,t,n){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,u=this.triangles,s=this.points;if(-1===r[e]||!s.length)return(e+1)%(s.length>>1);var c=e,l=Math.pow(t-s[2*e],2)+Math.pow(n-s[2*e+1],2),f=r[e],d=f;do{var p=u[d],h=Math.pow(t-s[2*p],2)+Math.pow(n-s[2*p+1],2);if(h<l&&(l=h,c=p),u[d=d%3===2?d-2:d+1]!==e)break;if(-1===(d=o[d])){if((d=i[(a[e]+1)%i.length])!==p&&Math.pow(t-s[2*d],2)+Math.pow(n-s[2*d+1],2)<l)return d;break}}while(d!==f);return c}},{key:"render",value:function(e){for(var t=null==e?e=new OS:void 0,n=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var u=r[a];if(!(u<a)){var s=2*i[a],c=2*i[u];e.moveTo(n[s],n[s+1]),e.lineTo(n[c],n[c+1])}}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==e?e=new OS:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],u=r[i+1];e.moveTo(o+t,u),e.arc(o,u,t,0,CS)}return n&&n.value()}},{key:"renderHull",value:function(e){var t=null==e?e=new OS:void 0,n=this.hull,r=this.points,i=2*n[0],a=n.length;e.moveTo(r[i],r[i+1]);for(var o=1;o<a;++o){var u=2*n[o];e.lineTo(r[u],r[u+1])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function(){var e=new kS;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function(e,t){var n=null==t?t=new OS:void 0,r=this.points,i=this.triangles,a=2*i[e*=3],o=2*i[e+1],u=2*i[e+2];return t.moveTo(r[a],r[a+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[u],r[u+1]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:x.a.mark((function e(){var t,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.triangles,n=0,r=t.length/3;case 2:if(!(n<r)){e.next=8;break}return e.next=5,this.trianglePolygon(n);case 5:++n,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"trianglePolygon",value:function(e){var t=new kS;return this.renderTriangle(e,t),t.value()}}]),e}();function NS(e,t,n,r){for(var i=e.length,a=new Float64Array(2*i),o=0;o<i;++o){var u=e[o];a[2*o]=t.call(r,u,o,e),a[2*o+1]=n.call(r,u,o,e)}return a}function RS(e,t,n,r){var i,a,o,u;return x.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:i=0,a=Object(Ri.a)(e),s.prev=2,a.s();case 4:if((o=a.n()).done){s.next=13;break}return u=o.value,s.next=8,t.call(r,u,i,e);case 8:return s.next=10,n.call(r,u,i,e);case 10:++i;case 11:s.next=4;break;case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(2),a.e(s.t0);case 18:return s.prev=18,a.f(),s.finish(18);case 21:case"end":return s.stop()}}),SS,null,[[2,15,18,21]])}function DS(e){bi.call(this,null,e)}DS.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var IS=Object(Me.y)(DS,bi),MS=[-1e5,-1e5,1e5,1e5];function FS(e){for(var t=e[0][0],n=e[0][1],r=e.length-1;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}IS.transform=function(e,t){var n=e.as||"path",r=t.source;if(!r||!r.length)return t;var i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:MS;for(var a=this.value=TS.from(r,e.x,e.y).voronoi(i),o=0,u=r.length;o<u;++o){var s=a.cellPolygon(o);r[o][n]=s?FS(s):null}return t.reflow(e.modified()).modifies(n)};var PS=Math.PI/180,zS=function(){var e,t,n,r,i,a,o,u=[256,256],s=US,c=[],l=Math.random,f={};function d(e,t,n){for(var r,i,a,o,c,f=t.x,d=t.y,p=Math.sqrt(u[0]*u[0]+u[1]*u[1]),h=s(u),m=l()<.5?1:-1,v=-m;(r=h(v+=m))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=p));)if(t.x=f+i,t.y=d+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>u[0]||t.y+t.y1>u[1])&&(!n||!BS(t,e,u[0]))&&(!n||(c=n,(o=t).x+o.x1>c[0].x&&o.x+o.x0<c[1].x&&o.y+o.y1>c[0].y&&o.y+o.y0<c[1].y))){for(var g,y=t.sprite,b=t.width>>5,x=u[0]>>5,w=t.x-(b<<4),O=127&w,k=32-O,E=t.y1-t.y0,S=(t.y+t.y0)*x+(w>>5),C=0;C<E;C++){g=0;for(var _=0;_<=b;_++)e[S+_]|=g<<k|(_<b?(g=y[C*b+_])>>>O:0);S+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var s=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=2048/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}($s()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((u[0]>>5)*u[1]),p=null,h=c.length,m=-1,v=[],g=c.map((function(u){return{text:e(u),font:t(u),style:r(u),weight:i(u),rotate:a(u),size:~~(n(u)+1e-14),padding:o(u),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:u}})).sort((function(e,t){return t.size-e.size}));++m<h;){var y=g[m];y.x=u[0]*(l()+.5)>>1,y.y=u[1]*(l()+.5)>>1,LS(s,y,g,m),y.hasText&&d(f,y,p)&&(v.push(y),p?WS(p,y):p=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=u[0]>>1,y.y-=u[1]>>1)}return v},f.words=function(e){return arguments.length?(c=e,f):c},f.size=function(e){return arguments.length?(u=[+e[0],+e[1]],f):u},f.font=function(e){return arguments.length?(t=VS(e),f):t},f.fontStyle=function(e){return arguments.length?(r=VS(e),f):r},f.fontWeight=function(e){return arguments.length?(i=VS(e),f):i},f.rotate=function(e){return arguments.length?(a=VS(e),f):a},f.text=function(t){return arguments.length?(e=VS(t),f):e},f.spiral=function(e){return arguments.length?(s=HS[e]||e,f):s},f.fontSize=function(e){return arguments.length?(n=VS(e),f):n},f.padding=function(e){return arguments.length?(o=VS(e),f):o},f.random=function(e){return arguments.length?(l=e,f):l},f};function LS(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,2048/a,2048/a);var o,u,s,c,l,f=0,d=0,p=0,h=n.length;for(--r;++r<h;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,s=t.size<<1,t.rotate){var m=Math.sin(t.rotate*PS),v=Math.cos(t.rotate*PS),g=o*v,y=o*m,b=s*v,x=s*m;o=Math.max(Math.abs(g+x),Math.abs(g-x))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>p&&(p=s),f+o>=2048&&(f=0,d+=p,p=0),d+s>=2048)break;i.translate((f+(o>>1))/a,(d+(s>>1))/a),t.rotate&&i.rotate(t.rotate*PS),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=s,t.xoff=f,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=o}for(var w=i.getImageData(0,0,2048/a,2048/a).data,O=[];--r>=0;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,c=0;c<s*u;c++)O[c]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,E=-1;for(l=0;l<s;l++){for(c=0;c<o;c++){var S=u*l+(c>>5),C=w[2048*(d+l)+(f+c)<<2]?1<<31-c%32:0;O[S]|=C,k|=C}k?E=l:(t.y0++,s--,l--,d++)}t.y1=t.y0+E,t.sprite=O.slice(0,(t.y1-t.y0)*u)}}}function BS(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),u=127&o,s=32-u,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var d=0;d<=a;d++)if((r<<s|(d<a?(r=i[f*a+d])>>>u:0))&t[l+d])return!0;l+=n}return!1}function WS(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function US(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function VS(e){return"function"===typeof e?e:function(){return e}}var HS={archimedean:US,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},qS=["x","y","font","fontSize","fontStyle","fontWeight","angle"],GS=["text","font","rotate","fontSize","fontStyle","fontWeight"];function $S(e){bi.call(this,zS(),e)}function KS(e){return new Uint8Array(e)}function XS(e){return new Uint16Array(e)}function YS(e){return new Uint32Array(e)}function JS(e,t,n){var r=(t<257?KS:t<65537?XS:YS)(e);return n&&r.set(n),r}$S.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:qS}]},Object(Me.y)($S,bi).transform=function(e,t){!e.size||e.size[0]&&e.size[1]||Object(Me.n)("Wordcloud size dimensions must be non-zero.");var n=e.modified();if(n||t.changed(t.ADD_REM)||GS.some((function(n){var r=e[n];return Object(Me.D)(r)&&t.modified(r.fields)}))){var r,i=t.materialize(t.SOURCE).source,a=this.value,o=e.as||qS,u=e.fontSize||14;if(Object(Me.D)(u)?r=e.fontSizeRange:u=Object(Me.l)(u),r){var s=u,c=Zv("sqrt")().domain(Object(Me.p)(i,s)).range(r);u=function(e){return c(s(e))}}i.forEach((function(e){e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));for(var l,f,d=a.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random(Ki).layout(),p=a.size(),h=p[0]>>1,m=p[1]>>1,v=0,g=d.length;v<g;++v)(f=(l=d[v]).datum)[o[0]]=l.x+h,f[o[1]]=l.y+m,f[o[2]]=l.font,f[o[3]]=l.size,f[o[4]]=l.style,f[o[5]]=l.weight,f[o[6]]=l.rotate;return t.reflow(n).modifies(o)}};var ZS=function(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,i=this.bisect(this.range,e.value),a=e.index,o=i[0],u=i[1],s=a.length;for(n=0;n<o;++n)t[a[n]]|=r;for(n=u;n<s;++n)t[a[n]]|=r;return this}}};function QS(){var e=YS(0),t=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,u,s,c,l,f,d,p=n,h=i.length,m=Array(h),v=YS(h);for(s=0;s<h;++s)m[s]=r(i[s]),v[s]=s;if(d=v,(f=m).sort.call(d,(function(e,t){var n=f[e],r=f[t];return n<r?-1:n>r?1:0})),c=f,l=d,m=Array.from(l,(function(e){return c[e]})),p)o=t,u=e,t=Array(p+h),e=YS(p+h),function(e,t,n,r,i,a,o,u,s){var c,l=0,f=0;for(c=0;l<r&&f<o;++c)t[l]<i[f]?(u[c]=t[l],s[c]=n[l++]):(u[c]=i[f],s[c]=a[f++]+e);for(;l<r;++l,++c)u[c]=t[l],s[c]=n[l];for(;f<o;++f,++c)u[c]=i[f],s[c]=a[f]+e}(a,o,u,p,m,v,h,t,e);else{if(a>0)for(s=0;s<h;++s)v[s]+=a;t=m,e=v}return n=p+h,{index:v,value:m}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[e[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=e[o]]||(e[u]=a,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var i;return r?i=r.length:(r=t,i=n),[Wh(r,e[0],0,i),Bh(r,e[1],0,i)]},reindex:function(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function eC(e){bi.call(this,function(){var e=8,t=[],n=YS(0),r=JS(0,e),i=JS(0,e);return{data:function(){return t},seen:function(){return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add:function(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)(n=e[r])._index=i++,t.push(n)},remove:function(e,n){var a,o,u,s=t.length,c=Array(s-e),l=t;for(o=0;!n[o]&&o<s;++o)c[o]=t[o],l[o]=o;for(u=o;o<s;++o)a=t[o],n[o]?l[o]=-1:(l[o]=u,r[u]=r[o],i[u]=i[o],c[u]=a,a._index=u++),r[o]=0;return t=c,l},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(e){i[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=JS(t,e,r),i=JS(t,e))}}}(),e),this._indices=null,this._dims=null}eC.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var tC=Object(Me.y)(eC,bi);function nC(e){bi.call(this,null,e)}tC.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some((function(e){return t.modified(e.fields)}))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},tC.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},u=this._dims=[],s=a.length,c=0;c<s;++c)r=o[n=i[c].fname]||(o[n]=QS()),u.push(ZS(r,c,a[c]));return this.eval(e,t)},tC.reinit=function(e,t){var n,r,i,a,o,u,s,c,l,f=t.materialize().fork(),d=e.fields,p=e.query,h=this._indices,m=this._dims,v=this.value,g=v.curr(),y=v.prev(),b=v.all(),x=f.rem=f.add,w=f.mod,O=p.length,k={};if(y.set(g),t.rem.length&&(o=this.remove(e,t,f)),t.add.length&&v.add(t.add),t.mod.length)for(u={},s=0,c=(a=t.mod).length;s<c;++s)u[a[s]._index]=1;for(s=0;s<O;++s)l=d[s],(!m[s]||e.modified("fields",s)||t.modified(l.fields))&&((n=k[i=l.fname])||(h[i]=r=QS(),k[i]=n=r.insert(l,t.source,0)),m[s]=ZS(r,s,p[s]).onAdd(n,g));for(s=0,c=v.data().length;s<c;++s)o[s]||(y[s]!==g[s]?x.push(s):u[s]&&g[s]!==b&&w.push(s));return v.mask=(1<<O)-1,f},tC.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},tC.insert=function(e,t,n){var r,i,a,o=t.add,u=this.value,s=this._dims,c=this._indices,l=e.fields,f={},d=n.add,p=u.size(),h=p+o.length,m=s.length;u.resize(h,m),u.add(o);var v=u.curr(),g=u.prev(),y=u.all();for(r=0;r<m;++r)a=f[i=l[r].fname]||(f[i]=c[i].insert(l[r],o,p)),s[r].onAdd(a,v);for(;p<h;++p)g[p]=y,v[p]!==y&&d.push(p)},tC.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,u=o.curr(),s=o.all(),c=e.mod;for(n=0,r=c.length;n<r;++n)u[i=c[n]._index]!==s&&a.push(i)},tC.remove=function(e,t,n){var r,i,a,o,u=this._indices,s=this.value,c=s.curr(),l=s.prev(),f=s.all(),d={},p=n.rem,h=t.rem;for(r=0,i=h.length;r<i;++r)d[a=h[r]._index]=1,l[a]=o=c[a],c[a]=f,o!==f&&p.push(a);for(a in u)u[a].remove(i,d);return this.reindex(t,i,d),d},tC.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter((function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)}))},tC.update=function(e,t,n){var r,i,a=this._dims,o=e.query,u=t.stamp,s=a.length,c=0;for(n.filters=0,i=0;i<s;++i)e.modified("query",i)&&(r=i,++c);if(1===c)c=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,c=0;i<s;++i)e.modified("query",i)&&(c|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return c},tC.incrementAll=function(e,t,n,r){var i,a,o,u=this.value,s=u.seen(),c=u.curr(),l=u.prev(),f=e.index(),d=e.bisect(e.range),p=e.bisect(t),h=p[0],m=p[1],v=d[0],g=d[1],y=e.one;if(h<v)for(i=h,a=Math.min(v,m);i<a;++i)s[o=f[i]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;else if(h>v)for(i=v,a=Math.min(h,g);i<a;++i)s[o=f[i]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;if(m>g)for(i=Math.max(h,g),a=m;i<a;++i)s[o=f[i]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;else if(m<g)for(i=Math.max(v,m),a=g;i<a;++i)s[o=f[i]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=y;e.range=t.slice()},tC.incrementOne=function(e,t,n,r){var i,a,o,u=this.value.curr(),s=e.index(),c=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],p=c[0],h=c[1],m=e.one;if(f<p)for(i=f,a=Math.min(p,d);i<a;++i)u[o=s[i]]^=m,n.push(o);else if(f>p)for(i=p,a=Math.min(f,h);i<a;++i)u[o=s[i]]^=m,r.push(o);if(d>h)for(i=Math.max(f,h),a=d;i<a;++i)u[o=s[i]]^=m,n.push(o);else if(d<h)for(i=Math.max(p,d),a=h;i<a;++i)u[o=s[i]]^=m,r.push(o);e.range=t.slice()},nC.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(Me.y)(nC,bi).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),c=function(e){return u[e]&n?null:o[e]};return a.filter(a.MOD,c),i&i-1?(a.filter(a.ADD,(function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null})),a.filter(a.REM,(function(e){var t=u[e]&n;return t&&!(t^t^s[e]&n)?o[e]:null}))):(a.filter(a.ADD,c),a.filter(a.REM,(function(e){return(u[e]&n)===i?o[e]:null}))),a.filter(a.SOURCE,(function(e){return c(e._index)}))};var rC=n(284);function iC(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}var aC=function(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:"default",item:null})),e.on(e.events("view","mousemove"),t,(function(e,n){var r=t.value,i=r?Object(Me.H)(r)?r:r.user:"default",a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}})),e.add(null,(function(e){var t=e.cursor,n=this.value;return Object(Me.H)(t)||(n=t.item,t=t.user),function(e){"undefined"!==typeof document&&document.body&&(document.body.style.cursor=e)}(t&&"default"!==t?t:n||t),n}),{cursor:t})};function oC(e,t){var n=e._runtime.data;return Object(Me.v)(n,t)||Object(Me.n)("Unrecognized data set: "+t),n[t]}function uC(e,t){Ye(t)||Object(Me.n)("Second argument to changes must be a changeset.");var n=oC(this,e);return n.modified=!0,this.pulse(n.input,t)}function sC(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function cC(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function lC(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function fC(e){var t=lC(e),n=sC(e),r=cC(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((function(t){try{t(n,r)}catch(i){e.error(i)}}))}var dC=function(e,t,n){var r,i,a,o=e._renderer,u=o&&o.canvas();return u&&(a=lC(e),i=t.changedTouches?t.changedTouches[0]:t,(r=Jd(i,u))[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){var r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function a(e){if(!e)return n;Object(Me.H)(e)&&(e=i(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:Object(Me.l)(e),item:Object(Me.l)(t||{}),group:i,xy:a,x:function(e){return a(e)[0]},y:function(e){return a(e)[1]}}}(e,n,r),t};var pC={trap:!1};function hC(e,t,n){var r=e._eventConfig&&e._eventConfig[t];return!(!1===r||Object(Me.F)(r)&&!r[n])||(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1)}function mC(e){return e.item}function vC(e){return e.item.mark.source}function gC(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}var yC=function(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r},bC=function(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&e.runAsync(null,(function(){i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=Object(Me.m)(r.debounce,i.update))),function(e,t,n,r){var i=yC("div",{class:"vega-bind"});i.appendChild(yC("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(i);var a=xC;switch(n.input){case"checkbox":a=wC;break;case"select":a=OC;break;case"radio":a=kC;break;case"range":a=EC}a(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0),i}};function xC(e,t,n,r){var i=yC("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(function(){e.update(i.value)})),e.elements=[i],e.set=function(e){i.value=e}}function wC(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=yC("input",i);t.appendChild(a),a.addEventListener("change",(function(){e.update(a.checked)})),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function OC(e,t,n,r){var i=yC("select",{name:n.signal}),a=n.labels||[];n.options.forEach((function(e,t){var n={value:e};SC(e,r)&&(n.selected=!0),i.appendChild(yC("option",n,(a[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(function(){e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(SC(n.options[t],e))return void(i.selectedIndex=t)}}function kC(e,t,n,r){var i=yC("span",{class:"vega-bind-radio"}),a=n.labels||[];t.appendChild(i),e.elements=n.options.map((function(t,o){var u="vega-option-"+n.signal+"-"+t,s={id:u,type:"radio",name:n.signal,value:t};SC(t,r)&&(s.checked=!0);var c=yC("input",s);return c.addEventListener("change",(function(){e.update(t)})),i.appendChild(c),i.appendChild(yC("label",{for:u},(a[o]||t)+"")),c})),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)SC(n[r].value,t)&&(n[r].checked=!0)}}function EC(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=null!=n.max?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,o=n.step||cs(a,i,100),u=yC("input",{type:"range",name:n.signal,min:a,max:i,step:o});u.value=r;var s=yC("label",{},+r);function c(){s.textContent=u.value,e.update(+u.value)}t.appendChild(u),t.appendChild(s),u.addEventListener("input",c),u.addEventListener("change",c),e.elements=[u],e.set=function(e){u.value=e,s.textContent=e}}function SC(e,t){return e===t||e+""===t+""}var CC=function(e,t,n,r,i,a){return(t=t||new r(e.loader())).initialize(n,sC(e),cC(e),lC(e),i,a).background(e.background())},_C=function(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null};function jC(e,t){if("string"===typeof t){if("undefined"===typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}var AC=function(e){return+e||0},TC=function(e){return Object(Me.F)(e)?{top:AC(e.top),bottom:AC(e.bottom),left:AC(e.left),right:AC(e.right)}:function(e){return{top:e,bottom:e,left:e,right:e}}(AC(e))},NC=function(e,t,n,r){return RC.apply(this,arguments)};function RC(){return(RC=Object(Pe.a)(x.a.mark((function e(t,n,r,i){var a,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Hp(n),(o=a&&a.headless)||Object(Me.n)("Unrecognized renderer type: "+n),e.next=4,t.runAsync();case 4:return e.abrupt("return",CC(t,null,null,o,r,i).renderAsync(t._scenegraph.root));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DC(){return(DC=Object(Pe.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t!==Up.Canvas&&t!==Up.SVG&&t!==Up.PNG&&Object(Me.n)("Unrecognized image type: "+t),e.next=3,NC(this,t,n);case 3:return r=e.sent,e.abrupt("return",t===Up.SVG?IC(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function IC(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function MC(){return(MC=Object(Pe.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NC(this,Up.Canvas,t,n);case 2:return r=e.sent,e.abrupt("return",r.canvas());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function FC(){return(FC=Object(Pe.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NC(this,Up.SVG,t);case 2:return n=e.sent,e.abrupt("return",n.svg());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var PC,zC,LC,BC,WC;function UC(e){this.type=e}UC.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case"ArrayExpression":return e.elements;case"BinaryExpression":case"LogicalExpression":return[e.left,e.right];case"CallExpression":var t=e.arguments.slice();return t.unshift(e.callee),t;case"ConditionalExpression":return[e.test,e.consequent,e.alternate];case"MemberExpression":return[e.object,e.property];case"ObjectExpression":return e.properties;case"Property":return[e.key,e.value];case"UnaryExpression":return[e.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(PC={})[1]="Boolean",PC[2]="<end>",PC[3]="Identifier",PC[4]="Keyword",PC[5]="Null",PC[6]="Numeric",PC[7]="Punctuator",PC[8]="String",PC[9]="RegularExpression";var VC="ILLEGAL",HC=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),qC=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function GC(e,t){if(!e)throw new Error("ASSERT: "+t)}function $C(e){return e>=48&&e<=57}function KC(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function XC(e){return"01234567".indexOf(e)>=0}function YC(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function JC(e){return 10===e||13===e||8232===e||8233===e}function ZC(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&HC.test(String.fromCharCode(e))}function QC(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&qC.test(String.fromCharCode(e))}var e_={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function t_(){for(var e;LC<BC&&(YC(e=zC.charCodeAt(LC))||JC(e));)++LC}function n_(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)LC<BC&&KC(zC[LC])?(r=zC[LC++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):y_({},"Unexpected token %0",VC);return String.fromCharCode(i)}function r_(){var e,t,n,r;for(t=0,"}"===(e=zC[LC])&&y_({},"Unexpected token %0",VC);LC<BC&&KC(e=zC[LC++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&y_({},"Unexpected token %0",VC),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function i_(){var e,t;for(e=zC.charCodeAt(LC++),t=String.fromCharCode(e),92===e&&(117!==zC.charCodeAt(LC)&&y_({},"Unexpected token %0",VC),++LC,(e=n_("u"))&&"\\"!==e&&ZC(e.charCodeAt(0))||y_({},"Unexpected token %0",VC),t=e);LC<BC&&QC(e=zC.charCodeAt(LC));)++LC,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==zC.charCodeAt(LC)&&y_({},"Unexpected token %0",VC),++LC,(e=n_("u"))&&"\\"!==e&&QC(e.charCodeAt(0))||y_({},"Unexpected token %0",VC),t+=e);return t}function a_(){var e,t;return e=LC,{type:1===(t=92===zC.charCodeAt(LC)?i_():function(){var e,t;for(e=LC++;LC<BC;){if(92===(t=zC.charCodeAt(LC)))return LC=e,i_();if(!QC(t))break;++LC}return zC.slice(e,LC)}()).length?3:e_.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:LC}}function o_(){var e,t,n,r,i=LC,a=zC.charCodeAt(LC),o=zC[LC];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++LC,{type:7,value:String.fromCharCode(a),start:i,end:LC};default:if(61===(e=zC.charCodeAt(LC+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return LC+=2,{type:7,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:LC};case 33:case 61:return LC+=2,61===zC.charCodeAt(LC)&&++LC,{type:7,value:zC.slice(i,LC),start:i,end:LC}}}return">>>="===(r=zC.substr(LC,4))?{type:7,value:r,start:i,end:LC+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:LC+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:i,end:LC+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:i,end:++LC}:void y_({},"Unexpected token %0",VC)}function u_(){var e,t,n;if(GC($C((n=zC[LC]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=LC,e="","."!==n){if(e=zC[LC++],n=zC[LC],"0"===e){if("x"===n||"X"===n)return++LC,function(e){for(var t="";LC<BC&&KC(zC[LC]);)t+=zC[LC++];return 0===t.length&&y_({},"Unexpected token %0",VC),ZC(zC.charCodeAt(LC))&&y_({},"Unexpected token %0",VC),{type:6,value:parseInt("0x"+t,16),start:e,end:LC}}(t);if(XC(n))return function(e){for(var t="0"+zC[LC++];LC<BC&&XC(zC[LC]);)t+=zC[LC++];return(ZC(zC.charCodeAt(LC))||$C(zC.charCodeAt(LC)))&&y_({},"Unexpected token %0",VC),{type:6,value:parseInt(t,8),octal:!0,start:e,end:LC}}(t);n&&$C(n.charCodeAt(0))&&y_({},"Unexpected token %0",VC)}for(;$C(zC.charCodeAt(LC));)e+=zC[LC++];n=zC[LC]}if("."===n){for(e+=zC[LC++];$C(zC.charCodeAt(LC));)e+=zC[LC++];n=zC[LC]}if("e"===n||"E"===n)if(e+=zC[LC++],"+"!==(n=zC[LC])&&"-"!==n||(e+=zC[LC++]),$C(zC.charCodeAt(LC)))for(;$C(zC.charCodeAt(LC));)e+=zC[LC++];else y_({},"Unexpected token %0",VC);return ZC(zC.charCodeAt(LC))&&y_({},"Unexpected token %0",VC),{type:6,value:parseFloat(e),start:t,end:LC}}function s_(){var e,t,n,r;return WC=null,t_(),e=LC,t=function(){var e,t,n,r;for(GC("/"===(e=zC[LC]),"Regular expression literal must start with a slash"),t=zC[LC++],n=!1,r=!1;LC<BC;)if(t+=e=zC[LC++],"\\"===e)JC((e=zC[LC++]).charCodeAt(0))&&y_({},"Invalid regular expression: missing /"),t+=e;else if(JC(e.charCodeAt(0)))y_({},"Invalid regular expression: missing /");else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||y_({},"Invalid regular expression: missing /"),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";LC<BC&&QC((e=zC[LC]).charCodeAt(0));)++LC,"\\"===e&&LC<BC?y_({},"Unexpected token %0",VC):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&y_({},"Invalid regular expression",n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";y_({},"Invalid regular expression")})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){y_({},"Invalid regular expression")}try{return new RegExp(e,t)}catch(i){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:LC}}function c_(){var e;return t_(),LC>=BC?{type:2,start:LC,end:LC}:ZC(e=zC.charCodeAt(LC))?a_():40===e||41===e||59===e?o_():39===e||34===e?function(){var e,t,n,r,i="",a=!1;for(GC("'"===(e=zC[LC])||'"'===e,"String literal must starts with a quote"),t=LC,++LC;LC<BC;){if((n=zC[LC++])===e){e="";break}if("\\"===n)if((n=zC[LC++])&&JC(n.charCodeAt(0)))"\r"===n&&"\n"===zC[LC]&&++LC;else switch(n){case"u":case"x":"{"===zC[LC]?(++LC,i+=r_()):i+=n_(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:XC(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),LC<BC&&XC(zC[LC])&&(a=!0,r=8*r+"01234567".indexOf(zC[LC++]),"0123".indexOf(n)>=0&&LC<BC&&XC(zC[LC])&&(r=8*r+"01234567".indexOf(zC[LC++]))),i+=String.fromCharCode(r)):i+=n}else{if(JC(n.charCodeAt(0)))break;i+=n}}return""!==e&&y_({},"Unexpected token %0",VC),{type:8,value:i,octal:a,start:t,end:LC}}():46===e?$C(zC.charCodeAt(LC+1))?u_():o_():$C(e)?u_():o_()}function l_(){var e;return LC=(e=WC).end,WC=c_(),LC=e.end,e}function f_(){var e;e=LC,WC=c_(),LC=e}function d_(e,t,n){var r=new UC("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function p_(e,t){var n=new UC("CallExpression");return n.callee=e,n.arguments=t,n}function h_(e){var t=new UC("Identifier");return t.name=e,t}function m_(e){var t=new UC("Literal");return t.value=e.value,t.raw=zC.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function v_(e,t,n){var r=new UC("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function g_(e,t,n){var r=new UC("Property");return r.key=t,r.value=n,r.kind=e,r}function y_(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(function(e,t){return GC(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(i)).index=LC,n.description=i,n}function b_(e){2===e.type&&y_(e,"Unexpected end of input"),6===e.type&&y_(e,"Unexpected number"),8===e.type&&y_(e,"Unexpected string"),3===e.type&&y_(e,"Unexpected identifier"),4===e.type&&y_(e,"Unexpected reserved word"),y_(e,"Unexpected token %0",e.value)}function x_(e){var t=l_();7===t.type&&t.value===e||b_(t)}function w_(e){return 7===WC.type&&WC.value===e}function O_(e){return 4===WC.type&&WC.value===e}function k_(){var e=[];for(LC=WC.start,x_("[");!w_("]");)w_(",")?(l_(),e.push(null)):(e.push(M_()),w_("]")||x_(","));return l_(),function(e){var t=new UC("ArrayExpression");return t.elements=e,t}(e)}function E_(){var e;return LC=WC.start,8===(e=l_()).type||6===e.type?(e.octal&&y_(e,"Octal literals are not allowed in strict mode."),m_(e)):h_(e.value)}function S_(){var e,t,n;return LC=WC.start,3===(e=WC).type?(n=E_(),x_(":"),g_("init",n,M_())):2!==e.type&&7!==e.type?(t=E_(),x_(":"),g_("init",t,M_())):void b_(e)}function C_(){var e,t,n=[],r={},i=String;for(LC=WC.start,x_("{");!w_("}");)t="$"+("Identifier"===(e=S_()).key.type?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?y_({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),w_("}")||x_(",");return x_("}"),function(e){var t=new UC("ObjectExpression");return t.properties=e,t}(n)}var __={if:1,this:1};function j_(){var e,t,n;if(w_("("))return function(){var e;return x_("("),e=F_(),x_(")"),e}();if(w_("["))return k_();if(w_("{"))return C_();if(e=WC.type,LC=WC.start,3===e||__[WC.value])n=h_(l_().value);else if(8===e||6===e)WC.octal&&y_(WC,"Octal literals are not allowed in strict mode."),n=m_(l_());else{if(4===e)throw new Error("Disabled.");1===e?((t=l_()).value="true"===t.value,n=m_(t)):5===e?((t=l_()).value=null,n=m_(t)):w_("/")||w_("/=")?(n=m_(s_()),f_()):b_(l_())}return n}function A_(){var e=[];if(x_("("),!w_(")"))for(;LC<BC&&(e.push(M_()),!w_(")"));)x_(",");return x_(")"),e}function T_(){return x_("."),function(){var e;return LC=WC.start,function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e=l_())||b_(e),h_(e.value)}()}function N_(){var e;return x_("["),e=F_(),x_("]"),e}function R_(){var e=function(){var e;for(e=j_();;)if(w_("."))e=v_(".",e,T_());else if(w_("("))e=p_(e,A_());else{if(!w_("["))break;e=v_("[",e,N_())}return e}();if(7===WC.type&&(w_("++")||w_("--")))throw new Error("Disabled.");return e}function D_(){var e,t;if(7!==WC.type&&4!==WC.type)t=R_();else{if(w_("++")||w_("--"))throw new Error("Disabled.");if(w_("+")||w_("-")||w_("~")||w_("!"))e=l_(),t=D_(),t=function(e,t){var n=new UC("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(O_("delete")||O_("void")||O_("typeof"))throw new Error("Disabled.");t=R_()}}return t}function I_(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function M_(){var e,t;return e=function(){var e,t,n,r,i,a,o,u,s,c;if(e=WC,s=D_(),0===(i=I_(r=WC)))return s;for(r.prec=i,l_(),t=[e,WC],a=[s,r,o=D_()];(i=I_(WC))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=d_(u,s,o),a.push(n);(r=l_()).prec=i,a.push(r),t.push(WC),n=D_(),a.push(n)}for(n=a[c=a.length-1],t.pop();c>1;)t.pop(),n=d_(a[c-1].value,a[c-2],n),c-=2;return n}(),w_("?")&&(l_(),t=M_(),x_(":"),e=function(e,t,n){var r=new UC("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,M_())),e}function F_(){var e=M_();if(w_(","))throw new Error("Disabled.");return e}var P_=function(e){LC=0,BC=(zC=e).length,WC=null,f_();var t=F_();if(2!==WC.type)throw new Error("Unexpect token after expression.");return t},z_={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},L_=function(e){function t(t,n,r){return function(i){return function(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}}var n="new Date";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&Object(Me.n)("Missing arguments to clamp function."),t.length>3&&Object(Me.n)("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),join:t("join",null),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),reverse:function(t){return"("+e(t[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase","String",0),lower:t("toLowerCase","String",0),substring:t("substring","String"),split:t("split","String"),replace:t("replace","String"),trim:t("trim","String",0),regexp:"RegExp",test:t("test","RegExp"),if:function(t){t.length<3&&Object(Me.n)("Missing arguments to if function."),t.length>3&&Object(Me.n)("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};function B_(e,t){for(var n,r,i=t.fields,a=t.values,o=i.length,u=0;u<o;++u)if((r=i[u]).getter=Me.t.getter||Object(Me.t)(r.field),n=r.getter(e),Object(Me.C)(n)&&(n=Object(Me.cb)(n)),Object(Me.C)(a[u])&&(a[u]=Object(Me.cb)(a[u])),Object(Me.C)(a[u][0])&&(a[u]=a[u].map(Me.cb)),"E"===r.type){if(Object(Me.A)(a[u])?a[u].indexOf(n)<0:n!==a[u])return!1}else if("R"===r.type){if(!Object(Me.z)(n,a[u]))return!1}else if("R-RE"===r.type){if(!Object(Me.z)(n,a[u],!0,!1))return!1}else if("R-E"===r.type){if(!Object(Me.z)(n,a[u],!1,!1))return!1}else if("R-LE"===r.type&&!Object(Me.z)(n,a[u],!1,!0))return!1;return!0}var W_={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((function(e){return t.indexOf(e)>=0})):t},R_union:function(e,t){var n=Object(Me.cb)(t[0]),r=Object(Me.cb)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Object(Me.cb)(t[0]),r=Object(Me.cb)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function U_(e,t,n,r){"Literal"!==t[0].type&&Object(Me.n)("First argument to selection functions must be a string literal.");var i=t[0].value,a=":"+i;"intersect"!==(t.length>=2&&Object(Me.U)(t).value)||Object(Me.v)(r,"@unit")||(r["@unit"]=n.getData(i).indataRef(n,"unit")),Object(Me.v)(r,a)||(r[a]=n.getData(i).tuplesRef())}function V_(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function H_(e){var t=Im(e);return.2126*V_(t.r)+.7152*V_(t.g)+.0722*V_(t.b)}function q_(e){var t=this.context.data[e];return t?t.values.value:[]}var G_={};function $_(e,t,n){var r=e+":"+n,i=G_[r];return i&&i[0]===t||(G_[r]=i=[t,t(n)]),i[1]}function K_(e,t){return $_("timeFormat",es,t)(e)}var X_=new Date(2e3,0,1);function Y_(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(X_.setYear(2e3),X_.setMonth(e),X_.setDate(t),K_(X_,n)):""}function J_(e,t){var n;return Object(Me.D)(e)?e:Object(Me.H)(e)?(n=t.scales[e])&&n.value:void 0}var Z_,Q_,ej,tj,nj,rj=Eb(),ij=Eb(),aj={point:Kb,lineStart:Kb,lineEnd:Kb,polygonStart:function(){rj.reset(),aj.lineStart=oj,aj.lineEnd=uj},polygonEnd:function(){var e=+rj;ij.add(e<0?Nb+e:e),this.lineStart=this.lineEnd=this.point=Kb},sphere:function(){ij.add(Nb)}};function oj(){aj.point=sj}function uj(){cj(Z_,Q_)}function sj(e,t){aj.point=cj,Z_=e,Q_=t,ej=e*=Db,tj=Pb(t=(t*=Db)/2+Tb),nj=Ub(t)}function cj(e,t){var n=(e*=Db)-ej,r=n>=0?1:-1,i=r*n,a=Pb(t=(t*=Db)/2+Tb),o=Ub(t),u=nj*o,s=tj*a+u*Pb(i),c=u*r*Ub(i);rj.add(Fb(c,s)),ej=e,tj=a,nj=o}var lj,fj,dj,pj,hj,mj,vj,gj,yj,bj,xj=Eb(),wj={point:Oj,lineStart:Ej,lineEnd:Sj,polygonStart:function(){wj.point=Cj,wj.lineStart=_j,wj.lineEnd=jj,xj.reset(),aj.polygonStart()},polygonEnd:function(){aj.polygonEnd(),wj.point=Oj,wj.lineStart=Ej,wj.lineEnd=Sj,rj<0?(lj=-(dj=180),fj=-(pj=90)):xj>1e-6?pj=90:xj<-1e-6&&(fj=-90),bj[0]=lj,bj[1]=dj},sphere:function(){lj=-(dj=180),fj=-(pj=90)}};function Oj(e,t){yj.push(bj=[lj=e,dj=e]),t<fj&&(fj=t),t>pj&&(pj=t)}function kj(e,t){var n=nw([e*Db,t*Db]);if(gj){var r=iw(gj,n),i=iw([r[1],-r[0],0],r);uw(i),i=tw(i);var a,o=e-hj,u=o>0?1:-1,s=i[0]*Rb*u,c=Ib(o)>180;c^(u*hj<s&&s<u*e)?(a=i[1]*Rb)>pj&&(pj=a):c^(u*hj<(s=(s+360)%360-180)&&s<u*e)?(a=-i[1]*Rb)<fj&&(fj=a):(t<fj&&(fj=t),t>pj&&(pj=t)),c?e<hj?Aj(lj,e)>Aj(lj,dj)&&(dj=e):Aj(e,dj)>Aj(lj,dj)&&(lj=e):dj>=lj?(e<lj&&(lj=e),e>dj&&(dj=e)):e>hj?Aj(lj,e)>Aj(lj,dj)&&(dj=e):Aj(e,dj)>Aj(lj,dj)&&(lj=e)}else yj.push(bj=[lj=e,dj=e]);t<fj&&(fj=t),t>pj&&(pj=t),gj=n,hj=e}function Ej(){wj.point=kj}function Sj(){bj[0]=lj,bj[1]=dj,wj.point=Oj,gj=null}function Cj(e,t){if(gj){var n=e-hj;xj.add(Ib(n)>180?n+(n>0?360:-360):n)}else mj=e,vj=t;aj.point(e,t),kj(e,t)}function _j(){aj.lineStart()}function jj(){Cj(mj,vj),aj.lineEnd(),Ib(xj)>1e-6&&(lj=-(dj=180)),bj[0]=lj,bj[1]=dj,gj=null}function Aj(e,t){return(t-=e)<0?t+360:t}function Tj(e,t){return e[0]-t[0]}function Nj(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var Rj,Dj,Ij,Mj,Fj,Pj,zj,Lj,Bj,Wj,Uj,Vj,Hj,qj,Gj,$j,Kj={sphere:Kb,point:Xj,lineStart:Jj,lineEnd:eA,polygonStart:function(){Kj.lineStart=tA,Kj.lineEnd=nA},polygonEnd:function(){Kj.lineStart=Jj,Kj.lineEnd=eA}};function Xj(e,t){e*=Db;var n=Pb(t*=Db);Yj(n*Pb(e),n*Ub(e),Ub(t))}function Yj(e,t,n){++Rj,Ij+=(e-Ij)/Rj,Mj+=(t-Mj)/Rj,Fj+=(n-Fj)/Rj}function Jj(){Kj.point=Zj}function Zj(e,t){e*=Db;var n=Pb(t*=Db);qj=n*Pb(e),Gj=n*Ub(e),$j=Ub(t),Kj.point=Qj,Yj(qj,Gj,$j)}function Qj(e,t){e*=Db;var n=Pb(t*=Db),r=n*Pb(e),i=n*Ub(e),a=Ub(t),o=Fb(Hb((o=Gj*a-$j*i)*o+(o=$j*r-qj*a)*o+(o=qj*i-Gj*r)*o),qj*r+Gj*i+$j*a);Dj+=o,Pj+=o*(qj+(qj=r)),zj+=o*(Gj+(Gj=i)),Lj+=o*($j+($j=a)),Yj(qj,Gj,$j)}function eA(){Kj.point=Xj}function tA(){Kj.point=rA}function nA(){iA(Vj,Hj),Kj.point=Xj}function rA(e,t){Vj=e,Hj=t,e*=Db,t*=Db,Kj.point=iA;var n=Pb(t);qj=n*Pb(e),Gj=n*Ub(e),$j=Ub(t),Yj(qj,Gj,$j)}function iA(e,t){e*=Db;var n=Pb(t*=Db),r=n*Pb(e),i=n*Ub(e),a=Ub(t),o=Gj*a-$j*i,u=$j*r-qj*a,s=qj*i-Gj*r,c=Hb(o*o+u*u+s*s),l=$b(c),f=c&&-l/c;Bj+=f*o,Wj+=f*u,Uj+=f*s,Dj+=l,Pj+=l*(qj+(qj=r)),zj+=l*(Gj+(Gj=i)),Lj+=l*($j+($j=a)),Yj(qj,Gj,$j)}function aA(e,t){return function(n,r,i){if(n){var a=J_(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}var oA=aA("area",(function(e){return ij.reset(),kb(e,aj),2*ij})),uA=aA("bounds",(function(e){var t,n,r,i,a,o,u;if(pj=dj=-(lj=fj=1/0),yj=[],kb(e,wj),n=yj.length){for(yj.sort(Tj),t=1,a=[r=yj[0]];t<n;++t)Nj(r,(i=yj[t])[0])||Nj(r,i[1])?(Aj(r[0],i[1])>Aj(r[0],r[1])&&(r[1]=i[1]),Aj(i[0],r[1])>Aj(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(u=Aj(r[1],i[0]))>o&&(o=u,lj=i[0],dj=r[1])}return yj=bj=null,lj===1/0||fj===1/0?[[NaN,NaN],[NaN,NaN]]:[[lj,fj],[dj,pj]]})),sA=aA("centroid",(function(e){Rj=Dj=Ij=Mj=Fj=Pj=zj=Lj=Bj=Wj=Uj=0,kb(e,Kj);var t=Bj,n=Wj,r=Uj,i=t*t+n*n+r*r;return i<1e-12&&(t=Pj,n=zj,r=Lj,Dj<1e-6&&(t=Ij,n=Mj,r=Fj),(i=t*t+n*n+r*r)<1e-12)?[NaN,NaN]:[Fb(n,t)*Rb,$b(r/Hb(i))*Rb]}));function cA(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function lA(e,t){return e===t||e!==e&&t!==t||(Object(Me.A)(e)?!(!Object(Me.A)(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!lA(e[n],t[n]))return!1;return!0}(e,t):!(!Object(Me.F)(e)||!Object(Me.F)(t))&&fA(e,t))}function fA(e,t){for(var n in e)if(!lA(e[n],t[n]))return!1;return!0}function dA(e){return function(t){return fA(e,t)}}var pA={};function hA(e){return e.data}function mA(e,t){var n=q_.call(t,e);return n.root&&n.root.lookup||pA}var vA="undefined"!==typeof window&&window||null;function gA(e,t,n,r){"Literal"!==t[0].type&&Object(Me.n)("First argument to data functions must be a string literal.");var i=t[0].value,a=":"+i;if(!Object(Me.v)(a,r))try{r[a]=n.getData(i).tuplesRef()}catch(o){}}function yA(e,t,n,r){if("Literal"===t[0].type)bA(n,r,t[0].value);else if("Identifier"===t[0].type)for(e in n.scales)bA(n,r,e)}function bA(e,t,n){var r="%"+n;if(!Object(Me.v)(t,r))try{t[r]=e.scaleRef(n)}catch(i){}}var xA={random:function(){return Ki()},cumulativeNormal:aa,cumulativeLogNormal:fa,cumulativeUniform:ga,densityNormal:ia,densityLogNormal:la,densityUniform:va,quantileNormal:oa,quantileLogNormal:da,quantileUniform:ya,sampleNormal:ra,sampleLogNormal:ca,sampleUniform:ma,isArray:Me.A,isBoolean:Me.B,isDate:Me.C,isDefined:function(e){return void 0!==e},isNumber:Me.E,isObject:Me.F,isRegExp:Me.G,isString:Me.H,isTuple:Ue,isValid:function(e){return null!=e&&e===e},toBoolean:Me.ab,toDate:Me.bb,toNumber:Me.cb,toString:Me.eb,flush:Me.u,lerp:Me.J,merge:function(){var e=[].slice.call(arguments);return e.unshift({}),Me.o.apply(null,e)},pad:Me.P,peek:Me.U,span:Me.X,inrange:Me.z,truncate:Me.fb,rgb:Im,lab:jg,hcl:Mg,hsl:Wm,luminance:H_,contrast:function(e,t){var n=H_(e),r=H_(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:Wo,format:function(e,t){return $_("format",Qh,t)(e)},utcFormat:function(e,t){return $_("utcFormat",ts,t)(e)},utcParse:function(e,t){return $_("utcParse",In,t)(e)},utcOffset:Ku,utcSequence:Ju,timeFormat:K_,timeParse:function(e,t){return $_("timeParse",Rn,t)(e)},timeOffset:$u,timeSequence:Yu,timeUnitSpecifier:Qu,monthFormat:function(e){return Y_(e,1,"%B")},monthAbbrevFormat:function(e){return Y_(e,1,"%b")},dayFormat:function(e){return Y_(0,2+e,"%A")},dayAbbrevFormat:function(e){return Y_(0,2+e,"%a")},quarter:Me.V,utcquarter:Me.hb,warn:function(){return cA(this.context.dataflow,"warn",arguments)},info:function(){return cA(this.context.dataflow,"info",arguments)},debug:function(){return cA(this.context.dataflow,"debug",arguments)},extent:Me.p,inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];var r=Object(Ca.a)(e,2),i=r[0],a=r[1],o=(new zs).set(i[0],i[1],a[0],a[1]);return qp(n||this.context.dataflow.scenegraph().root,o,function(e){var t=null;if(e){var n=Object(Me.i)(e.marktype),r=Object(Me.i)(e.markname);t=function(e){return(!n.length||n.some((function(t){return e.marktype===t})))&&(!r.length||r.some((function(t){return e.name===t})))}}return t}(t))},clampRange:Me.j,pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){return vA?vA.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){return vA?[vA.innerWidth,vA.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return Mh(e||0,t||0,n||0)},setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(Me.gb).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?ol(n,t=t||Xc(e)):e}},panLinear:Me.Q,panLog:Me.R,panPow:Me.S,panSymlog:Me.T,zoomLinear:Me.lb,zoomLog:Me.mb,zoomPow:Me.nb,zoomSymlog:Me.ob,encode:function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,a){var o,u,s=this.context.dataflow,c=this.context.data[e],l=c.input,f=c.changes,d=s.stamp();if(!1===s._trigger||!(l.value.length||t||r))return 0;if((!f||f.stamp<d)&&(c.changes=f=s.changeset(),f.stamp=d,s.runAfter((function(){c.modified=!0,s.pulse(l,f).run()}),!0,1)),n&&(o=!0===n?Me.gb:Object(Me.A)(n)||Ue(n)?n:dA(n),f.remove(o)),t&&f.insert(t),r&&(o=dA(r),l.value.some(o)?f.remove(o):f.insert(r)),i)for(u in a)f.modify(i,u,a[u]);return 1}},wA=["view","item","group","xy","x","y"],OA={};function kA(e,t,n){return 1===arguments.length?xA[e]:(xA[e]=t,n&&(OA[e]=n),SA&&(SA.functions[e]="this."+e),this)}kA("bandwidth",(function(e,t){var n=J_(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),yA),kA("copy",(function(e,t){var n=J_(e,(t||this).context);return n?n.copy():void 0}),yA),kA("domain",(function(e,t){var n=J_(e,(t||this).context);return n?n.domain():[]}),yA),kA("range",(function(e,t){var n=J_(e,(t||this).context);return n&&n.range?n.range():[]}),yA),kA("invert",(function(e,t,n){var r=J_(e,(n||this).context);return r?Object(Me.A)(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),yA),kA("scale",(function(e,t,n){var r=J_(e,(n||this).context);return r&&void 0!==t?r(t):void 0}),yA),kA("gradient",(function(e,t,n,r,i){e=J_(e,(i||this).context);var a=Hs(t,n),o=e.domain(),u=o[0],s=Object(Me.U)(o),c=Me.x;return s-u?c=ry(e,u,s):e=(e.interpolator?Zv("sequential")().interpolator(e.interpolator()):Zv("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,s=1]),e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==Object(Me.U)(o)&&o.push(s)),o.forEach((function(t){return a.stop(c(t),e(t))})),a}),yA),kA("geoArea",oA,yA),kA("geoBounds",uA,yA),kA("geoCentroid",sA,yA),kA("geoShape",(function(e,t,n){var r=J_(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),yA),kA("indata",(function(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){"Literal"!==t[0].type&&Object(Me.n)("First argument to indata must be a string literal."),"Literal"!==t[1].type&&Object(Me.n)("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,o="@"+a;Object(Me.v)(o,r)||(r[o]=n.getData(i).indataRef(n,a))})),kA("data",q_,gA),kA("treePath",(function(e,t,n){var r=mA(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(hA):void 0}),gA),kA("treeAncestors",(function(e,t){var n=mA(e,this)[t];return n?n.ancestors().map(hA):void 0}),gA),kA("vlSelectionTest",(function(e,t,n){for(var r,i,a,o,u,s=this.context.data[e],c=s?s.values.value:[],l=s?s["index:unit"]&&s["index:unit"].value:void 0,f="intersect"===n,d=c.length,p=0;p<d;++p)if(r=c[p],l&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(u=B_(t,r),i[o]=u?-1:++a,u&&1===l.size)return!0;if(!u&&a===l.get(o).count)return!1}else if(f^(u=B_(t,r)))return u;return d&&f}),U_),kA("vlSelectionResolve",(function(e,t,n){for(var r,i,a,o,u,s,c,l,f,d,p,h=this.context.data[e],m=h?h.values.value:[],v={},g={},y={},b=m.length,x=0;x<b;++x){for(o=(r=m[x]).unit,i=r.fields,a=r.values,d=0,p=i.length;d<p;++d)u=i[d],c=(s=v[u.field]||(v[u.field]={}))[o]||(s[o]=[]),y[u.field]=l=u.type.charAt(0),f=W_[l+"_union"],s[o]=f(c,Object(Me.i)(a[d]));n&&(c=g[o]||(g[o]=[])).push(Object(Me.i)(a).reduce((function(e,t,n){return e[i[n].field]=t,e}),{}))}return t=t||"union",Object.keys(v).forEach((function(e){v[e]=Object.keys(v[e]).map((function(t){return v[e][t]})).reduce((function(n,r){return void 0===n?r:W_[y[e]+"_"+t](n,r)}))})),m=Object.keys(g),n&&m.length&&(v.vlMulti="union"===t?Object(su.a)({},"or",m.reduce((function(e,t){return e.push.apply(e,g[t]),e}),[])):Object(su.a)({},"and",m.map((function(e){return Object(su.a)({},"or",g[e])})))),v}),U_);var EA={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_["+Object(Me.Z)("$"+e)+"]"},functions:function(e){var t=L_(e);for(var n in wA.forEach((function(e){return t[e]="event.vega."+e})),xA)t[n]="this."+n;return t},constants:z_,visitors:OA},SA=function(e){var t=(e=e||{}).whitelist?Object(Me.db)(e.whitelist):{},n=e.blacklist?Object(Me.db)(e.blacklist):{},r=e.constants||z_,i=(e.functions||L_)(f),a=e.globalvar,o=e.fieldvar,u={},s={},c=0,l=Object(Me.D)(a)?a:function(e){return a+'["'+e+'"]'};function f(e){if(Object(Me.H)(e))return e;var t=d[e.type];return null==t&&Object(Me.n)("Unsupported type: "+e.type),t(e)}var d={Literal:function(e){return e.raw},Identifier:function(e){var i=e.name;return c>0?i:Object(Me.v)(n,i)?Object(Me.n)("Illegal identifier: "+i):Object(Me.v)(r,i)?r[i]:Object(Me.v)(t,i)?i:(u[i]=1,l(i))},MemberExpression:function(e){var t=!e.computed,n=f(e.object);t&&(c+=1);var r=f(e.property);return n===o&&(s[function(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(c-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&Object(Me.n)("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=Object(Me.v)(i,t)&&i[t];return r||Object(Me.n)("Unrecognized function: "+t),Object(Me.D)(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(f).join(",")+"]"},BinaryExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+f(e.argument)+")"},ConditionalExpression:function(e){return"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")"},LogicalExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(f).join(",")+"}"},Property:function(e){c+=1;var t=f(e.key);return c-=1,t+":"+f(e.value)}};function p(e){var t={code:f(e),globals:Object.keys(u),fields:Object.keys(s)};return u={},s={},t}return p.functions=i,p.constants=r,p}(EA);function CA(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function _A(e,t){return CA(["event"],e,t)}function jA(e,t){return CA(["item","_"],e,t)}function AA(e,t,n){var r,i;for(r in n=n||{},e)i=e[r],n[r]=Object(Me.A)(i)?i.map((function(e){return TA(e,t,n)})):TA(i,t,n);return n}function TA(e,t,n){if(!e||!Object(Me.F)(e))return e;for(var r,i=0,a=NA.length;i<a;++i)if(r=NA[i],Object(Me.v)(e,r.key))return r.parse(e,t,n);return e}var NA=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||Object(Me.n)("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Object(Me.I)(e.$key,e.$flat))}},{key:"$expr",parse:function(e,t,n){e.$params&&AA(e.$params,t,n);var r="e:"+e.$expr+"_"+e.$name;return t.fn[r]||(t.fn[r]=Object(Me.f)(function(e,t){return CA(["datum","_"],e,t)}(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Object(Me.t)(e.$field,e.$name))}},{key:"$encode",parse:function(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=Object(Me.f)(jA(r.$expr,t),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Object(Me.i)(e.$compare).map((function(e){return e&&e.$tupleid?Ve:e}));return t.fn[n]||(t.fn[n]=Object(Me.k)(r,e.$order))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,i){var a=MA(n,t.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}},{key:"$tupleid",parse:function(){return Ve}}];function RA(e){return(e+"").toLowerCase()}var DA=function(e,t){"operator"!==RA(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?function(e,t){return CA(["_"],e,t)}(e.update,t):null)};var IA=function(e,t){var n=Object(Me.F)(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,o=void 0;r||Object(Me.n)("Source not defined: "+e.source),i=e.target&&e.target.$expr?_A(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=AA(a.$params,t)),a=function(e,t){return CA(["_","event"],e,t)}(a.$expr,t)),t.update(e,r,i,a,o)},MA=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach((function(e){DA(e,t)})),n.forEach((function(e){!function(e,t){if(e.params){var n=t.get(e.id);n||Object(Me.n)("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(AA(e.params,t),e.react,e.initonly))}}(e,t)})),(e.streams||[]).forEach((function(e){!function(e,t){var n,r=null!=e.filter?_A(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(i=(n=e.merge.map(t.get.bind(t)))[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&Object(Me.n)("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}(e,t)})),(e.updates||[]).forEach((function(e){IA(e,t)})),t.resolve()},FA={skip:!0};var PA=function(e,t,n){return new zA(e,t,n)};function zA(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function LA(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}zA.prototype=LA.prototype={fork:function(){var e=new LA(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),"collect"===RA(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.preload(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push((function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)}))}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach((function(e){n[e]=t}))},resolve:function(){return(this.unresolved||[]).forEach((function(e){e()})),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[RA(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((function(e){n.update(t.signals[e],i[e],FA)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(Me.gb).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}};var BA={skip:!0};function WA(e,t){var n=e.autosize(),r=e.padding();return t-(n&&"padding"===n.contains?r.left+r.right:0)}function UA(e,t){var n=e.autosize(),r=e.padding();return t-(n&&"padding"===n.contains?r.top+r.bottom:0)}function VA(e,t){return t.modified&&Object(Me.A)(t.input.value)&&e.indexOf("_:vega:_")}function HA(e,t){return!("parent"===e||t instanceof wi.proxy)}var qA=function(e,t,n,r){var i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":Object(Me.A)(e)?GA(e):Object(Me.F)(e)&&!Object(Me.C)(e)?(t=e,Object.keys(t).map((function(e){var n=t[e];return e+": "+(Object(Me.A)(n)?GA(n):$A(n))})).join("\n")):e+"";var t}(r))};function GA(e){return"["+e.map($A).join(", ")+"]"}function $A(e){return Object(Me.A)(e)?"[\u2026]":Object(Me.F)(e)&&!Object(Me.C)(e)?"{\u2026}":e}function KA(e,t){t=t||{},vi.call(this),t.loader&&this.loader(t.loader),t.logger&&this.logger(t.logger),null!=t.logLevel&&this.logLevel(t.logLevel),this._el=null,this._elBind=null,this._renderType=t.renderer||Up.Canvas,this._scenegraph=new Vd;var n=this._scenegraph.root;this._renderer=null,this._tooltip=t.tooltip||qA,this._redraw=!0,this._handler=(new rp).scene(n),this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[],this._eventConfig=function(e){var t=Object(Me.o)({defaults:{}},e),n=function(e,t){t.forEach((function(t){Object(Me.A)(e[t])&&(e[t]=Object(Me.db)(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig);var r=function(e,t,n){return MA(t,PA(e,wi,n||xA))}(this,e,t.functions);this._runtime=r,this._signals=r.signals,this._bind=(e.bindings||[]).map((function(e){return{state:null,param:Object(Me.o)({},e)}})),r.root&&r.root.set(n),n.source=r.data.root.input,this.pulse(r.data.root.input,this.changeset().insert(n.items)),this._width=this.width(),this._height=this.height(),this._viewWidth=WA(this,this._width),this._viewHeight=UA(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,i=t.padding;function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(function(t){e._width=t.size,e._viewWidth=WA(e,t.size),a()}),{size:n}),e._resizeHeight=e.add(null,(function(t){e._height=t.size,e._viewHeight=UA(e,t.size),a()}),{size:r});var o=e.add(null,a,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}(this),function(e){e.add(null,(function(t){return e._background=t.bg,e._resize=1,t.bg}),{bg:e._signals.background})}(this),aC(this),this.description(e.description),t.hover&&this.hover(),t.container&&this.initialize(t.container,t.bind)}var XA=Object(Me.y)(KA,vi);function YA(e,t){return Object(Me.v)(e._signals,t)?e._signals[t]:Object(Me.n)("Unrecognized signal name: "+Object(Me.Z)(t))}function JA(e,t){var n=(e._targets||[]).filter((function(e){var n=e._update;return n&&n.handler===t}));return n.length?n[0]:null}function ZA(e,t,n,r){var i=JA(n,r);return i||((i=_C(this,(function(){r(t,n.value)}))).handler=r,e.on(n,null,i)),e}function QA(e,t,n){var r=JA(t,n);return r&&t._targets.remove(r),e}XA.evaluate=function(){var e=Object(Pe.a)(x.a.mark((function e(t,n,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vi.prototype.evaluate.call(this,t,n);case 2:if(!this._redraw&&!this._resize){e.next=14;break}if(e.prev=3,!this._renderer){e.next=8;break}return this._resize&&(this._resize=0,fC(this)),e.next=8,this._renderer.renderAsync(this._scenegraph.root);case 8:this._redraw=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.error(e.t0);case 14:return r&&ze(this,r),e.abrupt("return",this);case 16:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),XA.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},XA.description=function(e){if(arguments.length){var t=null!=e?e+"":null;return t!==this._desc&&iC(this._el,this._desc=t),this}return this._desc},XA.container=function(){return this._el},XA.scenegraph=function(){return this._scenegraph},XA.origin=function(){return this._origin.slice()},XA.signal=function(e,t,n){var r=YA(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},XA.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},XA.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},XA.padding=function(e){return arguments.length?this.signal("padding",TC(e)):TC(this.signal("padding"))},XA.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},XA.background=function(e){return arguments.length?this.signal("background",e):this.signal("background")},XA.renderer=function(e){return arguments.length?(Hp(e)||Object(Me.n)("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},XA.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},XA.loader=function(e){return arguments.length?(e!==this._loader&&(vi.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},XA.resize=function(){return this._autosize=1,this.touch(YA(this,"autosize"))},XA._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},XA._resizeView=function(e,t,n,r,i,a){this.runAfter((function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal("width",n,BA),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal("height",r,BA),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter((function(e){return e.resize()}))}),!1,1)},XA.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=_C(this,t)).raw=t),this._handler.on(e,r),this},XA.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},XA.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},XA.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},XA.addSignalListener=function(e,t){return ZA(this,e,YA(this,e),t)},XA.removeSignalListener=function(e,t){return QA(this,YA(this,e),t)},XA.addDataListener=function(e,t){return ZA(this,e,oC(this,e).values,t)},XA.removeDataListener=function(e,t){return QA(this,oC(this,e).values,t)},XA.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},XA.timer=function(e,t){this._timers.push(function(e,t,n){var r=new Ok,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?xk():+n,r.restart((function a(o){o+=i,r.restart(a,i+=t,n),e(o)}),t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},XA.events=function(e,t,n){var r,i=this,a=new ut(n),o=function(n,r){i.runAsync(null,(function(){"view"===e&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),a.receive(dC(i,n,r))}))};if("timer"===e)hC(i,"timer",t)&&i.timer(o,t);else if("view"===e)hC(i,"view",t)&&i.addEventListener(t,o,pC);else if("window"===e?hC(i,"window",t)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&hC(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a},XA.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=a.length;--e>=0;)for(t=(n=a[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},XA.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",mC),vC,gC(e)),this.on(this.events("view","mouseout",mC),vC,gC(t)),this},XA.data=function(e,t){return arguments.length<2?oC(this,e).values.value:uC.call(this,e,Je().remove(Me.gb).insert(t))},XA.change=uC,XA.insert=function(e,t){return uC.call(this,e,Je().insert(t))},XA.remove=function(e,t){return uC.call(this,e,Je().remove(t))},XA.scale=function(e){var t=this._runtime.scales;return Object(Me.v)(t,e)||Object(Me.n)("Unrecognized scale or projection: "+e),t[e].value},XA.initialize=function(e,t){var n=this,r=n._renderType,i=n._eventConfig.bind,a=Hp(r);e=n._el=e?jC(n,e):null,function(e){var t=e.container();t&&(t.setAttribute("role","figure"),iC(t,e.description()))}(n),a||n.error("Unrecognized renderer type: "+r);var o=a.handler||rp,u=e?a.renderer:a.headless;return n._renderer=u?CC(n,n._renderer,e,u):null,n._handler=function(e,t,n,r){var i=new r(e.loader(),_C(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,lC(e),e);return t&&t.handlers().forEach((function(e){i.on(e.type,e.handler)})),i}(n,n._handler,e,o),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=jC(n,t):e.appendChild(yC("div",{class:"vega-bindings"})),n._bind.forEach((function(e){e.param.element&&"container"!==i&&(e.element=jC(n,e.param.element))})),n._bind.forEach((function(e){bC(n,e.element||t,e)}))),n},XA.toImageURL=function(e,t){return DC.apply(this,arguments)},XA.toCanvas=function(e,t){return MC.apply(this,arguments)},XA.toSVG=function(e){return FC.apply(this,arguments)},XA.getState=function(e){return this._runtime.getState(e||{data:VA,signals:HA,recurse:!0})},XA.setState=function(e){return this.runAsync(null,(function(t){t._trigger=!1,t._runtime.setState(e)}),(function(e){e._trigger=!0})),this};var eT=function(e){return Object(Me.F)(e)?e:{type:e||"pad"}},tT=function(e){return+e||0},nT=function(e){return Object(Me.F)(e)?e.signal?e:{top:tT(e.top),bottom:tT(e.bottom),left:tT(e.left),right:tT(e.right)}:{top:t=tT(e),bottom:t,left:t,right:t};var t},rT=["value","update","init","react","bind"];function iT(e,t){Object(Me.n)(e+' for "outer" push: '+Object(Me.Z)(t))}var aT=function(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||iT("No prior signal definition",n),rT.forEach((function(t){void 0!==e[t]&&iT("Invalid property ",t)}));else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}},oT=function(e,t,n){var r,i,a={};try{e=Object(Me.H)(e)?e:Object(Me.Z)(e)+"",r=P_(e)}catch(o){Object(Me.n)("Expression parse error: "+e)}return r.visit((function(e){if("CallExpression"===e.type){var n=e.callee.name,r=EA.visitors[n];r&&r(n,e.arguments,t,a)}})),(i=SA(r)).globals.forEach((function(e){var n="$"+e;!Object(Me.v)(a,n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))})),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}};function uT(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function sT(e,t,n,r){return new uT(e,t,n,r)}function cT(e,t){return sT("operator",e,t)}function lT(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function fT(e,t){return t?{$field:e,$name:t}:{$field:e}}var dT=fT("key");function pT(e,t){return{$compare:e,$order:t}}function hT(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}function mT(e){return e&&e.signal}function vT(e){if(mT(e))return!0;if(Object(Me.F)(e))for(var t in e)if(vT(e[t]))return!0;return!1}function gT(e,t){return null!=e?e:t}function yT(e){return e&&e.signal||e}function bT(e,t){return(e.merge?xT:e.stream?wT:e.type?OT:Object(Me.n)("Invalid stream specification: "+Object(Me.Z)(e)))(e,t)}function xT(e,t){var n=kT({merge:e.merge.map((function(e){return bT(e,t)}))},e,t);return t.addStream(n).id}function wT(e,t){var n=kT({stream:bT(e.stream,t)},e,t);return t.addStream(n).id}function OT(e,t){var n,r,i;return"timer"===e.type?(n=t.event("timer",e.throttle),e={between:e.between,filter:e.filter}):n=t.event("scope"===(i=e.source)?"view":i||"view",e.type),r=kT({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function kT(e,t,n){var r=t.between;return r&&(2!==r.length&&Object(Me.n)('Stream "between" parameter must have 2 entries: '+Object(Me.Z)(t)),e.between=[bT(r[0],n),bT(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),"scope"===t.source&&r.push("inScope(event.item)"),r.length&&(e.filter=oT("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}var ET,ST,CT=function(e,t,n){return ET=t||_T,ST=n||AT,NT(e.trim()).map(RT)},_T="view",jT=/[[\]{}]/,AT={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function TT(e,t,n,r,i){for(var a,o=0,u=e.length;t<u;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function NT(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=TT(e,i,",","[{","]}"),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function RT(e){return"["===e[0]?function(e){var t,n,r=e.length,i=1;if((i=TT(e,i,"]","[","]"))===r)throw"Empty between selector: "+e;if(2!==(t=NT(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(i+1).trim())[0])throw"Expected '>' after between selector: "+e;if(t=t.map(RT),(n=RT(e.slice(1).trim())).between)return{between:t,stream:n};n.between=t;return n}(e):function(e){var t,n,r={source:ET},i=[],a=[0,0],o=0,u=0,s=e.length,c=0;if("}"===e[s-1]){if(!((c=e.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+e;try{a=function(e){var t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((function(t){var n=+t;if(n!==n)throw e;return n}))}(e.substring(c+1,s-1))}catch(f){throw"Invalid throttle specification: "+e}e=e.slice(0,c).trim(),s=e.length,c=0}if(!s)throw e;"@"===e[0]&&(o=++c);(t=TT(e,c,":"))<s&&(i.push(e.substring(u,t).trim()),u=c=++t);if((c=TT(e,c,"["))===s)i.push(e.substring(u,s).trim());else if(i.push(e.substring(u,c).trim()),n=[],(u=++c)===s)throw"Unmatched left bracket: "+e;for(;c<s;){if((c=TT(e,c,"]"))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,c).trim()),c<s-1&&"["!==e[++c])throw"Expected left bracket: "+e;u=++c}if(!(s=i.length)||jT.test(i[s-1]))throw"Invalid event selector: "+e;s>1?(r.type=i[1],o?r.markname=i[0].slice(1):(l=i[0],ST[l]?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var l;"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);a[0]&&(r.throttle=a[0]);a[1]&&(r.debounce=a[1]);return r}(e)}var DT=function(e,t,n){var r=e.events,i=e.update,a=e.encode,o=[],u={target:n};r||Object(Me.n)("Signal update missing events specification."),Object(Me.H)(r)&&(r=CT(r,t.isSubscope()?"scope":"view")),r=Object(Me.i)(r).filter((function(e){return e.signal||e.scale?(o.push(e),0):1})),o.length>1&&(o=[IT(o)]),r.length&&o.push(r.length>1?{merge:r}:r[0]),null!=a&&(i&&Object(Me.n)("Signal encode and update are mutually exclusive."),i="encode(item(),"+Object(Me.Z)(a)+")"),u.update=Object(Me.H)(i)?oT(i,t,"var datum=event.item&&event.item.datum;"):null!=i.expr?oT(i.expr,t,"var datum=event.item&&event.item.datum;"):null!=i.value?i.value:null!=i.signal?{$expr:"_.value",$params:{value:t.signalRef(i.signal)}}:Object(Me.n)("Invalid signal update specification."),e.force&&(u.options={force:!0}),o.forEach((function(e){t.addUpdate(Object(Me.o)(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):bT(e,t)}}(e,t),u))}))};function IT(e){return{signal:"["+e.map((function(e){return e.scale?'scale("'+e.scale+'")':e.signal}))+"]"}}function MT(e){return function(t,n,r){return sT(e,n,t||void 0,r)}}var FT=MT("aggregate"),PT=MT("axisticks"),zT=MT("bound"),LT=MT("collect"),BT=MT("compare"),WT=MT("datajoin"),UT=MT("encode"),VT=MT("expression"),HT=(MT("extent"),MT("facet")),qT=MT("field"),GT=MT("key"),$T=MT("legendentries"),KT=MT("load"),XT=MT("mark"),YT=MT("multiextent"),JT=MT("multivalues"),ZT=MT("overlap"),QT=MT("params"),eN=MT("prefacet"),tN=MT("projection"),nN=MT("proxy"),rN=MT("relay"),iN=MT("render"),aN=MT("scale"),oN=MT("sieve"),uN=MT("sortitems"),sN=MT("viewlayout"),cN=MT("values"),lN=0,fN={min:"min",max:"max",count:"sum"};function dN(e,t){var n,r,i=t.getScale(e.name).params;for(n in i.domain=vN(e.domain,e,t),null!=e.range&&(i.range=function e(t,n,r){var i=t.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(Object(Me.H)(i)){if(a&&Object(Me.v)(a,i))return t=Object(Me.o)({},t,{range:a[i]}),e(t,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=ng(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(Me.n)("Unrecognized scale range value: "+Object(Me.Z)(i))}else{if(i.scheme)return r.scheme=Object(Me.A)(i.scheme)?hN(i.scheme,n):pN(i.scheme,n),i.extent&&(r.schemeExtent=hN(i.extent,n)),void(i.count&&(r.schemeCount=pN(i.count,n)));if(i.step)return void(r.rangeStep=pN(i.step,n));if(ng(t.type)&&!Object(Me.A)(i))return vN(i,t,n);Object(Me.A)(i)||Object(Me.n)("Unsupported range type: "+Object(Me.Z)(i))}return i.map((function(e){return(Object(Me.A)(e)?hN:pN)(e,n)}))}(e,t,i)),null!=e.interpolate&&function(e,t){t.interpolate=pN(e.type||e),null!=e.gamma&&(t.interpolateGamma=pN(e.gamma))}(e.interpolate,i),null!=e.nice&&(i.nice=(r=e.nice,Object(Me.F)(r)?{interval:pN(r.interval),step:pN(r.step)}:pN(r))),null!=e.bins&&(i.bins=function(e,t){return e.signal||Object(Me.A)(e)?hN(e,t):t.objectProperty(e)}(e.bins,t)),e)Object(Me.v)(i,n)||"name"===n||(i[n]=pN(e[n],t))}function pN(e,t){return Object(Me.F)(e)?e.signal?t.signalRef(e.signal):Object(Me.n)("Unsupported object: "+Object(Me.Z)(e)):e}function hN(e,t){return e.signal?t.signalRef(e.signal):e.map((function(e){return pN(e,t)}))}function mN(e){Object(Me.n)("Can not find data set: "+Object(Me.Z)(e))}function vN(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(Object(Me.A)(e)?gN:e.fields?bN:yN)(e,t,n);null==t.domainMin&&null==t.domainMax||Object(Me.n)("No scale domain defined for domainMin/domainMax to override.")}function gN(e,t,n){return e.map((function(e){return pN(e,n)}))}function yN(e,t,n){var r=n.getData(e.data);return r||mN(e.data),ng(t.type)?r.valuesRef(n,e.field,wN(e.sort,!1)):og(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function bN(e,t,n){var r=e.data,i=e.fields.reduce((function(e,t){return t=Object(Me.H)(t)?{data:r,field:t}:Object(Me.A)(t)||t.signal?function(e,t){var n="_:vega:_"+lN++,r=LT({});if(Object(Me.A)(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+Object(Me.Z)(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,oN({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e}),[]);return(ng(t.type)?xN:og(t.type)?ON:kN)(e,n,i)}function xN(e,t,n){var r,i,a,o,u,s=wN(e.sort,!0);return r=n.map((function(e){var n=t.getData(e.data);return n||mN(e.data),n.countsRef(t,e.field,s)})),i={groupby:dT,pulse:r},s&&(a=s.op||"count",u=s.field?hT(a,s.field):"count",i.ops=[fN[a]],i.fields=[t.fieldRef(u)],i.as=[u]),a=t.add(FT(i)),o=t.add(LT({pulse:lT(a)})),u=t.add(cN({field:dT,sort:t.sortRef(s),pulse:lT(o)})),lT(u)}function wN(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!fN[e.op]&&Object(Me.n)("Multiple domain scales can not be sorted using "+e.op):Object(Me.n)("No field provided for sort aggregate op: "+e.op):Object(Me.F)(e)?e.field="key":e={field:"key"}),e}function ON(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||mN(e.data),n.domainRef(t,e.field)}));return lT(t.add(JT({values:r})))}function kN(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||mN(e.data),n.extentRef(t,e.field)}));return lT(t.add(YT({extents:r})))}function EN(e,t,n){return Object(Me.A)(e)?e.map((function(e){return EN(e,t,n)})):Object(Me.F)(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:Object(Me.n)("Unsupported parameter object: "+Object(Me.Z)(e)):e}var SN="value",CN=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],_N={name:1,style:1,interactive:1},jN={value:0},AN={value:1},TN=Object(Me.db)(["rule"]),NN=Object(Me.db)(["group","image","rect"]),RN=function(e,t,n,r){var i=oT(e,t);return i.$fields.forEach((function(e){r[e]=1})),Object(Me.o)(n,i.$params),i.$expr},DN=function(e,t,n,r){return function e(t,n,r,i){var a,o,u;if(t.signal)a="datum",u=RN(t.signal,n,r,i);else if(t.group||t.parent){for(o=Math.max(1,t.level||1),a="item";o-- >0;)a+=".mark.group";t.parent?(u=t.parent,a+=".datum"):u=t.group}else t.datum?(a="datum",u=t.datum):Object(Me.n)("Invalid field reference: "+Object(Me.Z)(t));t.signal||(Object(Me.H)(u)?(i[u]=1,u=Object(Me.Y)(u).map(Me.Z).join("][")):u=e(u,n,r,i));return a+"["+u+"]"}(Object(Me.F)(e)?e:{datum:e},t,n,r)};var IN=function(e,t,n,r){return Object(Me.F)(e)?"("+PN(null,e,t,n,r)+")":e},MN=function(e,t,n,r,i){var a,o,u,s=FN(e.scale,n,r,i);return null!=e.range?(o=s+".range()",t=0===(a=+e.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=s+"("+t+")"),e.band&&(u=function(e,t){if(!Object(Me.H)(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(o=s+".bandwidth",a=e.band.signal?o+"()*"+IN(e.band,n,r,i):o+"()"+(1===(a=+e.band)?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+s+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t};function FN(e,t,n,r){var i;if(Object(Me.H)(e))i="%"+e,Object(Me.v)(n,i)||(n[i]=t.scaleRef(e)),i=Object(Me.Z)(i);else{for(i in t.scales)n["%"+i]=t.scaleRef(i);i=Object(Me.Z)("%")+"+"+(e.signal?"("+RN(e.signal,t,n,r)+")":DN(e,t,n,r))}return"_["+i+"]"}var PN=function(e,t,n,r,i){if(null!=t.gradient)return function(e,t,n,r){return"this.gradient("+FN(e.gradient,t,n,r)+","+Object(Me.Z)(e.start)+","+Object(Me.Z)(e.stop)+","+Object(Me.Z)(e.count)+")"}(t,n,r,i);var a=t.signal?RN(t.signal,n,r,i):t.color?function(e,t,n,r){function i(e,i,a,o){return"this."+e+"("+[PN(null,i,t,n,r),PN(null,a,t,n,r),PN(null,o,t,n,r)].join(",")+").toString()"}return e.c?i("hcl",e.h,e.c,e.l):e.h||e.s?i("hsl",e.h,e.s,e.l):e.l||e.a?i("lab",e.l,e.a,e.b):e.r||e.g||e.b?i("rgb",e.r,e.g,e.b):null}(t.color,n,r,i):null!=t.field?DN(t.field,n,r,i):void 0!==t.value?Object(Me.Z)(t.value):void 0;return null!=t.scale&&(a=MN(t,a,n,r,i)),void 0===a&&(a=null),null!=t.exponent&&(a="Math.pow("+a+","+IN(t.exponent,n,r,i)+")"),null!=t.mult&&(a+="*"+IN(t.mult,n,r,i)),null!=t.offset&&(a+="+"+IN(t.offset,n,r,i)),t.round&&(a="Math.round("+a+")"),a},zN=function(e,t,n){var r=e+"["+Object(Me.Z)(t)+"]";return"$=".concat(n,";if(").concat(r,"!==$)").concat(r,"=$,m=1;")},LN=function(e,t,n,r,i){var a="";return t.forEach((function(t){var o=PN(e,t,n,r,i);a+=t.test?RN(t.test,n,r,i)+"?"+o+":":o})),":"===Object(Me.U)(a)&&(a+="null"),zN("o",e,a)};function BN(e,t,n,r){var i,a,o,u={},s="var o=item,datum=o.datum,m=0,$;";for(i in e)a=e[i],Object(Me.A)(a)?s+=LN(i,a,r,n,u):(o=PN(i,a,r,n,u),s+=zN("o",i,o));return s+=function(e,t){var n="";return TN[t]||(e.x2&&(e.x?(NN[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(NN[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(e,t),{$expr:s+="return m;",$fields:Object.keys(u),$output:Object.keys(e)}}function WN(e){return Object(Me.F)(e)&&!Object(Me.A)(e)?Object(Me.o)({},e):{value:e}}function UN(e,t,n,r){return null!=n?(Object(Me.F)(n)&&!Object(Me.A)(n)?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function VN(e,t,n){for(var r in t)UN(e,r,t[r]);for(var i in n)UN(e,i,n[i],"update")}function HN(e,t,n){for(var r in t)n&&Object(Me.v)(n,r)||(e[r]=Object(Me.o)(e[r]||{},t[r]));return e}function qN(e,t,n,r,i,a){var o,u;for(u in(a=a||{}).encoders={$encode:o={}},e=function(e,t,n,r,i){var a,o,u,s={},c={};o="lineBreak","text"!==t||null==i[o]||$N(o,e)||GN(s,o,i[o]);("legend"==n||String(n).startsWith("axis"))&&(n=null);for(o in u="frame"===n?i.group:"mark"===n?Object(Me.o)({},i.mark,i[t]):null)$N(o,e)||("fill"===o||"stroke"===o)&&($N("fill",e)||$N("stroke",e))||GN(s,o,u[o]);for(o in Object(Me.i)(r).forEach((function(t){var n=i.style&&i.style[t];for(var r in n)$N(r,e)||GN(s,r,n[r])})),e=Object(Me.o)({},e),s)(u=s[o]).signal?(a=a||{})[o]=u:c[o]=u;e.enter=Object(Me.o)(c,e.enter),a&&(e.update=Object(Me.o)(a,e.update));return e}(e,t,n,r,i.config))o[u]=BN(e[u],t,a,i);return a}function GN(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}function $N(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var KN=function(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:HN(a,o,_N)}},XN=n(86);function YN(e,t){var n=function(n,r){return gT(e[n],gT(t[n],r))};return n.isVertical=function(n){return"vertical"===gT(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection))},n.gradientLength=function(){return gT(e.gradientLength,t.gradientLength||t.gradientWidth)},n.gradientThickness=function(){return gT(e.gradientThickness,t.gradientThickness||t.gradientHeight)},n.entryColumns=function(){return gT(e.columns,gT(t.columns,+n.isVertical(!0)))},n}function JN(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function ZN(e,t,n){return'item.anchor === "'.concat("start",'" ? ').concat(e,' : item.anchor === "').concat("end",'" ? ').concat(t," : ").concat(n)}var QN=ZN(Object(Me.Z)("left"),Object(Me.Z)("right"),Object(Me.Z)("center"));function eR(e,t){return t?e?Object(Me.F)(e)?Object(XN.a)({},e,{offset:eR(e.offset,t)}):{value:e,offset:t}:t:e}var tR=function(e,t,n,r){var i,a,o,u,s,c,l=YN(e,n),f=l.isVertical(),d=l.gradientThickness(),p=l.gradientLength();return f?(o=[0,1],u=[0,0],s=d,c=p):(o=[0,0],u=[1,0],s=p,c=d),VN(i={enter:a={opacity:jN,x:jN,y:jN,width:WN(s),height:WN(c)},update:Object(Me.o)({},a,{opacity:AN,fill:{gradient:t,start:o,stop:u}}),exit:{opacity:jN}},{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),KN("rect","legend-gradient",null,void 0,void 0,i,r)},nR=function(e,t,n,r,i){var a,o,u,s,c,l,f=YN(e,n),d=f.isVertical(),p=f.gradientThickness(),h=f.gradientLength(),m="";return d?(u="y",c="y2",s="x",l="width",m="1-"):(u="x",c="x2",s="y",l="height"),(o={opacity:jN,fill:{scale:t,field:SN}})[u]={signal:m+"datum.perc",mult:h},o[s]=jN,o[c]={signal:m+"datum.perc2",mult:h},o[l]=WN(p),VN(a={enter:o,update:Object(Me.o)({},o,{opacity:AN}),exit:{opacity:jN}},{stroke:f("gradientStrokeColor"),strokeWidth:f("gradientStrokeWidth")},{opacity:f("gradientOpacity")}),KN("rect","legend-band",null,SN,i,a,r)},rR="datum.".concat("perc",'<=0?"').concat("left",'":datum.').concat("perc",'>=1?"').concat("right",'":"').concat("center",'"'),iR="datum.".concat("perc",'<=0?"').concat("bottom",'":datum.').concat("perc",'>=1?"').concat("top",'":"').concat("middle",'"'),aR=function(e,t,n,r){var i,a,o,u,s,c=YN(e,t),l=c.isVertical(),f=WN(c.gradientThickness()),d=c.gradientLength(),p=c("labelOverlap"),h=c("labelSeparation"),m="";return VN(i={enter:a={opacity:jN},update:o={opacity:AN,text:{field:"label"}},exit:{opacity:jN}},{fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontStyle:c("labelFontStyle"),fontWeight:c("labelFontWeight"),limit:gT(e.labelLimit,t.gradientLabelLimit)}),l?(a.align={value:"left"},a.baseline=o.baseline={signal:iR},u="y",s="x",m="1-"):(a.align=o.align={signal:rR},a.baseline={value:"top"},u="x",s="y"),a[u]=o[u]={signal:m+"datum.perc",mult:d},a[s]=o[s]=f,f.offset=gT(e.labelOffset,t.gradientLabelOffset)||0,e=KN("text","legend-label","guide-label",SN,r,i,n),p&&(e.overlap={separation:h,method:p,order:"datum.index"}),e},oR=function(e,t,n,r,i,a,o,u){return{type:"group",name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:u}},uR=function(e,t,n,r,i){var a,o,u,s,c,l,f,d=YN(e,t),p=n.entries,h=!(!p||!p.interactive),m=p?p.name:void 0,v=d("clipHeight"),g=d("symbolOffset"),y={data:"value"},b={},x="(".concat(i,") ? datum.").concat("offset"," : datum.").concat("size"),w=v?WN(v):{field:"size"},O="datum.".concat("index"),k="max(1, ".concat(i,")");w.mult=.5,b={enter:a={opacity:jN,x:{signal:x,mult:.5,offset:g},y:w},update:o={opacity:AN,x:a.x,y:a.y},exit:{opacity:jN}};var E=null,S=null;return e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),VN(b,{fill:d("symbolFillColor",E),shape:d("symbolType"),size:d("symbolSize"),stroke:d("symbolStrokeColor",S),strokeDash:d("symbolDash"),strokeDashOffset:d("symbolDashOffset"),strokeWidth:d("symbolStrokeWidth")},{opacity:d("symbolOpacity")}),CN.forEach((function(t){e[t]&&(o[t]=a[t]={scale:e[t],field:SN})})),s=KN("symbol","legend-symbol",null,SN,y,b,n.symbols),v&&(s.clip=!0),(u=WN(g)).offset=d("labelOffset"),VN(b={enter:a={opacity:jN,x:{signal:x,offset:u},y:w},update:o={opacity:AN,text:{field:"label"},x:a.x,y:a.y},exit:{opacity:jN}},{align:d("labelAlign"),baseline:d("labelBaseline"),fill:d("labelColor"),fillOpacity:d("labelOpacity"),font:d("labelFont"),fontSize:d("labelFontSize"),fontStyle:d("labelFontStyle"),fontWeight:d("labelFontWeight"),limit:d("labelLimit")}),c=KN("text","legend-label","guide-label",SN,y,b,n.labels),b={enter:{noBound:{value:!v},width:jN,height:v?WN(v):jN,opacity:jN},exit:{opacity:jN},update:o={opacity:AN,row:{signal:null},column:{signal:null}}},d.isVertical(!0)?(l="ceil(item.mark.items.length / ".concat(k,")"),o.row.signal="".concat(O,"%").concat(l),o.column.signal="floor(".concat(O," / ").concat(l,")"),f={field:["row",O]}):(o.row.signal="floor(".concat(O," / ").concat(k,")"),o.column.signal="".concat(O," % ").concat(k),f={field:O}),o.column.signal="(".concat(i,")?").concat(o.column.signal,":").concat(O),(e=oR("scope",null,m,r={facet:{data:r,name:"value",groupby:"index"}},h,HN(b,p,_N),[s,c])).sort=f,e};var sR='item.orient === "left"',cR='item.orient === "right"',lR="(".concat(sR," || ").concat(cR,")"),fR="datum.vgrad && ".concat(lR),dR=ZN('"top"','"bottom"','"middle"'),pR=ZN('"right"','"left"','"center"'),hR="datum.vgrad && ".concat(cR," ? (").concat(pR,") : (").concat(lR," && !(datum.vgrad && ").concat(sR,')) ? "left" : ').concat(QN),mR="item._anchor || (".concat(lR,' ? "middle" : "start")'),vR="".concat(fR," ? (").concat(sR," ? -90 : 90) : 0"),gR="".concat(lR," ? (datum.vgrad ? (").concat(cR,' ? "bottom" : "top") : ').concat(dR,') : "top"'),yR=function(e,t){var n;return Object(Me.F)(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+bR(e.path)+")":e.sphere&&(n="geoShape("+bR(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e};function bR(e){return Object(Me.F)(e)&&e.signal?e.signal:Object(Me.Z)(e)}var xR=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?"group"===e.type?"scope":t||"mark":t},wR=function(e){return{marktype:e.type,name:e.name||void 0,role:e.role||xR(e),zindex:+e.zindex||void 0}},OR=function(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e},kR=function(e,t){var n=Oi(e.type);n||Object(Me.n)("Unrecognized transform type: "+Object(Me.Z)(e.type));var r=sT(n.type.toLowerCase(),null,ER(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r};function ER(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=SR(r,t,n);return o}function SR(e,t,n){var r=e.type,i=t[e.name];return"index"===r?function(e,t,n){Object(Me.H)(t.from)||Object(Me.n)('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){var r=t[e.name];return e.array?(Object(Me.A)(r)||Object(Me.n)("Expected an array of sub-parameters. Instead: "+Object(Me.Z)(r)),r.map((function(t){return _R(e,t,n)}))):_R(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!mT(i)?i.map((function(t){return CR(e,t,n)})):CR(e,i,n):void(e.required&&Object(Me.n)("Missing required "+Object(Me.Z)(t.type)+" parameter: "+Object(Me.Z)(e.name)))}function CR(e,t,n){var r=e.type;if(mT(t))return jR(r)?Object(Me.n)("Expression references can not be signals."):AR(r)?n.fieldRef(t):TR(r)?n.compareRef(t):n.signalRef(t.signal);var i,a=e.expr||AR(r);return a&&((i=t)&&i.expr)?n.exprRef(t.expr,t.as):a&&function(e){return e&&e.field}(t)?fT(t.field,t.as):jR(r)?oT(t,n):function(e){return"data"===e}(r)?lT(n.getData(t).values):AR(r)?fT(t):TR(r)?n.compareRef(t):t}function _R(e,t,n){var r,i,a,o,u;for(o=0,u=e.params.length;o<u;++o){for(a in(i=e.params[o]).key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||Object(Me.n)("Unsupported parameter: "+Object(Me.Z)(t)),r=Object(Me.o)(ER(i,t,n),i.key),lT(n.add(QT(r)))}function jR(e){return"expr"===e}function AR(e){return"field"===e}function TR(e){return"compare"===e}function NR(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:lT(t.getData(e.data).output)}function RR(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}RR.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],u=null;for(i&&"load"===i.type&&(i=t[1]),e.add(t[0]);r<n;++r)t[r].params.pulse=lT(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(u=t[r]);return new RR(e,i,o,a,u)};var DR=RR.prototype;function IR(e){return Object(Me.H)(e)?e:null}function MR(e,t,n){var r,i=hT(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function FR(e,t,n,r,i,a,o){var u,s,c=t[n]||(t[n]={}),l=function(e){return Object(Me.F)(e)?("descending"===e.order?"-":"+")+hT(e.op,e.field):""}(a),f=IR(i);if(null!=f&&(e=t.scope,u=c[f+=l?"|"+l:""]),!u){var d=a?{field:dT,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:lT(t.output)};l&&(d.sort=e.sortRef(a)),s=e.add(sT(r,void 0,d)),o&&(t.index[i]=s),u=lT(s),null!=f&&(c[f]=u)}return u}DR.countsRef=function(e,t,n){var r,i,a,o=this.counts||(this.counts={}),u=IR(t);return null!=u&&(e=this.scope,r=o[u]),r?n&&n.field&&MR(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:lT(this.output)},n&&n.field&&MR(e,a,n),i=e.add(FT(a)),r=e.add(LT({pulse:lT(i)})),r={agg:i,ref:lT(r)},null!=u&&(o[u]=r)),r.ref},DR.tuplesRef=function(){return lT(this.values)},DR.extentRef=function(e,t){return FR(e,this,"extent","extent",t,!1)},DR.domainRef=function(e,t){return FR(e,this,"domain","values",t,!1)},DR.valuesRef=function(e,t,n){return FR(e,this,"vals","values",t,n||!0)},DR.lookupRef=function(e,t){return FR(e,this,"lookup","tupleindex",t,!1)},DR.indataRef=function(e,t){return FR(e,this,"indata","tupleindex",t,!0,!0)};var PR=function(e,t,n){var r,i,a=e.remove,o=e.insert,u=e.toggle,s=e.modify,c=e.values,l=t.add(cT());r="if("+e.trigger+',modify("'+n+'",'+[o,a,u,s,c].map((function(e){return null==e?"null":e})).join(",")+"),0)",i=oT(r,t),l.update=i.$expr,l.params=i.$params},zR=function(e,t){var n,r,i,a,o,u,s,c,l,f,d,p,h,m,v=xR(e),g="group"===e.type,y=e.from&&e.from.facet,b=e.layout||"scope"===v||"frame"===v,x="mark"===v||b||y,w=e.overlap;i=function(e,t,n){var r,i,a,o,u;return e?(r=e.facet)&&(t||Object(Me.n)("Only group marks can be faceted."),null!=r.field?o=u=NR(r,n):(e.data?u=lT(n.getData(e.data).aggregate):((a=kR(Object(Me.o)({type:"aggregate",groupby:Object(Me.i)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),a.params.pulse=NR(r,n),o=u=lT(n.add(a))),i=n.keyRef(r.groupby,!0))):o=lT(n.add(LT(null,[{}]))),o||(o=NR(e,n)),{key:i,pulse:o,parent:u}}(e.from,g,t),f=lT(r=t.add(WT({key:i.key||(e.key?fT(e.key):void 0),pulse:i.pulse,clean:!g}))),r=a=t.add(LT({pulse:f})),r=t.add(XT({markdef:wR(e),interactive:OR(e.interactive,t),clip:yR(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:lT(r)})),d=lT(r),(r=o=t.add(UT(qN(e.encode,e.type,v,e.style,t,{mod:!1,pulse:d})))).params.parent=t.encode(),e.transform&&e.transform.forEach((function(e){var n=kR(e,t),i=n.metadata;(i.generates||i.changes)&&Object(Me.n)("Mark transforms should not generate new data."),i.nomod||(o.params.mod=!0),n.params.pulse=lT(r),t.add(r=n)})),e.sort&&(r=t.add(uN({sort:t.compareRef(e.sort),pulse:lT(r)}))),p=lT(r),(y||b)&&(h=lT(b=t.add(sN({layout:t.objectProperty(e.layout),legends:t.legends,mark:d,pulse:p})))),m=lT(u=t.add(zT({mark:d,pulse:h||p}))),g&&(x&&((n=t.operators).pop(),b&&n.pop()),t.pushState(p,h||m,f),y?function(e,t,n){var r,i,a,o,u=e.from.facet,s=u.name,c=NR(u,t);u.name||Object(Me.n)("Facet must have a name: "+Object(Me.Z)(u)),u.data||Object(Me.n)("Facet must reference a data set: "+Object(Me.Z)(u)),u.field?o=t.add(eN({field:t.fieldRef(u.field),pulse:c})):u.groupby?o=t.add(HT({key:t.keyRef(u.groupby),group:lT(t.proxy(n.parent)),pulse:c})):Object(Me.n)("Facet must specify groupby or field: "+Object(Me.Z)(u)),i=(r=t.fork()).add(LT()),a=r.add(oN({pulse:lT(i)})),r.addData(s,new RR(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:YR(e,r).toRuntime()}}(e,t,i):x?function(e,t,n){var r=t.add(eN({pulse:n.pulse})),i=t.fork();i.add(oN()),i.addSignal("parent",null),r.params.subflow={$subflow:YR(e,i).toRuntime()}}(e,t,i):YR(e,t),t.popState(),x&&(b&&n.push(b),n.push(u))),w&&(m=function(e,t,n){var r,i=e.method,a=e.bound,o=e.separation,u={separation:mT(o)?n.signalRef(o.signal):o,method:mT(i)?n.signalRef(i.signal):i,pulse:t};e.order&&(u.sort=n.compareRef({field:e.order}));a&&(r=a.tolerance,u.boundTolerance=mT(r)?n.signalRef(r.signal):+r,u.boundScale=n.scaleRef(a.scale),u.boundOrient=a.orient);return lT(n.add(ZT(u)))}(w,m,t)),s=t.add(iN({pulse:m})),c=t.add(oN({pulse:lT(s)},void 0,t.parent())),null!=e.name&&(l=e.name,t.addData(l,new RR(t,a,s,c)),e.on&&e.on.forEach((function(e){(e.insert||e.remove||e.toggle)&&Object(Me.n)("Marks only support modify triggers."),PR(e,t,l)})))};var LR=function(e,t){var n,r,i,a,o,u,s,c,l,f=t.config.legend,d=e.encode||{},p=d.legend||{},h=p.name||void 0,m=p.interactive,v=p.style,g=YN(e,f),y=CN.reduce((function(t,n){return t||e[n]}),0);return y||Object(Me.n)("Missing valid scale for legend."),o=function(e,t){var n=e.type||"symbol";e.type||1!==function(e){return CN.reduce((function(t,n){return t+(e[n]?1:0)}),0)}(e)||!e.fill&&!e.stroke||(n=tg(t)?"gradient":rg(t)?"discrete":"symbol");return"gradient"!==n?n:rg(t)?"discrete":"gradient"}(e,t.scaleType(y)),u={title:null!=e.title,type:o,vgrad:"symbol"!==o&&g.isVertical()},s=lT(t.add(LT(null,[u]))),p=HN(function(e,t){var n={enter:{},update:{}};return VN(n,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:t.strokeWidth,strokeDash:t.strokeDash,x:e("legendX"),y:e("legendY")}),n}(g,f),p,_N),n={enter:{x:{value:0},y:{value:0}}},c=lT(t.add($T(i={type:o,scale:t.scaleRef(y),count:t.objectProperty(g("tickCount")),limit:t.property(g("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),"gradient"===o?(a=[tR(e,y,f,d.gradient),aR(e,f,d.labels,c)],i.count=i.count||t.signalRef("max(2,2*floor((".concat(yT(g.gradientLength()),")/100))"))):"discrete"===o?a=[nR(e,y,f,d.gradient,c),aR(e,f,d.labels,c)]:(r=function(e,t){var n=YN(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,f),a=[uR(e,f,d,c,yT(r.columns))],i.size=function(e,t,n){var r=yT(BR("size",e,n)),i=yT(BR("strokeWidth",e,n)),a=yT(function(e,t,n){return JN("fontSize",e)||function(e,t,n){var r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,"guide-label"));return oT("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(a,")"),t)}(e,t,a[0].marks)),a=[oR("legend-entry",null,null,s,m,n,a,r)],u.title&&a.push(function(e,t,n,r){var i,a=YN(e,t);return VN(i={enter:{opacity:jN},update:{opacity:AN,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:jN}},{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:mR},angle:{signal:vR},align:{signal:hR},baseline:{signal:gR},text:e.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),KN("text","legend-title","guide-title",null,r,i,n)}(e,f,d.title,s)),l=oR("legend",v,h,s,m,p,a),e.zindex&&(l.zindex=e.zindex),zR(l,t)};function BR(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):JN(e,n[0].encode)}var WR='item.orient==="'.concat("left",'"?-90:item.orient==="').concat("right",'"?90:0'),UR=function(e,t){var n,r,i=YN(e=Object(Me.H)(e)?{text:e}:e,t.config.title),a=e.encode||{},o=a.group||{},u=o.name||void 0,s=o.interactive,c=o.style,l=[];return n=lT(t.add(LT(null,[{}]))),l.push(function(e,t,n,r){var i={value:0},a=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return VN(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),KN("text","title-text","group-title",null,r,o,n)}(e,i,function(e){var t=e.encode;return t&&t.title||Object(Me.o)({name:e.name,interactive:e.interactive,style:e.style},t)}(e),n)),e.subtitle&&l.push(function(e,t,n,r){var i={value:0},a=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return VN(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),KN("text","title-subtitle","group-subtitle",null,r,o,n)}(e,i,a.subtitle,n)),r=oR("title",c,u,n,s,function(e,t){var n={enter:{},update:{}};return VN(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:QN},angle:{signal:WR},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),HN(n,t,_N)}(i,o),l),e.zindex&&(r.zindex=e.zindex),zR(r,t)};function VR(e,t){var n=[];e.transform&&e.transform.forEach((function(e){n.push(kR(e,t))})),e.on&&e.on.forEach((function(n){PR(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){var r,i,a,o,u,s=[],c=null,l=!1,f=!1;e.values?vT(e.values)||vT(e.format)?(s.push(qR(t,e)),s.push(c=HR())):s.push(c=HR({$ingest:e.values,$format:e.format})):e.url?vT(e.url)||vT(e.format)?(s.push(qR(t,e)),s.push(c=HR())):s.push(c=HR({$request:e.url,$format:e.format})):e.source&&(c=r=Object(Me.i)(e.source).map((function(e){return lT(t.getData(e).output)})),s.push(null));for(i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,c||u.source||s.push(c=HR()),s.push(o),u.generates&&(f=!0),u.modifies&&!f&&(l=!0),u.source?c=o:u.changes&&(c=null);r&&(a=r.length-1,s[0]=rN({derive:l,pulse:a?r:r[0]}),(l||a)&&s.splice(1,0,HR()));c||s.push(HR());return s.push(oN({})),s}(e,t,n))}function HR(e){var t=LT({},e);return t.metadata={source:!0},t}function qR(e,t){return KT({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}function GR(e,t){return{scale:e.scale,range:t}}var $R=function(e,t,n,r,i){var a,o,u,s,c,l,f,d,p,h=YN(e,t),m=e.orient,v=e.gridScale,g="left"===m||"top"===m?1:-1,y=function(e,t){if(1===t);else if(Object(Me.F)(e)){for(var n=e=Object(Me.o)({},e);null!=n.mult;){if(!Object(Me.F)(n.mult))return n.mult*=t,e;n=n.mult=Object(Me.o)({},n.mult)}n.mult=t}else e=t*(e||0);return e}(e.offset,g);return VN(a={enter:o={opacity:jN},update:s={opacity:AN},exit:u={opacity:jN}},{stroke:h("gridColor"),strokeDash:h("gridDash"),strokeDashOffset:h("gridDashOffset"),strokeOpacity:h("gridOpacity"),strokeWidth:h("gridWidth")}),c={scale:e.scale,field:SN,band:i.band,extra:i.extra,offset:i.offset,round:h("tickRound")},"top"===m||"bottom"===m?(l="x",f="y",p="height"):(l="y",f="x",p="width"),d=f+"2",s[l]=o[l]=u[l]=c,v?(s[f]=o[f]={scale:v,range:0,mult:g,offset:y},s[d]=o[d]={scale:v,range:1,mult:g,offset:y}):(s[f]=o[f]={value:0,offset:y},s[d]=o[d]={signal:p,mult:g,offset:y}),KN("rule","axis-grid",null,SN,r,a,n)};function KR(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}var XR=function(e,t){var n,r,i,a,o,u,s=function(e,t){var n=t.config,r=e.orient,i="top"===r||"bottom"===r?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===t.scaleType(e.scale)&&n.axisBand;return i||a||o?Object(Me.o)({},n.axis,i,a,o):n.axis}(e,t),c=e.encode||{},l=c.axis||{},f=l.name||void 0,d=l.interactive,p=l.style,h=YN(e,s),m=function(e){var t,n,r=e("tickBand"),i=e("tickOffset");return r?r.signal?(t={signal:"(".concat(r.signal,")==='extent'?1:0.5")},n={signal:"(".concat(r.signal,")==='extent'?true:false")},Object(Me.F)(i)||(i={signal:"(".concat(r.signal,")==='extent'?0:").concat(i)})):"extent"===r?(t=1,n=!0,i=0):(t=.5,n=!1):(t=e("bandPosition"),n=e("tickExtra")),{extra:n,band:t,offset:i}}(h);return n={orient:e.orient,ticks:!!h("ticks"),labels:!!h("labels"),grid:!!h("grid"),domain:!!h("domain"),title:null!=e.title,translate:h("translate")},r=lT(t.add(LT({},[n]))),l=HN({update:{offset:WN(h("offset")||0),position:WN(gT(e.position,0)),titlePadding:WN(h("titlePadding")),minExtent:WN(h("minExtent")),maxExtent:WN(h("maxExtent")),range:{signal:'abs(span(range("'.concat(e.scale,'")))')}}},c.axis,_N),i=lT(t.add(PT({scale:t.scaleRef(e.scale),extra:t.property(m.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),u=[],n.grid&&u.push($R(e,s,c.grid,i,m)),n.ticks&&(a=h("tickSize"),u.push(function(e,t,n,r,i,a){var o,u,s,c,l,f,d=YN(e,t),p=e.orient,h="left"===p||"top"===p?-1:1;return VN(o={enter:u={opacity:jN},update:c={opacity:AN},exit:s={opacity:jN}},{stroke:d("tickColor"),strokeDash:d("tickDash"),strokeDashOffset:d("tickDashOffset"),strokeOpacity:d("tickOpacity"),strokeWidth:d("tickWidth")}),(l=WN(i)).mult=h,f={scale:e.scale,field:SN,band:a.band,extra:a.extra,offset:a.offset,round:d("tickRound")},"top"===p||"bottom"===p?(c.y=u.y=jN,c.y2=u.y2=l,c.x=u.x=s.x=f):(c.x=u.x=jN,c.x2=u.x2=l,c.y=u.y=s.y=f),KN("rule","axis-tick",null,SN,r,o,n)}(e,s,c.ticks,i,a,m))),n.labels&&(a=n.ticks?a:0,u.push(function(e,t,n,r,i,a){var o,u,s,c,l,f,d,p,h,m,v,g=YN(e,t),y=e.orient,b="left"===y||"top"===y?-1:1,x="top"===y||"bottom"===y,w=e.scale,O=yT(g("labelFlush")),k=yT(g("labelFlushOffset")),E=0===O||!!O,S=g("labelAlign"),C=g("labelBaseline");return(c=WN(i)).mult=b,c.offset=WN(g("labelPadding")||0),c.offset.mult=b,l={scale:w,field:SN,band:.5,offset:eR(a.offset,g("labelOffset"))},x?(f=S||(E?KR(w,O,'"left"','"right"','"center"'):"center"),d=C||("top"===y?"bottom":"top"),p=!S):(f=S||("right"===y?"left":"right"),d=C||(E?KR(w,O,'"top"','"bottom"','"middle"'):"middle"),p=!C),p=p&&E&&k?KR(w,O,"-("+k+")",k,0):null,VN(u={enter:s={opacity:jN,x:x?l:c,y:x?c:l},update:{opacity:AN,text:{field:"label"},x:s.x,y:s.y},exit:{opacity:jN,x:s.x,y:s.y}},(o={},Object(su.a)(o,x?"dx":"dy",p),Object(su.a)(o,"align",f),Object(su.a)(o,"baseline",d),Object(su.a)(o,"angle",g("labelAngle")),Object(su.a)(o,"fill",g("labelColor")),Object(su.a)(o,"fillOpacity",g("labelOpacity")),Object(su.a)(o,"font",g("labelFont")),Object(su.a)(o,"fontSize",g("labelFontSize")),Object(su.a)(o,"fontWeight",g("labelFontWeight")),Object(su.a)(o,"fontStyle",g("labelFontStyle")),Object(su.a)(o,"limit",g("labelLimit")),Object(su.a)(o,"lineHeight",g("labelLineHeight")),o)),h=g("labelBound"),m=g("labelOverlap"),v=g("labelSeparation"),e=KN("text","axis-label","guide-label",SN,r,u,n),(m||h)&&(e.overlap={separation:v,method:m,order:"datum.index",bound:h?{scale:w,orient:y,tolerance:h}:null}),e}(e,s,c.labels,i,a,m))),n.domain&&u.push(function(e,t,n,r){var i,a,o,u,s,c,l=YN(e,t),f=e.orient;return VN(i={enter:a={opacity:jN},update:o={opacity:AN},exit:{opacity:jN}},{stroke:l("domainColor"),strokeDash:l("domainDash"),strokeDashOffset:l("domainDashOffset"),strokeWidth:l("domainWidth"),strokeOpacity:l("domainOpacity")}),"top"===f||"bottom"===f?(u="x",c="y"):(u="y",c="x"),s=u+"2",a[c]=jN,o[u]=a[u]=GR(e,0),o[s]=a[s]=GR(e,1),KN("rule","axis-domain",null,null,r,i,n)}(e,s,c.domain,r)),n.title&&u.push(function(e,t,n,r){var i,a,o,u,s=YN(e,t),c=e.orient,l="left"===c||"top"===c?-1:1,f="top"===c||"bottom"===c;return i={enter:a={opacity:jN,anchor:WN(s("titleAnchor")),align:{signal:QN}},update:o=Object(Me.o)({},a,{opacity:AN,text:WN(e.title)}),exit:{opacity:jN}},u={signal:'lerp(range("'.concat(e.scale,'"), ').concat(ZN(0,1,.5),")")},f?(o.x=u,a.angle={value:0},a.baseline={value:"top"===c?"bottom":"top"}):(o.y=u,a.angle={value:90*l},a.baseline={value:"bottom"}),VN(i,{angle:s("titleAngle"),baseline:s("titleBaseline"),fill:s("titleColor"),fillOpacity:s("titleOpacity"),font:s("titleFont"),fontSize:s("titleFontSize"),fontStyle:s("titleFontStyle"),fontWeight:s("titleFontWeight"),limit:s("titleLimit"),lineHeight:s("titleLineHeight")},{align:s("titleAlign")}),!UN(i,"x",s("titleX"),"update")&&!f&&!$N("x",n)&&(i.enter.auto={value:!0}),!UN(i,"y",s("titleY"),"update")&&f&&!$N("y",n)&&(i.enter.auto={value:!0}),KN("text","axis-title","guide-title",null,r,i,n)}(e,s,c.title,r)),o=oR("axis",p,f,r,d,l,u),e.zindex&&(o.zindex=e.zindex),zR(o,t)},YR=function(e,t,n){var r=Object(Me.i)(e.signals),i=Object(Me.i)(e.scales);return n||r.forEach((function(e){return aT(e,t)})),Object(Me.i)(e.projections).forEach((function(e){return function(e,t){var n=t.config.projection||{},r={};for(var i in e)"name"!==i&&(r[i]=EN(e[i],i,t));for(i in n)null==r[i]&&(r[i]=EN(n[i],i,t));t.addProjection(e.name,r)}(e,t)})),i.forEach((function(e){return function(e,t){var n=e.type||"linear";Qv(n)||Object(Me.n)("Unrecognized scale type: "+Object(Me.Z)(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t)})),Object(Me.i)(e.data).forEach((function(e){return VR(e,t)})),i.forEach((function(e){return dN(e,t)})),(n||r).forEach((function(e){return function(e,t){var n=t.getSignal(e.name),r=e.update;e.init&&(r?Object(Me.n)("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=oT(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((function(e){DT(e,t,n.id)}))}(e,t)})),Object(Me.i)(e.axes).forEach((function(e){return XR(e,t)})),Object(Me.i)(e.marks).forEach((function(e){return zR(e,t)})),Object(Me.i)(e.legends).forEach((function(e){return LR(e,t)})),e.title&&UR(e.title,t),t.parseLambdas(),t};function JR(e,t){var n,r,i,a,o,u,s=t.config;return o=lT(t.root=t.add(cT())),(u=function(e,t){var n=function(n){return gT(e[n],t[n])},r=[ZR("background",n("background")),ZR("autosize",eT(n("autosize"))),ZR("padding",nT(n("padding"))),ZR("width",n("width")||0),ZR("height",n("height")||0)],i=r.reduce((function(e,t){return e[t.name]=t,e}),{}),a={};return Object(Me.i)(e.signals).forEach((function(e){Object(Me.v)(i,e.name)?e=Object(Me.o)(i[e.name],e):r.push(e),a[e.name]=e})),Object(Me.i)(t.signals).forEach((function(e){Object(Me.v)(a,e.name)||Object(Me.v)(i,e.name)||r.push(e)})),r}(e,s)).forEach((function(e){return aT(e,t)})),t.description=e.description||s.description,t.eventConfig=s.events,t.legends=t.objectProperty(s.legend&&s.legend.layout),r=t.add(LT()),i=HN({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(UT(qN(i,"group","frame",e.style,t,{pulse:lT(r)}))),a=t.add(sN({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:o,pulse:lT(i)})),t.operators.pop(),t.pushState(lT(i),lT(a),null),YR(e,t,u),t.operators.push(a),n=t.add(zT({mark:o,pulse:lT(a)})),n=t.add(iN({pulse:lT(n)})),n=t.add(oN({pulse:lT(n)})),t.addData("root",new RR(t,r,r,n)),t}function ZR(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function QR(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function eD(e){this.config=e.config,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}var tD=QR.prototype=eD.prototype;function nD(e){return(Object(Me.A)(e)?rD:iD)(e)}function rD(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(Object(Me.F)(t)?t.signal||nD(t):Object(Me.Z)(t));return n+"]"}function iD(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+Object(Me.Z)(t)+":"+(Object(Me.F)(n)?n.signal||nD(n):Object(Me.Z)(n));return r+"}"}tD.fork=function(){return new eD(this)},tD.isSubscope=function(){return this._subid>0},tD.toRuntime=function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},tD.id=function(){return(this._subid?this._subid+":":0)+this._id++},tD.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((function(t){t.$ref=e.id})),e.refs=null),e},tD.proxy=function(e){var t=e instanceof uT?lT(e):e;return this.add(nN({value:t}))},tD.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},tD.addUpdate=function(e){return this.updates.push(e),e},tD.finish=function(){var e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}for(e in this.data)for(var r in n((t=this.data[e]).input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values"),t.index)n(t.index[r],e,"index:"+r);return this},tD.pushState=function(e,t,n){this._encode.push(lT(this.add(oN({pulse:e})))),this._parent.push(t),this._lookup.push(n?lT(this.proxy(n)):null),this._markpath.push(-1)},tD.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},tD.parent=function(){return Object(Me.U)(this._parent)},tD.encode=function(){return Object(Me.U)(this._encode)},tD.lookup=function(){return Object(Me.U)(this._lookup)},tD.markpath=function(){var e=this._markpath;return++e[e.length-1]},tD.fieldRef=function(e,t){if(Object(Me.H)(e))return fT(e,t);e.signal||Object(Me.n)("Unsupported field reference: "+Object(Me.Z)(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=lT(this.add(qT(n)))),i},tD.compareRef=function(e){function t(e){return mT(e)?(r=!0,n.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(r=!0,n.exprRef(e.expr)):e}var n=this,r=!1,i=Object(Me.i)(e.field).map(t),a=Object(Me.i)(e.order).map(t);return r?lT(this.add(BT({fields:i,orders:a}))):pT(i,a)},tD.keyRef=function(e,t){var n=this.signals,r=!1;return e=Object(Me.i)(e).map((function(e){return mT(e)?(r=!0,lT(n[e.signal])):e})),r?lT(this.add(GT({fields:e,flat:t}))):function(e,t){var n={$key:e};return t&&(n.$flat=!0),n}(e,t)},tD.sortRef=function(e){if(!e)return e;var t=hT(e.op,e.field),n=e.order||"ascending";return n.signal?lT(this.add(BT({fields:t,orders:this.signalRef(n.signal)}))):pT(t,n)},tD.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},tD.hasOwnSignal=function(e){return Object(Me.v)(this.signals,e)},tD.addSignal=function(e,t){this.hasOwnSignal(e)&&Object(Me.n)("Duplicate signal name: "+Object(Me.Z)(e));var n=t instanceof uT?t:this.add(cT(t));return this.signals[e]=n},tD.getSignal=function(e){return this.signals[e]||Object(Me.n)("Unrecognized signal name: "+Object(Me.Z)(e)),this.signals[e]},tD.signalRef=function(e){return this.signals[e]?lT(this.signals[e]):(Object(Me.v)(this.lambdas,e)||(this.lambdas[e]=this.add(cT(null))),lT(this.lambdas[e]))},tD.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=oT(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},tD.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},tD.objectProperty=function(e){return e&&Object(Me.F)(e)?this.signalRef(e.signal||nD(e)):e},tD.exprRef=function(e,t){var n={expr:oT(e,this)};return t&&(n.expr.$name=t),lT(this.add(VT(n)))},tD.addBinding=function(e,t){this.bindings||Object(Me.n)("Nested signals do not support binding: "+Object(Me.Z)(e)),this.bindings.push(Object(Me.o)({signal:e},t))},tD.addScaleProj=function(e,t){Object(Me.v)(this.scales,e)&&Object(Me.n)("Duplicate scale or projection name: "+Object(Me.Z)(e)),this.scales[e]=this.add(t)},tD.addScale=function(e,t){this.addScaleProj(e,aN(t))},tD.addProjection=function(e,t){this.addScaleProj(e,tN(t))},tD.getScale=function(e){return this.scales[e]||Object(Me.n)("Unrecognized scale name: "+Object(Me.Z)(e)),this.scales[e]},tD.projectionRef=tD.scaleRef=function(e){return lT(this.getScale(e))},tD.projectionType=tD.scaleType=function(e){return this.getScale(e).params.type},tD.addData=function(e,t){return Object(Me.v)(this.data,e)&&Object(Me.n)("Duplicate data set name: "+Object(Me.Z)(e)),this.data[e]=t},tD.getData=function(e){return this.data[e]||Object(Me.n)("Undefined data set name: "+Object(Me.Z)(e)),this.data[e]},tD.addDataPipeline=function(e,t){return Object(Me.v)(this.data,e)&&Object(Me.n)("Duplicate data set name: "+Object(Me.Z)(e)),this.addData(e,RR.fromEntries(this,t))};var aD=function(e,t){return Object(Me.F)(e)||Object(Me.n)("Input Vega specification must be an object."),JR(e,new QR(t=Object(Me.N)({description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}},t,e.config))).toRuntime()};Object(Me.o)(wi,r,i,o,u,s,c,l,f,d,p);var oD=n(317),uD=function(e,t,n){return e.fields=t||[],e.fname=n,e};var sD=function(e){throw Error(e)},cD=function(e){var t,n,r,i=[],a=null,o=0,u=e.length,s="";function c(){i.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<u;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===a)c(),a=null,o=-1;else{if(a)continue;t===o&&'"'===r||t===o&&"'"===r?(t=n+1,a=r):"."!==r||o?"["===r?(n>t&&c(),o=t=n+1):"]"===r&&(o||sD("Access path missing open bracket: "+e),o>0&&c(),o=0,t=n+1):n>t?c():t=n+1}return o&&sD("Access path missing closing bracket: "+e),a&&sD("Access path missing closing quote: "+e),n>t&&(n++,c()),i},lD=Array.isArray,fD=function(e){return e===Object(e)},dD=function(e){return"string"===typeof e};function pD(e){return lD(e)?"["+e.map(pD)+"]":fD(e)||dD(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var hD=[],mD=(function(e,t){var n=cD(e),r="return _["+n.map(pD).join("][")+"];";uD(Function("_",r),[e=1===n.length?n[0]:e],t||e)}("id"),uD((function(e){return e}),hD,"identity"));uD((function(){return 0}),hD,"zero"),uD((function(){return 1}),hD,"one"),uD((function(){return!0}),hD,"true"),uD((function(){return!1}),hD,"false");function vD(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}function gD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=bD(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;yD(e,n,t[n],r)}return e}),{})}function yD(e,t,n,r){var i,a;if(fD(n)&&!lD(n))for(i in a=fD(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?yD(a,i,n[i]):a[i]=n[i];else e[t]=n}function bD(e,t){if(null==e)return t;var n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}var xD=function(e){return null!=e?lD(e)?e:[e]:[]},wD=function(e){return"function"===typeof e},OD=Object.prototype.hasOwnProperty,kD=function(e,t){return OD.call(e,t)},ED=function(e){return"boolean"===typeof e},SD=function(e){return"number"===typeof e};var CD=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var _D=n(318),jD=n.n(_D),AD=n(319),TD=n.n(AD),ND=n(87),RD=n.n(ND);function DD(e){return!!e.or}function ID(e){return!!e.and}function MD(e){return!!e.not}function FD(e,t){return MD(e)?{not:FD(e.not,t)}:ID(e)?{and:e.and.map((function(e){return FD(e,t)}))}:DD(e)?{or:e.or.map((function(e){return FD(e,t)}))}:t(e)}var PD=TD.a,zD=jD.a;function LD(e,t){var n,r={},i=Object(Ri.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;kD(e,a)&&(r[a]=e[a])}}catch(o){i.e(o)}finally{i.f()}return r}function BD(e,t){var n,r=Object.assign({},e),i=Object(Ri.a)(t);try{for(i.s();!(n=i.n()).done;){delete r[n.value]}}catch(a){i.e(a)}finally{i.f()}return r}Set.prototype.toJSON=function(){return"Set(".concat(Object(gh.a)(this).map((function(e){return RD()(e)})).join(","),")")};var WD=RD.a;function UD(e){if(SD(e))return e;var t=dD(e)?e:RD()(e);if(t.length<250)return t;for(var n=0,r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return n}function VD(e){return!1===e||null===e}function HD(e,t){return e.indexOf(t)>-1}function qD(e,t){var n,r=0,i=Object(Ri.a)(e.entries());try{for(i.s();!(n=i.n()).done;){var a=Object(Ca.a)(n.value,2),o=a[0];if(t(a[1],o,r++))return!0}}catch(u){i.e(u)}finally{i.f()}return!1}function GD(e,t){var n,r=0,i=Object(Ri.a)(e.entries());try{for(i.s();!(n=i.n()).done;){var a=Object(Ca.a)(n.value,2),o=a[0];if(!t(a[1],o,r++))return!1}}catch(u){i.e(u)}finally{i.f()}return!0}function $D(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];yD(e,i,t[i],!0)}}function KD(e,t){var n,r,i=[],a={},o=Object(Ri.a)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value;(n=t(u))in a||(a[n]=1,i.push(u))}}catch(s){o.e(s)}finally{o.f()}return i}function XD(e,t){var n,r=Object(Ri.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.has(i))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}function YD(e){var t,n=new Set,r=Object(Ri.a)(e);try{var i=function(){var e=t.value,r=cD(e).map((function(e,t){return 0===t?e:"[".concat(e,"]")}));r.map((function(e,t){return r.slice(0,t+1).join("")})).forEach((function(e){return n.add(e)}))};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n}function JD(e,t){return void 0===e||void 0===t||XD(YD(e),YD(t))}var ZD=Object.keys;function QD(e){var t=[];for(var n in e)kD(e,n)&&t.push(e[n]);return t}function eI(e){return!0===e||!1===e}function tI(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function nI(e,t){return MD(e)?"!("+nI(e.not,t)+")":ID(e)?"("+e.and.map((function(e){return nI(e,t)})).join(") && (")+")":DD(e)?"("+e.or.map((function(e){return nI(e,t)})).join(") || (")+")":t(e)}function rI(e,t){if(0===t.length)return!0;var n=t.shift();return rI(e[n],t)&&delete e[n],0===ZD(e).length}function iI(e){return e.charAt(0).toUpperCase()+e.substr(1)}function aI(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=cD(e),r=[],i=1;i<=n.length;i++){var a="[".concat(n.slice(0,i).map(pD).join("]["),"]");r.push("".concat(t).concat(a))}return r.join(" && ")}function oI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(t,"[").concat(pD(cD(e).join(".")),"]")}function uI(e){return"".concat(cD(e).map((function(e){return sI(e,".","\\.")})).join("\\."))}function sI(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function cI(e){return"".concat(cD(e).join("."))}function lI(e){return e?cD(e).length:0}function fI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];if(void 0!==a)return a}}var dI=42;function pI(e){var t=++dI;return e?String(e)+t:t}function hI(e){return function(e){return 0===e.indexOf("__")}(e)?e:"__".concat(e)}function mI(e){return(e%360+360)%360}var vI={area:1,bar:1,image:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function gI(e){return HD(["line","area","trail"],e)}function yI(e){return HD(["rect","bar","image"],e)}var bI=ZD(vI);function xI(e){return e.type}CD(bI);var wI=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),OI=["filled","color","tooltip","invalid","timeUnitBandPosition","timeUnitBand"],kI={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},EI={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function SI(e){return!!e.mark}var CI=function(){function e(t,n){uS(this,e),this.name=t,this.run=n}return cS(e,[{key:"hasMatchingType",value:function(e){return!!SI(e)&&(xI(t=e.mark)?t.type:t)===this.name;var t}}]),e}();function _I(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var jI={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},AI={count:1,min:1,max:1};function TI(e){return!!e&&!!e.argmin}function NI(e){return!!e&&!!e.argmax}ZD(jI);function RI(e){return dD(e)&&!!jI[e]}var DI=["count","valid","missing","distinct"];function II(e){return dD(e)&&HD(DI,e)}var MI=["count","sum","distinct","valid","missing"],FI=CD(["mean","average","median","q1","q3","min","max"]),PI="row",zI="x",LI="y",BI="color",WI="fill",UI="stroke",VI="shape",HI="size",qI="opacity",GI="fillOpacity",$I="strokeOpacity",KI="strokeWidth",XI={x:1,y:1,x2:1,y2:1};var YI={longitude:1,longitude2:1,latitude:1,latitude2:1};var JI=ZD(YI),ZI=Object.assign(Object.assign(Object.assign({},XI),YI),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1});function QI(e){return"color"===e||"fill"===e||"stroke"===e}var eM={row:1,column:1,facet:1},tM=ZD(eM),nM=Object.assign(Object.assign({},ZI),eM),rM=ZD(nM),iM=(nM.order,nM.detail,nM.tooltip,_I(nM,["order","detail","tooltip"])),aM=(iM.row,iM.column,iM.facet,_I(iM,["row","column","facet"]));ZD(iM),ZD(aM);function oM(e){return!!nM[e]}var uM=["x2","y2","latitude2","longitude2"];function sM(e){return cM(e)!==e}function cM(e){switch(e){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude"}return e}function lM(e){switch(e){case"x":return"x2";case"y":return"y2";case"latitude":return"latitude2";case"longitude":return"longitude2"}}ZD(ZI),ZI.x,ZI.y,ZI.x2,ZI.y2,ZI.latitude,ZI.longitude,ZI.latitude2,ZI.longitude2;var fM=_I(ZI,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]),dM=ZD(fM),pM={x:1,y:1},hM=ZD(pM);function mM(e){return"x"===e?"width":"height"}function vM(e){return"width"===e?"x":"y"}fM.text,fM.tooltip,fM.href,fM.url,fM.detail,fM.key,fM.order;var gM=_I(fM,["text","tooltip","href","url","detail","key","order"]),yM=ZD(gM);var bM=Object.assign(Object.assign({},pM),gM),xM=ZD(bM);function wM(e){return!!bM[e]}function OM(e,t){return function(e){switch(e){case BI:case WI:case UI:case"detail":case"key":case"tooltip":case"href":case"order":case qI:case GI:case $I:case KI:case"facet":case PI:case"column":return kM;case zI:case LI:case"latitude":case"longitude":return EM;case"x2":case"y2":case"latitude2":case"longitude2":return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case HI:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case VI:return{point:"always",geoshape:"always"};case"text":return{text:"always"};case"url":return{image:"always"}}}(e)[t]}var kM={area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},EM=_I(kM,["geoshape"]);function SM(e){switch(e){case zI:case LI:case HI:case KI:case qI:case GI:case $I:case"x2":case"y2":return;case"facet":case PI:case"column":case VI:case"text":case"tooltip":case"href":case"url":return"discrete";case BI:case WI:case UI:return"flexible";case"latitude":case"longitude":case"latitude2":case"longitude2":case"detail":case"key":case"order":return}}function CM(e){return"Invalid specification ".concat(JSON.stringify(e),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var _M='Autosize "fit" only works for single views and layered views.';function jM(e){return"".concat("width"==e?"Width":"Height",' "container" only works for single views and layered views.')}function AM(e){return"".concat("width"==e?"Width":"Height",' "container" only works well with autosize "fit" or "fit-x".')}function TM(e){return e?'Dropping "fit-'.concat(e,'" because spec has discrete ').concat(mM(e),"."):'Dropping "fit" because spec has discrete size.'}function NM(e){return'Cannot project a selection on encoding channel "'.concat(e,'", which has no field.')}function RM(e,t){return'Cannot project a selection on encoding channel "'.concat(e,'" as it uses an aggregate function ("').concat(t,'").')}function DM(e){return'The "nearest" transform is not supported for '.concat(e," marks.")}function IM(e){return"Selection not supported for ".concat(e," yet.")}function MM(e){return'Cannot find a selection named "'.concat(e,'".')}var FM="Scale bindings are currently only supported for scales with unbinned, continuous domains.",PM="Legend bindings are only supported for selections over an individual field or encoding channel.";function zM(e){return'Cannot define and lookup the "'.concat(e,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}function LM(e){return'Unknown repeated value "'.concat(e,'".')}function BM(e){return'The "columns" property cannot be used when "'.concat(e,'" has nested row/column.')}var WM="Axes cannot be shared in concatenated views yet (https://github.com/vega/vega-lite/issues/2415).",UM="Axes cannot be shared in repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function VM(e){return'Unrecognized parse "'.concat(e,'".')}function HM(e,t,n){return'An ancestor parsed field "'.concat(e,'" as ').concat(n," but a child wants to parse the field as ").concat(t,".")}function qM(e){return"Ignoring an invalid transform: ".concat(WD(e),".")}var GM='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function $M(e){return"Layer's shared ".concat(e.join(",")," channel ").concat(1===e.length?"is":"are"," overriden.")}function KM(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection ".concat(WD(t)," is overridden by a child projection ").concat(WD(n),".")}function XM(e,t,n){return"Channel ".concat(e," is a ").concat(t,". Converted to {value: ").concat(WD(n),"}.")}function YM(e){return'Invalid field type "'.concat(e,'".')}function JM(e,t,n){var r=n.scaleType?"".concat(n.scaleType," scale"):n.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero";return"A ".concat(r," is used to encode ").concat(e,"'s ").concat(t,". This can be misleading as the ").concat("x"===t?"width":"height"," of the ").concat(e," can be arbitrary based on the scale domain. You may want to use point mark instead.")}function ZM(e,t){return'Invalid field type "'.concat(e,'" for aggregate: "').concat(t,'", using "quantitative" instead.')}function QM(e){return'Invalid aggregation operator "'.concat(e,'".')}function eF(e,t){return'Missing type for channel "'.concat(e,'", using "').concat(t,'" instead.')}function tF(e,t){var n=t.fill,r=t.stroke;return"Dropping color ".concat(e," as the plot also has ").concat(n&&r?"fill and stroke":n?"fill":"stroke",".")}function nF(e,t){return"Dropping ".concat(WD(e),' from channel "').concat(t,'" since it does not contain data field or value.')}function rF(e,t,n){return"".concat(e,"-encoding with type ").concat(t," is deprecated. Replacing with ").concat(n,"-encoding.")}var iF="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function aF(e,t,n){return"".concat(e,' dropped as it is incompatible with "').concat(t,'"').concat(n?" when ".concat(n):"",".")}function oF(e){return"".concat(e,"-encoding is dropped as ").concat(e," is not a valid encoding channel.")}function uF(e){return"".concat(e," encoding should be discrete (ordinal / nominal / binned).")}function sF(e){return"Facet encoding dropped as ".concat(e.join(" and ")," ").concat(e.length>1?"are":"is"," also specified.")}function cF(e,t){return'Using discrete channel "'.concat(e,'" to encode "').concat(t,'" field can be misleading as it does not encode ').concat("ordinal"===t?"order":"magnitude",".")}function lF(e,t){return"Line mark is for continuous lines and thus cannot be used with ".concat(e&&t?"x2 and y2":e?"x2":"y2",". We will use the rule mark (line segments) instead.")}function fF(e,t){return'Specified orient "'.concat(e,'" overridden with "').concat(t,'".')}var dF="Custom domain scale cannot be unioned with default field-based domain.",pF='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function hF(e){return'Cannot use the scale property "'.concat(e,'" with non-color channel.')}function mF(e){return"Using unaggregated domain with raw field has no effect (".concat(WD(e),").")}function vF(e){return'Unaggregated domain not applicable for "'.concat(e,'" since it produces values outside the origin domain of the source data.')}function gF(e){return"Unaggregated domain is currently unsupported for log scale (".concat(WD(e),").")}function yF(e){return'Cannot apply size to non-oriented mark "'.concat(e,'".')}function bF(e,t,n){return'Channel "'.concat(e,'" does not work with "').concat(t,'" scale. We are using "').concat(n,'" scale instead.')}function xF(e,t){return'FieldDef does not work with "'.concat(e,'" scale. We are using "').concat(t,'" scale instead.')}function wF(e,t,n){return"".concat(n,"-scale's \"").concat(t,'" is dropped as it does not work with ').concat(e," scale.")}function OF(e,t){return'Scale type "'.concat(t,'" does not work with mark "').concat(e,'".')}function kF(e){return'The step for "'.concat(e,'" is dropped because the ').concat("width"===e?"x":"y"," is continuous.")}function EF(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(WD(n)," and ").concat(WD(r),"). Using ").concat(WD(n),".")}function SF(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(WD(n)," and ").concat(WD(r),"). Using the union of the two domains.")}function CF(e){return'Setting the scale to be independent for "'.concat(e,'" means we also have to set the guide (axis or legend) to be independent.')}function _F(e){return"Dropping sort property ".concat(WD(e),' as unioned domains only support boolean or op "count", "min", and "max".')}var jF="Unable to merge domains.",AF="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",TF="Invalid channel for axis.";function NF(e){return'Cannot stack "'.concat(e,'" if there is already "').concat(e,'2".')}function RF(e){return"Cannot stack non-linear scale (".concat(e,").")}function DF(e){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(e,'").')}function IF(e,t){return"Invalid ".concat(e,": ").concat(WD(t),".")}function MF(e){return'Time unit "'.concat(e,'" is not supported. We are replacing it with ').concat(sI(e,"day","date"),".")}function FF(e){return"Dropping day from datetime ".concat(WD(e)," as day cannot be combined with other units.")}function PF(e,t){return"".concat(t?"extent ":"").concat(t&&e?"and ":"").concat(e?"center ":"").concat(t&&e?"are ":"is ","not needed when data are aggregated.")}function zF(e,t,n){return"".concat(e," is not usually used with ").concat(t," for ").concat(n,".")}function LF(e,t){return"Continuous axis should not have customized aggregation function ".concat(e,"; ").concat(t," already agregates the axis.")}function BF(e,t){return"Center is not needed to be specified in ".concat(t," when extent is ").concat(e,".")}function WF(e){return"1D error band does not support ".concat(e,".")}function UF(e){return"Channel ".concat(e,' is required for "binned" bin.')}function VF(e){return"Domain for ".concat(e," is required for threshold scale.")}var HF=m,qF=function(e,t){var n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&vD(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&vD(t||"warn","WARN",arguments),this},info:function(){return n>=3&&vD(t||"log","INFO",arguments),this},debug:function(){return n>=4&&vD(t||"log","DEBUG",arguments),this}}}(2),GF=qF;function $F(e){return GF=e}function KF(){return GF=qF}function XF(){var e;(e=GF).warn.apply(e,arguments)}function YF(e){return!!e&&(!!e.year||!!e.quarter||!!e.month||!!e.date||!!e.day||!!e.hours||!!e.minutes||!!e.seconds||!!e.milliseconds)}var JF,ZF=["january","february","march","april","may","june","july","august","september","october","november","december"],QF=ZF.map((function(e){return e.substr(0,3)})),eP=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],tP=eP.map((function(e){return e.substr(0,3)}));function nP(e){if(SD(e))return e>4&&XF(HF.invalidTimeUnit("quarter",e)),(e-1).toString();throw new Error(HF.invalidTimeUnit("quarter",e))}function rP(e){if(SD(e))return(e-1).toString();var t=e.toLowerCase(),n=ZF.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=QF.indexOf(r);if(-1!==i)return i+"";throw new Error(HF.invalidTimeUnit("month",e))}function iP(e){if(SD(e))return e%7+"";var t=e.toLowerCase(),n=eP.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=tP.indexOf(r);if(-1!==i)return i+"";throw new Error(HF.invalidTimeUnit("day",e))}function aP(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(t&&void 0!==e.day&&ZD(e).length>1&&(XF(HF.droppedDay(e)),delete(e=zD(e)).day),void 0!==e.year?r.push(e.year):void 0!==e.day?r.push(2006):r.push(0),void 0!==e.month){var i=t?rP(e.month):e.month;r.push(i)}else if(void 0!==e.quarter){var a=t?nP(e.quarter):e.quarter;r.push(a+"*3")}else r.push(0);if(void 0!==e.date)r.push(e.date);else if(void 0!==e.day){var o=t?iP(e.day):e.day;r.push(o+"+1")}else r.push(1);for(var u=0,s=["hours","minutes","seconds","milliseconds"];u<s.length;u++){var c=s[u],l=e[c];r.push("undefined"===typeof l?0:l)}var f=r.join(", ");return n?e.utc?new Function("return +new Date(Date.UTC(".concat(f,"))"))():new Function("return +new Date(".concat(f,")"))():e.utc?"utc(".concat(f,")"):"datetime(".concat(f,")")}!function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.MONTHDATEHOURS="monthdatehours",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCMONTHDATEHOURS="utcmonthdatehours",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth"}(JF||(JF={}));var oP={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},uP=ZD(oP);var sP={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};var cP={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utcmonthdatehours:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},lP=Object.assign(Object.assign({},sP),cP);function fP(e){return!!lP[e]}var dP=Object.assign(Object.assign(Object.assign(Object.assign({},oP),sP),{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,monthdatehours:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1}),cP),pP=(ZD(dP),{"year-month":"%b %Y ","year-month-date":"%b %d, %Y "});function hP(e){return uP.reduce((function(t,n){return mP(e,n)?[].concat(Object(gh.a)(t),[n]):t}),[])}function mP(e,t){var n=e.indexOf(t);return n>-1&&(t!==JF.SECONDS||0===n||"i"!==e.charAt(n-1))}function vP(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1},i=r.end,a=aI(t),o=fP(e)?"utc":"";function u(e){return e===JF.QUARTER?"(".concat(o,"quarter(").concat(a,")-1)"):"".concat(o).concat(e,"(").concat(a,")")}var s=uP.reduce((function(t,r){return mP(e,r)&&(t[r]=u(r),n=r),t}),{});return i&&(s[n]+="+1"),aP(s)}function gP(e,t,n){if(e){var r=function(e){if(e){var t=hP(e);return"timeUnitSpecifier(".concat(RD()(t),", ").concat(RD()(pP),")")}}(e);return n?"utcFormat(".concat(t,", ").concat(r,")"):"timeFormat(".concat(t,", ").concat(r,")")}}function yP(e){return"day"!==e&&e.indexOf("day")>=0?(XF(HF.dayReplacedWithDate(e)),sI(e,"day","date")):e}function bP(e){return e&&!!e.field&&void 0!==e.equal}function xP(e){return e&&!!e.field&&void 0!==e.lt}function wP(e){return e&&!!e.field&&void 0!==e.lte}function OP(e){return e&&!!e.field&&void 0!==e.gt}function kP(e){return e&&!!e.field&&void 0!==e.gte}function EP(e){return!!(e&&e.field&&lD(e.range)&&2===e.range.length)}function SP(e){return e&&!!e.field&&(lD(e.oneOf)||lD(e.in))}function CP(e){return e&&!!e.field&&void 0!==e.valid}function _P(e){return SP(e)||bP(e)||EP(e)||xP(e)||OP(e)||wP(e)||kP(e)}function jP(e,t){return aL(e,{timeUnit:t,time:!0})}function AP(e,t){return e.map((function(e){return jP(e,t)}))}function TP(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.field,r=e.timeUnit,i=r?"time("+vP(r,n)+")":Bz(e,{expr:"datum"});if(bP(e))return i+"==="+jP(e.equal,r);if(xP(e)){var a=e.lt;return"".concat(i,"<").concat(jP(a,r))}if(OP(e)){var o=e.gt;return"".concat(i,">").concat(jP(o,r))}if(wP(e)){var u=e.lte;return"".concat(i,"<=").concat(jP(u,r))}if(kP(e)){var s=e.gte;return"".concat(i,">=").concat(jP(s,r))}if(SP(e))return"indexof([".concat(AP(e.oneOf,r).join(","),"], ").concat(i,") !== -1");if(CP(e))return NP(i,e.valid);if(EP(e)){var c=e.range[0],l=e.range[1];if(null!==c&&null!==l&&t)return"inrange("+i+", ["+jP(c,r)+", "+jP(l,r)+"])";var f=[];return null!==c&&f.push("".concat(i," >= ").concat(jP(c,r))),null!==l&&f.push("".concat(i," <= ").concat(jP(l,r))),f.length>0?f.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(e)))}function NP(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?"isValid(".concat(e,") && isFinite(+").concat(e,")"):"!isValid(".concat(e,") || !isFinite(+").concat(e,")")}function RP(e){return _P(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:yP(e.timeUnit)}):e}var DP={quantitative:1,ordinal:1,temporal:1,nominal:1,geojson:1};var IP;!function(e){e.LINEAR="linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.SYMLOG="symlog",e.TIME="time",e.UTC="utc",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.BIN_ORDINAL="bin-ordinal",e.ORDINAL="ordinal",e.POINT="point",e.BAND="band"}(IP||(IP={}));var MP={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},FP=ZD(MP);var PP={linear:0,log:1,pow:1,sqrt:1,symlog:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function zP(e){return PP[e]}var LP=["linear","log","pow","sqrt","symlog","time","utc"],BP=CD(LP),WP=CD(["quantile","quantize","threshold"]),UP=CD(LP.concat(["quantile","quantize","threshold"])),VP=CD(["ordinal","bin-ordinal","point","band"]);function HP(e){return e in VP}function qP(e){return e in UP}function GP(e){return e in BP}function $P(e){return e in WP}function KP(e){var t;return null===(t=e)||void 0===t?void 0:t.selection}var XP={type:1,domain:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},YP=(ZD(XP),_I(XP,["type","domain","range","scheme"])),JP=ZD(YP);!function(){var e,t,n={},r=Object(Ri.a)(rM);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,o=Object(Ri.a)(ZD(DP));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=Object(Ri.a)(FP);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=nz(a,s);tz(a,l)&&ez(l,s)&&(n[f]=null!==(e=n[f])&&void 0!==e?e:[],n[f].push(l))}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}}}catch(d){r.e(d)}finally{r.f()}}();function ZP(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!HD(["point","band","identity"],e);case"bins":return!HD(["point","band","identity","ordinal"],e);case"round":return GP(e)||"band"===e||"point"===e;case"padding":return GP(e)||HD(["point","band"],e);case"paddingOuter":case"align":return HD(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return GP(e);case"nice":return GP(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return qP(e)&&!HD(["log","time","utc","threshold","quantile"],e)}}function QP(e,t){switch(t){case"interpolate":case"scheme":return QI(e)?void 0:HF.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function ez(e,t){return HD(["ordinal","nominal"],t)?void 0===e||HP(e):"temporal"===t?HD([IP.TIME,IP.UTC,void 0],e):"quantitative"!==t||HD([IP.LOG,IP.POW,IP.SQRT,IP.SYMLOG,IP.QUANTILE,IP.QUANTIZE,IP.THRESHOLD,IP.LINEAR,void 0],e)}function tz(e,t){switch(e){case zI:case LI:return GP(t)||HD(["band","point"],t);case HI:case KI:case qI:case GI:case $I:return GP(t)||$P(t)||HD(["band","point"],t);case BI:case WI:case UI:return"band"!==t;case VI:return"ordinal"===t}return!1}function nz(e,t){return e+"_"+t}function rz(e){var t=e.anchor,n=e.frame,r=e.offset,i=e.orient,a=e.color,o=_I(e,["anchor","frame","offset","orient","color"]);return{mark:Object.assign(Object.assign({},o),a?{fill:a}:{}),nonMark:Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{})}}function iz(e){return dD(e)||lD(e)&&dD(e[0])}function az(e){var t;return[].concat(e.type,null!==(t=e.style)&&void 0!==t?t:[])}function oz(e,t,n){return fI(t[e],uz(e,t,n))}function uz(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.vgChannel;return fI(i?sz(e,t,n.style):void 0,sz(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function sz(e,t,n){var r,i,a=az(t),o=Object(Ri.a)(a);try{for(o.s();!(i=o.n()).done;){var u=n[i.value],s=e;u&&void 0!==u[s]&&(r=u[s])}}catch(c){o.e(c)}finally{o.f()}return r}function cz(e,t,n,r){if(iL(e)){var i=Fz(e)&&e.scale&&e.scale.type===IP.UTC;return{signal:hz(Bz(e,{expr:n}),e.timeUnit,t,r.timeFormat,i,!0)}}var a=lz(e,t,r);return cL(e.bin)?{signal:pz(Bz(e,{expr:n}),Bz(e,{expr:n,binSuffix:"end"}),a,r)}:"quantitative"===e.type||a?{signal:"".concat(fz(Bz(e,{expr:n,binSuffix:"range"}),a))}:{signal:"''+".concat(Bz(e,{expr:n}))}}function lz(e,t,n){return t||("quantitative"===e.type?n.numberFormat:void 0)}function fz(e,t){return"format(".concat(e,', "').concat(t||"",'")')}function dz(e,t,n){return fz(e,null!==t&&void 0!==t?t:n.numberFormat)}function pz(e,t,n,r){return"".concat(NP(e,!1),' ? "null" : ').concat(dz(e,n,r),' + "').concat(" \u2013 ",'" + ').concat(dz(t,n,r))}function hz(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return!t||n?(n=null!==n&&void 0!==n?n:r)||a?"".concat(i?"utc":"time","Format(").concat(e,", '").concat(n,"')"):void 0:gP(t,e,i)}function mz(e,t){return xD(e).reduce((function(e,n){var r;return e.field.push(Bz(n,t)),e.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),e}),{field:[],order:[]})}function vz(e,t){var n=Object(gh.a)(e);return t.forEach((function(e){var t,r=Object(Ri.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(PD(i,e))return}}catch(a){r.e(a)}finally{r.f()}n.push(e)})),n}function gz(e,t){return PD(e,t)||!t?e:e?[].concat(Object(gh.a)(xD(e)),Object(gh.a)(xD(t))).join(", "):t}function yz(e,t){var n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if(iz(n)&&iz(r))return{explicit:e.explicit,value:gz(n,r)};if(!iz(n)&&!iz(r))return{explicit:e.explicit,value:vz(n,r)};throw new Error("It should never reach here")}var bz={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function xz(e){return!!bz[e]}function wz(e){return!!e&&!!e.encoding}function Oz(e){return!!e&&("count"===e.op||!!e.field)}function kz(e){return!!e&&lD(e)}function Ez(e){return!!e.row||!!e.column}function Sz(e){return void 0!==e.facet}function Cz(e){var t=e.field,n=e.timeUnit,r=e.bin,i=e.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{field:t})}function _z(e){return Dz(e)&&!!e.sort}function jz(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=a.isMidPoint,u=t.timeUnit,s=t.bin;if(HD(["x","y"],e)){if(Pz(t)&&void 0!==t.band)return t.band;if(u&&!n)return o?uz("timeUnitBandPosition",r,i):yI(r.type)?uz("timeUnitBand",r,i):0;if(cL(s))return yI(r.type)&&!o?1:.5}}function Az(e,t,n,r,i){return!!(cL(t.bin)||t.timeUnit&&Dz(t)&&"temporal"===t.type)&&!!jz(e,t,n,r,i)}function Tz(e){return!!e&&!!e.condition}function Nz(e){return!!e&&!!e.condition&&!lD(e.condition)&&Rz(e.condition)}function Rz(e){return!!e&&(!!e.field||"count"===e.aggregate)}function Dz(e){return!!e&&(!!e.field&&!!e.type||"count"===e.aggregate)}function Iz(e){return Rz(e)&&dD(e.field)}function Mz(e){return e&&"value"in e&&void 0!==e.value}function Fz(e){return!!e&&(!!e.scale||!!e.sort)}function Pz(e){return!!e&&(!!e.axis||!!e.stack||!!e.impute||void 0!==e.band)}function zz(e){return!!e&&!!e.format}function Lz(e){return!!e.op}function Bz(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.field,o=i.prefix,u=i.suffix,s="";if(Vz(e))a=hI("count");else{var c;if(!i.nofn)if(Lz(e))c=e.op;else{var l=e.bin,f=e.aggregate,d=e.timeUnit;cL(l)?(c=sL(l),u=(null!==(t=i.binSuffix)&&void 0!==t?t:"")+(null!==(n=i.suffix)&&void 0!==n?n:"")):f?NI(f)?(s=".".concat(a),a="argmax_".concat(f.argmax)):TI(f)?(s=".".concat(a),a="argmin_".concat(f.argmin)):c=String(f):d&&(c=String(d),u=(!HD(["range","mid"],i.binSuffix)&&i.binSuffix||"")+(null!==(r=i.suffix)&&void 0!==r?r:""))}c&&(a=a?"".concat(c,"_").concat(a):c)}return u&&(a="".concat(a,"_").concat(u)),o&&(a="".concat(o,"_").concat(a)),i.forAs?a:i.expr?oI(a,i.expr)+s:uI(a)+s}function Wz(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!e.bin;case"temporal":return!1}throw new Error(HF.invalidFieldType(e.type))}function Uz(e){return!Wz(e)}function Vz(e){return"count"===e.aggregate}var Hz=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){var t=e.aggregate,n=e.bin,r=e.timeUnit,i=e.field;if(NI(t))return"".concat(i," for argmax(").concat(t.argmax,")");if(TI(t))return"".concat(i," for argmin(").concat(t.argmin,")");var a=t||r||cL(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}(e);default:return function(e,t){var n=e.field,r=e.bin,i=e.timeUnit,a=e.aggregate;if("count"===a)return t.countTitle;if(cL(r))return"".concat(n," (binned)");if(i){var o=hP(i).join("-");return"".concat(n," (").concat(o,")")}return a?NI(a)?"".concat(n," for max ").concat(a.argmax):TI(a)?"".concat(n," for min ").concat(a.argmin):"".concat(iI(a)," of ").concat(n):n}(e,t)}},qz=Hz;function Gz(e){qz=e}function $z(){Gz(Hz)}function Kz(e,t,n){var r,i,a=n.allowDisabling,o=n.includeDefault,u=void 0===o||o,s=(null!==(r=Xz(e))&&void 0!==r?r:{}).title,c=u?Yz(e,t):void 0;return a?fI(s,e.title,c):null!==(i=null!==s&&void 0!==s?s:e.title)&&void 0!==i?i:c}function Xz(e){return Pz(e)&&e.axis?e.axis:(t=e)&&t.legend&&e.legend?e.legend:function(e){return!!e&&!!e.header}(e)&&e.header?e.header:void 0;var t}function Yz(e,t){return qz(e,t)}function Jz(e){var t;return zz(e)&&e.format?e.format:(null!==(t=Xz(e))&&void 0!==t?t:{}).format}function Zz(e){return Rz(e)?e:Nz(e)?e.condition:void 0}function Qz(e){return Rz(e)?e:Nz(e)?e.condition:void 0}function eL(e,t){if(dD(e)||SD(e)||ED(e)){var n=dD(e)?"string":SD(e)?"number":"boolean";return XF(HF.primitiveChannelDef(t,n,e)),{value:e}}return Rz(e)?tL(e,t):Nz(e)?Object.assign(Object.assign({},e),{condition:tL(e.condition,t)}):e}function tL(e,t){var n=e.aggregate,r=e.timeUnit,i=e.bin,a=e.field,o=Object.assign({},e);if(!n||RI(n)||NI(n)||TI(n)||(XF(HF.invalidAggregate(n)),delete o.aggregate),r&&(o.timeUnit=yP(r)),a&&(o.field="".concat(a)),cL(i)&&(o.bin=nL(i,t)),lL(i)&&!HD(hM,t)&&XF("Channel ".concat(t,' should not be used with "binned" bin')),Dz(o)){var u=o.type,s=function(e){if(e)switch(e=e.toLowerCase()){case"q":case"quantitative":return"quantitative";case"t":case"temporal":return"temporal";case"o":case"ordinal":return"ordinal";case"n":case"nominal":return"nominal";case"geojson":return"geojson"}}(u);u!==s&&(o.type=s),"quantitative"!==u&&II(n)&&(XF(HF.invalidFieldTypeForCountAggregate(u,n)),o.type="quantitative")}else if(!sM(t)){var c=function(e,t){if(e.timeUnit)return"temporal";if(cL(e.bin))return"quantitative";switch(SM(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(o,t);XF(HF.missingFieldType(t,c)),o.type=c}if(Dz(o)){var l=function(e,t){var n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:"Channel ".concat(t," should not be used with a geojson data.")};switch(t){case"row":case"column":case"facet":return Uz(e)?{compatible:!1,warning:HF.facetChannelShouldBeDiscrete(t)}:rL;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":case"url":return rL;case"longitude":case"longitude2":case"latitude":case"latitude2":return"quantitative"!==n?{compatible:!1,warning:"Channel ".concat(t," should be used with a quantitative field only, not ").concat(e.type," field.")}:rL;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case"x2":case"y2":return"nominal"!==n||e.sort?rL:{compatible:!1,warning:"Channel ".concat(t," should not be used with an unsorted discrete field.")};case"shape":return HD(["ordinal","nominal","geojson"],e.type)?rL:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==e.type||"sort"in e?rL:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}throw new Error("channelCompatability not implemented for channel "+t)}(o,t),f=l.compatible,d=l.warning;f||XF(d)}if(_z(o)&&dD(o.sort)){var p=o.sort;if(xz(p))return Object.assign(Object.assign({},o),{sort:{encoding:p}});var h=p.substr(1);if("-"===p.charAt(0)&&xz(h))return Object.assign(Object.assign({},o),{sort:{encoding:h,order:"descending"}})}return o}function nL(e,t){return ED(e)?{maxbins:pL(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign(Object.assign({},e),{maxbins:pL(t)})}var rL={compatible:!0};function iL(e){var t=Xz(e),n=t&&t.formatType||zz(e)&&e.formatType;return"time"===n||!n&&function(e){return"temporal"===e.type||!!e.timeUnit}(e)}function aL(e,t){var n,r,i=t.timeUnit,a=t.type,o=t.time,u=t.undefinedIfExprNotRequired;return YF(e)?n=aP(e,!0):(dD(e)||SD(e))&&(i||"temporal"===a)&&(n=function(e){return!!oP[e]}(i)?aP(Object(su.a)({},i,e),!0):function(e){return!!sP[e]}(i)?aL(e,{timeUnit:(r=i,r.substr(3))}):"datetime(".concat(JSON.stringify(e),")")),n?o?"time(".concat(n,")"):n:u?void 0:JSON.stringify(e)}function oL(e,t){var n=e.timeUnit,r=e.type;return t.map((function(e){var t=aL(e,{timeUnit:n,type:r,undefinedIfExprNotRequired:!0});return void 0!==t?{signal:t}:e}))}function uL(e,t){return cL(e.bin)?wM(t)&&HD(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}function sL(e){return ED(e)&&(e=nL(e,void 0)),"bin"+ZD(e).map((function(t){return dL(e[t])?tI("_".concat(t,"_").concat(Object.entries(e[t]))):tI("_".concat(t,"_").concat(e[t]))})).join("")}function cL(e){return!0===e||fL(e)&&!e.binned}function lL(e){return"binned"===e||fL(e)&&!0===e.binned}function fL(e){return fD(e)}function dL(e){var t;return null===(t=e)||void 0===t?void 0:t.selection}function pL(e){switch(e){case PI:case"column":case HI:case BI:case WI:case UI:case KI:case qI:case GI:case $I:case VI:return 6;default:return 10}}function hL(e,t){var n=e&&e[t];return!!n&&(lD(n)?qD(n,(function(e){return!!e.field})):Rz(n)||Nz(n))}function mL(e){return qD(rM,(function(t){if(hL(e,t)){var n=e[t];if(lD(n))return qD(n,(function(e){return!!e.aggregate}));var r=Zz(n);return r&&!!r.aggregate}return!1}))}function vL(e,t){var n=[],r=[],i=[],a=[],o={};return bL(e,(function(u,s){if(Rz(u)){var c=u.field,l=u.aggregate,f=u.timeUnit,d=u.bin,p=_I(u,["field","aggregate","timeUnit","bin"]);if(l||f||d){var h,m=Xz(u),v=m&&m.title,g=Bz(u,{forAs:!0}),y=Object.assign(Object.assign(Object.assign({},v?[]:{title:Kz(u,t,{allowDisabling:!0})}),p),{field:g}),b="x"===s||"y"===s;if(l){if(NI(l)?(h="argmax",g=Bz({op:"argmax",field:l.argmax},{forAs:!0}),y.field="".concat(g,".").concat(c)):TI(l)?(h="argmin",g=Bz({op:"argmin",field:l.argmin},{forAs:!0}),y.field="".concat(g,".").concat(c)):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(h=l),h){var x={op:h,as:g};c&&(x.field=c),a.push(x)}}else if(n.push(g),Dz(u)&&cL(d)){if(r.push({bin:d,field:c,as:g}),n.push(Bz(u,{binSuffix:"end"})),uL(u,s)&&n.push(Bz(u,{binSuffix:"range"})),b){var w={field:g+"_end"};o[s+"2"]=w}y.bin="binned",sM(s)||(y.type="quantitative")}else if(f){i.push({timeUnit:f,field:c,as:g});var O=Dz(u)&&"temporal"!==u.type&&"time";O&&("text"===s||"tooltip"===s?y.formatType=O:!function(e){return!!fM[e]}(s)?b&&(y.axis=Object.assign({formatType:O},y.axis)):y.legend=Object.assign({formatType:O},y.legend))}o[s]=y}else n.push(c),o[s]=e[s]}else o[s]=e[s]})),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:o}}function gL(e,t){var n=t.type;return ZD(e).reduce((function(r,i){var a;if(!oM(i))return XF(HF.invalidEncodingChannel(i)),r;if(!function(e,t,n){var r=OM(t,n);if(!r)return!1;if("binned"===r){var i=e["x2"===t?"x":"y"];return!!(Rz(i)&&Rz(e[t])&&lL(i.bin))}return!0}(e,i,n))return XF(HF.incompatibleChannel(i,n)),r;if("size"===i&&"line"===n&&(null===(a=Qz(e[i]))||void 0===a?void 0:a.aggregate))return XF(HF.LINE_WITH_VARYING_SIZE),r;if("color"===i&&(t.filled?"fill"in e:"stroke"in e))return XF(HF.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),r;var o=e[i];if("detail"===i||"order"===i&&!lD(o)&&!Mz(o)||"tooltip"===i&&lD(o))o&&(r[i]=(lD(o)?o:[o]).reduce((function(e,t){return Rz(t)?e.push(tL(t,i)):XF(HF.emptyFieldDef(t,i)),e}),[]));else{if("tooltip"===i&&null===o)r[i]=null;else if(!Rz(o)&&!Mz(o)&&!Tz(o))return XF(HF.emptyFieldDef(o,i)),r;r[i]=eL(o,i)}return r}),{})}function yL(e){var t,n=[],r=Object(Ri.a)(ZD(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(hL(e,i)){var a,o=e[i],u=lD(o)?o:[o],s=Object(Ri.a)(u);try{for(s.s();!(a=s.n()).done;){var c=a.value;Rz(c)?n.push(c):Nz(c)&&n.push(c.condition)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}return n}function bL(e,t,n){if(e){var r,i=Object(Ri.a)(ZD(e));try{var a=function(){var i=r.value,a=e[i];lD(a)?a.forEach((function(e){t.call(n,e,i)})):t.call(n,a,i)};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}}function xL(e,t,n,r){return e?ZD(e).reduce((function(n,i){var a=e[i];return lD(a)?a.reduce((function(e,n){return t.call(r,e,n,i)}),n):t.call(r,n,a,i)}),n):n}function wL(e,t){return ZD(t).reduce((function(n,r){switch(r){case"x":case"y":case"href":case"url":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":case"tooltip":return n;case"order":if("line"===e||"trail"===e)return n;case"detail":case"key":var i=t[r];return(lD(i)||Rz(i))&&(lD(i)?i:[i]).forEach((function(e){e.aggregate||n.push(Bz(e,{}))})),n;case"size":if("trail"===e)return n;case"color":case"fill":case"stroke":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":var a=Qz(t[r]);return a&&!a.aggregate&&n.push(Bz(a,{})),n}}),[])}function OL(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var i=e.map((function(e){var n=e.fieldPrefix,i=e.titlePrefix;return{field:n+t.field,type:t.type,title:i+(r?" of "+t.field:"")}}));return{tooltip:[].concat(Object(gh.a)(i),Object(gh.a)(yL(n)))}}function kL(e){var t=e.axis,n=e.title,r=e.field;return t&&void 0!==t.title?void 0:fI(n,r)}function EL(e,t,n,r,i){var a=n.scale,o=n.axis;return function(u){var s=u.partName,c=u.mark,l=u.positionPrefix,f=u.endPositionPrefix,d=void 0===f?void 0:f,p=u.extraEncoding,h=void 0===p?{}:p,m=kL(n);return SL(e,s,i,{mark:c,encoding:Object.assign(Object.assign(Object.assign(Object(su.a)({},t,Object.assign(Object.assign(Object.assign({field:l+"_"+n.field,type:n.type},void 0!==m?{title:m}:{}),void 0!==a?{scale:a}:{}),void 0!==o?{axis:o}:{})),dD(d)?Object(su.a)({},t+"2",{field:d+"_"+n.field,type:n.type}):{}),r),h)})}}function SL(e,t,n,r){var i=e.clip,a=e.color,o=e.opacity,u=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign(Object.assign({},r),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),a?{color:a}:{}),o?{opacity:o}:{}),xI(r.mark)?r.mark:{type:r.mark}),{style:"".concat(u,"-").concat(t)}),ED(e[t])?{}:e[t])})]:[]}function CL(e,t,n){var r=e.encoding,i="vertical"===t?"y":"x",a=r[i],o=r[i+"2"],u=r[i+"Error"],s=r[i+"Error2"];return{continuousAxisChannelDef:_L(a,n),continuousAxisChannelDef2:_L(o,n),continuousAxisChannelDefError:_L(u,n),continuousAxisChannelDefError2:_L(s,n),continuousAxis:i}}function _L(e,t){if(e&&e.aggregate){var n=e.aggregate,r=_I(e,["aggregate"]);return n!==t&&XF(HF.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function jL(e,t){var n=e.mark,r=e.encoding;if(Rz(r.x)&&Uz(r.x)){if(Rz(r.y)&&Uz(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===t)return"vertical";if(void 0===r.y.aggregate&&r.x.aggregate===t)return"horizontal";if(r.x.aggregate===t&&r.y.aggregate===t)throw new Error("Both x and y cannot have aggregate");return xI(n)&&n.orient?n.orient:"vertical"}return"horizontal"}if(Rz(r.y)&&Uz(r.y))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}var AL=ZD({box:1,median:1,outliers:1,rule:1,ticks:1}),TL=new CI("boxplot",RL);function NL(e){return SD(e)?"tukey":e}function RL(e,t){var n,r,i=t.config,a=e.mark,o=(e.encoding,e.selection),u=(e.projection,_I(e,["mark","encoding","selection","projection"])),s=xI(a)?a:{type:a};o&&XF(HF.selectionNotSupported("boxplot"));var c,l=null!==(n=s.extent)&&void 0!==n?n:i.boxplot.extent,f=fI(s.size,i.boxplot.size),d=NL(l),p=function(e,t,n){var r=jL(e,"boxplot"),i=CL(e,r,"boxplot"),a=i.continuousAxisChannelDef,o=i.continuousAxis,u=a.field,s=NL(t),c=[].concat(Object(gh.a)(DL(u)),[{op:"median",field:u,as:"mid_box_"+u},{op:"min",field:u,as:("min-max"===s?"lower_whisker_":"min_")+u},{op:"max",field:u,as:("min-max"===s?"upper_whisker_":"max_")+u}]),l="min-max"===s||"tukey"===s?[]:[{calculate:'datum["upper_box_'.concat(u,'"] - datum["lower_box_').concat(u,'"]'),as:"iqr_"+u},{calculate:'min(datum["upper_box_'.concat(u,'"] + datum["iqr_').concat(u,'"] * ').concat(t,', datum["max_').concat(u,'"])'),as:"upper_whisker_"+u},{calculate:'max(datum["lower_box_'.concat(u,'"] - datum["iqr_').concat(u,'"] * ').concat(t,', datum["min_').concat(u,'"])'),as:"lower_whisker_"+u}],f=e.encoding,d=o,p=(f[d],function(e){var t,n,r=e.tooltip,i=_I(e,["tooltip"]);return r?(lD(r)?(r.forEach((function(e){e.aggregate?(t||(t=[]),t.push(e)):(n||(n=[]),n.push(e))})),t&&(i.tooltip=t)):r.aggregate?i.tooltip=r:n=r,lD(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:i}):{filteredEncoding:e}}(_I(f,["symbol"===typeof d?d:d+""]))),h=p.customTooltipWithoutAggregatedField,m=vL(p.filteredEncoding,n),v=m.bins,g=m.timeUnits,y=m.aggregate,b=m.groupby,x=m.encoding,w="vertical"===r?"horizontal":"vertical",O=r;return{transform:[].concat(Object(gh.a)(v),Object(gh.a)(g),[{aggregate:[].concat(Object(gh.a)(y),Object(gh.a)(c)),groupby:b}],l),groupby:b,aggregate:y,continuousAxisChannelDef:a,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:O,customTooltipWithoutAggregatedField:h}}(e,l,i),h=p.transform,m=p.continuousAxisChannelDef,v=p.continuousAxis,g=p.groupby,y=p.aggregate,b=p.encodingWithoutContinuousAxis,x=p.ticksOrient,w=p.boxOrient,O=p.customTooltipWithoutAggregatedField,k=(b.color,b.size),E=_I(b,["color","size"]),S=function(e){return EL(s,v,m,e,i.boxplot)},C=S(E),_=S(b),j=S(Object.assign(Object.assign({},E),k?{size:k}:{})),A=OL([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),T={type:"tick",color:"black",opacity:1,orient:x,invalid:null},N="min-max"===d?A:OL([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),R=[].concat(Object(gh.a)(C({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N})),Object(gh.a)(C({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N})),Object(gh.a)(C({partName:"ticks",mark:T,positionPrefix:"lower_whisker",extraEncoding:N})),Object(gh.a)(C({partName:"ticks",mark:T,positionPrefix:"upper_whisker",extraEncoding:N}))),D=[].concat(Object(gh.a)("tukey"!==d?R:[]),Object(gh.a)(_({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:A})),Object(gh.a)(j({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},fD(i.boxplot.median)&&i.boxplot.median.color?{color:i.boxplot.median.color}:{}),f?{size:f}:{}),{orient:x}),positionPrefix:"mid_box",extraEncoding:A})));if("min-max"!==d){var I='datum["lower_box_'.concat(m.field,'"]'),M='datum["upper_box_'.concat(m.field,'"]'),F="(".concat(M," - ").concat(I,")"),P="".concat(I," - ").concat(l," * ").concat(F),z="".concat(M," + ").concat(l," * ").concat(F),L='datum["'.concat(m.field,'"]'),B={joinaggregate:DL(m.field),groupby:g},W=void 0;"tukey"===d&&(W={transform:[{filter:"(".concat(P," <= ").concat(L,") && (").concat(L," <= ").concat(z,")")},{aggregate:[{op:"min",field:m.field,as:"lower_whisker_"+m.field},{op:"max",field:m.field,as:"upper_whisker_"+m.field},{op:"min",field:"lower_box_"+m.field,as:"lower_box_"+m.field},{op:"max",field:"upper_box_"+m.field,as:"upper_box_"+m.field}].concat(Object(gh.a)(y)),groupby:g}],layer:R});E.tooltip;var U=_I(E,["tooltip"]),V=m.scale,H=m.axis,q=kL(m),G=SL(s,"outliers",i.boxplot,{transform:[{filter:"(".concat(L," < ").concat(P,") || (").concat(L," > ").concat(z,")")}],mark:"point",encoding:Object.assign(Object.assign(Object(su.a)({},v,Object.assign(Object.assign(Object.assign({field:m.field,type:m.type},void 0!==q?{title:q}:{}),void 0!==V?{scale:V}:{}),void 0!==H?{axis:H}:{})),U),O?{tooltip:O}:{})})[0];G&&W?c={transform:[B],layer:[G,W]}:G?(c=G).transform.unshift(B):W&&(c=W).transform.unshift(B)}return c?Object.assign(Object.assign({},u),{layer:[c,{transform:h,layer:D}]}):Object.assign(Object.assign({},u),{transform:(r=u.transform,null!==r&&void 0!==r?r:[]).concat(h),layer:D})}function DL(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}var IL=ZD({ticks:1,rule:1}),ML=new CI("errorbar",FL);function FL(e,t){var n=t.config,r=zL(e,"errorbar",n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.ticksOrient,c=r.markDef,l=r.outerSpec,f=r.tooltipEncoding,d=EL(c,o,a,u,n.errorbar),p={type:"tick",orient:s};return Object.assign(Object.assign({},l),{transform:i,layer:[].concat(Object(gh.a)(d({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:f})),Object(gh.a)(d({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:f})),Object(gh.a)(d({partName:"rule",mark:"rule",positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})))})}function PL(e,t){var n=e.encoding;if(function(e){return(Rz(e.x)||Rz(e.y))&&!Rz(e.x2)&&!Rz(e.y2)&&!Rz(e.xError)&&!Rz(e.xError2)&&!Rz(e.yError)&&!Rz(e.yError2)}(n))return{orient:jL(e,t),inputType:"raw"};var r=function(e){return Rz(e.x2)||Rz(e.y2)}(n),i=function(e){return Rz(e.xError)||Rz(e.xError2)||Rz(e.yError)||Rz(e.yError2)}(n),a=n.x,o=n.y;if(r){if(i)throw new Error(t+" cannot be both type aggregated-upper-lower and aggregated-error");var u=n.x2,s=n.y2;if(Rz(u)&&Rz(s))throw new Error(t+" cannot have both x2 and y2");if(Rz(u)){if(Rz(a)&&Uz(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+t)}if(Rz(s)){if(Rz(o)&&Uz(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+t)}throw new Error("No ranged axis")}var c=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(Rz(l)&&!Rz(c))throw new Error(t+" cannot have xError2 without xError");if(Rz(d)&&!Rz(f))throw new Error(t+" cannot have yError2 without yError");if(Rz(c)&&Rz(f))throw new Error(t+" cannot have both xError and yError with both are quantiative");if(Rz(c)){if(Rz(a)&&Uz(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(Rz(f)){if(Rz(o)&&Uz(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function zL(e,t,n){var r,i=e.mark,a=e.encoding,o=e.selection,u=(e.projection,_I(e,["mark","encoding","selection","projection"])),s=xI(i)?i:{type:i};o&&XF(HF.selectionNotSupported(t));var c=PL(e,t),l=c.orient,f=c.inputType,d=CL(e,l,t),p=d.continuousAxisChannelDef,h=d.continuousAxisChannelDef2,m=d.continuousAxisChannelDefError,v=d.continuousAxisChannelDefError2,g=d.continuousAxis,y=function(e,t,n,r,i,a,o,u){var s,c=[],l=[],f=t.field,d=!1;if("raw"===a){var p,h,m,v=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":u.errorbar.center,g=e.extent?e.extent:"mean"===v?"stderr":"iqr";if("median"===v!==("iqr"===g)&&XF(HF.errorBarCenterIsUsedWithWrongExtent(v,g,o)),"stderr"===g||"stdev"===g)c=[{op:g,field:f,as:"extent_"+f},{op:v,field:f,as:"center_"+f}],l=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],s=[{fieldPrefix:"center_",titlePrefix:iI(v)},{fieldPrefix:"upper_",titlePrefix:LL(v,g,"+")},{fieldPrefix:"lower_",titlePrefix:LL(v,g,"-")}],d=!0;else e.center&&e.extent&&XF(HF.errorBarCenterIsNotNeeded(e.extent,o)),"ci"===g?(p="mean",h="ci0",m="ci1"):(p="median",h="q1",m="q3"),c=[{op:h,field:f,as:"lower_"+f},{op:m,field:f,as:"upper_"+f},{op:p,field:f,as:"center_"+f}],s=[{fieldPrefix:"upper_",titlePrefix:Kz({field:f,aggregate:m,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Kz({field:f,aggregate:h,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Kz({field:f,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})}]}else{(e.center||e.extent)&&XF(HF.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===a?(s=[],l=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===a&&(s=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],i?l.push({calculate:'datum["'.concat(f,'"] + datum["').concat(i.field,'"]'),as:"lower_"+f}):l.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));var y,b=Object(Ri.a)(l);try{for(b.s();!(y=b.n()).done;){var x=y.value;s.push({fieldPrefix:x.as.substring(0,6),titlePrefix:sI(sI(x.calculate,'datum["',""),'"]',"")})}}catch(w){b.e(w)}finally{b.f()}}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:s,tooltipTitleWithFieldName:d}}(s,p,h,m,v,f,t,n),b=y.errorBarSpecificAggregate,x=y.postAggregateCalculates,w=y.tooltipSummary,O=y.tooltipTitleWithFieldName,k=g,E=(a[k],"x"===g?"x2":"y2"),S=(a[E],"x"===g?"xError":"yError"),C=(a[S],"x"===g?"xError2":"yError2"),_=(a[C],vL(_I(a,["symbol"===typeof k?k:k+"","symbol"===typeof E?E:E+"","symbol"===typeof S?S:S+"","symbol"===typeof C?C:C+""]),n)),j=_.bins,A=_.timeUnits,T=_.aggregate,N=_.groupby,R=_.encoding,D=[].concat(Object(gh.a)(T),Object(gh.a)(b)),I="raw"!==f?[]:N,M=OL(w,p,R,O);return{transform:[].concat(Object(gh.a)((r=u.transform,null!==r&&void 0!==r?r:[])),Object(gh.a)(j),Object(gh.a)(A),Object(gh.a)(0===D.length?[]:[{aggregate:D,groupby:I}]),Object(gh.a)(x)),groupby:I,continuousAxisChannelDef:p,continuousAxis:g,encodingWithoutContinuousAxis:R,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:s,outerSpec:u,tooltipEncoding:M}}function LL(e,t,n){return iI(e)+" "+n+" "+t}var BL=ZD({band:1,borders:1}),WL=new CI("errorband",UL);function UL(e,t){var n=t.config,r=zL(e,"errorband",n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.markDef,c=r.outerSpec,l=r.tooltipEncoding,f=s,d=EL(f,o,a,u,n.errorband),p=void 0!==e.encoding.x&&void 0!==e.encoding.y,h={type:p?"area":"rect"},m={type:p?"line":"rule"},v=Object.assign(Object.assign({},f.interpolate?{interpolate:f.interpolate}:{}),f.tension&&f.interpolate?{interpolate:f.tension}:{});return p?(h=Object.assign(Object.assign({},h),v),m=Object.assign(Object.assign({},m),v)):f.interpolate?XF(HF.errorBand1DNotSupport("interpolate")):f.tension&&XF(HF.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},c),{transform:i,layer:[].concat(Object(gh.a)(d({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})),Object(gh.a)(d({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:l})),Object(gh.a)(d({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:l})))})}var VL={};function HL(e,t,n){var r=new CI(e,t);VL[e]={normalizer:r,parts:n}}HL("boxplot",RL,AL),HL("errorbar",FL,IL),HL("errorband",UL,BL);var qL=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],GL={clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},$L=(ZD(GL),{single:{on:"click",fields:["_vgsid_"],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}});function KL(e){return!!e&&("legend"===e||!!e.legend)}function XL(e){return KL(e)&&fD(e)}function YL(e){return void 0!==e.concat}function JL(e){return void 0!==e.vconcat}function ZL(e){return void 0!==e.hconcat}function QL(e){return void 0!==e.repeat}function eB(e){return fD(e)&&void 0!==e.step}var tB=ZD({align:1,bounds:1,center:1,columns:1,spacing:1});function nB(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e["width"===t?"continuousWidth":"continuousHeight"]}function rB(e,t){var n=iB(e,t);return eB(n)?n.step:aB}function iB(e,t){var n;return fI(null!==(n=e[t])&&void 0!==n?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}var aB=20;var oB={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:aB},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},area:{},bar:kI,circle:{},geoshape:{},image:{},line:{},point:{},rect:EI,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},axis:{},axisX:{},axisY:{},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:$L,style:{},title:{},facet:{spacing:20},repeat:{spacing:20},concat:{spacing:20}};function uB(e){return gD({},oB,e)}var sB=["view"].concat(Object(gh.a)(bI)),cB=["background","padding","facet","concat","repeat","numberFormat","timeFormat","countTitle","header","scale","selection","overlay"],lB=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function fB(e){e=zD(e);var t,n=Object(Ri.a)(cB);try{for(n.s();!(t=n.n()).done;){delete e[t.value]}}catch(O){n.e(O)}finally{n.f()}if(e.legend){var r,i=Object(Ri.a)(qL);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e.legend[a]}}catch(O){i.e(O)}finally{i.f()}}if(e.mark){var o,u=Object(Ri.a)(OI);try{for(u.s();!(o=u.n()).done;){var s=o.value;delete e.mark[s]}}catch(O){u.e(O)}finally{u.f()}}var c,l=Object(Ri.a)(sB);try{for(l.s();!(c=l.n()).done;){var f,d=c.value,p=Object(Ri.a)(OI);try{for(p.s();!(f=p.n()).done;){var h=f.value;delete e[d][h]}}catch(O){p.e(O)}finally{p.f()}var m=lB[d];if(m){var v,g=Object(Ri.a)(m);try{for(g.s();!(v=g.n()).done;){var y=v.value;delete e[d][y]}}catch(O){g.e(O)}finally{g.f()}}dB(e,d)}}catch(O){l.e(O)}finally{l.f()}var b,x=Object(Ri.a)(ZD(VL));try{for(x.s();!(b=x.n()).done;){delete e[b.value]}}catch(O){x.e(O)}finally{x.f()}for(var w in dB(e,"title","group-title"),e)fD(e[w])&&0===ZD(e[w]).length&&delete e[w];return ZD(e).length>0?e:void 0}function dB(e,t,n,r){var i="title"===t?rz(e.title).mark:r?e[t][r]:e[t];"view"===t&&(n="cell");var a=Object.assign(Object.assign({},i),e.style[t]);ZD(a).length>0&&(e.style[null!==n&&void 0!==n?n:t]=a),r||delete e[t]}function pB(e){return void 0!==e.layer}function hB(e){return(hB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mB(e,t,n){return(mB="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hB(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vB(e,t){return(vB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gB(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vB(e,t)}function yB(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function bB(e){return(bB="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wB(e,t){return!t||"object"!==bB(t)&&"function"!==typeof t?xB(e):t}function OB(e){return function(){var t,n=hB(e);if(yB()){var r=hB(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return wB(this,t)}}var kB=function(){function e(){uS(this,e)}return cS(e,[{key:"map",value:function(e,t){return Sz(e)?this.mapFacet(e,t):QL(e)?this.mapRepeat(e,t):ZL(e)?this.mapHConcat(e,t):JL(e)?this.mapVConcat(e,t):YL(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}},{key:"mapLayerOrUnit",value:function(e,t){if(pB(e))return this.mapLayer(e,t);if(SI(e))return this.mapUnit(e,t);throw new Error(HF.invalidSpec(e))}},{key:"mapLayer",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{layer:e.layer.map((function(e){return n.mapLayerOrUnit(e,t)}))})}},{key:"mapHConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapVConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapConcat",value:function(e,t){var n=this,r=e.concat,i=_I(e,["concat"]);return Object.assign(Object.assign({},i),{concat:r.map((function(e){return n.map(e,t)}))})}},{key:"mapFacet",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}},{key:"mapRepeat",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}}]),e}(),EB={zero:1,center:1,normalize:1};function SB(e){return!!EB[e]}var CB=["bar","area","rule","point","circle","square","line","text","tick"],_B=["bar","area"];function jB(e){var t=e.x,n=e.y;if(Rz(t)&&Rz(n))if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!==!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}else{if(Rz(t)&&"quantitative"===t.type)return"x";if(Rz(n)&&"quantitative"===n.type)return"y"}}function AB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=xI(e)?e.type:e;if(!HD(CB,r))return null;var i=jB(t);if(!i)return null;var a,o=t[i],u=Iz(o)?Bz(o,{}):void 0,s="x"===i?"y":"x",c=t[s],l=Iz(c)?Bz(c,{}):void 0,f=dM.reduce((function(e,n){if("tooltip"!==n&&hL(t,n)){var r=t[n];(lD(r)?r:[r]).forEach((function(t){var r=Qz(t);if(!r.aggregate){var i=Iz(r)?Bz(r,{}):void 0;(!i||i!==l&&i!==u)&&e.push({channel:n,fieldDef:r})}}))}return e}),[]);if(void 0!==o.stack?a=ED(o.stack)?o.stack?"zero":null:o.stack:f.length>0&&HD(_B,r)&&(a="zero"),!a||!SB(a))return null;if(mL(t)&&0===f.length)return null;if(o.scale&&o.scale.type&&o.scale.type!==IP.LINEAR){if(n.disallowNonLinearStack)return null;XF(HF.cannotStackNonLinearScale(o.scale.type))}return hL(t,i===zI?"x2":"y2")?(void 0!==o.stack&&XF(HF.cannotStackRangedMark(i)),null):(o.aggregate&&!HD(MI,o.aggregate)&&XF(HF.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:c?s:void 0,fieldChannel:i,impute:null!==o.impute&&gI(r),stackBy:f,offset:a})}function TB(e){e.point,e.line;var t=_I(e,["point","line"]);return ZD(t).length>1?t:t.type}function NB(e){for(var t=0,n=["line","area","rule","trail"];t<n.length;t++){var r=n[t];e[r]&&(e=Object.assign(Object.assign({},e),Object(su.a)({},r,BD(e[r],["point","line"]))))}return e}function RB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===e.point?{opacity:0}:e.point?fD(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?fD(t.point)?t.point:{}:void 0}function DB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}var IB=function(){function e(){uS(this,e),this.name="path-overlay"}return cS(e,[{key:"hasMatchingType",value:function(e,t){if(SI(e)){var n=e.mark,r=e.encoding,i=xI(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!RB(i,t[i.type],r);case"area":return!!RB(i,t[i.type],r)||!!DB(i,t[i.type])}}return!1}},{key:"run",value:function(e,t,n){var r=t.config,i=e.selection,a=e.projection,o=e.encoding,u=e.mark,s=_I(e,["selection","projection","encoding","mark"]),c=xI(u)?u:{type:u},l=RB(c,r[c.type],o),f="area"===c.type&&DB(c,r[c.type]),d=[Object.assign(Object.assign({},i?{selection:i}:{}),{mark:TB(Object.assign(Object.assign({},c),"area"===c.type?{opacity:.7}:{})),encoding:BD(o,["shape"])})],p=AB(c,o),h=o;if(p){var m=p.fieldChannel,v=p.offset;h=Object.assign(Object.assign({},o),Object(su.a)({},m,Object.assign(Object.assign({},o[m]),v?{stack:v}:{})))}return f&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"line"},LD(c,["clip","interpolate","tension","tooltip"])),f),encoding:h})),l&&d.push(Object.assign(Object.assign({},a?{projection:a}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},LD(c,["clip","tooltip"])),l),encoding:h})),n(Object.assign(Object.assign({},s),{layer:d}),Object.assign(Object.assign({},t),{config:NB(r)}))}}]),e}(),MB=function(){function e(){uS(this,e),this.name="RangeStep"}return cS(e,[{key:"hasMatchingType",value:function(e){var t,n;if(SI(e)&&e.encoding){var r,i=Object(Ri.a)(hM);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=e.encoding[a];if(o&&Rz(o)&&(null===(n=null===(t=o)||void 0===t?void 0:t.scale)||void 0===n?void 0:n.rangeStep))return!0}}catch(u){i.e(u)}finally{i.f()}}return!1}},{key:"run",value:function(e){var t,n,r,i={},a=Object.assign({},e.encoding),o=Object(Ri.a)(hM);try{for(o.s();!(r=o.n()).done;){var u=r.value,s=mM(u),c=a[u];if(c&&Rz(c)&&(null===(n=null===(t=c)||void 0===t?void 0:t.scale)||void 0===n?void 0:n.rangeStep)){var l=c.scale,f=_I(c,["scale"]),d=l,p=(d.rangeStep,_I(d,["rangeStep"]));i[s]={step:l.rangeStep},XF(HF.RANGE_STEP_DEPRECATED),a=Object.assign(Object.assign({},a),Object(su.a)({},u,Object.assign(Object.assign({},f),ZD(p).length>0?{scale:p}:{})))}}}catch(h){o.e(h)}finally{o.f()}return Object.assign(Object.assign(Object.assign({},i),e),{encoding:a})}}]),e}(),FB=function(){function e(){uS(this,e),this.name="RuleForRangedLine"}return cS(e,[{key:"hasMatchingType",value:function(e){if(SI(e)){var t=e.encoding;if("line"===e.mark){var n,r=Object(Ri.a)(uM);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=t[cM(i)];if(t[i]&&Rz(a)&&!lL(a.bin))return!0}}catch(o){r.e(o)}finally{r.f()}}}return!1}},{key:"run",value:function(e,t,n){var r=e.encoding;return XF(HF.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign(Object.assign({},e),{mark:"rule"}),t)}}]),e}();function PB(e){var t=e.parentEncoding,n=e.encoding;if(t&&n){var r=ZD(t).reduce((function(e,t){return n[t]&&e.push(t),e}),[]);r.length>0&&XF(HF.encodingOverridden(r))}var i=Object.assign(Object.assign({},null!==t&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{});return ZD(i).length>0?i:void 0}function zB(e){var t=e.parentProjection,n=e.projection;return t&&n&&XF(HF.projectionOverridden({parentProjection:t,projection:n})),null!==n&&void 0!==n?n:t}function LB(e,t){void 0===t&&(t=uB(e.config));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return BB.map(e,{config:t})}(e,t),r=function(e,t,n){var r=t.width,i=t.height,a=SI(e)||pB(e),o={};a?"container"==r&&"container"==i?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==i&&(o.type="fit-y",o.contains="padding"):("container"==r&&(XF(HF.containerSizeNonSingle("width")),r=void 0),"container"==i&&(XF(HF.containerSizeNonSingle("height")),i=void 0));var u=Object.assign(Object.assign(Object.assign({type:"pad"},o),n?WB(n.autosize):{}),WB(e.autosize));"fit"!==u.type||a||(XF(HF.FIT_NON_SINGLE),u.type="pad");"container"==r&&"fit"!=u.type&&"fit-x"!=u.type&&XF(HF.containerSizeNotCompatibleWithAutosize("width"));"container"==i&&"fit"!=u.type&&"fit-y"!=u.type&&XF(HF.containerSizeNotCompatibleWithAutosize("height"));if(PD(u,{type:"pad"}))return;return u}(n,{width:e.width,height:e.height,autosize:e.autosize},t);return Object.assign(Object.assign({},n),r?{autosize:r}:{})}var BB=new(function(e){gB(n,e);var t=OB(n);function n(){var e;return uS(this,n),(e=t.apply(this,arguments)).nonFacetUnitNormalizers=[TL,ML,WL,new IB,new FB,new MB],e}return cS(n,[{key:"map",value:function(e,t){if(SI(e)){var r=hL(e.encoding,PI),i=hL(e.encoding,"column"),a=hL(e.encoding,"facet");if(r||i||a)return this.mapFacetedUnit(e,t)}return mB(hB(n.prototype),"map",this).call(this,e,t)}},{key:"mapUnit",value:function(e,t){var n=t.parentEncoding,r=t.parentProjection;if(n||r)return this.mapUnitWithParentEncodingOrProjection(e,t);var i,a=this.mapLayerOrUnit.bind(this),o=Object(Ri.a)(this.nonFacetUnitNormalizers);try{for(o.s();!(i=o.n()).done;){var u=i.value;if(u.hasMatchingType(e,t.config))return u.run(e,t,a)}}catch(s){o.e(s)}finally{o.f()}return e}},{key:"mapRepeat",value:function(e,t){var n=e.repeat;return!lD(n)&&e.columns&&(e=BD(e,["columns"]),XF(HF.columnsNotSupportByRowCol("repeat"))),Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}},{key:"mapFacet",value:function(e,t){return Ez(e.facet)&&e.columns&&(e=BD(e,["columns"]),XF(HF.columnsNotSupportByRowCol("facet"))),mB(hB(n.prototype),"mapFacet",this).call(this,e,t)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(e,t){var n=e.encoding,r=e.projection,i=t.parentEncoding,a=t.parentProjection,o=t.config,u=zB({parentProjection:a,projection:r}),s=PB({parentEncoding:i,encoding:n});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),u?{projection:u}:{}),s?{encoding:s}:{}),{config:o})}},{key:"mapFacetedUnit",value:function(e,t){var n=e.encoding,r=n.row,i=n.column,a=n.facet,o=_I(n,["row","column","facet"]),u=e.mark,s=e.width,c=e.projection,l=e.height,f=e.selection,d=(e.encoding,_I(e,["mark","width","projection","height","selection","encoding"])),p=this.getFacetMappingAndLayout({row:r,column:i,facet:a}),h=p.facetMapping,m=p.layout;return this.mapFacet(Object.assign(Object.assign(Object.assign({},d),m),{facet:h,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},c?{projection:c}:{}),{mark:u}),s?{width:s}:{}),l?{height:l}:{}),{encoding:o}),f?{selection:f}:{})}),t)}},{key:"getFacetMappingAndLayout",value:function(e){var t,n=e.row,r=e.column,i=e.facet;if(n||r){i&&XF(HF.facetChannelDropped([].concat(Object(gh.a)(n?[PI]:[]),Object(gh.a)(r?["column"]:[]))));for(var a={},o={},u=0,s=[PI,"column"];u<s.length;u++){var c=s[u],l=e[c];if(l){l.align,l.center,l.spacing,l.columns;var f=_I(l,["align","center","spacing","columns"]);a[c]=f;for(var d=0,p=["align","center","spacing"];d<p.length;d++){var h=p[d];void 0!==l[h]&&(o[h]=null!==(t=o[h])&&void 0!==t?t:{},o[h][c]=l[h])}}}return{facetMapping:a,layout:o}}var m=i.align,v=i.center,g=i.spacing,y=i.columns;return{facetMapping:_I(i,["align","center","spacing","columns"]),layout:Object.assign(Object.assign(Object.assign(Object.assign({},m?{align:m}:{}),v?{center:v}:{}),g?{spacing:g}:{}),y?{columns:y}:{})}}},{key:"mapLayer",value:function(e,t){var r=t.parentEncoding,i=t.parentProjection,a=_I(t,["parentEncoding","parentProjection"]),o=e.encoding,u=e.projection,s=_I(e,["encoding","projection"]),c=Object.assign(Object.assign({},a),{parentEncoding:PB({parentEncoding:r,encoding:o}),parentProjection:zB({parentProjection:i,projection:u})});return mB(hB(n.prototype),"mapLayer",this).call(this,s,c)}}]),n}(kB));function WB(e){return dD(e)?{type:e}:null!==e&&void 0!==e?e:{}}var UB=["background","padding"];function VB(e){return UB.reduce((function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t}),{})}function HB(e){return!!e.url}function qB(e){return!!e.values}function GB(e){return!!e.name&&!HB(e)&&!qB(e)&&!$B(e)}function $B(e){return e&&(KB(e)||XB(e)||YB(e))}function KB(e){return!!e.sequence}function XB(e){return!!e.sphere}function YB(e){return!!e.graticule}var JB="main";function ZB(e){return void 0!==e.filter}function QB(e){var t;return void 0!==(null===(t=e)||void 0===t?void 0:t.stop)}function eW(e){return void 0!==e.lookup}function tW(e){return void 0!==e.pivot}function nW(e){return void 0!==e.density}function rW(e){return void 0!==e.quantile}function iW(e){return void 0!==e.regression}function aW(e){return void 0!==e.loess}function oW(e){return void 0!==e.sample}function uW(e){return void 0!==e.window}function sW(e){return void 0!==e.joinaggregate}function cW(e){return void 0!==e.flatten}function lW(e){return void 0!==e.calculate}function fW(e){return!!e.bin}function dW(e){return void 0!==e.impute}function pW(e){return void 0!==e.timeUnit}function hW(e){return void 0!==e.aggregate}function mW(e){return void 0!==e.stack}function vW(e){return void 0!==e.fold}function gW(e){return!!e.signal}function yW(e){return!!e.step}function bW(e){return!lD(e)&&("field"in e&&"data"in e)}var xW=ZD({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeMiterLimit:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,x:1,y:1,x2:1,y2:1,width:1,height:1,aspect:1}),wW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],OW={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function kW(e){return e.condition}var EW=["domain","grid","labels","ticks","title"],SW={grid:"grid",gridColor:"grid",gridDash:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",domain:"main",domainColor:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontWeight:"main",labelLimit:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",maxExtent:"main",minExtent:"main",offset:"main",position:"main",tickColor:"main",tickExtra:"main",tickOffset:"both",tickOpacity:"main",tickRound:"main",ticks:"main",tickSize:"main",title:"main",titleAlign:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",tickWidth:"both",tickCount:"both",values:"both",scale:"both",zindex:"both"},CW={orient:1,bandPosition:1,domain:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,values:1,translate:1,zindex:1},_W=Object.assign(Object.assign({},CW),{labelExpr:1,encoding:1});ZD(_W);function jW(e,t,n,r){var i=t&&t.condition,a=r(t);if(i){var o=xD(i).map((function(t){var n=r(t),i=function(e){return e.selection}(t)?qU(e,t.selection):$U(e,t.test);return Object.assign({test:i},n)}));return Object(su.a)({},n,[].concat(Object(gh.a)(o),Object(gh.a)(void 0!==a?[a]:[])))}return void 0!==a?Object(su.a)({},n,a):{}}function AW(e){var t=e.channel,n=e.channelDef,r=e.markDef,i=e.scale,a=MW(e);return Rz(n)&&!II(n.aggregate)&&i&&GP(i.get("type"))&&!1===i.get("zero")?TW({fieldDef:n,channel:t,markDef:r,ref:a}):a}function TW(e){var t=e.fieldDef,n=e.channel,r=e.markDef,i=e.ref;return gI(r.type)?i:[NW(t,n),i]}function NW(e,t){var n=RW(e,!0),r="x"===cM(t)?{value:0}:{field:{group:"height"}};return Object.assign({test:n},r)}function RW(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return NP(dD(e)?e:Bz(e,{expr:"datum"}),!t)}function DW(e,t,n,r){var i=Object.assign(Object.assign({},t?{scale:t}:{}),{field:Bz(e,n)});if(r){var a=r.offset,o=r.band;return Object.assign(Object.assign(Object.assign({},i),a?{offset:a}:{}),o?{band:o}:{})}return i}function IW(e){var t=e.scaleName,n=e.fieldDef,r=e.fieldDef2,i=e.offset,a=e.startSuffix,o=e.band,u=void 0===o?.5:o,s=0<u&&u<1?"datum":void 0,c=Bz(n,{expr:s,suffix:a}),l=void 0!==r?Bz(r,{expr:s}):Bz(n,{suffix:"end",expr:s});if(0===u)return Object.assign({scale:t,field:c},i?{offset:i}:{});if(1===u)return Object.assign({scale:t,field:l},i?{offset:i}:{});var f="".concat(u," * ").concat(c," + ").concat(1-u," * ").concat(l);return Object.assign({signal:'scale("'.concat(t,'", ').concat(f,")")},i?{offset:i}:{})}function MW(e){var t=e.channel,n=e.channelDef,r=e.channel2Def,i=e.markDef,a=e.config,o=e.scaleName,u=e.scale,s=e.stack,c=e.offset,l=e.defaultRef;if(n){if(Rz(n)){if(Dz(n)){var f=jz(t,n,r,i,a,{isMidPoint:!0});if(cL(n.bin)||f&&n.timeUnit)return HD([zI,LI],t)&&HD(["quantitative","temporal"],n.type)?s&&s.impute?DW(n,o,{binSuffix:"mid"},{offset:c}):IW({scaleName:o,fieldDef:n,band:f,offset:c}):DW(n,o,uL(n,t)?{binSuffix:"range"}:{},{offset:c});if(lL(n.bin)){if(Rz(r))return IW({scaleName:o,fieldDef:n,fieldDef2:r,band:f,offset:c});var d=t===zI?"x2":"y2";XF(HF.channelRequiredForBinned(d))}}if(u){var p=u.get("type");if(HP(p))return DW(n,o,{binSuffix:"range"},"band"===p?{band:fI(Pz(n)?n.band:void 0,.5),offset:c}:{offset:c})}return DW(n,o,{},{offset:c})}if(Mz(n)){var h=n.value,m=c?{offset:c}:{};return Object.assign(Object.assign({},FW(t,h)),m)}}var v=wD(l)?Object.assign(Object.assign({},l()),c?{offset:c}:{}):l;return v?Object.assign(Object.assign({},v),c?{offset:c}:{}):v}function FW(e,t){return HD(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:HD(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:{value:t}}function PW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.markDef,i=t.encoding,a=t.config,o=n.vgChannel,u=void 0===o?e:o,s=n.defaultRef,c=n.defaultValue;void 0===s&&(c=null!==c&&void 0!==c?c:u===e?r[e]:fI(r[e],r[u],uz(e,r,a,{vgChannel:u})),s=c?{value:c}:void 0);var l=i[e];return jW(t,l,u,(function(n){return MW({channel:e,channelDef:n,markDef:r,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})}))}function zW(e){var t=e.markDef,n=e.encoding,r=e.config,i=t.filled,a=t.type,o={fill:uz("fill",t,r),stroke:uz("stroke",t,r),color:uz("color",t,r)},u=HD(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,s=fI(t.fill,!0===i?t.color:void 0,o.fill,!0===i?o.color:void 0,u),c=fI(t.stroke,!1===i?t.color:void 0,o.stroke,!1===i?o.color:void 0),l=i?"fill":"stroke",f=Object.assign(Object.assign({},s?{fill:{value:s}}:{}),c?{stroke:{value:c}}:{});return t.color&&(i?t.fill:t.stroke)&&XF(HF.droppingColor("property",{fill:"fill"in t,stroke:"stroke"in t})),Object.assign(Object.assign(Object.assign(Object.assign({},f),PW("color",e,{vgChannel:l,defaultValue:i?s:c})),PW("fill",e,{defaultValue:n.fill?s:void 0})),PW("stroke",e,{defaultValue:n.stroke?c:void 0}))}function LW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=e.encoding[t];return jW(e,n,t,(function(t){return BW(t,e.config)}))}function BW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(e){if(Mz(e))return{value:e.value};if(Dz(e))return cz(e,Jz(e),n,t)}}function WW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.encoding,r=e.markDef,i=e.config,a=n.tooltip;return lD(a)?{tooltip:UW({tooltip:a},i,t)}:jW(e,a,"tooltip",(function(a){var o=BW(a,e.config,t.reactiveGeom?"datum.datum":"datum");if(o)return o;if(null!==a){var u=fI(r.tooltip,uz("tooltip",r,i));return!0===u&&(u={content:"encoding"}),dD(u)?{value:u}:fD(u)?"encoding"===u.content?UW(n,i,t):{signal:"datum"}:void 0}}))}function UW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.reactiveGeom,i=[],a={},o={},u=r?"datum.datum":"datum",s=[];function c(n,r){var i=cM(r),a=Dz(n)?n:Object.assign(Object.assign({},n),{type:e[i].type}),c=xD(Kz(a,t,{allowDisabling:!1})).join(", "),l=BW(a,t,u).signal;if("x"===r||"y"===r){var f="x"===r?"x2":"y2",d=Zz(e[f]);if(lL(a.bin)&&d)l=pz(Bz(a,{expr:u}),Bz(d,{expr:u}),Jz(a),t),o[f]=!0}s.push({channel:r,key:c,value:l})}bL(e,(function(e,t){Rz(e)?c(e,t):Nz(e)&&c(e.condition,t)}));for(var l=0,f=s;l<f.length;l++){var d=f[l],p=d.channel,h=d.key,m=d.value;o[p]||a[h]||(i.push("".concat(pD(h),": ").concat(m)),a[h]=!0)}return i.length>0?{signal:"{".concat(i.join(", "),"}")}:void 0}function VW(e,t){var n=t[e+"Offset"];if(n)return n}function HW(e,t,n){var r=n.defaultPos,i=n.vgChannel,a=t.encoding,o=t.mark,u=t.markDef,s=t.config,c=t.stack,l=a[e],f=a[e===zI?"x2":"y2"],d=t.scaleName(e),p=t.getScaleComponent(e),h=VW(e,t.markDef),m=qW({model:t,markDef:u,config:s,defaultPos:r,channel:e,scaleName:d,scale:p,mark:o,checkBarAreaWithoutZero:!f}),v=l||!a.latitude&&!a.longitude?function(e){var t=e.channel,n=e.channelDef,r=e.scaleName,i=e.stack,a=e.offset;if(Rz(n)&&i&&t===i.fieldChannel)return Pz(n)&&void 0!==n.band?IW({scaleName:r,fieldDef:n,startSuffix:"start",band:n.band,offset:0}):DW(n,r,{suffix:"end"},{offset:a});return AW(e)}({channel:e,channelDef:l,channel2Def:f,markDef:u,config:s,scaleName:d,scale:p,stack:c,offset:h,defaultRef:m}):{field:t.getName(e)};return Object(su.a)({},null!==i&&void 0!==i?i:e,v)}function qW(e){var t=e.model,n=e.markDef,r=e.config,i=e.defaultPos,a=e.channel,o=e.scaleName,u=e.scale,s=e.mark,c=e.checkBarAreaWithoutZero;return function(){var e=cM(a),l=fI(n[a],uz(a,n,r));if(void 0!==l)return FW(a,l);if("zeroOrMin"===i||"zeroOrMax"===i){if(o){var f=u.get("type");if(HD([IP.LOG,IP.TIME,IP.UTC],f))!c||"bar"!==s&&"area"!==s||XF(HF.nonZeroScaleUsedWithLengthMark(s,e,{scaleType:f}));else{if(u.domainDefinitelyIncludesZero())return{scale:o,value:0};!c||"bar"!==s&&"area"!==s||XF(HF.nonZeroScaleUsedWithLengthMark(s,e,{zeroFalse:!1===u.explicit.zero}))}}return"zeroOrMin"===i?"x"===e?{value:0}:{field:{group:"height"}}:"x"===e?{field:{group:"width"}}:{value:0}}var d=t["x"===e?"width":"height"];return Object.assign(Object.assign({},d),{mult:.5})}}var GW={left:"x",center:"xc",right:"x2"},$W={top:"y",middle:"yc",bottom:"y2"};function KW(e,t,n){var r="x"===e?"align":"baseline",i=fI(t[r],uz(r,t,n));return"x"===e?GW[null!==i&&void 0!==i?i:"center"]:$W[null!==i&&void 0!==i?i:"middle"]}function XW(e,t,n){var r=n.defaultPos,i=n.defaultPos2;return n.range?YW(e,t,{defaultPos:r,defaultPos2:i}):HW(e,t,{defaultPos:r})}function YW(e,t,n){var r=n.defaultPos,i=n.defaultPos2,a=t.markDef,o=t.config,u="x"===e?"width":"height",s=function(e,t,n){var r,i=e.encoding,a=e.mark,o=e.markDef,u=e.stack,s=e.config,c="x2"===n?"x":"y",l="x2"===n?"width":"height",f=i[c],d=e.scaleName(c),p=e.getScaleComponent(c),h=VW(n,e.markDef);if(!f&&(i.latitude||i.longitude))return Object(su.a)({},n,{field:e.getName(n)});var m=function(e){var t=e.channel,n=e.channelDef,r=e.channel2Def,i=e.markDef,a=e.config,o=e.scaleName,u=e.scale,s=e.stack,c=e.offset,l=e.defaultRef;if(Rz(n)&&s&&t.charAt(0)===s.fieldChannel.charAt(0))return DW(n,o,{suffix:"start"},{offset:c});return AW({channel:t,channelDef:r,scaleName:o,scale:u,stack:s,markDef:i,config:a,offset:c,defaultRef:l})}({channel:n,channelDef:f,channel2Def:i[n],markDef:o,config:s,scaleName:d,scale:p,stack:u,offset:h,defaultRef:void 0});if(void 0!==m)return Object(su.a)({},n,m);var v=qW({model:e,markDef:o,config:s,defaultPos:t,channel:n,scaleName:d,scale:p,mark:a,checkBarAreaWithoutZero:!i[n]})();return fI(JW(n,o),JW(n,(r={},Object(su.a)(r,n,sz(n,o,s.style)),Object(su.a)(r,l,sz(l,o,s.style)),r)),JW(n,s[a]),JW(n,s.mark),Object(su.a)({},n,v))}(t,i,"x"===e?"x2":"y2"),c=s[u]?KW(e,a,o):e;return Object.assign(Object.assign({},HW(e,t,{defaultPos:r,vgChannel:c})),s)}function JW(e,t){var n="x2"===e?"width":"height";return t[e]?Object(su.a)({},e,FW(e,t[e])):t[n]?Object(su.a)({},n,{value:t[n]}):void 0}function ZW(e,t,n){var r,i,a,o,u=e.config,s=e.encoding,c=e.markDef,l="x"===t?"x2":"y2",f="x"===t?"width":"height",d=s[t],p=s[l],h=e.getScaleComponent(t),m=h?h.get("type"):void 0,v=e.scaleName(t),g=c.orient,y=null!==(o=null!==(a=null!==(i=null!==(r=s[f])&&void 0!==r?r:s.size)&&void 0!==i?i:c[f])&&void 0!==a?a:c.size)&&void 0!==o?o:uz("size",c,u,{vgChannel:f}),b="x"===t?"vertical"===g:"horizontal"===g;return Rz(d)&&(cL(d.bin)||lL(d.bin)||d.timeUnit&&!p)&&!y&&!HP(m)?function(e){var t,n=e.fieldDef,r=e.fieldDef2,i=e.channel,a=e.band,o=e.scaleName,u=e.markDef,s=e.spacing,c=void 0===s?0:s,l=e.reverse,f={x:l?c:0,x2:l?0:c,y:l?0:c,y2:l?c:0},d=i===zI?"x2":"y2";return cL(n.bin)||n.timeUnit?(t={},Object(su.a)(t,d,tU({channel:i,fieldDef:n,scaleName:o,markDef:u,band:(1-a)/2,offset:f["".concat(i,"2")]})),Object(su.a)(t,i,tU({channel:i,fieldDef:n,scaleName:o,markDef:u,band:1-(1-a)/2,offset:f[i]})),t):lL(n.bin)&&Rz(r)?(p={},Object(su.a)(p,d,DW(n,o,{},{offset:f["".concat(i,"2")]})),Object(su.a)(p,i,DW(r,o,{},{offset:f[i]})),p):void XF(HF.channelRequiredForBinned(d));var p}({fieldDef:d,fieldDef2:p,channel:t,markDef:c,scaleName:v,band:jz(t,d,void 0,c,u),spacing:fI(c.binSpacing,u[n].binSpacing),reverse:h.get("reverse")}):(Rz(d)&&HP(m)||b)&&!p?Rz(d)&&m===IP.BAND?function(e,t,n,r){var i,a,o=n.scaleName(t),u="x"===t?"width":"height",s=n.markDef,c=n.encoding,l=n.config,f=KW(t,s,l),d=Object(su.a)({},f,DW(e,o,{},{band:.5}));if(c.size||null!==s.size&&void 0!==s.size){if(s.orient){if(Qz(c.size)||Mz(c.size))return Object.assign(Object.assign({},d),PW("size",n,{vgChannel:u}));if(void 0!==s.size)return Object.assign(Object.assign({},d),Object(su.a)({},u,{value:s.size}))}else XF(HF.cannotApplySizeToNonOrientedMark(s.type))}if(void 0!==(null===(a=r)||void 0===a?void 0:a.value))return Object.assign(Object.assign({},d),Object(su.a)({},u,r));var p=e.band,h=void 0===p?1:p;return i={},Object(su.a)(i,t,DW(e,o,{binSuffix:"range"},{band:(1-h)/2})),Object(su.a)(i,u,null!==r&&void 0!==r?r:eU(o,h)),i}(d,t,e,QW(n,c,f,v,h,u,Pz(d)?d.band:void 0)):function(e,t,n){var r="x"===e?"xc":"yc",i="x"===e?"width":"height";return Object.assign(Object.assign({},HW(e,t,{defaultPos:"mid",vgChannel:r})),PW("size",t,{defaultRef:n,vgChannel:i}))}(t,e,QW(n,c,f,v,h,u)):YW(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function QW(e,t,n,r,i,a,o){var u=fI(t[n],t.size,uz("size",t,a,{vgChannel:n}));if(void 0!==u)return{value:u};if(i){var s=i.get("type");if("point"===s||"band"===s){if(void 0!==a[e].discreteBandSize)return{value:a[e].discreteBandSize};if(s===IP.POINT){var c=i.get("range");return yW(c)&&SD(c.step)?{value:c.step-2}:{value:aB-2}}return eU(r,o)}return{value:a[e].continuousBandSize}}var l=rB(a.view,n);return{value:fI(a[e].discreteBandSize,l-2)}}function eU(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{scale:e,band:t}}function tU(e){var t=e.channel,n=e.fieldDef,r=e.scaleName;return TW({fieldDef:n,channel:t,markDef:e.markDef,ref:IW({scaleName:r,fieldDef:n,band:e.band,offset:e.offset})})}function nU(e,t){var n="include"===t.color?zW(e):{},r=n.fill,i=void 0===r?void 0:r,a=n.stroke,o=void 0===a?void 0:a;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e,t){return xW.reduce((function(n,r){return void 0!==e[r]&&"ignore"!==t[r]&&(n[r]={value:e[r]}),n}),{})}(e.markDef,t)),rU(e,"fill",i)),rU(e,"stroke",o)),PW("opacity",e)),PW("fillOpacity",e)),PW("strokeOpacity",e)),PW("strokeWidth",e)),WW(e)),LW(e,"href"))}function rU(e,t,n){var r=e.config,i=e.mark;if("hide"===oz("invalid",e.markDef,r)&&n&&!gI(i)){var a=function(e,t){var n=t.invalid,r=void 0!==n&&n,i=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var i=r.get("type"),a=e.vgField(n,{expr:"datum"});a&&qP(i)&&(t[a]=!0)}return t}),{}),a=ZD(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(e){return RW(e,r)})).join(" ".concat(o," "))}return}(e,{invalid:!0,channels:xM});if(a)return Object(su.a)({},t,[{test:a,value:null}].concat(Object(gh.a)(xD(n))))}return n?Object(su.a)({},t,n):{}}function iU(e){var t=e.config;if(oz("invalid",e.markDef,t)){var n=function(e,t){var n=t.invalid,r=void 0!==n&&n,i=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var i=r.get("type"),a=e.vgField(n,{expr:"datum"});a&&qP(i)&&(t[a]=!0)}return t}),{}),a=ZD(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(e){return RW(e,r)})).join(" ".concat(o," "))}return}(e,{channels:["x","y"]});if(n)return{defined:{signal:n}}}return{}}function aU(e,t){if(void 0!==t)return Object(su.a)({},e,{value:t})}var oU={has:function(e){return"interval"!==e.type&&e.nearest},parse:function(e,t){if(t.events){var n,r=Object(Ri.a)(t.events);try{for(r.s();!(n=r.n()).done;){n.value.markname=e.getName("voronoi")}}catch(i){r.e(i)}finally{r.f()}}},marks:function(e,t,n){var r=t.project.hasChannel,i=r.x,a=r.y,o=e.mark;if(gI(o))return XF(HF.nearestNotSupportForContinuous(o)),n;var u={name:e.getName("voronoi"),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},WW(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!a?"datum.datum.x || 0":"0"},y:{expr:a||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((function(t,n){var r,i=null!==(r=t.name)&&void 0!==r?r:"";i===e.component.mark[0].name?s=n:i.indexOf("voronoi")>=0&&(c=!0)})),c||n.splice(s+1,0,u),n}},uU=function(){function e(t,n){uS(this,e),this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}return cS(e,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(e,t){this._children.indexOf(e)>-1?console.warn("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);return this._children.splice(t,1),t}},{key:"remove",value:function(){var e,t=this._parent.removeChild(this),n=Object(Ri.a)(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r._parent=this._parent,this._parent.addChild(r,t++)}}catch(i){n.e(i)}finally{n.f()}}},{key:"insertAsParentOf",value:function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}},{key:"swapWithParent",value:function(){var e,t=this._parent,n=t.parent,r=Object(Ri.a)(this._children);try{for(r.s();!(e=r.n()).done;){e.value.parent=t}}catch(i){r.e(i)}finally{r.f()}this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e,e&&e.addChild(this)}},{key:"children",get:function(){return this._children}}]),e}(),sU=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a){var o;return uS(this,n),(o=t.call(this,e,r)).type=i,o.refCounts=a,o._source=o._name=r,o.refCounts&&!(o._name in o.refCounts)&&(o.refCounts[o._name]=0),o}return cS(n,[{key:"clone",value:function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash="Output ".concat(pI())),this._hash}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(e){this._source=e}}]),n}(uU),cU=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).formula=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.formula))}},{key:"merge",value:function(e){for(var t in this.formula=Object.assign({},this.formula),e.formula)this.formula[t]&&!e.formula[t].band||(this.formula[t]=e.formula[t]);var n,r=Object(Ri.a)(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.removeChild(i),i.parent=this}}catch(a){r.e(a)}finally{r.f()}e.remove()}},{key:"producedFields",value:function(){return new Set(QD(this.formula).map((function(e){return e.as})))}},{key:"dependentFields",value:function(){return new Set(QD(this.formula).map((function(e){return e.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(UD(this.formula))}},{key:"assemble",value:function(){var e,t=[],n=Object(Ri.a)(QD(this.formula));try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.timeUnit,a=r.field,o=r.as;t.push({field:a,type:"timeunit",units:hP(i),as:[o,"".concat(o,"_end")]})}}catch(u){n.e(u)}finally{n.f()}return t}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){var i=n.timeUnit,a=n.field,o=kq(t)?t.encoding[lM(r)]:void 0,u=kq(t)&&Az(r,n,o,t.markDef,t.config);if(i){var s=Bz(n,{forAs:!0});e[UD({as:s,timeUnit:i,field:a})]=Object.assign({as:s,timeUnit:i,field:a},u?{band:!0}:{})}return e}),{});return 0===ZD(r).length?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t){var r=Object.assign({},t);return new n(e,Object(su.a)({},UD(r),r))}}]),n}(uU),lU=function e(){uS(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.items=n,this.hasChannel={},this.hasField={}},fU={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!KL(e.bind)},parse:function(e,t,n,r){r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:function(e,t,n){var r=t.name,i=t.project,a=t.bind,o=t.init&&t.init[0],u=oU.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((function(e,i){var s,c,l=tI("".concat(r,"_").concat(e.field));n.filter((function(e){return e.name===l})).length||n.unshift(Object.assign(Object.assign({name:l},o?{init:SU(o[i])}:{value:null}),{on:t.events?[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat(pD(e.field),"] : null")}]:[],bind:(s=a[e.field],c=null!==s&&void 0!==s?s:a[e.channel],null!==c&&void 0!==c?c:a)}))})),n},signals:function(e,t,n){var r=t.name,i=t.project,a=n.filter((function(e){return e.name===r+MU}))[0],o=r+"_tuple_fields",u=i.items.map((function(e){return tI("".concat(r,"_").concat(e.field))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && ");return u.length&&(a.update="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null")),delete a.value,delete a.on,n}},dU={has:function(e){return"multi"===e.type&&!!e.toggle},signals:function(e,t,n){return n.concat({name:t.name+"_toggle",value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t){var n=t.name+MU,r=t.name+"_toggle";return"".concat(r," ? null : ").concat(n,", ")+("global"===t.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(WU(e),"}, "))+"".concat(r," ? ").concat(n," : null")}},pU={has:function(e){return void 0!==e.clear&&!1!==e.clear},parse:function(e,t,n){n.clear&&(t.clear=dD(n.clear)?CT(n.clear,"scope"):n.clear)},topLevelSignals:function(e,t,n){return fU.has(t)&&t.project.items.forEach((function(e){var r=n.findIndex((function(n){return n.name===tI("".concat(t.name,"_").concat(e.field))}));-1!==r&&n[r].on.push({events:t.clear,update:"null"})})),n},signals:function(e,t,n){function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)t.project.items.forEach((function(e){var t=n.findIndex((function(t){return t.name===e.signals.visual}));(r(t,"[0, 0]"),-1===t)&&r(n.findIndex((function(t){return t.name===e.signals.data})),"null")}));else{var i=n.findIndex((function(e){return e.name===t.name+MU}));r(i,"null"),dU.has(t)&&r(i=n.findIndex((function(e){return e.name===t.name+"_toggle"})),"false")}return n}},hU={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t){var n,r=t.scales=[],i=Object(Ri.a)(t.project.items);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.channel;if(wM(o)){var u=e.getScaleComponent(o),s=u?u.get("type"):void 0;if(u&&qP(s)){var c={selection:t.name,field:a.field};if(u.set("selectionExtent",c,!0),r.push(a),e.repeater&&e.repeater.row===e.repeater.column)e.getScaleComponent(o===zI?LI:zI).set("selectionExtent",c,!0)}else XF(HF.SCALE_BINDINGS_CONTINUOUS)}}}catch(l){i.e(l)}finally{i.f()}},topLevelSignals:function(e,t,n){var r=t.scales.filter((function(e){return 0===n.filter((function(t){return t.name===e.signals.data})).length}));if(!e.parent||vU(e)||0===r.length)return n;var i=n.filter((function(e){return e.name===t.name}))[0],a=i.update;if(a.indexOf(PU)>=0)i.update="{".concat(r.map((function(e){return"".concat(pD(e.field),": ").concat(e.signals.data)})).join(", "),"}");else{var o,u=Object(Ri.a)(r);try{for(u.s();!(o=u.n()).done;){var s=o.value,c="".concat(pD(s.field),": ").concat(s.signals.data);a.indexOf(c)<0&&(a="".concat(a.substring(0,a.length-1),", ").concat(c,"}"))}}catch(l){u.e(l)}finally{u.f()}i.update=a}return n.concat(r.map((function(e){return{name:e.signals.data}})))},signals:function(e,t,n){if(e.parent&&!vU(e)){var r,i=Object(Ri.a)(t.scales);try{var a=function(){var e=r.value,t=n.filter((function(t){return t.name===e.signals.data}))[0];t.push="outer",delete t.value,delete t.update};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}return n}};function mU(e,t){var n=pD(e.scaleName(t));return"domain(".concat(n,")")}function vU(e){var t;return e.parent&&_q(e.parent)&&(null!==(t=!e.parent.parent)&&void 0!==t?t:vU(e.parent.parent))}var gU={has:function(e){var t="global"===e.resolve&&e.bind&&KL(e.bind),n=1===e.project.items.length&&"_vgsid_"!==e.project.items[0].field;return t&&!n&&XF(HF.LEGEND_BINDINGS_PROJECT_LENGTH),t&&n},parse:function(e,t,n,r){var i;if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){var a,o='event.item && indexof(event.item.mark.role, "legend") < 0',u=Object(Ri.a)(t.events);try{for(u.s();!(a=u.n()).done;){var s=a.value;s.filter=xD(null!==(i=s.filter)&&void 0!==i?i:[]),s.filter.indexOf(o)<0&&s.filter.push(o)}}catch(f){u.e(f)}finally{u.f()}}var c=XL(t.bind)?t.bind.legend:"click",l=dD(c)?CT(c,"view"):xD(c);t.bind={legend:{merge:l}}},topLevelSignals:function(e,t,n){var r,i=t.name,a=XL(t.bind)&&t.bind.legend,o=function(e){return function(t){var n=zD(t);return n.markname=e,n}},u=Object(Ri.a)(t.project.items);try{var s=function(){var e=r.value;if(!e.hasLegend)return"continue";var u="".concat(e.field,"_legend"),s="".concat(i,"_").concat(u);if(0===n.filter((function(e){return e.name===s})).length){var c=a.merge.map(o("".concat(u,"_symbols"))).concat(a.merge.map(o("".concat(u,"_labels")))).concat(a.merge.map(o("".concat(u,"_entries"))));n.unshift(Object.assign(Object.assign({name:s},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:a.merge,update:"!event.item || !datum ? null : ".concat(s),force:!0}]}))}};for(u.s();!(r=u.n()).done;)s()}catch(c){u.e(c)}finally{u.f()}return n},signals:function(e,t,n){var r=t.name,i=t.project,a=n.find((function(e){return e.name===r+MU})),o=r+"_tuple_fields",u=i.items.filter((function(e){return e.hasLegend})).map((function(e){return tI("".concat(r,"_").concat(e.field,"_legend"))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && "),c="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null");t.events&&u.length>0?a.on.push({events:u.map((function(e){return{signal:e}})),update:c}):u.length>0&&(a.update=c,delete a.value,delete a.on);var l=n.find((function(e){return e.name===r+"_toggle"})),f=XL(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),n}};var yU="_translate_delta",bU={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var r=t.name,i=hU.has(t),a=r+"_translate_anchor",o=t.project.hasChannel,u=o.x,s=o.y,c=CT(t.translate,"scope");return i||(c=c.map((function(e){return e.between[0].markname=r+jU,e}))),n.push({name:a,value:{},on:[{events:c.map((function(e){return e.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==u?", extent_x: "+(i?mU(e,zI):"slice(".concat(u.signals.visual,")")):"")+(void 0!==s?", extent_y: "+(i?mU(e,LI):"slice(".concat(s.signals.visual,")")):"")+"}"}]},{name:r+yU,value:{},on:[{events:c,update:"{x: ".concat(a,".x - x(unit), y: ").concat(a,".y - y(unit)}")}]}),void 0!==u&&xU(e,t,u,"width",n),void 0!==s&&xU(e,t,s,"height",n),n}};function xU(e,t,n,r,i){var a,o=t.name,u=o+"_translate_anchor",s=o+yU,c=n.channel,l=hU.has(t),f=i.filter((function(e){return e.name===n.signals[l?"data":"visual"]}))[0],d=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(c),h=p.get("type"),m=l&&c===zI?"-":"",v="".concat(u,".extent_").concat(c),g="".concat(m).concat(s,".").concat(c," / ")+(l?"".concat(d):"span(".concat(v,")")),y="".concat(l?"log"===h?"panLog":"pow"===h?"panPow":"panLinear":"panLinear","(").concat(v,", ").concat(g)+(l&&"pow"===h?", ".concat(null!==(a=p.get("exponent"))&&void 0!==a?a:1):"")+")";f.on.push({events:{signal:s},update:l?y:"clampRange(".concat(y,", 0, ").concat(d,")")})}var wU={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var r=t.name,i=hU.has(t),a=r+"_zoom_delta",o=t.project.hasChannel,u=o.x,s=o.y,c=pD(e.scaleName(zI)),l=pD(e.scaleName(LI)),f=CT(t.zoom,"scope");return i||(f=f.map((function(e){return e.markname=r+jU,e}))),n.push({name:r+"_zoom_anchor",on:[{events:f,update:i?"{"+[c?"x: invert(".concat(c,", x(unit))"):"",l?"y: invert(".concat(l,", y(unit))"):""].filter((function(e){return!!e})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&OU(e,t,u,"width",n),void 0!==s&&OU(e,t,s,"height",n),n}};function OU(e,t,n,r,i){var a,o=t.name,u=n.channel,s=hU.has(t),c=i.filter((function(e){return e.name===n.signals[s?"data":"visual"]}))[0],l=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(u),d=f.get("type"),p=s?mU(e,u):c.name,h=o+"_zoom_delta",m="".concat(o).concat("_zoom_anchor",".").concat(u),v="".concat(s?"log"===d?"zoomLog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear","(").concat(p,", ").concat(m,", ").concat(h)+(s&&"pow"===d?", ".concat(null!==(a=f.get("exponent"))&&void 0!==a?a:1):"")+")";c.on.push({events:{signal:h},update:s?v:"clampRange(".concat(v,", 0, ").concat(l,")")})}var kU=[{has:function(){return!0},parse:function(e,t,n){var r,i,a,o=t.name,u=null!==(r=t.project)&&void 0!==r?r:t.project=new lU,s={},c={},l=new Set,f=function(e,t){for(var n="visual"===t?e.channel:e.field,r=tI("".concat(o,"_").concat(n)),i=1;l.has(r);i++)r=tI("".concat(o,"_").concat(n,"_").concat(i));return l.add(r),Object(su.a)({},t,r)};if(!n.fields&&!n.encodings){var d=e.config.selection[n.type];if(n.init){var p,h=Object(Ri.a)(xD(n.init));try{for(h.s();!(p=h.n()).done;){var m,v=p.value,g=Object(Ri.a)(ZD(v));try{for(g.s();!(m=g.n()).done;){var y=m.value;aM[y]?(n.encodings||(n.encodings=[])).push(y):"interval"===n.type?(XF('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=d.encodings):(n.fields||(n.fields=[])).push(y)}}catch(D){g.e(D)}finally{g.f()}}}catch(D){h.e(D)}finally{h.f()}}else n.encodings=d.encodings,n.fields=d.fields}var b,x=Object(Ri.a)(null!==(i=n.fields)&&void 0!==i?i:[]);try{for(x.s();!(b=x.n()).done;){var w=b.value,O={type:"E",field:w};O.signals=Object.assign({},f(O,"data")),u.items.push(O),u.hasField[w]=O}}catch(D){x.e(D)}finally{x.f()}var k,E=Object(Ri.a)(null!==(a=n.encodings)&&void 0!==a?a:[]);try{for(E.s();!(k=E.n()).done;){var S=k.value,C=e.fieldDef(S);if(C){var _=C.field;if(C.aggregate){XF(HF.cannotProjectAggregate(S,C.aggregate));continue}if(!_){XF(HF.cannotProjectOnChannelWithoutField(S));continue}if(C.timeUnit){var j={as:_=e.vgField(S),field:C.field,timeUnit:C.timeUnit};c[UD(j)]=j}if(!s[_]){var A="E";if("interval"===t.type)qP(e.getScaleComponent(S).get("type"))&&(A="R");else C.bin&&(A="R-RE");var T={field:_,channel:S,type:A};T.signals=Object.assign(Object.assign({},f(T,"data")),f(T,"visual")),u.items.push(s[_]=T),u.hasField[_]=u.hasChannel[S]=s[_]}}else XF(HF.cannotProjectOnChannelWithoutField(S))}}catch(D){E.e(D)}finally{E.f()}if(n.init){var N=function(e){return u.items.map((function(t){return void 0!==e[t.channel]?e[t.channel]:e[t.field]}))};if("interval"===n.type)t.init=N(n.init);else{var R=lD(n.init)?n.init:[n.init];t.init=R.map(N)}}ZD(c).length>0&&(u.timeUnit=new cU(null,c))},signals:function(e,t,n){var r=t.name+"_tuple_fields";return n.filter((function(e){return e.name===r})).length>0?n:n.concat({name:r,value:t.project.items.map((function(e){e.signals,e.hasLegend;var t=_I(e,["signals","hasLegend"]),n=zD(t);return n.field=uI(n.field),n}))})}},dU,hU,gU,bU,wU,fU,oU,pU];function EU(e,t){var n,r=Object(Ri.a)(kU);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.has(e)&&t(i)}}catch(a){r.e(a)}finally{r.f()}}function SU(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mD;if(lD(e)){var r=e.map((function(e){return SU(e,t,n)}));return t?"[".concat(r.join(", "),"]"):r}return YF(e)?n(aP(e,!1,!t)):t?n(JSON.stringify(e)):e}function CU(e,t){return LU(e,(function(n,r){t=r.marks?r.marks(e,n,t):t,EU(n,(function(r){r.marks&&(t=r.marks(e,n,t))}))})),t}function _U(e){return e.map((function(e){return e.on&&!e.on.length&&delete e.on,e}))}var jU="_brush",AU={signals:function(e,t){var n=t.name,r=n+"_tuple_fields",i=hU.has(t),a=[],o=[],u=[];if(t.translate&&!i){var s="!event.item || event.item.mark.name !== ".concat(pD(n+jU));TU(t,(function(e,t){var n,r=xD(null!==(n=t.between[0].filter)&&void 0!==n?n:t.between[0].filter=[]);return r.indexOf(s)<0&&r.push(s),e}))}t.project.items.forEach((function(n,r){var i=n.channel;if(i===zI||i===LI){var s=t.init?t.init[r]:null,c=function(e,t,n,r){var i=n.channel,a=n.signals.visual,o=n.signals.data,u=hU.has(t),s=pD(e.scaleName(i)),c=e.getScaleComponent(i),l=c?c.get("type"):void 0,f=function(e){return"scale(".concat(s,", ").concat(e,")")},d=e.getSizeSignalRef(i===zI?"width":"height").signal,p="".concat(i,"(unit)"),h=TU(t,(function(e,t){return[].concat(Object(gh.a)(e),[{events:t.between[0],update:"[".concat(p,", ").concat(p,"]")},{events:t,update:"[".concat(a,"[0], clamp(").concat(p,", 0, ").concat(d,")]")}])}));return h.push({events:{signal:t.name+"_scale_trigger"},update:qP(l)?"[".concat(f("".concat(o,"[0]")),", ").concat(f("".concat(o,"[1]")),"]"):"[0, 0]"}),u?[{name:o,on:[]}]:[Object.assign(Object.assign({name:a},r?{init:SU(r,!0,f)}:{value:[]}),{on:h}),Object.assign(Object.assign({name:o},r?{init:SU(r)}:{}),{on:[{events:{signal:a},update:"".concat(a,"[0] === ").concat(a,"[1] ? null : invert(").concat(s,", ").concat(a,")")}]})]}(e,t,n,s),l=n.signals.data,f=n.signals.visual,d=pD(e.scaleName(i)),p=qP(e.getScaleComponent(i).get("type"))?"+":"";a.push.apply(a,Object(gh.a)(c)),o.push(l),u.push({scaleName:e.scaleName(i),expr:"(!isArray(".concat(l,") || ")+"(".concat(p,"invert(").concat(d,", ").concat(f,")[0] === ").concat(p).concat(l,"[0] && ")+"".concat(p,"invert(").concat(d,", ").concat(f,")[1] === ").concat(p).concat(l,"[1]))")})}else XF("Interval selections only support x and y encoding channels.")})),i||a.push({name:n+"_scale_trigger",value:{},on:[{events:u.map((function(e){return{scale:e.scaleName}})),update:u.map((function(e){return e.expr})).join(" && ")+" ? ".concat(n+"_scale_trigger"," : {}")}]});var c=t.init,l="unit: ".concat(WU(e),", fields: ").concat(r,", values");return a.concat(Object.assign(Object.assign({name:n+MU},c?{init:"{".concat(l,": ").concat(SU(c),"}")}:{}),{on:[{events:[{signal:o.join(" || ")}],update:o.join(" && ")+" ? {".concat(l,": [").concat(o,"]} : null")}]}))},modifyExpr:function(e,t){return t.name+MU+", "+("global"===t.resolve?"true":"{unit: ".concat(WU(e),"}"))},marks:function(e,t,n){var r=t.name,i=t.project.hasChannel,a=i.x,o=i.y,u=a&&a.signals.visual,s=o&&o.signals.visual,c="data(".concat(pD(t.name+IU),")");if(hU.has(t))return n;var l={x:void 0!==a?{signal:"".concat(u,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(s,"[0]")}:{value:0},x2:void 0!==a?{signal:"".concat(u,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(s,"[1]")}:{field:{group:"height"}}};if("global"===t.resolve){var f,d=Object(Ri.a)(ZD(l));try{for(d.s();!(f=d.n()).done;){var p=f.value;l[p]=[Object.assign({test:"".concat(c,".length && ").concat(c,"[0].unit === ").concat(WU(e))},l[p]),{value:0}]}}catch(b){d.e(b)}finally{d.f()}}var h=t.mark,m=h.fill,v=h.fillOpacity,g=_I(h,["fill","fillOpacity"]),y=ZD(g).reduce((function(e,t){return e[t]=[{test:[void 0!==a&&"".concat(u,"[0] !== ").concat(u,"[1]"),void 0!==o&&"".concat(s,"[0] !== ").concat(s,"[1]")].filter((function(e){return e})).join(" && "),value:g[t]},{value:null}],e}),{});return[{name:r+jU+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:m},fillOpacity:{value:v}},update:l}}].concat(Object(gh.a)(n),[{name:r+jU,type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:Object.assign(Object.assign({},l),y)}}])}};function TU(e,t){return e.events.reduce((function(e,n){return n.between?t(e,n):(XF("".concat(n," is not an ordered event stream for interval selections.")),e)}),[])}function NU(e,t){var n=t.name,r=n+"_tuple_fields",i=t.project,a="(item().isVoronoi ? datum.datum : datum)",o=i.items.map((function(t){var n=e.fieldDef(t.channel);return n&&n.bin?"[".concat(a,"[").concat(pD(e.vgField(t.channel,{})),"], ")+"".concat(a,"[").concat(pD(e.vgField(t.channel,{binSuffix:"end"})),"]]"):"".concat(a,"[").concat(pD(t.field),"]")})).join(", "),u="unit: ".concat(WU(e),", fields: ").concat(r,", values"),s=t.events;return[{name:n+MU,on:s?[{events:s,update:"datum && item().mark.marktype !== 'group' ? {".concat(u,": [").concat(o,"]} : null"),force:!0}]:[]}]}var RU={signals:NU,modifyExpr:function(e,t){return t.name+MU+", "+("global"===t.resolve?"null":"{unit: ".concat(WU(e),"}"))}},DU={signals:NU,modifyExpr:function(e,t){return t.name+MU+", "+("global"===t.resolve?"true":"{unit: ".concat(WU(e),"}"))}},IU="_store",MU="_tuple",FU="_modify",PU="vlSelectionResolve",zU={single:DU,multi:RU,interval:AU};function LU(e,t){var n=e.component.selection;if(n)for(var r in n)if(kD(n,r)){var i=n[r];if(!0===t(i,zU[i.type]))break}}function BU(e){for(var t=e.parent;t&&!Eq(t);)t=t.parent;return t}function WU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0},n=t.escape,r=n?pD(e.name):e.name,i=BU(e);if(i){var a,o=i.facet,u=Object(Ri.a)(tM);try{for(u.s();!(a=u.n()).done;){var s=a.value;o[s]&&(r+=" + '__facet_".concat(s,"_' + (facet[").concat(pD(i.vgField(s)),"])"))}}catch(c){u.e(c)}finally{u.f()}}return r}function UU(e){var t=!1;return LU(e,(function(e){t=t||e.project.items.some((function(e){return"_vgsid_"===e.field}))})),t}function VU(e){var t=P_(e),n=new Set;return t.visit((function(e){"MemberExpression"===e.type&&function e(t){return"MemberExpression"===t.object.type?e(t.object):"datum"===t.object.name}(e)&&n.add(function e(t){var n=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(n.push.apply(n,Object(gh.a)(e(t.object))),n.push.apply(n,Object(gh.a)(e(t.property)))),n)}(e).slice(1).join("."))})),n}var HU=function(e){gB(n,e);var t=OB(n);function n(e,r,i){var a;return uS(this,n),(a=t.call(this,e)).model=r,a.filter=i,a.expr=$U(a.model,a.filter,xB(a)),a._dependentFields=VU(a.expr),a}return cS(n,[{key:"clone",value:function(){return new n(null,this.model,zD(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"producedFields",value:function(){return new Set}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),n}(uU);function qU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",i=[];function a(t){var a=tI(t),o=e.getSelectionComponent(a,t),u=pD(a+IU);if(o.project.timeUnit){var s=null!==n&&void 0!==n?n:e.component.data.raw,c=o.project.timeUnit.clone();s.parent?c.insertAsParentOf(s):s.parent=c}return"none"!==o.empty&&i.push(u),"vlSelectionTest(".concat(u,", ").concat(r)+("global"===o.resolve?")":", ".concat(pD(o.resolve),")"))}var o=nI(t,a);return(i.length?"!("+i.map((function(e){return"length(data(".concat(e,"))")})).join(" || ")+") || ":"")+"(".concat(o,")")}function GU(e,t){var n=t.encoding,r=t.field;if(n||r){if(n&&!r){var i=e.project.items.filter((function(e){return e.channel===n}));!i.length||i.length>1?(r=e.project.items[0].field,XF((i.length?"Multiple ":"No ")+"matching ".concat(pD(n)," encoding found for selection ").concat(pD(t.selection),". ")+'Using "field": '.concat(pD(r),"."))):r=i[0].field}}else r=e.project.items[0].field,e.project.items.length>1&&XF('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(pD(r),"."));return"".concat(e.name,"[").concat(pD(r),"]")}function $U(e,t,n){return nI(t,(function(t){return dD(t)?t:function(e){var t;return null===(t=e)||void 0===t?void 0:t.selection}(t)?qU(e,t.selection,n):TP(t)}))}function KU(e,t){if(e)return iz(e)?e:e.map((function(e){return Yz(e,t)})).join(", ")}function XU(e,t,n,r){var i,a,o;e.encode=null!==(i=e.encode)&&void 0!==i?i:{},e.encode[t]=null!==(a=e.encode[t])&&void 0!==a?a:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}function YU(e,t,n){var r,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},o=e.combine(),u=o.orient,s=o.scale,c=o.labelExpr,l=o.title,f=o.zindex,d=_I(o,["orient","scale","labelExpr","title","zindex"]);if(ZD(d).forEach((function(e){var n=SW[e],r=d[e];if(n&&n!==t&&"both"!==n)delete d[e];else if(kW(r)){var i=OW[e],a=i.vgProp,o=i.part,u=r.condition,s=r.value,c=[].concat(Object(gh.a)((lD(u)?u:[u]).map((function(e){var t=e.value;return{test:$U(null,e.test),value:t}}))),[{value:s}]);XU(d,o,a,c),delete d[e]}})),"grid"===t){if(!d.grid)return;if(d.encode){var p=d.encode.grid;d.encode=Object.assign({},p?{grid:p}:{}),0===ZD(d.encode).length&&delete d.encode}return Object.assign(Object.assign({scale:s,orient:u},d),{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:fI(f,0)})}if(a.header||!e.mainExtracted){if(void 0!==c){var h=c;(null===(i=null===(r=d.encode)||void 0===r?void 0:r.labels)||void 0===i?void 0:i.update)&&gW(d.encode.labels.update.text)&&(h=sI(c,"datum.label",d.encode.labels.update.text.signal)),XU(d,"labels","text",{signal:h})}if(d.encode){var m,v=Object(Ri.a)(EW);try{for(v.s();!(m=v.n()).done;){var g=m.value;e.hasAxisPart(g)||delete d.encode[g]}}catch(b){v.e(b)}finally{v.f()}0===ZD(d.encode).length&&delete d.encode}var y=KU(l,n);return Object.assign(Object.assign(Object.assign({scale:s,orient:u,grid:!1},y?{title:y}:{}),d),{zindex:fI(f,0)})}}function JU(e){var t,n=e.component.axes,r=Object(Ri.a)(hM);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(n[i]){var a,o=Object(Ri.a)(n[i]);try{for(o.s();!(a=o.n()).done;){if(!a.value.get("gridScale")){var u="x"===i?"height":"width";return[{name:u,update:e.getSizeSignalRef(u).signal}]}}}catch(s){o.e(s)}finally{o.f()}}}}catch(s){r.e(s)}finally{r.f()}return[]}var ZU={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},QU={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelLimit:"limit",labelOrient:"orient",labelPadding:"offset"},eV=ZD(ZU),tV=ZD(QU);function nV(e,t,n,r,i){var a,o,u=[].concat(Object(gh.a)("band"===i?["axisBand"]:[]),["x"===n?"axisX":"axisY"],Object(gh.a)(r?["axis"+r.substr(0,1).toUpperCase()+r.substr(1)]:[]),["axis"]),s=Object(Ri.a)(u);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(void 0!==(null===(a=t[c])||void 0===a?void 0:a[e]))return t[c][e]}}catch(l){s.e(l)}finally{s.f()}}function rV(e,t){if(void 0!==e)return e=mI(e),"top"===t||"bottom"===t?e<=45||315<=e?"top"===t?"bottom":"top":135<=e&&e<=225?"top"===t?"top":"bottom":"middle":e<=45||315<=e||135<=e&&e<=225?"middle":45<=e&&e<=135?"left"===t?"top":"bottom":"left"===t?"bottom":"top"}function iV(e,t){if(void 0!==e)return e=mI(e),"top"===t||"bottom"===t?e%180===0?"center":0<e&&e<180?"top"===t?"right":"left":"top"===t?"left":"right":(e+90)%180===0?"center":90<=e&&e<270?"left"===t?"left":"right":"left"===t?"right":"left"}function aV(e){switch(e){case zI:return"bottom";case LI:return"left"}throw new Error(HF.INVALID_CHANNEL_FOR_AXIS)}var oV=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).transform=r,i._dependentFields=VU(i.transform.calculate),i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(UD(this.transform))}}],[{key:"parseAllForSortIndex",value:function(e,t){return t.forEachFieldDef((function(t,r){if(Fz(t)&&kz(t.sort)){var i=t.field,a=t.timeUnit,o=t.sort,u=o.map((function(e,t){return"".concat(TP({field:i,timeUnit:a,equal:e})," ? ").concat(t," : ")})).join("")+o.length;e=new n(e,{calculate:u,as:uV(t,r,{forAs:!0})})}})),e}}]),n}(uU);function uV(e,t,n){return Bz(e,Object.assign({prefix:t,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function sV(e,t){return HD(["top","bottom"],t)?"column":HD(["left","right"],t)||"row"===e?"row":"column"}function cV(e,t,n,r){var i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return fI(t&&t.header?t.header[e]:void 0,i[e],n.header[e])}function lV(e,t,n,r){var i,a={},o=Object(Ri.a)(e);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=cV(u,t,n,r);void 0!==s&&(a[u]=s)}}catch(c){o.e(c)}finally{o.f()}return a}var fV=["row","column"],dV=["header","footer"];function pV(e,t){var n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,a=lV(["titleAnchor","titleAngle","titleOrient"],i,r,t),o=a.titleAnchor,u=a.titleAngle,s=sV(t,a.titleOrient);return{name:"".concat(t,"-title"),type:"group",role:"".concat(s,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===t?{orient:"left"}:{}),{style:"guide-title"}),mV(u,s)),hV(s,u,o)),OV(r,i,t,eV,ZU))}}function hV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle";switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}var r=iV(t,"row"===e?"left":"top");return r?{align:r}:{}}function mV(e,t){var n=rV(e,"row"===t?"left":"top");return n?{baseline:n}:{}}function vV(e,t){var n,r=e.component.layoutHeaders[t],i=[],a=Object(Ri.a)(dV);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(r[o]){var u,s=Object(Ri.a)(r[o]);try{for(s.s();!(u=s.n()).done;){var c=u.value;i.push(bV(e,t,o,r,c))}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){a.e(l)}finally{a.f()}return i}function gV(e,t){var n,r=e.sort;return Oz(r)?{field:Bz(r,{expr:"datum"}),order:(n=r.order,null!==n&&void 0!==n?n:"ascending")}:lD(r)?{field:uV(e,t,{expr:"datum"}),order:"ascending"}:{field:Bz(e,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function yV(e,t,n){var r=lV(["format","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),i=r.format,a=r.labelAngle,o=r.labelAnchor,u=r.labelOrient,s=r.labelExpr,c=cz(e,i,"parent",n).signal,l=sV(t,u);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:s?sI(sI(s,"datum.label",c),"datum.value",Bz(e,{expr:"parent"})):c}},"row"===t?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),mV(a,l)),hV(l,a,o)),OV(n,e,t,tV,QU))}function bV(e,t,n,r,i){var a;if(i){var o=null,u=r.facetFieldDef,s=e.config?e.config:void 0;if(u&&i.labels){var c=lV(["labelOrient"],u,s,t).labelOrient;("row"===t&&!HD(["top","bottom"],c)||"column"===t&&!HD(["left","right"],c))&&(o=yV(u,t,s))}var l=Eq(e)&&!Ez(e.facet),f=i.axes,d=(null===(a=f)||void 0===a?void 0:a.length)>0;if(o||d){var p="row"===t?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("".concat(t,"_").concat(n)),type:"group",role:"".concat(t,"-").concat(n)},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:gV(u,t)}:{}),d&&l?{from:{data:e.getName("facet_domain_".concat(t))}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:Object(su.a)({},p,i.sizeSignal)}}:{}),d?{axes:f}:{})}}return null}var xV={column:{start:0,end:1},row:{start:1,end:0}};function wV(e,t){return xV[t][e]}function OV(e,t,n,r,i){var a,o={},u=Object(Ri.a)(r);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(i[s]){var c=cV(s,t,e,n);void 0!==c&&(o[i[s]]=c)}}}catch(l){u.e(l)}finally{u.f()}return o}function kV(e){return[].concat(Object(gh.a)(EV(e,"width")),Object(gh.a)(EV(e,"height")))}function EV(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var i=e.getSizeSignalRef(t).signal;if("step"===r){var a=e.getScaleComponent(n);if(a){var o=a.get("type"),u=a.get("range");if(HP(o)&&yW(u)){var s=e.scaleName(n);if(Eq(e.parent))if("independent"===e.parent.component.resolve.scale[n])return[SV(s,u)];return[SV(s,u),{name:i,update:CV(s,a,"domain('".concat(s,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){var c=i.endsWith("width"),l=c?"containerSize()[0]":"containerSize()[1]",f=nB(e.config.view,c?"width":"height"),d="isFinite(".concat(l,") ? ").concat(l," : ").concat(f);return[{name:i,init:d,on:[{update:d,events:"window:resize"}]}]}return[{name:i,value:r}]}function SV(e,t){return{name:e+"_step",value:t.step}}function CV(e,t,n){var r=t.get("type"),i=t.get("padding"),a=fI(t.get("paddingOuter"),i),o=t.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,"bandspace(".concat(n,", ").concat(o,", ").concat(a,") * ").concat(e,"_step")}function _V(e,t){return ZD(e).reduce((function(n,r){var i=e[r];return Object.assign(Object.assign({},n),jW(t,i,r,(function(e){return{value:e.value}})))}),{})}function jV(e,t){var n=e.scale[t],r=HD(hM,t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&XF(HF.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var AV=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};uS(this,e),this.explicit=t,this.implicit=n}return cS(e,[{key:"clone",value:function(){return new e(zD(this.explicit),zD(this.implicit))}},{key:"combine",value:function(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function(e){return fI(this.explicit[e],this.implicit[e])}},{key:"getWithExplicit",value:function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)}},{key:"set",value:function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}},{key:"copyKeyFromSplit",value:function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)}},{key:"copyKeyFromObject",value:function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}},{key:"copyAll",value:function(e){var t,n=Object(Ri.a)(ZD(e.combine()));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=e.getWithExplicit(r);this.setWithExplicit(r,i)}}catch(a){n.e(a)}finally{n.f()}}}]),e}();function TV(e){return{explicit:!0,value:e}}function NV(e){return{explicit:!1,value:e}}function RV(e){return function(t,n,r,i){var a=e(t.value,n.value);return a>0?t:a<0?n:DV(t,n,r,i)}}function DV(e,t,n,r){return e.explicit&&t.explicit&&XF(HF.mergeConflictingProperty(n,r,e.value,t.value)),e}function IV(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:DV;return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:PD(e.value,t.value)?e:i(e,t,n,r)}var MV=Object.assign(Object.assign({},GL),{labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),FV=ZD(MV),PV=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return n}(AV);function zV(e){return fI(e.legend.type,LV(e))}function LV(e){var t=e.channel,n=e.timeUnit,r=e.scaleType,i=e.alwaysReturn;if(QI(t)){if(HD(["quarter","month","day"],n))return"symbol";if(GP(r))return i?"gradient":void 0}return i?"symbol":void 0}function BV(e){var t=e.legend,n=e.legendConfig,r=e.timeUnit,i=e.channel,a=e.scaleType,o=fI(t.orient,n.orient,"right"),u=zV({legend:t,channel:i,timeUnit:r,scaleType:a,alwaysReturn:!0});return fI(t.direction,n[u?"gradientDirection":"symbolDirection"],function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(o,u))}function WV(e,t,n,r){var i=e.getSizeSignalRef(t).signal;return{signal:"clamp(".concat(i,", ").concat(n,", ").concat(r,")")}}function UV(e,t,n){var r=t.getScaleComponent(n).get("type");return fI(e.get("type"),LV({channel:n,scaleType:r,alwaysReturn:!0}))}function VV(e,t,n,r,i){var a,o,u,s,c;if("symbol"===UV(i,n,r)){var l=Object.assign(Object.assign({},function(e,t,n){var r,i=Object(Ri.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=uz(a,t.markDef,t.config);void 0!==o&&(e[a]={value:o})}}catch(u){i.e(u)}finally{i.f()}return e}({},n,wI)),zW(n)),f=n.markDef,d=n.encoding,p=n.config,h=f.filled,m=null!==(a=$V(d.opacity))&&void 0!==a?a:f.opacity,v=YV(n,i,e);if(l.fill)if("fill"===r||h&&r===BI)delete l.fill;else if(l.fill.field)i.get("symbolFillColor")?delete l.fill:(l.fill={value:(o=p.legend.symbolBaseFillColor,null!==o&&void 0!==o?o:"black")},l.fillOpacity={value:null!==m&&void 0!==m?m:1});else if(lD(l.fill)){var g=null!==(c=null!==(s=KV(null!==(u=d.fill)&&void 0!==u?u:d.color))&&void 0!==s?s:f.fill)&&void 0!==c?c:h&&f.color;g&&(l.fill={value:g})}if(l.stroke)if("stroke"===r||!h&&r===BI)delete l.stroke;else if(l.stroke.field)delete l.stroke;else if(lD(l.stroke)){var y=fI(KV(d.stroke||d.color),f.stroke,h?f.color:void 0);y&&(l.stroke={value:y})}return r!==qI&&(v?l.opacity=[{test:v,value:null!==m&&void 0!==m?m:1},{value:p.legend.unselectedOpacity}]:m&&(l.opacity={value:m})),l=Object.assign(Object.assign({},l),t),ZD(l).length>0?l:void 0}}function HV(e,t,n,r,i){if("gradient"===UV(i,n,r)){var a={},o=$V(n.encoding.opacity)||n.markDef.opacity;return o&&(a.opacity={value:o}),a=Object.assign(Object.assign({},a),t),ZD(a).length>0?a:void 0}}function qV(e,t,n,r,i){var a=n.legend(r),o=n.config,u=YV(n,i,e),s={};if(iL(e)){var c=n.getScaleComponent(r).get("type")===IP.UTC,l=hz("datum.value",e.timeUnit,a.format,o.timeFormat,c);t=Object.assign(Object.assign({},l?{text:{signal:l}}:{}),t)}return u&&(t.opacity=[{test:u,value:1},{value:o.legend.unselectedOpacity}]),s=Object.assign(Object.assign({},s),t),ZD(s).length>0?s:void 0}function GV(e,t,n,r,i){var a;return(null===(a=i.get("selections"))||void 0===a?void 0:a.length)?{fill:{value:"transparent"}}:void 0}function $V(e){return XV(e,(function(e,t){return Math.max(e,t.value)}))}function KV(e){return XV(e,(function(e,t){return fI(e,t.value)}))}function XV(e,t){return function(e){return!!e&&!!e.condition&&(lD(e.condition)||Mz(e.condition))}(e)?(lD(e.condition)?e.condition:[e.condition]).reduce(t,e.value):Mz(e)?e.value:void 0}function YV(e,t,n){var r,i=t.get("selections");if(null===(r=i)||void 0===r?void 0:r.length){var a=pD(n.field);return i.map((function(e){var t=pD(tI(e)+IU);return"(!length(data(".concat(t,")) || (").concat(e,"[").concat(a,"] && indexof(").concat(e,"[").concat(a,"], datum.value) >= 0))")})).join(" || ")}}function JV(e){kq(e)?e.component.legends=function(e){var t=e.encoding;return[BI,WI,UI,KI,HI,VI,qI,GI,$I].reduce((function(n,r){var i=t[r];return!e.legend(r)||!e.getScaleComponent(r)||Rz(i)&&r===VI&&"geojson"===i.type||(n[r]=function(e,t){var n,r=e.fieldDef(t),i=e.legend(t),a=new PV({},function(e,t){var n=e.scaleName(BI);if("color"===t)return e.markDef.filled?{fill:n}:{stroke:n};return Object(su.a)({},t,e.scaleName(t))}(e,t));!function(e,t,n){var r=e.fieldDef(t).field;LU(e,(function(e){var i,a,o=null!==(i=e.project.hasField[r])&&void 0!==i?i:e.project.hasChannel[t];if(o&&gU.has(e)){var u=null!==(a=n.get("selections"))&&void 0!==a?a:[];u.push(e.name),n.set("selections",u,!1),o.hasLegend=!0}}))}(e,t,a);var o,u=Object(Ri.a)(FV);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=QV(s,i,t,e);if(void 0!==c){var l=ZV(c,s,i,r);(l||void 0===e.config.legend[s])&&a.set(s,c,l)}}}catch(h){u.e(h)}finally{u.f()}var f=null!==(n=i.encoding)&&void 0!==n?n:{},d=a.get("selections"),p=["labels","legend","title","symbols","gradient","entries"].reduce((function(n,i){var o,u,s,c=_V(null!==(o=f[i])&&void 0!==o?o:{},e),l=v[i]?v[i](r,c,e,t,a):c;return void 0!==l&&ZD(l).length>0&&(n[i]=Object.assign(Object.assign(Object.assign({},(null===(u=d)||void 0===u?void 0:u.length)?{name:"".concat(r.field,"_legend_").concat(i)}:{}),(null===(s=d)||void 0===s?void 0:s.length)?{interactive:!!d}:{}),{update:l})),n}),{});ZD(p).length>0&&a.set("encode",p,!!i.encoding);return a}(e,r)),n}),{})}(e):e.component.legends=function(e){var t,n=e.component,r=n.legends,i=n.resolve,a=Object(Ri.a)(e.children);try{var o=function(){var n=t.value;JV(n),ZD(n.component.legends).forEach((function(t){i.legend[t]=jV(e.component.resolve,t),"shared"===i.legend[t]&&(r[t]=eH(r[t],n.component.legends[t]),r[t]||(i.legend[t]="independent",delete r[t]))}))};for(a.s();!(t=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}return ZD(r).forEach((function(t){var n,r=Object(Ri.a)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.component.legends[t]&&("shared"===i.legend[t]&&delete a.component.legends[t])}}catch(u){r.e(u)}finally{r.f()}})),r}(e)}function ZV(e,t,n,r){switch(t){case"values":return!!n.values;case"title":if("title"===t&&e===r.title)return!0}return e===n[t]}function QV(e,t,n,r){var i=r.encoding,a=r.mark,o=Qz(i[n]),u=r.config.legend,s=o.timeUnit,c=r.getScaleComponent(n).get("type");switch(e){case"direction":return BV({legend:t,legendConfig:u,timeUnit:s,channel:n,scaleType:c});case"format":if(iL(o))return;return lz(o,t.format,r.config);case"formatType":if(iL(o))return;return t.formatType;case"gradientLength":return fI(t.gradientLength,u.gradientLength,function(e){var t=e.legend,n=e.legendConfig,r=e.model,i=e.channel,a=e.scaleType,o=n.gradientHorizontalMaxLength,u=n.gradientHorizontalMinLength,s=n.gradientVerticalMaxLength,c=n.gradientVerticalMinLength;if("horizontal"===BV({legend:t,legendConfig:n,channel:i,scaleType:a})){var l=fI(t.orient,n.orient);return"top"===l||"bottom"===l?WV(r,"width",u,o):u}return WV(r,"height",c,s)}({model:r,legend:t,legendConfig:u,channel:n,scaleType:c}));case"labelOverlap":return fI(t.labelOverlap,function(e){if(HD(["quantile","threshold","log"],e))return"greedy"}(c));case"symbolType":return fI(t.symbolType,function(e,t,n,r){var i;if("shape"!==t){var a=null!==(i=KV(n))&&void 0!==i?i:r;if(a)return a}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(a,n,i.shape,r.markDef.shape));case"title":return Kz(o,r.config,{allowDisabling:!0})||void 0;case"type":return zV({legend:t,channel:n,timeUnit:s,scaleType:c,alwaysReturn:!1});case"values":return function(e,t){var n=e.values;if(n)return oL(t,n)}(t,o)}return t[e]}function eH(e,t){var n,r,i,a,o,u;if(!e)return t.clone();var s=e.getWithExplicit("orient"),c=t.getWithExplicit("orient");if(!s.explicit||!c.explicit||s.value===c.value){var l,f=!1,d=Object(Ri.a)(FV);try{var p=function(){var n=l.value,r=IV(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",(function(e,t){switch(n){case"symbolType":return function(e,t){if("circle"===t.value)return t;return e}(e,t);case"title":return yz(e,t);case"type":return f=!0,NV("symbol")}return DV(e,t,n,"legend")}));e.setWithExplicit(n,r)};for(d.s();!(l=d.n()).done;)p()}catch(h){d.e(h)}finally{d.f()}return f&&((null===(i=null===(r=null===(n=e.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)||void 0===i||i)&&rI(e.implicit,["encode","gradient"]),(null===(u=null===(o=null===(a=e.explicit)||void 0===a?void 0:a.encode)||void 0===o?void 0:o.gradient)||void 0===u||u)&&rI(e.explicit,["encode","gradient"])),e}}function tH(e){var t,n=e.component.legends,r={},i=Object(Ri.a)(ZD(n));try{for(i.s();!(t=i.n()).done;){var a=t.value,o=e.getScaleComponent(a),u=WD(o.get("domains"));if(r[u]){var s,c=Object(Ri.a)(r[u]);try{for(c.s();!(s=c.n()).done;){eH(s.value,n[a])||r[u].push(n[a])}}catch(l){c.e(l)}finally{c.f()}}else r[u]=[n[a].clone()]}}catch(l){i.e(l)}finally{i.f()}return QD(r).flat().map((function(e){var t,n,r,i,a=e.combine(),o=a.labelExpr,u=(a.selections,_I(a,["labelExpr","selections"]));if(null===(t=u.encode)||void 0===t?void 0:t.symbols){var s=u.encode.symbols.update;!s.fill||"transparent"===s.fill.value||s.stroke||u.stroke||(s.stroke={value:"transparent"}),u.fill&&delete s.fill}if(void 0!==o){var c=o;(null===(i=null===(r=null===(n=u.encode)||void 0===n?void 0:n.labels)||void 0===r?void 0:r.update)||void 0===i?void 0:i.text)&&gW(u.encode.labels.update.text)&&(c=sI(o,"datum.label",u.encode.labels.update.text.signal)),function(e,t,n,r){var i,a,o;e.encode=null!==(i=e.encode)&&void 0!==i?i:{},e.encode[t]=null!==(a=e.encode[t])&&void 0!==a?a:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}(u,"labels","text",{signal:c})}return u}))}function nH(e){return _q(e)||Cq(e)||Sq(e)?function(e){return e.children.reduce((function(e,t){return e.concat(t.assembleProjections())}),rH(e))}(e):rH(e)}function rH(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),r=n.name,i=_I(n,["name"]);if(t.data){var a={signal:"[".concat(t.size.map((function(e){return e.signal})).join(", "),"]")},o=t.data.reduce((function(t,n){var r=gW(n)?n.signal:"data('".concat(e.lookupDataSource(n),"')");return HD(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:a,fit:{signal:o.length>1?"[".concat(o.join(", "),"]"):o[0]}},i)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),i)]}var iH=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],aH=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a){var o;return uS(this,n),(o=t.call(this,Object.assign({},r),{name:e})).specifiedProjection=r,o.size=i,o.data=a,o.merged=!1,o}return cS(n,[{key:"isFit",get:function(){return!!this.data}}]),n}(AV);function oH(e){e.component.projection=kq(e)?function(e){var t;if(e.hasProjection){var n=e.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,a=r?function(e){for(var t=[],n=0,r=[["longitude","latitude"],["longitude2","latitude2"]];n<r.length;n++){var i=r[n];(e.channelHasField(i[0])||e.channelHasField(i[1]))&&t.push({signal:e.getName("geojson_".concat(t.length))})}e.channelHasField(VI)&&"geojson"===e.fieldDef(VI).type&&t.push({signal:e.getName("geojson_".concat(t.length))});0===t.length&&t.push(e.requestDataName(JB));return t}(e):void 0;return new aH(e.projectionName(!0),Object.assign(Object.assign({},null!==(t=e.config.projection)&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{}),i,a)}return}(e):function(e){if(0===e.children.length)return;var t;e.children.forEach((function(e){return oH(e)}));var n=GD(e.children,(function(e){var n=e.component.projection;if(n){if(t){var r=function(e,t){var n=GD(iH,(function(n){return!kD(e.explicit,n)&&!kD(t.explicit,n)||!(!kD(e.explicit,n)||!kD(t.explicit,n)||WD(e.get(n))!==WD(t.get(n)))}));if(WD(e.size)===WD(t.size)){if(n)return e;if(WD(e.explicit)===WD({}))return t;if(WD(t.explicit)===WD({}))return e}return null}(t,n);return r&&(t=r),!!r}return t=n,!0}return!0}));if(t&&n){var r=e.projectionName(!0),i=new aH(r,t.specifiedProjection,t.size,zD(t.data));return e.children.forEach((function(e){var t=e.component.projection;if(t){var n;if(t.isFit)(n=i.data).push.apply(n,Object(gh.a)(e.component.projection.data));e.renameProjection(t.get("name"),r),t.merged=!0}})),i}return}(e)}var uH=n(160),sH=n(173),cH=n(71),lH=n(161);function fH(e,t){return"".concat(sL(e),"_").concat(t)}function dH(e,t,n){var r,i=fH(null!==(r=nL(n,void 0))&&void 0!==r?r:{},t);return e.getName("".concat(i,"_bins"))}function pH(e,t,n){var r,i;r=function(e){return"as"in e}(e)?dD(e.as)?[e.as,"".concat(e.as,"_end")]:[e.as[0],e.as[1]]:[Bz(e,{forAs:!0}),Bz(e,{binSuffix:"end",forAs:!0})];var a=Object.assign({},nL(t,void 0)),o=fH(a,e.field),u=function(e,t){return{signal:e.getName("".concat(t,"_bins")),extentSignal:e.getName("".concat(t,"_extent"))}}(n,o),s=u.signal,c=u.extentSignal;if(dL(a.extent)){var l=a.extent,f=l.selection;i=GU(n.getSelectionComponent(tI(f),f),l),delete a.extent}return{key:o,binComponent:Object.assign(Object.assign(Object.assign({bin:a,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),i?{span:i}:{})}}var hH=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).bins=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.bins))}},{key:"merge",value:function(e,t){var n,r=Object(Ri.a)(ZD(e.bins));try{for(r.s();!(n=r.n()).done;){var i=n.value;i in this.bins?(t(e.bins[i].signal,this.bins[i].signal),this.bins[i].as=KD([].concat(Object(gh.a)(this.bins[i].as),Object(gh.a)(e.bins[i].as)),UD)):this.bins[i]=e.bins[i]}}catch(s){r.e(s)}finally{r.f()}var a,o=Object(Ri.a)(e.children);try{for(o.s();!(a=o.n()).done;){var u=a.value;e.removeChild(u),u.parent=this}}catch(s){o.e(s)}finally{o.f()}e.remove()}},{key:"producedFields",value:function(){return new Set(QD(this.bins).map((function(e){return e.as})).flat(2))}},{key:"dependentFields",value:function(){return new Set(QD(this.bins).map((function(e){return e.field})))}},{key:"hash",value:function(){return"Bin ".concat(UD(this.bins))}},{key:"assemble",value:function(){return QD(this.bins).flatMap((function(e){var t,n=[],r=(t=e.as,Object(uH.a)(t)||Object(sH.a)(t)||Object(cH.a)(t)||Object(lH.a)()),i=r[0],a=r.slice(1),o=e.bin,u=o.extent,s=_I(o,["extent"]),c=Object.assign(Object.assign(Object.assign({type:"bin",field:uI(e.field),as:i,signal:e.signal},dL(u)?{extent:null}:{extent:u}),e.span?{span:{signal:"span(".concat(e.span,")")}}:{}),s);!u&&e.extentSignal&&(n.push({type:"extent",field:uI(e.field),signal:e.extentSignal}),c.extent={signal:e.extentSignal}),n.push(c);var l,f=Object(Ri.a)(a);try{for(f.s();!(l=f.n()).done;)for(var d=l.value,p=0;p<2;p++)n.push({type:"formula",expr:Bz({field:i[p]},{expr:"datum"}),as:d[p]})}catch(h){f.e(h)}finally{f.f()}return e.formula&&n.push({type:"formula",expr:e.formula,as:e.formulaAs}),n}))}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){if(Dz(n)&&cL(n.bin)){var i=pH(n,n.bin,t),a=i.key,o=i.binComponent;e[a]=Object.assign(Object.assign(Object.assign({},o),e[a]),function(e,t,n,r){var i,a;if(uL(t,n)){var o=kq(e)?null!==(a=null!==(i=e.axis(n))&&void 0!==i?i:e.legend(n))&&void 0!==a?a:{}:{},u=Bz(t,{expr:"datum"}),s=Bz(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Bz(t,{binSuffix:"range",forAs:!0}),formula:pz(u,s,o.format,r)}}return{}}(t,n,r,t.config))}return e}),{});return 0===ZD(r).length?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t,r){var i=pH(t,t.bin,r),a=i.key,o=i.binComponent;return new n(e,Object(su.a)({},a,o))}}]),n}(uU),mH=function(e){gB(n,e);var t=OB(n);function n(e){var r,i;if(uS(this,n),r=t.call(this,null),$B(e=null!==e&&void 0!==e?e:{name:"source"})||(i=e.format?Object.assign({},BD(e.format,["parse"])):{}),qB(e))r._data={values:e.values};else if(HB(e)){if(r._data={url:e.url},!i.type){var a=/(?:\.([^.]+))?$/.exec(e.url)[1];HD(["json","csv","tsv","dsv","topojson"],a)||(a="json"),i.type=a}}else XB(e)?r._data={values:[{type:"Sphere"}]}:(GB(e)||$B(e))&&(r._data={});return r._generator=$B(e),e.name&&(r._name=e.name),i&&ZD(i).length>0&&(r._data.format=i),r}return cS(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hasName",value:function(){return!!this._name}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}},{key:"data",get:function(){return this._data}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(e){this._name=e}},{key:"parent",set:function(e){throw new Error("Source nodes have to be roots.")}}]),n}(uU);function vH(e){var t,n=Object(Ri.a)(e);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=Object(Ri.a)(i.children);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.parent!==i)return console.error("Dataflow graph is inconsistent.",i,o),!1}}catch(u){a.e(u)}finally{a.f()}if(!vH(i.children))return!1}}catch(u){n.e(u)}finally{n.f()}return!0}var gH=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).params=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hash",value:function(){return"Graticule ".concat(UD(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),n}(uU),yH=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).params=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){var e;return new Set([(e=this.params.as,null!==e&&void 0!==e?e:"data")])}},{key:"hash",value:function(){return"Hash ".concat(UD(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),n}(uU);function bH(e){return e instanceof mH||e instanceof gH||e instanceof yH}var xH=function(){function e(){uS(this,e),this._mutated=!1}return cS(e,[{key:"setMutated",value:function(){this._mutated=!0}},{key:"mutatedFlag",get:function(){return this._mutated}}]),e}(),wH=function(e){gB(n,e);var t=OB(n);function n(){var e;return uS(this,n),(e=t.call(this))._continue=!1,e}return cS(n,[{key:"setContinue",value:function(){this._continue=!0}},{key:"reset",value:function(){}},{key:"optimizeNextFromLeaves",value:function(e){if(bH(e))return!1;var t=e.parent;return this.run(e).continueFlag&&this.optimizeNextFromLeaves(t),this.mutatedFlag}},{key:"continueFlag",get:function(){return this._continue}},{key:"flags",get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(e){var t=e.continueFlag,n=e.mutatedFlag;t&&this.setContinue(),n&&this.setMutated()}}]),n}(xH),OH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return n}(xH);function kH(e,t,n,r){var i=kq(r)?r.encoding[lM(t)]:void 0;if(Dz(n)&&kq(r)&&Az(t,n,i,r.markDef,r.config))e.add(Bz(n,{})),e.add(Bz(n,{suffix:"end"})),uL(n,t)&&e.add(Bz(n,{binSuffix:"range"}));else if(t in YI){var a=function(e){switch(e){case"latitude":return"y";case"latitude2":return"y2";case"longitude":return"x";case"longitude2":return"x2"}}(t);e.add(r.getName(a))}else e.add(Bz(n));return e}var EH=function(e){gB(n,e);var t=OB(n);function n(e,r,i){var a;return uS(this,n),(a=t.call(this,e)).dimensions=r,a.measures=i,a}return cS(n,[{key:"clone",value:function(){return new n(null,new Set(this.dimensions),zD(this.measures))}},{key:"merge",value:function(e){return function(e,t){if(e.size!==t.size)return!1;var n,r=Object(Ri.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!t.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(this.dimensions,e.dimensions)?(function(e,t){var n,r,i=Object(Ri.a)(ZD(t));try{for(i.s();!(r=i.n()).done;){var a,o=r.value,u=t[o],s=Object(Ri.a)(ZD(u));try{for(s.s();!(a=s.n()).done;){var c=a.value;o in e?e[o][c]=new Set([].concat(Object(gh.a)(null!==(n=e[o][c])&&void 0!==n?n:[]),Object(gh.a)(u[c]))):e[o]=Object(su.a)({},c,u[c])}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}}(this.measures,e.measures),!0):(function(){var e;(e=GF).debug.apply(e,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(e){e.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat(Object(gh.a)(this.dimensions),Object(gh.a)(ZD(this.measures))))}},{key:"producedFields",value:function(){var e,t=new Set,n=Object(Ri.a)(ZD(this.measures));try{for(n.s();!(e=n.n()).done;){var r,i=e.value,a=Object(Ri.a)(ZD(this.measures[i]));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=this.measures[i][o];0===u.size?t.add("".concat(o,"_").concat(i)):u.forEach(t.add,t)}}catch(s){a.e(s)}finally{a.f()}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"hash",value:function(){return"Aggregate ".concat(UD({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],i=Object(Ri.a)(ZD(this.measures));try{for(i.s();!(e=i.n()).done;){var a,o=e.value,u=Object(Ri.a)(ZD(this.measures[o]));try{for(u.s();!(a=u.n()).done;){var s,c=a.value,l=Object(Ri.a)(this.measures[o][c]);try{for(l.s();!(s=l.n()).done;){var f=s.value;r.push(f),t.push(c),n.push("*"===o?null:uI(o))}}catch(d){l.e(d)}finally{l.f()}}}catch(d){u.e(d)}finally{u.f()}}}catch(d){i.e(d)}finally{i.f()}return{type:"aggregate",groupby:Object(gh.a)(this.dimensions),ops:t,fields:n,as:r}}},{key:"groupBy",get:function(){return this.dimensions}}],[{key:"makeFromEncoding",value:function(e,t){var r=!1;t.forEachFieldDef((function(e){e.aggregate&&(r=!0)}));var i={},a=new Set;return r?(t.forEachFieldDef((function(e,n){var r,o,u,s,c=e.aggregate,l=e.field;if(c)if("count"===c)i["*"]=null!==(r=i["*"])&&void 0!==r?r:{},i["*"].count=new Set([Bz(e,{forAs:!0})]);else{if(TI(c)||NI(c)){var f=TI(c)?"argmin":"argmax",d=c[f];i[d]=null!==(o=i[d])&&void 0!==o?o:{},i[d][f]=new Set([Bz({op:f,field:d},{forAs:!0})])}else i[l]=null!==(u=i[l])&&void 0!==u?u:{},i[l][c]=new Set([Bz(e,{forAs:!0})]);wM(n)&&"unaggregated"===t.scaleDomain(n)&&(i[l]=null!==(s=i[l])&&void 0!==s?s:{},i[l].min=new Set([Bz({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Bz({field:l,aggregate:"max"},{forAs:!0})]))}else kH(a,n,e,t)})),a.size+ZD(i).length===0?null:new n(e,a,i)):null}},{key:"makeFromTransform",value:function(e,t){var r,i,a,o,u=new Set,s={},c=Object(Ri.a)(t.aggregate);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=l.op,d=l.field,p=l.as;f&&("count"===f?(s["*"]=null!==(r=s["*"])&&void 0!==r?r:{},s["*"].count=new Set([p||Bz(l,{forAs:!0})])):(s[d]=null!==(i=s[d])&&void 0!==i?i:{},s[d][f]=new Set([p||Bz(l,{forAs:!0})])))}}catch(g){c.e(g)}finally{c.f()}var h,m=Object(Ri.a)(null!==(a=t.groupby)&&void 0!==a?a:[]);try{for(m.s();!(h=m.n()).done;){var v=h.value;u.add(v)}}catch(g){m.e(g)}finally{m.f()}return u.size+ZD(s).length===0?null:new n(e,u,s)}}]),n}(uU),SH=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a){var o;uS(this,n),(o=t.call(this,e)).model=r,o.name=i,o.data=a;var u,s=Object(Ri.a)(tM);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=r.facet[c];if(l){var f=l.bin,d=l.sort;o[c]=Object.assign({name:r.getName("".concat(c,"_domain")),fields:[Bz(l)].concat(Object(gh.a)(cL(f)?[Bz(l,{binSuffix:"end"})]:[]))},Oz(d)?{sortField:d}:lD(d)?{sortIndexField:uV(l,c)}:{})}}}catch(p){s.e(p)}finally{s.f()}return o.childModel=r.child,o}return cS(n,[{key:"hash",value:function(){var e,t="Facet",n=Object(Ri.a)(tM);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(t+=" ".concat(r.charAt(0),":").concat(UD(this[r])))}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"dependentFields",value:function(){var e,t=new Set(this.fields),n=Object(Ri.a)(tM);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(this[r].sortField&&t.add(this[r].sortField.field),this[r].sortIndexField&&t.add(this[r].sortIndexField))}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){for(var e={},t=0,n=["x","y"];t<n.length;t++){var r=n[t],i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(HP(a)&&yW(o)){var u=aq(oq(this.childModel,r));u?e[r]=u:XF("Unknown field for ".concat(r,". Cannot calculate view size."))}}}return e}},{key:"assembleRowColumnHeaderData",value:function(e,t,n){var r={row:"y",column:"x"}[e],i=[],a=[],o=[];n&&n[r]&&(t?(i.push("distinct_".concat(n[r])),a.push("max")):(i.push(n[r]),a.push("distinct")),o.push("distinct_".concat(n[r])));var u=this[e],s=u.sortField,c=u.sortIndexField;if(s){var l=s.op,f=void 0===l?"mean":l,d=s.field;i.push(d),a.push(f),o.push(Bz(s,{forAs:!0}))}else c&&(i.push(c),a.push("max"),o.push(c));return{name:this[e].name,source:null!==t&&void 0!==t?t:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},i.length?{fields:i,ops:a,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function(e){var t,n,r,i=this.model.layout.columns,a=this.model.component.layoutHeaders,o=[],u={},s=Object(Ri.a)(fV);try{for(s.s();!(r=s.n()).done;){var c,l=r.value,f=Object(Ri.a)(dV);try{for(f.s();!(c=f.n()).done;){var d,p=c.value,h=null!==(t=a[l]&&a[l][p])&&void 0!==t?t:[],m=Object(Ri.a)(h);try{for(m.s();!(d=m.n()).done;){if((null===(n=d.value.axes)||void 0===n?void 0:n.length)>0){u[l]=!0;break}}}catch(x){m.e(x)}finally{m.f()}}}catch(x){f.e(x)}finally{f.f()}if(u[l]){var v='length(data("'.concat(this.facet.name,'"))'),g="row"===l?i?{signal:"ceil(".concat(v," / ").concat(i,")")}:1:i?{signal:"min(".concat(v,", ").concat(i,")")}:{signal:v};o.push({name:"".concat(this.facet.name,"_").concat(l),transform:[{type:"sequence",start:0,stop:g}]})}}}catch(x){s.e(x)}finally{s.f()}var y=u.row,b=u.column;return(y||b)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,e)),o}},{key:"assemble",value:function(){var e,t,n=[],r=null,i=this.getChildIndependentFieldsWithStep(),a=this.column,o=this.row,u=this.facet;if(a&&o&&(i.x||i.y)){r="cross_".concat(this.column.name,"_").concat(this.row.name);var s=[].concat(null!==(e=i.x)&&void 0!==e?e:[],null!==(t=i.y)&&void 0!==t?t:[]),c=s.map((function(){return"distinct"}));n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(var l=0,f=["column",PI];l<f.length;l++){var d=f[l];this[d]&&n.push(this.assembleRowColumnHeaderData(d,r,i))}if(u){var p=this.assembleFacetHeaderData(i);p&&n.push.apply(n,Object(gh.a)(p))}return n}},{key:"fields",get:function(){var e,t,n=[],r=Object(Ri.a)(tM);try{for(r.s();!(t=r.n()).done;){var i=t.value;(null===(e=this[i])||void 0===e?void 0:e.fields)&&n.push.apply(n,Object(gh.a)(this[i].fields))}}catch(a){r.e(a)}finally{r.f()}return n}}]),n}(uU);function CH(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function _H(e,t){var n=aI(e);if("number"===t)return"toNumber(".concat(n,")");if("boolean"===t)return"toBoolean(".concat(n,")");if("string"===t)return"toString(".concat(n,")");if("date"===t)return"toDate(".concat(n,")");if("flatten"===t)return n;if(0===t.indexOf("date:")){var r=CH(t.slice(5,t.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(0===t.indexOf("utc:")){var i=CH(t.slice(4,t.length));return"utcParse(".concat(n,",'").concat(i,"')")}return XF(HF.unrecognizedParse(t)),null}function jH(e){var t={};return function e(t,n){if(MD(t))e(t.not,n);else if(ID(t)){var r,i=Object(Ri.a)(t.and);try{for(i.s();!(r=i.n()).done;){e(r.value,n)}}catch(u){i.e(u)}finally{i.f()}}else if(DD(t)){var a,o=Object(Ri.a)(t.or);try{for(o.s();!(a=o.n()).done;){e(a.value,n)}}catch(u){o.e(u)}finally{o.f()}}else n(t)}(e.filter,(function(e){var n;if(_P(e)){var r=null;bP(e)?r=e.equal:EP(e)?r=e.range[0]:SP(e)&&(r=(n=e.oneOf,null!==n&&void 0!==n?n:e.in)[0]),r&&(YF(r)?t[e.field]="date":SD(r)?t[e.field]="number":dD(r)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function AH(e){var t={};function n(e){var n;iL(e)?t[e.field]="date":"quantitative"===e.type&&(n=e.aggregate,dD(n)&&HD(["min","max"],n))?t[e.field]="number":lI(e.field)>1?e.field in t||(t[e.field]="flatten"):Fz(e)&&Oz(e.sort)&&lI(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((kq(e)||Eq(e))&&e.forEachFieldDef((function(t,r){if(Dz(t))n(t);else{var i=cM(r),a=e.fieldDef(i);n(Object.assign(Object.assign({},t),{type:a.type}))}})),kq(e)){var r=e.mark,i=e.markDef,a=e.encoding;if(gI(r)&&!e.encoding.order){var o=a["horizontal"===i.orient?"y":"x"];Rz(o)&&"quantitative"===o.type&&!(o.field in t)&&(t[o.field]="number")}}return t}var TH=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e))._parse=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this._parse))}},{key:"hash",value:function(){return"Parse ".concat(UD(this._parse))}},{key:"merge",value:function(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}},{key:"assembleFormatParse",value:function(){var e,t={},n=Object(Ri.a)(ZD(this._parse));try{for(n.s();!(e=n.n()).done;){var r=e.value,i=this._parse[r];1===lI(r)&&(t[r]=i)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set(ZD(this._parse))}},{key:"dependentFields",value:function(){return new Set(ZD(this._parse))}},{key:"assembleTransforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ZD(this._parse).filter((function(e){return!t||lI(e)>1})).map((function(t){var n=_H(t,e._parse[t]);return n?{type:"formula",expr:n,as:cI(t)}:null})).filter((function(e){return null!==e}))}},{key:"parse",get:function(){return this._parse}}],[{key:"makeExplicit",value:function(e,t,n){var r={},i=t.data;return!$B(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}},{key:"makeWithAncestors",value:function(e,t,r,i){var a,o=Object(Ri.a)(ZD(r));try{for(o.s();!(a=o.n()).done;){var u=a.value,s=i.getWithExplicit(u);void 0!==s.value&&(s.explicit||s.value===r[u]||"derived"===s.value||"flatten"===r[u]?delete r[u]:XF(HF.differentParse(u,r[u],s.value)))}}catch(b){o.e(b)}finally{o.f()}var c,l=Object(Ri.a)(ZD(t));try{for(l.s();!(c=l.n()).done;){var f=c.value,d=i.get(f);void 0!==d&&(d===t[f]?delete t[f]:XF(HF.differentParse(f,t[f],d)))}}catch(b){l.e(b)}finally{l.f()}var p=new AV(t,r);i.copyAll(p);var h,m={},v=Object(Ri.a)(ZD(p.combine()));try{for(v.s();!(h=v.n()).done;){var g=h.value,y=p.get(g);null!==y&&(m[g]=y)}}catch(b){v.e(b)}finally{v.f()}return 0===ZD(m).length||i.parseNothing?null:new n(e,m)}}]),n}(uU),NH=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).transform=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=KD(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e=new Set;return this.transform.groupby&&this.transform.groupby.forEach((function(t){return e.add(t)})),this.transform.joinaggregate.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach((function(t){return e.add(t)})),e}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:Bz(e)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],i=Object(Ri.a)(this.transform.joinaggregate);try{for(i.s();!(e=i.n()).done;){var a=e.value;n.push(a.op),r.push(this.getDefaultName(a)),t.push(void 0===a.field?null:a.field)}}catch(u){i.e(u)}finally{i.f()}var o=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},void 0!==o?{groupby:o}:{})}}]),n}(uU);var RH=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e))._stack=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this._stack))}},{key:"addDimensions",value:function(e){var t;(t=this._stack.facetby).push.apply(t,Object(gh.a)(e))}},{key:"dependentFields",value:function(){var e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach((function(t){return e.add(t)})),this._stack.facetby.forEach((function(t){return e.add(t)})),this._stack.sort.field.forEach((function(t){return e.add(t)})),e}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(UD(this._stack))}},{key:"getGroupbyFields",value:function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute,r=e.groupby;return t?t.bin?n?[Bz(t,{binSuffix:"mid"})]:[Bz(t,{}),Bz(t,{binSuffix:"end"})]:[Bz(t)]:null!==r&&void 0!==r?r:[]}},{key:"assemble",value:function(){var e=[],t=this._stack,n=t.facetby,r=t.dimensionFieldDef,i=t.stackField,a=t.stackby,o=t.sort,u=t.offset,s=t.impute,c=t.as;if(s&&r){var l=r.band,f=void 0===l?.5:l;r.bin&&e.push({type:"formula",expr:"".concat(f,"*")+Bz(r,{expr:"datum"})+"+".concat(1-f,"*")+Bz(r,{expr:"datum",binSuffix:"end"}),as:Bz(r,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:i,groupby:[].concat(Object(gh.a)(a),Object(gh.a)(n)),key:Bz(r,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[].concat(Object(gh.a)(this.getGroupbyFields()),Object(gh.a)(n)),field:i,sort:o,as:c,offset:u}),e}},{key:"stack",get:function(){return this._stack}}],[{key:"makeFromTransform",value:function(e,t){var r=t.stack,i=t.groupby,a=t.as,o=t.offset,u=void 0===o?"zero":o,s=[],c=[];if(void 0!==t.sort){var l,f=Object(Ri.a)(t.sort);try{for(f.s();!(l=f.n()).done;){var d=l.value;s.push(d.field),c.push(fI(d.order,"ascending"))}}catch(p){f.e(p)}finally{f.f()}}return new n(e,{stackField:r,groupby:i,offset:u,sort:{field:s,order:c},facetby:[],as:function(e){return lD(e)&&e.every((function(e){return dD(e)}))&&e.length>1}(a)?a:dD(a)?[a,a+"_end"]:[t.stack+"_start",t.stack+"_end"]})}},{key:"makeFromEncoding",value:function(e,t){var r,i=t.stack,a=t.encoding;if(!i)return null;i.groupbyChannel&&(r=Qz(a[i.groupbyChannel]));var o,u=function(e){return e.stack.stackBy.reduce((function(e,t){var n=Bz(t.fieldDef);return n&&e.push(n),e}),[])}(t),s=t.encoding.order;return o=lD(s)||Rz(s)?mz(s):u.reduce((function(e,t){return e.field.push(t),e.order.push("descending"),e}),{field:[],order:[]}),new n(e,{dimensionFieldDef:r,stackField:t.vgField(i.fieldChannel),facetby:[],stackby:u,sort:o,offset:i.offset,impute:i.impute,as:[t.vgField(i.fieldChannel,{suffix:"start",forAs:!0}),t.vgField(i.fieldChannel,{suffix:"end",forAs:!0})]})}}]),n}(uU),DH=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).transform=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=KD(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e,t,n=new Set;return(e=this.transform.groupby,null!==e&&void 0!==e?e:[]).forEach((function(e){return n.add(e)})),(t=this.transform.sort,null!==t&&void 0!==t?t:[]).forEach((function(e){return n.add(e.field)})),this.transform.window.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach((function(e){return n.add(e)})),n}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:Bz(e)}},{key:"hash",value:function(){return"WindowTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e,t,n=[],r=[],i=[],a=[],o=Object(Ri.a)(this.transform.window);try{for(o.s();!(t=o.n()).done;){var u=t.value;r.push(u.op),i.push(this.getDefaultName(u)),a.push(void 0===u.param?null:u.param),n.push(void 0===u.field?null:u.field)}}catch(g){o.e(g)}finally{o.f()}var s=this.transform.frame,c=this.transform.groupby;if(s&&null===s[0]&&null===s[1]&&r.every((function(e){return RI(e)})))return Object.assign({type:"joinaggregate",as:i,ops:r,fields:n},void 0!==c?{groupby:c}:{});var l=[],f=[];if(void 0!==this.transform.sort){var d,p=Object(Ri.a)(this.transform.sort);try{for(p.s();!(d=p.n()).done;){var h=d.value;l.push(h.field),f.push(null!==(e=h.order)&&void 0!==e?e:"ascending")}}catch(g){p.e(g)}finally{p.f()}}var m={field:l,order:f},v=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:a,as:i,ops:r,fields:n,sort:m},void 0!==v?{ignorePeers:v}:{}),void 0!==c?{groupby:c}:{}),void 0!==s?{frame:s}:{})}}]),n}(uU),IH=function(e){gB(n,e);var t=OB(n);function n(e){return uS(this,n),t.call(this,e)}return cS(n,[{key:"clone",value:function(){return new n(null)}}]),cS(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set(["_vgsid_"])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:"_vgsid_"}}}]),n}(uU),MH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"run",value:function(e){var t=e.parent;if(e instanceof TH){if(bH(t))return this.flags;if(t.numChildren()>1)return this.setContinue(),this.flags;if(t instanceof TH)this.setMutated(),t.merge(e);else{if(JD(t.producedFields(),e.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),e.swapWithParent()}}return this.setContinue(),this.flags}}]),n}(wH),FH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"mergeNodes",value:function(e,t){var n,r=t.shift(),i=Object(Ri.a)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.removeChild(a),a.parent=r,a.remove()}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(e){for(var t=e.children.map((function(e){return e.hash()})),n={},r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);var i,a=Object(Ri.a)(ZD(n));try{for(a.s();!(i=a.n()).done;){var o=i.value;n[o].length>1&&(this.setMutated(),this.mergeNodes(e,n[o]))}}catch(l){a.e(l)}finally{a.f()}var u,s=Object(Ri.a)(e.children);try{for(s.s();!(u=s.n()).done;){var c=u.value;this.run(c)}}catch(l){s.e(l)}finally{s.f()}return this.mutatedFlag}}]),n}(OH),PH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"run",value:function(e){return e instanceof sU||e.numChildren()>0||e instanceof SH||(this.setMutated(),e.remove()),this.flags}}]),n}(wH),zH=function(e){gB(n,e);var t=OB(n);function n(){var e;return uS(this,n),(e=t.apply(this,arguments)).fields=new Set,e.prev=null,e}return cS(n,[{key:"run",value:function(e){if(this.setContinue(),e instanceof cU){var t=e.producedFields();XD(t,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([].concat(Object(gh.a)(this.fields),Object(gh.a)(t))),this.prev=e}return this.flags}},{key:"reset",value:function(){this.fields.clear()}}]),n}(wH),LH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"run",value:function(e){this.setContinue();var t,n=e.parent.children.filter((function(e){return e instanceof cU})),r=n.pop(),i=Object(Ri.a)(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.setMutated(),r.merge(a)}}catch(o){i.e(o)}finally{i.f()}return this.flags}}]),n}(wH);function BH(e){if(e instanceof SH)if(1!==e.numChildren()||e.children[0]instanceof sU){var t=e.model.component.data.main;!function e(t){if(t instanceof sU&&t.type===JB&&1===t.numChildren()){var n=t.children[0];n instanceof SH||(n.swapWithParent(),e(t))}}(t);var n,r=(u=e,function e(t){if(!(t instanceof SH)){var n=t.clone();if(n instanceof sU){var r=$H+n.getSource();n.setSource(r),u.model.component.data.outputNodes[r]=n}else(n instanceof EH||n instanceof RH||n instanceof DH||n instanceof NH)&&n.addDimensions(u.fields);return t.children.flatMap(e).forEach((function(e){return e.parent=n})),[n]}return t.children.flatMap(e)}),i=e.children.map(r).flat(),a=Object(Ri.a)(i);try{for(a.s();!(n=a.n()).done;){n.value.parent=t}}catch(s){a.e(s)}finally{a.f()}}else{var o=e.children[0];(o instanceof EH||o instanceof RH||o instanceof DH||o instanceof NH)&&o.addDimensions(e.fields),o.swapWithParent(),BH(e)}else e.children.map(BH);var u}var WH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.call(this)}return cS(n,[{key:"run",value:function(e){e instanceof sU&&!e.isRequired()&&(this.setMutated(),e.remove());var t,n=Object(Ri.a)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(i){n.e(i)}finally{n.f()}return this.mutatedFlag}}]),n}(OH),UH=function(e){gB(n,e);var t=OB(n);function n(e){var r;return uS(this,n),(r=t.call(this)).requiresSelectionId=e&&UU(e),r}return cS(n,[{key:"run",value:function(e){e instanceof IH&&(this.requiresSelectionId&&(bH(e.parent)||e.parent instanceof EH||e.parent instanceof TH)||(this.setMutated(),e.remove()));var t,n=Object(Ri.a)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(i){n.e(i)}finally{n.f()}return this.mutatedFlag}}]),n}(OH),VH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"run",value:function(e){var t=e.parent,n=Object(gh.a)(t.children),r=t.children.filter((function(e){return e instanceof TH}));if(t.numChildren()>1&&r.length>=1){var i,a={},o=new Set,u=Object(Ri.a)(r);try{for(u.s();!(i=u.n()).done;){var s,c=i.value.parse,l=Object(Ri.a)(ZD(c));try{for(l.s();!(s=l.n()).done;){var f=s.value;f in a?a[f]!==c[f]&&o.add(f):a[f]=c[f]}}catch(w){l.e(w)}finally{l.f()}}}catch(w){u.e(w)}finally{u.f()}var d,p=Object(Ri.a)(o);try{for(p.s();!(d=p.n()).done;){delete a[d.value]}}catch(w){p.e(w)}finally{p.f()}if(0!==ZD(a).length){this.setMutated();var h,m=new TH(t,a),v=Object(Ri.a)(n);try{for(v.s();!(h=v.n()).done;){var g=h.value;if(g instanceof TH){var y,b=Object(Ri.a)(ZD(a));try{for(b.s();!(y=b.n()).done;){var x=y.value;delete g.parse[x]}}catch(w){b.e(w)}finally{b.f()}}t.removeChild(g),g.parent=m,g instanceof TH&&0===ZD(g.parse).length&&g.remove()}}catch(w){v.e(w)}finally{v.f()}}}return this.setContinue(),this.flags}}]),n}(wH),HH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"run",value:function(e){var t,n=e.parent,r=n.children.filter((function(e){return e instanceof EH})),i={},a=Object(Ri.a)(r);try{for(a.s();!(t=a.n()).done;){var o=t.value,u=UD(o.groupBy);u in i||(i[u]=[]),i[u].push(o)}}catch(m){a.e(m)}finally{a.f()}var s,c=Object(Ri.a)(ZD(i));try{for(c.s();!(s=c.n()).done;){var l=i[s.value];if(l.length>1){var f,d=l.pop(),p=Object(Ri.a)(l);try{for(p.s();!(f=p.n()).done;){var h=f.value;d.merge(h)&&(n.removeChild(h),h.parent=d,h.remove(),this.setMutated())}}catch(m){p.e(m)}finally{p.f()}}}}catch(m){c.e(m)}finally{c.f()}return this.setContinue(),this.flags}}]),n}(wH),qH=function(e){gB(n,e);var t=OB(n);function n(e){var r;return uS(this,n),(r=t.call(this)).model=e,r}return cS(n,[{key:"run",value:function(e){var t,n=e.parent,r=!(bH(n)||n instanceof HU||n instanceof TH||n instanceof IH),i=[],a=[],o=Object(Ri.a)(n.children);try{for(o.s();!(t=o.n()).done;){var u=t.value;u instanceof hH&&(r&&!JD(n.producedFields(),u.dependentFields())?i.push(u):a.push(u))}}catch(v){o.e(v)}finally{o.f()}if(i.length>0){var s,c=i.pop(),l=Object(Ri.a)(i);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.merge(f,this.model.renameSignal.bind(this.model))}}catch(v){l.e(v)}finally{l.f()}this.setMutated(),n instanceof hH?n.merge(c,this.model.renameSignal.bind(this.model)):c.swapWithParent()}if(a.length>1){var d,p=a.pop(),h=Object(Ri.a)(a);try{for(h.s();!(d=h.n()).done;){var m=d.value;p.merge(m,this.model.renameSignal.bind(this.model))}}catch(v){h.e(v)}finally{h.f()}this.setMutated()}return this.setContinue(),this.flags}}]),n}(wH),GH=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"run",value:function(e){var t=e.parent,n=Object(gh.a)(t.children);if(!qD(n,(function(e){return e instanceof sU}))||t.numChildren()<=1)return this.setContinue(),this.flags;var r,i,a=[],o=Object(Ri.a)(n);try{for(o.s();!(i=o.n()).done;){var u=i.value;if(u instanceof sU){for(var s=u;1===s.numChildren();){var c=s.children[0];if(!(c instanceof sU))break;s=c}a.push.apply(a,Object(gh.a)(s.children)),r?(t.removeChild(u),u.parent=r.parent,r.parent.removeChild(r),r.parent=s,this.setMutated()):r=s}else a.push(u)}}catch(p){o.e(p)}finally{o.f()}if(a.length){this.setMutated();var l,f=Object(Ri.a)(a);try{for(f.s();!(l=f.n()).done;){var d=l.value;d.parent.removeChild(d),d.parent=r}}catch(p){f.e(p)}finally{f.f()}}return this.setContinue(),this.flags}}]),n}(wH),$H="scale_";function KH(e){var t=[];return e.forEach((function e(n){0===n.numChildren()?t.push(n):n.children.forEach(e)})),t}function XH(e){return e}function YH(e,t){return t.map((function(t){if(e instanceof wH){var n=e.optimizeNextFromLeaves(t);return e.reset(),n}return e.run(t)})).some(XH)}function JH(e,t){var n=e.sources,r=new Set;return r.add(YH(new WH,n)),r.add(YH(new UH(t),n)),n=n.filter((function(e){return e.numChildren()>0})),r.add(YH(new PH,KH(n))),n=n.filter((function(e){return e.numChildren()>0})),r.add(YH(new MH,KH(n))),r.add(YH(new qH(t),KH(n))),r.add(YH(new zH,KH(n))),r.add(YH(new VH,KH(n))),r.add(YH(new HH,KH(n))),r.add(YH(new LH,KH(n))),r.add(YH(new FH,n)),r.add(YH(new GH,KH(n))),e.sources=n,r.has(!0)}function ZH(e,t){vH(e.sources);for(var n=0,r=0,i=0;i<5&&JH(e,t);i++)n++;e.sources.map(BH);for(var a=0;a<5&&JH(e,t);a++)r++;vH(e.sources),5===Math.max(n,r)&&XF("Maximum optimization runs(".concat(5,") reached."))}var QH=function(){function e(t){uS(this,e),Object.defineProperty(this,"signal",{enumerable:!0,get:t})}return cS(e,null,[{key:"fromName",value:function(t,n){return new e((function(){return t(n)}))}}]),e}();function eq(e){kq(e)?function(e){var t=e.component.scales;ZD(t).forEach((function(n){var r=function(e,t){var n=e.getScaleComponent(t).get("type"),r=function(e,t,n,r){if("unaggregated"===e){var i=rq(t,n),a=i.valid,o=i.reason;if(!a)return void XF(o)}else if(void 0===e&&r.useUnaggregatedDomain){if(rq(t,n).valid)return"unaggregated"}return e}(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);r!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:r}));if("x"===t&&e.channelHasField("x2"))return e.channelHasField("x")?IV(tq(n,r,e,"x"),tq(n,r,e,"x2"),"domain","scale",iq):tq(n,r,e,"x2");if("y"===t&&e.channelHasField("y2"))return e.channelHasField("y")?IV(tq(n,r,e,"y"),tq(n,r,e,"y2"),"domain","scale",iq):tq(n,r,e,"y2");return tq(n,r,e,t)}(e,n);if(t[n].setWithExplicit("domains",r),function(e,t){var n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t).bin,a=KP(r)&&r,o=fL(i)&&dL(i.extent)&&i.extent;(a||o)&&n.set("selectionExtent",null!==a&&void 0!==a?a:o,!0)}(e,n),e.component.data.isFaceted){for(var i=e;!Eq(i)&&i.parent;)i=i.parent;if("shared"===i.component.resolve.scale[n]){var a,o=Object(Ri.a)(r.value);try{for(o.s();!(a=o.n()).done;){var u=a.value;bW(u)&&(u.data=$H+u.data.replace($H,""))}}catch(s){o.e(s)}finally{o.f()}}}}))}(e):function(e){var t,n=Object(Ri.a)(e.children);try{for(n.s();!(t=n.n()).done;){eq(t.value)}}catch(i){n.e(i)}finally{n.f()}var r=e.component.scales;ZD(r).forEach((function(t){var n,a,o=null,u=Object(Ri.a)(e.children);try{for(u.s();!(a=u.n()).done;){var s=a.value.component.scales[t];if(s){n=void 0===n?s.getWithExplicit("domains"):IV(n,s.getWithExplicit("domains"),"domains","scale",iq);var c=s.get("selectionExtent");o&&c&&o.selection!==c.selection&&XF("The same selection must be used to override scale domains in a layered view."),o=c}}}catch(i){u.e(i)}finally{u.f()}r[t].setWithExplicit("domains",n),o&&r[t].set("selectionExtent",o,!0)}))}(e)}function tq(e,t,n,r){var i=n.fieldDef(r);if(t&&"unaggregated"!==t&&!KP(t)){var a=i.type,o=i.timeUnit;return TV("temporal"===a||o?function(e,t,n){return e.map((function(e){var r=aL(e,{timeUnit:n,type:t});return{signal:"{data: ".concat(r,"}")}}))}(t,a,o):[t])}var u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return NV([[0,1]]);var s=n.requestDataName(JB);return NV([{data:s,field:n.vgField(r,{suffix:"start"})},{data:s,field:n.vgField(r,{suffix:"end"})}])}var c=wM(r)?function(e,t,n){if(!HP(n))return;var r=e.fieldDef(t),i=r.sort;if(kz(i))return{op:"min",field:uV(r,t),order:"ascending"};var a=null!==e.stack;if(Oz(i))return nq(i,a);if(wz(i)){var o=i.encoding,u=i.order,s=e.fieldDef(o),c=s.aggregate,l=s.field;if(TI(c)||NI(c))return nq({field:Bz(s),order:u},a);if(RI(c)||!c)return nq({op:c,field:l,order:u},a)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(HD(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if("unaggregated"===t){var l=n.requestDataName(JB),f=i.field;return NV([{data:l,field:Bz({field:f,aggregate:"min"})},{data:l,field:Bz({field:f,aggregate:"max"})}])}if(cL(i.bin)){if(HP(e))return NV("bin-ordinal"===e?[]:[{data:eI(c)?n.requestDataName(JB):n.requestDataName("raw"),field:n.vgField(r,uL(i,r)?{binSuffix:"range"}:{}),sort:!0!==c&&fD(c)?c:{field:n.vgField(r,{}),op:"min"}}]);var d=i.bin;if(cL(d)){var p=dH(n,i.field,d);return NV([new QH((function(){var e=n.getSignalName(p);return"[".concat(e,".start, ").concat(e,".stop]")}))])}return NV([{data:n.requestDataName(JB),field:n.vgField(r,{})}])}if(i.timeUnit&&HD(["time","utc"],e)&&Az(r,i,kq(n)?n.encoding[lM(r)]:void 0,n.markDef,n.config)){var h=n.requestDataName(JB);return NV([{data:h,field:n.vgField(r)},{data:h,field:n.vgField(r,{suffix:"end"})}])}return NV(c?[{data:eI(c)?n.requestDataName(JB):n.requestDataName("raw"),field:n.vgField(r),sort:c}]:[{data:n.requestDataName(JB),field:n.vgField(r)}])}function nq(e,t){var n=e.op,r=e.field,i=e.order;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:t?"sum":"mean"},r?{field:uI(r)}:{}),i?{order:i}:{})}function rq(e,t){var n=e.aggregate,r=e.type;return n?dD(n)&&!FI[n]?{valid:!1,reason:HF.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:HF.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:HF.unaggregateDomainHasNoEffectForRawField(e)}}function iq(e,t,n,r){return e.explicit&&t.explicit&&XF(HF.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[].concat(Object(gh.a)(e.value),Object(gh.a)(t.value))}}function aq(e){if(bW(e)&&dD(e.field))return e.field;if(function(e){return!lD(e)&&("fields"in e&&!("data"in e))}(e)){var t,n,r=Object(Ri.a)(e.fields);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(bW(i)&&dD(i.field))if(t){if(t!==i.field)return XF("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=i.field}}catch(o){r.e(o)}finally{r.f()}return XF("Detected faceted independent scales that union domain of identical fields from different source detected. We will assume that this is the same field from a different fork of the same data source. However, if this is not case, the result view size maybe incorrect."),t}if(function(e){return!lD(e)&&("fields"in e&&"data"in e)}(e)){XF("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");var a=e.fields[0];return dD(a)?a:void 0}}function oq(e,t){return function(e){var t=KD(e.map((function(e){if(bW(e)){e.sort;return _I(e,["sort"])}return e})),UD),n=KD(e.map((function(e){if(bW(e)){var t=e.sort;return void 0===t||eI(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((function(e){return void 0!==e})),UD);if(0!==t.length){if(1===t.length){var r=e[0];if(bW(r)&&n.length>0){var i=n[0];return n.length>1&&(XF(HF.MORE_THAN_ONE_SORT),i=!0),Object.assign(Object.assign({},r),{sort:i})}return r}var a,o=KD(n.map((function(e){return eI(e)||!("op"in e)||e.op in AI?e:(XF(HF.domainSortDropped(e)),!0)})),UD);1===o.length?a=o[0]:o.length>1&&(XF(HF.MORE_THAN_ONE_SORT),a=!0);var u=KD(e.map((function(e){return bW(e)?e.data:null})),(function(e){return e}));return 1===u.length&&null!==u[0]?Object.assign({data:u[0],fields:t.map((function(e){return e.field}))},a?{sort:a}:{}):Object.assign({fields:t},a?{sort:a}:{})}}(e.component.scales[t].get("domains").map((function(t){return bW(t)&&(t.data=e.lookupDataSource(t.data)),t})))}function uq(e){return _q(e)||Cq(e)||Sq(e)?e.children.reduce((function(e,t){return e.concat(uq(t))}),sq(e)):sq(e)}function sq(e){return ZD(e.component.scales).reduce((function(t,n){var r=e.component.scales[n];if(r.merged)return t;var i,a=r.combine(),o=a.name,u=a.type,s=a.selectionExtent,c=(a.domains,a.range,_I(a,["name","type","selectionExtent","domains","range"])),l=function(e,t,n){if(("x"===n||"y"===n)&&yW(e))return{step:{signal:t+"_step"}};return e}(a.range,o,n);s&&(i=function(e,t){var n=t.selection;return{signal:GU(e.getSelectionComponent(n,tI(n)),t)}}(e,s));var f=oq(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:u},f?{domain:f}:{}),i?{domainRaw:i}:{}),{range:l}),c)),t}),[])}var cq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,{},{name:e})).merged=!1,i.setWithExplicit("type",r),i}return cS(n,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||qD(this.get("domains"),(function(e){return lD(e)&&2===e.length&&e[0]<=0&&e[1]>=0}))}}]),n}(AV),lq=["range","scheme"];function fq(e){return"x"===e?"width":"y"===e?"height":void 0}function dq(e){var t=e.component.scales;xM.forEach((function(n){var r=t[n];if(r){var i=function(e,t){var n,r=t.specifiedScales[e],i=t.size,a=t.getScaleComponent(e).get("type"),o=Object(Ri.a)(lq);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(void 0!==r[u]){var s=ZP(a,u),c=QP(e,u);if(s)if(c)XF(c);else switch(u){case"range":return TV(r[u]);case"scheme":return TV(hq(r[u]))}else XF(HF.scalePropertyNotWorkWithScaleType(a,u,e))}}}catch(d){o.e(d)}finally{o.f()}if(e===zI||e===LI){var l=e===zI?"width":"height",f=i[l];if(eB(f)){if(HP(a))return TV({step:f.step});XF(HF.stepDropped(l))}}return NV(function(e,t){var n=t.size,r=t.config,i=t.mark,a=t.getSignalName.bind(t),o=t.fieldDef(e).type,u=t.getScaleComponent(e).get("type"),s=t.specifiedScales[e].domain;switch(e){case zI:case LI:if(HD(["point","band"],u))if(e!==zI||n.width){if(e===LI&&!n.height){var c=iB(r.view,"height");if(eB(c))return c}}else{var l=iB(r.view,"width");if(eB(l))return l}var f=fq(e),d=t.getName(f);return e===LI&&qP(u)?[QH.fromName(a,d),0]:[0,QH.fromName(a,d)];case HI:var p=t.component.scales[e].get("zero"),h=function(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(HF.incompatibleChannel("size",e))}(i,p,r),m=function(e,t,n,r){var i={x:pq(n,"x"),y:pq(n,"y")};switch(e){case"bar":case"tick":if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;var a=mq(t,i,r.view);return SD(a)?a-1:new QH((function(){return"".concat(a.signal," - 1")}));case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":if(r.scale.maxSize)return r.scale.maxSize;var o=mq(t,i,r.view);return SD(o)?Math.pow(.95*o,2):new QH((function(){return"pow(".concat(.95," * ").concat(o.signal,", 2)")}))}throw new Error(HF.incompatibleChannel("size",e))}(i,n,t,r);return $P(u)?function(e,t,n){var r=function(){var r=gW(t)?t.signal:t,i="(".concat(r," - ").concat(e,") / (").concat(n," - 1)");return"sequence(".concat(e,", ").concat(t," + ").concat(i,", ").concat(i,")")};return gW(t)?new QH(r):{signal:r()}}(h,m,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&lD(n)?n.length+1:(XF(HF.domainRequiredForThresholdScale(r)),3)}}(u,r,s,e)):[h,m];case KI:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case VI:return"symbol";case BI:case WI:case UI:return"ordinal"===u?"nominal"===o?"category":"ordinal":"rect"===i||"geoshape"===i?"heatmap":"ramp";case qI:case GI:case $I:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(e))}(e,t))}(n,e);r.setWithExplicit("range",i)}}))}function pq(e,t){var n=e.fieldDef(t);if(n&&n.bin&&cL(n.bin)){var r=dH(e,n.field,n.bin),i=fq(t),a=e.getName(i);return new QH((function(){var t=e.getSignalName(r),n="(".concat(t,".stop - ").concat(t,".start) / ").concat(t,".step");return"".concat(e.getSignalName(a)," / (").concat(n,")")}))}}function hq(e){return function(e){return!dD(e)&&!!e.name}(e)?Object.assign({scheme:e.name},BD(e,["name"])):{scheme:e}}function mq(e,t,n){var r=eB(e.width)?e.width.step:rB(n,"width"),i=eB(e.height)?e.height.step:rB(n,"height");return t.x||t.y?new QH((function(){var e=[t.x?t.x.signal:r,t.y?t.y.signal:i];return"min(".concat(e.join(", "),")")})):Math.min(r,i)}function vq(e,t){kq(e)?function(e,t){var n=e.component.scales;ZD(n).forEach((function(r){var i=e.specifiedScales[r],a=n[r],o=e.getScaleComponent(r),u=e.fieldDef(r),s=e.config,c=i[t],l=o.get("type"),f=ZP(l,t),d=QP(r,t);if(void 0!==c&&(f?d&&XF(d):XF(HF.scalePropertyNotWorkWithScaleType(l,t,r))),f&&void 0===d)if(void 0!==c)a.copyKeyFromObject(t,i);else{var p=function(e,t,n,r,i,a,o,u,s,c){var l=c.scale,f=r.type,d=r.sort;switch(e){case"bins":return function(e,t){var n=t.bin;if(cL(n)){var r=dH(e,t.field,n);return new QH((function(){return e.getSignalName(r)}))}if(lL(n)&&fL(n)&&void 0!==n.step)return{step:n.step};return}(t,r);case"interpolate":return function(e,t){if(HD([BI,WI,UI],e)&&"nominal"!==t)return"hcl";return}(n,f);case"nice":return function(e,t,n){if(n.bin||HD([IP.TIME,IP.UTC],e))return;return!!HD([zI,LI],t)||void 0}(i,n,r);case"padding":return function(e,t,n,r,i,a){if(HD([zI,LI],e)){if(GP(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=i.type,u=i.orient;if("bar"===o&&!r.bin&&!r.timeUnit&&("vertical"===u&&"x"===e||"horizontal"===u&&"y"===e))return a.continuousBandSize}if(t===IP.POINT)return n.pointPadding}return}(n,i,l,r,s,c.bar);case"paddingInner":return function(e,t,n,r){if(void 0!==e)return;if(HD([zI,LI],t)){var i=r.bandPaddingInner,a=r.barBandPaddingInner,o=r.rectBandPaddingInner;return fI(i,"bar"===n?a:o)}return}(a,n,s.type,l);case"paddingOuter":return function(e,t,n,r,i,a){if(void 0!==e)return;if(HD([zI,LI],t)){if(n===IP.BAND)return fI(a.bandPaddingOuter,i/2)}return}(a,n,i,s.type,o,l);case"reverse":return function(e,t){if(qP(e)&&"descending"===t)return!0;return}(i,d);case"zero":return function(e,t,n,r,i){if(n&&"unaggregated"!==n&&qP(i)){if(lD(n)){var a=n[0],o=n[n.length-1];if(a<=0&&o>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!$P(i))return!0;if(!t.bin&&HD([zI,LI],e)){var u=r.orient;return!HD(["bar","area","line","trail"],r.type)||!("horizontal"===u&&"y"===e||"vertical"===u&&"x"===e)}return!1}(n,r,u,s,i)}return l[e]}(t,e,r,u,o.get("type"),o.get("padding"),o.get("paddingInner"),i.domain,e.markDef,s);void 0!==p&&a.set(t,p,!1)}}))}(e,t):yq(e,t)}function gq(e){kq(e)?dq(e):yq(e,"range")}function yq(e,t){var n,r=e.component.scales,i=Object(Ri.a)(e.children);try{for(i.s();!(n=i.n()).done;){var a=n.value;"range"===t?gq(a):vq(a,t)}}catch(o){i.e(o)}finally{i.f()}ZD(r).forEach((function(n){var i,a,u=Object(Ri.a)(e.children);try{for(u.s();!(a=u.n()).done;){var s=a.value.component.scales[n];if(s)i=IV(i,s.getWithExplicit(t),t,"scale",RV((function(e,n){switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}catch(o){u.e(o)}finally{u.f()}r[n].setWithExplicit(t,i)}))}function bq(e,t,n,r){var i=function(e,t,n){switch(t.type){case"nominal":case"ordinal":return QI(e)||"discrete"===SM(e)?("shape"===e&&"ordinal"===t.type&&XF(HF.discreteChannelCannotEncode(e,"ordinal")),"ordinal"):HD(["x","y"],e)&&HD(["rect","bar","image","rule"],n)?"band":"point";case"temporal":return QI(e)?"time":"discrete"===SM(e)?(XF(HF.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":return QI(e)?cL(t.bin)?"bin-ordinal":"linear":"discrete"===SM(e)?(XF(HF.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(HF.invalidFieldType(t.type))}(t,n,r),a=e.type;return wM(t)?void 0!==a?tz(t,a)?ez(a,n.type)?a:(XF(HF.scaleTypeNotWorkWithFieldDef(a,i)),i):(XF(HF.scaleTypeNotWorkWithChannel(t,a,i)),i):i:null}function xq(e){kq(e)?e.component.scales=function(e){var t=e.encoding,n=e.mark;return xM.reduce((function(r,i){var a,o,u=t[i];if(Rz(u)&&"geoshape"===n&&i===VI&&"geojson"===u.type)return r;if(Rz(u)?(a=u,o=u.scale):Nz(u)&&(a=u.condition,o=u.condition.scale),a&&null!==o&&!1!==o){var s=bq(o=null!==o&&void 0!==o?o:{},i,a,n);r[i]=new cq(e.scaleName(i+"",!0),{value:s,explicit:o.type===s})}return r}),{})}(e):e.component.scales=function(e){var t,n=e.component.scales={},r={},i=e.component.resolve,a=Object(Ri.a)(e.children);try{var o=function(){var n=t.value;xq(n),ZD(n.component.scales).forEach((function(t){var a;if(i.scale[t]=null!==(a=i.scale[t])&&void 0!==a?a:function(e,t){if(_q(t)||Eq(t))return"shared";if(Cq(t)||Sq(t))return HD(hM,e)?"independent":"shared";throw new Error("invalid model type for resolve")}(t,e),"shared"===i.scale[t]){var o=r[t],u=n.component.scales[t].getWithExplicit("type");o?!function(e,t){var n=MP[e],r=MP[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}(o.value,u.value)?(i.scale[t]="independent",delete r[t]):r[t]=IV(o,u,"type","scale",wq):r[t]=u}}))};for(a.s();!(t=a.n()).done;)o()}catch(v){a.e(v)}finally{a.f()}var u,s=Object(Ri.a)(ZD(r));try{for(s.s();!(u=s.n()).done;){var c=u.value,l=e.scaleName(c,!0),f=r[c];n[c]=new cq(l,f);var d,p=Object(Ri.a)(e.children);try{for(p.s();!(d=p.n()).done;){var h=d.value,m=h.component.scales[c];m&&(h.renameScale(m.get("name"),l),m.merged=!0)}}catch(v){p.e(v)}finally{p.f()}}}catch(v){s.e(v)}finally{s.f()}return n}(e)}var wq=RV((function(e,t){return zP(e)-zP(t)}));var Oq=function(){function e(){uS(this,e),this.nameMap={}}return cS(e,[{key:"rename",value:function(e,t){this.nameMap[e]=t}},{key:"has",value:function(e){return void 0!==this.nameMap[e]}},{key:"get",value:function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}]),e}();function kq(e){var t;return"unit"===(null===(t=e)||void 0===t?void 0:t.type)}function Eq(e){var t;return"facet"===(null===(t=e)||void 0===t?void 0:t.type)}function Sq(e){var t;return"repeat"===(null===(t=e)||void 0===t?void 0:t.type)}function Cq(e){var t;return"concat"===(null===(t=e)||void 0===t?void 0:t.type)}function _q(e){var t;return"layer"===(null===(t=e)||void 0===t?void 0:t.type)}var jq=function(){function e(t,n,r,i,a,o,u,s){var c,l,f=this;uS(this,e),this.type=n,this.parent=r,this.config=a,this.repeater=o,this.view=s,this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=f.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=f.lookupDataSource(e.from.facet.data)),e},this.parent=r,this.config=a,this.repeater=o,this.name=null!==(c=t.name)&&void 0!==c?c:i,this.title=iz(t.title)?{text:t.title}:t.title,this.scaleNameMap=r?r.scaleNameMap:new Oq,this.projectionNameMap=r?r.projectionNameMap:new Oq,this.signalNameMap=r?r.signalNameMap:new Oq,this.data=t.data,this.description=t.description,this.transforms=(l=t.transform,(null!==l&&void 0!==l?l:[]).map((function(e){return ZB(e)?{filter:FD(e.filter,RP)}:e}))),this.layout=SI(t)||pB(t)?{}:function(e,t,n){var r,i,a=n[t],o={},u=a.spacing,s=a.columns;void 0!==u&&(o.spacing=u),void 0!==s&&(Sz(e)&&!Ez(e.facet)||QL(e)&&lD(e.repeat)||YL(e))&&(o.columns=s);var c,l=Object(Ri.a)(tB);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(void 0!==e[f])if("spacing"===f){var d=e[f];o[f]=SD(d)?d:{row:(r=d.row,null!==r&&void 0!==r?r:u),column:(i=d.column,null!==i&&void 0!==i?i:u)}}else o[f]=e[f]}}catch(p){l.e(p)}finally{l.f()}return o}(t,n,a),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Sz(t)||r&&r.component.data.isFaceted&&void 0===t.data},layoutSize:new AV,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},u?zD(u):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return cS(e,[{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreRange;xq(e),eq(e);var r,i=Object(Ri.a)(JP);try{for(i.s();!(r=i.n()).done;){var a=r.value;vq(e,a)}}catch(o){i.e(o)}finally{i.f()}n||gq(e)}(this)}},{key:"parseProjection",value:function(){oH(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){JV(this)}},{key:"assembleGroupStyle",value:function(){var e,t;if("unit"===this.type||"layer"===this.type)return null!==(t=null===(e=this.view)||void 0===e?void 0:e.style)&&void 0!==t?t:"cell"}},{key:"assembleEncodeFromView",value:function(e){e.style;var t=_I(e,["style"]),n={};for(var r in t)if(kD(t,r)){var i=t[r];void 0!==i&&(n[r]={value:i})}return n}},{key:"assembleGroupEncodeEntry",value:function(e){var t=void 0;return this.view&&(t=this.assembleEncodeFromView(this.view)),e||"unit"!==this.type&&"layer"!==this.type?t:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==t&&void 0!==t?t:{})}},{key:"assembleLayout",value:function(){if(this.layout){var e=this.layout,t=e.spacing,n=_I(e,["spacing"]),r=this.component,i=this.config,a=function(e,t){var n,r,i={},a=Object(Ri.a)(tM);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=e[o];if(null===(n=u)||void 0===n?void 0:n.facetFieldDef){var s=lV(["titleAnchor","titleOrient"],u.facetFieldDef,t,o),c=s.titleAnchor,l=sV(o,s.titleOrient),f=wV(c,l);void 0!==f&&(i[l]=f)}}}catch(d){a.e(d)}finally{a.f()}return ZD(i).length>0?i:void 0}(r.layoutHeaders,i);return Object.assign(Object.assign(Object.assign({padding:t},this.assembleDefaultLayout()),n),a?{titleBand:a}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var e,t=this.component.layoutHeaders,n=[],r=Object(Ri.a)(tM);try{for(r.s();!(e=r.n()).done;){var i=e.value;t[i].title&&n.push(pV(this,i))}}catch(s){r.e(s)}finally{r.f()}var a,o=Object(Ri.a)(fV);try{for(o.s();!(a=o.n()).done;){var u=a.value;n=n.concat(vV(this,u))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"assembleAxes",value:function(){return function(e,t){var n=e.x,r=void 0===n?[]:n,i=e.y,a=void 0===i?[]:i;return[].concat(Object(gh.a)(r.map((function(e){return YU(e,"grid",t)}))),Object(gh.a)(a.map((function(e){return YU(e,"grid",t)}))),Object(gh.a)(r.map((function(e){return YU(e,"main",t)}))),Object(gh.a)(a.map((function(e){return YU(e,"main",t)})))).filter((function(e){return e}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return tH(this)}},{key:"assembleProjections",value:function(){return nH(this)}},{key:"assembleTitle",value:function(){var e,t,n,r=null!==(e=this.title)&&void 0!==e?e:{},i=r.encoding,a=_I(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},rz(this.config.title).nonMark),a),i?{encode:{update:i}}:{});if(o.text)return HD(["unit","layer"],this.type)?HD(["middle",void 0],o.anchor)&&(o.frame=null!==(t=o.frame)&&void 0!==t?t:"group"):o.anchor=null!==(n=o.anchor)&&void 0!==n?n:"start",ZD(o).length>0?o:void 0}},{key:"assembleGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||Eq(this.parent)?uq(this):[];r.length>0&&(t.scales=r);var i=this.assembleAxes();i.length>0&&(t.axes=i);var a=this.assembleLegends();return a.length>0&&(t.legends=a),t}},{key:"hasDescendantWithFieldOnChannel",value:function(e){var t,n=Object(Ri.a)(this.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(kq(r)){if(r.channelHasField(e))return!0}else if(r.hasDescendantWithFieldOnChannel(e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"getName",value:function(e){return tI((this.name?this.name+"_":"")+e)}},{key:"requestDataName",value:function(e){var t,n=this.getName(e),r=this.component.data.outputNodeRefCounts;return r[n]=(null!==(t=r[n])&&void 0!==t?t:0)+1,n}},{key:"getSizeSignalRef",value:function(e){if(Eq(this.parent)){var t=vM(e),n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(HP(r)&&yW(i)){var a=n.get("name"),o=aq(oq(this,t));return o?{signal:CV(a,n,Bz({aggregate:"distinct",field:o},{expr:"datum"}))}:(XF("Unknown field for ".concat(t,". Cannot calculate view size.")),null)}}}return{signal:this.signalNameMap.get(this.getName(e))}}},{key:"lookupDataSource",value:function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e}},{key:"getSignalName",value:function(e){return this.signalNameMap.get(e)}},{key:"renameSignal",value:function(e,t){this.signalNameMap.rename(e,t)}},{key:"renameScale",value:function(e,t){this.scaleNameMap.rename(e,t)}},{key:"renameProjection",value:function(e,t){this.projectionNameMap.rename(e,t)}},{key:"scaleName",value:function(e,t){return t?this.getName(e):oM(e)&&wM(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}},{key:"projectionName",value:function(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}},{key:"getSelectionComponent",value:function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(HF.selectionNotFound(t));return n}},{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}}]),e}(),Aq=function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"vgField",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(e);if(n)return Bz(n,t)}},{key:"reduceFieldDef",value:function(e,t){return xL(this.getMapping(),(function(t,n,r){var i=Zz(n);return i?e(t,i,r):t}),t)}},{key:"forEachFieldDef",value:function(e,t){bL(this.getMapping(),(function(t,n){var r=Zz(t);r&&e(r,n)}),t)}}]),n}(jq),Tq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i,a,o,u;uS(this,n),(i=t.call(this,e)).transform=r,i.transform=zD(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[(o=s[0],null!==o&&void 0!==o?o:"value"),(u=s[1],null!==u&&void 0!==u?u:"density")],i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.density].concat(Object(gh.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"DensityTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.density,n=_I(e,["density"]);return Object.assign({type:"kde",field:t},n)}}]),n}(uU),Nq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).filter=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(ZD(this.filter))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"FilterInvalid ".concat(UD(this.filter))}},{key:"assemble",value:function(){var e=this,t=ZD(this.filter).reduce((function(t,n){var r=e.filter[n],i=Bz(r,{expr:"datum"});return null!==r&&("temporal"===r.type?t.push("(isDate(".concat(i,") || (isValid(").concat(i,") && isFinite(+").concat(i,")))")):"quantitative"===r.type&&(t.push("isValid(".concat(i,")")),t.push("isFinite(+".concat(i,")")))),t}),[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}],[{key:"make",value:function(e,t){var r=t.config,i=t.mark;if("filter"!==oz("invalid",t.markDef,r))return null;var a=t.reduceFieldDef((function(e,n,r){var a=wM(r)&&t.getScaleComponent(r);a&&(!qP(a.get("type"))||n.aggregate||gI(i)||(e[n.field]=n));return e}),{});return ZD(a).length?new n(e,a):null}}]),n}(uU),Rq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;uS(this,n),(i=t.call(this,e)).transform=r,i.transform=zD(r);var a=i.transform,o=a.flatten,u=a.as,s=void 0===u?[]:u;return i.transform.as=o.map((function(e,t){var n;return null!==(n=s[t])&&void 0!==n?n:e})),i}return cS(n,[{key:"clone",value:function(){return new n(this.parent,zD(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"flatten",fields:e.flatten,as:e.as}}}]),n}(uU),Dq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i,a,o,u;uS(this,n),(i=t.call(this,e)).transform=r,i.transform=zD(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[(o=s[0],null!==o&&void 0!==o?o:"key"),(u=s[1],null!==u&&void 0!==u?u:"value")],i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.fold)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"fold",fields:e.fold,as:e.as}}}]),n}(uU),Iq=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a){var o;return uS(this,n),(o=t.call(this,e)).fields=r,o.geojson=i,o.signal=a,o}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function(){var e,t=(e=this.fields,null!==e&&void 0!==e?e:[]).filter(dD);return new Set([].concat(Object(gh.a)(this.geojson?[this.geojson]:[]),Object(gh.a)(t)))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(UD(this.fields))}},{key:"assemble",value:function(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}],[{key:"parseAll",value:function(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;for(var r=0,i=0,a=[["longitude","latitude"],["longitude2","latitude2"]];i<a.length;i++){var o=a[i].map((function(e){return t.channelHasField(e)?t.fieldDef(e).field:Mz(t.encoding[e])?{expr:t.encoding[e].value+""}:void 0}));(o[0]||o[1])&&(e=new n(e,o,null,t.getName("geojson_".concat(r++))))}if(t.channelHasField(VI)){var u=t.fieldDef(VI);"geojson"===u.type&&(e=new n(e,null,u.field,t.getName("geojson_".concat(r++))))}return e}}]),n}(uU),Mq=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a){var o;return uS(this,n),(o=t.call(this,e)).projection=r,o.fields=i,o.as=a,o}return cS(n,[{key:"clone",value:function(){return new n(null,this.projection,zD(this.fields),zD(this.as))}},{key:"dependentFields",value:function(){return new Set(this.fields.filter(dD))}},{key:"producedFields",value:function(){return new Set(this.as)}},{key:"hash",value:function(){return"Geopoint ".concat(this.projection," ").concat(UD(this.fields)," ").concat(UD(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(e,t){if(!t.projectionName())return e;for(var r=0,i=[["longitude","latitude"],["longitude2","latitude2"]];r<i.length;r++){var a=i[r],o=a.map((function(e){return t.channelHasField(e)?t.fieldDef(e).field:Mz(t.encoding[e])?{expr:t.encoding[e].value+""}:void 0})),u="longitude2"===a[0]?"2":"";(o[0]||o[1])&&(e=new n(e,t.projectionName(),o,[t.getName("x"+u),t.getName("y"+u)]))}return e}}]),n}(uU),Fq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).transform=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.impute,this.transform.key].concat(Object(gh.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(e){var t=e.start,n=void 0===t?0:t,r=e.stop,i=e.step,a=[n,r].concat(Object(gh.a)(i?[i]:[])).join(",");return{signal:"sequence(".concat(a,")")}}},{key:"hash",value:function(){return"Impute ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e,t=this.transform,n=t.impute,r=t.key,i=t.keyvals,a=t.method,o=t.groupby,u=t.value,s=t.frame,c=void 0===s?[null,null]:s,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:n,key:r},i?{keyvals:QB(i)?this.processSequence(i):i}:{}),{method:"value"}),o?{groupby:o}:{}),{value:null});a&&"value"!==a?e=[Object.assign({type:"window",as:["imputed_".concat(n,"_value")],ops:[a],fields:[n],frame:c,ignorePeers:!1},o?{groupby:o}:{}),{type:"formula",expr:"datum.".concat(n," === null ? datum.imputed_").concat(n,"_value : datum.").concat(n),as:n}]:e=[{type:"formula",expr:"datum.".concat(n," === null ? ").concat(u," : datum.").concat(n),as:n}];return[l].concat(Object(gh.a)(e))}}],[{key:"makeFromTransform",value:function(e,t){return new n(e,t)}},{key:"makeFromEncoding",value:function(e,t){var r=t.encoding,i=r.x,a=r.y;if(Rz(i)&&Rz(a)){var o=i.impute?i:a.impute?a:void 0;if(void 0===o)return;var u=i.impute?a:a.impute?i:void 0,s=o.impute,c=s.method,l=s.value,f=s.frame,d=s.keyvals,p=wL(t.mark,r);return new n(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:u.field},c?{method:c}:{}),void 0!==l?{value:l}:{}),f?{frame:f}:{}),void 0!==d?{keyvals:d}:{}),p.length?{groupby:p}:{}))}return null}}]),n}(uU),Pq=function(e){gB(n,e);var t=OB(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return uS(this,n),(e=t.call(this,r,i)).explicit=r,e.implicit=i,e.parseNothing=a,e}return cS(n,[{key:"clone",value:function(){var e=mB(hB(n.prototype),"clone",this).call(this);return e.parseNothing=this.parseNothing,e}}]),n}(AV),zq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i,a,o,u;uS(this,n),(i=t.call(this,e)).transform=r,i.transform=zD(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[(o=s[0],null!==o&&void 0!==o?o:r.on),(u=s[1],null!==u&&void 0!==u?u:r.loess)],i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.loess,this.transform.on].concat(Object(gh.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"LoessTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.loess,n=e.on,r=_I(e,["loess","on"]);return Object.assign({type:"loess",x:n,y:t},r)}}]),n}(uU),Lq=function(e){gB(n,e);var t=OB(n);function n(e,r,i){var a;return uS(this,n),(a=t.call(this,e)).transform=r,a.secondary=i,a}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform),this.secondary)}},{key:"dependentFields",value:function(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function(){return new Set(this.transform.as?xD(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function(){return"Lookup ".concat(UD({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:xD(this.transform.as)}:{});else{var t=this.transform.as;dD(t)||(XF(HF.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(e,t,r,i){var a,o=t.component.data.sources,u=r.from,s=null;if(function(e){return void 0!==e.data}(u)){var c=sG(u.data,o);c||(c=new mH(u.data),o.push(c));var l=t.getName("lookup_".concat(i));s=new sU(c,l,"lookup",t.component.data.outputNodeRefCounts),t.component.data.outputNodes[l]=s}else if(function(e){return void 0!==e.selection}(u)){var f=u.selection;if(r.as=null!==(a=r.as)&&void 0!==a?a:f,!(s=t.getSelectionComponent(tI(f),f).materialized))throw new Error(HF.noSameUnitLookup(f))}return new n(e,r,s.getSource())}}]),n}(uU),Bq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i,a,o,u;uS(this,n),(i=t.call(this,e)).transform=r,i.transform=zD(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[(o=s[0],null!==o&&void 0!==o?o:"prob"),(u=s[1],null!==u&&void 0!==u?u:"value")],i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.quantile].concat(Object(gh.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"QuantileTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.quantile,n=_I(e,["quantile"]);return Object.assign({type:"quantile",field:t},n)}}]),n}(uU),Wq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i,a,o,u;uS(this,n),(i=t.call(this,e)).transform=r,i.transform=zD(r);var s=null!==(a=i.transform.as)&&void 0!==a?a:[void 0,void 0];return i.transform.as=[(o=s[0],null!==o&&void 0!==o?o:r.on),(u=s[1],null!==u&&void 0!==u?u:r.regression)],i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.regression,this.transform.on].concat(Object(gh.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"RegressionTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.regression,n=e.on,r=_I(e,["regression","on"]);return Object.assign({type:"regression",x:n,y:t},r)}}]),n}(uU),Uq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).transform=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"addDimensions",value:function(e){var t;this.transform.groupby=KD((t=this.transform.groupby,null!==t&&void 0!==t?t:[]).concat(e),(function(e){return e}))}},{key:"producedFields",value:function(){}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.pivot,this.transform.value].concat(Object(gh.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"hash",value:function(){return"PivotTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.pivot,n=e.value,r=e.groupby,i=e.limit,a=e.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},void 0!==i?{limit:i}:{}),void 0!==a?{op:a}:{}),void 0!==r?{groupby:r}:{})}}]),n}(uU),Vq=function(e){gB(n,e);var t=OB(n);function n(e,r){var i;return uS(this,n),(i=t.call(this,e)).transform=r,i}return cS(n,[{key:"clone",value:function(){return new n(null,zD(this.transform))}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"SampleTransform ".concat(UD(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),n}(uU);function Hq(e){var t=0;return function n(r,i){var a,o,u,s;if(r instanceof mH&&(r.isGenerator||HB(r.data)||(e.push(i),i={name:null,source:i.name,transform:[]})),r instanceof TH&&(r.parent instanceof mH&&!i.source?(i.format=Object.assign(Object.assign({},null!==(a=i.format)&&void 0!==a?a:{}),{parse:r.assembleFormatParse()}),(o=i.transform).push.apply(o,Object(gh.a)(r.assembleTransforms(!0)))):(u=i.transform).push.apply(u,Object(gh.a)(r.assembleTransforms()))),r instanceof SH)return i.name||(i.name="data_".concat(t++)),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void r.assemble().forEach((function(t){return e.push(t)}));if((r instanceof gH||r instanceof yH||r instanceof Nq||r instanceof HU||r instanceof oV||r instanceof Mq||r instanceof Iq||r instanceof EH||r instanceof Lq||r instanceof DH||r instanceof NH||r instanceof Dq||r instanceof Rq||r instanceof Tq||r instanceof zq||r instanceof Bq||r instanceof Wq||r instanceof IH||r instanceof Vq||r instanceof Uq)&&i.transform.push(r.assemble()),(r instanceof hH||r instanceof cU||r instanceof Fq||r instanceof RH)&&(s=i.transform).push.apply(s,Object(gh.a)(r.assemble())),r instanceof sU)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof sU)r.setSource(i.name);else{if(i.name||(i.name="data_".concat(t++)),r.setSource(i.name),1===r.numChildren())e.push(i),i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof sU&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:i.name||(i.name="data_".concat(t++));var c=i.name;!i.source||i.transform.length>0?e.push(i):c=i.source,r.children.forEach((function(e){n(e,{name:null,source:c,transform:[]})}))}}}function qq(e,t){var n,r,i=[],a=Hq(i),o=0;e.sources.forEach((function(e){e.hasName()||(e.dataName="source_".concat(o++));var t=e.assemble();a(e,t)})),i.forEach((function(e){0===e.transform.length&&delete e.transform}));var u,s=0,c=Object(Ri.a)(i.entries());try{for(c.s();!(u=c.n()).done;){var l=Object(Ca.a)(u.value,2),f=l[0],d=l[1];0!==(n=d.transform,null!==n&&void 0!==n?n:[]).length||d.source||i.splice(s++,0,i.splice(f,1)[0])}}catch(O){c.e(O)}finally{c.f()}for(var p=0,h=i;p<h.length;p++){var m,v=h[p],g=Object(Ri.a)(null!==(r=v.transform)&&void 0!==r?r:[]);try{for(g.s();!(m=g.n()).done;){var y=m.value;"lookup"===y.type&&(y.from=e.outputNodes[y.from].getSource())}}catch(O){g.e(O)}finally{g.f()}}for(var b=0,x=i;b<x.length;b++){var w=x[b];w.name in t&&(w.values=t[w.name])}return i}function Gq(e,t){var n;if(e.channelHasField(t)){var r=e.facet[t],i=cV("title",null,e.config,t),a=Kz(r,e.config,{allowDisabling:!0,includeDefault:void 0===i||!!i});e.child.component.layoutHeaders[t].title&&(a=lD(a)?a.join(", "):a,a+=" / "+e.child.component.layoutHeaders[t].title,e.child.component.layoutHeaders[t].title=null);var o=cV("labelOrient",r,e.config,t),u=fI((null!==(n=r.header)&&void 0!==n?n:{}).labels,!0),s=HD(["bottom","right"],o)?"footer":"header";e.component.layoutHeaders[t]=Object(su.a)({title:a,facetFieldDef:r},s,"facet"===t?[]:[$q(e,t,u)])}}function $q(e,t,n){var r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Kq(e,t){var n,r,i=e.child;if(i.component.axes[t]){var a=e.component,o=a.layoutHeaders,u=a.resolve;if(u.axis[t]=jV(u,t),"shared"===u.axis[t]){var s,c="x"===t?"column":"row",l=o[c],f=Object(Ri.a)(i.component.axes[t]);try{for(f.s();!(s=f.n()).done;){var d=s.value,p="top"===(r=d.get("orient"))||"left"===r?"header":"footer";l[p]=null!==(n=l[p])&&void 0!==n?n:[$q(e,c,!1)];var h=YU(d,"main",e.config,{header:!0});l[p][0].axes.push(h),d.mainExtracted=!0}}catch(m){f.e(m)}finally{f.f()}}}}function Xq(e){Zq(e);var t=e.component.layoutSize;t.setWithExplicit("width",Qq(e,"width")),t.setWithExplicit("height",Qq(e,"height"))}var Yq=Xq,Jq={vconcat:"width",hconcat:"height"};function Zq(e){var t,n=Object(Ri.a)(e.children);try{for(n.s();!(t=n.n()).done;){t.value.parseLayoutSize()}}catch(r){n.e(r)}finally{n.f()}}function Qq(e,t){var n,r,i="width"===t?"x":"y",a=e.component.resolve,o=Object(Ri.a)(e.children);try{for(o.s();!(r=o.n()).done;){var u=r.value.component.layoutSize.getWithExplicit(t),s=a.scale[i];if("independent"===s&&"step"===u.value){n=void 0;break}if(n){if("independent"===s&&n.value!==u.value){n=void 0;break}n=IV(n,u,t,"")}else n=u}}catch(d){o.e(d)}finally{o.f()}if(n){var c,l=Object(Ri.a)(e.children);try{for(l.s();!(c=l.n()).done;){var f=c.value;e.renameSignal(f.getName(t),e.getName(t)),f.component.layoutSize.set(t,"merged",!1)}}catch(d){l.e(d)}finally{l.f()}return n}return{explicit:!1,value:void 0}}function eG(e,t){var n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){var a=i.get("type"),o=i.get("range");if(HP(a)){var u=iB(r.view,t);return yW(o)||eB(u)?"step":u}return nB(r.view,t)}if(e.hasProjection)return nB(r.view,t);var s=iB(r.view,t);return eB(s)?s.step:s}function tG(e,t){return aG(e,t)}function nG(e,t){return(n=e.field)&&!dD(n)&&"repeat"in n?e.field.repeat in t?Object.assign(Object.assign({},e),{field:t[e.field.repeat]}):void XF(HF.noSuchRepeatedValue(e.field.repeat)):e;var n}function rG(e,t){if(void 0!==(e=nG(e,t))){if(null===e)return null;if(_z(e)&&Oz(e.sort)){var n=nG(e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function iG(e,t){if(!Rz(e)){if(Nz(e)){var n=rG(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});e.condition;return _I(e,["condition"])}return e}var r=rG(e,t);return r||(Tz(e)?{condition:e.condition}:void 0)}function aG(e,t){var n={};for(var r in e)if(kD(e,r)){var i=e[r];if(lD(i))n[r]=i.map((function(e){return iG(e,t)})).filter((function(e){return e}));else{var a=iG(i,t);void 0!==a&&(n[r]=a)}}return n}function oG(e,t,n){return Bz(t,Object.assign({suffix:"by_".concat(Bz(e))},null!==n&&void 0!==n?n:{}))}var uG=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a,o){var u;uS(this,n),(u=t.call(this,e,"facet",r,i,o,a,e.resolve)).child=MG(e.spec,xB(u),u.getName("child"),void 0,a,o),u.children=[u.child];var s=function(e,t){return Ez(e)?aG(e,t):rG(e,t)}(e.facet,a);return u.facet=u.initFacet(s),u}return cS(n,[{key:"initFacet",value:function(e){return Ez(e)?xL(e,(function(e,t,n){return HD([PI,"column"],n)?void 0===t.field?(XF(HF.emptyFieldDef(t,n)),e):(e[n]=eL(t,n),e):(XF(HF.incompatibleChannel(n,"facet")),e)}),{}):{facet:eL(e,"facet")}}},{key:"channelHasField",value:function(e){return!!this.facet[e]}},{key:"fieldDef",value:function(e){return this.facet[e]}},{key:"parseData",value:function(){this.component.data=lG(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){Zq(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(e){var t,n=Object(Ri.a)(tM);try{for(n.s();!(t=n.n()).done;){Gq(e,t.value)}}catch(r){n.e(r)}finally{n.f()}Kq(e,"x"),Kq(e,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.child.assembleSelectionTopLevelSignals(e)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(e){return this.child.assembleSelectionData(e)}},{key:"getHeaderLayoutMixins",value:function(){var e,t,n,r,i,a={},o=Object(Ri.a)(tM);try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=Object(Ri.a)(dV);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=this.component.layoutHeaders[s],d=f[l],p=f.facetFieldDef;if(p){var h=cV("titleOrient",p,this.config,s);if(HD(["right","bottom"],h)){var m=sV(s,h);a.titleAnchor=null!==(e=a.titleAnchor)&&void 0!==e?e:{},a.titleAnchor[m]="end"}}if(null===(t=d)||void 0===t?void 0:t[0]){var v="row"===s?"height":"width",g="header"===l?"headerBand":"footerBand";"facet"===s||this.child.component.layoutSize.get(v)||(a[g]=null!==(n=a[g])&&void 0!==n?n:{},a[g][s]=.5),f.title&&(a.offset=null!==(r=a.offset)&&void 0!==r?r:{},a.offset["row"===s?"rowTitle":"columnTitle"]=10)}}}catch(y){c.e(y)}finally{c.f()}}}catch(y){o.e(y)}finally{o.f()}return a}},{key:"assembleDefaultLayout",value:function(){var e=this.facet,t=e.column,n=e.row,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(n||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(i="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:i})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof n)){var e=this.getName("column_domain");return{signal:"length(data('".concat(e,"'))")}}}},{key:"assembleGroup",value:function(e){return this.parent&&this.parent instanceof n?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:Bz(this.facet.column,{prefix:"distinct"})}}}}:{}),mB(hB(n.prototype),"assembleGroup",this).call(this,e)):mB(hB(n.prototype),"assembleGroup",this).call(this,e)}},{key:"getCardinalityAggregateForChild",value:function(){var e=[],t=[],r=[];if(this.child instanceof n){if(this.child.channelHasField("column")){var i=Bz(this.child.facet.column);e.push(i),t.push("distinct"),r.push("distinct_".concat(i))}}else for(var a=0,o=["x","y"];a<o.length;a++){var u=o[a],s=this.child.component.scales[u];if(s&&!s.merged){var c=s.get("type"),l=s.get("range");if(HP(c)&&yW(l)){var f=aq(oq(this.child,u));f?(e.push(f),t.push("distinct"),r.push("distinct_".concat(f))):XF("Unknown field for ".concat(u,". Cannot calculate view size."))}}}return{fields:e,ops:t,as:r}}},{key:"assembleFacet",value:function(){var e,t=this.component.data.facetRoot,n=t.name,r=t.data,i=this.facet,a=i.row,o=i.column,u=this.getCardinalityAggregateForChild(),s=u.fields,c=u.ops,l=u.as,f=[],d=Object(Ri.a)(tM);try{for(d.s();!(e=d.n()).done;){var p=e.value,h=this.facet[p];if(h){f.push(Bz(h));var m=h.bin,v=h.sort;if(cL(m)&&f.push(Bz(h,{binSuffix:"end"})),Oz(v)){var g=v.field,y=v.op,b=void 0===y?"mean":y,x=oG(h,v);a&&o?(s.push(x),c.push("max"),l.push(x)):(s.push(g),c.push(b),l.push(x))}else if(lD(v)){var w=uV(h,p);s.push(w),c.push("max"),l.push(w)}}}}catch(k){d.e(k)}finally{d.f()}var O=!!a&&!!o;return Object.assign({name:n,data:r,groupby:f},O||s.length>0?{aggregate:Object.assign(Object.assign({},O?{cross:O}:{}),s.length?{fields:s,ops:c,as:l}:{})}:{})}},{key:"facetSortFields",value:function(e){var t=this.facet[e];return t?Oz(t.sort)?[oG(t,t.sort,{expr:"datum"})]:lD(t.sort)?[uV(t,e,{expr:"datum"})]:[Bz(t,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(e){var t=this.facet[e];if(t){var n=t.sort;return[(Oz(n)?n.order:!lD(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var e=this.facet,t=this.config;if(e.facet)return yV(e.facet,"facet",t);var n,r={row:["top","bottom"],column:["left","right"]},i=Object(Ri.a)(fV);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(e[a]){var o=cV("labelOrient",e[a],t,a);if(HD(r[a],o))return yV(e[a],a,t)}}}catch(u){i.e(u)}finally{i.f()}}},{key:"assembleMarks",value:function(){var e=this,t=this.child,n=function(e){var t=[],n=Hq(t);return e.children.forEach((function(t){return n(t,{source:e.name,name:null,transform:[]})})),t}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{}),a?{style:a}:{}),{from:{facet:this.assembleFacet()},sort:{field:tM.map((function(t){return e.facetSortFields(t)})).flat(),order:tM.map((function(t){return e.facetSortOrder(t)})).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(function(e,t){if(e.component.selection&&ZD(e.component.selection).length){var n=pD(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:CT("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return _U(t)}(this,[])))]}},{key:"getMapping",value:function(){return this.facet}}]),n}(Aq);function sG(e,t){var n,r,i,a,o,u,s,c,l,f,d,p=Object(Ri.a)(t);try{for(p.s();!(d=p.n()).done;){var h=d.value,m=h.data;if((!e.name||!h.hasName()||e.name===h.dataName)&&((!(null===(n=e.format)||void 0===n?void 0:n.mesh)||!(null===(r=m.format)||void 0===r?void 0:r.feature))&&(!(null===(i=e.format)||void 0===i?void 0:i.feature)&&!(null===(a=m.format)||void 0===a?void 0:a.feature)||(null===(o=e.format)||void 0===o?void 0:o.feature)===(null===(u=m.format)||void 0===u?void 0:u.feature))&&(!(null===(s=e.format)||void 0===s?void 0:s.mesh)&&!(null===(c=m.format)||void 0===c?void 0:c.mesh)||(null===(l=e.format)||void 0===l?void 0:l.mesh)===(null===(f=m.format)||void 0===f?void 0:f.mesh))))if(qB(e)&&qB(m)){if(PD(e.values,m.values))return h}else if(HB(e)&&HB(m)){if(e.url===m.url)return h}else if(GB(e)&&e.name===h.dataName)return h}}catch(v){p.e(v)}finally{p.f()}return null}function cG(e,t){if(e.data||!e.parent){if(null===e.data){var n=new mH([]);return t.push(n),n}var r=sG(e.data,t);if(r)return $B(e.data)||(r.data.format=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];$D(e,null!==o&&void 0!==o?o:{})}return e}({},e.data.format,r.data.format)),!r.hasName()&&e.data.name&&(r.dataName=e.data.name),r;var i=new mH(e.data);return t.push(i),i}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function lG(e){var t,n,r,i,a,o,u,s,c,l,f,d=cG(e,e.component.data.sources),p=e.component.data,h=p.outputNodes,m=p.outputNodeRefCounts,v=e.parent?e.parent.component.data.ancestorParse.clone():new Pq,g=e.data;$B(g)?(KB(g)?d=new yH(d,g.sequence):YB(g)&&(d=new gH(d,g.graticule)),v.parseNothing=!0):null===(null===(n=null===(t=g)||void 0===t?void 0:t.format)||void 0===n?void 0:n.parse)&&(v.parseNothing=!0),r=TH.makeExplicit(d,e,v),d=new IH(d=null!==r&&void 0!==r?r:d);var y=e.parent&&_q(e.parent);(kq(e)||Eq(e))&&y&&(d=null!==(i=hH.makeFromEncoding(d,e))&&void 0!==i?i:d),e.transforms.length>0&&(d=function(e,t,n){var r,i,a,o=0,u=Object(Ri.a)(t.transforms);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=void 0,l=void 0;if(lW(s))l=e=new oV(e,s),c="derived";else if(ZB(s)){var f=jH(s);l=e=null!==(r=TH.makeWithAncestors(e,{},f,n))&&void 0!==r?r:e,e=new HU(e,t,s.filter)}else if(fW(s))l=e=hH.makeFromTransform(e,s,t),c="number";else if(pW(s)){c="date",void 0===n.getWithExplicit(s.field).value&&(e=new TH(e,Object(su.a)({},s.field,c)),n.set(s.field,c,!1)),l=e=cU.makeFromTransform(e,s)}else if(hW(s))l=e=EH.makeFromTransform(e,s),c="number",UU(t)&&(e=new IH(e));else if(eW(s))l=e=Lq.make(e,t,s,o++),c="derived";else if(uW(s))l=e=new DH(e,s),c="number";else if(sW(s))l=e=new NH(e,s),c="number";else if(mW(s))l=e=RH.makeFromTransform(e,s),c="derived";else if(vW(s))l=e=new Dq(e,s),c="derived";else if(cW(s))l=e=new Rq(e,s),c="derived";else if(tW(s))l=e=new Uq(e,s),c="derived";else if(oW(s))e=new Vq(e,s);else if(dW(s))l=e=Fq.makeFromTransform(e,s),c="derived";else if(nW(s))l=e=new Tq(e,s),c="derived";else if(rW(s))l=e=new Bq(e,s),c="derived";else if(iW(s))l=e=new Wq(e,s),c="derived";else{if(!aW(s)){XF(HF.invalidTransformIgnored(s));continue}l=e=new zq(e,s),c="derived"}if(l&&void 0!==c){var d,p=Object(Ri.a)(null!==(i=l.producedFields())&&void 0!==i?i:[]);try{for(p.s();!(d=p.n()).done;){var h=d.value;n.set(h,c,!1)}}catch(m){p.e(m)}finally{p.f()}}}}catch(m){u.e(m)}finally{u.f()}return e}(d,e,v));var b=function(e){var t={};if(kq(e)&&e.component.selection){var n,r=Object(Ri.a)(ZD(e.component.selection));try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=e.component.selection[a],u=Object(Ri.a)(o.project.items);try{for(u.s();!(i=u.n()).done;){var s=i.value;!s.channel&&lI(s.field)>1&&(t[s.field]="flatten")}}catch(c){u.e(c)}finally{u.f()}}}catch(c){r.e(c)}finally{r.f()}}return t}(e),x=AH(e);d=null!==(a=TH.makeWithAncestors(d,{},Object.assign(Object.assign({},b),x),v))&&void 0!==a?a:d,kq(e)&&(d=Iq.parseAll(d,e),d=Mq.parseAll(d,e)),(kq(e)||Eq(e))&&(y||(d=null!==(o=hH.makeFromEncoding(d,e))&&void 0!==o?o:d),d=null!==(u=cU.makeFromEncoding(d,e))&&void 0!==u?u:d,d=oV.parseAllForSortIndex(d,e));var w=e.getName("raw"),O=new sU(d,w,"raw",m);if(h[w]=O,d=O,kq(e)){var k=EH.makeFromEncoding(d,e);k&&(d=k,UU(e)&&(d=new IH(d))),d=null!==(s=Fq.makeFromEncoding(d,e))&&void 0!==s?s:d,d=null!==(c=RH.makeFromEncoding(d,e))&&void 0!==c?c:d}kq(e)&&(d=null!==(l=Nq.make(d,e))&&void 0!==l?l:d);var E=e.getName(JB),S=new sU(d,E,JB,m);h[E]=S,d=S,kq(e)&&function(e,t){LU(e,(function(n){var r=n.name,i=e.getName("lookup_".concat(r));e.component.data.outputNodes[i]=n.materialized=new sU(new HU(t,e,{selection:r}),i,"lookup",e.component.data.outputNodeRefCounts)}))}(e,S);var C=null;if(Eq(e)){var _=e.getName("facet");f=function(e,t){var n=t.row,r=t.column;if(n&&r){for(var i=null,a=0,o=[n,r];a<o.length;a++){var u=o[a];if(Oz(u.sort)){var s=u.sort,c=s.field,l=s.op;e=i=new NH(e,{joinaggregate:[{op:void 0===l?"mean":l,field:c,as:oG(u,u.sort,{forAs:!0})}],groupby:[Bz(u)]})}}return i}return null}(d=oV.parseAllForSortIndex(d,e),e.facet),C=new SH(d=null!==f&&void 0!==f?f:d,e,_,S.getSource()),h[_]=C,d=C}return Object.assign(Object.assign({},e.component.data),{outputNodes:h,outputNodeRefCounts:m,raw:O,main:S,facetRoot:C,ancestorParse:v})}var fG=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a,o,u,s){return uS(this,n),t.call(this,e,r,i,a,o,u,s)}return cS(n,[{key:"parseData",value:function(){this.component.data=lG(this),this.children.forEach((function(e){e.parseData()}))}},{key:"parseSelections",value:function(){var e=this;this.component.selection={};var t,n=Object(Ri.a)(this.children);try{var r=function(){var n=t.value;n.parseSelections(),ZD(n.component.selection).forEach((function(t){e.component.selection[t]=n.component.selection[t]}))};for(n.s();!(t=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}},{key:"parseMarkGroup",value:function(){var e,t=Object(Ri.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){var e,t=Object(Ri.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseAxesAndHeaders()}}catch(n){t.e(n)}finally{t.f()}}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(e){return e.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(e,t){return[].concat(Object(gh.a)(e),Object(gh.a)(t.assembleLayoutSignals()))}),kV(this))}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleMarks",value:function(){return this.children.map((function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},t?{title:t}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup())}))}}]),n}(jq),dG=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a,o){var u,s,c,l,f;return uS(this,n),u=t.call(this,e,"concat",r,i,o,a,e.resolve),"shared"!==(null===(c=null===(s=e.resolve)||void 0===s?void 0:s.axis)||void 0===c?void 0:c.x)&&"shared"!==(null===(f=null===(l=e.resolve)||void 0===l?void 0:l.axis)||void 0===f?void 0:f.y)||XF(HF.CONCAT_CANNOT_SHARE_AXIS),u.concatType=JL(e)?"vconcat":ZL(e)?"hconcat":"concat",u.children=u.getChildren(e).map((function(e,t){return MG(e,xB(u),u.getName("concat_"+t),void 0,a,o)})),u}return cS(n,[{key:"getChildren",value:function(e){return JL(e)?e.vconcat:ZL(e)?e.hconcat:e.concat}},{key:"parseLayoutSize",value:function(){!function(e){Zq(e);var t=e.component.layoutSize,n=Jq[e.concatType];n&&t.setWithExplicit(n,Qq(e,n))}(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleDefaultLayout",value:function(){return Object.assign(Object.assign({},"vconcat"===this.concatType?{columns:1}:{}),{bounds:"full",align:"each"})}}]),n}(fG);var pG=Object.assign(Object.assign({gridScale:1,scale:1},CW),{labelExpr:1,encode:1}),hG=ZD(pG),mG=function(e){gB(n,e);var t=OB(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return uS(this,n),(e=t.call(this)).explicit=r,e.implicit=i,e.mainExtracted=a,e}return cS(n,[{key:"clone",value:function(){return new n(zD(this.explicit),zD(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}}]),n}(AV);var vG={bottom:"top",top:"bottom",left:"right",right:"left"};function gG(e,t){if(!e)return t.map((function(e){return e.clone()}));if(e.length===t.length){for(var n=e.length,r=0;r<n;r++){var i=e[r],a=t[r];if(!!i!==!!a)return;if(i&&a){var o=i.getWithExplicit("orient"),u=a.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;e[r]=yG(i,a)}}return e}}function yG(e,t){var n,r=Object(Ri.a)(hG);try{var i=function(){var r=n.value,i=IV(e.getWithExplicit(r),t.getWithExplicit(r),r,"axis",(function(e,t){switch(r){case"title":return yz(e,t);case"gridScale":return{explicit:e.explicit,value:fI(e.value,t.value)}}return DV(e,t,r,"axis")}));e.setWithExplicit(r,i)};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return e}function bG(e,t){var n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),a=r?r.title:void 0,o=i?i.title:void 0;return a&&o?gz(a,o):a||(o||(void 0!==a?a:void 0!==o?o:void 0))}function xG(e,t){var n,r=t.axis(e),i=new mG;hG.forEach((function(n){var a=function(e,t,n,r){var i=r.fieldDef(n),a=function(e,t,n,r){if(void 0!==t.labelAngle)return mI(t.labelAngle);var i=nV("labelAngle",e.config,n,aV(n),e.getScaleComponent(n).get("type"));return void 0!==i?mI(i):n===zI&&HD(["nominal","ordinal"],r.type)?270:void 0}(r,t,n,i),o=fI(t.orient,aV(n)),u=r.mark,s=r.config;switch(e){case"scale":return r.scaleName(n);case"gridScale":return function(e,t){var n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(r,n);case"format":if(iL(i))return;return lz(i,t.format,s);case"formatType":if(iL(i))return;return t.formatType;case"grid":if(lL(r.fieldDef(n).bin))return!1;var c=r.getScaleComponent(n).get("type");return fI(t.grid,function(e,t){return!HP(e)&&!cL(t.bin)}(c,i));case"labelAlign":return fI(t.labelAlign,iV(a,o));case"labelAngle":return a;case"labelBaseline":return fI(t.labelBaseline,rV(a,o));case"labelFlush":return fI(t.labelFlush,function(e,t){if("x"===t&&HD(["quantitative","temporal"],e.type))return!0}(i,n));case"labelOverlap":var l=r.getScaleComponent(n).get("type");return fI(t.labelOverlap,function(e,t){if("nominal"!==e.type)return"log"!==t||"greedy"}(i,l));case"orient":return o;case"tickCount":var f=r.getScaleComponent(n).get("type"),d="x"===n?"width":"y"===n?"height":void 0,p=d?r.getSizeSignalRef(d):void 0;return fI(t.tickCount,function(e){var t=e.fieldDef,n=e.scaleType,r=e.size;if(!HP(n)&&"log"!==n&&!HD(["month","hours","day","quarter"],t.timeUnit))return cL(t.bin)?{signal:"ceil(".concat(r.signal,"/10)")}:{signal:"ceil(".concat(r.signal,"/40)")}}({fieldDef:i,scaleType:f,size:p}));case"title":var h="x"===n?"x2":"y2",m=r.fieldDef(h);return fI(t.title,bG(r,n),vz([Cz(i)],m?[Cz(m)]:[]));case"values":return function(e,t,n){var r=e.values;if(r)return oL(n,r)}(t,0,i);case"zindex":return fI(t.zindex,function(e,t){return"rect"===e&&Wz(t)?1:0}(u,i))}return v=e,_W[v]?t[e]:void 0;var v}(n,r,e,t);if(void 0!==a){var o=function(e,t,n,r,i){switch(t){case"titleAngle":case"labelAngle":return e===mI(n[t]);case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===bG(r,i))return!0}return e===n[t]}(a,n,r,t,e),u=nV(n,t.config,e,i.get("orient"),t.getScaleComponent(e).get("type"));o||void 0===u?i.set(n,a,o):HD(["grid","orient"],n)&&u&&i.set(n,u,!1)}}));var a=null!==(n=r.encoding)&&void 0!==n?n:{},o=EW.reduce((function(n,r){var o;if(!i.hasAxisPart(r))return n;var u=_V(null!==(o=a[r])&&void 0!==o?o:{},t),s="labels"===r?function(e,t,n){var r,i=null!==(r=e.fieldDef(t))&&void 0!==r?r:"x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0,a=e.axis(t),o={};if(iL(i)){var u=e.getScaleComponent(t).get("type")===IP.UTC,s=hz("datum.value",i.timeUnit,a.format,null,u);s&&(o.text={signal:s})}return o=Object.assign(Object.assign({},o),n),0===ZD(o).length?void 0:o}(t,e,u):u;return void 0!==s&&ZD(s).length>0&&(n[r]={update:s}),n}),{});return ZD(o).length>0&&i.set("encode",o,!!r.encoding||void 0!==r.labelAngle),i}function wG(e){var t,n=e.encoding,r=e.size,i=Object(Ri.a)(hM);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=mM(a),u=Zz(n[a]);eB(r[o])&&u&&Uz(u)&&(delete r[o],XF(HF.stepDropped(o)))}}catch(s){i.e(s)}finally{i.f()}return r}function OG(e,t,n,r){var i,a,o=r.graticule,u=xI(e)?Object.assign({},e):{type:e},s=null!==(i=u.orient)&&void 0!==i?i:uz("orient",u,n);return u.orient=function(e,t,n){switch(e){case"point":case"circle":case"square":case"text":case"rect":case"image":return}var r=t.x,i=t.y,a=t.x2,o=t.y2;switch(e){case"bar":if(Rz(r)&&(lL(r.bin)||Rz(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Rz(i)&&(lL(i.bin)||Rz(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a&&Rz(r)&&"quantitative"===r.type&&!cL(r.bin))return"horizontal";if(!o&&Rz(i)&&"quantitative"===i.type&&!cL(i.bin))return"vertical"}case"rule":if(a&&o)return;case"area":if(o)return Rz(i)&&lL(i.bin)?"horizontal":"vertical";if(a)return Rz(r)&&lL(r.bin)?"vertical":"horizontal";if("rule"===e){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case"line":case"tick":var u=Rz(r)&&Uz(r),s=Rz(i)&&Uz(i);if(u&&!s)return"tick"!==e?"horizontal":"vertical";if(!u&&s)return"tick"!==e?"vertical":"horizontal";if(u&&s){var c=r,l=i,f="temporal"===c.type,d="temporal"===l.type;return f&&!d?"tick"!==e?"vertical":"horizontal":!f&&d?"tick"!==e?"horizontal":"vertical":!c.aggregate&&l.aggregate?"tick"!==e?"vertical":"horizontal":c.aggregate&&!l.aggregate?"tick"!==e?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(u.type,t,s),void 0!==s&&s!==u.orient&&XF(HF.orientOverridden(u.orient,s)),void 0===fI(u.opacity,uz("opacity",u,n))&&(u.opacity=function(e,t){if(HD(["point","tick","circle","square"],e)&&!mL(t))return.7;return}(u.type,t)),void 0===u.filled&&(u.filled=!o&&function(e,t){var n=uz("filled",e,t),r=e.type;return fI(n,"point"!==r&&"line"!==r&&"rule"!==r)}(u,n)),void 0===(null!==(a=u.cursor)&&void 0!==a?a:uz("cursor",u,n))&&(u.cursor=function(e,t,n){if(t.href||e.href||uz("href",e,n))return"pointer";return e.cursor}(u,t,n)),u}function kG(e,t){e.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore"})),HW("x",e,{defaultPos:"mid"})),HW("y",e,{defaultPos:"mid"})),PW("size",e)),function(e,t,n){if(n)return{shape:{value:n}};return PW("shape",e)}(e,0,t))}function EG(e){var t=e.config,n=e.markDef,r=n.orient,i="horizontal"===r?"width":"height",a=e.getScaleComponent("horizontal"===r?"x":"y"),o=fI(n[i],n.size,uz("size",n,t,{vgChannel:i}),t.tick.bandSize);if(void 0!==o)return o;var u=a?a.get("range"):void 0;return u&&yW(u)&&SD(u.step)?3*u.step/4:3*rB(t.view,i)/4}var SG={area:{vgMark:"area",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore"})),XW("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),XW("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient})),iU(e))}},bar:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),ZW(e,"x","bar")),ZW(e,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function(e){return kG(e,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(e){return Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore"}))},postEncodingTransform:function(e){var t=e.encoding.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},t&&Rz(t)&&"geojson"===t.type?{field:Bz(t,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore"})),ZW(e,"x","image")),ZW(e,"y","image")),LW(e,"url"))}},line:{vgMark:"line",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore"})),HW("x",e,{defaultPos:"mid"})),HW("y",e,{defaultPos:"mid"})),PW("size",e,{vgChannel:"strokeWidth"})),iU(e))}},point:{vgMark:"symbol",encodeEntry:function(e){return kG(e)}},rect:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),ZW(e,"x","rect")),ZW(e,"y","rect"))}},rule:{vgMark:"rule",encodeEntry:function(e){var t=e.markDef.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),XW("x",e,{defaultPos:"horizontal"===t?"zeroOrMin":"mid",defaultPos2:"zeroOrMax",range:"vertical"!==t})),XW("y",e,{defaultPos:"vertical"===t?"zeroOrMin":"mid",defaultPos2:"zeroOrMax",range:"horizontal"!==t})),PW("size",e,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function(e){return kG(e,"square")}},text:{vgMark:"text",encodeEntry:function(e){var t=e.config;e.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore"})),HW("x",e,{defaultPos:"mid"})),HW("y",e,{defaultPos:"mid"})),LW(e)),PW("size",e,{vgChannel:"fontSize"})),aU("align",function(e,t,n){var r;if(void 0===(null!==(r=e.align)&&void 0!==r?r:uz("align",e,n)))return"center";return}(e.markDef,0,t))),aU("baseline",function(e,t,n){var r;if(void 0===(null!==(r=e.baseline)&&void 0!==r?r:uz("baseline",e,n)))return"middle";return}(e.markDef,0,t)))}},tick:{vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,r=n.orient,i="horizontal"===r?"width":"height",a="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore"})),HW("x",e,{defaultPos:"mid",vgChannel:"xc"})),HW("y",e,{defaultPos:"mid",vgChannel:"yc"})),PW("size",e,{defaultValue:EG(e),vgChannel:i})),Object(su.a)({},a,{value:fI(n.thickness,t.tick.thickness)}))}},trail:{vgMark:"trail",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nU(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore"})),HW("x",e,{defaultPos:"mid"})),HW("y",e,{defaultPos:"mid"})),PW("size",e)),iU(e))}}};function CG(e){return HD(["line","area","trail"],e.mark)?function(e){var t=wL(e.mark,e.encoding),n=jG(e,{fromPrefix:t.length>0?"faceted_path_":""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+e.requestDataName(JB),data:e.requestDataName(JB),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(e):HD(["bar"],e.mark)?function(e){var t,n=wW.some((function(t){return e.markDef[t]||uz(t,e.markDef,e.config)}));if(e.stack&&!e.fieldDef("size")&&n){var r,i,a=jG(e,{fromPrefix:"stack_group_"}),o=Object(Ca.a)(a,1)[0],u=e.scaleName(e.stack.fieldChannel),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.vgField(e.stack.fieldChannel,t)},c=function(e,t){var n=[s({prefix:"min",suffix:"start",expr:t}),s({prefix:"max",suffix:"start",expr:t}),s({prefix:"min",suffix:"end",expr:t}),s({prefix:"max",suffix:"end",expr:t})];return"".concat(e,"(").concat(n.map((function(e){return"scale('".concat(u,"',").concat(e,")")})).join(","),")")};"x"===e.stack.fieldChannel?(r=Object.assign(Object.assign({},LD(o.encode.update,["y","yc","y2","height"].concat(Object(gh.a)(wW)))),{x:{signal:c("min","datum")},x2:{signal:c("max","datum")},clip:{value:!0}}),i={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},o.encode.update=Object.assign(Object.assign({},BD(o.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(r=Object.assign(Object.assign({},LD(o.encode.update,["x","xc","x2","width"])),{y:{signal:c("min","datum")},y2:{signal:c("max","datum")},clip:{value:!0}}),i={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},o.encode.update=Object.assign(Object.assign({},BD(o.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var l,f=Object(Ri.a)(wW);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=uz(d,e.markDef,e.config);o.encode.update[d]?(r[d]=o.encode.update[d],delete o.encode.update[d]):p&&(r[d]={value:p}),p&&(o.encode.update[d]={value:0})}}catch(m){f.e(m)}finally{f.f()}var h=e.vgField(e.stack.groupbyChannel)?[e.vgField(e.stack.groupbyChannel)]:[];(null===(t=e.fieldDef(e.stack.groupbyChannel))||void 0===t?void 0:t.bin)&&h.push(e.vgField(e.stack.groupbyChannel,{binSuffix:"end"}));return(r=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(t,n){if(o.encode.update[n])return Object.assign(Object.assign({},t),Object(su.a)({},n,o.encode.update[n]));var r=uz(n,e.markDef,e.config);return void 0!==r?Object.assign(Object.assign({},t),Object(su.a)({},n,{value:r})):t}),r)).stroke&&(r.strokeForeground={value:!0},r.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(JB),name:"stack_group_"+e.requestDataName(JB),groupby:h,aggregate:{fields:[s({suffix:"start"}),s({suffix:"start"}),s({suffix:"end"}),s({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:r},marks:[{type:"group",encode:{update:i},marks:[o]}]}]}return jG(e)}(e):jG(e)}function _G(e){var t=e.encoding,n=e.stack,r=e.mark,i=e.markDef,a=e.config,o=t.order;if(!(!lD(o)&&Mz(o)&&VD(o.value)||!o&&VD(i.order)||VD(uz("order",i,a)))){if((lD(o)||Rz(o))&&!n)return mz(o,{expr:"datum"});if(gI(r)){var u="horizontal"===i.orient?"y":"x",s=t[u];if(Rz(s)){var c=s.sort;return lD(c)?{field:Bz(s,{prefix:u,suffix:"sort_index",expr:"datum"})}:Oz(c)?{field:Bz({aggregate:mL(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:wz(c)?{field:Bz(e.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:{field:Bz(s,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function jG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=e.mark,r=fI(e.markDef.clip,AG(e),TG(e)),i=az(e.markDef),a=e.encoding.key,o=_G(e),u=NG(e),s=SG[n].postEncodingTransform?SG[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:SG[n].vgMark},r?{clip:!0}:{}),i?{style:i}:{}),a?{key:a.field}:{}),o?{sort:o}:{}),u||{}),{from:{data:t.fromPrefix+e.requestDataName(JB)},encode:{update:SG[n].encodeEntry(e)}}),s?{transform:s}:{})]}function AG(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function TG(e){var t=e.component.projection;return!(!t||t.isFit)||void 0}function NG(e){if(!e.component.selection)return null;for(var t=ZD(e.component.selection).length,n=t,r=e.parent;r&&0===n;)n=ZD(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}var RG=function(e){gB(n,e);var t=OB(n);function n(e,r,i){var a,o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;uS(this,n),(a=t.call(this,e,"unit",r,i,c,s,void 0,e.view)).specifiedScales={},a.specifiedAxes={},a.specifiedLegends={},a.specifiedProjection={},a.selection={},a.children=[];var l=xI(e.mark)?e.mark.type:e.mark,f=tG(null!==(o=e.encoding)&&void 0!==o?o:{},s);a.markDef=OG(e.mark,f,c,{graticule:e.data&&YB(e.data)});var d=a.encoding=gL(f,a.markDef);return a.size=wG({encoding:d,size:Object.assign(Object.assign(Object.assign({},u),e.width?{width:e.width}:{}),e.height?{height:e.height}:{})}),a.stack=AB(l,d),a.specifiedScales=a.initScales(l,d),a.specifiedAxes=a.initAxes(d),a.specifiedLegends=a.initLegend(d),a.specifiedProjection=e.projection,a.selection=e.selection,a}return cS(n,[{key:"scaleDomain",value:function(e){var t=this.specifiedScales[e];return t?t.domain:void 0}},{key:"axis",value:function(e){return this.specifiedAxes[e]}},{key:"legend",value:function(e){return this.specifiedLegends[e]}},{key:"initScales",value:function(e,t){return xM.reduce((function(e,n){var r,i,a=t[n];return Rz(a)?(r=a,i=a.scale):Nz(a)&&(r=a.condition,i=a.condition.scale),r&&(e[n]=null!==i&&void 0!==i?i:{}),e}),{})}},{key:"initAxes",value:function(e){return[zI,LI].reduce((function(t,n){var r=e[n];if(Rz(r)||n===zI&&Rz(e.x2)||n===LI&&Rz(e.y2)){var i=Rz(r)?r.axis:null;null!==i&&(t[n]=Object.assign({},i))}return t}),{})}},{key:"initLegend",value:function(e){return yM.reduce((function(t,n){var r=e[n];if(r){var i=Rz(r)?r.legend:Nz(r)?r.condition.legend:null;null!==i&&!1!==i&&function(e){switch(e){case BI:case WI:case UI:case HI:case VI:case qI:case KI:return!0;case GI:case $I:return!1}}(n)&&(t[n]=Object.assign({},i))}return t}),{})}},{key:"parseData",value:function(){this.component.data=lG(this)}},{key:"parseLayoutSize",value:function(){!function(e){var t,n=e.size,r=e.component,i=Object(Ri.a)(hM);try{for(i.s();!(t=i.n()).done;){var a=mM(t.value);if(n[a]){var o=n[a];r.layoutSize.set(a,eB(o)?"step":o,!0)}else{var u=eG(e,a);r.layoutSize.set(a,u,!1)}}}catch(s){i.e(s)}finally{i.f()}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(e,t){var n,r={},i=e.config.selection,a=function(a){if(!kD(t,a))return"continue";var o=zD(t[a]),u=i[o.type],s=(u.fields,u.encodings,_I(u,["fields","encodings"]));for(var c in s)"encodings"===c&&o.fields||"fields"===c&&o.encodings||("mark"===c&&(o[c]=Object.assign(Object.assign({},s[c]),o[c])),void 0!==o[c]&&!0!==o[c]||(o[c]=null!==(n=s[c])&&void 0!==n?n:o[c]));var l=tI(a),f=r[l]=Object.assign(Object.assign({},o),{name:l,events:dD(o.on)?CT(o.on,"scope"):zD(o.on)});EU(f,(function(n){n.has(f)&&n.parse&&n.parse(e,f,o,t[a])}))};for(var o in t)a(o);return r}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=CG(this)}},{key:"parseAxesAndHeaders",value:function(){var e;this.component.axes=(e=this,hM.reduce((function(t,n){return e.component.scales[n]&&e.axis(n)&&(t[n]=[xG(n,e)]),t}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(e){return function(e,t){var n=!1;return LU(e,(function(r,i){var a=r.name,o=pD(a+IU);if(0===t.filter((function(e){return e.name===a})).length){var u="global"===r.resolve?"union":r.resolve,s="multi"===r.type?", true)":")";t.push({name:r.name,update:"".concat(PU,"(").concat(o,", ").concat(pD(u)).concat(s)})}n=!0,i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),EU(r,(function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}))})),n&&0===t.filter((function(e){return"unit"===e.name})).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),_U(t)}(this,e)}},{key:"assembleSignals",value:function(){return[].concat(Object(gh.a)(JU(this)),Object(gh.a)((t=[],LU(e=this,(function(n,r){var i,a=n.name,o=r.modifyExpr(e,n);(i=t).push.apply(i,Object(gh.a)(r.signals(e,n))),EU(n,(function(r){r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(o=r.modifyExpr(e,n,o))})),t.push({name:a+FU,on:[{events:{signal:n.name+MU},update:"modify(".concat(pD(n.name+IU),", ").concat(o,")")}]})})),_U(t))));var e,t}},{key:"assembleSelectionData",value:function(e){return function(e,t){var n=Object(gh.a)(t);return LU(e,(function(t){var r={name:t.name+IU};if(t.init){var i=t.project.items.map((function(e){e.signals;return _I(e,["signals"])})),a=t.init.map((function(e){return SU(e,!1)}));r.values="interval"===t.type?[{unit:WU(e,{escape:!1}),fields:i,values:a}]:a.map((function(t){return{unit:WU(e,{escape:!1}),fields:i,values:t}}))}n.filter((function(e){return e.name===t.name+IU})).length||n.push(r)})),n}(this,e)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return kV(this)}},{key:"assembleMarks",value:function(){var e,t=null!==(e=this.component.mark)&&void 0!==e?e:[];return this.parent&&_q(this.parent)||(t=CU(this,t)),t.map(this.correctDataNames)}},{key:"getMapping",value:function(){return this.encoding}},{key:"channelHasField",value:function(e){return hL(this.encoding,e)}},{key:"fieldDef",value:function(e){return Qz(this.encoding[e])}},{key:"hasProjection",get:function(){var e=this.encoding,t="geoshape"===this.mark,n=e&&JI.some((function(t){return Rz(e[t])}));return t||n}},{key:"mark",get:function(){return this.markDef.type}}]),n}(Aq),DG=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a,o,u){var s;uS(this,n),s=t.call(this,e,"layer",r,i,u,o,e.resolve,e.view);var c=Object.assign(Object.assign(Object.assign({},a),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});return s.children=e.layer.map((function(e,t){if(pB(e))return new n(e,xB(s),s.getName("layer_"+t),c,o,u);if(SI(e))return new RG(e,xB(s),s.getName("layer_"+t),c,o,u);throw new Error(HF.invalidSpec(e))})),s}return cS(n,[{key:"parseData",value:function(){this.component.data=lG(this);var e,t=Object(Ri.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseData()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseLayoutSize",value:function(){Xq(this)}},{key:"parseSelections",value:function(){var e=this;this.component.selection={};var t,n=Object(Ri.a)(this.children);try{var r=function(){var n=t.value;n.parseSelections(),ZD(n.component.selection).forEach((function(t){e.component.selection[t]=n.component.selection[t]}))};for(n.s();!(t=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}},{key:"parseMarkGroup",value:function(){var e,t=Object(Ri.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){!function(e){var t,n,r=e.component,i=r.axes,a=r.resolve,o={top:0,bottom:0,right:0,left:0},u=Object(Ri.a)(e.children);try{for(u.s();!(n=u.n()).done;){var s=n.value;s.parseAxesAndHeaders();var c,l=Object(Ri.a)(ZD(s.component.axes));try{for(l.s();!(c=l.n()).done;){var f=c.value;a.axis[f]=jV(e.component.resolve,f),"shared"===a.axis[f]&&(i[f]=gG(i[f],s.component.axes[f]),i[f]||(a.axis[f]="independent",delete i[f]))}}catch(j){l.e(j)}finally{l.f()}}}catch(j){u.e(j)}finally{u.f()}for(var d=0,p=[zI,LI];d<p.length;d++){var h,m=p[d],v=Object(Ri.a)(e.children);try{for(v.s();!(h=v.n()).done;){var g=h.value;if(g.component.axes[m]){if("independent"===a.axis[m]){i[m]=(t=i[m],null!==t&&void 0!==t?t:[]).concat(g.component.axes[m]);var y,b=Object(Ri.a)(g.component.axes[m]);try{for(b.s();!(y=b.n()).done;){var x=y.value,w=x.getWithExplicit("orient"),O=w.value,k=w.explicit;if(o[O]>0&&!k){var E=vG[O];o[O]>o[E]&&x.set("orient",E,!1)}o[O]++}}catch(j){b.e(j)}finally{b.f()}}delete g.component.axes[m]}}}catch(j){v.e(j)}finally{v.f()}if("independent"===a.axis[m]&&i[m]&&i[m].length>1){var S,C=Object(Ri.a)(i[m]);try{for(C.s();!(S=C.n()).done;){var _=S.value;_.get("grid")&&!_.explicit.grid&&(_.implicit.grid=!1)}}catch(j){C.e(j)}finally{C.f()}}}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleSignals())}),JU(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLayoutSignals())}),kV(this))}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleTitle",value:function(){var e=mB(hB(n.prototype),"assembleTitle",this).call(this);if(e)return e;var t,r=Object(Ri.a)(this.children);try{for(r.s();!(t=r.n()).done;){if(e=t.value.assembleTitle())return e}}catch(i){r.e(i)}finally{r.f()}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(e,t){var n,r=Object(Ri.a)(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;kq(i)&&(t=CU(i,t))}}catch(a){r.e(a)}finally{r.f()}return t}(this,this.children.flatMap((function(e){return e.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLegends())}),tH(this))}}]),n}(jq),IG=function(e){gB(n,e);var t=OB(n);function n(e,r,i,a,o){var u;return uS(this,n),u=t.call(this,e,"repeat",r,i,o,a,e.resolve),e.resolve&&e.resolve.axis&&("shared"===e.resolve.axis.x||"shared"===e.resolve.axis.y)&&XF(HF.REPEAT_CANNOT_SHARE_AXIS),u.repeat=e.repeat,u.children=u._initChildren(e,u.repeat,a,o),u}return cS(n,[{key:"_initChildren",value:function(e,t,n,r){var i,a=[],o=!lD(t)&&t.row||[n?n.row:null],u=!lD(t)&&t.column||[n?n.column:null],s=lD(t)&&t||[n?n.repeat:null],c=Object(Ri.a)(s);try{for(c.s();!(i=c.n()).done;){var l,f=i.value,d=Object(Ri.a)(o);try{for(d.s();!(l=d.n()).done;){var p,h=l.value,m=Object(Ri.a)(u);try{for(m.s();!(p=m.n()).done;){var v=p.value,g=(f?"__repeat_repeat_".concat(f):"")+(h?"__repeat_row_".concat(h):"")+(v?"__repeat_column_".concat(v):""),y={repeat:f,row:h,column:v};a.push(MG(e.spec,this,this.getName("child"+g),void 0,y,r))}}catch(b){m.e(b)}finally{m.f()}}}catch(b){d.e(b)}finally{d.f()}}}catch(b){c.e(b)}finally{c.f()}return a}},{key:"parseLayoutSize",value:function(){Yq(this)}},{key:"assembleDefaultLayout",value:function(){var e=this.repeat,t=lD(e)?void 0:e.column?e.column.length:1;return Object.assign(Object.assign({},t?{columns:t}:{}),{bounds:"full",align:"all"})}}]),n}(fG);function MG(e,t,n,r,i,a){if(Sz(e))return new uG(e,t,n,i,a);if(pB(e))return new DG(e,t,n,r,i,a);if(SI(e))return new RG(e,t,n,r,i,a);if(QL(e))return new IG(e,t,n,i,a);if(function(e){return JL(e)||ZL(e)||YL(e)}(e))return new dG(e,t,n,i,a);throw new Error(HF.invalidSpec(e))}function FG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.logger&&$F(t.logger),t.fieldTitle&&Gz(t.fieldTitle);try{var n=uB(gD({},t.config,e.config)),r=LB(e,n),i=MG(r,null,"",void 0,void 0,n);i.parse(),ZH(i.component.data,i);var a=zG(i,PG(e,r.autosize,n,i),e.datasets,e.usermeta);return{spec:a,normalized:r}}finally{t.logger&&KF(),t.fieldTitle&&$z()}}function PG(e,t,n,r){var i,a=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===t?t={type:"pad"}:dD(t)&&(t={type:t}),a&&o&&("fit"===(i=t.type)||"fit-x"===i||"fit-y"===i))if("step"===a&&"step"===o)XF(HF.droppingFit()),t.type="pad";else if("step"===a||"step"===o){var u="step"===a?"width":"height";XF(HF.droppingFit(vM(u)));var s="width"===u?"height":"width";t.type=function(e){return e?"fit-".concat(vM(e)):"fit"}(s)}return Object.assign(Object.assign(Object.assign({},1===ZD(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),VB(n)),VB(e))}function zG(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=e.config?fB(e.config):void 0,a=[].concat(e.assembleSelectionData([]),qq(e.component.data,n)),o=e.assembleProjections(),u=e.assembleTitle(),s=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0),l=e.assembleLayoutSignals();return l=l.filter((function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)})),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),u?{title:u}:{}),s?{style:s}:{}),c?{encode:{update:c}}:{}),{data:a}),o.length>0?{projections:o}:{}),e.assembleGroup([].concat(Object(gh.a)(l),Object(gh.a)(e.assembleSelectionTopLevelSignals([]))))),i?{config:i}:{}),r?{usermeta:r}:{})}var LG=new(function(e){gB(n,e);var t=OB(n);function n(){return uS(this,n),t.apply(this,arguments)}return cS(n,[{key:"mapUnit",value:function(e,t){var n=t.config;if(e.encoding){var r=e.encoding,i=e.transform,a=vL(r,n),o=a.bins,u=a.timeUnits,s=a.aggregate,c=a.groupby,l=a.encoding,f=[].concat(Object(gh.a)(i||[]),Object(gh.a)(o),Object(gh.a)(u),Object(gh.a)(0===s.length?[]:[{aggregate:s,groupby:c}]));return Object.assign(Object.assign(Object.assign({},e),f.length>0?{transform:f}:{}),{encoding:l})}return e}}]),n}(kB));function BG(e,t){return LG.map(e,{config:t})}var WG=oD.version,UG=n(225),VG=n.n(UG),HG=n(320),qG={background:"#333",title:{color:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},GG={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},$G={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},KG={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},XG="Benton Gothic Bold, sans-serif",YG={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},JG={background:"#ffffff",title:{anchor:"start",color:"#000000",font:XG,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:XG,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:XG,titleFontSize:13,titleFontWeight:"normal"},range:{category:YG["category-6"],diverging:YG["fireandice-6"],heatmap:YG["fire-7"],ordinal:YG["fire-7"],ramp:YG["fire-7"]}},ZG={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},QG={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},e$={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},t$={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",orient:"right",offset:10},view:{stroke:"transparent"},range:{category:e$["six-groups-cat-1"],diverging:e$["diverging-colors"],heatmap:e$["diverging-colors"],ordinal:e$["six-groups-seq"],ramp:e$["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},n$={arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},r$=HG.version,i$=n(321),a$="vg-tooltip-element",o$={offsetX:10,offsetY:10,id:a$,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var u$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function s$(e,t){return JSON.stringify(e,function(e){var t=[];return function(n,r){if("object"!==typeof r||null===r)return r;var i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}var c$=function(){function e(t){uS(this,e),this.options=Object.assign(Object.assign({},o$),t);var n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(a$,e)}(n);var i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return cS(e,[{key:"tooltipHandler",value:function(e,t,n,r){if(null!=r&&""!==r){this.el.innerHTML=function(e,t,n){if(Object(Me.A)(e))return"[".concat(e.map((function(e){return t(Object(Me.H)(e)?e:s$(e,n))})).join(", "),"]");if(Object(Me.F)(e)){var r="",i=e,a=i.title,o=u$(i,["title"]);a&&(r+="<h2>".concat(t(a),"</h2>"));var u=Object.keys(o);if(u.length>0){r+="<table>";var s,c=Object(Ri.a)(u);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=o[l];void 0!==f&&(Object(Me.F)(f)&&(f=s$(f,n)),r+='<tr><td class="key">'.concat(t(l),':</td><td class="value">').concat(t(f),"</td></tr>"))}}catch(d){c.e(d)}finally{c.f()}r+="</table>"}return r||"{}"}return t(e)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var i=function(e,t,n,r){var i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);var a=e.clientY+r;return a+t.height>window.innerHeight&&(a=+e.clientY-r-t.height),{x:i,y:a}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),a=i.x,o=i.y;this.el.setAttribute("style","top: ".concat(o,"px; left: ").concat(a,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),e}(),l$=(i$.version,function(e,t,n){var r=e.open(t),i=40;e.addEventListener("message",(function t(n){n.source===r&&(i=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){i<=0||(r.postMessage(n,"*"),setTimeout(e,250),i-=1)}),250)}),f$='.vega-embed {\n  position: relative;\n  display: inline-block;\n  padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5); }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n',d$=h,p$=g,h$=window;void 0===p$&&h$.vl&&h$.vl.compile&&(p$=h$.vl);var m$={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},v$={vega:"Vega","vega-lite":"Vega-Lite"},g$={vega:d$.version,"vega-lite":p$?p$.version:"not available"},y$={vega:function(e){return e},"vega-lite":function(e,t){return p$.compile(e,{config:t}).spec}},b$='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function x$(e){return"function"===typeof e}function w$(e,t,n,r){var i="<html><head>".concat(t,'</head><body><pre><code class="json">'),a="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(i+e+a),o.document.title="".concat(v$[r]," JSON Source")}function O$(e,t){if(e.$schema){var n=VG()(e.$schema);t&&t!==n.library&&console.warn("The given visualization spec is written in ".concat(v$[n.library],", but mode argument sets ").concat(v$[t]||t,"."));var r=n.library;return Object(Ie.satisfies)(g$[r],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(v$[r]," ").concat(n.version,", but the current version of ").concat(v$[r]," is v").concat(g$[r],".")),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t||"vega"}function k$(e){return!(!e||!("load"in e))}function E$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w(this,void 0,void 0,x.a.mark((function r(){var i,a,o,u,s,c,l,f,d,p,h,m,v,g,b,w,O,k,E,S,C,_,j,A,T,N,R,D,I,M,F,P;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=k$(n.loader)?n.loader:d$.loader(n.loader),!d$.isString(t)){r.next=6;break}return r.next=4,i.load(t);case 4:return a=r.sent,r.abrupt("return",E$(e,JSON.parse(a),n));case 6:if(n=Ne()(n,t.usermeta&&t.usermeta.embedOptions||{}),o=n.config||{},!d$.isString(o)){r.next=13;break}return r.next=11,i.load(o);case 11:return u=r.sent,r.abrupt("return",E$(e,t,Object.assign(Object.assign({},n),{config:JSON.parse(u)})));case 13:if(s=Object(Me.B)(n.actions)?n.actions:Ne()({export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},n.actions||{}),c=Object.assign(Object.assign({},m$),n.i18n),l=n.renderer||"canvas",f=n.logLevel||d$.Warn,d=n.downloadFileName||"visualization",!1!==n.defaultStyle&&(p="vega-embed-style",document.getElementById(p)||((h=document.createElement("style")).id=p,h.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?f$.toString():n.defaultStyle,document.head.appendChild(h))),n.theme&&(o=Ne()(y[n.theme],o)),m=O$(t,n.mode),v=y$[m](t,o),"vega-lite"===m&&v.$schema&&(g=VG()(v.$schema),Object(Ie.satisfies)(g$.vega,"^".concat(g.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(g.version,", but current version is v").concat(g$.vega,"."))),b=Ae(e).classed("vega-embed",!0).html(""),!(w=n.patch)){r.next=38;break}if(!(w instanceof Function)){r.next=30;break}v=w(v),r.next=38;break;case 30:if(!d$.isString(w)){r.next=37;break}return r.next=33,i.load(w);case 33:O=r.sent,v=Ne()(v,JSON.parse(O)),r.next=38;break;case 37:v=Ne()(v,w);case 38:return k=d$.parse(v,"vega-lite"===m?{}:o),E=new d$.View(k,{loader:i,logLevel:f,renderer:l}),!1!==n.tooltip&&(S=x$(n.tooltip)?n.tooltip:new c$(!0===n.tooltip?{}:n.tooltip).call,E.tooltip(S)),void 0===(C=n.hover)&&(C="vega"===m),C&&(j=(_="boolean"===typeof C?{}:C).hoverSet,A=_.updateSet,E.hover(j,A)),n&&(n.width&&E.width(n.width),n.height&&E.height(n.height),n.padding&&E.padding(n.padding)),r.next=47,E.initialize(e).runAsync();case 47:if(!1!==s){if(T=b,!1!==n.defaultStyle&&(N=b.append("details").attr("title",c.CLICK_TO_VIEW_ACTIONS),T=N,N.insert("summary").html(b$),R=N.node(),document.addEventListener("click",(function(e){R.contains(e.target)||R.removeAttribute("open")}))),D=T.insert("div").attr("class","vega-actions"),!0===s||!1!==s.export)for(I=function(){var e=F[M];if(!0===s||!0===s.export||s.export[e]){var t=c["".concat(e.toUpperCase(),"_ACTION")];D.append("a").text(t).attr("href","#").attr("target","_blank").attr("download","".concat(d,".").concat(e)).on("mousedown",(function(){var t=this;E.toImageURL(e,n.scaleFactor).then((function(e){t.href=e})).catch((function(e){throw e})),ge.preventDefault()}))}},M=0,F=["svg","png"];M<F.length;M++)I();!0!==s&&!1===s.source||D.append("a").text(c.SOURCE_ACTION).attr("href","#").on("mousedown",(function(){w$(De()(t),n.sourceHeader||"",n.sourceFooter||"",m),ge.preventDefault()})),"vega-lite"!==m||!0!==s&&!1===s.compiled||D.append("a").text(c.COMPILED_ACTION).attr("href","#").on("mousedown",(function(){w$(De()(v),n.sourceHeader||"",n.sourceFooter||"","vega"),ge.preventDefault()})),!0!==s&&!1===s.editor||(P=n.editorUrl||"https://vega.github.io/editor/",D.append("a").text(c.EDITOR_ACTION).attr("href","#").on("mousedown",(function(){l$(window,P,{config:o,mode:m,renderer:l,spec:De()(t)}),ge.preventDefault()})))}return r.abrupt("return",{view:E,spec:t,vgSpec:v});case 49:case"end":return r.stop()}}),r)})))}},function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"array",(function(){return Z})),n.d(t,"Dataset",(function(){return Y})),n.d(t,"zip",(function(){return Q})),n.d(t,"CSVDataset",(function(){return se})),n.d(t,"TextLineDataset",(function(){return ne})),n.d(t,"csv",(function(){return Ee})),n.d(t,"func",(function(){return Se})),n.d(t,"generator",(function(){return Ce})),n.d(t,"microphone",(function(){return je})),n.d(t,"webcam",(function(){return _e})),n.d(t,"FileDataSource",(function(){return Oe})),n.d(t,"URLDataSource",(function(){return ke})),n.d(t,"version_data",(function(){return Ae}));var i=n(2),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function u(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;function c(e,t){return e(t={exports:{}},t.exports),t.exports}var l=c((function(e){!function(e,t,n){function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new function(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}(e),i=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=i:this.alea=i}(0,e)})),f=c((function(e){!function(e,t,n){function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new function(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=i:this.xor128=i}(0,e)})),d=c((function(e){!function(e,t,n){function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)})),p=c((function(e){!function(e,t,n){function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.x&&r(i,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)})),h=c((function(e){!function(e,t,n){function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new function(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),i=0,a=-32;a<s;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=u[127&a]^=r+o)?i+1:0);for(i>=128&&(u[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=u[i+34&127],n=u[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[i]=r^n;e.w=o,e.X=u,e.i=i}(t,e)}(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.X&&r(i,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)})),m=c((function(e){!function(e,t,n){function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new function(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=i:this.tychei=i}(0,e)})),v=c((function(e){!function(t,r){var i,a=this,o=256,u="random",s=r.pow(o,6),c=r.pow(2,52),l=2*c,f=255;function d(e,n,d){var v=[],g=h(function e(t,n){var r,i=[],a=typeof t;if(n&&"object"==a)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(o):(e=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,m(t)]}}():e,3),v),y=new function(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,u=r.S=[];for(n||(e=[n++]);i<o;)u[i]=i++;for(i=0;i<o;i++)u[i]=u[a=f&a+e[i%n]+(t=u[i])],u[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,u=r.S;e--;)t=u[i=f&i+1],n=n*o+u[f&(u[i]=u[a=f&a+t])+(u[a]=t)];return r.i=i,r.j=a,n})(o)}(v),b=function(){for(var e=y.g(6),t=s,n=0;e<c;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,h(m(y.S),t),(n.pass||d||function(e,t,n,i){return i&&(i.S&&p(i,y),e.state=function(){return p(y,{})}),n?(r[u]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){for(var n,r=e+"",i=0;i<r.length;)t[f&i]=f&(n^=19*t[f&i])+r.charCodeAt(i++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(r.seedrandom=d,h(r.random(),t),e.exports){e.exports=d;try{i=n(365)}catch(e){}}}([],Math)}));v.alea=l,v.xor128=f,v.xorwow=d,v.xorshift7=p,v.xor4096=h,v.tychei=m;var g=v.alea;function y(e,t,n,r){if(void 0===n&&(n=new Map),void 0===r&&(r=new Set),null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(O(e)){var a=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var u=y(e[o],t,n,r);a[o]=u}return r.delete(e),a}throw new Error("Can't recurse into non-iterable type: "+e)}return n.set(e,i.value),i.value}function b(e,t){return void 0===t&&(t=x),function e(t,n,r){void 0===r&&(r=new Set);var i=t[0];if(r.has(i))throw new Error("Circular references are not supported.");var a=n(t);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(O(i)){var o=Array.isArray(i)?[]:{};r.add(i);var u=function(i){var a=e(t.map((function(e){return e[i]})),n,r);o[i]=a};for(var s in i)u(s);return r.delete(i),o}throw new Error("Can't recurse into non-iterable type: "+i)}return a.value}(e,t)}function x(e){return null===e?null:O(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function w(e,t){return u(this,void 0,void 0,(function(){var n,r,i,a,o,u;return s(this,(function(s){switch(s.label){case 0:n=new Map,y(e,t,n),r=0,i=Array.from(n.keys()),s.label=1;case 1:return r<i.length?(a=i[r],(o=n.get(a))instanceof Promise?[4,o]:[3,3]):[3,4];case 2:u=s.sent(),n.set(a,u),s.label=3;case 3:return r++,[3,1];case 4:return[2,y(e,t,n)]}}))}))}function O(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof i.B))}function k(e){return function(e,t){return y(e,t)}(e,E)}function E(e){return e instanceof i.B?{value:e.clone(),recurse:!1}:O(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var S=function(){function e(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}return e.prototype.wrap=function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity},e.prototype.get=function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]},e.prototype.set=function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t},e.prototype.length=function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e},e.prototype.isFull=function(){return this.length()===this.capacity},e.prototype.isEmpty=function(){return 0===this.length()},e.prototype.push=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)},e.prototype.pushAll=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.push(r)}},e.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e},e.prototype.unshift=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)},e.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e},e.prototype.shuffleExcise=function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n},e}(),C=function(e){function t(){return e.call(this,t.INITIAL_CAPACITY)||this}return o(t,e),t.prototype.isFull=function(){return!1},t.prototype.push=function(t){e.prototype.isFull.call(this)&&this.expand(),e.prototype.push.call(this,t)},t.prototype.unshift=function(t){e.prototype.isFull.call(this)&&this.expand(),e.prototype.unshift.call(this,t)},t.prototype.expand=function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n},t.INITIAL_CAPACITY=32,t}(S);function _(e){return new I(e)}function j(e){return new M(e)}function A(e,t){return new G(e,t)}function T(e,t){return void 0===t&&(t=N.FAIL),new $(e,t)}var N,R,D=function(){function e(){}return e.prototype.toArray=function(){return u(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return e=[],[4,this.next()];case 1:t=n.sent(),n.label=2;case 2:return t.done?[3,4]:(e.push(t.value),[4,this.next()]);case 3:return t=n.sent(),[3,2];case 4:return[2,e]}}))}))},e.prototype.toArrayForTest=function(){return u(this,void 0,void 0,(function(){var e,t,n;return s(this,(function(r){switch(r.label){case 0:return e=this.prefetch(100),t=[],[4,e.next()];case 1:n=r.sent(),r.label=2;case 2:return n.done?[3,4]:(t.push(n.value),[4,e.next()]);case 3:return n=r.sent(),[3,2];case 4:return[2,t]}}))}))},e.prototype.resolveFully=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this.next()];case 1:e=t.sent(),t.label=2;case 2:return e.done?[3,4]:[4,this.next()];case 3:return e=t.sent(),[3,2];case 4:return[2]}}))}))},e.prototype.resolveWhile=function(e){return u(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.next()];case 1:t=r.sent(),n=e(t.value),r.label=2;case 2:return t.done||!n?[3,4]:[4,this.next()];case 3:return t=r.sent(),n=e(t.value),[3,2];case 4:return[2]}}))}))},e.prototype.handleErrors=function(e){return new U(this,e)},e.prototype.filter=function(e){return new B(this,e)},e.prototype.map=function(e){return new W(this,e)},e.prototype.mapAsync=function(e){return new V(this,e)},e.prototype.serialMapAsync=function(e){return new V(this,e).serial()},e.prototype.flatmap=function(e){return new q(this,e)},e.prototype.forEachAsync=function(e){return u(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.map(e).resolveFully()]}))}))},e.prototype.serialForEach=function(e){return u(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.serialMapAsync(e).resolveWhile((function(e){return!0===e}))]}))}))},e.prototype.rowMajorBatch=function(e,t){return void 0===t&&(t=!0),new L(this,e,t)},e.prototype.columnMajorBatch=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=x),this.rowMajorBatch(e,t).map((function(e){return b(e,n)}))},e.prototype.concatenate=function(e,t){return new G(_([this,e]),t)},e.prototype.take=function(e){return e<0||null==e?this:new z(this,e)},e.prototype.skip=function(e){return e<0||null==e?this:new P(this,e)},e.prototype.prefetch=function(e){return new K(this,e)},e.prototype.shuffle=function(e,t){return new X(this,e,t)},e.prototype.serial=function(){return new F(this)},e}(),I=function(e){function t(t){var n=e.call(this)||this;return n.items=t,n.trav=0,n}return o(t,e),t.prototype.summary=function(){return"Array of "+this.items.length+" items"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(e=this.items[this.trav],this.trav++,[2,{value:k(e),done:!1}])}))}))},t}(D),M=function(e){function t(t){var n=e.call(this)||this;return n.nextFn=t,n}return o(t,e),t.prototype.summary=function(){return"Function call"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){try{return[2,this.nextFn()]}catch(e){throw e.message="Error thrown while iterating through a dataset: "+e.message,e}return[2]}))}))},t}(D),F=function(e){function t(t){var n=e.call(this)||this;return n.upstream=t,n.lastRead=Promise.resolve({value:null,done:!1}),n}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),[2,this.lastRead]}))}))},t.prototype.serialNext=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.upstream.next()]}))}))},t}(D),P=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.maxCount=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),[2,this.lastRead]}))}))},t.prototype.serialNext=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(e=t.sent()).done?[2,e]:(Object(i.Lb)(e.value),[3,0]);case 2:return[2,this.upstream.next()]}}))}))},t}(D),z=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.maxCount=n,r.count=0,r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Take"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]}))}))},t}(D),L=function(e){function t(t,n,r){void 0===r&&(r=!0);var i=e.call(this)||this;return i.upstream=t,i.batchSize=n,i.enableSmallLastBatch=r,i.lastRead=Promise.resolve({value:null,done:!1}),i}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),[2,this.lastRead]}))}))},t.prototype.serialNext=function(){return u(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:e=[],n.label=1;case 1:return e.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(t=n.sent()).done?this.enableSmallLastBatch&&e.length>0?[2,{value:e,done:!1}]:[2,{value:null,done:!0}]:(e.push(t.value),[3,1]);case 3:return[2,{value:e,done:!1}]}}))}))},t}(D),B=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.predicate=n,r.lastRead=Promise.resolve({value:null,done:!1}),r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),[2,this.lastRead]}))}))},t.prototype.serialNext=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this.upstream.next()];case 1:return(e=t.sent()).done||this.predicate(e.value)?[2,e]:(Object(i.Lb)(e.value),[3,0]);case 2:return[2]}}))}))},t}(D),W=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.transform=n,r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Map"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,a,o,u;return s(this,(function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((e=s.sent()).done)return[2,{value:null,done:!0}];for(t=i.nf.getTensorsInContainer(e.value),n=this.transform(e.value),r=i.nf.getTensorsInContainer(n),a=0,o=t;a<o.length;a++)u=o[a],i.nf.isTensorInList(u,r)||u.dispose();return[2,{value:n,done:!1}]}}))}))},t}(D),U=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.handler=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),[2,this.lastRead]}))}))},t.prototype.serialNext=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,t.sent()];case 3:return e=t.sent(),this.handler(e)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}}))}))},t}(D),V=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.transform=n,r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,a,o,u;return s(this,(function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:return(e=s.sent()).done?[2,{value:null,done:!0}]:(t=i.nf.getTensorsInContainer(e.value),[4,this.transform(e.value)]);case 2:for(n=s.sent(),r=i.nf.getTensorsInContainer(n),a=0,o=t;a<o.length;a++)u=o[a],i.nf.isTensorInList(u,r)||u.dispose();return[2,{value:n,done:!1}]}}))}))},t}(D),H=function(e){function t(){var t=e.call(this)||this;return t.outputQueue=new C,t.lastRead=Promise.resolve({value:null,done:!1}),t}return o(t,e),t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),[2,this.lastRead]}))}))},t.prototype.serialNext=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return 0!==this.outputQueue.length()?[3,2]:[4,this.pump()];case 1:return e.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}}))}))},t}(D),q=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.transform=n,r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},t.prototype.pump=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,a,o,u;return s(this,(function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((e=s.sent()).done)return[2,!1];for(t=i.nf.getTensorsInContainer(e.value),n=this.transform(e.value),r=i.nf.getTensorsInContainer(n),this.outputQueue.pushAll(n),a=0,o=t;a<o.length;a++)u=o[a],i.nf.isTensorInList(u,r)||u.dispose();return[2,!0]}}))}))},t}(H),G=function(e){function t(t,n){var r=e.call(this)||this;return r.baseErrorHandler=n,r.lastRead=null,r.iterator=null,r.moreIterators=t,r}return o(t,e),t.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},t.prototype.next=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]}))}))},t.prototype.readFromChain=function(e){return u(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return r.sent(),null!=this.iterator?[3,3]:[4,this.moreIterators.next()];case 2:if((t=r.sent()).done)return[2,{value:null,done:!0}];this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),r.label=3;case 3:return[4,this.iterator.next()];case 4:return(n=r.sent()).done?(this.iterator=null,[2,this.readFromChain(e)]):[2,n]}}))}))},t}(D);(R=N||(N={}))[R.FAIL=0]="FAIL",R[R.SHORTEST=1]="SHORTEST",R[R.LONGEST=2]="LONGEST";var $=function(e){function t(t,n){void 0===n&&(n=N.FAIL);var r=e.call(this)||this;return r.iterators=t,r.mismatchMode=n,r.count=0,r.currentPromise=null,r}return o(t,e),t.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},t.prototype.nextState=function(e){return u(this,void 0,void 0,(function(){function t(e){return e instanceof D?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}}var n,r,i;return s(this,(function(a){switch(a.label){case 0:return[4,e];case 1:return a.sent(),n=0,r=0,[4,w(this.iterators,t)];case 2:if(i=a.sent(),n===r)return[2,{value:null,done:!0}];if(r>0)switch(this.mismatchMode){case N.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case N.SHORTEST:return[2,{value:null,done:!0}];case N.LONGEST:}return this.count++,[2,{value:i,done:!1}]}}))}))},t.prototype.next=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]}))}))},t}(D),K=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.bufferSize=n,r.buffer=new S(n),r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},t.prototype.refill=function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}},t.prototype.next=function(){return this.refill(),this.buffer.shift()},t}(D),X=function(e){function t(t,n,r){var a=e.call(this,t,n)||this;return a.upstream=t,a.windowSize=n,a.upstreamExhausted=!1,a.random=g(r||i.Af.now().toString()),a.lastRead=Promise.resolve({value:null,done:!1}),a}return o(t,e),t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return this.lastRead=this.lastRead.then((function(){return e.serialNext()})),[2,this.lastRead]}))}))},t.prototype.randomInt=function(e){return Math.floor(this.random()*e)},t.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},t.prototype.serialNext=function(){return u(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:this.upstreamExhausted||this.refill(),n.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(e=this.chooseIndex(),[4,this.buffer.shuffleExcise(e)]);case 2:return(t=n.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,t]);case 3:return[2,{value:null,done:!0}]}}))}))},t}(K),Y=function(){function e(){this.size=null}return e.prototype.batch=function(e,t){var n=this;void 0===t&&(t=!0);var r=this;return i.Af.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      "+e})),J((function(){return u(n,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,r.iterator()];case 1:return[2,n.sent().columnMajorBatch(e,t,ee)]}}))}))}),this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e))},e.prototype.concatenate=function(e){var t=this,n=this;return J((function(){return u(t,void 0,void 0,(function(){var t,r;return s(this,(function(i){switch(i.label){case 0:return[4,n.iterator()];case 1:return r=(t=i.sent()).concatenate,[4,e.iterator()];case 2:return[2,r.apply(t,[i.sent()])]}}))}))}),this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null)},e.prototype.filter=function(e){var t=this,n=this;return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,n.iterator()];case 1:return[2,t.sent().filter((function(t){return Object(i.pf)((function(){return e(t)}))}))]}}))}))}),this.size===1/0?1/0:null)},e.prototype.forEachAsync=function(e){return u(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.iterator()];case 1:return[2,t.sent().forEachAsync(e)]}}))}))},e.prototype.forEach=function(e){return u(this,void 0,void 0,(function(){return s(this,(function(t){return Object(i.Gb)("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(e)]}))}))},e.prototype.map=function(e){var t=this,n=this;return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,n.iterator()];case 1:return[2,t.sent().map((function(t){return Object(i.pf)((function(){return e(t)}))}))]}}))}))}),this.size)},e.prototype.mapAsync=function(e){var t=this,n=this;return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,n.iterator()];case 1:return[2,t.sent().mapAsync(e)]}}))}))}),this.size)},e.prototype.prefetch=function(e){var t=this;if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var n=this;return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,n.iterator()];case 1:return[2,t.sent().prefetch(e)]}}))}))}),this.size)},e.prototype.repeat=function(e){var t=this,n=this;return J((function(){return u(t,void 0,void 0,(function(){var t=this;return s(this,(function(r){return[2,A(j((function(){return u(t,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e={},[4,n.iterator()];case 1:return[2,(e.value=t.sent(),e.done=!1,e)]}}))}))})).take(e))]}))}))}),null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null)},e.prototype.skip=function(e){var t=this,n=this;return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,n.iterator()];case 1:return[2,t.sent().skip(e)]}}))}))}),null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null)},e.prototype.shuffle=function(e,t,n){var r=this;if(void 0===n&&(n=!0),null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var a=this,o=g(t||i.Af.now().toString());return J((function(){return u(r,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return t=o.int32(),n&&(t+=o.int32()),[4,a.iterator()];case 1:return[2,r.sent().shuffle(e,t.toString())]}}))}))}),this.size)},e.prototype.take=function(e){var t=this,n=this;return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,n.iterator()];case 1:return[2,t.sent().take(e)]}}))}))}),null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null)},e.prototype.toArray=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,e.sent().toArray()]}}))}))},e.prototype.toArrayForTest=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,e.sent().toArrayForTest()]}}))}))},e.MAX_BUFFER_SIZE=1e4,e}();function J(e,t){return void 0===t&&(t=null),new(function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this;return e.size=t,e}return o(r,n),r.prototype.iterator=function(){return u(this,void 0,void 0,(function(){return s(this,(function(t){return[2,e()]}))}))},r}(Y))}function Z(e){var t=this;return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(t){return[2,_(e)]}))}))}),e.length)}function Q(e){var t,n=this;if(!O(e))throw new Error("The argument to zip() must be an object or array.");if(Array.isArray(e))for(var r=0;r<e.length;r++)t=null==t?e[r].size:Math.min(t,e[r].size);else if(e instanceof Object)for(var i in e)t=null==t?e[i].size:Math.min(t,e[i].size);return J((function(){return u(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,w(e,(function(e){if(e instanceof Y)return{value:e.iterator(),recurse:!1};if(O(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}))];case 1:return[2,T(t.sent(),N.SHORTEST)]}}))}))}),t)}function ee(e){return null===e?null:function(e){return null==e||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof i.B||i.Af.isTypedArray(e)}(e[0])?{value:te(e),recurse:!1}:{value:null,recurse:!0}}function te(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof i.B?Object(i.We)(e):Object(i.gf)(e)}var ne=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return o(t,e),t.prototype.iterator=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this.input.iterator()];case 1:return e=t.sent(),[2,e.decodeUTF8().split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e}))]}}))}))},t}(Y),re=Symbol("out"),ie=Symbol("field"),ae=Symbol("quote"),oe=Symbol("quoteafterquote"),ue=Symbol("quoteinquote"),se=function(e){function t(t,n){var r=e.call(this)||this;return r.input=t,r.hasHeader=!0,r.fullColumnNames=null,r.columnNamesValidated=!1,r.columnConfigs=null,r.configuredColumnsOnly=!1,r.delimiter=",",r.delimWhitespace=!1,r.base=new ne(t),n||(n={}),r.hasHeader=!1!==n.hasHeader,r.fullColumnNames=n.columnNames,r.columnConfigs=n.columnConfigs,r.configuredColumnsOnly=n.configuredColumnsOnly,n.delimWhitespace?(i.Af.assert(null==n.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),r.delimWhitespace=!0,r.delimiter=" "):r.delimiter=n.delimiter?n.delimiter:",",r}return o(t,e),t.prototype.columnNames=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:e.sent(),e.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}}))}))},t.prototype.setColumnNames=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,a,o,u=this;return s(this,(function(s){switch(s.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(e=s.sent(),!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&e&&i.Af.assert(e.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+u.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."})),this.fullColumnNames||(this.fullColumnNames=e),t=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),n=Object.keys(t).filter((function(e){return t[e]>1})),i.Af.assert(0===n.length,(function(){return"Duplicate column names found: "+n.toString()})),this.columnConfigs)for(r=0,a=Object.keys(this.columnConfigs);r<a.length;r++)if(o=a[r],-1===this.fullColumnNames.indexOf(o))throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");return this.columnNamesValidated=!0,[2]}}))}))},t.prototype.maybeReadHeaderLine=function(){return u(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,n.sent().next()];case 2:if((e=n.sent()).done)throw new Error("No data was found for CSV parsing.");return t=e.value,[2,this.parseRow(t,!1)];case 3:return[2,null]}}))}))},t.prototype.iterator=function(){return u(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(n){switch(n.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:n.sent(),n.label=2;case 2:return[4,this.base.iterator()];case 3:return e=n.sent(),this.hasHeader&&(e=e.skip(1)),[2,e.map((function(e){return t.makeDataElement(e)}))]}}))}))},t.prototype.makeDataElement=function(e){for(var t=this.parseRow(e),n={},r={},i=0;i<this.fullColumnNames.length;i++){var a=this.fullColumnNames[i],o=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||o){var u=t[i],s=null;if(""===u)if(o&&void 0!==o.default)s=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column "+a+" is empty in this line: "+e);s=void 0}else{var c=Number(u);if(isNaN(c))s=o&&"bool"===o.dtype?this.getBoolean(u):u;else if(o&&o.dtype)switch(o.dtype){case"float32":s=c;break;case"int32":s=Math.floor(c);break;case"bool":s=this.getBoolean(u);break;default:s=c}else s=c}o&&o.isLabel?r[a]=s:n[a]=s}}return 0===Object.keys(r).length?n:{xs:n,ys:r}},t.prototype.getBoolean=function(e){return"1"===e||"true"===e.toLowerCase()?1:0},t.prototype.parseRow=function(e,t){void 0===t&&(t=!0);for(var n=[],r=0,i=e.length,a=re,o=0;o<i;o++)switch(a){case re:switch(e.charAt(o)){case'"':r=o+1,a=ae;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),a=re;break;default:a=ie,r=o}break;case ie:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o)),a=re,r=o+1}break;case ae:switch(e.charAt(o)){case'"':a=oe}break;case oe:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),a=re,r=o+1;break;case'"':a=ae;break;default:a=ue}break;case ue:switch(e.charAt(o)){case'"':a=ae}}if(a===oe?n.push(e.substring(r,i-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+n);return n},t}(Y),ce=function(e){function t(t){var n=e.call(this)||this;n.microphoneConfig=t,n.isClosed=!1,n.fftSize=t.fftSize||1024;var r=Math.log2(n.fftSize);if(n.fftSize<0||r<4||r>14||!Number.isInteger(r))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+n.fftSize);if(n.numFrames=t.numFramesPerSpectrogram||43,n.sampleRateHz=t.sampleRateHz,n.columnTruncateLength=t.columnTruncateLength||n.fftSize,n.audioTrackConstraints=t.audioTrackConstraints,n.smoothingTimeConstant=t.smoothingTimeConstant||0,n.includeSpectrogram=!1!==t.includeSpectrogram,n.includeWaveform=!0===t.includeWaveform,!n.includeSpectrogram&&!n.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return n}return o(t,e),t.prototype.summary=function(){return"microphone"},t.create=function(e){return void 0===e&&(e={}),u(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:if(Object(i.Wb)().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(n=new t(e)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){return u(this,void 0,void 0,(function(){var e,t,n,r;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=this,[4,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})];case 1:return e.stream=i.sent(),[3,3];case 2:throw t=i.sent(),new Error("Error thrown while initializing video stream: "+t.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(n=window.AudioContext||window.webkitAudioContext,this.audioContext=new n,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return r=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,r.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}}))}))},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,i;return s(this,(function(a){switch(a.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return n=a.sent(),this.includeSpectrogram&&(r=this.flattenQueue(n.freqDataQueue),e=this.getTensorFromAudioDataArray(r,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(n.timeDataQueue),t=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:e,waveform:t},done:!1}]}}))}))},t.prototype.capture=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.next()];case 1:return[2,e.sent().value]}}))}))},t.prototype.getAudioData=function(){return u(this,void 0,void 0,(function(){var e,t,n,r=this;return s(this,(function(i){return e=[],t=[],n=0,[2,new Promise((function(i){var a=setInterval((function(){r.includeSpectrogram&&(r.analyser.getFloatFrequencyData(r.freqData),r.freqData[0]===-1/0&&i({freqDataQueue:e,timeDataQueue:t}),e.push(r.freqData.slice(0,r.columnTruncateLength))),r.includeWaveform&&(r.analyser.getFloatTimeDomainData(r.timeData),t.push(r.timeData.slice())),++n===r.numFrames&&(clearInterval(a),i({freqDataQueue:e,timeDataQueue:t}))}),r.fftSize/r.sampleRateHz*1e3)}))]}))}))},t.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},t.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},t.prototype.getSampleRate=function(){return this.sampleRateHz},t.prototype.flattenQueue=function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n},t.prototype.getTensorFromAudioDataArray=function(e,t){var n=new Float32Array(i.Af.sizeFromShape(t));return n.set(e,n.length-e.length),Object(i.gf)(n,t)},t}(D),le=function(e){function t(t,n){var r=e.call(this)||this;if(r.webcamVideoElement=t,r.webcamConfig=n,r.isClosed=!0,r.resize=!1,r.needToResize())if(r.resize=!0,r.cropSize=[r.webcamConfig.resizeHeight,r.webcamConfig.resizeWidth],r.cropBoxInd=Object(i.hf)([0],"int32"),r.webcamConfig.centerCrop){var a=1*r.webcamConfig.resizeWidth/r.webcamVideoElement.width,o=1*r.webcamConfig.resizeHeight/r.webcamVideoElement.height,u=(1-a)/2,s=(1-o)/2,c=u+a,l=o+s;r.cropBox=Object(i.if)([s,u,l,c],[1,4])}else r.cropBox=Object(i.if)([0,0,1,1],[1,4]);return r}return o(t,e),t.prototype.summary=function(){return"webcam"},t.create=function(e,n){return void 0===n&&(n={}),u(this,void 0,void 0,(function(){var r;return s(this,(function(a){switch(a.label){case 0:if(Object(i.Wb)().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!n.resizeWidth||!n.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=n.resizeWidth,e.height=n.resizeHeight}return[4,(r=new t(e,n)).start()];case 1:return a.sent(),[2,r]}}))}))},t.prototype.start=function(){return u(this,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){switch(r.label){case 0:this.webcamConfig.facingMode&&i.Af.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: "+n.webcamConfig.facingMode+". Please provide 'user' or 'environment'"})),r.label=1;case 1:return r.trys.push([1,3,,4]),e=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return e.stream=r.sent(),[3,4];case 3:throw(t=r.sent()).message="Error thrown while initializing video stream: "+t.message,t;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise((function(e){n.webcamVideoElement.onloadedmetadata=function(){e()}}))]}}))}))},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){if(this.isClosed)return[2,{value:null,done:!0}];try{e=i.lb.fromPixels(this.webcamVideoElement)}catch(e){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(e))}if(!this.resize)return[2,{value:e,done:!1}];try{return[2,{value:this.cropAndResizeFrame(e),done:!1}]}catch(e){throw new Error("Error thrown cropping the video: "+e.message)}finally{e.dispose()}return[2]}))}))},t.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},t.prototype.cropAndResizeFrame=function(e){var t=this;return Object(i.pf)((function(){var n,r=e.toFloat().expandDims(0),a=(n=i.Dc.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return n.reshape(a.slice(1))}))},t.prototype.capture=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.next()];case 1:return[2,e.sent().value]}}))}))},t.prototype.stop=function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0},t.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},t}(D),fe=function(){},de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.split=function(e){return new pe(this,e)},t}(D),pe=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.impl=new he(t,n),r}return o(t,e),t.prototype.summary=function(){return this.impl.summary()},t.prototype.next=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.impl.next()]}))}))},t}(de),he=function(e){function t(t,n){var r=e.call(this)||this;return r.upstream=t,r.separator=n,r.carryover="",r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},t.prototype.pump=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,i;return s(this,(function(a){switch(a.label){case 0:return[4,this.upstream.next()];case 1:if((e=a.sent()).done)return""===this.carryover?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((t=e.value.split(this.separator))[0]=this.carryover+t[0],n=0,r=t.slice(0,-1);n<r.length;n++)i=r[n],this.outputQueue.push(i);return this.carryover=t[t.length-1],[2,!0]}}))}))},t}(H),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.decodeUTF8=function(){return new ve(this)},t}(D),ve=function(e){function t(t){var n=e.call(this)||this;return n.upstream=t,n.impl=new ge(t),n}return o(t,e),t.prototype.summary=function(){return this.impl.summary()},t.prototype.next=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.impl.next()]}))}))},t}(de),ge=function(e){function t(t){var r=e.call(this)||this;if(r.upstream=t,Object(i.Wb)().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var a=n(366).StringDecoder;r.decoder=new a("utf8")}return r}return o(t,e),t.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},t.prototype.pump=function(){return u(this,void 0,void 0,(function(){var e,t,n;return s(this,(function(a){switch(a.label){case 0:return[4,this.upstream.next()];case 1:return(e=a.sent()).done?[2,!1]:(t=e.value,n=Object(i.Wb)().get("IS_BROWSER")?this.decoder.decode(t,{stream:!0}):this.decoder.write(r.from(t.buffer)),this.outputQueue.push(n),[2,!0])}}))}))},t}(H),ye=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.file=t,r.options=n,i.Af.assert(t instanceof Uint8Array||!!Object(i.Wb)().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=n.offset||0,r.chunkSize=n.chunkSize||1048576,r}return o(t,e),t.prototype.summary=function(){return"FileChunks "+this.file},t.prototype.next=function(){return u(this,void 0,void 0,(function(){var e,t,n=this;return s(this,(function(r){switch(r.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(e=new Promise((function(e,t){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)e(new Uint8Array(n.file.slice(n.offset,r)));else{var i=new FileReader;i.onload=function(n){var r=i.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(r)},i.onabort=function(e){return t(new Error("Aborted"))},i.onerror=function(e){return t(new Error(e.type))};var a=n.file.slice(n.offset,r);i.readAsArrayBuffer(a)}n.offset=r})),t={},[4,e]);case 1:return[2,(t.value=r.sent(),t.done=!1,t)]}}))}))},t}(me);function be(e,t){return void 0===t&&(t={}),u(this,void 0,void 0,(function(){var n,r,a,o,u;return s(this,(function(s){switch(s.label){case 0:return"string"==typeof e?n=e:(n=e.url,r=xe(e)),[4,i.Af.fetch(n,r)];case 1:return(a=s.sent()).ok?(u=Uint8Array.bind,[4,a.arrayBuffer()]):[3,3];case 2:return o=new(u.apply(Uint8Array,[void 0,s.sent()])),[2,new ye(o,t)];case 3:throw new Error(a.statusText)}}))}))}var xe=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function we(e){return"string"==typeof e&&"file://"===e.substr(0,7)}var Oe=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.input=t,r.options=n,r}return o(t,e),t.prototype.iterator=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){return we(this.input)&&Object(i.Wb)().get("IS_NODE")&&(e=n(367),this.input=e.readFileSync(this.input.substr(7))),[2,new ye(this.input,this.options)]}))}))},t}(fe),ke=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.url=t,r.fileOptions=n,r}return o(t,e),t.prototype.iterator=function(){return u(this,void 0,void 0,(function(){return s(this,(function(e){return we(this.url)?[2,new Oe(this.url,this.fileOptions).iterator()]:[2,be(this.url,this.fileOptions)]}))}))},t}(fe);function Ee(e,t){return void 0===t&&(t={}),new se(new ke(e),t)}function Se(e){var t=this,n=j(e);return J((function(){return u(t,void 0,void 0,(function(){return s(this,(function(e){return[2,n]}))}))}))}function Ce(e){var t=this;return J((function(){return u(t,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),[2,j((function(){return t.next()}))]}}))}))}))}function _e(e,t){return u(this,void 0,void 0,(function(){return s(this,(function(n){return[2,le.create(e,t)]}))}))}function je(e){return u(this,void 0,void 0,(function(){return s(this,(function(t){return[2,ce.create(e)]}))}))}var Ae="1.7.2"}.call(this,n(53),n(116).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e){var t=r.useState(e),n=t[0],i=t[1],a=e||n;return r.useEffect((function(){null==n&&i("mui-".concat(Math.round(1e5*Math.random())))}),[n]),a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(129);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";t.a={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"}},function(e,t,n){"use strict";t.a={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"}},function(e,t,n){"use strict";t.a={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}},function(e,t,n){"use strict";t.a={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"}},function(e,t,n){"use strict";t.a={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"}},function(e,t,n){"use strict";t.a={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"}},function(e,t,n){"use strict";t.a={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(3),i=n(41),a=n(5),o=n(0),u=(n(8),n(4)),s=n(40),c=n(38),l=n(7),f=n(216),d=o.forwardRef((function(e,t){var n=e.autoFocus,l=e.checked,d=e.checkedIcon,p=e.classes,h=e.className,m=e.defaultChecked,v=e.disabled,g=e.icon,y=e.id,b=e.inputProps,x=e.inputRef,w=e.name,O=e.onBlur,k=e.onChange,E=e.onFocus,S=e.readOnly,C=e.required,_=e.tabIndex,j=e.type,A=e.value,T=Object(a.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),N=Object(s.a)({controlled:l,default:Boolean(m),name:"SwitchBase",state:"checked"}),R=Object(i.a)(N,2),D=R[0],I=R[1],M=Object(c.a)(),F=v;M&&"undefined"===typeof F&&(F=M.disabled);var P="checkbox"===j||"radio"===j;return o.createElement(f.a,Object(r.a)({component:"span",className:Object(u.a)(p.root,h,D&&p.checked,F&&p.disabled),disabled:F,tabIndex:null,role:void 0,onFocus:function(e){E&&E(e),M&&M.onFocus&&M.onFocus(e)},onBlur:function(e){O&&O(e),M&&M.onBlur&&M.onBlur(e)},ref:t},T),o.createElement("input",Object(r.a)({autoFocus:n,checked:l,defaultChecked:m,className:p.input,disabled:F,id:P&&y,name:w,onChange:function(e){var t=e.target.checked;I(t),k&&k(e,t)},readOnly:S,ref:x,required:C,tabIndex:_,type:j,value:A},b)),D?d:g)}));t.a=Object(l.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(368),i=n(404),a=n(405),o=n(212),u=n(293),s=n(412),c=n(147),l=n(413),f=n(415),d=n(416),p=n(417),h=n(146),m=n(418);t.version_vis=m.version;var v={barchart:r.barchart,table:c.table,histogram:o.histogram,linechart:u.linechart,scatterplot:s.scatterplot,confusionMatrix:i.confusionMatrix,heatmap:a.heatmap};t.render=v;var g={accuracy:h.accuracy,perClassAccuracy:h.perClassAccuracy,confusionMatrix:h.confusionMatrix};t.metrics=g;var y={history:l.history,fitCallbacks:l.fitCallbacks,perClassAccuracy:d.showPerClassAccuracy,valuesDistribution:p.valuesDistribution,layer:f.layer,modelSummary:f.modelSummary};t.show=y;var b=n(289);t.visor=b.visor,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(288))},function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)};var i="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function a(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function o(e,t,n){return e.concat(t).map((function(e){return a(e,n)}))}function u(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function s(e,t){try{return t in e}catch(n){return!1}}function c(e,t,n){var r={};return n.isMergeableObject(e)&&u(e).forEach((function(t){r[t]=a(e[t],n)})),u(t).forEach((function(i){(function(e,t){return s(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(s(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"===typeof n?n:l}(i,n)(e[i],t[i],n):r[i]=a(t[i],n))})),r}function l(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||o,n.isMergeableObject=n.isMergeableObject||r,n.cloneUnlessOtherwiseSpecified=a;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):c(e,t,n):a(t,n)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,t)}),{})};var f=l;e.exports=f},,,,,,,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,u,s=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(s[l]=n[l]);if(r){u=r(n);for(var f=0;f<u.length;f++)a.call(n,u[f])&&(s[u[f]]=n[u[f]])}}return s}},function(e,t,n){"use strict";(function(e){var r=n(357),i=n(358),a=n(359);function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=d(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=u(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|p(t.length);return 0===(e=u(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?u(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|p(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return j(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"===typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<u;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===s)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+s>u&&(n=u-s),a=n;a>=0;a--){for(var f=!0,d=0;d<s;d++)if(c(e,a+d)!==c(t,d)){f=!1;break}if(f)return a}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function x(e,t,n,r){return U(B(t,e.length-n),e,n,r)}function w(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return w(e,t,n,r)}function k(e,t,n,r){return U(W(t),e,n,r)}function E(e,t,n,r){return U(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,u,s,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(a=e[i+1]))&&(s=(31&c)<<6|63&a)>127&&(l=s);break;case 3:a=e[i+1],o=e[i+2],128===(192&a)&&128===(192&o)&&(s=(15&c)<<12|(63&a)<<6|63&o)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:a=e[i+1],o=e[i+2],u=e[i+3],128===(192&a)&&128===(192&o)&&128===(192&u)&&(s=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),u=Math.min(a,o),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],o=l[f];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=L(e[a]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function I(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,a){return a||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var i=t-e;n=new s(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=0,o=1,u=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var a=n-1,o=1,u=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:B(new s(e,r).toString()),u=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%u]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function W(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(53))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.merge=t.$=t.style=t.presets=t.keyframes=t.fontFace=t.insertGlobal=t.insertRule=t.plugins=t.styleSheet=void 0,t.speedy=function(e){return f.speedy(e)},t.simulations=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];h=!!e},t.simulate=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(t=(0,o.default)(t)))return{};if(!h)return m||(console.warn("can't simulate without once calling simulations(true)"),m=!0),v||(console.warn("don't use simulation outside dev"),v=!0),{};return t.reduce((function(e,t){return e["data-simulate-"+y(t)]="",e}),{})},t.cssLabels=function(e){g=!!e},t.isLikeRule=x,t.idFor=w,t.css=U,t.rehydrate=function(e){(0,r.default)(j,e.reduce((function(e,t){return e[t]=!0,e}),{}))},t.flush=function(){j=f.inserted={},A=f.registered={},N={},f.flush(),f.inject()},t.select=H,t.parent=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U(l({},e+" &",n))},t.media=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U(l({},"@media "+e,n))},t.pseudo=q,t.active=function(e){return q(":active",e)},t.any=function(e){return q(":any",e)},t.checked=function(e){return q(":checked",e)},t.disabled=function(e){return q(":disabled",e)},t.empty=function(e){return q(":empty",e)},t.enabled=function(e){return q(":enabled",e)},t._default=function(e){return q(":default",e)},t.first=function(e){return q(":first",e)},t.firstChild=function(e){return q(":first-child",e)},t.firstOfType=function(e){return q(":first-of-type",e)},t.fullscreen=function(e){return q(":fullscreen",e)},t.focus=function(e){return q(":focus",e)},t.hover=function(e){return q(":hover",e)},t.indeterminate=function(e){return q(":indeterminate",e)},t.inRange=function(e){return q(":in-range",e)},t.invalid=function(e){return q(":invalid",e)},t.lastChild=function(e){return q(":last-child",e)},t.lastOfType=function(e){return q(":last-of-type",e)},t.left=function(e){return q(":left",e)},t.link=function(e){return q(":link",e)},t.onlyChild=function(e){return q(":only-child",e)},t.onlyOfType=function(e){return q(":only-of-type",e)},t.optional=function(e){return q(":optional",e)},t.outOfRange=function(e){return q(":out-of-range",e)},t.readOnly=function(e){return q(":read-only",e)},t.readWrite=function(e){return q(":read-write",e)},t.required=function(e){return q(":required",e)},t.right=function(e){return q(":right",e)},t.root=function(e){return q(":root",e)},t.scope=function(e){return q(":scope",e)},t.target=function(e){return q(":target",e)},t.valid=function(e){return q(":valid",e)},t.visited=function(e){return q(":visited",e)},t.dir=function(e,t){return q(":dir("+e+")",t)},t.lang=function(e,t){return q(":lang("+e+")",t)},t.not=function(e,t){var n=e.split(",").map((function(e){return e.trim()})).map((function(e){return":not("+e+")"}));if(1===n.length)return q(":not("+e+")",t);return H(n.join(""),t)},t.nthChild=function(e,t){return q(":nth-child("+e+")",t)},t.nthLastChild=function(e,t){return q(":nth-last-child("+e+")",t)},t.nthLastOfType=function(e,t){return q(":nth-last-of-type("+e+")",t)},t.nthOfType=function(e,t){return q(":nth-of-type("+e+")",t)},t.after=function(e){return q("::after",e)},t.before=function(e){return q("::before",e)},t.firstLetter=function(e){return q("::first-letter",e)},t.firstLine=function(e){return q("::first-line",e)},t.selection=function(e){return q("::selection",e)},t.backdrop=function(e){return q("::backdrop",e)},t.placeholder=function(e){return U({"::placeholder":e})},t.cssFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t=(0,o.default)(t))?t.map((function(e){var t={label:[]};return F(t,{src:e}),_(b(t),C(t)).join("")})).join(""):""},t.attribsFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(t=(0,o.default)(t))?t.map((function(e){w(e);var t=Object.keys(e)[0];return t+'="'+(e[t]||"")+'"'})).join(" "):"";return r};var r=c(n(115)),i=n(369),a=n(285),o=c(n(378)),u=n(379),s=c(n(395));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=t.styleSheet=new i.StyleSheet;f.inject();var d=t.plugins=f.plugins=new u.PluginSet([u.prefixes,u.contentWrap,u.fallbacks]);d.media=new u.PluginSet,d.fontFace=new u.PluginSet,d.keyframes=new u.PluginSet([u.prefixes,u.fallbacks]);var p="undefined"!==typeof window,h=!1,m=!1,v=!1;var g=!1;function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.toLowerCase().replace(/[^a-z0-9]/g,t)}function b(e){var t=JSON.stringify(e),n=(0,s.default)(t).toString(36);return e.label&&e.label.length,n}function x(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));return 1===t.length&&!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0])}function w(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));if(1!==t.length)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0]);if(!n)throw new Error("not a rule");return n[1]}var O=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function k(e){if(-1===e.indexOf(","))return[e];for(var t,n=[],r=[],i=0;t=O.exec(e);)switch(t[0]){case"(":i++;break;case")":i--;break;case",":if(i)break;n.push(t.index)}for(t=n.length;t--;)r.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return r.unshift(e),r}function E(e,t){if(!e)return t.replace(/\&/g,"");if(!t)return".css-"+e+",[data-css-"+e+"]";var n=k(t).map((function(t){return t.indexOf("&")>=0?[t.replace(/\&/gm,".css-"+e),t.replace(/\&/gm,"[data-css-"+e+"]")].join(","):".css-"+e+t+",[data-css-"+e+"]"+t})).join(",");return h&&/^\&\:/.exec(t)&&!/\s/.exec(t)&&(n+=",.css-"+e+"[data-simulate-"+y(t)+"],[data-css-"+e+"][data-simulate-"+y(t)+"]"),n}function S(e){var t=e.selector,n=e.style,r=d.transform({selector:t,style:n});return r.selector+"{"+(0,a.createMarkupForStyles)(r.style)+"}"}function C(e){var t=void 0,n=void 0,r=void 0,i=void 0;return Object.keys(e).forEach((function(a){a.indexOf("&")>=0?(n=n||{})[a]=e[a]:0===a.indexOf("@media")?(r=r||{})[a]=C(e[a]):0===a.indexOf("@supports")?(i=i||{})[a]=C(e[a]):"label"===a?e.label.length>0&&((t=t||{}).label=g?e.label.join("."):""):(t=t||{})[a]=e[a]})),{plain:t,selects:n,medias:r,supports:i}}function _(e,t){var n=[],r=t.plain,i=t.selects,a=t.medias,o=t.supports;return r&&n.push(S({style:r,selector:E(e)})),i&&Object.keys(i).forEach((function(t){return n.push(S({style:i[t],selector:E(e,t)}))})),a&&Object.keys(a).forEach((function(t){return n.push(t+"{"+_(e,a[t]).join("")+"}")})),o&&Object.keys(o).forEach((function(t){return n.push(t+"{"+_(e,o[t]).join("")+"}")})),n}var j=f.inserted={};var A=f.registered={};function T(e){A[e.id]||(A[e.id]=e)}var N={};function R(e){if(T(e),function(e){if(!j[e.id]){j[e.id]=!0;var t=C(e.style),n=_(e.id,t);j[e.id]=!!p||n,n.forEach((function(e){return f.insert(e)}))}}(e),N[e.id])return N[e.id];var t=l({},"data-css-"+e.id,g&&e.label||"");return Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"css-"+e.id}}),N[e.id]=t,t}function D(e,t){var n=k(e).map((function(e){return e.indexOf("&")>=0?e:"&"+e}));return k(t).map((function(e){return e.indexOf("&")>=0?e:"&"+e})).reduce((function(e,t){return e.concat(n.map((function(e){return t.replace(/\&/g,e)})))}),[]).join(",")}function I(e,t){return e?"@supports "+e.substring(9)+" and "+t.substring(9):t}var M={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function F(e,t){var n=t.selector,r=void 0===n?"":n,i=t.mq,a=void 0===i?"":i,u=t.supp,s=void 0===u?"":u,c=t.src,l=void 0===c?{}:c;Array.isArray(l)||(l=[l]),(l=function e(t){for(var n=[],r=0;r<t.length;r++)n=Array.isArray(t[r])?n.concat(e(t[r])):n.concat(t[r]);return n}(l)).forEach((function(t){if(x(t)){var n=function(e){if(x(e)){var t=A[w(e)];if(null==t)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return t}return e}(t);if("css"!==n.type)throw new Error("cannot merge this rule");t=n.style}(t=(0,o.default)(t))&&t.composes&&F(e,{selector:r,mq:a,supp:s,src:t.composes}),Object.keys(t||{}).forEach((function(n){if(function(e){for(var t=[":",".","[",">"," "],n=!1,r=e.charAt(0),i=0;i<t.length;i++)if(r===t[i]){n=!0;break}return n||e.indexOf("&")>=0}(n))M[n]&&M[n].forEach((function(i){return F(e,{selector:D(r,i),mq:a,supp:s,src:t[n]})})),F(e,{selector:D(r,n),mq:a,supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@media")}(n))F(e,{selector:r,mq:(o=a,u=n,o?"@media "+o.substring(6)+" and "+u.substring(6):u),supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@supports")}(n))F(e,{selector:r,mq:a,supp:I(s,n),src:t[n]});else if("composes"===n);else{var i=e;s&&(i[s]=i[s]||{},i=i[s]),a&&(i[a]=i[a]||{},i=i[a]),r&&(i[r]=i[r]||{},i=i[r]),"label"===n?g&&(e.label=e.label.concat(t.label)):i[n]=t[n]}var o,u}))}))}function P(e){var t={label:[]};return F(t,{src:e}),R({id:b(t),style:t,label:g?t.label.join("."):"",type:"css"})}var z={};Object.defineProperty(z,"toString",{enumerable:!1,value:function(){return"css-nil"}});var L="undefined"!==typeof WeakMap?[z,new WeakMap,new WeakMap,new WeakMap]:[z];var B,W="undefined"!==typeof WeakMap?(B=P,function(e){if(L[e.length]){for(var t=L[e.length],n=0;n<e.length-1;)t.has(e[n])||t.set(e[n],new WeakMap),t=t.get(e[n]),n++;if(t.has(e[e.length-1])){var r=t.get(e[n]);if(A[r.toString().substring(4)])return r}}var i=B(e);if(L[e.length]){for(var a=0,o=L[e.length];a<e.length-1;)o=o.get(e[a]),a++;try{o.set(e[a],i)}catch(u){}}return i}):P;function U(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&t[0].length&&t[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return(t=(0,o.default)(t))?W(t):z}U.insert=function(e){var t={id:b(e),css:e,type:"raw"};T(t),j[t.id]||(f.insert(t.css),j[t.id]=!!p||[t.css])};t.insertRule=U.insert;U.global=function(e,t){if(t=(0,o.default)(t))return U.insert(S({selector:e,style:t}))};t.insertGlobal=U.global;U.keyframes=function(e,t){t||(t=e,e="animation");var n={id:b({name:e,kfs:t=(0,o.default)(t)||{}}),type:"keyframes",name:e,keyframes:t};return T(n),function(e){if(!j[e.id]){var t=Object.keys(e.keyframes).map((function(t){var n=d.keyframes.transform({id:e.id,name:t,style:e.keyframes[t]});return n.name+"{"+(0,a.createMarkupForStyles)(n.style)+"}"})).join(""),n=["-webkit-","-moz-","-o-",""].map((function(n){return"@"+n+"keyframes "+e.name+"_"+e.id+"{"+t+"}"}));n.forEach((function(e){return f.insert(e)})),j[e.id]=!!p||n}}(n),e+"_"+n.id},U.fontFace=function(e){var t={id:b(e=(0,o.default)(e)),type:"font-face",font:e};return T(t),function(e){if(!j[e.id]){var t="@font-face{"+(0,a.createMarkupForStyles)(e.font)+"}";f.insert(t),j[e.id]=!!p||[t]}}(t),e.fontFamily};t.fontFace=U.fontFace,t.keyframes=U.keyframes;t.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var V=t.style=U;function H(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?U(l({},e,n)):V(n)}t.$=H;t.merge=U,t.compose=U;function q(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U(l({},e,n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"===typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},function(e,t,n){"use strict";n.r(t);var r=n(297);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(303);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(217);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";function r(e,t,n,r,i){return null}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(142);n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.c}))},function(e,t,n){"use strict";n.r(t);var r=n(306);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(219);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(283);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return h}));var r=n(105),i=n(61),a=n(23),o=n(171),u=n(27),s=n(58);function c(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function l(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[t,n].concat(Object(a.a)(r)),u=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===u.indexOf(e.tagName)&&c(e,i)}))}function d(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function p(e,t){var n,r=[],i=[],a=e.container;if(!t.disableScrollLock){if(function(e){var t=Object(u.a)(e);return t.body===e?Object(s.a)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(a)){var c=Object(o.a)();r.push({value:a.style.paddingRight,key:"padding-right",el:a}),a.style["padding-right"]="".concat(l(a)+c,"px"),n=Object(u.a)(a).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(l(e)+c,"px")}))}var f=a.parentElement,d="HTML"===f.nodeName&&"scroll"===window.getComputedStyle(f)["overflow-y"]?f:a;r.push({value:d.style.overflow,key:"overflow",el:d}),d.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var h=function(){function e(){Object(r.a)(this,e),this.modals=[],this.containers=[]}return Object(i.a)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&c(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);f(t,e.mountNode,e.modalRef,r,!0);var i=d(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=d(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=p(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=d(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&c(e.modalRef,!0),f(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&c(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}()},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(0),i=n(22);t.a=Object(i.a)(r.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},function(e,t,n){"use strict";var r=n(0),i=n(22);t.a=Object(i.a)(r.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h}));var r=n(23),i=n(3),a=n(5),o=n(0),u=(n(8),n(332)),s=n(43),c=n.n(s),l=n(19),f=n(56),d=n(443),p=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?f.b.indexOf(e)<=f.b.indexOf(t):f.b.indexOf(e)<f.b.indexOf(t)},h=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?f.b.indexOf(t)<=f.b.indexOf(e):f.b.indexOf(t)<f.b.indexOf(e)},m="undefined"===typeof window?o.useEffect:o.useLayoutEffect;t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.withTheme,s=void 0!==n&&n,f=e.noSSR,p=void 0!==f&&f,h=e.initialWidth;function v(e){var n=Object(l.a)(),c=e.theme||n,f=Object(u.a)({theme:c,name:"MuiWithWidth",props:Object(i.a)({},e)}),v=f.initialWidth,g=f.width,y=Object(a.a)(f,["initialWidth","width"]),b=o.useState(!1),x=b[0],w=b[1];m((function(){w(!0)}),[]);var O=Object(r.a)(c.breakpoints.keys).reverse().reduce((function(e,t){var n=Object(d.a)(c.breakpoints.up(t));return!e&&n?t:e}),null),k=Object(i.a)({width:g||(x||p?O:void 0)||v||h},s?{theme:c}:{},{},y);return void 0===k.width?null:o.createElement(t,k)}return c()(v,t),v}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=r,t.assertShapesMatch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r(i(e,t),n+" Shapes ".concat(e," and ").concat(t," must match"))},t.arraysEqual=i,t.DECIMAL_PLACES_TO_CHECK=4},function(e,t,n){"use strict";var r=n(11),i=n(292),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),u=n(145);t.arrayStats=function(e){if(!Array.isArray(e))throw new Error("input must be an array");if(0===e.length)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};for(var t=e.length,n=-1/0,r=1/0,i=0,a=0,o=0,u=0;u<t;u++){var s=e[u];s>n&&(n=s),s<r&&(r=s),0===s&&(i+=1),isNaN(s)?a+=1:isFinite(s)||(o+=1)}var c={numVals:t,numZeros:i,numNans:a,max:n,min:r,numInfs:o};return c.max===-1/0&&(c.max=NaN),c.min===1/0&&(c.min=NaN),c},t.tensorStats=function(e){return a(this,void 0,void 0,r.mark((function t(){var n,a,u,s,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.tidy((function(){var t=o.scalar(0,e.dtype);return[e.min(),e.max(),e.equal(t).sum()]})),a=i(n,3),u=a[0],s=a[1],c=a[2],t.abrupt("return",Promise.all([e.data(),u.data(),s.data(),c.data()]).then((function(e){for(var t=i(e,4),n=t[0],r=t[1],a=t[2],o=t[3],u=n.length,s=0,c=0,l=0;l<u;l++){var f=n[l];isNaN(f)?s+=1:isFinite(f)||(c+=1)}var d=r[0],p=a[0];return s===u&&(d=NaN,p=NaN),{numVals:u,numZeros:o[0],numNans:s,min:d,max:p,numInfs:c}})));case 2:case"end":return t.stop()}}),t)})))},t.confusionMatrix=function(e,t,n,s){return a(this,void 0,void 0,r.mark((function a(){var c,l,f;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null!=s&&u.assert(s.size===t.size,"labels and predictions must be the same length"),c=e.cast("int32"),l=t.cast("int32"),null==n&&(n=o.tidy((function(){return o.maximum(c.max(),l.max()).cast("int32").dataSync()[0]+1}))),f=Promise.resolve(null),null!=s&&(f=s.data()),r.abrupt("return",Promise.all([c.data(),l.data(),f]).then((function(e){for(var t=i(e,3),r=t[0],a=t[1],o=t[2],u=Array(n).fill(0),s=0;s<n;s++)u[s]=Array(n).fill(0);for(var c=0;c<r.length;c++){var l=r[c],f=a[c];u[l][f]+=null!=o?o[c]:1}return u})));case 10:case"end":return r.stop()}}),a)})))},t.accuracy=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var i,a,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u.assertShapesMatch(e.shape,t.shape,"Error computing accuracy."),i=e.equal(t),a=i.mean(),n.next=5,a.data();case 5:return s=n.sent[0],o.dispose([i,a]),n.abrupt("return",s);case 8:case"end":return n.stop()}}),n)})))},t.perClassAccuracy=function(e,t,n){return a(this,void 0,void 0,r.mark((function a(){return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null==n&&(n=o.tidy((function(){return o.maximum(e.max(),t.max()).dataSync()[0]+1}))),r.abrupt("return",Promise.all([e.data(),t.data()]).then((function(e){for(var t=i(e,2),r=t[0],a=t[1],o=Array(n).fill(0),u=Array(n).fill(0),s=0;s<r.length;s++){var c=r[s],l=a[s];o[c]+=1,c===l&&(u[c]+=1)}for(var f=[],d=0;d<o.length;d++)f.push({count:o[d],accuracy:0===o[d]?0:u[d]/o[d]});return f})));case 5:case"end":return r.stop()}}),a)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(309),i=n(438),a=n(117),o=n(54);t.table=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&null==t.headers)throw new Error('Data to render must have a "headers" property');if(t&&null==t.values)throw new Error('Data to render must have a "values" property');var s=o.getDrawArea(e),c=Object.assign({},u,n),l=i.select(s).select("table.tf-table"),f=a.css({fontSize:c.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(0===l.size()&&((l=i.select(s).append("table")).attr("class"," ".concat(f," tf-table")),l.append("thead").append("tr"),l.append("tbody")),1!==l.size())throw new Error("Error inserting table");var d=a.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),p=l.select("thead").select("tr").selectAll("th").data(t.headers),h=p.enter().append("th").attr("class","".concat(d));p.merge(h).html((function(e){return e})),p.exit().remove();var m=r.format(",.4~f"),v=l.select("tbody").selectAll("tr").data(t.values),g=v.enter().append("tr"),y=a.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),b=v.merge(g).selectAll("td").data((function(e){return e})),x=b.enter().append("td").attr("class","".concat(y));b.merge(x).html((function(e){return"number"===typeof e?m(e):e})),b.exit().remove(),v.exit().remove()};var u={fontSize:14}},function(e,t,n){"use strict";n.r(t);var r=n(295);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(296);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(298);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(311);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(299);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(312);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(300);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(301);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";n.r(t);var r=n(313);n.d(t,"default",(function(){return r.a}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return oe})),n.d(t,"c",(function(){return ue})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return se}));var r,i,a,o=n(2),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(a=r||(r={}))[a.DT_INVALID=0]="DT_INVALID",a[a.DT_FLOAT=1]="DT_FLOAT",a[a.DT_DOUBLE=2]="DT_DOUBLE",a[a.DT_INT32=3]="DT_INT32",a[a.DT_UINT8=4]="DT_UINT8",a[a.DT_INT16=5]="DT_INT16",a[a.DT_INT8=6]="DT_INT8",a[a.DT_STRING=7]="DT_STRING",a[a.DT_COMPLEX64=8]="DT_COMPLEX64",a[a.DT_INT64=9]="DT_INT64",a[a.DT_BOOL=10]="DT_BOOL",a[a.DT_QINT8=11]="DT_QINT8",a[a.DT_QUINT8=12]="DT_QUINT8",a[a.DT_QINT32=13]="DT_QINT32",a[a.DT_BFLOAT16=14]="DT_BFLOAT16",a[a.DT_FLOAT_REF=101]="DT_FLOAT_REF",a[a.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",a[a.DT_INT32_REF=103]="DT_INT32_REF",a[a.DT_UINT8_REF=104]="DT_UINT8_REF",a[a.DT_INT16_REF=105]="DT_INT16_REF",a[a.DT_INT8_REF=106]="DT_INT8_REF",a[a.DT_STRING_REF=107]="DT_STRING_REF",a[a.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",a[a.DT_INT64_REF=109]="DT_INT64_REF",a[a.DT_BOOL_REF=110]="DT_BOOL_REF",a[a.DT_QINT8_REF=111]="DT_QINT8_REF",a[a.DT_QUINT8_REF=112]="DT_QUINT8_REF",a[a.DT_QINT32_REF=113]="DT_QINT32_REF",a[a.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(i||(i={}));var l={};function f(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};l[e]=n}function d(e){return l[e]}function p(e){delete l[e]}function h(e,t,n,r){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var a=i.inputIndexStart,o=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?a+1:i.inputIndexEnd;if("tensor"===i.type)return m(t.inputNames[i.inputIndexStart],n,r);if("tensors"===i.type)return t.inputNames.slice(a,o).map((function(e){return m(e,n,r)}));var u=Array.prototype.slice.call(m(t.inputNames.slice(a)[0],n,r).dataSync());return"number"===i.type?u[0]:u}var s=t.attrParams[e];return s&&s.value}function m(e,t,n){var r=y(e),i=r[0],a=r[1],o=n.currentContextIds.find((function(e){return!!t[g(i,e)]}));return void 0!==o?t[g(i,o)][a]:void 0}function v(e,t){var n=y(e),r=n[0],i=n[1];return[g(r,t&&t.currentContextId),i]}function g(e,t){return t?e+"-"+t:e}function y(e){var t=e.lastIndexOf(":");return-1===t?[e,0]:[e.substring(0,t),Number(e.substring(t+1))]}function b(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}var x=Object.freeze({json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),w=Object.freeze({json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),O=Object.freeze({json:[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}]}),k=Object.freeze({json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}]}),E=Object.freeze({json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]}),S=Object.freeze({json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),C=Object.freeze({json:[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}]}),_=Object.freeze({json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]}),j=Object.freeze({json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]}),A=Object.freeze({json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),T=Object.freeze({json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),N=Object.freeze({json:[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]}),R=Object.freeze({json:[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}]}),D=Object.freeze({json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]}),I=Object.freeze({json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]}),M=Object.freeze({json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}]}),F=function(){function e(){var e=[x,w,O,k,E,S,C,A,j,_,T,N,R,D,I,M],t=[].concat.apply([],e.map((function(e){return e.json})));this.opMappers=t.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.transformGraph=function(e,t){var n=this;void 0===t&&(t={});var r=[],i=[],a=e.node.reduce((function(e,t){return e[t.name]=n.mapNode(t),t.op.startsWith("Placeholder")&&r.push(e[t.name]),"Const"===t.op&&i.push(e[t.name]),e}),{}),o=[],u=[],s={},c={};null!=t&&(s=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));var l=Object.keys(a);return l.forEach((function(e){var t=a[e];t.inputNames.forEach((function(e){var n=v(e)[0];t.inputs.push(a[n]),a[n].children.push(t)}))})),0===Object.keys(c).length?l.forEach((function(e){var t=a[e];0===t.children.length&&u.push(t)})):Object.keys(c).forEach((function(e){var t=v(e)[0],n=a[t];null!=n&&(n.signatureKey=c[e],u.push(n))})),Object.keys(s).length>0?Object.keys(s).forEach((function(e){var t=v(e)[0],n=a[t];n&&(n.signatureKey=s[e],o.push(n))})):o=r,{nodes:a,inputs:o,outputs:u,weights:i,placeholders:r,signature:t}},e.prototype.mapSignatureEntries=function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})},e.prototype.mapNode=function(e){var t=d(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,i=void 0;switch(n.type){case"string":void 0===(i=z(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=z(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(i=$(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=$(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(i=B(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(i=B(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(i=G(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=G(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(i=L(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=L(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(i=X(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=X(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(i=q(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=q(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(i=K(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=K(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(i=U(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=U(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(i=V(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=V(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+n.type+" for op: "+e.op)}return t[n.name]={value:i,type:r},t}),{})),n},e}();function P(t,n){var r=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){var n=Object(o.Wb)().global;if(void 0!==n.atob)return n.atob(t);if("undefined"!=typeof e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?r:r.toLowerCase()}function z(e,t,n,r){void 0===r&&(r=!1);var i=e[t];return null!=i?P(i.s,r):n}function L(e,t,n){var r=e[t];return r?r.b:n}function B(e,t,n){var r=e[t]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function W(e){switch("string"==typeof e&&(e=r[e]),e){case r.DT_FLOAT:return"float32";case r.DT_INT32:case r.DT_INT64:case r.DT_INT8:case r.DT_UINT8:return"int32";case r.DT_BOOL:return"bool";case r.DT_DOUBLE:return"float32";case r.DT_STRING:return"string";default:return null}}function U(e,t,n){var r=e[t];return r&&r.type?W(r.type):n}function V(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return W(e)})):n}function H(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function q(e,t,n){var r=e[t];return r&&r.shape?H(r.shape):n}function G(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function $(e,t,n,r){void 0===r&&(r=!1);var i=e[t];return i&&i.list&&i.list.s?i.list.s.map((function(e){return P(e,r)})):n}function K(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return H(e)})):n}function X(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Y=function(){function e(e,t,n){var r=this;this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((function(e){return r.getInput(e)})),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((function(e,t){return e[t]=r.getAttr(t),e}),{}))}return e.prototype.getInput=function(e){return m(e,this.tensorMap,this.context)},e.prototype.getAttr=function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return m(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return B(this.node.rawAttrs,e,t);if(null!=n.s)return z(this.node.rawAttrs,e,t);if(null!=n.b)return L(this.node.rawAttrs,e,t);if(null!=n.shape)return q(this.node.rawAttrs,e,t);if(null!=n.type)return U(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return G(this.node.rawAttrs,e,t);if(null!=n.list.s)return $(this.node.rawAttrs,e,t);if(null!=n.list.shape)return K(this.node.rawAttrs,e,t);if(null!=n.list.b)return X(this.node.rawAttrs,e,t);if(null!=n.list.type)return V(this.node.rawAttrs,e,t)}return t},e}(),J=function(){function e(t,n,r,i,a,o,u){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=u,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),e.prototype.clearAndClose=function(){this.tensors.forEach((function(e){return e.tensor.dispose()})),this.tensors=[],this.closed_=!0},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map((function(e){return t.read(e)}))},e.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");n.tensor=t,n.written=!0,this.tensors[e]=n},e.prototype.writeMany=function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach((function(e,r){return n.write(e,t[r])}))},e.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Object(o.gf)([],[0].concat(this.elementShape));var r=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Object(o.We)(r,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return Object(o.gf)([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),Object(o.sb)(r,0)},e.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var n=Math.max.apply(Math,e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(e,Object(o.zf)(t,0))},e.prototype.split=function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var r=0,i=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var a=0===r?0:t.size/r,u=[];Object(o.pf)((function(){t=t.reshape([1,r,a]);for(var s=0;s<e.length;++s){var c=[0,0===s?0:i[s-1],0],l=[1,e[s],a];u[s]=Object(o.Fe)(t,c,l).reshape(n.elementShape)}return u}));for(var s=[],c=0;c<e.length;c++)s[c]=c;this.writeMany(s,u)},e.prototype.assertShapesMatchAllowUndefinedSize=function(e,t,n){void 0===n&&(n=""),o.Af.assert(this.shapesEqualAllowUndefinedSize(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))},e.prototype.shapesEqualAllowUndefinedSize=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(-1!==e[n]&&-1!==t[n]&&e[n]!==t[n])return!1;return!0},e.nextId=0,e}();function Z(e,t,n){var r=function(e,t,n){switch(e.category){case"arithmetic":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[Object(o.J)(h("a",e,t,n),h("b",e,t,n))];case"AddN":return[Object(o.K)(h("tensors",e,t,n))];case"FloorMod":case"Mod":return[Object(o.qd)(h("a",e,t,n),h("b",e,t,n))];case"Mul":return[Object(o.ud)(h("a",e,t,n),h("b",e,t,n))];case"RealDiv":case"Div":return[Object(o.Nb)(h("a",e,t,n),h("b",e,t,n))];case"DivNoNan":return[Object(o.Ob)(h("a",e,t,n),h("b",e,t,n))];case"FloorDiv":return[Object(o.jc)(h("a",e,t,n),h("b",e,t,n))];case"Sub":return[Object(o.af)(h("a",e,t,n),h("b",e,t,n))];case"Minimum":return[Object(o.od)(h("a",e,t,n),h("b",e,t,n))];case"Maximum":return[Object(o.jd)(h("a",e,t,n),h("b",e,t,n))];case"Pow":return[Object(o.Od)(h("a",e,t,n),h("b",e,t,n))];case"SquaredDifference":return[Object(o.Te)(h("a",e,t,n),h("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"basic_math":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[Object(o.G)(h("x",e,t,n))];case"Acos":return[Object(o.H)(h("x",e,t,n))];case"Acosh":return[Object(o.I)(h("x",e,t,n))];case"Asin":return[Object(o.Q)(h("x",e,t,n))];case"Asinh":return[Object(o.R)(h("x",e,t,n))];case"Atan":return[Object(o.S)(h("x",e,t,n))];case"Atan2":return[Object(o.T)(h("x",e,t,n),h("y",e,t,n))];case"Atanh":return[Object(o.U)(h("x",e,t,n))];case"Ceil":return[Object(o.ob)(h("x",e,t,n))];case"Complex":return[Object(o.rb)(h("real",e,t,n),h("imag",e,t,n))];case"Cos":return[Object(o.Cb)(h("x",e,t,n))];case"Cosh":return[Object(o.Db)(h("x",e,t,n))];case"Elu":return[Object(o.Sb)(h("x",e,t,n))];case"Erf":return[Object(o.Zb)(h("x",e,t,n))];case"Exp":return[Object(o.ac)(h("x",e,t,n))];case"Expm1":return[Object(o.cc)(h("x",e,t,n))];case"Floor":return[Object(o.ic)(h("x",e,t,n))];case"Log":return[Object(o.Tc)(h("x",e,t,n))];case"Log1p":return[Object(o.Uc)(h("x",e,t,n))];case"Imag":return[Object(o.Cc)(h("x",e,t,n))];case"Neg":return[Object(o.yd)(h("x",e,t,n))];case"Reciprocal":return[Object(o.be)(h("x",e,t,n))];case"Real":return[Object(o.ae)(h("x",e,t,n))];case"Relu":return[Object(o.fe)(h("x",e,t,n))];case"Round":return[Object(o.pe)(h("x",e,t,n))];case"Selu":return[Object(o.ue)(h("x",e,t,n))];case"Sigmoid":return[Object(o.Ae)(h("x",e,t,n))];case"Sin":return[Object(o.De)(h("x",e,t,n))];case"Sign":return[Object(o.Be)(h("x",e,t,n))];case"Sinh":return[Object(o.Ee)(h("x",e,t,n))];case"Softplus":return[Object(o.Me)(h("x",e,t,n))];case"Sqrt":return[Object(o.Re)(h("x",e,t,n))];case"Square":return[Object(o.Se)(h("x",e,t,n))];case"Tanh":return[Object(o.ff)(h("x",e,t,n))];case"Tan":return[Object(o.ef)(h("x",e,t,n))];case"Relu6":case"ClipByValue":return[Object(o.pb)(h("x",e,t,n),h("clipValueMin",e,t,n),h("clipValueMax",e,t,n))];case"Rsqrt":return[Object(o.qe)(m(e.inputNames[0],t,n))];case"Prod":return[Object(o.Sd)(h("x",e,t,n),h("axes",e,t,n))];case"LeakyRelu":return[Object(o.Lc)(h("x",e,t,n),h("alpha",e,t,n))];case"Prelu":return[Object(o.Qd)(h("x",e,t,n),h("alpha",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"control":return function(e,t,n){return s(void 0,void 0,void 0,(function(){var r,i,a,u,s,l,f,d,p,v,g,y,b,x,w,O,k,E,S,C,_,j,A,T,N,R,D,I,M,F,P,z,L,B,W;return c(this,(function(c){switch(c.label){case 0:switch(e.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[h("pred",e,t,n).clone()]];case 2:return r=h("pred",e,t,n),i=h("data",e,t,n),[4,r.data()];case 3:return[2,c.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(a=e.inputNames.find((function(e){return void 0!==m(e,t,n)})))?[m(a,t,n).clone()]:void 0];case 5:return u=h("frameName",e,t,n),s=h("tensor",e,t,n),n.enterFrame(u),[2,[s.clone()]];case 6:return l=h("tensor",e,t,n),n.exitFrame(),[2,[l.clone()]];case 7:return f=h("tensor",e,t,n),n.nextIteration(),[2,[f.clone()]];case 8:return d=h("size",e,t,n),p=h("dtype",e,t,n),v=h("elementShape",e,t,n),g=h("dynamicSize",e,t,n),y=h("clearAfterRead",e,t,n),b=h("identicalElementShapes",e,t,n),x=h("name",e,t,n),w=new J(x,p,d,v,b,g,y),n.addTensorArray(w),[2,[Object(o.re)(w.id),Object(o.re)(1)]];case 9:return O=h("tensorArrayId",e,t,n),k=h("index",e,t,n),E=h("tensor",e,t,n),n.getTensorArray(O).write(k,E),[2,[Object(o.re)(1)]];case 10:return S=h("tensorArrayId",e,t,n),C=h("index",e,t,n),[2,[n.getTensorArray(S).read(C)]];case 11:return _=h("tensorArrayId",e,t,n),j=h("indices",e,t,n),A=h("dtype",e,t,n),[2,[n.getTensorArray(_).gather(j,A)]];case 12:return T=h("tensorArrayId",e,t,n),N=h("indices",e,t,n),R=h("tensor",e,t,n),n.getTensorArray(T).scatter(N,R),[2,[Object(o.re)(1)]];case 13:return D=h("tensorArrayId",e,t,n),I=n.getTensorArray(D),M=h("dtype",e,t,n),[2,[I.concat(M)]];case 14:return F=h("tensorArrayId",e,t,n),P=h("tensor",e,t,n),z=h("lengths",e,t,n),n.getTensorArray(F).split(z,P),[2,[Object(o.re)(1)]];case 15:return L=h("tensorArrayId",e,t,n),B=n.getTensorArray(L),[2,[Object(o.re)(B.size(),"int32")]];case 16:return W=h("tensorArrayId",e,t,n),n.getTensorArray(W).clearAndClose(),[2,[Object(o.re)(0)]];case 17:throw TypeError("Node type "+e.op+" is not implemented")}}))}))}(e,t,n);case"convolution":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=h("stride",e,t,n),i=h("pad",e,t,n),a=h("dataFormat",e,t,n).toUpperCase(),u=h("dilation",e,t,n);return[Object(o.xb)(h("x",e,t,n),h("filter",e,t,n),r,i,a,u)];case"Conv2D":r=h("strides",e,t,n),i=h("pad",e,t,n),a=h("dataFormat",e,t,n).toUpperCase();var s=h("dilations",e,t,n);return[Object(o.yb)(h("x",e,t,n),h("filter",e,t,n),[r[1],r[2]],i,a,[s[1],s[2]])];case"_FusedConv2D":case"FusedDepthwiseConv2dNative":var c=h("fusedOps",e,t,n),l=c[0],f=c[1],d="biasadd"===l,p="prelu"===f,m="fusedbatchnorm"===l,v=h("numArgs",e,t,n);if(d){if(p&&2!==v)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!p&&1!==v)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(m)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");r=h("strides",e,t,n),i=h("pad",e,t,n),a=h("dataFormat",e,t,n).toUpperCase(),s=h("dilations",e,t,n);var g=h("args",e,t,n),y=g[0],b=g[1];return[("_FusedConv2D"===e.op?o.lc.conv2d:o.lc.depthwiseConv2d)({x:h("x",e,t,n),filter:h("filter",e,t,n),strides:[r[1],r[2]],pad:i,dataFormat:a,dilations:[s[1],s[2]],bias:y,activation:f,preluActivationWeights:b})];case"Conv2DBackpropInput":case"Conv2dTranspose":var x=h("outputShape",e,t,n);return r=h("strides",e,t,n),i=h("pad",e,t,n),[Object(o.zb)(h("x",e,t,n),h("filter",e,t,n),x,[r[1],r[2]],i)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return r=h("strides",e,t,n),i=h("pad",e,t,n),s=h("dilations",e,t,n),a=h("dataFormat",e,t,n).toUpperCase(),[Object(o.Ib)(h("input",e,t,n),h("filter",e,t,n),[r[1],r[2]],i,a,[s[1],s[2]])];case"Conv3D":return r=h("strides",e,t,n),i=h("pad",e,t,n),a=h("dataFormat",e,t,n).toUpperCase(),s=h("dilations",e,t,n),[Object(o.Ab)(h("x",e,t,n),h("filter",e,t,n),[r[1],r[2],r[3]],i,a,[s[1],s[2],s[3]])];case"AvgPool":r=h("strides",e,t,n),i=h("pad",e,t,n);var w=h("kernelSize",e,t,n);return[Object(o.V)(h("x",e,t,n),[w[1],w[2]],[r[1],r[2]],i)];case"MaxPool":return r=h("strides",e,t,n),i=h("pad",e,t,n),w=h("kernelSize",e,t,n),[Object(o.gd)(h("x",e,t,n),[w[1],w[2]],[r[1],r[2]],i)];case"MaxPoolWithArgmax":r=h("strides",e,t,n),i=h("pad",e,t,n),w=h("kernelSize",e,t,n);var O=h("includeBatchInIndex",e,t,n),k=Object(o.id)(h("x",e,t,n),[w[1],w[2]],[r[1],r[2]],i,O);return[k.result,k.indexes];case"AvgPool3D":return r=h("strides",e,t,n),i=h("pad",e,t,n),w=h("kernelSize",e,t,n),[Object(o.W)(h("x",e,t,n),[w[1],w[2],w[3]],[r[1],r[2],r[3]],i)];case"MaxPool3D":return r=h("strides",e,t,n),i=h("pad",e,t,n),w=h("kernelSize",e,t,n),[Object(o.hd)(h("x",e,t,n),[w[1],w[2],w[3]],[r[1],r[2],r[3]],i)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"creation":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"Fill":var r=h("shape",e,t,n),i=h("dtype",e,t,n),a=h("value",e,t,n);return[Object(o.fc)(r,a,i)];case"LinSpace":var u=h("start",e,t,n),s=h("stop",e,t,n),c=h("num",e,t,n);return[Object(o.Rc)(u,s,c)];case"Multinomial":var l=h("logits",e,t,n),f=h("numSamples",e,t,n),d=h("seed",e,t,n);return[Object(o.xd)(l,f,d)];case"OneHot":var p=h("indices",e,t,n),m=h("depth",e,t,n),v=h("onValue",e,t,n),g=h("offValue",e,t,n);return[Object(o.Dd)(p,m,v,g)];case"Ones":return[Object(o.Ed)(h("shape",e,t,n),h("dtype",e,t,n))];case"OnesLike":return[Object(o.Fd)(h("x",e,t,n))];case"RandomUniform":return[Object(o.Xd)(h("shape",e,t,n),h("minval",e,t,n),h("maxval",e,t,n),h("dtype",e,t,n))];case"Range":u=h("start",e,t,n);var y=h("stop",e,t,n),b=h("step",e,t,n);return[Object(o.Yd)(u,y,b,h("dtype",e,t,n))];case"TruncatedNormal":r=h("shape",e,t,n);var x=h("mean",e,t,n),w=h("stdDev",e,t,n);return d=h("seed",e,t,n),[Object(o.vf)(r,x,w,h("dtype",e,t,n),d)];case"Zeros":return[Object(o.Jf)(h("shape",e,t,n),h("dtype",e,t,n))];case"ZerosLike":return[Object(o.Kf)(h("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"dynamic":return function(e,t,n){return s(void 0,void 0,void 0,(function(){var r,i,a,u,s,l,f,d;return c(this,(function(c){switch(c.label){case 0:switch(e.op){case"NonMaxSuppressionV5":case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,5];case"ListDiff":return[3,7]}return[3,8];case 1:return r=h("boxes",e,t,n),i=h("scores",e,t,n),a=h("maxOutputSize",e,t,n),u=h("iouThreshold",e,t,n),s=h("scoreThreshold",e,t,n),"NonMaxSuppressionV5"!==e.op?[3,3]:(l=h("softNmsSigma",e,t,n),[4,o.Dc.nonMaxSuppressionWithScoreAsync(r,i,a,u,s,l)]);case 2:return[2,[(d=c.sent()).selectedIndices,d.selectedScores]];case 3:return[4,o.Dc.nonMaxSuppressionAsync(r,i,a,u,s)];case 4:return[2,[c.sent()]];case 5:return f=h("condition",e,t,n).asType("bool"),[4,Object(o.If)(f)];case 6:return d=[c.sent()],f.dispose(),[2,d];case 7:return[2,Object(o.ze)(h("x",e,t,n),h("y",e,t,n))];case 8:throw TypeError("Node type "+e.op+" is not implemented")}}))}))}(e,t,n);case"evaluation":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=h("x",e,t,n),i=h("k",e,t,n),a=h("sorted",e,t,n),u=Object(o.sf)(r,i,a);return[u.values,u.indices];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"image":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=h("images",e,t,n),i=h("size",e,t,n),a=h("alignCorners",e,t,n);return[o.Dc.resizeBilinear(r,[i[0],i[1]],a)];case"ResizeNearestNeighbor":return r=h("images",e,t,n),i=h("size",e,t,n),a=h("alignCorners",e,t,n),[o.Dc.resizeNearestNeighbor(r,[i[0],i[1]],a)];case"CropAndResize":var u=h("image",e,t,n),s=h("boxes",e,t,n),c=h("boxInd",e,t,n),l=h("cropSize",e,t,n),f=h("method",e,t,n),d=h("extrapolationValue",e,t,n);return[o.Dc.cropAndResize(u,s,c,l,f,d)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"graph":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=h("default",e,t,n);return[m(e.name,t,n)||r];case"Placeholder":return[m(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[h("x",e,t,n).clone()];case"IdentityN":return h("x",e,t,n).map((function(e){return e.clone()}));case"Snapshot":return[h("x",e,t,n).clone()];case"Shape":return[Object(o.hf)(h("x",e,t,n).shape,"int32")];case"ShapeN":return h("x",e,t,n).map((function(e){return Object(o.hf)(e.shape)}));case"Size":return[Object(o.re)(h("x",e,t,n).size,"int32")];case"Rank":return[Object(o.re)(h("x",e,t,n).rank,"int32")];case"NoOp":return[Object(o.re)(1)];case"Print":var i=h("x",e,t,n),a=h("data",e,t,n),u=h("message",e,t,n),s=h("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(var c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,s));return[i];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"logical":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"Equal":return[Object(o.Xb)(h("a",e,t,n),h("b",e,t,n))];case"NotEqual":return[Object(o.Bd)(h("a",e,t,n),h("b",e,t,n))];case"Greater":return[Object(o.vc)(h("a",e,t,n),h("b",e,t,n))];case"GreaterEqual":return[Object(o.wc)(h("a",e,t,n),h("b",e,t,n))];case"Less":return[Object(o.Mc)(h("a",e,t,n),h("b",e,t,n))];case"LessEqual":return[Object(o.Nc)(h("a",e,t,n),h("b",e,t,n))];case"LogicalAnd":return[Object(o.Yc)(h("a",e,t,n),h("b",e,t,n))];case"LogicalNot":return[Object(o.Zc)(h("a",e,t,n))];case"LogicalOr":return[Object(o.ad)(h("a",e,t,n),h("b",e,t,n))];case"Select":return[Object(o.Hf)(h("condition",e,t,n),h("a",e,t,n),h("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"matrices":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Object(o.dd)(h("a",e,t,n),h("b",e,t,n),h("transposeA",e,t,n),h("transposeB",e,t,n))];case"Transpose":return[Object(o.uf)(h("x",e,t,n),h("perm",e,t,n))];case"_FusedMatMul":var r=h("fusedOps",e,t,n),i=r[0],a=r[1],u="biasadd"===i,s="prelu"===a,c=h("numArgs",e,t,n);if(u){if(s&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=h("args",e,t,n),f=l[0],d=l[1];return[o.lc.matMul({a:h("a",e,t,n),b:h("b",e,t,n),transposeA:h("transposeA",e,t,n),transposeB:h("transposeB",e,t,n),bias:f,activation:a,preluActivationWeights:d})];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"normalization":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Object(o.ab)(h("x",e,t,n),h("mean",e,t,n),h("variance",e,t,n),h("offset",e,t,n),h("scale",e,t,n),h("epsilon",e,t,n))];case"LRN":return[Object(o.Sc)(h("x",e,t,n),h("radius",e,t,n),h("bias",e,t,n),h("alpha",e,t,n),h("beta",e,t,n))];case"Softmax":return[Object(o.Le)(h("x",e,t,n))];case"LogSoftmax":return[Object(o.Wc)(h("x",e,t,n))];case"SparseToDense":return[Object(o.Oe)(h("sparseIndices",e,t,n),h("outputShape",e,t,n),h("sparseValues",e,t,n),h("defaultValue",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"reduction":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"Max":var r=h("axis",e,t,n),i=h("keepDims",e,t,n);return[Object(o.fd)(h("x",e,t,n),r,i)];case"Mean":return r=h("axis",e,t,n),i=h("keepDims",e,t,n),[Object(o.ld)(h("x",e,t,n),r,i)];case"Min":return r=h("axis",e,t,n),i=h("keepDims",e,t,n),[Object(o.nd)(h("x",e,t,n),r,i)];case"Sum":return r=h("axis",e,t,n),i=h("keepDims",e,t,n),[Object(o.cf)(h("x",e,t,n),r,i)];case"All":return r=h("axis",e,t,n),i=h("keepDims",e,t,n),[Object(o.M)(h("x",e,t,n),r,i)];case"Any":return r=h("axis",e,t,n),i=h("keepDims",e,t,n),[Object(o.N)(h("x",e,t,n),r,i)];case"ArgMax":return r=h("axis",e,t,n),[Object(o.O)(h("x",e,t,n),r)];case"ArgMin":return r=h("axis",e,t,n),[Object(o.P)(h("x",e,t,n),r)];case"Prod":return r=h("axis",e,t,n),i=h("keepDims",e,t,n),[Object(o.Sd)(h("x",e,t,n),r,i)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"slice_join":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=h("n",e,t,n),i=h("axis",e,t,n),a=h("tensors",e,t,n);return a=a.slice(0,r),[Object(o.sb)(a,i)];case"GatherV2":case"Gather":i=h("axis",e,t,n);var u=h("x",e,t,n),s=h("indices",e,t,n);return[Object(o.mc)(u,s.asType("int32"),i)];case"ReverseV2":case"Reverse":return i=h("axis",e,t,n),u=h("x",e,t,n),[Object(o.je)(u,i)];case"Slice":var c=h("begin",e,t,n),l=h("size",e,t,n);return[Object(o.Fe)(h("x",e,t,n),c,l)];case"StridedSlice":c=h("begin",e,t,n);var f=h("end",e,t,n),d=h("strides",e,t,n),p=h("beginMask",e,t,n),m=h("endMask",e,t,n),v=h("ellipsisMask",e,t,n),g=h("newAxisMask",e,t,n),y=h("shrinkAxisMask",e,t,n),b=h("x",e,t,n);if(1===c.length&&b.shape.length>1)for(var x=1;x<b.shape.length;x++)c.push(0),f.push(b.shape[x]),d.push(d[0]);return[Object(o.Ze)(b,c,f,d,p,m,v,g,y)];case"Pack":return Object(o.pf)((function(){var r=h("axis",e,t,n),i=h("tensors",e,t,n),a=i[0].shape,u=i[0].squeeze().shape,s=i.map((function(e){var t=o.Af.arraysEqual(e.shape,a);if(!t&&!o.Af.arraysEqual(e.squeeze().shape,u))throw new Error("the input tensors shape does not match");return t?e:e.reshape(a)}));return[Object(o.We)(s,r)]}));case"Unpack":return Object(o.pf)((function(){var r=h("axis",e,t,n),i=h("tensor",e,t,n);return Object(o.zf)(i,r)}));case"Tile":var w=h("reps",e,t,n);return[Object(o.qf)(h("x",e,t,n),w)];case"Split":case"SplitV":i=h("axis",e,t,n);var O=h("numOrSizeSplits",e,t,n);return Object(o.Qe)(h("x",e,t,n),O,i);case"ScatterNd":s=h("indices",e,t,n);var k=h("values",e,t,n),E=h("shape",e,t,n);return[Object(o.se)(s,k,E)];case"GatherNd":var S=h("x",e,t,n);return s=h("indices",e,t,n),[Object(o.nc)(S,s)];case"SparseToDense":s=h("sparseIndices",e,t,n),E=h("outputShape",e,t,n);var C=h("sparseValues",e,t,n),_=h("defaultValue",e,t,n);return[Object(o.Oe)(s,C,E,C.dtype===_.dtype?_:_.asType(C.dtype))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"spectral":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"FFT":return[Object(o.ec)(h("x",e,t,n))];case"IFFT":return[Object(o.Bc)(h("x",e,t,n))];case"RFFT":return[Object(o.oe)(h("x",e,t,n))];case"IRFFT":return[Object(o.Gc)(h("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"transformation":return Object(o.pf)((function(){return function(e,t,n){switch(e.op){case"Cast":return[Object(o.nb)(h("x",e,t,n),h("dtype",e,t,n))];case"ExpandDims":var r=h("axis",e,t,n);return[Object(o.bc)(h("x",e,t,n),r)];case"Squeeze":return r=h("axis",e,t,n),[Object(o.Ve)(h("x",e,t,n),r)];case"Reshape":return[Object(o.ie)(h("x",e,t,n),h("shape",e,t,n))];case"PadV2":case"Pad":return[Object(o.Id)(h("x",e,t,n),b(h("padding",e,t,n),2),h("constantValue",e,t,n))];case"SpaceToBatchND":var i=h("blockShape",e,t,n),a=b(h("paddings",e,t,n),2);return[Object(o.Ne)(h("x",e,t,n),i,a)];case"BatchToSpaceND":i=h("blockShape",e,t,n);var u=b(h("crops",e,t,n),2);return[Object(o.ib)(h("x",e,t,n),i,u)];case"DepthToSpace":var s=h("blockSize",e,t,n),c=h("dataFormat",e,t,n).toUpperCase();return[Object(o.Hb)(h("x",e,t,n),s,c)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"custom":var r=d(e.op);if(r&&r.customExecutor)return r.customExecutor(new Y(e,t,n));throw TypeError("Custom op "+e.op+" is not registered.");default:throw TypeError("Unknown op '"+e.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return r instanceof Promise?r.then((function(e){return[].concat(e)})):[].concat(r)}var Q=function(){function e(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId})).join("/"):""},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e}();function ee(e,t,n){for(var r=new Set,i=[],a=null,o=null,u=new Set,s=Object.keys(e).map((function(e){return y(e)[0]})),c=t.slice();c.length>0;){var l=c.pop();(re(l)||ie(l))&&null==a&&(o=(a=l).children.map((function(e){return e.name})).filter((function(e){return r.has(e)}))),r.add(l.name),null==n[l.name]&&-1===s.indexOf(l.name)&&(0!==l.inputs.length?l.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),c.push(e))})):i.push(l.name))}return{inputs:e,outputs:t,usedNodes:r,missingInputs:i,dynamicNode:a,syncInputs:o}}var te=["Switch","Merge","Enter","Exit","NextIteration"],ne=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function re(e){return te.indexOf(e.op)>=0}function ie(e){return ne.indexOf(e.op)>=0}var ae=function(){function e(e){this.graph=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._outputs=e.outputs,this._inputs=e.inputs,this._signature=e.signature}return Object.defineProperty(e.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this._outputs.map((function(e){return e.signatureKey||e.name}))},enumerable:!0,configurable:!0}),e.prototype.getCompilationKey=function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)},e.prototype.compile=function(e,t){var n=ee(e,t,this.weightMap),r=n.missingInputs,i=n.dynamicNode,a=n.syncInputs;if(null!=i)throw new Error("This execution contains the node '"+i.name+"', which has the dynamic op '"+i.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+a+"]");if(r.length>0){var o=t.map((function(e){return e.name})),u=Object.keys(e);throw new Error("Cannot compute the outputs ["+o+"] from the provided inputs ["+u+"]. Missing the following inputs: ["+r+"]")}return function(e,t,n){var r=n.usedNodes,i=n.inputs,a=[];Object.keys(i).map((function(e){return y(e)[0]})).map((function(t){return e.nodes[t]})).forEach((function(e){r.has(e.name)&&a.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&a.push(e)}));for(var o=new Set,u=[];a.length>0;){var s=a.pop();o.add(s.name),t[s.name]||u.push(s),s.children.forEach((function(e){!o.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return o.has(e.name)}))&&a.push(e)}))}return u}(this.graph,this.weightMap,n)},e.prototype.execute=function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var i=r.map((function(e){return n.graph.nodes[y(e)[0]]})),a=t.map((function(e){return n.graph.nodes[y(e)[0]]})),s=this.getCompilationKey(i,a),c=this.compiledMap.get(s);null==c&&(c=this.compile(e,a),this.compiledMap.set(s,c));var l={};return Object(o.pf)((function(){var r=new Q(n._weightMap,l),i=u({},n.weightMap);Object.keys(e).forEach((function(t){var n=y(t),r=n[0],a=[];a[n[1]]=e[t],i[r]=a}));for(var a=n.getFrozenTensorIds(i),o={},s=0;s<c.length;s++){var f=c[s];if(!i[f.name]){var d=Z(f,i,r);if(d instanceof Promise)throw new Error("The execution of the op '"+f.op+"' returned a promise. Please use model.executeAsync() instead.");i[f.name]=d,n.checkTensorForDisposal(f.name,f,i,r,a,t,o)}}return t.map((function(e){return m(e,i,r)}))}))},e.prototype.getFrozenTensorIds=function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)},e.prototype.checkTensorForDisposal=function(e,t,n,r,i,a,o){"control"!==t.category&&-1===a.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[g(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!i.has(e.id)){var t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}))}})))},e.prototype.executeAsync=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,a,o,u,s=this;return c(this,(function(c){switch(c.label){case 0:return e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t),n={},r=new Q(this._weightMap,n),[4,this.executeWithControlFlow(e,r,t)];case 1:return i=c.sent(),a=t.map((function(e){return m(e,i,r)})),o=new Set(a.map((function(e){return e.id}))),u=new Set(Object.keys(e).map((function(t){return e[t].id}))),Object.keys(i).forEach((function(e){i[e].forEach((function(e){!e||e.isDisposed||o.has(e.id)||u.has(e.id)||-1!==s.weightIds.indexOf(e.id)||e.dispose()}))})),[2,a]}}))}))},e.prototype.executeWithControlFlow=function(e,t,n){return s(this,void 0,void 0,(function(){var r,i,a,o,s,l,f,d,p,h,v,g,b,x,w,O,k=this;return c(this,(function(c){switch(c.label){case 0:r=Object.keys(e),i=r.map((function(e){return k.graph.nodes[y(e)[0]]})),a=n.map((function(e){return k.graph.nodes[y(e)[0]]})),o=ee(e,a,this.weightMap),s=o.usedNodes,l=o.missingInputs,f=o.dynamicNode,d=o.syncInputs,p=i.concat(this.graph.weights).map((function(e){return{node:e,contexts:t.currentContext}})),h=u({},this.weightMap),Object.keys(e).forEach((function(t){var n=y(t),r=n[0],i=[];i[n[1]]=e[t],h[r]=i})),v={},g=this.getFrozenTensorIds(h),b={},c.label=1;case 1:return p.length>0?(x=this.processStack(i,p,t,h,b,g,n,v,s),[4,Promise.all(x)]):[3,3];case 2:return c.sent(),[3,1];case 3:if(null==f&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(w=a.filter((function(e){return!re(e)&&!m(e.name,h,t)})).map((function(e){return e.name}))).length>0)throw O="",null!=f&&(O="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+d+"]"),new Error("Cannot compute the outputs ["+w+"] from the provided inputs ["+r+"]. Consider providing the following inputs: ["+l+"]. "+O);return[2,h]}}))}))},e.prototype.processStack=function(e,t,n,r,i,a,o,u,s){for(var c=this,l=[],f=function(){var f=t.pop();n.currentContext=f.contexts;var p="";if("Enter"===f.node.op&&h("isConstant",f.node,r,n)&&(p=v(f.node.name,n)[0]),-1===e.indexOf(f.node)){var m=Z(f.node,r,n);p||(p=v(f.node.name,n)[0]);var g=n.currentContext;m instanceof Promise?l.push(m.then((function(e){return r[p]=e,n.currentContext=g,c.checkTensorForDisposal(p,f.node,r,n,a,o,u),c.processChildNodes(f.node,t,n,r,i,s),e}))):(r[p]=m,d.checkTensorForDisposal(p,f.node,r,n,a,o,u),d.processChildNodes(f.node,t,n,r,i,s))}else d.processChildNodes(f.node,t,n,r,i,s)},d=this;t.length>0;)f();return l},e.prototype.processChildNodes=function(e,t,n,r,i,a){e.children.forEach((function(e){var o=v(e.name,n)[0];!i[o]&&a.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!m(e,r,n)}))&&(i[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!m(e,r,n)}))&&(i[o]=!0,t.push({contexts:n.currentContext,node:e})))}))},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))},e.prototype.checkInputShapeAndType=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],i=y(n)[0],a=t.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){var u=a.attrParams.shape.value,s=u.length===r.shape.length&&r.shape.every((function(e,t){return-1===u[t]||u[t]===e}));o.Af.assert(s,(function(){return"The shape of dict['"+a.name+"'] provided in model.execute(dict) must be ["+u+"], but was ["+r.shape+"]"}))}a.attrParams.dtype&&a.attrParams.dtype.value&&o.Af.assert(r.dtype===a.attrParams.dtype.value,(function(){return"The dtype of dict['"+a.name+"'] provided in model.execute(dict) must be "+a.attrParams.dtype.value+", but was "+r.dtype}))}))},e.prototype.mapInputs=function(e){var t={};for(var n in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?t[this._signature.inputs[n].name]=e[n]:t[n]=e[n];return t},e.prototype.checkInputs=function(e){var t=this,n=Object.keys(e).filter((function(e){var n=y(e)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+n+"] that are not part of graph")},e.prototype.mapOutputs=function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})},e.prototype.checkOutputs=function(e){var t=this;e.forEach((function(e){var n=y(e)[0];if(!t.graph.nodes[n])throw new Error("The output '"+e+"' is not found in the graph")}))},e}(),oe=function(){function e(e,t){void 0===t&&(t={}),this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={})}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=o.Fc.browserHTTPRequest(e,this.loadOptions);else{var t=o.Fc.getLoadHandlers(e,this.loadOptions.onProgress);if(0===t.length)t.push(o.Fc.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},e.prototype.load=function(){return s(this,void 0,void 0,(function(){var e,t,n,r;return c(this,(function(i){switch(i.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return e=this,[4,this.handler.load()];case 1:return e.artifacts=i.sent(),t=this.artifacts.modelTopology,n={},null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=t.versions.producer+"."+t.versions.minConsumer,r=o.Fc.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs),this.executor=new ae(F.Instance.transformGraph(t,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}}))}))},e.prototype.save=function(e,t){return s(this,void 0,void 0,(function(){var t;return c(this,(function(n){if("string"==typeof e){if(0===(t=o.Fc.getSaveHandlers(e)).length)throw new Error("Cannot find any save handlers for URL '"+e+"'");if(t.length>1)throw new Error("Found more than one ("+t.length+") save handlers for URL '"+e+"'");e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[2,e.save(this.artifacts)]}))}))},e.prototype.predict=function(e,t){return this.execute(e,this.outputNodes)},e.prototype.normalizeInputs=function(e){if(!(e instanceof o.B||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})},e.prototype.normalizeOutputs=function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]},e.prototype.execute=function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]},e.prototype.executeAsync=function(e,t){return s(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return e=this.normalizeInputs(e),t=this.normalizeOutputs(t),[4,this.executor.executeAsync(e,t)];case 1:return[2,(n=r.sent()).length>1?n:n[0]]}}))}))},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})},e.prototype.dispose=function(){this.executor.dispose()},e}();function ue(e,t){return void 0===t&&(t={}),s(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e+="model.json?tfjs-format=file"),[4,(n=new oe(e,t)).load()];case 1:return r.sent(),[2,n]}}))}))}var se="1.7.2"}).call(this,n(116).Buffer)},function(e,t,n){"use strict";var r=n(15),i=n(5),a=n(331),o=n(56),u=n(3);function s(e,t,n){var i;return Object(u.a)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)({paddingLeft:t(2),paddingRight:t(2)},n,Object(r.a)({},e.up("sm"),Object(u.a)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(i={minHeight:56},Object(r.a)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(r.a)(i,e.up("sm"),{minHeight:64}),i)},n)}var c=n(81),l=n(98),f=n(99),d=n(100),p=n(101),h=n(102),m=n(103),v=n(104),g=n(13),y={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.a.white,default:l.a[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:c.a.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:l.a[800],default:"#303030"},action:{active:c.a.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function x(e,t,n,r){e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Object(g.i)(e.main,r):"dark"===t&&(e.dark=Object(g.a)(e.main,1.5*r)))}function w(e){var t=e.primary,n=void 0===t?{light:f.a[300],main:f.a[500],dark:f.a[700]}:t,r=e.secondary,o=void 0===r?{light:d.a.A200,main:d.a.A400,dark:d.a.A700}:r,s=e.error,w=void 0===s?{light:p.a[300],main:p.a[500],dark:p.a[700]}:s,O=e.warning,k=void 0===O?{light:h.a[300],main:h.a[500],dark:h.a[700]}:O,E=e.info,S=void 0===E?{light:m.a[300],main:m.a[500],dark:m.a[700]}:E,C=e.success,_=void 0===C?{light:v.a[300],main:v.a[500],dark:v.a[700]}:C,j=e.type,A=void 0===j?"light":j,T=e.contrastThreshold,N=void 0===T?3:T,R=e.tonalOffset,D=void 0===R?.2:R,I=Object(i.a)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function M(e){return Object(g.e)(e,b.text.primary)>=N?b.text.primary:y.text.primary}var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Object(u.a)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(["Material-UI: the color provided to augmentColor(color) is invalid.","The color object needs to have a `main` property or a `".concat(t,"` property.")].join("\n"));if("string"!==typeof e.main)throw new Error(["Material-UI: the color provided to augmentColor(color) is invalid.","`color.main` should be a string, but `".concat(JSON.stringify(e.main),"` was provided instead."),"","Did you intend to use one of the following approaches?","",'import {\xa0green } from "@material-ui/core/colors";',"","const theme1 = createMuiTheme({ palette: {","  primary: green,","} });","","const theme2 = createMuiTheme({ palette: {","  primary: { main: green[500] },","} });"].join("\n"));return x(e,"light",n,D),x(e,"dark",r,D),e.contrastText||(e.contrastText=M(e.main)),e},P={dark:b,light:y};return Object(a.a)(Object(u.a)({common:c.a,type:A,primary:F(n),secondary:F(o,"A400","A200","A700"),error:F(w),warning:F(k),info:F(S),success:F(_),grey:l.a,contrastThreshold:N,getContrastText:M,augmentColor:F,tonalOffset:D},P[A]),I)}function O(e){return Math.round(1e5*e)/1e5}var k={textTransform:"uppercase"};function E(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,o=void 0===r?'"Roboto", "Helvetica", "Arial", sans-serif':r,s=n.fontSize,c=void 0===s?14:s,l=n.fontWeightLight,f=void 0===l?300:l,d=n.fontWeightRegular,p=void 0===d?400:d,h=n.fontWeightMedium,m=void 0===h?500:h,v=n.fontWeightBold,g=void 0===v?700:v,y=n.htmlFontSize,b=void 0===y?16:y,x=n.allVariants,w=n.pxToRem,E=Object(i.a)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var S=c/14,C=w||function(e){return"".concat(e/b*S,"rem")},_=function(e,t,n,r,i){return Object(u.a)({fontFamily:o,fontWeight:e,fontSize:C(t),lineHeight:n},'"Roboto", "Helvetica", "Arial", sans-serif'===o?{letterSpacing:"".concat(O(r/t),"em")}:{},{},i,{},x)},j={h1:_(f,96,1.167,-1.5),h2:_(f,60,1.2,-.5),h3:_(p,48,1.167,0),h4:_(p,34,1.235,.25),h5:_(p,24,1.334,0),h6:_(m,20,1.6,.15),subtitle1:_(p,16,1.75,.15),subtitle2:_(m,14,1.57,.1),body1:_(p,16,1.5,.15),body2:_(p,14,1.43,.15),button:_(m,14,1.75,.4,k),caption:_(p,12,1.66,.4),overline:_(p,12,2.66,1,k)};return Object(a.a)(Object(u.a)({htmlFontSize:b,pxToRem:C,round:O,fontFamily:o,fontSize:c,fontWeightLight:f,fontWeightRegular:p,fontWeightMedium:m,fontWeightBold:g},j),E,{clone:!1})}function S(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var C=["none",S(0,2,1,-1,0,1,1,0,0,1,3,0),S(0,3,1,-2,0,2,2,0,0,1,5,0),S(0,3,3,-2,0,3,4,0,0,1,8,0),S(0,2,4,-1,0,4,5,0,0,1,10,0),S(0,3,5,-1,0,5,8,0,0,1,14,0),S(0,3,5,-1,0,6,10,0,0,1,18,0),S(0,4,5,-2,0,7,10,1,0,2,16,1),S(0,5,5,-3,0,8,10,1,0,3,14,2),S(0,5,6,-3,0,9,12,1,0,3,16,2),S(0,6,6,-3,0,10,14,1,0,4,18,3),S(0,6,7,-4,0,11,15,1,0,4,20,3),S(0,7,8,-4,0,12,17,2,0,5,22,4),S(0,7,8,-4,0,13,19,2,0,5,24,4),S(0,7,9,-4,0,14,21,2,0,5,26,4),S(0,8,9,-5,0,15,22,2,0,6,28,5),S(0,8,10,-5,0,16,24,2,0,6,30,5),S(0,8,11,-5,0,17,26,2,0,6,32,5),S(0,9,11,-5,0,18,28,2,0,7,34,6),S(0,9,12,-6,0,19,29,2,0,7,36,6),S(0,10,13,-6,0,20,31,3,0,8,38,7),S(0,10,13,-6,0,21,33,3,0,8,40,7),S(0,10,14,-6,0,22,35,3,0,8,42,7),S(0,11,14,-7,0,23,36,3,0,9,44,8),S(0,11,15,-7,0,24,38,3,0,9,46,8)],_={borderRadius:4},j=n(475);function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Object(j.a)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var T=n(26),N=n(169);t.a=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,u=void 0===r?{}:r,c=e.palette,l=void 0===c?{}:c,f=e.spacing,d=e.typography,p=void 0===d?{}:d,h=Object(i.a)(e,["breakpoints","mixins","palette","spacing","typography"]),m=w(l),v=Object(o.a)(n),g=A(f),y=Object(a.a)({breakpoints:v,direction:"ltr",mixins:s(v,g,u),overrides:{},palette:m,props:{},shadows:C,typography:E(m,p),spacing:g,shape:_,transitions:T.a,zIndex:N.a},h),b=arguments.length,x=new Array(b>1?b-1:0),O=1;O<b;O++)x[O-1]=arguments[O];return y=x.reduce((function(e,t){return Object(a.a)(e,t)}),y)}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=n.n(a),u=n(4),s=(n(8),n(43)),c=n.n(s),l=n(454);function f(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}var d=n(59);t.a=function(e){var t=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.name,s=Object(i.a)(n,["name"]);var d,p=a,h="function"===typeof t?function(e){return{root:function(n){return t(Object(r.a)({theme:e},n))}}}:{root:t},m=Object(l.a)(h,Object(r.a)({Component:e,name:a||e.displayName,classNamePrefix:p},s));t.filterProps&&(d=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var v=o.a.forwardRef((function(t,n){var a=t.children,s=t.className,c=t.clone,l=t.component,p=Object(i.a)(t,["children","className","clone","component"]),h=m(t),v=Object(u.a)(h.root,s),g=p;if(d&&(g=f(g,d)),c)return o.a.cloneElement(a,Object(r.a)({className:Object(u.a)(a.props.className,v)},g));if("function"===typeof a)return a(Object(r.a)({className:v},g));var y=l||e;return o.a.createElement(y,Object(r.a)({ref:n,className:v},g),a)}));return c()(v,e),v}}(e);return function(e,n){return t(e,Object(r.a)({defaultTheme:d.a},n))}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(0),i=n.n(r).a.createContext(null);t.a=i},function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,i=/^ms-/,a={};function o(e){return"-"+e.toLowerCase()}t.default=function(e){if(a.hasOwnProperty(e))return a[e];var t=e.replace(r,o);return a[e]=i.test(t)?"-"+t:t}},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for;t.a=r?Symbol.for("mui.nested"):"__THEME_NESTED__"},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(23),n(3);var r=n(64),i=(n(8),n(72),{xs:0,sm:600,md:960,lg:1280,xl:1920}),a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(i[e],"px)")}};function o(e,t,n){if(Array.isArray(t)){var i=e.theme.breakpoints||a;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===Object(r.a)(t)){var o=e.theme.breakpoints||a;return Object.keys(t).reduce((function(e,r){return e[o.up(r)]=n(t[r]),e}),{})}return n(t)}},function(e,t,n){"use strict";t.a={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(7),s=a.forwardRef((function(e,t){var n=e.classes,u=e.className,s=e.component,c=void 0===s?"div":s,l=e.square,f=void 0!==l&&l,d=e.elevation,p=void 0===d?1:d,h=e.variant,m=void 0===h?"elevation":h,v=Object(r.a)(e,["classes","className","component","square","elevation","variant"]);return a.createElement(c,Object(i.a)({className:Object(o.a)(n.root,u,"outlined"===m?n.outlined:n["elevation".concat(p)],!f&&n.rounded),ref:t},v))}));t.a=Object(u.a)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Object(i.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(s)},function(e,t,n){"use strict";function r(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(1);function i(t,n){var i,a=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(t)||(i=t,"function"===typeof e&&Object(r.D)(e.isBuffer)&&e.isBuffer(i))?a(JSON.parse(t)):function(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(a(t))}i.responseType="json"}).call(this,n(116).Buffer)},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(0),i=r.createContext();t.a=i},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(12),c=a.forwardRef((function(e,t){var n=e.children,u=e.classes,c=e.className,l=e.color,f=void 0===l?"inherit":l,d=e.component,p=void 0===d?"svg":d,h=e.fontSize,m=void 0===h?"default":h,v=e.htmlColor,g=e.titleAccess,y=e.viewBox,b=void 0===y?"0 0 24 24":y,x=Object(i.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return a.createElement(p,Object(r.a)({className:Object(o.a)(u.root,c,"inherit"!==f&&u["color".concat(Object(s.a)(f))],"default"!==m&&u["fontSize".concat(Object(s.a)(m))]),focusable:"false",viewBox:b,color:v,"aria-hidden":g?void 0:"true",role:g?"img":void 0,ref:t},x),n,g?a.createElement("title",null,g):null)}));c.muiName="SvgIcon",t.a=Object(u.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(228)),u=n(19),s=n(28),c=n(16);function l(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var f={entering:{opacity:1,transform:l(1)},entered:{opacity:1,transform:"none"}},d=a.forwardRef((function(e,t){var n=e.children,d=e.in,p=e.onEnter,h=e.onExit,m=e.style,v=e.timeout,g=void 0===v?"auto":v,y=Object(i.a)(e,["children","in","onEnter","onExit","style","timeout"]),b=a.useRef(),x=a.useRef(),w=Object(c.a)(n.ref,t),O=Object(u.a)();return a.useEffect((function(){return function(){clearTimeout(b.current)}}),[]),a.createElement(o.a,Object(r.a)({appear:!0,in:d,onEnter:function(e,t){Object(s.b)(e);var n,r=Object(s.a)({style:m,timeout:g},{mode:"enter"}),i=r.duration,a=r.delay;"auto"===g?(n=O.transitions.getAutoHeightDuration(e.clientHeight),x.current=n):n=i,e.style.transition=[O.transitions.create("opacity",{duration:n,delay:a}),O.transitions.create("transform",{duration:.666*n,delay:a})].join(","),p&&p(e,t)},onExit:function(e){var t,n=Object(s.a)({style:m,timeout:g},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===g?(t=O.transitions.getAutoHeightDuration(e.clientHeight),x.current=t):t=r,e.style.transition=[O.transitions.create("opacity",{duration:t,delay:i}),O.transitions.create("transform",{duration:.666*t,delay:i||.333*t})].join(","),e.style.opacity="0",e.style.transform=l(.75),h&&h(e)},addEndListener:function(e,t){"auto"===g&&(b.current=setTimeout(t,x.current||0))},timeout:"auto"===g?null:g},y),(function(e,t){return a.cloneElement(n,Object(r.a)({style:Object(r.a)({opacity:0,transform:l(.75),visibility:"exited"!==e||d?void 0:"hidden"},f[e],{},m,{},n.props.style),ref:w},t))}))}));d.muiSupportAuto=!0,t.a=d},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(333),s=n(7),c=a.forwardRef((function(e,t){var n=e.disableUnderline,s=e.classes,c=e.fullWidth,l=void 0!==c&&c,f=e.inputComponent,d=void 0===f?"input":f,p=e.multiline,h=void 0!==p&&p,m=e.type,v=void 0===m?"text":m,g=Object(i.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return a.createElement(u.a,Object(r.a)({classes:Object(r.a)({},s,{root:Object(o.a)(s.root,!n&&s.underline),underline:null}),fullWidth:l,inputComponent:d,multiline:h,ref:t,type:v},g))}));c.muiName="Input",t.a=Object(s.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(c)},function(e,t,n){"use strict";var r=n(0),i=n(22);t.a=Object(i.a)(r.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown")},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(12),s=a.forwardRef((function(e,t){var n=e.classes,s=e.className,c=e.disabled,l=e.IconComponent,f=e.inputRef,d=e.variant,p=void 0===d?"standard":d,h=Object(i.a)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return a.createElement(a.Fragment,null,a.createElement("select",Object(r.a)({className:Object(o.a)(n.root,n.select,n[p],s,c&&n.disabled),disabled:c,ref:f||t},h)),e.multiple?null:a.createElement(l,{className:Object(o.a)(n.icon,n["icon".concat(Object(u.a)(p))],c&&n.disabled)}))}));t.a=s},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(53))},function(e,t,n){"use strict";(function(e){var r=n(29),i=n(326),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,u=o&&o.exports===a?r.a.Buffer:void 0,s=(u?u.isBuffer:void 0)||i.a;t.a=s}).call(this,n(215)(e))},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=n(20),u=(n(8),n(184)),s=n(332),c=n(27),l=n(445),f=n(44),d=n(16),p=n(21),h=n(169),m=n(127);var v=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,i=e.disableEnforceFocus,u=void 0!==i&&i,s=e.disableRestoreFocus,l=void 0!==s&&s,f=e.getDoc,p=e.isEnabled,h=e.open,m=a.useRef(),v=a.useRef(null),g=a.useRef(null),y=a.useRef(),b=a.useRef(null),x=a.useCallback((function(e){b.current=o.findDOMNode(e)}),[]),w=Object(d.a)(t.ref,x);return a.useMemo((function(){h&&"undefined"!==typeof window&&(y.current=f().activeElement)}),[h]),a.useEffect((function(){if(h){var e=Object(c.a)(b.current);r||!b.current||b.current.contains(e.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex",-1),b.current.focus());var t=function(){u||!p()||m.current?m.current=!1:b.current&&!b.current.contains(e.activeElement)&&b.current.focus()},n=function(t){!u&&p()&&9===t.keyCode&&e.activeElement===b.current&&(m.current=!0,t.shiftKey?g.current.focus():v.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var i=setInterval((function(){t()}),50);return function(){clearInterval(i),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),l||(y.current&&y.current.focus&&y.current.focus(),y.current=null)}}}),[r,u,l,p,h]),a.createElement(a.Fragment,null,a.createElement("div",{tabIndex:0,ref:v,"data-test":"sentinelStart"}),a.cloneElement(t,{ref:w}),a.createElement("div",{tabIndex:0,ref:g,"data-test":"sentinelEnd"}))},g={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},y=a.forwardRef((function(e,t){var n=e.invisible,o=void 0!==n&&n,u=e.open,s=Object(r.a)(e,["invisible","open"]);return u?a.createElement("div",Object(i.a)({"aria-hidden":!0,ref:t},s,{style:Object(i.a)({},g.root,{},o?g.invisible:{},{},s.style)})):null}));var b=new m.b,x=a.forwardRef((function(e,t){var n=Object(u.a)(),g=Object(s.a)({name:"MuiModal",props:Object(i.a)({},e),theme:n}),x=g.BackdropComponent,w=void 0===x?y:x,O=g.BackdropProps,k=g.children,E=g.closeAfterTransition,S=void 0!==E&&E,C=g.container,_=g.disableAutoFocus,j=void 0!==_&&_,A=g.disableBackdropClick,T=void 0!==A&&A,N=g.disableEnforceFocus,R=void 0!==N&&N,D=g.disableEscapeKeyDown,I=void 0!==D&&D,M=g.disablePortal,F=void 0!==M&&M,P=g.disableRestoreFocus,z=void 0!==P&&P,L=g.disableScrollLock,B=void 0!==L&&L,W=g.hideBackdrop,U=void 0!==W&&W,V=g.keepMounted,H=void 0!==V&&V,q=g.manager,G=void 0===q?b:q,$=g.onBackdropClick,K=g.onClose,X=g.onEscapeKeyDown,Y=g.onRendered,J=g.open,Z=Object(r.a)(g,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),Q=a.useState(!0),ee=Q[0],te=Q[1],ne=a.useRef({}),re=a.useRef(null),ie=a.useRef(null),ae=Object(d.a)(ie,t),oe=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(g),ue=function(){return Object(c.a)(re.current)},se=function(){return ne.current.modalRef=ie.current,ne.current.mountNode=re.current,ne.current},ce=function(){G.mount(se(),{disableScrollLock:B}),ie.current.scrollTop=0},le=Object(p.a)((function(){var e=function(e){return e="function"===typeof e?e():e,o.findDOMNode(e)}(C)||ue().body;G.add(se(),e),ie.current&&ce()})),fe=a.useCallback((function(){return G.isTopModal(se())}),[G]),de=Object(p.a)((function(e){re.current=e,e&&(Y&&Y(),J&&fe()?ce():Object(m.a)(ie.current,!0))})),pe=a.useCallback((function(){G.remove(se())}),[G]);if(a.useEffect((function(){return function(){pe()}}),[pe]),a.useEffect((function(){J?le():oe&&S||pe()}),[J,pe,oe,S,le]),!H&&!J&&(!oe||ee))return null;var he=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:h.a}),me={};return void 0===k.props.tabIndex&&(me.tabIndex=k.props.tabIndex||"-1"),oe&&(me.onEnter=Object(f.a)((function(){te(!1)}),k.props.onEnter),me.onExited=Object(f.a)((function(){te(!0),S&&pe()}),k.props.onExited)),a.createElement(l.a,{ref:de,container:C,disablePortal:F},a.createElement("div",Object(i.a)({ref:ae,onKeyDown:function(e){"Escape"===e.key&&fe()&&(e.stopPropagation(),X&&X(e),!I&&K&&K(e,"escapeKeyDown"))},role:"presentation"},Z,{style:Object(i.a)({},he.root,{},!J&&ee?he.hidden:{},{},Z.style)}),U?null:a.createElement(w,Object(i.a)({open:J,onClick:function(e){e.target===e.currentTarget&&($&&$(e),!T&&K&&K(e,"backdropClick"))}},O)),a.createElement(v,{disableEnforceFocus:R,disableAutoFocus:j,disableRestoreFocus:z,getDoc:ue,isEnabled:fe,open:J},a.cloneElement(k,me))))}));t.a=x},function(e,t,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(e,t){var n,i,a;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),i=""===n?1/0:void 0===t.maxLength?80:t.maxLength,a=t.replacer,function e(t,o,u){var s,c,l,f,d,p,h,m,v,g,y,b;if(t&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0===(y=JSON.stringify(t,a)))return y;if(h=i-o.length-u,y.length<=h&&(v=y.replace(r,(function(e,t){return t||e+" "}))).length<=h)return v;if(null!=a&&(t=JSON.parse(y),a=void 0),"object"===typeof t&&null!==t){if(m=o+n,l=[],c=0,Array.isArray(t))for(g="[",s="]",h=t.length;c<h;c++)l.push(e(t[c],m,c===h-1?0:1)||"null");else for(g="{",s="}",h=(p=Object.keys(t)).length;c<h;c++)f=p[c],d=JSON.stringify(f)+": ",void 0!==(b=e(t[f],m,d.length+(c===h-1?0:1)))&&l.push(d+b);if(l.length>0)return[g,n+l.join(",\n"+m),s].join("\n"+o)}return y}(e,"",0)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n.n(r),a=n(162);function o(){return i.a.useContext(a.a)}},,,,,,,,,,,,,,,,,,,,,,function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=u(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(208);e.exports=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,u=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(u)throw a}}}}},function(e,t,n){var r=n(290);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t,n){var r=n(397);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(398),i=n(399),a=n(400);e.exports=function(e){return function(){var t,n=r(e);if(i()){var o=r(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return a(this,t)}}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"h",(function(){return u})),n.d(t,"createElement",(function(){return u})),n.d(t,"cloneElement",(function(){return l})),n.d(t,"Component",(function(){return F})),n.d(t,"render",(function(){return P})),n.d(t,"rerender",(function(){return h})),n.d(t,"options",(function(){return i}));var i={},a=[],o=[];function u(e,t){var n,u,s,c,l=o;for(c=arguments.length;c-- >2;)a.push(arguments[c]);for(t&&null!=t.children&&(a.length||a.push(t.children),delete t.children);a.length;)if((u=a.pop())&&void 0!==u.pop)for(c=u.length;c--;)a.push(u[c]);else"boolean"===typeof u&&(u=null),(s="function"!==typeof e)&&(null==u?u="":"number"===typeof u?u=String(u):"string"!==typeof u&&(s=!1)),s&&n?l[l.length-1]+=u:l===o?l=[u]:l.push(u),n=s;var f=new r;return f.nodeName=e,f.children=l,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==i.vnode&&i.vnode(f),f}function s(e,t){for(var n in t)e[n]=t[n];return e}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(e,t){return u(e.nodeName,s(s({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,d=[];function p(e){!e._dirty&&(e._dirty=!0)&&1==d.push(e)&&(i.debounceRendering||c)(h)}function h(){var e,t=d;for(d=[];e=t.pop();)e._dirty&&I(e)}function m(e,t,n){return"string"===typeof t||"number"===typeof t?void 0!==e.splitText:"string"===typeof t.nodeName?!e._componentConstructor&&v(e,t.nodeName):n||e._componentConstructor===t.nodeName}function v(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function g(e){var t=s({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function y(e){var t=e.parentNode;t&&t.removeChild(e)}function b(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!==typeof r&&"string"!==typeof n||(e.style.cssText=r||""),r&&"object"===typeof r){if("string"!==typeof n)for(var a in n)a in r||(e.style[a]="");for(var a in r)e.style[a]="number"===typeof r[a]&&!1===f.test(a)?r[a]+"px":r[a]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,x,o):e.removeEventListener(t,x,o),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e)!function(e,t,n){try{e[t]=n}catch(r){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var u=i&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!==typeof r&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function x(e){return this._listeners[e.type](i.event&&i.event(e)||e)}var w=[],O=0,k=!1,E=!1;function S(){for(var e;e=w.pop();)i.afterMount&&i.afterMount(e),e.componentDidMount&&e.componentDidMount()}function C(e,t,n,r,i,a){O++||(k=null!=i&&void 0!==i.ownerSVGElement,E=null!=e&&!("__preactattr_"in e));var o=_(e,t,n,r,a);return i&&o.parentNode!==i&&i.appendChild(o),--O||(E=!1,a||S()),o}function _(e,t,n,r,i){var a=e,o=k;if(null!=t&&"boolean"!==typeof t||(t=""),"string"===typeof t||"number"===typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(a=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(a,e),j(e,!0))),a.__preactattr_=!0,a;var u=t.nodeName;if("function"===typeof u)return function(e,t,n,r){var i=e&&e._component,a=i,o=e,u=i&&e._componentConstructor===t.nodeName,s=u,c=g(t);for(;i&&!s&&(i=i._parentComponent);)s=i.constructor===t.nodeName;i&&s&&(!r||i._component)?(D(i,c,3,n,r),e=i.base):(a&&!u&&(M(a),e=o=null),i=N(t.nodeName,c,n),e&&!i.nextBase&&(i.nextBase=e,o=null),D(i,c,1,n,r),e=i.base,o&&e!==o&&(o._component=null,j(o,!1)));return e}(e,t,n,r);if(k="svg"===u||"foreignObject"!==u&&k,u=String(u),(!e||!v(e,u))&&(a=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(u,k),e)){for(;e.firstChild;)a.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(a,e),j(e,!0)}var s=a.firstChild,c=a.__preactattr_,l=t.children;if(null==c){c=a.__preactattr_={};for(var f=a.attributes,d=f.length;d--;)c[f[d].name]=f[d].value}return!E&&l&&1===l.length&&"string"===typeof l[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=l[0]&&(s.nodeValue=l[0]):(l&&l.length||null!=s)&&function(e,t,n,r,i){var a,o,u,s,c,l=e.childNodes,f=[],d={},p=0,h=0,v=l.length,g=0,b=t?t.length:0;if(0!==v)for(var x=0;x<v;x++){var w=l[x],O=w.__preactattr_;null!=(k=b&&O?w._component?w._component.__key:O.key:null)?(p++,d[k]=w):(O||(void 0!==w.splitText?!i||w.nodeValue.trim():i))&&(f[g++]=w)}if(0!==b)for(x=0;x<b;x++){var k;if(s=t[x],c=null,null!=(k=s.key))p&&void 0!==d[k]&&(c=d[k],d[k]=void 0,p--);else if(!c&&h<g)for(a=h;a<g;a++)if(void 0!==f[a]&&m(o=f[a],s,i)){c=o,f[a]=void 0,a===g-1&&g--,a===h&&h++;break}c=_(c,s,n,r),u=l[x],c&&c!==e&&c!==u&&(null==u?e.appendChild(c):c===u.nextSibling?y(u):e.insertBefore(c,u))}if(p)for(var x in d)void 0!==d[x]&&j(d[x],!1);for(;h<=g;)void 0!==(c=f[g--])&&j(c,!1)}(a,l,n,r,E||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||b(e,r,n[r],n[r]=void 0,k);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||b(e,r,n[r],n[r]=t[r],k)}(a,t.attributes,c),k=o,a}function j(e,t){var n=e._component;n?M(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||y(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;j(e,!0),e=t}}var T={};function N(e,t,n){var r,i=T[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),F.call(r,t,n)):((r=new F(t,n)).constructor=e,r.render=R),i)for(var a=i.length;a--;)if(i[a].constructor===e){r.nextBase=i[a].nextBase,i.splice(a,1);break}return r}function R(e,t,n){return this.constructor(e,n)}function D(e,t,n,r,a){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===i.syncComponentUpdates&&e.base?p(e):I(e,1,a)),e.__ref&&e.__ref(e))}function I(e,t,n,r){if(!e._disable){var a,o,u,c=e.props,l=e.state,f=e.context,d=e.prevProps||c,p=e.prevState||l,h=e.prevContext||f,m=e.base,v=e.nextBase,y=m||v,b=e._component,x=!1;if(m&&(e.props=d,e.state=p,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,l,f)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(c,l,f),e.props=c,e.state=l,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){a=e.render(c,l,f),e.getChildContext&&(f=s(s({},f),e.getChildContext()));var k,E,_=a&&a.nodeName;if("function"===typeof _){var A=g(a);(o=b)&&o.constructor===_&&A.key==o.__key?D(o,A,1,f,!1):(k=o,e._component=o=N(_,A,f),o.nextBase=o.nextBase||v,o._parentComponent=e,D(o,A,0,f,!1),I(o,1,n,!0)),E=o.base}else u=y,(k=b)&&(u=e._component=null),(y||1===t)&&(u&&(u._component=null),E=C(u,a,f,n||!m,y&&y.parentNode,!0));if(y&&E!==y&&o!==b){var T=y.parentNode;T&&E!==T&&(T.replaceChild(E,y),k||(y._component=null,j(y,!1)))}if(k&&M(k),e.base=E,E&&!r){for(var R=e,F=e;F=F._parentComponent;)(R=F).base=E;E._component=R,E._componentConstructor=R.constructor}}if(!m||n?w.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(d,p,h),i.afterUpdate&&i.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);O||r||S()}}function M(e){i.beforeUnmount&&i.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?M(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,y(t),function(e){var t=e.constructor.name;(T[t]||(T[t]=[])).push(e)}(e),A(t)),e.__ref&&e.__ref(null)}function F(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function P(e,t,n){return C(n,e,{},!1,t,!1)}s(F.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=s({},n)),s(n,"function"===typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),p(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),I(this,2)},render:function(){}});var z={h:u,createElement:u,cloneElement:l,Component:F,render:P,rerender:h,options:i};t.default=z},function(e,t,n){"use strict";var r=n(11),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(309),u=a(n(94)),s=n(68),c=n(146),l=n(147),f={maxBins:12,fontSize:11};function d(e,t,n){var r=o.format(",.4~f"),i=o.format(".4~p"),a=[],u=[];if(null!=e.numVals&&(a.push("Num Vals"),u.push(r(e.numVals))),null!=e.min&&(a.push("Min"),u.push(r(e.min))),null!=e.max&&(a.push("Max"),u.push(r(e.max))),null!=e.numZeros){a.push("# Zeros");var s="";e.numVals&&(s=e.numZeros>0?"(".concat(i(e.numZeros/e.numVals),")"):""),u.push("".concat(r(e.numZeros)," ").concat(s))}if(null!=e.numNans){a.push("# NaNs");var c="";e.numVals&&(c=e.numNans>0?"(".concat(i(e.numNans/e.numVals),")"):""),u.push("".concat(r(e.numNans)," ").concat(c))}if(null!=e.numInfs){a.push("# Infinity");var f="";e.numVals&&(f=e.numInfs>0?"(".concat(i(e.numInfs/e.numVals),")"):""),u.push("".concat(r(e.numInfs)," ").concat(f))}l.table(t,{headers:a,values:[u]},n)}function p(e){if(null==e.length)throw new Error("input data must be an array");if(0===e.length)return[];if("object"===typeof e[0]){if(null==e[0].value)throw new Error("input data must have a value field");return e}for(var t=Array(e.length),n=0;n<e.length;n++)t[n]={value:e[n]};return t}t.histogram=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var a,o,l,h,m,v,g,y,b;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(a=p(t),o=Object.assign({},f,n),l={actions:!1,mode:"vega-lite",defaultStyle:!1},h=s.subSurface(e,"histogram"),!1!==n.stats&&(m=s.subSurface(e,"stats",{prepend:!0}),d(n.stats?n.stats:c.arrayStats(a.map((function(e){return e.value}))),m,{fontSize:o.fontSize})),v=[],g=0;g<a.length;g++)null!=(y=a[g].value)&&isFinite(y)&&v.push(a[g]);return b={width:o.width||s.getDefaultWidth(h),height:o.height||s.getDefaultHeight(h),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:v},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},encoding:{x:{bin:{maxbins:o.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:o.color||"#001B44"}}},r.abrupt("return",u.default(h,b,l));case 9:case"end":return r.stop()}}),i)})))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){return function(){return null}}n.d(t,"a",(function(){return r}))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(13),c=n(227),l=n(12),f=a.forwardRef((function(e,t){var n=e.edge,u=void 0!==n&&n,s=e.children,f=e.classes,d=e.className,p=e.color,h=void 0===p?"default":p,m=e.disabled,v=void 0!==m&&m,g=e.disableFocusRipple,y=void 0!==g&&g,b=e.size,x=void 0===b?"medium":b,w=Object(i.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return a.createElement(c.a,Object(r.a)({className:Object(o.a)(f.root,d,"default"!==h&&f["color".concat(Object(l.a)(h))],v&&f.disabled,"small"===x&&f["size".concat(Object(l.a)(x))],{start:f.edgeStart,end:f.edgeEnd}[u]),centerRipple:!0,focusRipple:!y,disabled:v,ref:t},w),a.createElement("span",{className:f.label},s))}));t.a=Object(u.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(s.d)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(s.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(s.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(f)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(20)),u=n(37),s=n(4),c=n(27),l=n(58),f=n(44),d=n(7),p=n(182),h=n(176),m=n(170);function v(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function g(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function y(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function b(e){return"function"===typeof e?e():e}var x=a.forwardRef((function(e,t){var n=e.action,d=e.anchorEl,x=e.anchorOrigin,w=void 0===x?{vertical:"top",horizontal:"left"}:x,O=e.anchorPosition,k=e.anchorReference,E=void 0===k?"anchorEl":k,S=e.children,C=e.classes,_=e.className,j=e.container,A=e.elevation,T=void 0===A?8:A,N=e.getContentAnchorEl,R=e.marginThreshold,D=void 0===R?16:R,I=e.onEnter,M=e.onEntered,F=e.onEntering,P=e.onExit,z=e.onExited,L=e.onExiting,B=e.open,W=e.PaperProps,U=void 0===W?{}:W,V=e.transformOrigin,H=void 0===V?{vertical:"top",horizontal:"left"}:V,q=e.TransitionComponent,G=void 0===q?h.a:q,$=e.transitionDuration,K=void 0===$?"auto":$,X=e.TransitionProps,Y=void 0===X?{}:X,J=Object(i.a)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),Z=a.useRef(),Q=a.useCallback((function(e){if("anchorPosition"===E)return O;var t=b(d),n=(t instanceof Object(l.a)(t).Element?t:Object(c.a)(Z.current).body).getBoundingClientRect(),r=0===e?w.vertical:"center";return{top:n.top+v(n,r),left:n.left+g(n,w.horizontal)}}),[d,w.horizontal,w.vertical,O,E]),ee=a.useCallback((function(e){var t=0;if(N&&"anchorEl"===E){var n=N(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[w.vertical,E,N]),te=a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:v(e,H.vertical)+t,horizontal:g(e,H.horizontal)}}),[H.horizontal,H.vertical]),ne=a.useCallback((function(e){var t=ee(e),n={width:e.offsetWidth,height:e.offsetHeight},r=te(n,t);if("none"===E)return{top:null,left:null,transformOrigin:y(r)};var i=Q(t),a=i.top-r.vertical,o=i.left-r.horizontal,u=a+n.height,s=o+n.width,c=Object(l.a)(b(d)),f=c.innerHeight-D,p=c.innerWidth-D;if(a<D){var h=a-D;a-=h,r.vertical+=h}else if(u>f){var m=u-f;a-=m,r.vertical+=m}if(o<D){var v=o-D;o-=v,r.horizontal+=v}else if(s>p){var g=s-p;o-=g,r.horizontal+=g}return{top:"".concat(Math.round(a),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:y(r)}}),[d,E,Q,ee,te,D]),re=a.useCallback((function(){var e=Z.current;if(e){var t=ne(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[ne]),ie=a.useCallback((function(e){Z.current=o.findDOMNode(e)}),[]);a.useEffect((function(){B&&re()})),a.useImperativeHandle(n,(function(){return B?{updatePosition:function(){re()}}:null}),[B,re]),a.useEffect((function(){if(B){var e=Object(u.a)((function(){re()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[B,re]);var ae=K;"auto"!==K||G.muiSupportAuto||(ae=void 0);var oe=j||(d?Object(c.a)(b(d)).body:void 0);return a.createElement(p.a,Object(r.a)({container:oe,open:B,ref:t,BackdropProps:{invisible:!0},className:Object(s.a)(C.root,_)},J),a.createElement(G,Object(r.a)({appear:!0,in:B,onEnter:I,onEntered:M,onExit:P,onExited:z,onExiting:L,timeout:ae},Y,{onEntering:Object(f.a)((function(e,t){F&&F(e,t),re()}),Y.onEntering)}),a.createElement(m.a,Object(r.a)({elevation:T,ref:ie},U,{className:Object(s.a)(C.paper,U.className)}),S)))}));t.a=Object(d.a)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(x)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(82),s=n(7),c=n(12),l=n(48),f=n(62),d=a.forwardRef((function(e,t){var n=e.children,s=e.classes,d=e.className,p=e.color,h=void 0===p?"primary":p,m=e.component,v=void 0===m?"div":m,g=e.disabled,y=void 0!==g&&g,b=e.error,x=void 0!==b&&b,w=e.fullWidth,O=void 0!==w&&w,k=e.focused,E=e.hiddenLabel,S=void 0!==E&&E,C=e.margin,_=void 0===C?"none":C,j=e.required,A=void 0!==j&&j,T=e.size,N=e.variant,R=void 0===N?"standard":N,D=Object(i.a)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),I=a.useState((function(){var e=!1;return n&&a.Children.forEach(n,(function(t){if(Object(l.a)(t,["Input","Select"])){var n=Object(l.a)(t,["Select"])?t.props.input:t;n&&Object(u.a)(n.props)&&(e=!0)}})),e})),M=I[0],F=I[1],P=a.useState((function(){var e=!1;return n&&a.Children.forEach(n,(function(t){Object(l.a)(t,["Input","Select"])&&Object(u.b)(t.props,!0)&&(e=!0)})),e})),z=P[0],L=P[1],B=a.useState(!1),W=B[0],U=B[1],V=void 0!==k?k:W;y&&V&&U(!1);var H=a.useCallback((function(){L(!0)}),[]),q={adornedStart:M,setAdornedStart:F,color:h,disabled:y,error:x,filled:z,focused:V,fullWidth:O,hiddenLabel:S,margin:("small"===T?"dense":void 0)||_,onBlur:function(){U(!1)},onEmpty:a.useCallback((function(){L(!1)}),[]),onFilled:H,onFocus:function(){U(!0)},registerEffect:void 0,required:A,variant:R};return a.createElement(f.a.Provider,{value:q},a.createElement(v,Object(r.a)({className:Object(o.a)(s.root,d,"none"!==_&&s["margin".concat(Object(c.a)(_))],O&&s.fullWidth),ref:t},D),n))}));t.a=Object(s.a)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(d)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(49),s=n(38),c=n(7),l=n(453),f=a.forwardRef((function(e,t){var n=e.classes,c=e.className,f=e.disableAnimation,d=void 0!==f&&f,p=(e.margin,e.shrink),h=(e.variant,Object(i.a)(e,["classes","className","disableAnimation","margin","shrink","variant"])),m=Object(s.a)(),v=p;"undefined"===typeof v&&m&&(v=m.filled||m.focused||m.adornedStart);var g=Object(u.a)({props:e,muiFormControl:m,states:["margin","variant"]});return a.createElement(l.a,Object(r.a)({"data-shrink":v,className:Object(o.a)(n.root,c,m&&n.formControl,!d&&n.animated,v&&n.shrink,"dense"===g.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[g.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:t},h))}));t.a=Object(c.a)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(f)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(74),i=n(34),a=n(0),o=n.n(a),u=n(52),s=(n(8),n(3)),c=n(39),l=n(45);o.a.Component;var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(u.b)(t.props),t}return Object(i.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.c,{history:this.history,children:this.props.children})},t}(o.a.Component);var d=function(e,t){return"function"===typeof e?e(t):e},p=function(e,t){return"string"===typeof e?Object(u.c)(e,null,null,t):e},h=function(e){return e},m=o.a.forwardRef;"undefined"===typeof m&&(m=h);var v=m((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,a=Object(c.a)(e,["innerRef","navigate","onClick"]),u=a.target,l=Object(s.a)({},a,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=h!==m&&t||n,o.a.createElement("a",l)}));var g=m((function(e,t){var n=e.component,i=void 0===n?v:n,a=e.replace,u=e.to,f=e.innerRef,g=Object(c.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,r=p(d(u,e.location),e.location),c=r?n.createHref(r):"",v=Object(s.a)({},g,{href:c,navigate:function(){var t=d(u,e.location);(a?n.replace:n.push)(t)}});return h!==m?v.ref=t||f:v.innerRef=f,o.a.createElement(i,v)}))})),y=function(e){return e},b=o.a.forwardRef;"undefined"===typeof b&&(b=y);b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,a=e.activeClassName,u=void 0===a?"active":a,f=e.activeStyle,h=e.className,m=e.exact,v=e.isActive,x=e.location,w=e.strict,O=e.style,k=e.to,E=e.innerRef,S=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return o.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=x||e.location,a=p(d(k,n),n),c=a.pathname,C=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=C?Object(r.f)(n.pathname,{path:C,exact:m,strict:w}):null,j=!!(v?v(_,n):_),A=j?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(h,u):h,T=j?Object(s.a)({},O,{},f):O,N=Object(s.a)({"aria-current":j&&i||null,className:A,style:T,to:a},S);return y!==b?N.ref=t||E:N.innerRef=E,o.a.createElement(g,N)}))}))},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(466)),u=n(23),s=n(41),c=n(64),l=(n(46),n(4)),f=n(12),d=n(325),p=n(82),h=n(16),m=n(40);function v(e,t){return"object"===Object(c.a)(t)&&null!==t?e===t:String(e)===String(t)}var g=a.forwardRef((function(e,t){var n=e["aria-label"],o=e.autoFocus,c=e.autoWidth,g=e.children,y=e.classes,b=e.className,x=e.defaultValue,w=e.disabled,O=e.displayEmpty,k=e.IconComponent,E=e.inputRef,S=e.labelId,C=e.MenuProps,_=void 0===C?{}:C,j=e.multiple,A=e.name,T=e.onBlur,N=e.onChange,R=e.onClose,D=e.onFocus,I=e.onOpen,M=e.open,F=e.readOnly,P=e.renderValue,z=(e.required,e.SelectDisplayProps),L=void 0===z?{}:z,B=e.tabIndex,W=(e.type,e.value),U=e.variant,V=void 0===U?"standard":U,H=Object(i.a)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","required","SelectDisplayProps","tabIndex","type","value","variant"]),q=Object(m.a)({controlled:W,default:x,name:"SelectInput"}),G=Object(s.a)(q,2),$=G[0],K=G[1],X=a.useRef(null),Y=a.useState(null),J=Y[0],Z=Y[1],Q=a.useRef(null!=M).current,ee=a.useState(),te=ee[0],ne=ee[1],re=a.useState(!1),ie=re[0],ae=re[1],oe=Object(h.a)(t,E);a.useImperativeHandle(oe,(function(){return{focus:function(){J.focus()},node:X.current,value:$}}),[J,$]),a.useEffect((function(){o&&J&&J.focus()}),[o,J]);var ue,se,ce=function(e,t){e?I&&I(t):R&&R(t),Q||(ne(c?null:J.clientWidth),ae(e))},le=function(e){return function(t){var n;if(j||ce(!1,t),j){n=Array.isArray($)?Object(u.a)($):[];var r=$.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;$!==n&&(K(n),N&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:A}}),N(t,e)))}},fe=null!==J&&(Q?M:ie);delete H["aria-invalid"];var de=[],pe=!1;(Object(p.b)({value:$})||O)&&(P?ue=P($):pe=!0);var he=a.Children.map(g,(function(e){if(!a.isValidElement(e))return null;var t;if(j){if(!Array.isArray($))throw new Error("Material-UI: the `value` prop must be an array when using the `Select` component with `multiple`.");(t=$.some((function(t){return v(t,e.props.value)})))&&pe&&de.push(e.props.children)}else(t=v($,e.props.value))&&pe&&(se=e.props.children);return t&&!0,a.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:le(e),onKeyUp:function(t){" "===t.key&&t.preventDefault();var n=e.props.onKeyUp;"function"===typeof n&&n(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));pe&&(ue=j?de.join(", "):se);var me,ve=te;!c&&Q&&J&&(ve=J.clientWidth),me="undefined"!==typeof B?B:w?null:0;var ge=L.id||(A?"mui-component-select-".concat(A):void 0);return a.createElement(a.Fragment,null,a.createElement("div",Object(r.a)({className:Object(l.a)(y.root,y.select,y.selectMenu,y[V],b,w&&y.disabled),ref:Z,tabIndex:me,role:"button","aria-disabled":w?"true":void 0,"aria-expanded":fe?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[S,ge].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!F){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ce(!0,e))}},onMouseDown:w||F?null:function(e){0===e.button&&(e.preventDefault(),J.focus(),ce(!0,e))},onBlur:function(e){!fe&&T&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:$,name:A}}),T(e))},onFocus:D},L,{id:ge}),function(e){return null==e||"string"===typeof e&&!e.trim()}(ue)?a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):ue),a.createElement("input",Object(r.a)({value:Array.isArray($)?$.join(","):$,name:A,ref:X,type:"hidden",autoFocus:o},H)),a.createElement(k,{className:Object(l.a)(y.icon,y["icon".concat(Object(f.a)(V))],fe&&y.iconOpen,w&&y.disabled)}),a.createElement(d.a,Object(r.a)({id:"menu-".concat(A||""),anchorEl:J,open:fe,onClose:function(e){ce(!1,e)}},_,{MenuListProps:Object(r.a)({"aria-labelledby":S,role:"listbox",disableListWrap:!0},_.MenuListProps),PaperProps:Object(r.a)({},_.PaperProps,{style:Object(r.a)({minWidth:ve},null!=_.PaperProps?_.PaperProps.style:null)})}),he))})),y=n(49),b=n(38),x=n(7),w=n(178),O=n(177),k=n(324),E=n(179),S=n(450),C=n(455),_=k.b,j=a.createElement(O.a,null),A=a.createElement(S.a,null),T=a.forwardRef((function e(t,n){var u=t.autoWidth,s=void 0!==u&&u,c=t.children,l=t.classes,f=t.displayEmpty,d=void 0!==f&&f,p=t.IconComponent,h=void 0===p?w.a:p,m=t.id,v=t.input,x=t.inputProps,O=t.label,k=t.labelId,S=t.labelWidth,_=void 0===S?0:S,T=t.MenuProps,N=t.multiple,R=void 0!==N&&N,D=t.native,I=void 0!==D&&D,M=t.onClose,F=t.onOpen,P=t.open,z=t.renderValue,L=t.SelectDisplayProps,B=t.variant,W=void 0===B?"standard":B,U=Object(i.a)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),V=I?E.a:g,H=Object(b.a)(),q=Object(y.a)({props:t,muiFormControl:H,states:["variant"]}).variant||W,G=v||{standard:j,outlined:a.createElement(C.a,{label:O,labelWidth:_}),filled:A}[q];return a.cloneElement(G,Object(r.a)({inputComponent:V,inputProps:Object(r.a)({children:c,IconComponent:h,variant:q,type:void 0,multiple:R},I?{id:m}:{autoWidth:s,displayEmpty:d,labelId:k,MenuProps:T,onClose:M,onOpen:F,open:P,renderValue:z,SelectDisplayProps:Object(r.a)({id:m},L)},{},x,{classes:x?Object(o.a)({baseClasses:l,newClasses:x.classes,Component:e}):l},v?v.props.inputProps:{}),ref:n},U))}));T.muiName="Select";t.a=Object(x.a)(_,{name:"MuiSelect"})(T)},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){var r=n(352);e.exports=p,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],d=n[1],p=n.index;if(u+=e.slice(o,p),o=p+f.length,d)u+=d[1];else{var h=e[o],m=n[2],v=n[3],g=n[4],y=n[5],b=n[6],x=n[7];u&&(r.push(u),u="");var w=null!=m&&null!=h&&h!==m,O="+"===b||"*"===b,k="?"===b||"*"===b,E=n[2]||l,S=g||y;r.push({name:v||a++,prefix:m||"",delimiter:E,optional:k,repeat:O,partial:w,asterisk:!!x,pattern:S?c(S):x?".*":"[^"+s(E)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,d=u[l.name];if(null==d){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(f=s(d[p]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===p?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(d),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var d=s(c.prefix),p="(?:"+c.pattern+")";t.push(c),c.repeat&&(p+="(?:"+d+p+")*"),o+=p=c.optional?c.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var h=s(n.delimiter||"/"),m=o.slice(-h.length)===h;return i||(o=(m?o.slice(0,-h.length):o)+"(?:"+h+"(?=$))?"),o+=a?"$":i&&m?"":"(?="+h+"|$)",l(new RegExp("^"+o,f(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return d(a(e,n),t,n)}(e,t,n)}},function(e,t,n){(function(n){var r;t=e.exports=d,r="object"===typeof n&&Object({NODE_ENV:"production",PUBLIC_URL:"/Reactive-Miner",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})&&Object({NODE_ENV:"production",PUBLIC_URL:"/Reactive-Miner",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"/Reactive-Miner",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],o=t.src=[],u=t.tokens={},s=0;function c(e){u[e]=s++}c("NUMERICIDENTIFIER"),o[u.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),o[u.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),o[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),o[u.MAINVERSION]="("+o[u.NUMERICIDENTIFIER]+")\\.("+o[u.NUMERICIDENTIFIER]+")\\.("+o[u.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),o[u.MAINVERSIONLOOSE]="("+o[u.NUMERICIDENTIFIERLOOSE]+")\\.("+o[u.NUMERICIDENTIFIERLOOSE]+")\\.("+o[u.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),o[u.PRERELEASEIDENTIFIER]="(?:"+o[u.NUMERICIDENTIFIER]+"|"+o[u.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),o[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+o[u.NUMERICIDENTIFIERLOOSE]+"|"+o[u.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),o[u.PRERELEASE]="(?:-("+o[u.PRERELEASEIDENTIFIER]+"(?:\\."+o[u.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),o[u.PRERELEASELOOSE]="(?:-?("+o[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+o[u.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),o[u.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),o[u.BUILD]="(?:\\+("+o[u.BUILDIDENTIFIER]+"(?:\\."+o[u.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),o[u.FULLPLAIN]="v?"+o[u.MAINVERSION]+o[u.PRERELEASE]+"?"+o[u.BUILD]+"?",o[u.FULL]="^"+o[u.FULLPLAIN]+"$",c("LOOSEPLAIN"),o[u.LOOSEPLAIN]="[v=\\s]*"+o[u.MAINVERSIONLOOSE]+o[u.PRERELEASELOOSE]+"?"+o[u.BUILD]+"?",c("LOOSE"),o[u.LOOSE]="^"+o[u.LOOSEPLAIN]+"$",c("GTLT"),o[u.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),o[u.XRANGEIDENTIFIERLOOSE]=o[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),o[u.XRANGEIDENTIFIER]=o[u.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),o[u.XRANGEPLAIN]="[v=\\s]*("+o[u.XRANGEIDENTIFIER]+")(?:\\.("+o[u.XRANGEIDENTIFIER]+")(?:\\.("+o[u.XRANGEIDENTIFIER]+")(?:"+o[u.PRERELEASE]+")?"+o[u.BUILD]+"?)?)?",c("XRANGEPLAINLOOSE"),o[u.XRANGEPLAINLOOSE]="[v=\\s]*("+o[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[u.XRANGEIDENTIFIERLOOSE]+")(?:"+o[u.PRERELEASELOOSE]+")?"+o[u.BUILD]+"?)?)?",c("XRANGE"),o[u.XRANGE]="^"+o[u.GTLT]+"\\s*"+o[u.XRANGEPLAIN]+"$",c("XRANGELOOSE"),o[u.XRANGELOOSE]="^"+o[u.GTLT]+"\\s*"+o[u.XRANGEPLAINLOOSE]+"$",c("COERCE"),o[u.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",c("COERCERTL"),a[u.COERCERTL]=new RegExp(o[u.COERCE],"g"),c("LONETILDE"),o[u.LONETILDE]="(?:~>?)",c("TILDETRIM"),o[u.TILDETRIM]="(\\s*)"+o[u.LONETILDE]+"\\s+",a[u.TILDETRIM]=new RegExp(o[u.TILDETRIM],"g");c("TILDE"),o[u.TILDE]="^"+o[u.LONETILDE]+o[u.XRANGEPLAIN]+"$",c("TILDELOOSE"),o[u.TILDELOOSE]="^"+o[u.LONETILDE]+o[u.XRANGEPLAINLOOSE]+"$",c("LONECARET"),o[u.LONECARET]="(?:\\^)",c("CARETTRIM"),o[u.CARETTRIM]="(\\s*)"+o[u.LONECARET]+"\\s+",a[u.CARETTRIM]=new RegExp(o[u.CARETTRIM],"g");c("CARET"),o[u.CARET]="^"+o[u.LONECARET]+o[u.XRANGEPLAIN]+"$",c("CARETLOOSE"),o[u.CARETLOOSE]="^"+o[u.LONECARET]+o[u.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),o[u.COMPARATORLOOSE]="^"+o[u.GTLT]+"\\s*("+o[u.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),o[u.COMPARATOR]="^"+o[u.GTLT]+"\\s*("+o[u.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),o[u.COMPARATORTRIM]="(\\s*)"+o[u.GTLT]+"\\s*("+o[u.LOOSEPLAIN]+"|"+o[u.XRANGEPLAIN]+")",a[u.COMPARATORTRIM]=new RegExp(o[u.COMPARATORTRIM],"g");c("HYPHENRANGE"),o[u.HYPHENRANGE]="^\\s*("+o[u.XRANGEPLAIN]+")\\s+-\\s+("+o[u.XRANGEPLAIN]+")\\s*$",c("HYPHENRANGELOOSE"),o[u.HYPHENRANGELOOSE]="^\\s*("+o[u.XRANGEPLAINLOOSE]+")\\s+-\\s+("+o[u.XRANGEPLAINLOOSE]+")\\s*$",c("STAR"),o[u.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<s;l++)r(l,o[l]),a[l]||(a[l]=new RegExp(o[l]));function f(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d)return e;if("string"!==typeof e)return null;if(e.length>256)return null;if(!(t.loose?a[u.LOOSE]:a[u.FULL]).test(e))return null;try{return new d(e,t)}catch(n){return null}}function d(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d){if(e.loose===t.loose)return e;e=e.version}else if("string"!==typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof d))return new d(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?a[u.LOOSE]:a[u.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=f,t.valid=function(e,t){var n=f(e,t);return n?n.version:null},t.clean=function(e,t){var n=f(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=d,d.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},d.prototype.toString=function(){return this.version},d.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof d||(e=new d(e,this.options)),this.compareMain(e)||this.comparePre(e)},d.prototype.compareMain=function(e){return e instanceof d||(e=new d(e,this.options)),h(this.major,e.major)||h(this.minor,e.minor)||h(this.patch,e.patch)},d.prototype.comparePre=function(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return h(n,i)}while(++t)},d.prototype.compareBuild=function(e){e instanceof d||(e=new d(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return h(n,i)}while(++t)},d.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"===typeof n&&(r=n,n=void 0);try{return new d(e,n).inc(t,r).version}catch(i){return null}},t.diff=function(e,t){if(y(e,t))return null;var n=f(e),r=f(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var a="prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return i+o;return a},t.compareIdentifiers=h;var p=/^[0-9]+$/;function h(e,t){var n=p.test(e),r=p.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function m(e,t,n){return new d(e,n).compare(new d(t,n))}function v(e,t,n){return m(e,t,n)>0}function g(e,t,n){return m(e,t,n)<0}function y(e,t,n){return 0===m(e,t,n)}function b(e,t,n){return 0!==m(e,t,n)}function x(e,t,n){return m(e,t,n)>=0}function w(e,t,n){return m(e,t,n)<=0}function O(e,t,n,r){switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e===n;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return y(e,n,r);case"!=":return b(e,n,r);case">":return v(e,n,r);case">=":return x(e,n,r);case"<":return g(e,n,r);case"<=":return w(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function k(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof k){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof k))return new k(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===E?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return h(t,e)},t.major=function(e,t){return new d(e,t).major},t.minor=function(e,t){return new d(e,t).minor},t.patch=function(e,t){return new d(e,t).patch},t.compare=m,t.compareLoose=function(e,t){return m(e,t,!0)},t.compareBuild=function(e,t,n){var r=new d(e,n),i=new d(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function(e,t,n){return m(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=v,t.lt=g,t.eq=y,t.neq=b,t.gte=x,t.lte=w,t.cmp=O,t.Comparator=k;var E={};function S(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof S)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new S(e.raw,t);if(e instanceof k)return new S(e.value,t);if(!(this instanceof S))return new S(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function C(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function _(e){return!e||"x"===e.toLowerCase()||"*"===e}function j(e,t,n,r,i,a,o,u,s,c,l,f,d){return((t=_(n)?"":_(r)?">="+n+".0.0":_(i)?">="+n+"."+r+".0":">="+t)+" "+(u=_(s)?"":_(c)?"<"+(+s+1)+".0.0":_(l)?"<"+s+"."+(+c+1)+".0":f?"<="+s+"."+c+"."+l+"-"+f:"<="+u)).trim()}function A(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==E&&e[i].semver.prerelease.length>0){var a=e[i].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0}function T(e,t,n){try{t=new S(t,n)}catch(r){return!1}return t.test(e)}function N(e,t,n,r){var i,a,o,u,s;switch(e=new d(e,r),t=new S(t,r),n){case">":i=v,a=w,o=g,u=">",s=">=";break;case"<":i=g,a=x,o=v,u="<",s="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(T(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],f=null,p=null;if(l.forEach((function(e){e.semver===E&&(e=new k(">=0.0.0")),f=f||e,p=p||e,i(e.semver,f.semver,r)?f=e:o(e.semver,p.semver,r)&&(p=e)})),f.operator===u||f.operator===s)return!1;if((!p.operator||p.operator===u)&&a(e,p.semver))return!1;if(p.operator===s&&o(e,p.semver))return!1}return!0}k.prototype.parse=function(e){var t=this.options.loose?a[u.COMPARATORLOOSE]:a[u.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new d(n[2],this.options.loose):this.semver=E},k.prototype.toString=function(){return this.value},k.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===E||e===E)return!0;if("string"===typeof e)try{e=new d(e,this.options)}catch(t){return!1}return O(e,this.operator,this.semver,this.options)},k.prototype.intersects=function(e,t){if(!(e instanceof k))throw new TypeError("a Comparator is required");var n;if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new S(e.value,t),T(this.value,n,t));if(""===e.operator)return""===e.value||(n=new S(this.value,t),T(e.semver,n,t));var r=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),i=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),a=this.semver.version===e.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),u=O(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=O(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||a&&o||u||s},t.Range=S,S.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},S.prototype.toString=function(){return this.range},S.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];e=e.replace(n,j),r("hyphen replace",e),e=e.replace(a[u.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,a[u.COMPARATORTRIM]),e=(e=(e=e.replace(a[u.TILDETRIM],"$1~")).replace(a[u.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?a[u.COMPARATORLOOSE]:a[u.COMPARATOR],o=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?a[u.CARETLOOSE]:a[u.CARET];return e.replace(n,(function(t,n,i,a,o){var u;return r("caret",e,t,n,i,a,o),_(n)?u="":_(i)?u=">="+n+".0.0 <"+(+n+1)+".0.0":_(a)?u="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":o?(r("replaceCaret pr",o),u="0"===n?"0"===i?">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+i+"."+(+a+1):">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+a+"-"+o+" <"+(+n+1)+".0.0"):(r("no pr"),u="0"===n?"0"===i?">="+n+"."+i+"."+a+" <"+n+"."+i+"."+(+a+1):">="+n+"."+i+"."+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+a+" <"+(+n+1)+".0.0"),r("caret return",u),u}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?a[u.TILDELOOSE]:a[u.TILDE];return e.replace(n,(function(t,n,i,a,o){var u;return r("tilde",e,t,n,i,a,o),_(n)?u="":_(i)?u=">="+n+".0.0 <"+(+n+1)+".0.0":_(a)?u=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":o?(r("replaceTilde pr",o),u=">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+(+i+1)+".0"):u=">="+n+"."+i+"."+a+" <"+n+"."+(+i+1)+".0",r("tilde return",u),u}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return e.replace(n,(function(n,i,a,o,u,s){r("xRange",e,n,i,a,o,u,s);var c=_(a),l=c||_(o),f=l||_(u),d=f;return"="===i&&d&&(i=""),s=t.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&d?(l&&(o=0),u=0,">"===i?(i=">=",l?(a=+a+1,o=0,u=0):(o=+o+1,u=0)):"<="===i&&(i="<",l?a=+a+1:o=+o+1),n=i+a+"."+o+"."+u+s):l?n=">="+a+".0.0"+s+" <"+(+a+1)+".0.0"+s:f&&(n=">="+a+"."+o+".0"+s+" <"+a+"."+(+o+1)+".0"+s),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(a[u.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(i)}))),o=o.map((function(e){return new k(e,this.options)}),this)},S.prototype.intersects=function(e,t){if(!(e instanceof S))throw new TypeError("a Range is required");return this.set.some((function(n){return C(n,t)&&e.set.some((function(e){return C(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new S(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},S.prototype.test=function(e){if(!e)return!1;if("string"===typeof e)try{e=new d(e,this.options)}catch(n){return!1}for(var t=0;t<this.set.length;t++)if(A(this.set[t],e,this.options))return!0;return!1},t.satisfies=T,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var a=new S(t,n)}catch(o){return null}return e.forEach((function(e){a.test(e)&&(r&&-1!==i.compare(e)||(i=new d(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var a=new S(t,n)}catch(o){return null}return e.forEach((function(e){a.test(e)&&(r&&1!==i.compare(e)||(i=new d(r=e,n)))})),r},t.minVersion=function(e,t){e=new S(e,t);var n=new d("0.0.0");if(e.test(n))return n;if(n=new d("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new d(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!v(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new S(e,t).range||"*"}catch(n){return null}},t.ltr=function(e,t,n){return N(e,t,"<",n)},t.gtr=function(e,t,n){return N(e,t,">",n)},t.outside=N,t.prerelease=function(e,t){var n=f(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new S(e,n),t=new S(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof d)return e;"number"===typeof e&&(e=String(e));if("string"!==typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=a[u.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),a[u.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;a[u.COERCERTL].lastIndex=-1}else n=e.match(a[u.COERCE]);if(null===n)return null;return f(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}}).call(this,n(206))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}},function(e,t,n){"use strict";e.exports=n(436)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=n.n(a),u=(n(8),n(20)),s=n(4),c=n(16),l=n(21),f=n(7),d=n(57),p=n(23),h=n(39),m=n(34),v=n(73),g=n(84);function y(e,t){var n=Object.create(null);return e&&a.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(a.isValidElement)(e)?t(e):e}(e)})),n}function b(e,t,n){return null!=n[t]?n[t]:e.props[t]}function x(e,t,n){var r=y(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var u={};for(var s in t){if(i[s])for(r=0;r<i[s].length;r++){var c=i[s][r];u[i[s][r]]=n(c)}u[s]=n(s)}for(r=0;r<a.length;r++)u[a[r]]=n(a[r]);return u}(t,r);return Object.keys(i).forEach((function(o){var u=i[o];if(Object(a.isValidElement)(u)){var s=o in t,c=o in r,l=t[o],f=Object(a.isValidElement)(l)&&!l.props.in;!c||s&&!f?c||!s||f?c&&s&&Object(a.isValidElement)(l)&&(i[o]=Object(a.cloneElement)(u,{onExited:n.bind(null,u),in:l.props.in,exit:b(u,"exit",e),enter:b(u,"enter",e)})):i[o]=Object(a.cloneElement)(u,{in:!1}):i[o]=Object(a.cloneElement)(u,{onExited:n.bind(null,u),in:!0,exit:b(u,"exit",e),enter:b(u,"enter",e)})}})),i}var w=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},O=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(Object(v.a)(Object(v.a)(r)));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Object(m.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,y(n.children,(function(e){return Object(a.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:b(e,"appear",n),enter:b(e,"enter",n),exit:b(e,"exit",n)})}))):x(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=y(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(r.a)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(h.a)(e,["component","childFactory"]),i=this.state.contextValue,a=w(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o.a.createElement(g.a.Provider,{value:i},a):o.a.createElement(g.a.Provider,{value:i},o.a.createElement(t,r,a))},t}(o.a.Component);O.propTypes={},O.defaultProps={component:"div",childFactory:function(e){return e}};var k=O,E="undefined"===typeof window?a.useEffect:a.useLayoutEffect;var S=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,i=e.rippleX,o=e.rippleY,u=e.rippleSize,c=e.in,f=e.onExited,d=void 0===f?function(){}:f,p=e.timeout,h=a.useState(!1),m=h[0],v=h[1],g=Object(s.a)(t.ripple,t.rippleVisible,r&&t.ripplePulsate),y={width:u,height:u,top:-u/2+o,left:-u/2+i},b=Object(s.a)(t.child,m&&t.childLeaving,r&&t.childPulsate),x=Object(l.a)(d);return E((function(){if(!c){v(!0);var e=setTimeout(x,p);return function(){clearTimeout(e)}}}),[x,c,p]),a.createElement("span",{className:g,style:y},a.createElement("span",{className:b}))},C=a.forwardRef((function(e,t){var n=e.center,o=void 0!==n&&n,u=e.classes,c=e.className,l=Object(i.a)(e,["center","classes","className"]),f=a.useState([]),d=f[0],h=f[1],m=a.useRef(0),v=a.useRef(null);a.useEffect((function(){v.current&&(v.current(),v.current=null)}),[d]);var g=a.useRef(!1),y=a.useRef(null),b=a.useRef(null),x=a.useRef(null);a.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var w=a.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;h((function(e){return[].concat(Object(p.a)(e),[a.createElement(S,{key:m.current,classes:u,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i})])})),m.current+=1,v.current=o}),[u]),O=a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,a=t.center,u=void 0===a?o||t.pulsate:a,s=t.fakeElement,c=void 0!==s&&s;if("mousedown"===e.type&&g.current)g.current=!1;else{"touchstart"===e.type&&(g.current=!0);var l,f,d,p=c?null:x.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(u||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(h.width/2),f=Math.round(h.height/2);else{var m=e.clientX?e.clientX:e.touches[0].clientX,v=e.clientY?e.clientY:e.touches[0].clientY;l=Math.round(m-h.left),f=Math.round(v-h.top)}if(u)(d=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(d+=1);else{var O=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,k=2*Math.max(Math.abs((p?p.clientHeight:0)-f),f)+2;d=Math.sqrt(Math.pow(O,2)+Math.pow(k,2))}e.touches?null===b.current&&(b.current=function(){w({pulsate:i,rippleX:l,rippleY:f,rippleSize:d,cb:n})},y.current=setTimeout((function(){b.current&&(b.current(),b.current=null)}),80)):w({pulsate:i,rippleX:l,rippleY:f,rippleSize:d,cb:n})}}),[o,w]),E=a.useCallback((function(){O({},{pulsate:!0})}),[O]),C=a.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===e.type&&b.current)return e.persist(),b.current(),b.current=null,void(y.current=setTimeout((function(){C(e,t)})));b.current=null,h((function(e){return e.length>0?e.slice(1):e})),v.current=t}),[]);return a.useImperativeHandle(t,(function(){return{pulsate:E,start:O,stop:C}}),[E,O,C]),a.createElement("span",Object(r.a)({className:Object(s.a)(u.root,c),ref:x},l),a.createElement(k,{component:null,exit:!0},d))})),_=Object(f.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(a.memo(C)),j=a.forwardRef((function(e,t){var n=e.action,o=e.buttonRef,f=e.centerRipple,p=void 0!==f&&f,h=e.children,m=e.classes,v=e.className,g=e.component,y=void 0===g?"button":g,b=e.disabled,x=void 0!==b&&b,w=e.disableRipple,O=void 0!==w&&w,k=e.disableTouchRipple,E=void 0!==k&&k,S=e.focusRipple,C=void 0!==S&&S,j=e.focusVisibleClassName,A=e.onBlur,T=e.onClick,N=e.onFocus,R=e.onFocusVisible,D=e.onKeyDown,I=e.onKeyUp,M=e.onMouseDown,F=e.onMouseLeave,P=e.onMouseUp,z=e.onTouchEnd,L=e.onTouchMove,B=e.onTouchStart,W=e.onDragLeave,U=e.tabIndex,V=void 0===U?0:U,H=e.TouchRippleProps,q=e.type,G=void 0===q?"button":q,$=Object(i.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),K=a.useRef(null);var X=a.useRef(null),Y=a.useState(!1),J=Y[0],Z=Y[1];x&&J&&Z(!1);var Q=Object(d.a)(),ee=Q.isFocusVisible,te=Q.onBlurVisible,ne=Q.ref;function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;return Object(l.a)((function(r){return t&&t(r),!n&&X.current&&X.current[e](r),!0}))}a.useImperativeHandle(n,(function(){return{focusVisible:function(){Z(!0),K.current.focus()}}}),[]),a.useEffect((function(){J&&C&&!O&&X.current.pulsate()}),[O,C,J]);var ie=re("start",M),ae=re("stop",W),oe=re("stop",P),ue=re("stop",(function(e){J&&e.preventDefault(),F&&F(e)})),se=re("start",B),ce=re("stop",z),le=re("stop",L),fe=re("stop",(function(e){J&&(te(e),Z(!1)),A&&A(e)}),!1),de=Object(l.a)((function(e){K.current||(K.current=e.currentTarget),ee(e)&&(Z(!0),R&&R(e)),N&&N(e)})),pe=function(){var e=u.findDOMNode(K.current);return y&&"button"!==y&&!("A"===e.tagName&&e.href)},he=a.useRef(!1),me=Object(l.a)((function(e){C&&!he.current&&J&&X.current&&" "===e.key&&(he.current=!0,e.persist(),X.current.stop(e,(function(){X.current.start(e)}))),e.target===e.currentTarget&&pe()&&" "===e.key&&e.preventDefault(),D&&D(e),e.target===e.currentTarget&&pe()&&"Enter"===e.key&&!x&&(e.preventDefault(),T&&T(e))})),ve=Object(l.a)((function(e){C&&" "===e.key&&X.current&&J&&!e.defaultPrevented&&(he.current=!1,e.persist(),X.current.stop(e,(function(){X.current.pulsate(e)}))),I&&I(e),T&&e.target===e.currentTarget&&pe()&&" "===e.key&&!e.defaultPrevented&&T(e)})),ge=y;"button"===ge&&$.href&&(ge="a");var ye={};"button"===ge?(ye.type=G,ye.disabled=x):("a"===ge&&$.href||(ye.role="button"),ye["aria-disabled"]=x);var be=Object(c.a)(o,t),xe=Object(c.a)(ne,K),we=Object(c.a)(be,xe),Oe=a.useState(!1),ke=Oe[0],Ee=Oe[1];a.useEffect((function(){Ee(!0)}),[]);var Se=ke&&!O&&!x;return a.createElement(ge,Object(r.a)({className:Object(s.a)(m.root,v,J&&[m.focusVisible,j],x&&m.disabled),onBlur:fe,onClick:T,onFocus:de,onKeyDown:me,onKeyUp:ve,onMouseDown:ie,onMouseLeave:ue,onMouseUp:oe,onDragLeave:ae,onTouchEnd:ce,onTouchMove:le,onTouchStart:se,ref:we,tabIndex:x?-1:V},ye,$),h,Se?a.createElement(_,Object(r.a)({ref:X,center:p},H)):null)}));t.a=Object(f.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(j)},function(e,t,n){"use strict";var r=n(39),i=n(34),a=(n(8),n(0)),o=n.n(a),u=n(20),s=n.n(u),c=!1,l=n(84),f=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i="exited",r.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=s.a.findDOMNode(this);"entering"===t?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context?this.context.isMounting:t,a=this.getTimeouts(),o=i?a.appear:a.enter;!t&&!r||c?this.safeSetState({status:"entered"},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,i),this.safeSetState({status:"entering"},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,o,(function(){n.safeSetState({status:"entered"},(function(){n.props.onEntered(e,i)}))}))})))},n.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n&&!c?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,i=Object(r.a)(t,["children"]);if(delete i.in,delete i.mountOnEnter,delete i.unmountOnExit,delete i.appear,delete i.enter,delete i.exit,delete i.timeout,delete i.addEndListener,delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,"function"===typeof n)return o.a.createElement(l.a.Provider,{value:null},n(e,i));var a=o.a.Children.only(n);return o.a.createElement(l.a.Provider,{value:null},o.a.cloneElement(a,i))},t}(o.a.Component);function d(){}f.contextType=l.a,f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:d,onEntering:d,onEntered:d,onExit:d,onExiting:d,onExited:d},f.UNMOUNTED=0,f.EXITED=1,f.ENTERING=2,f.ENTERED=3,f.EXITING=4;t.a=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(3),i=n(454),a=n(59);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(e,Object(r.a)({defaultTheme:a.a},t))}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(85),c=n(50),l=a.forwardRef((function(e,t){var n=e.children,u=e.classes,l=e.className,f=e.disableTypography,d=void 0!==f&&f,p=e.inset,h=void 0!==p&&p,m=e.primary,v=e.primaryTypographyProps,g=e.secondary,y=e.secondaryTypographyProps,b=Object(i.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),x=a.useContext(c.a).dense,w=null!=m?m:n;null==w||w.type===s.a||d||(w=a.createElement(s.a,Object(r.a)({variant:x?"body2":"body1",className:u.primary,component:"span",display:"block"},v),w));var O=g;return null==O||O.type===s.a||d||(O=a.createElement(s.a,Object(r.a)({variant:"body2",className:u.secondary,color:"textSecondary",display:"block"},y),O)),a.createElement("div",Object(r.a)({className:Object(o.a)(u.root,l,x&&u.dense,h&&u.inset,w&&O&&u.multiline),ref:t},b),w,O)}));t.a=Object(u.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(l)},function(e){e.exports=JSON.parse('{"a":"5.10.1"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processStyleName=void 0,t.createMarkupForStyles=function(e,t){var n="";for(var i in e){var a=0===i.indexOf("--");if(e.hasOwnProperty(i)&&"label"!==i){var o=e[i];0,null!=o&&(a?n+=i+":"+o+";":(n+=u(i)+":",n+=(0,r.default)(i,o,t)+";"))}}return n||null};o(n(370));var r=o(n(372)),i=o(n(375)),a=o(n(377));o(n(286));function o(e){return e&&e.__esModule?e:{default:e}}var u=t.processStyleName=(0,a.default)(i.default)},function(e,t,n){"use strict";var r=n(374);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSurfaceInfo=function(e){return null!=e.name},t.isSurface=function(e){return e.drawArea instanceof HTMLElement}},function(e,t,n){"use strict";var r=n(143),i=n(144);Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(396);t.visor=function(){if("undefined"===typeof document)throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById("tfjs-visor-container")&&null!=a)return a;var e,t=document.getElementById("tfjs-visor-container");function n(t,n){var r=null;return e=o.VisorComponent.render(t,e,{ref:function(e){return r=e},surfaceList:Array.from(n.values())}),r}null==t&&((t=document.createElement("div")).id="tfjs-visor-container",document.body.appendChild(t));var r=new Map,i=n(t,r);return a=new u(i,t,r,n)};var u=function(){function e(t,n,i,a){r(this,e),this.visorComponent=t,this.el=n,this.surfaceList=i,this.renderVisor=a}return i(e,[{key:"surface",value:function(e){var t=e.name,n=null==e.tab?"Visor":e.tab;if(null==t||!("string"===typeof t||t instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");var r=Object.assign({},e,{tab:n}),i="".concat(t,"-").concat(n);return this.surfaceList.has(i)||this.surfaceList.set(i,r),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(t,n)}},{key:"isFullscreen",value:function(){return this.visorComponent.isFullscreen()}},{key:"isOpen",value:function(){return this.visorComponent.isOpen()}},{key:"close",value:function(){return this.visorComponent.close()}},{key:"open",value:function(){return this.visorComponent.open()}},{key:"toggle",value:function(){return this.visorComponent.toggle()}},{key:"toggleFullScreen",value:function(){return this.visorComponent.toggleFullScreen()}},{key:"bindKeys",value:function(){return this.visorComponent.bindKeys()}},{key:"unbindKeys",value:function(){return this.visorComponent.unbindKeys()}},{key:"setActiveTab",value:function(e){if(!this.visorComponent.state.tabs.has(e))throw new Error("Tab '".concat(e,"' does not exist"));this.visorComponent.setState({activeTab:e})}}]),e}();t.Visor=u},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(406),i=n(407),a=n(208),o=n(408);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()}},function(e,t,n){"use strict";var r=n(11),i=n(294),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(94)),s=n(68),c=n(145),l=n(54);t.linechart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var o,d,p,h,m,v,g,y,b,x,w,O,k,E;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Array.isArray(t.values[0])?t.values:[t.values],d=o[0].length,p=t.series?t.series:o.map((function(e,t){return"Series ".concat(t+1)})),c.assert(p.length===o.length,"Must have an equal number of series labels as there are data series"),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),h=[],m=function(e){var t={x:e};p.forEach((function(n,r){var i=o[r][e].y;t[n]=i,t["".concat(n,"-name")]=n})),h.push(t)},v=0;v<d;v++)m(v);return g=Object.assign({},f,n),y=function(){return g.zoomToFit?{zero:!1}:null!=g.yAxisDomain?{domain:g.yAxisDomain}:void 0},b={x:{field:"x",type:g.xType,title:g.xLabel},tooltip:[{field:"x",type:"quantitative"}].concat(i(p.map((function(e){return{field:e,type:"quantitative"}}))))},x=p.map((function(e){return{data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:e,type:g.yType,title:g.yLabel,scale:y()},color:{field:"".concat(e,"-name"),type:"nominal",legend:{values:p,title:null},scale:{range:g.seriesColors}}}}})),w={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},O=l.getDrawArea(e),k={width:g.width||s.getDefaultWidth(O),height:g.height||s.getDefaultHeight(O),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},text:{fontSize:g.fontSize},legend:{labelFontSize:g.fontSize,titleFontSize:g.fontSize}},data:{values:h},encoding:b,layer:[].concat(i(x),[w])},E={actions:!1,mode:"vega-lite",defaultStyle:!1},r.next=18,u.default(O,k,E);case 18:return r.abrupt("return",Promise.resolve());case 19:case"end":return r.stop()}}),a)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},function(e,t,n){var r=n(409),i=n(410),a=n(208),o=n(411);e.exports=function(e){return r(e)||i(e)||a(e)||o()}},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(7),s=n(174),c=a.forwardRef((function(e,t){var n=e.classes,u=e.className,c=e.component,l=void 0===c?"table":c,f=e.padding,d=void 0===f?"default":f,p=e.size,h=void 0===p?"medium":p,m=e.stickyHeader,v=void 0!==m&&m,g=Object(r.a)(e,["classes","className","component","padding","size","stickyHeader"]),y=a.useMemo((function(){return{padding:d,size:h,stickyHeader:v}}),[d,h,v]);return a.createElement(s.a.Provider,{value:y},a.createElement(l,Object(i.a)({role:"table"===l?null:"table",ref:t,className:Object(o.a)(n.root,u,v&&n.stickyHeader)},g)))}));t.a=Object(u.a)((function(e){return{root:{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Object(i.a)({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},stickyHeader:{borderCollapse:"separate"}}}),{name:"MuiTable"})(c)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(60),c={variant:"body"},l=a.forwardRef((function(e,t){var n=e.classes,u=e.className,l=e.component,f=void 0===l?"tbody":l,d=Object(i.a)(e,["classes","className","component"]);return a.createElement(s.a.Provider,{value:c},a.createElement(f,Object(r.a)({className:Object(o.a)(n.root,u),ref:t,role:"tbody"===f?null:"rowgroup"},d)))}));t.a=Object(u.a)({root:{display:"table-row-group"}},{name:"MuiTableBody"})(l)},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(7),s=n(12),c=n(13),l=n(174),f=n(60),d=a.forwardRef((function(e,t){var n,u,c=e.align,d=void 0===c?"inherit":c,p=e.classes,h=e.className,m=e.component,v=e.padding,g=e.scope,y=e.size,b=e.sortDirection,x=e.variant,w=Object(r.a)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),O=a.useContext(l.a),k=a.useContext(f.a),E=k&&"head"===k.variant;m?(u=m,n=E?"columnheader":"cell"):u=E?"th":"td";var S=g;!S&&E&&(S="col");var C=v||(O&&O.padding?O.padding:"default"),_=y||(O&&O.size?O.size:"medium"),j=x||k&&k.variant,A=null;return b&&(A="asc"===b?"ascending":"descending"),a.createElement(u,Object(i.a)({ref:t,className:Object(o.a)(p.root,p[j],h,"inherit"!==d&&p["align".concat(Object(s.a)(d))],"default"!==C&&p["padding".concat(Object(s.a)(C))],"medium"!==_&&p["size".concat(Object(s.a)(_))],"head"===j&&O&&O.stickyHeader&&p.stickyHeader),"aria-sort":A,role:n,scope:S},w))}));t.a=Object(u.a)((function(e){return{root:Object(i.a)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?Object(c.i)(Object(c.d)(e.palette.divider,1),.88):Object(c.a)(Object(c.d)(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0px 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(d)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(60),c=n(13),l=a.forwardRef((function(e,t){var n=e.classes,u=e.className,c=e.component,l=void 0===c?"tr":c,f=e.hover,d=void 0!==f&&f,p=e.selected,h=void 0!==p&&p,m=Object(i.a)(e,["classes","className","component","hover","selected"]),v=a.useContext(s.a);return a.createElement(l,Object(r.a)({ref:t,className:Object(o.a)(n.root,u,v&&{head:n.head,footer:n.footer}[v.variant],d&&n.hover,h&&n.selected),role:"tr"===l?null:"row"},m))}));t.a=Object(u.a)((function(e){return{root:{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,"&$hover:hover":{backgroundColor:e.palette.action.hover},"&$selected, &$selected:hover":{backgroundColor:Object(c.d)(e.palette.secondary.main,e.palette.action.selectedOpacity)}},selected:{},hover:{},head:{},footer:{}}}),{name:"MuiTableRow"})(l)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(60),c={variant:"head"},l=a.forwardRef((function(e,t){var n=e.classes,u=e.className,l=e.component,f=void 0===l?"thead":l,d=Object(i.a)(e,["classes","className","component"]);return a.createElement(s.a.Provider,{value:c},a.createElement(f,Object(r.a)({className:Object(o.a)(n.root,u),ref:t,role:"thead"===f?null:"rowgroup"},d)))}));t.a=Object(u.a)({root:{display:"table-header-group"}},{name:"MuiTableHead"})(l)},function(e,t,n){"use strict";var r=n(3),i=n(41),a=n(5),o=n(15),u=n(0),s=n(20),c=(n(8),n(4)),l=n(331),f=n(13),d=n(7),p=n(12),h=n(176),m=n(448),v=n(16),g=n(96),y=n(30),b=n(57),x=n(40),w=n(19);function O(e){return Math.round(1e5*e)/1e5}var k=!1,E=null;var S=u.forwardRef((function(e,t){var n=e.arrow,o=void 0!==n&&n,f=e.children,d=e.classes,O=e.disableFocusListener,S=void 0!==O&&O,C=e.disableHoverListener,_=void 0!==C&&C,j=e.disableTouchListener,A=void 0!==j&&j,T=e.enterDelay,N=void 0===T?100:T,R=e.enterNextDelay,D=void 0===R?0:R,I=e.enterTouchDelay,M=void 0===I?700:I,F=e.id,P=e.interactive,z=void 0!==P&&P,L=e.leaveDelay,B=void 0===L?0:L,W=e.leaveTouchDelay,U=void 0===W?1500:W,V=e.onClose,H=e.onOpen,q=e.open,G=e.placement,$=void 0===G?"bottom":G,K=e.PopperProps,X=e.title,Y=e.TransitionComponent,J=void 0===Y?h.a:Y,Z=e.TransitionProps,Q=Object(a.a)(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperProps","title","TransitionComponent","TransitionProps"]),ee=Object(w.a)(),te=u.useState(),ne=te[0],re=te[1],ie=u.useState(null),ae=ie[0],oe=ie[1],ue=u.useRef(!1),se=u.useRef(),ce=u.useRef(),le=u.useRef(),fe=u.useRef(),de=Object(x.a)({controlled:q,default:!1,name:"Tooltip",state:"open"}),pe=Object(i.a)(de,2),he=pe[0],me=pe[1],ve=he,ge=Object(g.a)(F);u.useEffect((function(){return function(){clearTimeout(se.current),clearTimeout(ce.current),clearTimeout(le.current),clearTimeout(fe.current)}}),[]);var ye=function(e){clearTimeout(E),k=!0,me(!0),H&&H(e)},be=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=f.props;"mouseover"===t.type&&n.onMouseOver&&e&&n.onMouseOver(t),ue.current&&"touchstart"!==t.type||(ne&&ne.removeAttribute("title"),clearTimeout(ce.current),clearTimeout(le.current),N||k&&D?(t.persist(),ce.current=setTimeout((function(){ye(t)}),k?D:N)):ye(t))}},xe=Object(b.a)(),we=xe.isFocusVisible,Oe=xe.onBlurVisible,ke=xe.ref,Ee=u.useState(!1),Se=Ee[0],Ce=Ee[1],_e=function(){Se&&(Ce(!1),Oe())},je=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){ne||re(t.currentTarget),we(t)&&(Ce(!0),be()(t));var n=f.props;n.onFocus&&e&&n.onFocus(t)}},Ae=function(e){clearTimeout(E),E=setTimeout((function(){k=!1}),800+B),me(!1),V&&V(e),clearTimeout(se.current),se.current=setTimeout((function(){ue.current=!1}),ee.transitions.duration.shortest)},Te=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=f.props;"blur"===t.type&&(n.onBlur&&e&&n.onBlur(t),_e()),"mouseleave"===t.type&&n.onMouseLeave&&t.currentTarget===ne&&n.onMouseLeave(t),clearTimeout(ce.current),clearTimeout(le.current),t.persist(),le.current=setTimeout((function(){Ae(t)}),B)}},Ne=Object(v.a)(re,t),Re=Object(v.a)(ke,Ne),De=u.useCallback((function(e){Object(y.a)(Re,s.findDOMNode(e))}),[Re]),Ie=Object(v.a)(f.ref,De);""===X&&(ve=!1);var Me=!ve&&!_,Fe=Object(r.a)({"aria-describedby":ve?ge:null,title:Me&&"string"===typeof X?X:null},Q,{},f.props,{className:Object(c.a)(Q.className,f.props.className),ref:Ie}),Pe={};A||(Fe.onTouchStart=function(e){ue.current=!0;var t=f.props;t.onTouchStart&&t.onTouchStart(e),clearTimeout(le.current),clearTimeout(se.current),clearTimeout(fe.current),e.persist(),fe.current=setTimeout((function(){be()(e)}),M)},Fe.onTouchEnd=function(e){f.props.onTouchEnd&&f.props.onTouchEnd(e),clearTimeout(fe.current),clearTimeout(le.current),e.persist(),le.current=setTimeout((function(){Ae(e)}),U)}),_||(Fe.onMouseOver=be(),Fe.onMouseLeave=Te(),z&&(Pe.onMouseOver=be(!1),Pe.onMouseLeave=Te(!1))),S||(Fe.onFocus=je(),Fe.onBlur=Te(),z&&(Pe.onFocus=je(!1),Pe.onBlur=Te(!1)));var ze=u.useMemo((function(){return Object(l.a)({popperOptions:{modifiers:{arrow:{enabled:Boolean(ae),element:ae}}}},K)}),[ae,K]);return u.createElement(u.Fragment,null,u.cloneElement(f,Fe),u.createElement(m.a,Object(r.a)({className:Object(c.a)(d.popper,z&&d.popperInteractive,o&&d.popperArrow),placement:$,anchorEl:ne,open:!!ne&&ve,id:Fe["aria-describedby"],transition:!0},Pe,ze),(function(e){var t=e.placement,n=e.TransitionProps;return u.createElement(J,Object(r.a)({timeout:ee.transitions.duration.shorter},n,Z),u.createElement("div",{className:Object(c.a)(d.tooltip,d["tooltipPlacement".concat(Object(p.a)(t.split("-")[0]))],ue.current&&d.touch,o&&d.tooltipArrow)},X,o?u.createElement("span",{className:d.arrow,ref:oe}):null))})))}));t.a=Object(d.a)((function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none",flip:!1},popperInteractive:{pointerEvents:"auto"},popperArrow:{'&[x-placement*="bottom"] $arrow':{flip:!1,top:0,left:0,marginTop:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"0 1em 1em 1em",borderColor:"transparent transparent currentcolor transparent"}},'&[x-placement*="top"] $arrow':{flip:!1,bottom:0,left:0,marginBottom:"-0.95em",marginLeft:4,marginRight:4,width:"2em",height:"1em","&::before":{flip:!1,borderWidth:"1em 1em 0 1em",borderColor:"currentcolor transparent transparent transparent"}},'&[x-placement*="right"] $arrow':{flip:!1,left:0,marginLeft:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 1em 1em 0",borderColor:"transparent currentcolor transparent transparent"}},'&[x-placement*="left"] $arrow':{flip:!1,right:0,marginRight:"-0.95em",marginTop:4,marginBottom:4,height:"2em",width:"1em","&::before":{flip:!1,borderWidth:"1em 0 1em 1em",borderColor:"transparent transparent transparent currentcolor"}}},tooltip:{backgroundColor:Object(f.d)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(O(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{position:"absolute",fontSize:6,color:Object(f.d)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(O(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:Object(o.a)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:Object(o.a)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:Object(o.a)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:Object(o.a)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}}),{name:"MuiTooltip"})(S)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(60),c={variant:"footer"},l=a.forwardRef((function(e,t){var n=e.classes,u=e.className,l=e.component,f=void 0===l?"tfoot":l,d=Object(i.a)(e,["classes","className","component"]);return a.createElement(s.a.Provider,{value:c},a.createElement(f,Object(r.a)({className:Object(o.a)(n.root,u),ref:t,role:"tfoot"===f?null:"rowgroup"},d)))}));t.a=Object(u.a)({root:{display:"table-footer-group"}},{name:"MuiTableFooter"})(l)},function(e,t,n){"use strict";var r=n(5),i=n(15),a=n(3),o=n(0),u=(n(8),n(4)),s=n(7),c=n(442),l=o.forwardRef((function(e,t){var n,i=e.classes,s=e.className,l=e.component,f=void 0===l?"li":l,d=e.disableGutters,p=void 0!==d&&d,h=e.ListItemClasses,m=e.role,v=void 0===m?"menuitem":m,g=e.selected,y=e.tabIndex,b=Object(r.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==y?y:-1),o.createElement(c.a,Object(a.a)({button:!0,role:v,tabIndex:n,component:f,selected:g,disableGutters:p,classes:Object(a.a)({dense:i.dense},h),className:Object(u.a)(i.root,s,g&&i.selected,!p&&i.gutters),ref:t},b))}));t.a=Object(s.a)((function(e){return{root:Object(a.a)({},e.typography.body1,Object(i.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(a.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(l)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(15),o=n(0),u=(n(8),n(4)),s=n(7),c=o.forwardRef((function(e,t){var n=e.classes,a=e.className,s=e.component,c=void 0===s?"div":s,l=e.disableGutters,f=void 0!==l&&l,d=e.variant,p=void 0===d?"regular":d,h=Object(i.a)(e,["classes","className","component","disableGutters","variant"]);return o.createElement(c,Object(r.a)({className:Object(u.a)(n.root,n[p],a,!f&&n.gutters),ref:t},h))}));t.a=Object(s.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:Object(a.a)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(c)},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(7),s=n(13),c=n(227),l=n(12),f=a.forwardRef((function(e,t){var n=e.children,u=e.classes,s=e.className,f=e.color,d=void 0===f?"default":f,p=e.component,h=void 0===p?"button":p,m=e.disabled,v=void 0!==m&&m,g=e.disableElevation,y=void 0!==g&&g,b=e.disableFocusRipple,x=void 0!==b&&b,w=e.endIcon,O=e.focusVisibleClassName,k=e.fullWidth,E=void 0!==k&&k,S=e.size,C=void 0===S?"medium":S,_=e.startIcon,j=e.type,A=void 0===j?"button":j,T=e.variant,N=void 0===T?"text":T,R=Object(r.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),D=_&&a.createElement("span",{className:Object(o.a)(u.startIcon,u["iconSize".concat(Object(l.a)(C))])},_),I=w&&a.createElement("span",{className:Object(o.a)(u.endIcon,u["iconSize".concat(Object(l.a)(C))])},w);return a.createElement(c.a,Object(i.a)({className:Object(o.a)(u.root,u[N],s,"inherit"===d?u.colorInherit:"default"!==d&&u["".concat(N).concat(Object(l.a)(d))],"medium"!==C&&[u["".concat(N,"Size").concat(Object(l.a)(C))],u["size".concat(Object(l.a)(C))]],y&&u.disableElevation,v&&u.disabled,E&&u.fullWidth),component:h,disabled:v,focusRipple:!x,focusVisibleClassName:Object(o.a)(u.focusVisible,O),ref:t,type:A},R),a.createElement("span",{className:u.label},D,n,I))}));t.a=Object(u.a)((function(e){return{root:Object(i.a)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Object(s.d)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(s.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(s.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(Object(s.d)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:Object(s.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(Object(s.d)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:Object(s.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(f)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(38),s=n(7),c=n(85),l=n(12),f=a.forwardRef((function(e,t){e.checked;var n=e.classes,s=e.className,f=e.control,d=e.disabled,p=(e.inputRef,e.label),h=e.labelPlacement,m=void 0===h?"end":h,v=(e.name,e.onChange,e.value,Object(i.a)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),g=Object(u.a)(),y=d;"undefined"===typeof y&&"undefined"!==typeof f.props.disabled&&(y=f.props.disabled),"undefined"===typeof y&&g&&(y=g.disabled);var b={disabled:y};return["checked","name","onChange","value","inputRef"].forEach((function(t){"undefined"===typeof f.props[t]&&"undefined"!==typeof e[t]&&(b[t]=e[t])})),a.createElement("label",Object(r.a)({className:Object(o.a)(n.root,s,"end"!==m&&n["labelPlacement".concat(Object(l.a)(m))],y&&n.disabled),ref:t},v),a.cloneElement(f,b),a.createElement(c.a,{component:"span",className:Object(o.a)(n.label,y&&n.disabled)},p))}));t.a=Object(s.a)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(f)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=a.forwardRef((function(e,t){var n=e.classes,u=e.className,s=e.row,c=void 0!==s&&s,l=Object(i.a)(e,["classes","className","row"]);return a.createElement("div",Object(r.a)({className:Object(o.a)(n.root,u,c&&n.row),ref:t},l))}));t.a=Object(u.a)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(s)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(177),s=n(450),c=n(455),l=n(219),f=n(218),d=n(452),p=n(221),h=n(7),m={standard:u.a,filled:s.a,outlined:c.a},v=a.forwardRef((function(e,t){var n=e.autoComplete,u=e.autoFocus,s=void 0!==u&&u,c=e.children,h=e.classes,v=e.className,g=e.color,y=void 0===g?"primary":g,b=e.defaultValue,x=e.disabled,w=void 0!==x&&x,O=e.error,k=void 0!==O&&O,E=e.FormHelperTextProps,S=e.fullWidth,C=void 0!==S&&S,_=e.helperText,j=e.hiddenLabel,A=e.id,T=e.InputLabelProps,N=e.inputProps,R=e.InputProps,D=e.inputRef,I=e.label,M=e.multiline,F=void 0!==M&&M,P=e.name,z=e.onBlur,L=e.onChange,B=e.onFocus,W=e.placeholder,U=e.required,V=void 0!==U&&U,H=e.rows,q=e.rowsMax,G=e.select,$=void 0!==G&&G,K=e.SelectProps,X=e.type,Y=e.value,J=e.variant,Z=void 0===J?"standard":J,Q=Object(i.a)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","select","SelectProps","type","value","variant"]);var ee={};"outlined"===Z&&(T&&"undefined"!==typeof T.shrink&&(ee.notched=T.shrink),I&&(ee.label=a.createElement(a.Fragment,null,I,V&&"\xa0*"))),$&&(K&&K.native||(ee.id=void 0),ee["aria-describedby"]=void 0);var te=_&&A?"".concat(A,"-helper-text"):void 0,ne=I&&A?"".concat(A,"-label"):void 0,re=m[Z],ie=a.createElement(re,Object(r.a)({"aria-describedby":te,autoComplete:n,autoFocus:s,defaultValue:b,fullWidth:C,multiline:F,name:P,rows:H,rowsMax:q,type:X,value:Y,id:A,inputRef:D,onBlur:z,onChange:L,onFocus:B,placeholder:W,inputProps:N},ee,R));return a.createElement(f.a,Object(r.a)({className:Object(o.a)(h.root,v),disabled:w,error:k,fullWidth:C,hiddenLabel:j,ref:t,required:V,color:y,variant:Z},Q),I&&a.createElement(l.a,Object(r.a)({htmlFor:A,id:ne},T),I),$?a.createElement(p.a,Object(r.a)({"aria-describedby":te,id:A,labelId:ne,value:Y,input:ie},K),c):ie,_&&a.createElement(d.a,Object(r.a)({id:te},E),_))}));t.a=Object(h.a)({root:{}},{name:"MuiTextField"})(v)},function(e,t,n){"use strict";n.r(t),n.d(t,"colors",(function(){return r})),n.d(t,"hexToRgb",(function(){return E.hexToRgb})),n.d(t,"rgbToHex",(function(){return E.rgbToHex})),n.d(t,"hslToRgb",(function(){return E.hslToRgb})),n.d(t,"decomposeColor",(function(){return E.decomposeColor})),n.d(t,"recomposeColor",(function(){return E.recomposeColor})),n.d(t,"getContrastRatio",(function(){return E.getContrastRatio})),n.d(t,"getLuminance",(function(){return E.getLuminance})),n.d(t,"emphasize",(function(){return E.emphasize})),n.d(t,"fade",(function(){return E.fade})),n.d(t,"darken",(function(){return E.darken})),n.d(t,"lighten",(function(){return E.lighten})),n.d(t,"createMuiTheme",(function(){return E.createMuiTheme})),n.d(t,"createStyles",(function(){return E.createStyles})),n.d(t,"makeStyles",(function(){return E.makeStyles})),n.d(t,"responsiveFontSizes",(function(){return E.responsiveFontSizes})),n.d(t,"styled",(function(){return E.styled})),n.d(t,"easing",(function(){return E.easing})),n.d(t,"duration",(function(){return E.duration})),n.d(t,"useTheme",(function(){return E.useTheme})),n.d(t,"withStyles",(function(){return E.withStyles})),n.d(t,"withTheme",(function(){return E.withTheme})),n.d(t,"createGenerateClassName",(function(){return E.createGenerateClassName})),n.d(t,"jssPreset",(function(){return E.jssPreset})),n.d(t,"ServerStyleSheets",(function(){return E.ServerStyleSheets})),n.d(t,"StylesProvider",(function(){return E.StylesProvider})),n.d(t,"MuiThemeProvider",(function(){return E.MuiThemeProvider})),n.d(t,"ThemeProvider",(function(){return E.ThemeProvider})),n.d(t,"capitalize",(function(){return S.a})),n.d(t,"createChainedFunction",(function(){return S.b})),n.d(t,"createSvgIcon",(function(){return S.c})),n.d(t,"debounce",(function(){return S.d})),n.d(t,"deprecatedPropType",(function(){return S.e})),n.d(t,"isMuiElement",(function(){return S.f})),n.d(t,"ownerDocument",(function(){return S.g})),n.d(t,"ownerWindow",(function(){return S.h})),n.d(t,"requirePropFactory",(function(){return S.i})),n.d(t,"setRef",(function(){return S.j})),n.d(t,"unsupportedProp",(function(){return S.l})),n.d(t,"useControlled",(function(){return S.m})),n.d(t,"useEventCallback",(function(){return S.n})),n.d(t,"useForkRef",(function(){return S.o})),n.d(t,"unstable_useId",(function(){return S.k})),n.d(t,"useIsFocusVisible",(function(){return S.p})),n.d(t,"AppBar",(function(){return I})),n.d(t,"Avatar",(function(){return z})),n.d(t,"Backdrop",(function(){return L.a})),n.d(t,"Badge",(function(){return W})),n.d(t,"BottomNavigation",(function(){return V})),n.d(t,"BottomNavigationAction",(function(){return G})),n.d(t,"Box",(function(){return we})),n.d(t,"styleFunction",(function(){return xe})),n.d(t,"Breadcrumbs",(function(){return _e})),n.d(t,"Button",(function(){return je.a})),n.d(t,"ButtonBase",(function(){return H.a})),n.d(t,"ButtonGroup",(function(){return Te})),n.d(t,"Card",(function(){return Re})),n.d(t,"CardActionArea",(function(){return Ie})),n.d(t,"CardActions",(function(){return Fe})),n.d(t,"CardContent",(function(){return ze})),n.d(t,"CardHeader",(function(){return Be})),n.d(t,"CardMedia",(function(){return Ve})),n.d(t,"Checkbox",(function(){return He.a})),n.d(t,"Chip",(function(){return qe.a})),n.d(t,"CircularProgress",(function(){return Ke})),n.d(t,"ClickAwayListener",(function(){return et})),n.d(t,"Collapse",(function(){return ot})),n.d(t,"Container",(function(){return st})),n.d(t,"CssBaseline",(function(){return ct.a})),n.d(t,"Dialog",(function(){return ht})),n.d(t,"DialogActions",(function(){return vt})),n.d(t,"DialogContent",(function(){return yt})),n.d(t,"DialogContentText",(function(){return xt})),n.d(t,"DialogTitle",(function(){return Ot})),n.d(t,"Divider",(function(){return kt.a})),n.d(t,"Drawer",(function(){return Et.a})),n.d(t,"ExpansionPanel",(function(){return Dt})),n.d(t,"ExpansionPanelActions",(function(){return Mt})),n.d(t,"ExpansionPanelDetails",(function(){return Pt})),n.d(t,"ExpansionPanelSummary",(function(){return Bt})),n.d(t,"Fab",(function(){return Ut})),n.d(t,"Fade",(function(){return ft.a})),n.d(t,"FilledInput",(function(){return Vt.a})),n.d(t,"FormControl",(function(){return Ht.a})),n.d(t,"useFormControl",(function(){return qt.useFormControl})),n.d(t,"FormControlLabel",(function(){return Gt.a})),n.d(t,"FormGroup",(function(){return $t.a})),n.d(t,"FormHelperText",(function(){return Kt.a})),n.d(t,"FormLabel",(function(){return Xt.a})),n.d(t,"Grid",(function(){return Yt.a})),n.d(t,"GridList",(function(){return Zt})),n.d(t,"GridListTile",(function(){return rn})),n.d(t,"GridListTileBar",(function(){return on})),n.d(t,"Grow",(function(){return un.a})),n.d(t,"Hidden",(function(){return sn.a})),n.d(t,"Icon",(function(){return ln})),n.d(t,"IconButton",(function(){return zt.a})),n.d(t,"Input",(function(){return fn.a})),n.d(t,"InputAdornment",(function(){return hn})),n.d(t,"InputBase",(function(){return mn.a})),n.d(t,"InputLabel",(function(){return vn.a})),n.d(t,"LinearProgress",(function(){return yn})),n.d(t,"Link",(function(){return wn})),n.d(t,"List",(function(){return On.a})),n.d(t,"ListItem",(function(){return kn.a})),n.d(t,"ListItemAvatar",(function(){return Cn})),n.d(t,"ListItemIcon",(function(){return jn})),n.d(t,"ListItemSecondaryAction",(function(){return Tn})),n.d(t,"ListItemText",(function(){return Nn.a})),n.d(t,"ListSubheader",(function(){return Rn.a})),n.d(t,"Menu",(function(){return Dn.a})),n.d(t,"MenuItem",(function(){return In.a})),n.d(t,"MenuList",(function(){return Mn.a})),n.d(t,"MobileStepper",(function(){return Pn})),n.d(t,"Modal",(function(){return lt.a})),n.d(t,"ModalManager",(function(){return zn.a})),n.d(t,"NativeSelect",(function(){return Ln.a})),n.d(t,"NoSsr",(function(){return Wn})),n.d(t,"OutlinedInput",(function(){return Un.a})),n.d(t,"Paper",(function(){return R.a})),n.d(t,"Popover",(function(){return Vn.a})),n.d(t,"Popper",(function(){return Hn.a})),n.d(t,"Portal",(function(){return qn.a})),n.d(t,"Radio",(function(){return nr})),n.d(t,"RadioGroup",(function(){return ir})),n.d(t,"useRadioGroup",(function(){return Zn})),n.d(t,"RootRef",(function(){return hr})),n.d(t,"Select",(function(){return mr.a})),n.d(t,"Slide",(function(){return vr.a})),n.d(t,"Slider",(function(){return Ar})),n.d(t,"Snackbar",(function(){return Dr})),n.d(t,"SnackbarContent",(function(){return Nr})),n.d(t,"Step",(function(){return Mr})),n.d(t,"StepButton",(function(){return qr})),n.d(t,"StepConnector",(function(){return $r})),n.d(t,"StepContent",(function(){return Xr})),n.d(t,"StepIcon",(function(){return Wr})),n.d(t,"StepLabel",(function(){return Vr})),n.d(t,"Stepper",(function(){return Zr})),n.d(t,"SvgIcon",(function(){return zr.a})),n.d(t,"SwipeableDrawer",(function(){return fi})),n.d(t,"Switch",(function(){return pi})),n.d(t,"Tab",(function(){return mi})),n.d(t,"Table",(function(){return vi.a})),n.d(t,"TableBody",(function(){return gi.a})),n.d(t,"TableCell",(function(){return yi.a})),n.d(t,"TableContainer",(function(){return xi})),n.d(t,"TableFooter",(function(){return wi.a})),n.d(t,"TableHead",(function(){return Oi.a})),n.d(t,"TablePagination",(function(){return ki.a})),n.d(t,"TableRow",(function(){return Ei.a})),n.d(t,"TableSortLabel",(function(){return Si.a})),n.d(t,"Tabs",(function(){return Wi})),n.d(t,"TextField",(function(){return Ui.a})),n.d(t,"TextareaAutosize",(function(){return Vi.a})),n.d(t,"Toolbar",(function(){return Hi.a})),n.d(t,"Tooltip",(function(){return qi.a})),n.d(t,"Typography",(function(){return Oe.a})),n.d(t,"useMediaQuery",(function(){return Gi.a})),n.d(t,"useScrollTrigger",(function(){return Xi})),n.d(t,"withMobileDialog",(function(){return Ji})),n.d(t,"withWidth",(function(){return Yi.a})),n.d(t,"isWidthUp",(function(){return Zi.b})),n.d(t,"isWidthDown",(function(){return Zi.a})),n.d(t,"Zoom",(function(){return ta}));var r={};n.r(r),n.d(r,"common",(function(){return i.a})),n.d(r,"red",(function(){return a.a})),n.d(r,"pink",(function(){return o.a})),n.d(r,"purple",(function(){return u})),n.d(r,"deepPurple",(function(){return s})),n.d(r,"indigo",(function(){return c.a})),n.d(r,"blue",(function(){return l.a})),n.d(r,"lightBlue",(function(){return f})),n.d(r,"cyan",(function(){return d})),n.d(r,"teal",(function(){return p})),n.d(r,"green",(function(){return h.a})),n.d(r,"lightGreen",(function(){return m})),n.d(r,"lime",(function(){return v})),n.d(r,"yellow",(function(){return g})),n.d(r,"amber",(function(){return y})),n.d(r,"orange",(function(){return b.a})),n.d(r,"deepOrange",(function(){return x})),n.d(r,"brown",(function(){return w})),n.d(r,"grey",(function(){return O.a})),n.d(r,"blueGrey",(function(){return k}));var i=n(81),a=n(101),o=n(100),u={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},s={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},c=n(99),l=n(103),f={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},d={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"},p={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},h=n(104),m={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"},v={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},g={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},y={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},b=n(102),x={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},w={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},O=n(98),k={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"},E=n(63),S=n(70),C=n(3),_=n(5),j=n(0),A=(n(8),n(4)),T=n(7),N=n(12),R=n(170),D=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.color,a=void 0===i?"primary":i,o=e.position,u=void 0===o?"fixed":o,s=Object(_.a)(e,["classes","className","color","position"]);return j.createElement(R.a,Object(C.a)({square:!0,component:"header",elevation:4,className:Object(A.a)(n.root,n["position".concat(Object(N.a)(u))],n["color".concat(Object(N.a)(a))],r,"fixed"===u&&"mui-fixed"),ref:t},s))})),I=Object(T.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static",transform:"translateZ(0)"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(D),M=n(22),F=Object(M.a)(j.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var P=j.forwardRef((function(e,t){var n=e.alt,r=e.children,i=e.classes,a=e.className,o=e.component,u=void 0===o?"div":o,s=e.imgProps,c=e.sizes,l=e.src,f=e.srcSet,d=e.variant,p=void 0===d?"circle":d,h=Object(_.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),m=null,v=function(e){var t=e.src,n=e.srcSet,r=j.useState(!1),i=r[0],a=r[1];return j.useEffect((function(){if(t||n){a(!1);var e=!0,r=new Image;return r.src=t,r.srcSet=n,r.onload=function(){e&&a("loaded")},r.onerror=function(){e&&a("error")},function(){e=!1}}}),[t,n]),i}({src:l,srcSet:f}),g=l||f,y=g&&"error"!==v;return m=y?j.createElement("img",Object(C.a)({alt:n,src:l,srcSet:f,sizes:c,className:i.img},s)):null!=r?r:g&&n?n[0]:j.createElement(F,{className:i.fallback}),j.createElement(u,Object(C.a)({className:Object(A.a)(i.root,i.system,i[p],a,!y&&i.colorDefault),ref:t},h),m)})),z=Object(T.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(P),L=n(446),B=j.forwardRef((function(e,t){var n=e.anchorOrigin,r=void 0===n?{vertical:"top",horizontal:"right"}:n,i=e.badgeContent,a=e.children,o=e.classes,u=e.className,s=e.color,c=void 0===s?"default":s,l=e.component,f=void 0===l?"span":l,d=e.invisible,p=e.max,h=void 0===p?99:p,m=e.overlap,v=void 0===m?"rectangle":m,g=e.showZero,y=void 0!==g&&g,b=e.variant,x=void 0===b?"standard":b,w=Object(_.a)(e,["anchorOrigin","badgeContent","children","classes","className","color","component","invisible","max","overlap","showZero","variant"]),O=d;null==d&&(0===i&&!y||null==i&&"dot"!==x)&&(O=!0);var k="";return"dot"!==x&&(k=i>h?"".concat(h,"+"):i),j.createElement(f,Object(C.a)({className:Object(A.a)(o.root,u),ref:t},w),a,j.createElement("span",{className:Object(A.a)(o.badge,o["".concat(r.horizontal).concat(Object(N.a)(r.vertical),"}")],o["anchorOrigin".concat(Object(N.a)(r.vertical)).concat(Object(N.a)(r.horizontal)).concat(Object(N.a)(v))],"default"!==c&&o["color".concat(Object(N.a)(c))],O&&o.invisible,"dot"===x&&o.dot)},k))})),W=Object(T.a)((function(e){return{root:{position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0},badge:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorError:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText},dot:{borderRadius:4,height:8,minWidth:8,padding:0},anchorOriginTopRightRectangle:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightRectangle:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftRectangle:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftRectangle:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginTopRightCircle:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightCircle:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftCircle:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftCircle:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},invisible:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}}),{name:"MuiBadge"})(B),U=(n(46),j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.component,o=void 0===a?"div":a,u=e.onChange,s=e.showLabels,c=void 0!==s&&s,l=e.value,f=Object(_.a)(e,["children","classes","className","component","onChange","showLabels","value"]);return j.createElement(o,Object(C.a)({className:Object(A.a)(r.root,i),ref:t},f),j.Children.map(n,(function(e,t){if(!j.isValidElement(e))return null;var n=void 0===e.props.value?t:e.props.value;return j.cloneElement(e,{selected:n===l,showLabel:void 0!==e.props.showLabel?e.props.showLabel:c,value:n,onChange:u})})))}))),V=Object(T.a)((function(e){return{root:{display:"flex",justifyContent:"center",height:56,backgroundColor:e.palette.background.paper}}}),{name:"MuiBottomNavigation"})(U),H=n(227),q=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.icon,a=e.label,o=e.onChange,u=e.onClick,s=e.selected,c=e.showLabel,l=e.value,f=Object(_.a)(e,["classes","className","icon","label","onChange","onClick","selected","showLabel","value"]);return j.createElement(H.a,Object(C.a)({ref:t,className:Object(A.a)(n.root,r,s?n.selected:!c&&n.iconOnly),focusRipple:!0,onClick:function(e){o&&o(e,l),u&&u(e)}},f),j.createElement("span",{className:n.wrapper},i,j.createElement("span",{className:Object(A.a)(n.label,s?n.selected:!c&&n.iconOnly)},a)))})),G=Object(T.a)((function(e){return{root:{transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"6px 12px 8px",minWidth:80,maxWidth:168,color:e.palette.text.secondary,flex:"1","&$iconOnly":{paddingTop:16},"&$selected":{paddingTop:6,color:e.palette.primary.main}},selected:{},iconOnly:{},wrapper:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",flexDirection:"column"},label:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s","&$iconOnly":{opacity:0,transitionDelay:"0s"},"&$selected":{fontSize:e.typography.pxToRem(14)}}}}),{name:"MuiBottomNavigationAction"})(q),$=n(23),K=n(72);var X=function(e){var t=function(t){var n=e(t);return t.css?Object(C.a)({},Object(K.a)(n,e(Object(C.a)({theme:t.theme},t.css))),{},function(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}(t.css,[e.filterProps])):n};return t.propTypes={},t.filterProps=["css"].concat(Object($.a)(e.filterProps)),t};var Y=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){return t.reduce((function(t,n){var r=n(e);return r?Object(K.a)(t,r):t}),{})};return r.propTypes={},r.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),r},J=n(15),Z=n(168);function Q(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var ee=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=Q(e.theme,i)||{};return Object(Z.a)(e,n,(function(e){var t;return"function"===typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=Q(o,e)||e,a&&(t=a(t))),!1===r?t:Object(J.a)({},r,t)}))};return o.propTypes={},o.filterProps=[t],o};function te(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var ne=Y(ee({prop:"border",themeKey:"borders",transform:te}),ee({prop:"borderTop",themeKey:"borders",transform:te}),ee({prop:"borderRight",themeKey:"borders",transform:te}),ee({prop:"borderBottom",themeKey:"borders",transform:te}),ee({prop:"borderLeft",themeKey:"borders",transform:te}),ee({prop:"borderColor",themeKey:"palette"}),ee({prop:"borderRadius",themeKey:"shape"})),re=Y(ee({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),ee({prop:"display"}),ee({prop:"overflow"}),ee({prop:"textOverflow"}),ee({prop:"visibility"}),ee({prop:"whiteSpace"})),ie=Y(ee({prop:"flexBasis"}),ee({prop:"flexDirection"}),ee({prop:"flexWrap"}),ee({prop:"justifyContent"}),ee({prop:"alignItems"}),ee({prop:"alignContent"}),ee({prop:"order"}),ee({prop:"flex"}),ee({prop:"flexGrow"}),ee({prop:"flexShrink"}),ee({prop:"alignSelf"}),ee({prop:"justifyItems"}),ee({prop:"justifySelf"})),ae=Y(ee({prop:"gridGap"}),ee({prop:"gridColumnGap"}),ee({prop:"gridRowGap"}),ee({prop:"gridColumn"}),ee({prop:"gridRow"}),ee({prop:"gridAutoFlow"}),ee({prop:"gridAutoColumns"}),ee({prop:"gridAutoRows"}),ee({prop:"gridTemplateColumns"}),ee({prop:"gridTemplateRows"}),ee({prop:"gridTemplateAreas"}),ee({prop:"gridArea"})),oe=Y(ee({prop:"position"}),ee({prop:"zIndex",themeKey:"zIndex"}),ee({prop:"top"}),ee({prop:"right"}),ee({prop:"bottom"}),ee({prop:"left"})),ue=Y(ee({prop:"color",themeKey:"palette"}),ee({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),se=ee({prop:"boxShadow",themeKey:"shadows"});function ce(e){return e<=1?"".concat(100*e,"%"):e}var le=ee({prop:"width",transform:ce}),fe=ee({prop:"maxWidth",transform:ce}),de=ee({prop:"minWidth",transform:ce}),pe=ee({prop:"height",transform:ce}),he=ee({prop:"maxHeight",transform:ce}),me=ee({prop:"minHeight",transform:ce}),ve=(ee({prop:"size",cssProperty:"width",transform:ce}),ee({prop:"size",cssProperty:"height",transform:ce}),Y(le,fe,de,pe,he,me,ee({prop:"boxSizing"}))),ge=n(475),ye=Y(ee({prop:"fontFamily",themeKey:"typography"}),ee({prop:"fontSize",themeKey:"typography"}),ee({prop:"fontStyle",themeKey:"typography"}),ee({prop:"fontWeight",themeKey:"typography"}),ee({prop:"letterSpacing"}),ee({prop:"lineHeight"}),ee({prop:"textAlign"})),be=n(159),xe=X(Y(ne,re,ie,ae,oe,ue,se,ve,ge.b,ye)),we=Object(be.a)("div")(xe,{name:"MuiBox"}),Oe=n(85),ke=n(13),Ee=Object(M.a)(j.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var Se=Object(T.a)((function(e){return{root:{display:"flex",marginLeft:e.spacing(.5),marginRight:e.spacing(.5),backgroundColor:e.palette.grey[100],color:e.palette.grey[700],borderRadius:2,cursor:"pointer","&:hover, &:focus":{backgroundColor:e.palette.grey[200]},"&:active":{boxShadow:e.shadows[0],backgroundColor:Object(ke.c)(e.palette.grey[200],.12)}},icon:{width:24,height:16}}}),{name:"PrivateBreadcrumbCollapsed"})((function(e){var t=e.classes,n=Object(_.a)(e,["classes"]);return j.createElement(H.a,Object(C.a)({component:"li",className:t.root,focusRipple:!0},n),j.createElement(Ee,{className:t.icon}))}));var Ce=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.component,o=void 0===a?"nav":a,u=e.expandText,s=void 0===u?"Show path":u,c=e.itemsAfterCollapse,l=void 0===c?1:c,f=e.itemsBeforeCollapse,d=void 0===f?1:f,p=e.maxItems,h=void 0===p?8:p,m=e.separator,v=void 0===m?"/":m,g=Object(_.a)(e,["children","classes","className","component","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"]),y=j.useState(!1),b=y[0],x=y[1],w=j.Children.toArray(n).filter((function(e){return j.isValidElement(e)})).map((function(e,t){return j.createElement("li",{className:r.li,key:"child-".concat(t)},e)}));return j.createElement(Oe.a,Object(C.a)({ref:t,component:o,color:"textSecondary",className:Object(A.a)(r.root,i)},g),j.createElement("ol",{className:r.ol},function(e,t,n){return e.reduce((function(r,i,a){return a<e.length-1?r=r.concat(i,j.createElement("li",{"aria-hidden":!0,key:"separator-".concat(a),className:t},n)):r.push(i),r}),[])}(b||h&&w.length<=h?w:function(e){return d+l>=e.length?e:[].concat(Object($.a)(e.slice(0,d)),[j.createElement(Se,{"aria-label":s,key:"ellipsis",onClick:function(e){x(!0);var t=e.currentTarget.parentNode.querySelector("a[href],button,[tabindex]");t&&t.focus()}})],Object($.a)(e.slice(e.length-l,e.length)))}(w),r.separator,v)))})),_e=Object(T.a)({root:{},ol:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"},li:{},separator:{display:"flex",userSelect:"none",marginLeft:8,marginRight:8}},{name:"MuiBreadcrumbs"})(Ce),je=n(304);je.a.styles;var Ae=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.color,o=void 0===a?"default":a,u=e.component,s=void 0===u?"div":u,c=e.disabled,l=void 0!==c&&c,f=e.disableFocusRipple,d=void 0!==f&&f,p=e.disableRipple,h=void 0!==p&&p,m=e.fullWidth,v=void 0!==m&&m,g=e.orientation,y=void 0===g?"horizontal":g,b=e.size,x=void 0===b?"medium":b,w=e.variant,O=void 0===w?"outlined":w,k=Object(_.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"]),E=Object(A.a)(r.grouped,r["grouped".concat(Object(N.a)(y))],r["grouped".concat(Object(N.a)(O))],r["grouped".concat(Object(N.a)(O)).concat(Object(N.a)(y))],r["grouped".concat(Object(N.a)(O)).concat("default"!==o?Object(N.a)(o):"")],l&&r.disabled);return j.createElement(s,Object(C.a)({role:"group",className:Object(A.a)(r.root,i,v&&r.fullWidth,"contained"===O&&r.contained,"vertical"===y&&r.vertical),ref:t},k),j.Children.map(n,(function(e){return j.isValidElement(e)?j.cloneElement(e,{className:Object(A.a)(E,e.props.className),disabled:e.props.disabled||l,color:e.props.color||o,disableFocusRipple:d,disableRipple:h,fullWidth:v,size:e.props.size||x,variant:e.props.variant||O}):null})))})),Te=Object(T.a)((function(e){return{root:{display:"inline-flex",borderRadius:e.shape.borderRadius},contained:{boxShadow:e.shadows[2]},disabled:{},fullWidth:{width:"100%"},vertical:{flexDirection:"column"},grouped:{minWidth:40},groupedHorizontal:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{borderTopRightRadius:0,borderTopLeftRadius:0},"&:not(:last-child)":{borderBottomRightRadius:0,borderBottomLeftRadius:0}},groupedText:{},groupedTextHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")}},groupedTextPrimary:{"&:not(:last-child)":{borderColor:Object(ke.d)(e.palette.primary.main,.5)}},groupedTextSecondary:{"&:not(:last-child)":{borderColor:Object(ke.d)(e.palette.secondary.main,.5)}},groupedOutlined:{},groupedOutlinedHorizontal:{"&:not(:first-child)":{marginLeft:-1},"&:not(:last-child)":{borderRightColor:"transparent"}},groupedOutlinedVertical:{"&:not(:first-child)":{marginTop:-1},"&:not(:last-child)":{borderBottomColor:"transparent"}},groupedOutlinedPrimary:{"&:hover":{borderColor:e.palette.primary.main}},groupedOutlinedSecondary:{"&:hover":{borderColor:e.palette.secondary.main}},groupedContained:{boxShadow:"none"},groupedContainedHorizontal:{"&:not(:last-child)":{borderRight:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderRight:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedVertical:{"&:not(:last-child)":{borderBottom:"1px solid ".concat(e.palette.grey[400]),"&$disabled":{borderBottom:"1px solid ".concat(e.palette.action.disabled)}}},groupedContainedPrimary:{"&:not(:last-child)":{borderColor:e.palette.primary.dark}},groupedContainedSecondary:{"&:not(:last-child)":{borderColor:e.palette.secondary.dark}}}}),{name:"MuiButtonGroup"})(Ae),Ne=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.raised,a=void 0!==i&&i,o=Object(_.a)(e,["classes","className","raised"]);return j.createElement(R.a,Object(C.a)({className:Object(A.a)(n.root,r),elevation:a?8:1,ref:t},o))})),Re=Object(T.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(Ne),De=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.focusVisibleClassName,o=Object(_.a)(e,["children","classes","className","focusVisibleClassName"]);return j.createElement(H.a,Object(C.a)({className:Object(A.a)(r.root,i),focusVisibleClassName:Object(A.a)(a,r.focusVisible),ref:t},o),n,j.createElement("span",{className:r.focusHighlight}))})),Ie=Object(T.a)((function(e){return{root:{display:"block",textAlign:"inherit",width:"100%","&:hover $focusHighlight":{opacity:e.palette.action.hoverOpacity},"&$focusVisible $focusHighlight":{opacity:.12}},focusVisible:{},focusHighlight:{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}}),{name:"MuiCardActionArea"})(De),Me=j.forwardRef((function(e,t){var n=e.disableSpacing,r=void 0!==n&&n,i=e.classes,a=e.className,o=Object(_.a)(e,["disableSpacing","classes","className"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(i.root,a,!r&&i.spacing),ref:t},o))})),Fe=Object(T.a)({root:{display:"flex",alignItems:"center",padding:8},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiCardActions"})(Me),Pe=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.component,a=void 0===i?"div":i,o=Object(_.a)(e,["classes","className","component"]);return j.createElement(a,Object(C.a)({className:Object(A.a)(n.root,r),ref:t},o))})),ze=Object(T.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(Pe),Le=j.forwardRef((function(e,t){var n=e.action,r=e.avatar,i=e.classes,a=e.className,o=e.component,u=void 0===o?"div":o,s=e.disableTypography,c=void 0!==s&&s,l=e.subheader,f=e.subheaderTypographyProps,d=e.title,p=e.titleTypographyProps,h=Object(_.a)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),m=d;null==m||m.type===Oe.a||c||(m=j.createElement(Oe.a,Object(C.a)({variant:r?"body2":"h5",className:i.title,component:"span",display:"block"},p),m));var v=l;return null==v||v.type===Oe.a||c||(v=j.createElement(Oe.a,Object(C.a)({variant:r?"body2":"body1",className:i.subheader,color:"textSecondary",component:"span",display:"block"},f),v)),j.createElement(u,Object(C.a)({className:Object(A.a)(i.root,a),ref:t},h),r&&j.createElement("div",{className:i.avatar},r),j.createElement("div",{className:i.content},m,v),n&&j.createElement("div",{className:i.action},n))})),Be=Object(T.a)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(Le),We=["video","audio","picture","iframe","img"],Ue=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.component,o=void 0===a?"div":a,u=e.image,s=e.src,c=e.style,l=Object(_.a)(e,["children","classes","className","component","image","src","style"]),f=-1!==We.indexOf(o),d=!f&&u?Object(C.a)({backgroundImage:'url("'.concat(u,'")')},c):c;return j.createElement(o,Object(C.a)({className:Object(A.a)(r.root,i,f&&r.media,-1!=="picture img".indexOf(o)&&r.img),ref:t,style:d,src:f?u||s:void 0},l),n)})),Ve=Object(T.a)({root:{display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},media:{width:"100%"},img:{objectFit:"cover"}},{name:"MuiCardMedia"})(Ue),He=n(310),qe=n(311);function Ge(e){var t,n,r;return t=e,n=0,r=1,e=(Math.min(Math.max(n,t),r)-n)/(r-n),e=(e-=1)*e*e+1}var $e=j.forwardRef((function(e,t){var n,r=e.classes,i=e.className,a=e.color,o=void 0===a?"primary":a,u=e.disableShrink,s=void 0!==u&&u,c=e.size,l=void 0===c?40:c,f=e.style,d=e.thickness,p=void 0===d?3.6:d,h=e.value,m=void 0===h?0:h,v=e.variant,g=void 0===v?"indeterminate":v,y=Object(_.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),b={},x={},w={};if("determinate"===g||"static"===g){var O=2*Math.PI*((44-p)/2);b.strokeDasharray=O.toFixed(3),w["aria-valuenow"]=Math.round(m),"static"===g?(b.strokeDashoffset="".concat(((100-m)/100*O).toFixed(3),"px"),x.transform="rotate(-90deg)"):(b.strokeDashoffset="".concat((n=(100-m)/100,n*n*O).toFixed(3),"px"),x.transform="rotate(".concat((270*Ge(m/70)).toFixed(3),"deg)"))}return j.createElement("div",Object(C.a)({className:Object(A.a)(r.root,i,"inherit"!==o&&r["color".concat(Object(N.a)(o))],{indeterminate:r.indeterminate,static:r.static}[g]),style:Object(C.a)({width:l,height:l},x,{},f),ref:t,role:"progressbar"},w,y),j.createElement("svg",{className:r.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},j.createElement("circle",{className:Object(A.a)(r.circle,s&&r.circleDisableShrink,{indeterminate:r.circleIndeterminate,static:r.circleStatic}[g]),style:b,cx:44,cy:44,r:(44-p)/2,fill:"none",strokeWidth:p})))})),Ke=Object(T.a)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes circular-rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})($e),Xe=n(20),Ye=n(27),Je=n(16),Ze=n(21);function Qe(e){return e.substring(2).toLowerCase()}var et=function(e){var t=e.children,n=e.disableReactTree,r=void 0!==n&&n,i=e.mouseEvent,a=void 0===i?"onClick":i,o=e.onClickAway,u=e.touchEvent,s=void 0===u?"onTouchEnd":u,c=j.useRef(!1),l=j.useRef(null),f=j.useRef(!1),d=j.useRef(!1);j.useEffect((function(){return f.current=!0,function(){f.current=!1}}),[]);var p=j.useCallback((function(e){l.current=Xe.findDOMNode(e)}),[]),h=Object(Je.a)(t.ref,p),m=Object(Ze.a)((function(e){var t=d.current;if(d.current=!1,f.current&&l.current)if(c.current)c.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(l.current)>-1;else{var i=Object(Ye.a)(l.current);n=!(i.documentElement&&i.documentElement.contains(e.target))||l.current.contains(e.target)}n||!r&&t||o(e)}})),v=function(e){return function(n){d.current=!0;var r=t.props[e];r&&r(n)}},g={ref:h};return!1!==s&&(g[s]=v(s)),j.useEffect((function(){if(!1!==s){var e=Qe(s),t=Object(Ye.a)(l.current),n=function(){c.current=!0};return t.addEventListener(e,m),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,m),t.removeEventListener("touchmove",n)}}}),[m,s]),!1!==a&&(g[a]=v(a)),j.useEffect((function(){if(!1!==a){var e=Qe(a),t=Object(Ye.a)(l.current);return t.addEventListener(e,m),function(){t.removeEventListener(e,m)}}}),[m,a]),j.createElement(j.Fragment,null,j.cloneElement(t,g))},tt=n(228),nt=n(26),rt=n(28),it=n(19),at=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.collapsedHeight,o=void 0===a?"0px":a,u=e.component,s=void 0===u?"div":u,c=e.in,l=e.onEnter,f=e.onEntered,d=e.onEntering,p=e.onExit,h=e.onExiting,m=e.style,v=e.timeout,g=void 0===v?nt.b.standard:v,y=Object(_.a)(e,["children","classes","className","collapsedHeight","component","in","onEnter","onEntered","onEntering","onExit","onExiting","style","timeout"]),b=Object(it.a)(),x=j.useRef(),w=j.useRef(null),O=j.useRef(),k="number"===typeof o?"".concat(o,"px"):o;j.useEffect((function(){return function(){clearTimeout(x.current)}}),[]);return j.createElement(tt.a,Object(C.a)({in:c,onEnter:function(e,t){e.style.height=k,l&&l(e,t)},onEntered:function(e,t){e.style.height="auto",f&&f(e,t)},onEntering:function(e,t){var n=w.current?w.current.clientHeight:0,r=Object(rt.a)({style:m,timeout:g},{mode:"enter"}).duration;if("auto"===g){var i=b.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(i,"ms"),O.current=i}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style.height="".concat(n,"px"),d&&d(e,t)},onExit:function(e){var t=w.current?w.current.clientHeight:0;e.style.height="".concat(t,"px"),p&&p(e)},onExiting:function(e){var t=w.current?w.current.clientHeight:0,n=Object(rt.a)({style:m,timeout:g},{mode:"exit"}).duration;if("auto"===g){var r=b.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(r,"ms"),O.current=r}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style.height=k,h&&h(e)},addEndListener:function(e,t){"auto"===g&&(x.current=setTimeout(t,O.current||0))},timeout:"auto"===g?null:g},y),(function(e,a){return j.createElement(s,Object(C.a)({className:Object(A.a)(r.container,i,{entered:r.entered,exited:!c&&"0px"===k&&r.hidden}[e]),style:Object(C.a)({minHeight:k},m),ref:t},a),j.createElement("div",{className:r.wrapper,ref:w},j.createElement("div",{className:r.wrapperInner},n)))}))}));at.muiSupportAuto=!0;var ot=Object(T.a)((function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(at),ut=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.component,a=void 0===i?"div":i,o=e.disableGutters,u=void 0!==o&&o,s=e.fixed,c=void 0!==s&&s,l=e.maxWidth,f=void 0===l?"lg":l,d=Object(_.a)(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return j.createElement(a,Object(C.a)({className:Object(A.a)(n.root,r,c&&n.fixed,u&&n.disableGutters,!1!==f&&n["maxWidth".concat(Object(N.a)(String(f)))]),ref:t},d))})),st=Object(T.a)((function(e){return{root:Object(J.a)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:Object(J.a)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:Object(J.a)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:Object(J.a)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:Object(J.a)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:Object(J.a)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(ut),ct=n(470),lt=n(182),ft=n(447),dt={enter:nt.b.enteringScreen,exit:nt.b.leavingScreen},pt=j.forwardRef((function(e,t){var n=e.BackdropProps,r=e.children,i=e.classes,a=e.className,o=e.disableBackdropClick,u=void 0!==o&&o,s=e.disableEscapeKeyDown,c=void 0!==s&&s,l=e.fullScreen,f=void 0!==l&&l,d=e.fullWidth,p=void 0!==d&&d,h=e.maxWidth,m=void 0===h?"sm":h,v=e.onBackdropClick,g=e.onClose,y=e.onEnter,b=e.onEntered,x=e.onEntering,w=e.onEscapeKeyDown,O=e.onExit,k=e.onExited,E=e.onExiting,S=e.open,T=e.PaperComponent,D=void 0===T?R.a:T,I=e.PaperProps,M=void 0===I?{}:I,F=e.scroll,P=void 0===F?"paper":F,z=e.TransitionComponent,B=void 0===z?ft.a:z,W=e.transitionDuration,U=void 0===W?dt:W,V=e.TransitionProps,H=e["aria-describedby"],q=e["aria-labelledby"],G=Object(_.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),$=j.useRef();return j.createElement(lt.a,Object(C.a)({className:Object(A.a)(i.root,a),BackdropComponent:L.a,BackdropProps:Object(C.a)({transitionDuration:U},n),closeAfterTransition:!0,disableBackdropClick:u,disableEscapeKeyDown:c,onEscapeKeyDown:w,onClose:g,open:S,ref:t},G),j.createElement(B,Object(C.a)({appear:!0,in:S,timeout:U,onEnter:y,onEntering:x,onEntered:b,onExit:O,onExiting:E,onExited:k,role:"none presentation"},V),j.createElement("div",{className:Object(A.a)(i.container,i["scroll".concat(Object(N.a)(P))]),onClick:function(e){e.target===e.currentTarget&&e.target===$.current&&($.current=null,v&&v(e),!u&&g&&g(e,"backdropClick"))},onMouseDown:function(e){$.current=e.target}},j.createElement(D,Object(C.a)({elevation:24,role:"dialog","aria-describedby":H,"aria-labelledby":q},M,{className:Object(A.a)(i.paper,i["paperScroll".concat(Object(N.a)(P))],i["paperWidth".concat(Object(N.a)(String(m)))],M.className,f&&i.paperFullScreen,p&&i.paperFullWidth)}),r))))})),ht=Object(T.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(J.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(J.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(J.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(J.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(J.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(pt),mt=j.forwardRef((function(e,t){var n=e.disableSpacing,r=void 0!==n&&n,i=e.classes,a=e.className,o=Object(_.a)(e,["disableSpacing","classes","className"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(i.root,a,!r&&i.spacing),ref:t},o))})),vt=Object(T.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(mt),gt=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.dividers,a=void 0!==i&&i,o=Object(_.a)(e,["classes","className","dividers"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(n.root,r,a&&n.dividers),ref:t},o))})),yt=Object(T.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(gt),bt=j.forwardRef((function(e,t){return j.createElement(Oe.a,Object(C.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))})),xt=Object(T.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(bt),wt=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.disableTypography,o=void 0!==a&&a,u=Object(_.a)(e,["children","classes","className","disableTypography"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(r.root,i),ref:t},u),o?n:j.createElement(Oe.a,{component:"h2",variant:"h6"},n))})),Ot=Object(T.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(wt),kt=n(468),Et=n(51),St=n(166),Ct=n(164),_t=n(97),jt=n(167);var At=n(41);var Tt=j.createContext({}),Nt=n(40),Rt=j.forwardRef((function(e,t){var n,r=e.children,i=e.classes,a=e.className,o=e.defaultExpanded,u=void 0!==o&&o,s=e.disabled,c=void 0!==s&&s,l=e.expanded,f=e.onChange,d=e.square,p=void 0!==d&&d,h=e.TransitionComponent,m=void 0===h?ot:h,v=e.TransitionProps,g=Object(_.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),y=Object(Nt.a)({controlled:l,default:u,name:"ExpansionPanel",state:"expanded"}),b=Object(At.a)(y,2),x=b[0],w=b[1],O=j.useCallback((function(e){w(!x),f&&f(e,!x)}),[x,f,w]),k=j.Children.toArray(r),E=(n=k,Object(St.a)(n)||Object(Ct.a)(n)||Object(_t.a)(n)||Object(jt.a)()),S=E[0],T=E.slice(1),N=j.useMemo((function(){return{expanded:x,disabled:c,toggle:O}}),[x,c,O]);return j.createElement(R.a,Object(C.a)({className:Object(A.a)(i.root,a,x&&i.expanded,c&&i.disabled,!p&&i.rounded),ref:t,square:p},g),j.createElement(Tt.Provider,{value:N},S),j.createElement(m,Object(C.a)({in:x,timeout:"auto"},v),j.createElement("div",{"aria-labelledby":S.props.id,id:S.props["aria-controls"],role:"region"},T)))})),Dt=Object(T.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiExpansionPanel"})(Rt),It=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.disableSpacing,a=void 0!==i&&i,o=Object(_.a)(e,["classes","className","disableSpacing"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(n.root,r,!a&&n.spacing),ref:t},o))})),Mt=Object(T.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiExpansionPanelActions"})(It),Ft=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=Object(_.a)(e,["classes","className"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(n.root,r),ref:t},i))})),Pt=Object(T.a)({root:{display:"flex",padding:"8px 24px 24px"}},{name:"MuiExpansionPanelDetails"})(Ft),zt=n(216),Lt=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.expandIcon,o=e.IconButtonProps,u=e.onBlur,s=e.onClick,c=e.onFocusVisible,l=Object(_.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),f=j.useState(!1),d=f[0],p=f[1],h=j.useContext(Tt),m=h.disabled,v=void 0!==m&&m,g=h.expanded,y=h.toggle;return j.createElement(H.a,Object(C.a)({focusRipple:!1,disableRipple:!0,disabled:v,component:"div","aria-expanded":g,className:Object(A.a)(r.root,i,v&&r.disabled,g&&r.expanded,d&&r.focused),onFocusVisible:function(e){p(!0),c&&c(e)},onBlur:function(e){p(!1),u&&u(e)},onClick:function(e){y&&y(e),s&&s(e)},ref:t},l),j.createElement("div",{className:Object(A.a)(r.content,g&&r.expanded)},n),a&&j.createElement(zt.a,Object(C.a)({className:Object(A.a)(r.expandIcon,g&&r.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},o),a))})),Bt=Object(T.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,3),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.grey[300]},"&$disabled":{opacity:.38}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiExpansionPanelSummary"})(Lt),Wt=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.color,o=void 0===a?"default":a,u=e.component,s=void 0===u?"button":u,c=e.disabled,l=void 0!==c&&c,f=e.disableFocusRipple,d=void 0!==f&&f,p=e.focusVisibleClassName,h=e.size,m=void 0===h?"large":h,v=e.variant,g=void 0===v?"round":v,y=Object(_.a)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return j.createElement(H.a,Object(C.a)({className:Object(A.a)(r.root,i,"round"!==g&&r.extended,"large"!==m&&r["size".concat(Object(N.a)(m))],l&&r.disabled,{primary:r.primary,secondary:r.secondary,inherit:r.colorInherit}[o]),component:s,disabled:l,focusRipple:!d,focusVisibleClassName:Object(A.a)(r.focusVisible,p),ref:t},y),j.createElement("span",{className:r.label},n))})),Ut=Object(T.a)((function(e){return{root:Object(C.a)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(Wt),Vt=n(450),Ht=n(218),qt=n(75),Gt=n(305),$t=n(306),Kt=n(452),Xt=n(453),Yt=n(472),Jt=j.forwardRef((function(e,t){var n=e.cellHeight,r=void 0===n?180:n,i=e.children,a=e.classes,o=e.className,u=e.cols,s=void 0===u?2:u,c=e.component,l=void 0===c?"ul":c,f=e.spacing,d=void 0===f?4:f,p=e.style,h=Object(_.a)(e,["cellHeight","children","classes","className","cols","component","spacing","style"]);return j.createElement(l,Object(C.a)({className:Object(A.a)(a.root,o),ref:t,style:Object(C.a)({margin:-d/2},p)},h),j.Children.map(i,(function(e){if(!j.isValidElement(e))return null;var t=e.props.cols||1,n=e.props.rows||1;return j.cloneElement(e,{style:Object(C.a)({width:"".concat(100/s*t,"%"),height:"auto"===r?"auto":r*n+d,padding:d/2},e.props.style)})})))})),Zt=Object(T.a)({root:{display:"flex",flexWrap:"wrap",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"}},{name:"MuiGridList"})(Jt),Qt=n(37),en=n(48),tn=function(e,t){var n,r,i,a;e&&e.complete&&(e.width/e.height>e.parentElement.offsetWidth/e.parentElement.offsetHeight?((n=e.classList).remove.apply(n,Object($.a)(t.imgFullWidth.split(" "))),(r=e.classList).add.apply(r,Object($.a)(t.imgFullHeight.split(" ")))):((i=e.classList).remove.apply(i,Object($.a)(t.imgFullHeight.split(" "))),(a=e.classList).add.apply(a,Object($.a)(t.imgFullWidth.split(" ")))))};var nn=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=(e.cols,e.component),o=void 0===a?"li":a,u=(e.rows,Object(_.a)(e,["children","classes","className","cols","component","rows"])),s=j.useRef(null);return j.useEffect((function(){!function(e,t){e&&(e.complete?tn(e,t):e.addEventListener("load",(function(){tn(e,t)})))}(s.current,r)})),j.useEffect((function(){var e=Object(Qt.a)((function(){tn(s.current,r)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[r]),j.createElement(o,Object(C.a)({className:Object(A.a)(r.root,i),ref:t},u),j.createElement("div",{className:r.tile},j.Children.map(n,(function(e){return j.isValidElement(e)?"img"===e.type||Object(en.a)(e,["Image"])?j.cloneElement(e,{ref:s}):e:null}))))})),rn=Object(T.a)({root:{boxSizing:"border-box",flexShrink:0},tile:{position:"relative",display:"block",height:"100%",overflow:"hidden"},imgFullHeight:{height:"100%",transform:"translateX(-50%)",position:"relative",left:"50%"},imgFullWidth:{width:"100%",position:"relative",transform:"translateY(-50%)",top:"50%"}},{name:"MuiGridListTile"})(nn),an=j.forwardRef((function(e,t){var n=e.actionIcon,r=e.actionPosition,i=void 0===r?"right":r,a=e.classes,o=e.className,u=e.subtitle,s=e.title,c=e.titlePosition,l=void 0===c?"bottom":c,f=Object(_.a)(e,["actionIcon","actionPosition","classes","className","subtitle","title","titlePosition"]),d=n&&i;return j.createElement("div",Object(C.a)({className:Object(A.a)(a.root,o,"top"===l?a.titlePositionTop:a.titlePositionBottom,u&&a.rootSubtitle),ref:t},f),j.createElement("div",{className:Object(A.a)(a.titleWrap,{left:a.titleWrapActionPosLeft,right:a.titleWrapActionPosRight}[d])},j.createElement("div",{className:a.title},s),u?j.createElement("div",{className:a.subtitle},u):null),n?j.createElement("div",{className:Object(A.a)(a.actionIcon,"left"===d&&a.actionIconActionPosLeft)},n):null)})),on=Object(T.a)((function(e){return{root:{position:"absolute",left:0,right:0,height:48,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:e.typography.fontFamily},titlePositionBottom:{bottom:0},titlePositionTop:{top:0},rootSubtitle:{height:68},titleWrap:{flexGrow:1,marginLeft:16,marginRight:16,color:e.palette.common.white,overflow:"hidden"},titleWrapActionPosLeft:{marginLeft:0},titleWrapActionPosRight:{marginRight:0},title:{fontSize:e.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},subtitle:{fontSize:e.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},actionIcon:{},actionIconActionPosLeft:{order:-1}}}),{name:"MuiGridListTileBar"})(an),un=n(176),sn=n(474),cn=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.color,a=void 0===i?"inherit":i,o=e.component,u=void 0===o?"span":o,s=e.fontSize,c=void 0===s?"default":s,l=Object(_.a)(e,["classes","className","color","component","fontSize"]);return j.createElement(u,Object(C.a)({className:Object(A.a)("material-icons",n.root,r,"inherit"!==a&&n["color".concat(Object(N.a)(a))],"default"!==c&&n["fontSize".concat(Object(N.a)(c))]),"aria-hidden":!0,ref:t},l))}));cn.muiName="Icon";var ln=Object(T.a)((function(e){return{root:{userSelect:"none",fontSize:e.typography.pxToRem(24),width:"1em",height:"1em",overflow:"hidden",flexShrink:0},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(36)}}}),{name:"MuiIcon"})(cn),fn=n(177),dn=n(62),pn=j.forwardRef((function(e,t){var n=e.children,r=e.classes,i=e.className,a=e.component,o=void 0===a?"div":a,u=e.disablePointerEvents,s=void 0!==u&&u,c=e.disableTypography,l=void 0!==c&&c,f=e.position,d=e.variant,p=Object(_.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),h=Object(dn.b)()||{},m=d;return d&&h.variant,h&&!m&&(m=h.variant),j.createElement(dn.a.Provider,{value:null},j.createElement(o,Object(C.a)({className:Object(A.a)(r.root,i,s&&r.disablePointerEvents,h.hiddenLabel&&r.hiddenLabel,"filled"===m&&r.filled,{start:r.positionStart,end:r.positionEnd}[f],"dense"===h.margin&&r.marginDense),ref:t},p),"string"!==typeof n||l?n:j.createElement(Oe.a,{color:"textSecondary"},n)))})),hn=Object(T.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(pn),mn=n(333),vn=n(219),gn=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.color,a=void 0===i?"primary":i,o=e.value,u=e.valueBuffer,s=e.variant,c=void 0===s?"indeterminate":s,l=Object(_.a)(e,["classes","className","color","value","valueBuffer","variant"]),f=Object(it.a)(),d={},p={bar1:{},bar2:{}};if("determinate"===c||"buffer"===c)if(void 0!==o){d["aria-valuenow"]=Math.round(o);var h=o-100;"rtl"===f.direction&&(h=-h),p.bar1.transform="translateX(".concat(h,"%)")}else 0;if("buffer"===c)if(void 0!==u){var m=(u||0)-100;"rtl"===f.direction&&(m=-m),p.bar2.transform="translateX(".concat(m,"%)")}else 0;return j.createElement("div",Object(C.a)({className:Object(A.a)(n.root,n["color".concat(Object(N.a)(a))],r,{determinate:n.determinate,indeterminate:n.indeterminate,buffer:n.buffer,query:n.query}[c]),role:"progressbar"},d,{ref:t},l),"buffer"===c?j.createElement("div",{className:Object(A.a)(n.dashed,n["dashedColor".concat(Object(N.a)(a))])}):null,j.createElement("div",{className:Object(A.a)(n.bar,n["barColor".concat(Object(N.a)(a))],("indeterminate"===c||"query"===c)&&n.bar1Indeterminate,{determinate:n.bar1Determinate,buffer:n.bar1Buffer}[c]),style:p.bar1}),"determinate"===c?null:j.createElement("div",{className:Object(A.a)(n.bar,("indeterminate"===c||"query"===c)&&n.bar2Indeterminate,"buffer"===c?[n["color".concat(Object(N.a)(a))],n.bar2Buffer]:n["barColor".concat(Object(N.a)(a))]),style:p.bar2}))})),yn=Object(T.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(ke.i)(t,.62):Object(ke.a)(t,.5)},n=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4},colorPrimary:{backgroundColor:n},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0px -23px"},"50%":{opacity:0,backgroundPosition:"0px -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(gn),bn=n(57),xn=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.color,a=void 0===i?"primary":i,o=e.component,u=void 0===o?"a":o,s=e.onBlur,c=e.onFocus,l=e.TypographyClasses,f=e.underline,d=void 0===f?"hover":f,p=e.variant,h=void 0===p?"inherit":p,m=Object(_.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),v=Object(bn.a)(),g=v.isFocusVisible,y=v.onBlurVisible,b=v.ref,x=j.useState(!1),w=x[0],O=x[1],k=Object(Je.a)(t,b);return j.createElement(Oe.a,Object(C.a)({className:Object(A.a)(n.root,n["underline".concat(Object(N.a)(d))],r,w&&n.focusVisible,"button"===u&&n.button),classes:l,color:a,component:u,onBlur:function(e){w&&(y(),O(!1)),s&&s(e)},onFocus:function(e){g(e)&&O(!0),c&&c(e)},ref:k,variant:h},m))})),wn=Object(T.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(xn),On=n(441),kn=n(442),En=n(50),Sn=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=Object(_.a)(e,["classes","className"]),a=j.useContext(En.a);return j.createElement("div",Object(C.a)({className:Object(A.a)(n.root,r,"flex-start"===a.alignItems&&n.alignItemsFlexStart),ref:t},i))})),Cn=Object(T.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(Sn),_n=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=Object(_.a)(e,["classes","className"]),a=j.useContext(En.a);return j.createElement("div",Object(C.a)({className:Object(A.a)(n.root,r,"flex-start"===a.alignItems&&n.alignItemsFlexStart),ref:t},i))})),jn=Object(T.a)((function(e){return{root:{minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},alignItemsFlexStart:{marginTop:8}}}),{name:"MuiListItemIcon"})(_n),An=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=Object(_.a)(e,["classes","className"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(n.root,r),ref:t},i))}));An.muiName="ListItemSecondaryAction";var Tn=Object(T.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(An),Nn=n(283),Rn=n(469),Dn=n(325),In=n(302),Mn=n(451),Fn=j.forwardRef((function(e,t){var n=e.activeStep,r=void 0===n?0:n,i=e.backButton,a=e.classes,o=e.className,u=e.LinearProgressProps,s=e.nextButton,c=e.position,l=void 0===c?"bottom":c,f=e.steps,d=e.variant,p=void 0===d?"dots":d,h=Object(_.a)(e,["activeStep","backButton","classes","className","LinearProgressProps","nextButton","position","steps","variant"]);return j.createElement(R.a,Object(C.a)({square:!0,elevation:0,className:Object(A.a)(a.root,a["position".concat(Object(N.a)(l))],o),ref:t},h),i,"text"===p&&j.createElement(j.Fragment,null,r+1," / ",f),"dots"===p&&j.createElement("div",{className:a.dots},Object($.a)(new Array(f)).map((function(e,t){return j.createElement("div",{key:t,className:Object(A.a)(a.dot,t===r&&a.dotActive)})}))),"progress"===p&&j.createElement(yn,Object(C.a)({className:a.progress,variant:"determinate",value:Math.ceil(r/(f-1)*100)},u)),s)})),Pn=Object(T.a)((function(e){return{root:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.default,padding:8},positionBottom:{position:"fixed",bottom:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionTop:{position:"fixed",top:0,left:0,right:0,zIndex:e.zIndex.mobileStepper},positionStatic:{},dots:{display:"flex",flexDirection:"row"},dot:{backgroundColor:e.palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},dotActive:{backgroundColor:e.palette.primary.main},progress:{width:"50%"}}}),{name:"MuiMobileStepper"})(Fn),zn=n(91),Ln=n(324),Bn="undefined"!==typeof window?j.useLayoutEffect:j.useEffect;var Wn=function(e){var t=e.children,n=e.defer,r=void 0!==n&&n,i=e.fallback,a=void 0===i?null:i,o=j.useState(!1),u=o[0],s=o[1];return Bn((function(){r||s(!0)}),[r]),j.useEffect((function(){r&&s(!0)}),[r]),j.createElement(j.Fragment,null,u?t:a)},Un=n(455),Vn=n(217),Hn=n(448),qn=n(445),Gn=n(106),$n=Object(M.a)(j.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Kn=Object(M.a)(j.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var Xn=Object(T.a)((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var t=e.checked,n=e.classes,r=e.fontSize;return j.createElement("div",{className:Object(A.a)(n.root,t&&n.checked)},j.createElement($n,{fontSize:r}),j.createElement(Kn,{fontSize:r,className:n.layer}))})),Yn=n(44);var Jn=j.createContext();function Zn(){return j.useContext(Jn)}var Qn=j.createElement(Xn,{checked:!0}),er=j.createElement(Xn,null),tr=j.forwardRef((function(e,t){var n=e.checked,r=e.classes,i=e.color,a=void 0===i?"secondary":i,o=e.name,u=e.onChange,s=e.size,c=void 0===s?"medium":s,l=Object(_.a)(e,["checked","classes","color","name","onChange","size"]),f=Zn(),d=n,p=Object(Yn.a)(u,f&&f.onChange),h=o;return f&&("undefined"===typeof d&&(d=f.value===e.value),"undefined"===typeof h&&(h=f.name)),j.createElement(Gn.a,Object(C.a)({color:a,type:"radio",icon:j.cloneElement(er,{fontSize:"small"===c?"small":"default"}),checkedIcon:j.cloneElement(Qn,{fontSize:"small"===c?"small":"default"}),classes:{root:Object(A.a)(r.root,r["color".concat(Object(N.a)(a))]),checked:r.checked,disabled:r.disabled},name:h,checked:d,onChange:p,ref:t},l))})),nr=Object(T.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(ke.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(ke.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(tr),rr=n(96),ir=j.forwardRef((function(e,t){var n=e.actions,r=e.children,i=e.name,a=e.value,o=e.onChange,u=Object(_.a)(e,["actions","children","name","value","onChange"]),s=j.useRef(null),c=Object(Nt.a)({controlled:a,default:e.defaultValue,name:"RadioGroup"}),l=Object(At.a)(c,2),f=l[0],d=l[1];j.useImperativeHandle(n,(function(){return{focus:function(){var e=s.current.querySelector("input:not(:disabled):checked");e||(e=s.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var p=Object(Je.a)(t,s),h=Object(rr.a)(i);return j.createElement(Jn.Provider,{value:{name:h,onChange:function(e){d(e.target.value),o&&o(e,e.target.value)},value:f}},j.createElement($t.a,Object(C.a)({role:"radiogroup",ref:p},u),r))})),ar=n(105),or=n(61),ur=n(64),sr=n(73);function cr(e,t){return!t||"object"!==Object(ur.a)(t)&&"function"!==typeof t?Object(sr.a)(e):t}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dr=n(30);function pr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var hr=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(r,e);var t,n=(t=r,function(){var e,n=lr(t);if(pr()){var r=lr(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return cr(this,e)});function r(){return Object(ar.a)(this,r),n.apply(this,arguments)}return Object(or.a)(r,[{key:"componentDidMount",value:function(){this.ref=Xe.findDOMNode(this),Object(dr.a)(this.props.rootRef,this.ref)}},{key:"componentDidUpdate",value:function(e){var t=Xe.findDOMNode(this);e.rootRef===this.props.rootRef&&this.ref===t||(e.rootRef!==this.props.rootRef&&Object(dr.a)(e.rootRef,null),this.ref=t,Object(dr.a)(this.props.rootRef,this.ref))}},{key:"componentWillUnmount",value:function(){this.ref=null,Object(dr.a)(this.props.rootRef,null)}},{key:"render",value:function(){return this.props.children}}]),r}(j.Component),mr=n(221),vr=n(444);var gr=Object(T.a)((function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:Object(C.a)({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}}),{name:"PrivateValueLabel"})((function(e){var t=e.children,n=e.classes,r=e.className,i=e.open,a=e.value,o=e.valueLabelDisplay;return"off"===o?t:j.cloneElement(t,{className:Object(A.a)(t.props.className,(i||"on"===o)&&n.open,n.thumb)},j.createElement("span",{className:Object(A.a)(n.offset,r)},j.createElement("span",{className:n.circle},j.createElement("span",{className:n.label},a))))}));function yr(e,t){return e-t}function br(e,t,n){return Math.min(Math.max(t,e),n)}function xr(e,t){return e.reduce((function(e,n,r){var i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null).index}function wr(e,t){if(void 0!==t.current&&e.changedTouches){for(var n=0;n<e.changedTouches.length;n+=1){var r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Or(e,t,n){return 100*(e-t)/(n-t)}function kr(e,t,n){var r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}(t)))}function Er(e){var t=e.values,n=e.source,r=e.newValue,i=e.index;if(t[i]===r)return n;var a=Object($.a)(t);return a[i]=r,a}function Sr(e){var t=e.sliderRef,n=e.activeIndex,r=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===n||t.current.querySelector('[data-index="'.concat(n,'"]')).focus(),r&&r(n)}var Cr={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},_r=function(e){return e},jr=j.forwardRef((function(e,t){var n=e["aria-label"],r=e["aria-labelledby"],i=e["aria-valuetext"],a=e.classes,o=e.className,u=e.color,s=void 0===u?"primary":u,c=e.component,l=void 0===c?"span":c,f=e.defaultValue,d=e.disabled,p=void 0!==d&&d,h=e.getAriaLabel,m=e.getAriaValueText,v=e.marks,g=void 0!==v&&v,y=e.max,b=void 0===y?100:y,x=e.min,w=void 0===x?0:x,O=e.name,k=e.onChange,E=e.onChangeCommitted,S=e.onMouseDown,T=e.orientation,R=void 0===T?"horizontal":T,D=e.scale,I=void 0===D?_r:D,M=e.step,F=void 0===M?1:M,P=e.ThumbComponent,z=void 0===P?"span":P,L=e.track,B=void 0===L?"normal":L,W=e.value,U=e.ValueLabelComponent,V=void 0===U?gr:U,H=e.valueLabelDisplay,q=void 0===H?"off":H,G=e.valueLabelFormat,K=void 0===G?_r:G,X=Object(_.a)(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),Y=Object(it.a)(),J=j.useRef(),Z=j.useState(-1),Q=Z[0],ee=Z[1],te=j.useState(-1),ne=te[0],re=te[1],ie=Object(Nt.a)({controlled:W,default:f,name:"Slider"}),ae=Object(At.a)(ie,2),oe=ae[0],ue=ae[1],se=Array.isArray(oe),ce=j.useRef(),le=se?Object($.a)(oe).sort(yr):[oe];le=le.map((function(e){return br(e,w,b)}));var fe=!0===g&&null!==F?Object($.a)(Array(Math.floor((b-w)/F)+1)).map((function(e,t){return{value:w+F*t}})):g||[];ce.current={source:oe};var de=Object(bn.a)(),pe=de.isFocusVisible,he=de.onBlurVisible,me=de.ref,ve=j.useState(-1),ge=ve[0],ye=ve[1],be=j.useRef(),xe=Object(Je.a)(me,be),we=Object(Je.a)(t,xe),Oe=Object(Ze.a)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));pe(e)&&ye(t),re(t)})),ke=Object(Ze.a)((function(){-1!==ge&&(ye(-1),he()),re(-1)})),Ee=Object(Ze.a)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));re(t)})),Se=Object(Ze.a)((function(){re(-1)})),Ce=Object(Ze.a)((function(e){var t,n=Number(e.currentTarget.getAttribute("data-index")),r=le[n],i=(b-w)/10,a=fe.map((function(e){return e.value})),o=a.indexOf(r);switch(e.key){case"Home":t=w;break;case"End":t=b;break;case"PageUp":F&&(t=r+i);break;case"PageDown":F&&(t=r-i);break;case"ArrowRight":case"ArrowUp":t=F?r+F:a[o+1]||a[a.length-1];break;case"ArrowLeft":case"ArrowDown":t=F?r-F:a[o-1]||a[0];break;default:return}if(e.preventDefault(),F&&(t=kr(t,F,w)),t=br(t,w,b),se){var u=t;t=Er({values:le,source:oe,newValue:t,index:n}).sort(yr),Sr({sliderRef:be,activeIndex:t.indexOf(u)})}ue(t),ye(n),k&&k(e,t),E&&E(e,t)})),_e=j.useRef(),je=R;"rtl"===Y.direction&&"vertical"!==R&&(je+="-reverse");var Ae=function(e){var t,n,r=e.finger,i=e.move,a=void 0!==i&&i,o=e.values,u=e.source,s=be.current.getBoundingClientRect(),c=s.width,l=s.height,f=s.bottom,d=s.left;if(t=0===je.indexOf("vertical")?(f-r.y)/l:(r.x-d)/c,-1!==je.indexOf("-reverse")&&(t=1-t),n=function(e,t,n){return(n-t)*e+t}(t,w,b),F)n=kr(n,F,w);else{var p=fe.map((function(e){return e.value}));n=p[xr(p,n)]}n=br(n,w,b);var h=0;if(se){var m=n;h=(n=Er({values:o,source:u,newValue:n,index:h=a?_e.current:xr(o,n)}).sort(yr)).indexOf(m),_e.current=h}return{newValue:n,activeIndex:h}},Te=Object(Ze.a)((function(e){var t=wr(e,J);if(t){var n=Ae({finger:t,move:!0,values:le,source:oe}),r=n.newValue,i=n.activeIndex;Sr({sliderRef:be,activeIndex:i,setActive:ee}),ue(r),k&&k(e,r)}})),Ne=Object(Ze.a)((function(e){var t=wr(e,J);if(t){var n=Ae({finger:t,values:le,source:oe}).newValue;ee(-1),"touchend"===e.type&&re(-1),E&&E(e,n),J.current=void 0;var r=Object(Ye.a)(be.current);r.removeEventListener("mousemove",Te),r.removeEventListener("mouseup",Ne),r.removeEventListener("touchmove",Te),r.removeEventListener("touchend",Ne)}})),Re=Object(Ze.a)((function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(J.current=t.identifier);var n=wr(e,J),r=Ae({finger:n,values:le,source:oe}),i=r.newValue,a=r.activeIndex;Sr({sliderRef:be,activeIndex:a,setActive:ee}),ue(i),k&&k(e,i);var o=Object(Ye.a)(be.current);o.addEventListener("touchmove",Te),o.addEventListener("touchend",Ne)}));j.useEffect((function(){var e=be.current;e.addEventListener("touchstart",Re);var t=Object(Ye.a)(e);return function(){e.removeEventListener("touchstart",Re),t.removeEventListener("mousemove",Te),t.removeEventListener("mouseup",Ne),t.removeEventListener("touchmove",Te),t.removeEventListener("touchend",Ne)}}),[Ne,Te,Re]);var De=Object(Ze.a)((function(e){S&&S(e),e.preventDefault();var t=wr(e,J),n=Ae({finger:t,values:le,source:oe}),r=n.newValue,i=n.activeIndex;Sr({sliderRef:be,activeIndex:i,setActive:ee}),ue(r),k&&k(e,r);var a=Object(Ye.a)(be.current);a.addEventListener("mousemove",Te),a.addEventListener("mouseup",Ne)})),Ie=Or(se?le[0]:w,w,b),Me=Or(le[le.length-1],w,b)-Ie,Fe=Object(C.a)({},Cr[je].offset(Ie),{},Cr[je].leap(Me));return j.createElement(l,Object(C.a)({ref:we,className:Object(A.a)(a.root,a["color".concat(Object(N.a)(s))],o,p&&a.disabled,fe.length>0&&fe.some((function(e){return e.label}))&&a.marked,!1===B&&a.trackFalse,"vertical"===R&&a.vertical,"inverted"===B&&a.trackInverted),onMouseDown:De},X),j.createElement("span",{className:a.rail}),j.createElement("span",{className:a.track,style:Fe}),j.createElement("input",{value:le.join(","),name:O,type:"hidden"}),fe.map((function(e,t){var n,r=Or(e.value,w,b),i=Cr[je].offset(r);return n=!1===B?-1!==le.indexOf(e.value):"normal"===B&&(se?e.value>=le[0]&&e.value<=le[le.length-1]:e.value<=le[0])||"inverted"===B&&(se?e.value<=le[0]||e.value>=le[le.length-1]:e.value>=le[0]),j.createElement(j.Fragment,{key:e.value},j.createElement("span",{style:i,"data-index":t,className:Object(A.a)(a.mark,n&&a.markActive)}),null!=e.label?j.createElement("span",{"aria-hidden":!0,"data-index":t,style:i,className:Object(A.a)(a.markLabel,n&&a.markLabelActive)},e.label):null)})),le.map((function(e,t){var o=Or(e,w,b),u=Cr[je].offset(o);return j.createElement(V,{key:t,valueLabelFormat:K,valueLabelDisplay:q,className:a.valueLabel,value:"function"===typeof K?K(I(e),t):K,index:t,open:ne===t||Q===t||"on"===q,disabled:p},j.createElement(z,{className:Object(A.a)(a.thumb,a["thumbColor".concat(Object(N.a)(s))],Q===t&&a.active,p&&a.disabled,ge===t&&a.focusVisible),tabIndex:p?null:0,role:"slider",style:u,"data-index":t,"aria-label":h?h(t):n,"aria-labelledby":r,"aria-orientation":R,"aria-valuemax":I(b),"aria-valuemin":I(w),"aria-valuenow":I(e),"aria-valuetext":m?m(I(e),t):i,onKeyDown:Ce,onFocus:Oe,onBlur:ke,onMouseOver:Ee,onMouseLeave:Se}))})))})),Ar=Object(T.a)((function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?Object(ke.i)(e.palette.primary.main,.62):Object(ke.a)(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(Object(ke.d)(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(Object(ke.d)(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(Object(ke.d)(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(Object(ke.d)(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:Object(C.a)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}}),{name:"MuiSlider"})(jr),Tr=j.forwardRef((function(e,t){var n=e.action,r=e.classes,i=e.className,a=e.message,o=e.role,u=void 0===o?"alert":o,s=Object(_.a)(e,["action","classes","className","message","role"]);return j.createElement(R.a,Object(C.a)({role:u,square:!0,elevation:6,className:Object(A.a)(r.root,i),ref:t},s),j.createElement("div",{className:r.message},a),n?j.createElement("div",{className:r.action},n):null)})),Nr=Object(T.a)((function(e){var t="light"===e.palette.type?.8:.98,n=Object(ke.c)(e.palette.background.default,t);return{root:Object(C.a)({},e.typography.body2,Object(J.a)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(Tr),Rr=j.forwardRef((function(e,t){var n=e.action,r=e.anchorOrigin,i=(r=void 0===r?{vertical:"bottom",horizontal:"center"}:r).vertical,a=r.horizontal,o=e.autoHideDuration,u=void 0===o?null:o,s=e.children,c=e.classes,l=e.className,f=e.ClickAwayListenerProps,d=e.ContentProps,p=e.disableWindowBlurListener,h=void 0!==p&&p,m=e.message,v=e.onClose,g=e.onEnter,y=e.onEntered,b=e.onEntering,x=e.onExit,w=e.onExited,O=e.onExiting,k=e.onMouseEnter,E=e.onMouseLeave,S=e.open,T=e.resumeHideDuration,R=e.TransitionComponent,D=void 0===R?un.a:R,I=e.transitionDuration,M=void 0===I?{enter:nt.b.enteringScreen,exit:nt.b.leavingScreen}:I,F=e.TransitionProps,P=Object(_.a)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),z=j.useRef(),L=j.useState(!0),B=L[0],W=L[1],U=Object(Ze.a)((function(){v&&v.apply(void 0,arguments)})),V=Object(Ze.a)((function(e){v&&null!=e&&(clearTimeout(z.current),z.current=setTimeout((function(){U(null,"timeout")}),e))}));j.useEffect((function(){return S&&V(u),function(){clearTimeout(z.current)}}),[S,u,V]);var H=function(){clearTimeout(z.current)},q=j.useCallback((function(){null!=u&&V(null!=T?T:.5*u)}),[u,T,V]);return j.useEffect((function(){if(!h&&S)return window.addEventListener("focus",q),window.addEventListener("blur",H),function(){window.removeEventListener("focus",q),window.removeEventListener("blur",H)}}),[h,q,S]),!S&&B?null:j.createElement(et,Object(C.a)({onClickAway:function(e){v&&v(e,"clickaway")}},f),j.createElement("div",Object(C.a)({className:Object(A.a)(c.root,c["anchorOrigin".concat(Object(N.a)(i)).concat(Object(N.a)(a))],l),onMouseEnter:function(e){k&&k(e),H()},onMouseLeave:function(e){E&&E(e),q()},ref:t},P),j.createElement(D,Object(C.a)({appear:!0,in:S,onEnter:Object(Yn.a)((function(){W(!1)}),g),onEntered:y,onEntering:b,onExit:x,onExited:Object(Yn.a)((function(){W(!0)}),w),onExiting:O,timeout:M,direction:"top"===i?"down":"up"},F),s||j.createElement(Nr,Object(C.a)({message:m,action:n},d)))))})),Dr=Object(T.a)((function(e){var t={top:8},n={bottom:8},r={justifyContent:"flex-end"},i={justifyContent:"flex-start"},a={top:24},o={bottom:24},u={right:24},s={left:24},c={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:Object(C.a)({},t,Object(J.a)({},e.breakpoints.up("sm"),Object(C.a)({},a,{},c))),anchorOriginBottomCenter:Object(C.a)({},n,Object(J.a)({},e.breakpoints.up("sm"),Object(C.a)({},o,{},c))),anchorOriginTopRight:Object(C.a)({},t,{},r,Object(J.a)({},e.breakpoints.up("sm"),Object(C.a)({left:"auto"},a,{},u))),anchorOriginBottomRight:Object(C.a)({},n,{},r,Object(J.a)({},e.breakpoints.up("sm"),Object(C.a)({left:"auto"},o,{},u))),anchorOriginTopLeft:Object(C.a)({},t,{},i,Object(J.a)({},e.breakpoints.up("sm"),Object(C.a)({right:"auto"},a,{},s))),anchorOriginBottomLeft:Object(C.a)({},n,{},i,Object(J.a)({},e.breakpoints.up("sm"),Object(C.a)({right:"auto"},o,{},s)))}}),{flip:!1,name:"MuiSnackbar"})(Rr),Ir=j.forwardRef((function(e,t){var n=e.active,r=void 0!==n&&n,i=e.alternativeLabel,a=e.children,o=e.classes,u=e.className,s=e.completed,c=void 0!==s&&s,l=e.connector,f=e.disabled,d=void 0!==f&&f,p=e.expanded,h=void 0!==p&&p,m=e.index,v=e.last,g=e.orientation,y=Object(_.a)(e,["active","alternativeLabel","children","classes","className","completed","connector","disabled","expanded","index","last","orientation"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(o.root,o[g],u,i&&o.alternativeLabel,c&&o.completed),ref:t},y),l&&i&&0!==m&&j.cloneElement(l,{orientation:g,alternativeLabel:i,index:m,active:r,completed:c,disabled:d}),j.Children.map(a,(function(e){return j.isValidElement(e)?j.cloneElement(e,Object(C.a)({active:r,alternativeLabel:i,completed:c,disabled:d,expanded:h,last:v,icon:m+1,orientation:g},e.props)):null})))})),Mr=Object(T.a)({root:{},horizontal:{paddingLeft:8,paddingRight:8},vertical:{},alternativeLabel:{flex:1,position:"relative"},completed:{}},{name:"MuiStep"})(Ir),Fr=Object(M.a)(j.createElement("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Pr=Object(M.a)(j.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning"),zr=n(175),Lr=j.createElement("circle",{cx:"12",cy:"12",r:"12"}),Br=j.forwardRef((function(e,t){var n=e.completed,r=void 0!==n&&n,i=e.icon,a=e.active,o=void 0!==a&&a,u=e.error,s=void 0!==u&&u,c=e.classes;if("number"===typeof i||"string"===typeof i){var l=Object(A.a)(c.root,o&&c.active,s&&c.error,r&&c.completed);return s?j.createElement(Pr,{className:l,ref:t}):r?j.createElement(Fr,{className:l,ref:t}):j.createElement(zr.a,{className:l,ref:t},Lr,j.createElement("text",{className:c.text,x:"12",y:"16",textAnchor:"middle"},i))}return i})),Wr=Object(T.a)((function(e){return{root:{display:"block",color:e.palette.text.disabled,"&$completed":{color:e.palette.primary.main},"&$active":{color:e.palette.primary.main},"&$error":{color:e.palette.error.main}},text:{fill:e.palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily},active:{},completed:{},error:{}}}),{name:"MuiStepIcon"})(Br),Ur=j.forwardRef((function(e,t){var n=e.active,r=void 0!==n&&n,i=e.alternativeLabel,a=void 0!==i&&i,o=e.children,u=e.classes,s=e.className,c=e.completed,l=void 0!==c&&c,f=e.disabled,d=void 0!==f&&f,p=e.error,h=void 0!==p&&p,m=(e.expanded,e.icon),v=(e.last,e.optional),g=e.orientation,y=void 0===g?"horizontal":g,b=e.StepIconComponent,x=e.StepIconProps,w=Object(_.a)(e,["active","alternativeLabel","children","classes","className","completed","disabled","error","expanded","icon","last","optional","orientation","StepIconComponent","StepIconProps"]),O=b;return m&&!O&&(O=Wr),j.createElement("span",Object(C.a)({className:Object(A.a)(u.root,u[y],s,d&&u.disabled,a&&u.alternativeLabel,h&&u.error),ref:t},w),m||O?j.createElement("span",{className:Object(A.a)(u.iconContainer,a&&u.alternativeLabel)},j.createElement(O,Object(C.a)({completed:l,active:r,error:h,icon:m},x))):null,j.createElement("span",{className:u.labelContainer},j.createElement(Oe.a,{variant:"body2",component:"span",className:Object(A.a)(u.label,a&&u.alternativeLabel,l&&u.completed,r&&u.active,h&&u.error),display:"block"},o),v))}));Ur.muiName="StepLabel";var Vr=Object(T.a)((function(e){return{root:{display:"flex",alignItems:"center","&$alternativeLabel":{flexDirection:"column"},"&$disabled":{cursor:"default"}},horizontal:{},vertical:{},label:{color:e.palette.text.secondary,"&$active":{color:e.palette.text.primary,fontWeight:500},"&$completed":{color:e.palette.text.primary,fontWeight:500},"&$alternativeLabel":{textAlign:"center",marginTop:16},"&$error":{color:e.palette.error.main}},active:{},completed:{},error:{},disabled:{},iconContainer:{flexShrink:0,display:"flex",paddingRight:8,"&$alternativeLabel":{paddingRight:0}},alternativeLabel:{},labelContainer:{width:"100%"}}}),{name:"MuiStepLabel"})(Ur),Hr=j.forwardRef((function(e,t){var n=e.active,r=e.alternativeLabel,i=e.children,a=e.classes,o=e.className,u=e.completed,s=e.disabled,c=(e.expanded,e.icon),l=(e.last,e.optional),f=e.orientation,d=Object(_.a)(e,["active","alternativeLabel","children","classes","className","completed","disabled","expanded","icon","last","optional","orientation"]),p={active:n,alternativeLabel:r,completed:u,disabled:s,icon:c,optional:l,orientation:f},h=Object(en.a)(i,["StepLabel"])?j.cloneElement(i,p):j.createElement(Vr,p,i);return j.createElement(H.a,Object(C.a)({disabled:s,TouchRippleProps:{className:a.touchRipple},className:Object(A.a)(a.root,a[f],o),ref:t},d),h)})),qr=Object(T.a)({root:{width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},horizontal:{},vertical:{justifyContent:"flex-start",padding:"8px",margin:"-8px"},touchRipple:{color:"rgba(0, 0, 0, 0.3)"}},{name:"MuiStepButton"})(Hr),Gr=j.forwardRef((function(e,t){var n=e.active,r=e.alternativeLabel,i=void 0!==r&&r,a=e.classes,o=e.className,u=e.completed,s=e.disabled,c=(e.index,e.orientation),l=void 0===c?"horizontal":c,f=Object(_.a)(e,["active","alternativeLabel","classes","className","completed","disabled","index","orientation"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(a.root,a[l],o,i&&a.alternativeLabel,n&&a.active,u&&a.completed,s&&a.disabled),ref:t},f),j.createElement("span",{className:Object(A.a)(a.line,{horizontal:a.lineHorizontal,vertical:a.lineVertical}[l])}))})),$r=Object(T.a)((function(e){return{root:{flex:"1 1 auto"},horizontal:{},vertical:{marginLeft:12,padding:"0 0 8px"},alternativeLabel:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"},active:{},completed:{},disabled:{},line:{display:"block",borderColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},lineHorizontal:{borderTopStyle:"solid",borderTopWidth:1},lineVertical:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}}),{name:"MuiStepConnector"})(Gr),Kr=j.forwardRef((function(e,t){var n=e.active,r=(e.alternativeLabel,e.children),i=e.classes,a=e.className,o=(e.completed,e.expanded),u=e.last,s=(e.optional,e.orientation,e.TransitionComponent),c=void 0===s?ot:s,l=e.transitionDuration,f=void 0===l?"auto":l,d=e.TransitionProps,p=Object(_.a)(e,["active","alternativeLabel","children","classes","className","completed","expanded","last","optional","orientation","TransitionComponent","transitionDuration","TransitionProps"]);var h=f;return"auto"!==f||c.muiSupportAuto||(h=void 0),j.createElement("div",Object(C.a)({className:Object(A.a)(i.root,a,u&&i.last),ref:t},p),j.createElement(c,Object(C.a)({in:n||o,className:i.transition,timeout:h,unmountOnExit:!0},d),r))})),Xr=Object(T.a)((function(e){return{root:{marginTop:8,marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:"1px solid ".concat("light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600])},last:{borderLeft:"none"},transition:{}}}),{name:"MuiStepContent"})(Kr),Yr=j.createElement($r,null),Jr=j.forwardRef((function(e,t){var n=e.activeStep,r=void 0===n?0:n,i=e.alternativeLabel,a=void 0!==i&&i,o=e.children,u=e.classes,s=e.className,c=e.connector,l=void 0===c?Yr:c,f=e.nonLinear,d=void 0!==f&&f,p=e.orientation,h=void 0===p?"horizontal":p,m=Object(_.a)(e,["activeStep","alternativeLabel","children","classes","className","connector","nonLinear","orientation"]),v=j.isValidElement(l)?j.cloneElement(l,{orientation:h}):null,g=j.Children.toArray(o),y=g.map((function(e,t){var n={alternativeLabel:a,connector:l,last:t+1===g.length,orientation:h},i={index:t,active:!1,completed:!1,disabled:!1};return r===t?i.active=!0:!d&&r>t?i.completed=!0:!d&&r<t&&(i.disabled=!0),[!a&&v&&0!==t&&j.cloneElement(v,Object(C.a)({key:t},i)),j.cloneElement(e,Object(C.a)({},n,{},i,{},e.props))]}));return j.createElement(R.a,Object(C.a)({square:!0,elevation:0,className:Object(A.a)(u.root,u[h],s,a&&u.alternativeLabel),ref:t},m),y)})),Zr=Object(T.a)({root:{display:"flex",padding:24},horizontal:{flexDirection:"row",alignItems:"center"},vertical:{flexDirection:"column"},alternativeLabel:{alignItems:"flex-start"}},{name:"MuiStepper"})(Jr),Qr=n(332),ei=j.forwardRef((function(e,t){var n=e.anchor,r=e.classes,i=e.className,a=e.width,o=Object(_.a)(e,["anchor","classes","className","width"]);return j.createElement("div",Object(C.a)({className:Object(A.a)(r.root,r["anchor".concat(Object(N.a)(n))],i),ref:t,style:Object(J.a)({},Object(Et.c)(n)?"width":"height",a)},o))})),ti=Object(T.a)((function(e){return{root:{position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},anchorLeft:{right:"auto"},anchorRight:{left:"auto",right:0},anchorTop:{bottom:"auto",right:0},anchorBottom:{top:"auto",bottom:0,right:0}}}),{name:"PrivateSwipeArea"})(ei),ni=null;function ri(e,t){return"right"===e?document.body.offsetWidth-t[0].pageX:t[0].pageX}function ii(e,t){return"bottom"===e?window.innerHeight-t[0].clientY:t[0].clientY}function ai(e,t){return e?t.clientWidth:t.clientHeight}function oi(e,t,n,r){return Math.min(Math.max(n?t-e:r+t-e,0),r)}var ui,si="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),ci={enter:nt.b.enteringScreen,exit:nt.b.leavingScreen},li="undefined"!==typeof window?j.useLayoutEffect:j.useEffect,fi=j.forwardRef((function(e,t){var n=Object(it.a)(),r=Object(Qr.a)({name:"MuiSwipeableDrawer",props:Object(C.a)({},e),theme:n}),i=r.anchor,a=void 0===i?"left":i,o=r.disableBackdropTransition,u=void 0!==o&&o,s=r.disableDiscovery,c=void 0!==s&&s,l=r.disableSwipeToOpen,f=void 0===l?si:l,d=r.hideBackdrop,p=r.hysteresis,h=void 0===p?.52:p,m=r.minFlingVelocity,v=void 0===m?450:m,g=r.ModalProps,y=(g=void 0===g?{}:g).BackdropProps,b=Object(_.a)(g,["BackdropProps"]),x=r.onClose,w=r.onOpen,O=r.open,k=r.PaperProps,E=void 0===k?{}:k,S=r.SwipeAreaProps,A=r.swipeAreaWidth,T=void 0===A?20:A,N=r.transitionDuration,R=void 0===N?ci:N,D=r.variant,I=void 0===D?"temporary":D,M=Object(_.a)(r,["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"]),F=j.useState(!1),P=F[0],z=F[1],L=j.useRef({isSwiping:null}),B=j.useRef(),W=j.useRef(),U=j.useRef(),V=j.useRef(!1),H=j.useRef();li((function(){H.current=null}),[O]);var q=j.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,i=void 0===r?null:r,o=t.changeTransition,s=void 0===o||o,c=Object(Et.b)(n,a),l=-1!==["right","bottom"].indexOf(c)?1:-1,f=Object(Et.c)(a),p=f?"translate(".concat(l*e,"px, 0)"):"translate(0, ".concat(l*e,"px)"),h=U.current.style;h.webkitTransform=p,h.transform=p;var m="";if(i&&(m=n.transitions.create("all",Object(rt.a)({timeout:R},{mode:i}))),s&&(h.webkitTransition=m,h.transition=m),!u&&!d){var v=W.current.style;v.opacity=1-e/ai(f,U.current),s&&(v.webkitTransition=m,v.transition=m)}}),[a,u,d,n,R]),G=Object(Ze.a)((function(e){if(V.current)if(ni=null,V.current=!1,z(!1),L.current.isSwiping){L.current.isSwiping=null;var t,r=Object(Et.b)(n,a),i=Object(Et.c)(a);t=i?ri(r,e.changedTouches):ii(r,e.changedTouches);var o=i?L.current.startX:L.current.startY,u=ai(i,U.current),s=oi(t,o,O,u),c=s/u;Math.abs(L.current.velocity)>v&&(H.current=1e3*Math.abs((u-s)/L.current.velocity)),O?L.current.velocity>v||c>h?x():q(0,{mode:"exit"}):L.current.velocity<-v||1-c>h?w():q(ai(i,U.current),{mode:"enter"})}else L.current.isSwiping=null})),$=Object(Ze.a)((function(e){if(U.current&&V.current&&(null==ni||ni===L.current)){var t=Object(Et.b)(n,a),r=Object(Et.c)(a),i=ri(t,e.touches),o=ii(t,e.touches);if(O&&U.current.contains(e.target)&&null==ni){var u=function(e){var t=e.domTreeShapes,n=e.start,r=e.current,i=e.anchor,a={x:"scrollLeft",y:"scrollTop"},o={x:"scrollWidth",y:"scrollHeight"},u={x:"clientWidth",y:"clientHeight"};return t.some((function(e){var t=r>=n;"top"!==i&&"left"!==i||(t=!t);var s="left"===i||"right"===i?"x":"y",c=e[a[s]],l=c>0,f=c+e[u[s]]<e[o[s]];return t&&f||!t&&l?e:null}))}({domTreeShapes:function(e,t){for(var n=[];e&&e!==t;){var r=window.getComputedStyle(e);"absolute"===r.getPropertyValue("position")||"hidden"===r.getPropertyValue("overflow-x")?n=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push(e),e=e.parentElement}return n}(e.target,U.current),start:r?L.current.startX:L.current.startY,current:r?i:o,anchor:a});if(u)return void(ni=u);ni=L.current}if(null==L.current.isSwiping){var s=Math.abs(i-L.current.startX),l=Math.abs(o-L.current.startY);s>l&&e.cancelable&&e.preventDefault();var f=r?s>l&&s>3:l>s&&l>3;if(!0===f||(r?l>3:s>3)){if(L.current.isSwiping=f,!f)return void G(e);L.current.startX=i,L.current.startY=o,c||O||(r?L.current.startX-=T:L.current.startY-=T)}}if(L.current.isSwiping){var d=ai(r,U.current),p=r?L.current.startX:L.current.startY;O&&!L.current.paperHit&&(p=Math.min(p,d));var h=oi(r?i:o,p,O,d);if(O)if(L.current.paperHit)0===h&&(L.current.startX=i,L.current.startY=o);else{if(!(r?i<d:o<d))return;L.current.paperHit=!0,L.current.startX=i,L.current.startY=o}null===L.current.lastTranslate&&(L.current.lastTranslate=h,L.current.lastTime=performance.now()+1);var m=(h-L.current.lastTranslate)/(performance.now()-L.current.lastTime)*1e3;L.current.velocity=.4*L.current.velocity+.6*m,L.current.lastTranslate=h,L.current.lastTime=performance.now(),e.cancelable&&e.preventDefault(),q(h)}}})),K=Object(Ze.a)((function(e){if(!e.defaultPrevented&&!e.muiHandled&&(!O||W.current.contains(e.target)||U.current.contains(e.target))){var t=Object(Et.b)(n,a),r=Object(Et.c)(a),i=ri(t,e.touches),o=ii(t,e.touches);if(!O){if(f||e.target!==B.current)return;if(r){if(i>T)return}else if(o>T)return}e.muiHandled=!0,ni=null,L.current.startX=i,L.current.startY=o,z(!0),!O&&U.current&&q(ai(r,U.current)+(c?20:-T),{changeTransition:!1}),L.current.velocity=0,L.current.lastTime=null,L.current.lastTranslate=null,L.current.paperHit=!1,V.current=!0}}));j.useEffect((function(){if("temporary"===I){var e=Object(Ye.a)(U.current);return e.addEventListener("touchstart",K),e.addEventListener("touchmove",$,{passive:!1}),e.addEventListener("touchend",G),function(){e.removeEventListener("touchstart",K),e.removeEventListener("touchmove",$,{passive:!1}),e.removeEventListener("touchend",G)}}}),[I,K,$,G]),j.useEffect((function(){return function(){ni===L.current&&(ni=null)}}),[]),j.useEffect((function(){O||z(!1)}),[O]);var X=j.useCallback((function(e){W.current=Xe.findDOMNode(e)}),[]);return j.createElement(j.Fragment,null,j.createElement(Et.a,Object(C.a)({open:!("temporary"!==I||!P)||O,variant:I,ModalProps:Object(C.a)({BackdropProps:Object(C.a)({},y,{ref:X})},b),PaperProps:Object(C.a)({},E,{style:Object(C.a)({pointerEvents:"temporary"!==I||O?"":"none"},E.style),ref:U}),anchor:a,transitionDuration:H.current||R,onClose:x,ref:t},M)),!f&&"temporary"===I&&j.createElement(Wn,null,j.createElement(ti,Object(C.a)({anchor:a,ref:B,width:T},S))))})),di=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.color,a=void 0===i?"secondary":i,o=e.edge,u=void 0!==o&&o,s=e.size,c=void 0===s?"medium":s,l=Object(_.a)(e,["classes","className","color","edge","size"]),f=j.createElement("span",{className:n.thumb});return j.createElement("span",{className:Object(A.a)(n.root,r,{start:n.edgeStart,end:n.edgeEnd}[u],"small"===c&&n["size".concat(Object(N.a)(c))])},j.createElement(Gn.a,Object(C.a)({type:"checkbox",icon:f,checkedIcon:f,classes:{root:Object(A.a)(n.switchBase,n["color".concat(Object(N.a)(a))]),input:n.input,checked:n.checked,disabled:n.disabled},ref:t},l)),j.createElement("span",{className:n.track}))})),pi=Object(T.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle"},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(ke.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(ke.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(di),hi=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.disabled,a=void 0!==i&&i,o=e.disableFocusRipple,u=void 0!==o&&o,s=e.fullWidth,c=e.icon,l=e.indicator,f=e.label,d=e.onChange,p=e.onClick,h=e.selected,m=e.textColor,v=void 0===m?"inherit":m,g=e.value,y=e.wrapped,b=void 0!==y&&y,x=Object(_.a)(e,["classes","className","disabled","disableFocusRipple","fullWidth","icon","indicator","label","onChange","onClick","selected","textColor","value","wrapped"]);return j.createElement(H.a,Object(C.a)({focusRipple:!u,className:Object(A.a)(n.root,n["textColor".concat(Object(N.a)(v))],r,a&&n.disabled,h&&n.selected,f&&c&&n.labelIcon,s&&n.fullWidth,b&&n.wrapped),ref:t,role:"tab","aria-selected":h,disabled:a,onClick:function(e){d&&d(e,g),p&&p(e)}},x),j.createElement("span",{className:n.wrapper},c,f),l)})),mi=Object(T.a)((function(e){var t;return{root:Object(C.a)({},e.typography.button,(t={maxWidth:264,minWidth:72,position:"relative",boxSizing:"border-box",minHeight:48,flexShrink:0,padding:"6px 12px"},Object(J.a)(t,e.breakpoints.up("sm"),{padding:"6px 24px"}),Object(J.a)(t,"overflow","hidden"),Object(J.a)(t,"whiteSpace","normal"),Object(J.a)(t,"textAlign","center"),Object(J.a)(t,e.breakpoints.up("sm"),{minWidth:160}),t)),labelIcon:{minHeight:72,paddingTop:9,"& $wrapper > *:first-child":{marginBottom:6}},textColorInherit:{color:"inherit",opacity:.7,"&$selected":{opacity:1},"&$disabled":{opacity:.5}},textColorPrimary:{color:e.palette.text.secondary,"&$selected":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled}},textColorSecondary:{color:e.palette.text.secondary,"&$selected":{color:e.palette.secondary.main},"&$disabled":{color:e.palette.text.disabled}},selected:{},disabled:{},fullWidth:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},wrapped:{fontSize:e.typography.pxToRem(12),lineHeight:1.5},wrapper:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",flexDirection:"column"}}}),{name:"MuiTab"})(hi),vi=n(295),gi=n(296),yi=n(297),bi=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.component,a=void 0===i?"div":i,o=Object(_.a)(e,["classes","className","component"]);return j.createElement(a,Object(C.a)({ref:t,className:Object(A.a)(n.root,r)},o))})),xi=Object(T.a)({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(bi),wi=n(301),Oi=n(299),ki=n(313),Ei=n(298),Si=n(312),Ci=n(58);function _i(){if(ui)return ui;var e=document.createElement("div");return e.appendChild(document.createTextNode("ABCD")),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),ui="reverse",e.scrollLeft>0?ui="default":(e.scrollLeft=1,0===e.scrollLeft&&(ui="negative")),document.body.removeChild(e),ui}function ji(e,t){var n=e.scrollLeft;if("rtl"!==t)return n;switch(_i()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function Ai(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}var Ti={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Ni(e){var t=e.onChange,n=Object(_.a)(e,["onChange"]),r=j.useRef(),i=j.useRef(null),a=function(){r.current=i.current.offsetHeight-i.current.clientHeight};return j.useEffect((function(){var e=Object(Qt.a)((function(){var e=r.current;a(),e!==r.current&&t(r.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[t]),j.useEffect((function(){a(),t(r.current)}),[t]),j.createElement("div",Object(C.a)({style:Ti,ref:i},n))}var Ri=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.color,a=e.orientation,o=Object(_.a)(e,["classes","className","color","orientation"]);return j.createElement("span",Object(C.a)({className:Object(A.a)(n.root,n["color".concat(Object(N.a)(i))],r,"vertical"===a&&n.vertical),ref:t},o))})),Di=Object(T.a)((function(e){return{root:{position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},colorPrimary:{backgroundColor:e.palette.primary.main},colorSecondary:{backgroundColor:e.palette.secondary.main},vertical:{height:"100%",width:2,right:0}}}),{name:"PrivateTabIndicator"})(Ri),Ii=n(131),Mi=n(130),Fi=j.createElement(Ii.a,{fontSize:"small"}),Pi=j.createElement(Mi.a,{fontSize:"small"}),zi=j.forwardRef((function(e,t){var n=e.classes,r=e.className,i=e.direction,a=e.orientation,o=e.visible,u=Object(_.a)(e,["classes","className","direction","orientation","visible"]),s=Object(A.a)(n.root,r,"vertical"===a&&n.vertical);return o?j.createElement(H.a,Object(C.a)({component:"div",className:s,ref:t,role:null,tabIndex:null},u),"left"===i?Fi:Pi):j.createElement("div",{className:s})})),Li=Object(T.a)({root:{width:40,flexShrink:0},vertical:{width:"100%",height:40,"& svg":{transform:"rotate(90deg)"}}},{name:"PrivateTabScrollButton"})(zi),Bi=j.forwardRef((function(e,t){var n=e.action,r=e.centered,i=void 0!==r&&r,a=e.children,o=e.classes,u=e.className,s=e.component,c=void 0===s?"div":s,l=e.indicatorColor,f=void 0===l?"secondary":l,d=e.onChange,p=e.orientation,h=void 0===p?"horizontal":p,m=e.ScrollButtonComponent,v=void 0===m?Li:m,g=e.scrollButtons,y=void 0===g?"auto":g,b=e.TabIndicatorProps,x=void 0===b?{}:b,w=e.textColor,O=void 0===w?"inherit":w,k=e.value,E=e.variant,S=void 0===E?"standard":E,T=Object(_.a)(e,["action","centered","children","classes","className","component","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","TabIndicatorProps","textColor","value","variant"]),N=Object(it.a)(),R="scrollable"===S,D="rtl"===N.direction,I="vertical"===h,M=I?"scrollTop":"scrollLeft",F=I?"top":"left",P=I?"bottom":"right",z=I?"clientHeight":"clientWidth",L=I?"height":"width";var B=j.useState(!1),W=B[0],U=B[1],V=j.useState({}),H=V[0],q=V[1],G=j.useState({start:!1,end:!1}),$=G[0],K=G[1],X=j.useState({overflow:"hidden",marginBottom:null}),Y=X[0],Z=X[1],Q=new Map,ee=j.useRef(null),te=j.useRef(null),ne=function(){var e,t,n=ee.current;if(n){var r=n.getBoundingClientRect();e={clientWidth:n.clientWidth,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop,scrollLeftNormalized:ji(n,N.direction),scrollWidth:n.scrollWidth,top:r.top,bottom:r.bottom,left:r.left,right:r.right}}if(n&&!1!==k){var i=te.current.children;if(i.length>0){var a=i[Q.get(k)];0,t=a?a.getBoundingClientRect():null}}return{tabsMeta:e,tabMeta:t}},re=Object(Ze.a)((function(){var e,t=ne(),n=t.tabsMeta,r=t.tabMeta,i=0;if(r&&n)if(I)i=r.top-n.top+n.scrollTop;else{var a=D?n.scrollLeftNormalized+n.clientWidth-n.scrollWidth:n.scrollLeft;i=r.left-n.left+a}var o=(e={},Object(J.a)(e,F,i),Object(J.a)(e,L,r?r[L]:0),e);if(isNaN(H[F])||isNaN(H[L]))q(o);else{var u=Math.abs(H[F]-o[F]),s=Math.abs(H[L]-o[L]);(u>=1||s>=1)&&q(o)}})),ie=function(e){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=r.ease,o=void 0===a?Ai:a,u=r.duration,s=void 0===u?300:u,c=null,l=t[e],f=!1,d=function(){f=!0},p=function r(a){if(f)i(new Error("Animation cancelled"));else{null===c&&(c=a);var u=Math.min(1,(a-c)/s);t[e]=o(u)*(n-l)+l,u>=1?requestAnimationFrame((function(){i(null)})):requestAnimationFrame(r)}};l===n?i(new Error("Element already at target position")):requestAnimationFrame(p)}(M,ee.current,e)},ae=function(e){var t=ee.current[M];I?t+=e:(t+=e*(D?-1:1),t*=D&&"reverse"===_i()?-1:1),ie(t)},oe=function(){ae(-ee.current[z])},ue=function(){ae(ee.current[z])},se=j.useCallback((function(e){Z({overflow:null,marginBottom:-e})}),[]),ce=Object(Ze.a)((function(){var e=ne(),t=e.tabsMeta,n=e.tabMeta;if(n&&t)if(n[F]<t[F]){var r=t[M]+(n[F]-t[F]);ie(r)}else if(n[P]>t[P]){var i=t[M]+(n[P]-t[P]);ie(i)}})),le=Object(Ze.a)((function(){if(R&&"off"!==y){var e,t,n=ee.current,r=n.scrollTop,i=n.scrollHeight,a=n.clientHeight,o=n.scrollWidth,u=n.clientWidth;if(I)e=r>1,t=r<i-a-1;else{var s=ji(ee.current,N.direction);e=D?s<o-u-1:s>1,t=D?s>1:s<o-u-1}e===$.start&&t===$.end||K({start:e,end:t})}}));j.useEffect((function(){var e=Object(Qt.a)((function(){re(),le()})),t=Object(Ci.a)(ee.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}),[re,le]);var fe=j.useCallback(Object(Qt.a)((function(){le()})));j.useEffect((function(){return function(){fe.clear()}}),[fe]),j.useEffect((function(){U(!0)}),[]),j.useEffect((function(){re(),le()})),j.useEffect((function(){ce()}),[ce,H]),j.useImperativeHandle(n,(function(){return{updateIndicator:re,updateScrollButtons:le}}),[re,le]);var de=j.createElement(Di,Object(C.a)({className:o.indicator,orientation:h,color:f},x,{style:Object(C.a)({},H,{},x.style)})),pe=0,he=j.Children.map(a,(function(e){if(!j.isValidElement(e))return null;var t=void 0===e.props.value?pe:e.props.value;Q.set(t,pe);var n=t===k;return pe+=1,j.cloneElement(e,{fullWidth:"fullWidth"===S,indicator:n&&!W&&de,selected:n,onChange:d,textColor:O,value:t})})),me=function(){var e={};e.scrollbarSizeListener=R?j.createElement(Ni,{className:o.scrollable,onChange:se}):null;var t=$.start||$.end,n=R&&("auto"===y&&t||"desktop"===y||"on"===y);return e.scrollButtonStart=n?j.createElement(v,{orientation:h,direction:D?"right":"left",onClick:oe,visible:$.start,className:Object(A.a)(o.scrollButtons,"on"!==y&&o.scrollButtonsDesktop)}):null,e.scrollButtonEnd=n?j.createElement(v,{orientation:h,direction:D?"left":"right",onClick:ue,visible:$.end,className:Object(A.a)(o.scrollButtons,"on"!==y&&o.scrollButtonsDesktop)}):null,e}();return j.createElement(c,Object(C.a)({className:Object(A.a)(o.root,u,I&&o.vertical),ref:t},T),me.scrollButtonStart,me.scrollbarSizeListener,j.createElement("div",{className:Object(A.a)(o.scroller,R?o.scrollable:o.fixed),style:Y,ref:ee,onScroll:fe},j.createElement("div",{className:Object(A.a)(o.flexContainer,I&&o.flexContainerVertical,i&&!R&&o.centered),ref:te,role:"tablist"},he),W&&de),me.scrollButtonEnd)})),Wi=Object(T.a)((function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsDesktop:Object(J.a)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}}),{name:"MuiTabs"})(Bi),Ui=n(307),Vi=n(449),Hi=n(303),qi=n(300),Gi=n(443);function $i(e,t,n){var r,i=n.disableHysteresis,a=void 0!==i&&i,o=n.threshold,u=void 0===o?100:o,s=t.current;return t.current=e?void 0!==(r=e.currentTarget).pageYOffset?r.pageYOffset:r.scrollTop:s,!(!a&&void 0!==s&&t.current<s)&&t.current>u}var Ki="undefined"!==typeof window?window:null;function Xi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getTrigger,n=void 0===t?$i:t,r=e.target,i=void 0===r?Ki:r,a=Object(_.a)(e,["getTrigger","target"]),o=j.useRef(),u=j.useState((function(){return n(null,o,a)})),s=u[0],c=u[1];return j.useEffect((function(){var e=function(e){c(n(e,o,a))};return e(null),i.addEventListener("scroll",e),function(){i.removeEventListener("scroll",e)}}),[i,n,JSON.stringify(a)]),s}var Yi=n(142),Ji=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.breakpoint,r=void 0===n?"sm":n;return Object(Yi.a)()((function(e){return j.createElement(t,Object(C.a)({fullScreen:Object(Yi.b)(r,e.width)},e))}))}},Zi=n(123),Qi={entering:{transform:"none"},entered:{transform:"none"}},ea={enter:nt.b.enteringScreen,exit:nt.b.leavingScreen},ta=j.forwardRef((function(e,t){var n=e.children,r=e.in,i=e.onEnter,a=e.onExit,o=e.style,u=e.timeout,s=void 0===u?ea:u,c=Object(_.a)(e,["children","in","onEnter","onExit","style","timeout"]),l=Object(it.a)(),f=Object(Je.a)(n.ref,t);return j.createElement(tt.a,Object(C.a)({appear:!0,in:r,onEnter:function(e,t){Object(rt.b)(e);var n=Object(rt.a)({style:o,timeout:s},{mode:"enter"});e.style.webkitTransition=l.transitions.create("transform",n),e.style.transition=l.transitions.create("transform",n),i&&i(e,t)},onExit:function(e){var t=Object(rt.a)({style:o,timeout:s},{mode:"exit"});e.style.webkitTransition=l.transitions.create("transform",t),e.style.transition=l.transitions.create("transform",t),a&&a(e)},timeout:s},c),(function(e,t){return j.cloneElement(n,Object(C.a)({style:Object(C.a)({transform:"scale(0)",visibility:"exited"!==e||r?void 0:"hidden"},Qi[e],{},o,{},n.props.style),ref:f},t))}))}))},function(e,t,n){"use strict";n.r(t),n.d(t,"formatDefaultLocale",(function(){return g})),n.d(t,"format",(function(){return l})),n.d(t,"formatPrefix",(function(){return f})),n.d(t,"formatLocale",(function(){return v})),n.d(t,"formatSpecifier",(function(){return o})),n.d(t,"precisionFixed",(function(){return y})),n.d(t,"precisionPrefix",(function(){return b})),n.d(t,"precisionRound",(function(){return x}));var r=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},i=function(e){return(e=r(Math.abs(e)))?e[1]:NaN},a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){return new u(e)}function u(e){if(!(t=a.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}o.prototype=u.prototype,u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s,c,l,f,d=function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")},p={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return d(100*e,t)},r:d,s:function(e,t){var n=r(e,t);if(!n)return e+"";var i=n[0],a=n[1],o=a-(s=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=i.length;return o===u?i:o>u?i+new Array(o-u+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+r(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},h=function(e){return e},m=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],v=function(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var i=e.length,a=[],o=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(e.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(n)}):h,a=e.currency,u=e.decimal,c=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(e.numerals):h,l=e.percent||"%";function f(e){var t=(e=o(e)).fill,n=e.align,i=e.sign,f=e.symbol,d=e.zero,h=e.width,v=e.comma,g=e.precision,y=e.trim,b=e.type;"n"===b?(v=!0,b="g"):p[b]||(null==g&&(g=12),y=!0,b="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var x="$"===f?a[0]:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===f?a[1]:/[%p]/.test(b)?l:"",O=p[b],k=/[defgprs%]/.test(b);function E(e){var a,o,l,f=x,p=w;if("c"===b)p=O(e)+p,e="";else{var E=(e=+e)<0;if(e=O(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&(E=!1),f=(E?"("===i?i:"-":"-"===i||"("===i?"":i)+f,p=("s"===b?m[8+s/3]:"")+p+(E&&"("===i?")":""),k)for(a=-1,o=e.length;++a<o;)if(48>(l=e.charCodeAt(a))||l>57){p=(46===l?u+e.slice(a+1):e.slice(a))+p,e=e.slice(0,a);break}}v&&!d&&(e=r(e,1/0));var S=f.length+e.length+p.length,C=S<h?new Array(h-S+1).join(t):"";switch(v&&d&&(e=r(C+e,C.length?h-p.length:1/0),C=""),n){case"<":e=f+e+p+C;break;case"=":e=f+C+e+p;break;case"^":e=C.slice(0,S=C.length>>1)+f+e+p+C.slice(S);break;default:e=C+f+e+p}return c(e)}return g=null==g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return e+""},E}return{format:f,formatPrefix:function(e,t){var n=f(((e=o(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(i(t)/3))),a=Math.pow(10,-r),u=m[8+r/3];return function(e){return n(a*e)+u}}}};function g(e){return c=v(e),l=c.format,f=c.formatPrefix,c}g({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var y=function(e){return Math.max(0,-i(Math.abs(e)))},b=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(t)/3)))-i(Math.abs(e)))},x=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,i(t)-i(e))+1}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(106),s=n(22),c=Object(s.a)(a.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),l=Object(s.a)(a.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),f=n(13),d=Object(s.a)(a.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=n(12),h=n(7),m=a.createElement(l,null),v=a.createElement(c,null),g=a.createElement(d,null),y=a.forwardRef((function(e,t){var n=e.checkedIcon,s=void 0===n?m:n,c=e.classes,l=e.color,f=void 0===l?"secondary":l,d=e.icon,h=void 0===d?v:d,y=e.indeterminate,b=void 0!==y&&y,x=e.indeterminateIcon,w=void 0===x?g:x,O=e.inputProps,k=e.size,E=void 0===k?"medium":k,S=Object(i.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]);return a.createElement(u.a,Object(r.a)({type:"checkbox",classes:{root:Object(o.a)(c.root,c["color".concat(Object(p.a)(f))],b&&c.indeterminate),checked:c.checked,disabled:c.disabled},color:f,inputProps:Object(r.a)({"data-indeterminate":b},O),icon:a.cloneElement(b?w:h,{fontSize:"small"===E?"small":"default"}),checkedIcon:a.cloneElement(b?w:s,{fontSize:"small"===E?"small":"default"}),ref:t},S))}));t.a=Object(h.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(f.d)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(f.d)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(y)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(22),s=Object(u.a)(a.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),c=n(7),l=n(13),f=n(16),d=n(12),p=n(227);function h(e){return"Backspace"===e.key||"Delete"===e.key}var m=a.forwardRef((function(e,t){var n=e.avatar,u=e.classes,c=e.className,l=e.clickable,m=e.color,v=void 0===m?"default":m,g=e.component,y=e.deleteIcon,b=e.disabled,x=void 0!==b&&b,w=e.icon,O=e.label,k=e.onClick,E=e.onDelete,S=e.onKeyDown,C=e.onKeyUp,_=e.size,j=void 0===_?"medium":_,A=e.variant,T=void 0===A?"default":A,N=Object(i.a)(e,["avatar","classes","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"]),R=a.useRef(null),D=Object(f.a)(R,t),I=function(e){e.stopPropagation(),E&&E(e)},M=!(!1===l||!k)||l,F="small"===j,P=g||(M?p.a:"div"),z=P===p.a?{component:"div"}:{},L=null;if(E){var B=Object(o.a)("default"!==v&&("default"===T?u["deleteIconColor".concat(Object(d.a)(v))]:u["deleteIconOutlinedColor".concat(Object(d.a)(v))]),F&&u.deleteIconSmall);L=y&&a.isValidElement(y)?a.cloneElement(y,{className:Object(o.a)(y.props.className,u.deleteIcon,B),onClick:I}):a.createElement(s,{className:Object(o.a)(u.deleteIcon,B),onClick:I})}var W=null;n&&a.isValidElement(n)&&(W=a.cloneElement(n,{className:Object(o.a)(u.avatar,n.props.className,F&&u.avatarSmall,"default"!==v&&u["avatarColor".concat(Object(d.a)(v))])}));var U=null;return w&&a.isValidElement(w)&&(U=a.cloneElement(w,{className:Object(o.a)(u.icon,w.props.className,F&&u.iconSmall,"default"!==v&&u["iconColor".concat(Object(d.a)(v))])})),a.createElement(P,Object(r.a)({role:M||E?"button":void 0,className:Object(o.a)(u.root,c,"default"!==v&&[u["color".concat(Object(d.a)(v))],M&&u["clickableColor".concat(Object(d.a)(v))],E&&u["deletableColor".concat(Object(d.a)(v))]],"default"!==T&&[u.outlined,{primary:u.outlinedPrimary,secondary:u.outlinedSecondary}[v]],x&&u.disabled,F&&u.sizeSmall,M&&u.clickable,E&&u.deletable),"aria-disabled":!!x||void 0,tabIndex:M||E?0:void 0,onClick:k,onKeyDown:function(e){e.currentTarget===e.target&&h(e)&&e.preventDefault(),S&&S(e)},onKeyUp:function(e){e.currentTarget===e.target&&(E&&h(e)?E(e):"Escape"===e.key&&R.current&&R.current.blur()),C&&C(e)},ref:D},z,N),W||U,a.createElement("span",{className:Object(o.a)(u.label,F&&u.labelSmall)},O),L)}));t.a=Object(c.a)((function(e){var t="light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],n=Object(l.d)(e.palette.text.primary,.26);return{root:{fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.getContrastText(t),backgroundColor:t,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:"none",padding:0,verticalAlign:"middle",boxSizing:"border-box","&$disabled":{opacity:.5,pointerEvents:"none"},"& $avatar":{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)},"& $avatarColorPrimary":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},"& $avatarColorSecondary":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},"& $avatarSmall":{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)}},sizeSmall:{height:24},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},disabled:{},clickable:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover, &:focus":{backgroundColor:Object(l.c)(t,.08)},"&:active":{boxShadow:e.shadows[1]}},clickableColorPrimary:{"&:hover, &:focus":{backgroundColor:Object(l.c)(e.palette.primary.main,.08)}},clickableColorSecondary:{"&:hover, &:focus":{backgroundColor:Object(l.c)(e.palette.secondary.main,.08)}},deletable:{"&:focus":{backgroundColor:Object(l.c)(t,.08)}},deletableColorPrimary:{"&:focus":{backgroundColor:Object(l.c)(e.palette.primary.main,.2)}},deletableColorSecondary:{"&:focus":{backgroundColor:Object(l.c)(e.palette.secondary.main,.2)}},outlined:{backgroundColor:"transparent",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(l.d)(e.palette.text.primary,e.palette.action.hoverOpacity)},"& $avatar":{marginLeft:4},"& $avatarSmall":{marginLeft:2},"& $icon":{marginLeft:4},"& $iconSmall":{marginLeft:2},"& $deleteIcon":{marginRight:5},"& $deleteIconSmall":{marginRight:3}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(e.palette.primary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(l.d)(e.palette.primary.main,e.palette.action.hoverOpacity)}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(e.palette.secondary.main),"$clickable&:hover, $clickable&:focus, $deletable&:focus":{backgroundColor:Object(l.d)(e.palette.secondary.main,e.palette.action.hoverOpacity)}},avatar:{},avatarSmall:{},avatarColorPrimary:{},avatarColorSecondary:{},icon:{color:"light"===e.palette.type?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6},iconSmall:{width:18,height:18,marginLeft:4,marginRight:-4},iconColorPrimary:{color:"inherit"},iconColorSecondary:{color:"inherit"},label:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},labelSmall:{paddingLeft:8,paddingRight:8},deleteIcon:{WebkitTapHighlightColor:"transparent",color:n,height:22,width:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:Object(l.d)(n,.4)}},deleteIconSmall:{height:16,width:16,marginRight:4,marginLeft:-4},deleteIconColorPrimary:{color:Object(l.d)(e.palette.primary.contrastText,.7),"&:hover, &:active":{color:e.palette.primary.contrastText}},deleteIconColorSecondary:{color:Object(l.d)(e.palette.secondary.contrastText,.7),"&:hover, &:active":{color:e.palette.secondary.contrastText}},deleteIconOutlinedColorPrimary:{color:Object(l.d)(e.palette.primary.main,.7),"&:hover, &:active":{color:e.palette.primary.main}},deleteIconOutlinedColorSecondary:{color:Object(l.d)(e.palette.secondary.main,.7),"&:hover, &:active":{color:e.palette.secondary.main}}}}),{name:"MuiChip"})(m)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(22),s=Object(u.a)(a.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),c=n(7),l=n(227),f=n(12),d=a.forwardRef((function(e,t){var n=e.active,u=void 0!==n&&n,c=e.children,d=e.classes,p=e.className,h=e.direction,m=void 0===h?"asc":h,v=e.hideSortIcon,g=void 0!==v&&v,y=e.IconComponent,b=void 0===y?s:y,x=Object(i.a)(e,["active","children","classes","className","direction","hideSortIcon","IconComponent"]);return a.createElement(l.a,Object(r.a)({className:Object(o.a)(d.root,p,u&&d.active),component:"span",disableRipple:!0,ref:t},x),c,g&&!u?null:a.createElement(b,{className:Object(o.a)(d.icon,d["iconDirection".concat(Object(f.a)(m))])}))}));t.a=Object(c.a)((function(e){return{root:{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:e.palette.text.secondary},"&:hover":{color:e.palette.text.secondary,"& $icon":{opacity:.5}},"&$active":{color:e.palette.text.primary,"&& $icon":{opacity:1,color:e.palette.text.secondary}}},active:{},icon:{fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},iconDirectionDesc:{transform:"rotate(0deg)"},iconDirectionAsc:{transform:"rotate(180deg)"}}}),{name:"MuiTableSortLabel"})(d)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(333),c=n(302),l=n(221),f=n(297),d=n(303),p=n(85),h=n(131),m=n(130),v=n(19),g=n(216),y=a.createElement(m.a,null),b=a.createElement(h.a,null),x=a.createElement(h.a,null),w=a.createElement(m.a,null),O=a.forwardRef((function(e,t){var n=e.backIconButtonProps,o=e.count,u=e.nextIconButtonProps,s=e.onChangePage,c=e.page,l=e.rowsPerPage,f=Object(i.a)(e,["backIconButtonProps","count","nextIconButtonProps","onChangePage","page","rowsPerPage"]),d=Object(v.a)();return a.createElement("div",Object(r.a)({ref:t},f),a.createElement(g.a,Object(r.a)({onClick:function(e){s(e,c-1)},disabled:0===c,color:"inherit"},n),"rtl"===d.direction?y:b),a.createElement(g.a,Object(r.a)({onClick:function(e){s(e,c+1)},disabled:-1!==o&&c>=Math.ceil(o/l)-1,color:"inherit"},u),"rtl"===d.direction?x:w))})),k=function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"-").concat(-1===n?r:n," of ").concat(-1!==r?r:"more than ".concat(n))},E=[10,25,50,100],S=a.forwardRef((function(e,t){var n,u=e.ActionsComponent,h=void 0===u?O:u,m=e.backIconButtonProps,v=e.backIconButtonText,g=void 0===v?"Previous page":v,y=e.classes,b=e.className,x=e.colSpan,w=e.component,S=void 0===w?f.a:w,C=e.count,_=e.labelDisplayedRows,j=void 0===_?k:_,A=e.labelRowsPerPage,T=void 0===A?"Rows per page:":A,N=e.nextIconButtonProps,R=e.nextIconButtonText,D=void 0===R?"Next page":R,I=e.onChangePage,M=e.onChangeRowsPerPage,F=e.page,P=e.rowsPerPage,z=e.rowsPerPageOptions,L=void 0===z?E:z,B=e.SelectProps,W=void 0===B?{}:B,U=Object(i.a)(e,["ActionsComponent","backIconButtonProps","backIconButtonText","classes","className","colSpan","component","count","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","nextIconButtonText","onChangePage","onChangeRowsPerPage","page","rowsPerPage","rowsPerPageOptions","SelectProps"]);S!==f.a&&"td"!==S||(n=x||1e3);var V=W.native?"option":c.a;return a.createElement(S,Object(r.a)({className:Object(o.a)(y.root,b),colSpan:n,ref:t},U),a.createElement(d.a,{className:y.toolbar},a.createElement("div",{className:y.spacer}),L.length>1&&a.createElement(p.a,{color:"inherit",variant:"body2",className:y.caption},T),L.length>1&&a.createElement(l.a,Object(r.a)({classes:{select:y.select,icon:y.selectIcon},input:a.createElement(s.a,{className:Object(o.a)(y.input,y.selectRoot)}),value:P,onChange:M,inputProps:{"aria-label":T}},W),L.map((function(e){return a.createElement(V,{className:y.menuItem,key:e.value?e.value:e,value:e.value?e.value:e},e.label?e.label:e)}))),a.createElement(p.a,{color:"inherit",variant:"body2",className:y.caption},j({from:0===C?0:F*P+1,to:-1!==C?Math.min(C,(F+1)*P):(F+1)*P,count:C,page:F})),a.createElement(h,{className:y.actions,backIconButtonProps:Object(r.a)({title:g,"aria-label":g},m),count:C,nextIconButtonProps:Object(r.a)({title:D,"aria-label":D},N),onChangePage:I,page:F,rowsPerPage:P})))}));t.a=Object(u.a)((function(e){return{root:{color:e.palette.text.primary,fontSize:e.typography.pxToRem(14),overflow:"auto","&:last-child":{padding:0}},toolbar:{minHeight:52,paddingRight:2},spacer:{flex:"1 1 100%"},caption:{flexShrink:0},selectRoot:{marginRight:32,marginLeft:8},select:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"},selectIcon:{},input:{color:"inherit",fontSize:"inherit",flexShrink:0},menuItem:{},actions:{flexShrink:0,marginLeft:20}}}),{name:"MuiTablePagination"})(S)},,function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(this,n(53))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(355),a=(r=i)&&r.__esModule?r:{default:r};t.default=a.default},function(e){e.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.0.2","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -c -f tsconfig.json -p src/index.ts -t TopLevelSpec -k deprecated > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint --ext .ts .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@commitlint/cli":"^8.2.0","@commitlint/config-conventional":"^8.2.0","@types/chai":"^4.2.6","@types/d3":"^5.7.2","@types/highlight.js":"^9.12.3","@types/jest":"^24.0.23","@types/jest-environment-puppeteer":"^4.3.1","@types/mkdirp":"^0.5.2","@types/puppeteer":"^2.0.0","@typescript-eslint/eslint-plugin":"^2.10.0","@typescript-eslint/parser":"^2.10.0","ajv":"^6.10.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.2","codecov":"^3.6.1","concurrently":"^5.0.0","d3":"^5.14.2","eslint":"^6.7.2","eslint-config-prettier":"^6.7.0","eslint-plugin-prettier":"^3.1.1","gh-pages":"^2.1.1","highlight.js":"^9.16.2","http-server":"^0.12.0","husky":"^3.1.0","jest":"^24.9.0","jest-puppeteer":"^4.3.0","lint-staged":"^9.5.0","mkdirp":"^0.5.1","prettier":"^1.19.1","puppeteer":"^2.0.0","rollup":"^1.27.8","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-sourcemaps":"^0.4.2","rollup-plugin-terser":"^5.1.2","svg2png-many":"^0.0.7","terser":"^4.4.2","ts-jest":"^24.2.0","ts-json-schema-generator":"^0.57.0","typescript":"~3.7.3","vega-cli":"^5.9.0","vega-datasets":"^1.28.0","vega-embed":"^6.2.0","vega-tooltip":"^0.19.1","yaml-front-matter":"^4.0.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.0.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~1.10.0","vega-event-selector":"~2.0.2","vega-expression":"~2.6.3","vega-typings":"~0.12.0","vega-util":"~1.12.1","yargs":"~15.0.2"},"peerDependencies":{"vega":"^5.9.0"},"husky":{"hooks":{"pre-commit":"lint-staged","commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"lint-staged":{"*.ts":["eslint --fix","git add"],"*.{md,css,yml}":["prettier --write","git add"]},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(e,t,n){(function(t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var n,r,i;try{n=Map}catch(s){n=function(){}}try{r=Set}catch(s){r=function(){}}try{i=Promise}catch(s){i=function(){}}function a(o,s,c,l,f){"object"===typeof s&&(c=s.depth,l=s.prototype,f=s.includeNonEnumerable,s=s.circular);var d=[],p=[],h="undefined"!=typeof t;return"undefined"==typeof s&&(s=!0),"undefined"==typeof c&&(c=1/0),function o(c,m){if(null===c)return null;if(0===m)return c;var v,g;if("object"!=typeof c)return c;if(e(c,n))v=new n;else if(e(c,r))v=new r;else if(e(c,i))v=new i((function(e,t){c.then((function(t){e(o(t,m-1))}),(function(e){t(o(e,m-1))}))}));else if(a.__isArray(c))v=[];else if(a.__isRegExp(c))v=new RegExp(c.source,u(c)),c.lastIndex&&(v.lastIndex=c.lastIndex);else if(a.__isDate(c))v=new Date(c.getTime());else{if(h&&t.isBuffer(c))return v=t.allocUnsafe?t.allocUnsafe(c.length):new t(c.length),c.copy(v),v;e(c,Error)?v=Object.create(c):"undefined"==typeof l?(g=Object.getPrototypeOf(c),v=Object.create(g)):(v=Object.create(l),g=l)}if(s){var y=d.indexOf(c);if(-1!=y)return p[y];d.push(c),p.push(v)}for(var b in e(c,n)&&c.forEach((function(e,t){var n=o(t,m-1),r=o(e,m-1);v.set(n,r)})),e(c,r)&&c.forEach((function(e){var t=o(e,m-1);v.add(t)})),c){var x;g&&(x=Object.getOwnPropertyDescriptor(g,b)),x&&null==x.set||(v[b]=o(c[b],m-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(c);for(b=0;b<w.length;b++){var O=w[b];(!(E=Object.getOwnPropertyDescriptor(c,O))||E.enumerable||f)&&(v[O]=o(c[O],m-1),E.enumerable||Object.defineProperty(v,O,{enumerable:!1}))}}if(f){var k=Object.getOwnPropertyNames(c);for(b=0;b<k.length;b++){var E,S=k[b];(E=Object.getOwnPropertyDescriptor(c,S))&&E.enumerable||(v[S]=o(c[S],m-1),Object.defineProperty(v,S,{enumerable:!1}))}}return v}(o,c)}function o(e){return Object.prototype.toString.call(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=o,a.__isDate=function(e){return"object"===typeof e&&"[object Date]"===o(e)},a.__isArray=function(e){return"object"===typeof e&&"[object Array]"===o(e)},a.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===o(e)},a.__getRegExpFlags=u,a}();e.exports&&(e.exports=n)}).call(this,n(116).Buffer)},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},function(e){e.exports=JSON.parse('{"name":"vega-themes","version":"2.8.3","description":"Themes for stylized Vega and Vega-Lite visualizations.","keywords":["vega","vega-lite","themes","style"],"license":"BSD-3-Clause","author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"contributors":[{"name":"Emily Gu","url":"https://github.com/emilygu"},{"name":"Arvind Satyanarayan","url":"http://arvindsatya.com"},{"name":"Jeffrey Heer","url":"https://idl.cs.washington.edu"},{"name":"Dominik Moritz","url":"https://www.domoritz.de"}],"main":"build/vega-themes.js","module":"build/src/index.js","unpkg":"build/vega-themes.min.js","jsdelivr":"build/vega-themes.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-themes.git"},"scripts":{"prepare":"beemo create-config --silent","clean":"rm -rf build examples/build","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'src/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","prebuild":"mkdir -p build","build":"tsc && rollup -c","postbuild":"terser build/vega-themes.js -cm > build/vega-themes.min.js","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","serve":"browser-sync start -s -f build examples --serveStatic examples","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'yarn serve\' \'tsc -w\' \'rollup -c -w\'"},"devDependencies":{"@rollup/plugin-json":"^4.0.2","browser-sync":"^2.26.7","concurrently":"^5.1.0","gh-pages":"^2.2.0","rollup":"^2.1.0","terser":"^4.6.7","typescript":"^3.8.3","vega":"^5.10.0","vega-lite":"^4.8.1","vega-lite-dev-config":"^0.5.0"},"peerDependencies":{"vega":"*","vega-lite":"*"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]}}')},function(e){e.exports=JSON.parse('{"name":"vega-tooltip","version":"0.19.1","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","tsc:src":"tsc -b tsconfig.src.json","build":"yarn tsc:src && rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'{src,test,types}/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"mkdir -p build && yarn copy:data && ./build-style.sh","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'yarn tsc:src -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@types/jest":"^24.0.18","browser-sync":"^2.26.7","concurrently":"^4.1.2","gh-pages":"^2.1.1","jest":"^24.9.0","node-sass":"^4.12.0","path":"^0.12.7","rollup":"^1.20.3","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","terser":"^4.2.1","ts-jest":"^24.0.2","typescript":"^3.6.2","vega-datasets":"^1.25.0","vega-lite-dev-config":"^0.2.5","vega-typings":"^0.8.1"},"dependencies":{"vega-util":"^1.11.1"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(33)),a=n(63),o=r(n(148)),u=r(n(419)),s=r(n(420)),c=r(n(421)),l=r(n(422)),f=r(n(423)),d=r(n(424)),p=(r(n(8)),r(n(0))),h=r(n(36)),m=r(n(149)),v=r(n(119)),g=r(n(150)),y=r(n(89)),b=r(n(69)),x=r(n(425)),w=r(n(151)),O=r(n(152)),k=n(20),E=r(n(153)),S=r(n(154)),C=r(n(427)),_=r(n(155)),j=r(n(156)),A=r(n(120)),T=r(n(121)),N=n(308),R=r(n(76)),D=r(n(75)),I=r(n(92)),M=r(n(124)),F=r(n(77)),P=r(n(125)),z=r(n(126)),L=r(n(78)),B=r(n(79)),W=r(n(80)),U=r(n(93)),V=r(n(428)),H=r(n(429)),q=r(n(430)),G=r(n(431)),$=r(n(432)),K=r(n(433)),X=r(n(434)),Y=r(n(435)),J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ee=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},re=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},ie=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ae=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},oe=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},ue=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleClick=function(e){var t=r.props,n=t.colIndex,i=t.options,a=t.children,o=t.dataIndex,u=t.rowIndex;i.onCellClick&&i.onCellClick(a,{colIndex:n,rowIndex:u,dataIndex:o,event:e})},ie(r,n)}return ne(t,e),Q(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.children,i=n.classes,a=(n.colIndex,n.columnHeader),o=n.options,s=(n.dataIndex,n.rowIndex,n.className),c=n.print,l=re(n,["children","classes","colIndex","columnHeader","options","dataIndex","rowIndex","className","print"]);return[p.createElement(v,{key:1,className:u((e={},ee(e,i.root,!0),ee(e,i.cellHide,!0),ee(e,i.stackedCommon,"stacked"===o.responsive||"stackedFullWidth"===o.responsive),ee(e,i.cellStackedSmall,"stacked"===o.responsive||"stackedFullWidth"===o.responsive&&("none"===o.setTableProps().padding||"small"===o.setTableProps().size)),ee(e,"datatables-noprint",!c),e),s)},a),p.createElement(v,te({key:2,onClick:this.handleClick,className:u((t={},ee(t,i.root,!0),ee(t,i.stackedCommon,"stacked"===o.responsive||"stackedFullWidth"===o.responsive),ee(t,i.responsiveStackedSmall,"stacked"===o.responsive||"stackedFullWidth"===o.responsive&&("none"===o.setTableProps().padding||"small"===o.setTableProps().size)),ee(t,"datatables-noprint",!c),t),s)},l),r)]}}]),t}(p.Component),se=a.withStyles((function(e){var t;return{root:{},cellHide:{display:"none"},stackedCommon:ee({},e.breakpoints.down("sm"),(t={display:"inline-block",fontSize:"16px",height:"24px",whiteSpace:"nowrap",width:"calc(50% - 80px)"},ee(t,"whiteSpace","nowrap"),ee(t,"&:last-child",{borderBottom:"none"}),ee(t,"&:nth-last-child(2)",{borderBottom:"none"}),t)),cellStackedSmall:ee({},e.breakpoints.down("sm"),{width:"50%"}),responsiveStackedSmall:ee({},e.breakpoints.down("sm"),{width:"50%"})}}),{name:"MUIDataTableBodyCell"})(ue),ce=function(e){function t(){return Z(this,t),ie(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ne(t,e),Q(t,[{key:"render",value:function(){var e,t=this.props,n=t.classes,r=t.options,i=t.rowSelected,a=t.onClick,o=t.className,s=re(t,["classes","options","rowSelected","onClick","className"]);return p.createElement(g,te({hover:!!r.rowHover,onClick:a,className:u((e={},ee(e,n.root,!0),ee(e,n.hover,r.rowHover),ee(e,n.hoverCursor,r.selectableRowsOnClick||r.expandableRowsOnClick),ee(e,n.responsiveStacked,"stacked"===r.responsive||"stackedFullWidth"===r.responsive),e),o),selected:i},s),this.props.children)}}]),t}(p.Component),le=a.withStyles((function(e){return{root:{},hover:{},hoverCursor:{cursor:"pointer"},responsiveStacked:ee({},e.breakpoints.down("sm"),{border:"solid 2px rgba(0, 0, 0, 0.15)"})}}),{name:"MUIDataTableBodyRow"})(ce),fe=function(e){function t(){return Z(this,t),ie(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ne(t,e),Q(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.classes,i=n.fixedHeader,a=n.fixedHeaderOptions,o=n.isHeaderCell,s=n.expandableOn,c=n.selectableOn,l=n.isRowExpanded,f=n.onExpand,d=n.isRowSelectable,h=n.selectableRowsHeader,m=n.hideExpandButton,g=re(n,["classes","fixedHeader","fixedHeaderOptions","isHeaderCell","expandableOn","selectableOn","isRowExpanded","onExpand","isRowSelectable","selectableRowsHeader","hideExpandButton"]),w=void 0;if(!s&&"none"===c)return!1;i&&(w=r.fixedHeader),a&&(w=r.fixedHeaderCommon,a.xAxis&&(w+=" "+r.fixedHeaderXAxis),a.yAxis&&(w+=" "+r.fixedHeaderYAxis));var O=u((ee(e={},r.root,!0),ee(e,w,!0),ee(e,r.headerCell,o),e)),k=u(ee({},r.expandDisabled,m)),E=u((ee(t={},r.icon,!0),ee(t,r.hide,o),ee(t,r.expanded,l),t));return p.createElement(v,{className:O,padding:"checkbox"},p.createElement("div",{style:{display:"flex",alignItems:"center"}},s&&p.createElement(b,{onClick:f,disabled:o,className:k},p.createElement(x,{id:"expandable-button",className:E})),"none"!==c&&(!o||"multiple"===c&&!1!==h?p.createElement(y,te({classes:{root:r.checkboxRoot,checked:r.checked,disabled:r.disabled},color:"primary",disabled:!d},g)):null)))}}]),t}(p.Component);fe.defaultProps={isHeaderCell:!1,isRowExpanded:!1,expandableOn:!1,selectableOn:"none"};var de=a.withStyles((function(e){return{root:{},fixedHeader:{position:"sticky",top:"0px",left:"0px",zIndex:100},fixedHeaderCommon:{position:"sticky",zIndex:100,backgroundColor:e.palette.background.paper},fixedHeaderXAxis:{left:"0px"},fixedHeaderYAxis:{top:"0px"},icon:{cursor:"pointer",transition:"transform 0.25s"},expanded:{transform:"rotate(90deg)"},hide:{visibility:"hidden"},headerCell:{zIndex:110,backgroundColor:e.palette.background.paper},expandDisabled:{},checkboxRoot:{},checked:{},disabled:{}}}),{name:"MUIDataTableSelectCell"})(fe);function pe(e){return e.reduce((function(e,t){return e[t.dataIndex]=!0,e}),{})}function he(e){return"string"==typeof e?e.replace(/^\+|^\-|^\=|^\@/g,"'$&"):e}function me(e,t,n){var r=e<=t?1:Math.ceil(e/t);return n>=r?r-1:n}function ve(){return Intl?new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare:function(e,t){return e.localeCompare(t)}}function ge(e,t){var n=new Blob([e],{type:"text/csv"});if(navigator&&navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(n,t);else{var r="data:text/csv;charset=utf-8,"+e,i=window.URL||window.webkitURL,a=void 0===i.createObjectURL?r:i.createObjectURL(n),o=document.createElement("a");o.setAttribute("href",a),o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}}function ye(e,t,n,r){var i=function(e,t,n){var r=function(e){return"string"==typeof e?e.replace(/\"/g,'""'):e},i=function(e){return e.reduce((function(e,t){return t.download?e+'"'+he(r(t.label||t.name))+'"'+n.downloadOptions.separator:e}),"").slice(0,-1)+"\r\n"},a=i(e),o=function(t){return t.length?t.reduce((function(t,i){return t+'"'+i.data.filter((function(t,n){return e[n].download})).map((function(e){return he(r(e))})).join('"'+n.downloadOptions.separator+'"')+'"\r\n'}),"").trim():""},u=o(t);return n.onDownload?n.onDownload(i,o,e,t):(""+a+u).trim()}(e,t,n);n.onDownload&&!1===i||r(i,n.downloadOptions.filename)}var be=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleRowSelect=function(e,t){var n=!(!t||!t.nativeEvent)&&t.nativeEvent.shiftKey,i=[],a=r.props.previousSelectedRow;if(n&&a&&a.index<r.props.data.length){var o=a.index,u=c(r.props.selectedRows),s=r.props.data[e.index].dataIndex;0===u.data.filter((function(e){return e.dataIndex===s})).length&&(u.data.push({index:e.index,dataIndex:s}),u.lookup[s]=!0);for(var l=function(){var t=r.props.data[o].dataIndex;if(r.isRowSelectable(t,u)){var n={index:o,dataIndex:t};0===u.data.filter((function(e){return e.dataIndex===t})).length&&(u.data.push(n),u.lookup[t]=!0),i.push(n)}o=e.index>o?o+1:o-1};o!==e.index;)l()}r.props.selectRowUpdate("cell",e,i)},r.handleRowClick=function(e,t,n){if("expandable-button"===n.target.id||"path"===n.target.nodeName&&"expandable-button"===n.target.parentNode.id)r.props.options.onRowClick&&r.props.options.onRowClick(e,t,n);else if(!n.target.id||!n.target.id.startsWith("MUIDataTableSelectCell")){if(r.props.options.selectableRowsOnClick&&"none"!==r.props.options.selectableRows&&r.isRowSelectable(t.dataIndex,r.props.selectedRows)){var i={index:t.rowIndex,dataIndex:t.dataIndex};r.handleRowSelect(i,n)}if(r.props.options.expandableRowsOnClick&&r.props.options.expandableRows&&r.isRowExpandable(t.dataIndex,r.props.expandedRows)){var a={index:t.rowIndex,dataIndex:t.dataIndex};r.props.toggleExpandRow(a)}r.props.options.selectableRowsOnClick||r.props.options.onRowClick&&r.props.options.onRowClick(e,t,n)}},ie(r,n)}return ne(t,e),Q(t,[{key:"buildRows",value:function(){var e=this.props,t=e.data,n=e.page,r=e.rowsPerPage,i=e.count;if(this.props.options.serverSide)return t.length?t:null;var a=[],o=me(i,r,n),u=0===o?0:o*r,s=Math.min(i,(o+1)*r);n>o&&console.warn("Current page is out of range, using the highest page that is in range instead.");for(var c=u;c<i&&c<s;c++)void 0!==t[c]&&a.push(t[c]);return a.length?a:null}},{key:"getRowIndex",value:function(e){var t=this.props,n=t.page,r=t.rowsPerPage;return t.options.serverSide?e:(0===n?0:n*r)+e}},{key:"isRowSelected",value:function(e){var t=this.props.selectedRows;return!(!t.lookup||!t.lookup[e])}},{key:"isRowExpanded",value:function(e){var t=this.props.expandedRows;return!(!t.lookup||!t.lookup[e])}},{key:"isRowSelectable",value:function(e,t){var n=this.props.options;return t=t||this.props.selectedRows,!n.isRowSelectable||n.isRowSelectable(e,t)}},{key:"isRowExpandable",value:function(e){var t=this.props,n=t.options,r=t.expandedRows;return!n.isRowExpandable||n.isRowExpandable(e,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.columns,i=t.toggleExpandRow,a=t.options,o=this.buildRows(),u=r.filter((function(e){return"true"===e.display})).length;return p.createElement(m,null,o&&o.length>0?o.map((function(t,n){var o=t.data,u=t.dataIndex;return a.customRowRender?a.customRowRender(o,u,n):p.createElement(p.Fragment,{key:n},p.createElement(le,te({},a.setRowProps?a.setRowProps(o,u):{},{options:a,rowSelected:"none"!==a.selectableRows&&e.isRowSelected(u),onClick:e.handleRowClick.bind(null,o,{rowIndex:n,dataIndex:u}),"data-testid":"MUIDataTableBodyRow-"+u,id:"MUIDataTableBodyRow-"+u}),p.createElement(de,{onChange:e.handleRowSelect.bind(null,{index:e.getRowIndex(n),dataIndex:u}),onExpand:i.bind(null,{index:e.getRowIndex(n),dataIndex:u}),fixedHeader:a.fixedHeader,fixedHeaderOptions:a.fixedHeaderOptions,checked:e.isRowSelected(u),expandableOn:a.expandableRows,hideExpandButton:!e.isRowExpandable(u)&&a.expandableRows,selectableOn:a.selectableRows,isRowExpanded:e.isRowExpanded(u),isRowSelectable:e.isRowSelectable(u),id:"MUIDataTableSelectCell-"+u}),o.map((function(e,t){return"true"===r[t].display&&p.createElement(se,te({},r[t].setCellProps?r[t].setCellProps(e,u,t):{},{"data-testid":"MuiDataTableBodyCell-"+t+"-"+n,dataIndex:u,rowIndex:n,colIndex:t,columnHeader:r[t].label,print:r[t].print,options:a,key:t}),e)}))),e.isRowExpanded(u)&&a.renderExpandableRow(o,{rowIndex:n,dataIndex:u}))})):p.createElement(le,{options:a},p.createElement(se,{colSpan:"none"!==a.selectableRows||a.expandableRows?u+1:u,options:a,colIndex:0,rowIndex:0},p.createElement(h,{variant:"subtitle1",className:n.emptyTitle},a.textLabels.body.noMatch))))}}]),t}(p.Component);be.defaultProps={toggleExpandRow:function(){}};var xe=a.withStyles({root:{},emptyTitle:{textAlign:"center"}},{name:"MUIDataTableBody"})(be),we=function(e){function t(){return Z(this,t),ie(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ne(t,e),Q(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.filterList,r=e.filterUpdate,i=e.filterListRenderers,a=e.columnNames,o=e.serverSideFilterList,u=e.customFilterListUpdate,s=this.props.options.serverSide,c=function(e,n,i,o,s){var c=void 0;return c=s?u[n]?"custom":"chip":a[n].filterType,p.createElement(w,{label:e,key:i,onDelete:r.bind(null,n,o[i]||[],a[n].name,c,u[n]),className:t.chip})};return p.createElement("div",{className:t.root},function(e){return e.map((function(n,o){if("custom"===a[o].filterType&&e[o].length){var u=i[o](n);if(u)return Array.isArray(u)?u.map((function(e,t){return c(e,o,t,n,!0)})):c(u,o,o,n,!1)}return n.map((function(e,n){return function(e,n,o){return p.createElement(w,{label:i[e](n),key:o,onDelete:r.bind(null,e,n,a[e].name,"chip"),className:t.chip})}(o,e,n)}))}))}(s?o:n))}}]),t}(p.Component),Oe=a.withStyles({root:{display:"flex",justifyContent:"left",flexWrap:"wrap",margin:"0px 16px 0px 16px"},chip:{margin:"8px 8px 0px 0px"}},{name:"MUIDataTableFilterList"})(we),ke=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleKeyboardSortinput=function(e){return"Enter"===e.key&&r.props.toggleSort(r.props.index),!1},r.handleSortClick=function(){r.props.toggleSort(r.props.index)},ie(r,n)}return ne(t,e),Q(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.children,i=n.classes,a=n.options,o=n.sortDirection,s=n.sort,c=n.hint,l=n.print,f=n.column,d=n.cellHeaderProps,h=void 0===d?{}:d,m=h.className,g=re(h,["className"]),y="none"!==o&&void 0!==o,b="none"!==o&&o,x=void 0,w=te({classes:{root:i.sortLabelRoot},active:y,hideSortIcon:!0},b?{direction:o}:{});a.fixedHeader&&(x=i.fixedHeader),a.fixedHeaderOptions&&(x=i.fixedHeaderCommon,a.fixedHeaderOptions.xAxis&&(x+=" "+i.fixedHeaderXAxis),a.fixedHeaderOptions.yAxis&&(x+=" "+i.fixedHeaderYAxis));var O=u((ee(e={},i.root,!0),ee(e,x,!0),ee(e,"datatables-noprint",!l),ee(e,m,m),e));return p.createElement(v,te({className:O,scope:"col",sortDirection:b},g),a.sort&&s?p.createElement("span",{role:"button",onKeyUp:this.handleKeyboardSortinput,onClick:this.handleSortClick,className:i.toolButton,tabIndex:0},p.createElement(S,{title:a.textLabels.body.columnHeaderTooltip?a.textLabels.body.columnHeaderTooltip(f):a.textLabels.body.toolTip,placement:"bottom-start",classes:{tooltip:i.tooltip,popper:i.mypopper}},p.createElement("div",{className:i.sortAction},p.createElement("div",{className:u((t={},ee(t,i.data,!0),ee(t,i.sortActive,y),t))},r),p.createElement("div",{className:i.sortAction},p.createElement(E,w)))),c&&p.createElement(S,{title:c},p.createElement(C,{className:y?i.hintIconWithSortIcon:i.hintIconAlone,fontSize:"small"}))):p.createElement("div",{className:c?i.sortAction:null},r,c&&p.createElement(S,{title:c,placement:"bottom-end",classes:{tooltip:i.tooltip,popper:i.mypopper},enterDelay:300},p.createElement(C,{className:i.hintIconAlone,fontSize:"small"}))))}}]),t}(p.Component),Ee=a.withStyles((function(e){return{root:{},fixedHeader:{position:"sticky",top:"0px",left:"0px",zIndex:100,backgroundColor:e.palette.background.paper},fixedHeaderCommon:{position:"sticky",zIndex:100,backgroundColor:e.palette.background.paper},fixedHeaderXAxis:{left:"0px"},fixedHeaderYAxis:{top:"0px"},tooltip:{cursor:"pointer"},mypopper:{"&[data-x-out-of-boundaries]":{display:"none"}},data:{display:"inline-block"},sortAction:{display:"flex",verticalAlign:"top",cursor:"pointer"},sortLabelRoot:{height:"10px"},sortActive:{color:e.palette.text.primary},toolButton:{display:"flex",outline:"none",cursor:"pointer"},hintIconAlone:{marginTop:"-3px",marginLeft:"3px"},hintIconWithSortIcon:{marginTop:"-3px"}}}),{name:"MUIDataTableHeadCell"})(ke),Se=function(e){function t(){return Z(this,t),ie(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ne(t,e),Q(t,[{key:"render",value:function(){var e=this.props.classes;return p.createElement(g,{className:u(ee({},e.root,!0))},this.props.children)}}]),t}(p.Component),Ce=a.withStyles({root:{}},{name:"MUIDataTableHeadRow"})(Se),_e=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleToggleColumn=function(e){r.props.toggleSort(e)},r.handleRowSelect=function(){r.props.selectRowUpdate("head",null)},ie(r,n)}return ne(t,e),Q(t,[{key:"componentDidMount",value:function(){this.props.handleHeadUpdateRef(this.handleUpdateCheck)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.classes,i=n.columns,a=n.count,o=n.options,s=n.data,c=n.setCellRef,l=n.selectedRows,f=l&&l.data.length||0,d=f>0&&f<a,h=f===a;if(!0===o.disableToolbarSelect)if(h){for(var m=0;m<s.length;m++)if(!l.lookup[s[m].dataIndex]){h=!1,d=!0;break}}else f>a&&(d=!0);return p.createElement(O,{className:u((e={},ee(e,r.responsiveStacked,"stacked"===o.responsive||"stackedFullWidth"===o.responsive),ee(e,r.main,!0),e))},p.createElement(Ce,null,p.createElement(de,{ref:function(e){return c(0,k.findDOMNode(e))},onChange:this.handleRowSelect.bind(null),indeterminate:d,checked:h,isHeaderCell:!0,expandableOn:o.expandableRows,selectableOn:o.selectableRows,fixedHeader:o.fixedHeader,fixedHeaderOptions:o.fixedHeaderOptions,selectableRowsHeader:o.selectableRowsHeader,isRowSelectable:!0}),i.map((function(e,n){return"true"===e.display&&(e.customHeadRender?e.customHeadRender(te({index:n},e),t.handleToggleColumn):p.createElement(Ee,{cellHeaderProps:i[n].setCellHeaderProps?i[n].setCellHeaderProps(te({index:n},e)):{},key:n,index:n,type:"cell",ref:function(e){return c(n+1,k.findDOMNode(e))},sort:e.sort,sortDirection:e.sortDirection,toggleSort:t.handleToggleColumn,hint:e.hint,print:e.print,options:o,column:e},e.label))}))))}}]),t}(p.Component),je=a.withStyles((function(e){return{main:{},responsiveStacked:ee({},e.breakpoints.down("sm"),{display:"none"})}}),{name:"MUIDataTableHead"})(_e),Ae=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleRowChange=function(e){r.props.changeRowsPerPage(e.target.value)},r.handlePageChange=function(e,t){r.props.changePage(t)},ie(r,n)}return ne(t,e),Q(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.classes,r=e.options,i=e.rowsPerPage,a=e.page,o=r.textLabels.pagination;return p.createElement(_,null,p.createElement(g,null,p.createElement(j,{className:n.root,classes:{caption:n.caption,toolbar:n.toolbar,selectRoot:n.selectRoot},count:t,rowsPerPage:i,page:me(t,i,a),labelRowsPerPage:o.rowsPerPage,labelDisplayedRows:function(e){var t=e.from,n=e.to,r=e.count;return t+"-"+n+" "+o.displayRows+" "+r},backIconButtonProps:{id:"pagination-back","data-testid":"pagination-back","aria-label":o.previous},nextIconButtonProps:{id:"pagination-next","data-testid":"pagination-next","aria-label":o.next},SelectProps:{id:"pagination-input",SelectDisplayProps:{id:"pagination-rows","data-testid":"pagination-rows"},MenuProps:{id:"pagination-menu","data-testid":"pagination-menu",MenuListProps:{id:"pagination-menu-list","data-testid":"pagination-menu-list"}}},rowsPerPageOptions:r.rowsPerPageOptions,onChangePage:this.handlePageChange,onChangeRowsPerPage:this.handleRowChange})))}}]),t}(p.Component),Te=a.withStyles({root:{"&:last-child":{padding:"0px 24px 0px 24px"}},toolbar:{},selectRoot:{},"@media screen and (max-width: 400px)":{toolbar:{"& span:nth-child(2)":{display:"none"}},selectRoot:{marginRight:"8px"}}},{name:"MUIDataTablePagination"})(Ae),Ne=function(e){function t(){return Z(this,t),ie(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ne(t,e),Q(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.rowCount,r=e.page,i=e.rowsPerPage,a=e.changeRowsPerPage,u=e.changePage;return p.createElement(o,null,t.customFooter?t.customFooter(n,r,i,a,u,t.textLabels.pagination):t.pagination&&p.createElement(Te,{count:n,page:r,rowsPerPage:i,changeRowsPerPage:a,changePage:u,component:"div",options:t}))}}]),t}(p.Component),Re=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={resizeCoords:{},priorPosition:{},startPosition:0,tableWidth:"100%",tableHeight:"100%"},r.handleResize=function(){window.innerWidth!==r.windowWidth&&(r.windowWidth=window.innerWidth,r.setDividers())},r.setCellRefs=function(e,t){r.cellsRef=e,r.tableRef=t,r.setDividers()},r.setDividers=function(){var e=k.findDOMNode(r.tableRef).getBoundingClientRect(),t=e.width,n=e.height,i=r.state,a=i.priorPosition,o=i.resizeCoords;Object.entries(r.cellsRef).forEach((function(e){var t=ae(e,2),n=t[0],r=t[1];if(r){var i=r.getBoundingClientRect(),u=window.getComputedStyle(r,null),s=void 0!==o[n]?o[n].left:void 0,c=a[n]||0,l=i.left+r.offsetWidth-parseInt(u.paddingLeft)/2;s!==c&&(o[n]={left:l},a[n]=l)}})),r.setState({tableWidth:t,tableHeight:n,resizeCoords:o,priorPosition:a},r.updateWidths)},r.updateWidths=function(){var e=0,t=r.state,n=t.resizeCoords,i=t.tableWidth;Object.entries(n).forEach((function(t){var n=ae(t,2),a=n[0],o=n[1],u=Number((o.left-e)/i*100).toFixed(2);e=o.left;var s=r.cellsRef[a];s&&(s.style.width=u+"%")}))},r.onResizeStart=function(e,t){r.setState({isResize:!0,id:e,startPosition:t.clientX})},r.onResizeMove=function(e,t){var n=r.state,i=n.startPosition,a=n.isResize,o=n.resizeCoords;if(a){var u=i-(i-t.clientX),s=te({},o[e],{left:u}),c=te({},o,ee({},e,s));r.setState({resizeCoords:c},r.updateWidths)}},r.onResizeEnd=function(e,t){r.setState({isResize:!1,id:null})},ie(r,n)}return ne(t,e),Q(t,[{key:"componentDidMount",value:function(){var e=this;this.windowWidth=null,this.props.setResizeable(this.setCellRefs),this.props.updateDividers((function(){return e.setState({updateCoords:!0},(function(){return e.updateWidths}))})),window.addEventListener("resize",this.handleResize,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize,!1)}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,r=n.id,i=n.isResize,a=n.resizeCoords,o=n.tableWidth,u=n.tableHeight;return p.createElement("div",{className:t.root,style:{width:o}},Object.entries(a).map((function(n){var a=ae(n,2),s=a[0],c=a[1];return p.createElement("div",{"aria-hidden":"true",key:s,onMouseMove:e.onResizeMove.bind(null,s),onMouseUp:e.onResizeEnd.bind(null,s),style:{width:i&&r==s?o:"auto",position:"absolute",height:u,zIndex:1e3}},p.createElement("div",{"aria-hidden":"true",onMouseDown:e.onResizeStart.bind(null,s),className:t.resizer,style:{left:c.left}}))})))}}]),t}(p.Component),De=a.withStyles({root:{position:"absolute"},resizer:{position:"absolute",width:"1px",height:"100%",left:"100px",cursor:"ew-resize",border:"0.1px solid rgba(224, 224, 224, 1)"}},{name:"MUIDataTableResize"})(Re),Ie=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={open:!1},r.handleClick=function(){r.anchorEl=k.findDOMNode(r.anchorEl),r.setState({open:!0})},r.handleRequestClose=function(e){r.setState({open:!1},e&&"function"==typeof e?e():function(){})},r.handleOnExit=function(){r.props.refExit&&r.props.refExit()},ie(r,n)}return ne(t,e),Q(t,[{key:"UNSAFE_componentWillMount",value:function(){this.anchorEl=null}},{key:"componentDidMount",value:function(){this.props.refClose&&this.props.refClose(this.handleRequestClose)}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.open&&(this.anchorEl=k.findDOMNode(this.anchorEl),this.popoverActions.updatePosition())}},{key:"render",value:function(){var e=this,t=this.props,n=(t.className,t.placement,t.trigger),r=(t.refExit,t.content),i=re(t,["className","placement","trigger","refExit","content"]),a=p.cloneElement(p.createElement("span",null,n),{key:"content",ref:function(t){return e.anchorEl=t},onClick:function(){n.props.onClick&&n.props.onClick(),e.handleClick()}});return p.createElement(p.Fragment,null,p.createElement(T,te({action:function(t){return e.popoverActions=t},elevation:2,open:this.state.open,onClose:this.handleRequestClose,onExited:this.handleOnExit,anchorEl:this.anchorEl,ref:function(t){return e.popoverEl},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},i),r),a)}}]),t}(p.Component),Me=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleCheckboxChange=function(e,t,n){r.props.onFilterUpdate(e,t,n,"checkbox")},r.handleDropdownChange=function(e,t,n){var i=r.props.options.textLabels.filter.all,a=e.target.value===i?[]:[e.target.value];r.props.onFilterUpdate(t,a,n,"dropdown")},r.handleMultiselectChange=function(e,t,n){r.props.onFilterUpdate(e,t,n,"multiselect")},r.handleTextFieldChange=function(e,t,n){r.props.onFilterUpdate(t,e.target.value,n,"textField")},r.handleCustomChange=function(e,t,n){r.props.onFilterUpdate(t,e,n.name,n.filterType)},ie(r,n)}return ne(t,e),Q(t,[{key:"renderCheckbox",value:function(e,t){var n=this,r=this.props,i=r.classes,a=r.filterData,o=r.filterList;return p.createElement(N.GridListTile,{key:t,cols:2},p.createElement(M,null,p.createElement(N.Grid,{item:!0,xs:12},p.createElement(h,{variant:"body2",className:i.checkboxListTitle},e.label)),p.createElement(N.Grid,{container:!0},a[t].map((function(r,a){return p.createElement(N.Grid,{item:!0,key:a},p.createElement(I,{key:a,classes:{root:i.checkboxFormControl,label:i.checkboxFormControlLabel},control:p.createElement(y,{className:i.checkboxIcon,onChange:n.handleCheckboxChange.bind(null,t,r,e.name),checked:o[t].indexOf(r)>=0,classes:{root:i.checkbox,checked:i.checked},value:null!=r?r.toString():""}),label:r}))})))))}},{key:"renderSelect",value:function(e,t){var n=this,r=this.props,i=r.classes,a=r.filterData,o=r.filterList,u=r.options.textLabels.filter;return p.createElement(N.GridListTile,{key:t,cols:1,classes:{tile:i.gridListTile}},p.createElement(D,{key:t,fullWidth:!0},p.createElement(P,{htmlFor:e.name},e.label),p.createElement(B,{fullWidth:!0,value:o[t].length?o[t].toString():u.all,name:e.name,onChange:function(r){return n.handleDropdownChange(r,t,e.name)},input:p.createElement(F,{name:e.name,id:e.name})},p.createElement(L,{value:u.all,key:0},u.all),a[t].map((function(e,t){return p.createElement(L,{value:e,key:t+1},null!=e?e.toString():"")})))))}},{key:"renderTextField",value:function(e,t){var n=this,r=this.props,i=r.classes,a=r.filterList;return p.createElement(N.GridListTile,{key:t,cols:1,classes:{tile:i.gridListTile}},p.createElement(D,{key:t,fullWidth:!0},p.createElement(N.TextField,{fullWidth:!0,label:e.label,value:a[t].toString()||"",onChange:function(r){return n.handleTextFieldChange(r,t,e.name)}})))}},{key:"renderMultiselect",value:function(e,t){var n=this,r=this.props,i=r.classes,a=r.filterData,o=r.filterList;return p.createElement(N.GridListTile,{key:t,cols:1,classes:{tile:i.gridListTile}},p.createElement(D,{key:t,fullWidth:!0},p.createElement(P,{htmlFor:e.name},e.label),p.createElement(B,{multiple:!0,fullWidth:!0,value:o[t]||[],renderValue:function(e){return e.join(", ")},name:e.name,onChange:function(r){return n.handleMultiselectChange(t,r.target.value,e.name)},input:p.createElement(F,{name:e.name,id:e.name})},a[t].map((function(e,n){return p.createElement(L,{value:e,key:n+1},p.createElement(y,{checked:o[t].indexOf(e)>=0,value:null!=e?e.toString():"",className:i.checkboxIcon,classes:{root:i.checkbox,checked:i.checked}}),p.createElement(z,{primary:e}))})))))}},{key:"renderCustomField",value:function(e,t){var n=this.props,r=n.classes,i=n.filterList,a=n.options,o=e.filterOptions&&e.filterOptions.display||a.filterOptions&&a.filterOptions.display;if(o)return p.createElement(N.GridListTile,{key:t,cols:1,classes:{tile:r.gridListTile}},p.createElement(D,{key:t,fullWidth:!0},o(i,this.handleCustomChange,t,e)));console.error('Property "display" is required when using custom filter type.')}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.columns,i=t.options,a=t.onFilterReset,o=t.customFooter,s=t.filterList,c=i.textLabels.filter,l=1===r.filter((function(e){return e.filter})).length?1:2;return p.createElement("div",{className:n.root},p.createElement("div",{className:n.header},p.createElement("div",{className:n.reset},p.createElement(h,{variant:"body2",className:u(ee({},n.title,!0))},c.title),p.createElement(R,{color:"primary",className:n.resetLink,tabIndex:0,"aria-label":c.reset,"data-testid":"filterReset-button",onClick:a},c.reset)),p.createElement("div",{className:n.filtersSelected})),p.createElement(N.GridList,{cellHeight:"auto",cols:l,spacing:34},r.map((function(t,n){if(t.filter){var r=t.filterType||i.filterType;return"checkbox"===r?e.renderCheckbox(t,n):"multiselect"===r?e.renderMultiselect(t,n):"textField"===r?e.renderTextField(t,n):"custom"===r?e.renderCustomField(t,n):e.renderSelect(t,n)}}))),o?o(s):"")}}]),t}(p.Component),Fe=a.withStyles((function(e){return{root:{backgroundColor:e.palette.background.default,padding:"24px 24px 36px 24px",fontFamily:"Roboto"},header:{flex:"0 0 auto",marginBottom:"16px",width:"100%",display:"flex",justifyContent:"space-between"},title:{display:"inline-block",marginLeft:"7px",color:e.palette.text.primary,fontSize:"14px",fontWeight:500},noMargin:{marginLeft:"0px"},reset:{alignSelf:"left"},resetLink:{marginLeft:"16px",fontSize:"12px",cursor:"pointer"},filtersSelected:{alignSelf:"right"},checkboxListTitle:{marginLeft:"7px",marginBottom:"8px",fontSize:"14px",color:e.palette.text.secondary,textAlign:"left",fontWeight:500},checkboxFormGroup:{marginTop:"8px"},checkboxFormControl:{margin:"0px"},checkboxFormControlLabel:{fontSize:"15px",marginLeft:"8px",color:e.palette.text.primary},checkboxIcon:{width:"32px",height:"32px"},checkbox:{"&$checked":{color:e.palette.primary.main}},checked:{},gridListTile:{marginTop:"16px"}}}),{name:"MUIDataTableFilter"})(Me),Pe=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleColChange=function(e){r.props.onColumnUpdate(e)},ie(r,n)}return ne(t,e),Q(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.columns,i=t.options.textLabels.viewColumns;return p.createElement(D,{component:"fieldset",className:n.root,"aria-label":i.titleAria},p.createElement(h,{variant:"caption",className:n.title},i.title),p.createElement(M,{className:n.formGroup},r.map((function(t,r){return"excluded"!==t.display&&!1!==t.viewColumns&&p.createElement(I,{key:r,classes:{root:n.formControl,label:n.label},control:p.createElement(y,{className:n.checkbox,classes:{root:n.checkboxRoot,checked:n.checked},onChange:e.handleColChange.bind(null,r),checked:"true"===t.display,value:t.name}),label:t.label})}))))}}]),t}(p.Component),ze=a.withStyles((function(e){return{root:{padding:"16px 24px 16px 24px",fontFamily:"Roboto"},title:{marginLeft:"-7px",fontSize:"14px",color:e.palette.text.secondary,textAlign:"left",fontWeight:500},formGroup:{marginTop:"8px"},formControl:{},checkbox:{padding:"0px",width:"32px",height:"32px"},checkboxRoot:{"&$checked":{color:e.palette.primary.main}},checked:{},label:{fontSize:"15px",marginLeft:"8px",color:e.palette.text.primary}}}),{name:"MUIDataTableViewCol"})(Pe),Le=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleTextChange=function(e){r.props.onSearch(e.target.value)},r.onKeyDown=function(e){27===e.keyCode&&r.props.onHide()},ie(r,n)}return ne(t,e),Q(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.options,i=t.onHide,a=t.searchText;return p.createElement(W,{appear:!0,in:!0,timeout:300},p.createElement("div",{className:n.main,ref:function(t){return e.rootRef=t}},p.createElement(V,{className:n.searchIcon}),p.createElement(U,{className:n.searchText,autoFocus:!0,InputProps:{"data-test-id":r.textLabels.toolbar.search},inputProps:{"aria-label":r.textLabels.toolbar.search},value:a||"",onChange:this.handleTextChange,fullWidth:!0,inputRef:function(t){return e.searchField=t},placeholder:r.searchPlaceholder}),p.createElement(b,{className:n.clearIcon,onClick:i},p.createElement(H,null))))}}]),t}(p.Component),Be=a.withStyles((function(e){return{main:{display:"flex",flex:"1 0 auto"},searchIcon:{color:e.palette.text.secondary,marginTop:"10px",marginRight:"8px"},searchText:{flex:"0.8 0"},clearIcon:{"&:hover":{color:e.palette.error.main}}}}),{name:"MUIDataTableSearch"})(Le),We=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={iconActive:null,showSearch:Boolean(r.props.searchText||r.props.options.searchText||r.props.options.searchOpen),searchText:r.props.searchText||null},r.handleCSVDownload=function(){var e=r.props,t=e.data,n=e.displayData,i=e.columns,a=e.options,o=c(t),u=i;a.downloadOptions&&a.downloadOptions.filterOptions&&(a.downloadOptions.filterOptions.useDisplayedRowsOnly&&(o=n.map((function(e,n){var r=-1;return e.index=n,{data:e.data.map((function(n){return r+=1,"object"!==(void 0===n?"undefined":J(n))||null===n||Array.isArray(n)?n:l(t,(function(t){return t.index===e.dataIndex})).data[r]}))}}))),a.downloadOptions.filterOptions.useDisplayedColumnsOnly&&(u=i.filter((function(e,t){return"true"===e.display})),o=o.map((function(e){return e.data=e.data.filter((function(e,t){return"true"===i[t].display})),e})))),ye(u,o,a,ge)},r.setActiveIcon=function(e){r.setState((function(t){return{showSearch:r.isSearchShown(e),iconActive:e,prevIconActive:t.iconActive}}),(function(){var e=r.state,t=e.iconActive,n=e.prevIconActive;"filter"===t&&(r.props.setTableAction("onFilterDialogOpen"),r.props.options.onFilterDialogOpen&&r.props.options.onFilterDialogOpen()),void 0===t&&"filter"===n&&(r.props.setTableAction("onFilterDialogClose"),r.props.options.onFilterDialogClose&&r.props.options.onFilterDialogClose())}))},r.isSearchShown=function(e){var t=!1;if(r.state.showSearch)if(r.state.searchText)t=!0;else{var n=r.props.options.onSearchClose;r.props.setTableAction("onSearchClose"),n&&n(),t=!1}else"search"===e&&(t=r.showSearch());return t},r.getActiveIcon=function(e,t){var n=r.state.iconActive===t;if("search"===t){var i=r.state,a=i.showSearch,o=i.searchText;n=n||a||o}return n?e.iconActive:e.icon},r.showSearch=function(){return r.props.setTableAction("onSearchOpen"),r.props.options.onSearchOpen&&r.props.options.onSearchOpen(),!0},r.hideSearch=function(){var e=r.props.options.onSearchClose;r.props.setTableAction("onSearchClose"),e&&e(),r.props.searchClose(),r.setState((function(){return{iconActive:null,showSearch:!1,searchText:null}})),r.searchButton.focus()},r.handleSearch=function(e){r.setState({searchText:e}),r.props.searchTextUpdate(e)},r.handleSearchIconClick=function(){var e=r.state,t=e.showSearch,n=e.searchText;t&&!n?r.hideSearch():r.setActiveIcon("search")},ie(r,n)}return ne(t,e),Q(t,[{key:"componentDidUpdate",value:function(e){this.props.searchText!==e.searchText&&this.setState({searchText:this.props.searchText})}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.options,i=t.classes,a=t.columns,o=t.filterData,u=t.filterList,s=t.filterUpdate,c=t.resetFilters,l=t.toggleViewColumn,f=t.title,d=(t.tableRef,r.textLabels.toolbar),m=d.search,v=d.downloadCsv,g=d.print,y=d.viewColumns,x=d.filterTable,w=this.state,O=w.showSearch,k=w.searchText;return p.createElement(A,{className:"scrollFullHeightFullWidth"!==r.responsive?i.root:i.fullWidthRoot,role:"toolbar","aria-label":"Table Toolbar"},p.createElement("div",{className:"scrollFullHeightFullWidth"!==r.responsive?i.left:i.fullWidthLeft},!0===O?r.customSearchRender?r.customSearchRender(k,this.handleSearch,this.hideSearch,r):p.createElement(Be,{searchText:k,onSearch:this.handleSearch,onHide:this.hideSearch,options:r}):"string"!=typeof f?f:p.createElement("div",{className:i.titleRoot,"aria-hidden":"true"},p.createElement(h,{variant:"h6",className:"scrollFullHeightFullWidth"!==r.responsive?i.titleText:i.fullWidthTitleText},f))),p.createElement("div",{className:"scrollFullHeightFullWidth"!==r.responsive?i.actions:i.fullWidthActions},r.search&&p.createElement(S,{title:m,disableFocusListener:!0},p.createElement(b,{"aria-label":m,"data-testid":m+"-iconButton",buttonRef:function(t){return e.searchButton=t},classes:{root:this.getActiveIcon(i,"search")},onClick:this.handleSearchIconClick},p.createElement(V,null))),r.download&&p.createElement(S,{title:v},p.createElement(b,{"data-testid":v+"-iconButton","aria-label":v,classes:{root:i.icon},onClick:this.handleCSVDownload},p.createElement(q,null))),r.print&&p.createElement("span",null,p.createElement(X,{trigger:function(){return p.createElement("span",null,p.createElement(S,{title:g},p.createElement(b,{"data-testid":g+"-iconButton","aria-label":g,classes:{root:i.icon}},p.createElement(G,null))))},content:function(){return e.props.tableRef()}})),r.viewColumns&&p.createElement(Ie,{refExit:this.setActiveIcon.bind(null),trigger:p.createElement(S,{title:y,disableFocusListener:!0},p.createElement(b,{"data-testid":y+"-iconButton","aria-label":y,classes:{root:this.getActiveIcon(i,"viewcolumns")},onClick:this.setActiveIcon.bind(null,"viewcolumns")},p.createElement($,null))),content:p.createElement(ze,{data:n,columns:a,options:r,onColumnUpdate:l})}),r.filter&&p.createElement(Ie,{refExit:this.setActiveIcon.bind(null),classes:{paper:i.filterPaper},trigger:p.createElement(S,{title:x,disableFocusListener:!0},p.createElement(b,{"data-testid":x+"-iconButton","aria-label":x,classes:{root:this.getActiveIcon(i,"filter")},onClick:this.setActiveIcon.bind(null,"filter")},p.createElement(K,null))),content:p.createElement(Fe,{customFooter:r.customFilterDialogFooter,columns:a,options:r,filterList:u,filterData:o,onFilterUpdate:s,onFilterReset:c})}),r.customToolbar&&r.customToolbar()))}}]),t}(p.Component),Ue=a.withStyles((function(e){var t;return t={root:{},fullWidthRoot:{},left:{flex:"1 1 auto"},fullWidthLeft:{flex:"1 1 auto"},actions:{flex:"1 1 auto",textAlign:"right"},fullWidthActions:{flex:"1 1 auto",textAlign:"right"},titleRoot:{},titleText:{},fullWidthTitleText:{textAlign:"left"},icon:{"&:hover":{color:e.palette.primary.main}},iconActive:{color:e.palette.primary.main},filterPaper:{maxWidth:"50%"},searchIcon:{display:"inline-flex",marginTop:"10px",marginRight:"8px"}},ee(t,e.breakpoints.down("sm"),{titleRoot:{},titleText:{fontSize:"16px"},spacer:{display:"none"},left:{padding:"8px 0px"},actions:{textAlign:"right"}}),ee(t,e.breakpoints.down("xs"),{root:{display:"block"},left:{padding:"8px 0px 0px 0px"},titleText:{textAlign:"center"},actions:{textAlign:"center"}}),ee(t,"@media screen and (max-width: 480px)",{}),t}),{name:"MUIDataTableToolbar"})(We),Ve=function(e){function t(){var e,n,r;Z(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ie(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleCustomSelectedRows=function(e){if(!Array.isArray(e))throw new TypeError('"selectedRows" must be an "array", but it\'s "'+(void 0===e?"undefined":J(e))+'"');if(e.some((function(e){return"number"!=typeof e})))throw new TypeError('Array "selectedRows" must contain only numbers');var t=r.props.options;if(e.length>1&&"single"===t.selectableRows)throw new Error('Can not select more than one row when "selectableRows" is "single"');r.props.selectRowUpdate("custom",e)},ie(r,n)}return ne(t,e),Q(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onRowsDelete,r=e.selectedRows,a=e.options,o=e.displayData,u=a.textLabels.selectedRows;return p.createElement(i,{className:t.root},p.createElement("div",null,p.createElement(h,{variant:"subtitle1",className:t.title},r.data.length," ",u.text)),a.customToolbarSelect?a.customToolbarSelect(r,o,this.handleCustomSelectedRows):p.createElement(S,{title:u.delete},p.createElement(b,{className:t.iconButton,onClick:n,"aria-label":u.deleteAria},p.createElement(Y,{className:t.deleteIcon}))))}}]),t}(p.Component),He=a.withStyles((function(e){return{root:{backgroundColor:e.palette.background.default,flex:"1 1 100%",display:"flex",position:"relative",zIndex:120,justifyContent:"space-between",alignItems:"center",paddingTop:"function"==typeof e.spacing?e.spacing(1):e.spacing.unit,paddingBottom:"function"==typeof e.spacing?e.spacing(1):e.spacing.unit},title:{paddingLeft:"26px"},iconButton:{marginRight:"24px"},deleteIcon:{}}}),{name:"MUIDataTableToolbarSelect"})(Ve),qe=1,Ge=2,$e=["title","filter","search","print","download","viewColumns","customToolbar"],Ke=function(e){function t(){Z(this,t);var e=ie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={announceText:null,activeColumn:null,data:[],displayData:[],page:0,rowsPerPage:0,count:0,columns:[],filterData:[],filterList:[],selectedRows:{data:[],lookup:{}},previousSelectedRow:null,expandedRows:{data:[],lookup:{}},showResponsive:!1,searchText:null},e.getDefaultOptions=function(){return{responsive:"stacked",filterType:"dropdown",pagination:!0,textLabels:{body:{noMatch:"Sorry, no matching records found",toolTip:"Sort"},pagination:{next:"Next Page",previous:"Previous Page",rowsPerPage:"Rows per page:",displayRows:"of"},toolbar:{search:"Search",downloadCsv:"Download CSV",print:"Print",viewColumns:"View Columns",filterTable:"Filter Table"},filter:{all:"All",title:"FILTERS",reset:"RESET"},viewColumns:{title:"Show Columns",titleAria:"Show/Hide Table Columns"},selectedRows:{text:"row(s) selected",delete:"Delete",deleteAria:"Delete Selected Rows"}},serverSideFilterList:[],expandableRows:!1,expandableRowsOnClick:!1,resizableColumns:!1,selectableRows:"multiple",selectableRowsOnClick:!1,selectableRowsHeader:!0,caseSensitive:!1,disableToolbarSelect:!1,serverSide:!1,rowHover:!0,elevation:4,rowsPerPage:10,rowsPerPageOptions:[10,15,100],filter:!0,fixedHeaderOptions:{xAxis:!0,yAxis:!0},sortFilterList:!0,sort:!0,search:!0,print:!0,viewColumns:!0,download:!0,downloadOptions:{filename:"tableDownload.csv",separator:","},setTableProps:function(){return{}}}},e.handleOptionDeprecation=function(){"boolean"==typeof e.options.selectableRows&&(e.options.selectableRows=e.options.selectableRows?"multiple":"none"),["scrollMaxHeight","scrollFullHeight","stacked","stackedFullWidth","scrollFullHeightFullWidth"].indexOf(e.options.responsive),e.options.responsive,!1===e.options.fixedHeader||e.options.fixedHeader,e.props.columns.map((function(e){e.options&&e.options.customFilterListRender}))},e.setTableAction=function(t){"function"==typeof e.options.onTableChange&&e.options.onTableChange(t,e.state)},e.setTableInit=function(t){"function"==typeof e.options.onTableInit&&e.options.onTableInit(t,e.state)},e.setHeadCellRef=function(t,n){e.headCellRefs[t]=n},e.getTableContentRef=function(){return e.tableContent.current},e.buildColumns=function(e){var t=[],n=[],r=[],i=!1;return e.forEach((function(e,a){var o={display:"true",empty:!1,filter:!0,sort:!0,print:!0,searchable:!0,download:!0,viewColumns:!0,sortDirection:"none"};if("object"===(void 0===e?"undefined":J(e))){var u=te({},e.options);u&&(void 0!==u.display&&(u.display=u.display.toString()),null===u.sortDirection&&(u.sortDirection="none"),void 0!==u.sortDirection&&"none"!==u.sortDirection&&(i?(console.error("sortDirection is set for more than one column. Only the first column will be considered."),u.sortDirection="none"):i=!0)),o=te({name:e.name,label:e.label?e.label:e.name},o,u)}else o=te({},o,{name:e,label:e});t.push(o),n[a]=[],r[a]=[]})),{columns:t,filterData:n,filterList:r}},e.transformData=function(e,t){var n=Array.isArray(t[0])?t.map((function(t){var n=-1;return e.map((function(e){return e.empty||n++,e.empty?void 0:t[n]}))})):t.map((function(t){return e.map((function(e){return n=t,e.name.split(".").reduce((function(e,t){return e?e[t]:void 0}),n);var n}))}));return n.filter((function(e){return e.filter((function(e){return"object"===(void 0===e?"undefined":J(e))&&null!==e&&!Array.isArray(e)})).length>0})).length,n},e.hasSearchText=function(e,t,n){var r=e.toString(),i=t.toString();return n||(i=i.toLowerCase(),r=r.toLowerCase()),r.indexOf(i)>=0},e.updateDataCol=function(t,n,r){e.setState((function(i){var a=c(i.data),o=c(i.filterData),u=e.getTableMeta(t,n,t,i.columns[n],i.data,i),s=i.columns[n].customBodyRender(r,u),l=p.isValidElement(s)&&s.props.value?s.props.value:i.data[t][n],f=o[n].indexOf(l);if(o[n].splice(f,1,l),a[t].data[n]=r,e.options.sortFilterList){var d=ve();o[n].sort(d)}return{data:a,filterData:o,displayData:e.getDisplayData(i.columns,a,i.filterList,i.searchText)}}))},e.getTableMeta=function(e,t,n,r,i,a){return a.columns,a.data,a.displayData,a.filterData,{rowIndex:e,columnIndex:t,columnData:r,rowData:n,tableData:i,tableState:re(a,["columns","data","displayData","filterData"])}},e.toggleViewColumn=function(t){e.setState((function(e){var n=c(e.columns);return n[t].display="true"===n[t].display?"false":"true",{columns:n}}),(function(){e.setTableAction("columnViewChange"),e.options.onColumnViewChange&&e.options.onColumnViewChange(e.state.columns[t].name,"true"===e.state.columns[t].display?"add":"remove")}))},e.toggleSortColumn=function(t){e.setState((function(n){for(var r=c(n.columns),i=n.data,a="desc"===r[t].sortDirection?"asc":"desc",o=0;o<r.length;o++)r[o].sortDirection=t!==o?"none":a;var u=e.getSortDirection(r[t]),s={columns:r,announceText:"Table now sorted by "+r[t].name+" : "+u,activeColumn:t};if(e.options.serverSide)s=te({},s,{data:n.data,displayData:n.displayData,selectedRows:n.selectedRows});else{var l=e.sortTable(i,t,a);s=te({},s,{data:l.data,displayData:e.getDisplayData(r,l.data,n.filterList,n.searchText),selectedRows:l.selectedRows,previousSelectedRow:null})}return s}),(function(){e.setTableAction("sort"),e.options.onColumnSortChange&&e.options.onColumnSortChange(e.state.columns[t].name,e.getSortDirection(e.state.columns[t]))}))},e.changeRowsPerPage=function(t){var n=e.options.count||e.state.displayData.length;e.setState((function(){return{rowsPerPage:t,page:me(n,t,e.state.page)}}),(function(){e.setTableAction("changeRowsPerPage"),e.options.onChangeRowsPerPage&&e.options.onChangeRowsPerPage(e.state.rowsPerPage)}))},e.changePage=function(t){e.setState((function(){return{page:t}}),(function(){e.setTableAction("changePage"),e.options.onChangePage&&e.options.onChangePage(e.state.page)}))},e.searchClose=function(){e.setState((function(t){return{searchText:null,displayData:e.options.serverSide?t.displayData:e.getDisplayData(t.columns,t.data,t.filterList,null)}}),(function(){e.setTableAction("search"),e.options.onSearchChange&&e.options.onSearchChange(e.state.searchText)}))},e.searchTextUpdate=function(t){e.setState((function(n){return{searchText:t&&t.length?t:null,page:0,displayData:e.options.serverSide?n.displayData:e.getDisplayData(n.columns,n.data,n.filterList,t)}}),(function(){e.setTableAction("search"),e.options.onSearchChange&&e.options.onSearchChange(e.state.searchText)}))},e.resetFilters=function(){e.setState((function(t){var n=t.columns.map((function(){return[]}));return{filterList:n,displayData:e.options.serverSide?t.displayData:e.getDisplayData(t.columns,t.data,n,t.searchText)}}),(function(){e.setTableAction("resetFilters"),e.options.onFilterChange&&e.options.onFilterChange(null,e.state.filterList,"reset")}))},e.filterUpdate=function(t,n,r,i,a){e.setState((function(r){var o=r.filterList.slice(0),u=o[t].indexOf(n);switch(i){case"checkbox":case"chip":u>=0?o[t].splice(u,1):o[t].push(n);break;case"multiselect":o[t]=""===n?[]:n;break;case"dropdown":o[t]=n;break;case"custom":a?o=a(o,u,t):o[t]=n;break;default:o[t]=u>=0||""===n?[]:[n]}return{page:0,filterList:o,displayData:e.options.serverSide?r.displayData:e.getDisplayData(r.columns,r.data,o,r.searchText),previousSelectedRow:null}}),(function(){e.setTableAction("filterChange"),e.options.onFilterChange&&e.options.onFilterChange(r,e.state.filterList,i)}))},e.selectRowDelete=function(){var t=e.state,n=t.selectedRows,r=t.data,i=t.filterList,a=pe(n.data),o=r.filter((function(e){var t=e.index;return!a[t]}));e.options.onRowsDelete&&!1===e.options.onRowsDelete(n)||e.setTableData({columns:e.props.columns,data:o,options:{filterList:i}},Ge,(function(){e.setTableAction("rowDelete")}))},e.toggleExpandRow=function(t){for(var n=t.dataIndex,r=e.options.isRowExpandable,i=e.state.expandedRows,a=[].concat(oe(i.data)),o=!1,u=!1,s=[],c=0;c<a.length;c++)if(a[c].dataIndex===n){o=!0;break}o?(r&&r(n,i)||!r)&&(s=a.splice(c,1),u=!0):r&&r(n,i)?a.push(t):r||a.push(t),e.setState({curExpandedRows:u?s:[t],expandedRows:{lookup:pe(a),data:a}},(function(){e.setTableAction("expandRow"),e.options.onRowsExpand&&e.options.onRowsExpand(e.state.curExpandedRows,e.state.expandedRows.data)}))},e.selectRowUpdate=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=e.options.selectableRows;if("none"!==i)if("head"===t){var a=e.options.isRowSelectable;e.setState((function(t){var n=t.displayData,r=t.selectedRows,i=t.selectedRows.data.length,o=i===n.length||i<n.length&&i>0,u=n.reduce((function(e,t,i){return(!a||a(n[i].dataIndex,r))&&e.push({index:i,dataIndex:n[i].dataIndex}),e}),[]),s=[].concat(oe(t.selectedRows),oe(u)),c=pe(s);if(!0===e.options.disableToolbarSelect)if(i>n.length)o=!0;else for(var l=0;l<n.length;l++)c[n[l].dataIndex]||(o=!0);return o&&(s=t.selectedRows.data.filter((function(e){var t=e.dataIndex;return!c[t]})),c=pe(s)),{curSelectedRows:s,selectedRows:{data:s,lookup:c},previousSelectedRow:null}}),(function(){e.setTableAction("rowsSelect"),e.options.onRowsSelect&&e.options.onRowsSelect(e.state.curSelectedRows,e.state.selectedRows.data)}))}else if("cell"===t)e.setState((function(e){for(var t=n.dataIndex,a=[].concat(oe(e.selectedRows.data)),o=-1,u=0;u<a.length;u++)if(a[u].dataIndex===t){o=u;break}if(o>=0){if(a.splice(o,1),r.length>0)for(var s=pe(r),c=a.length-1;c>=0;c--)s[a[c].dataIndex]&&a.splice(c,1)}else if("single"===i)a=[n];else if(a.push(n),r.length>0){var l=pe(a);r.forEach((function(e){l[e.dataIndex]||a.push(e)}))}return{selectedRows:{lookup:pe(a),data:a},previousSelectedRow:n}}),(function(){e.setTableAction("rowsSelect"),e.options.onRowsSelect&&e.options.onRowsSelect([n],e.state.selectedRows.data)}));else if("custom"===t){var o=e.state.displayData,u=n.map((function(e){return{index:e,dataIndex:o[e].dataIndex}})),s=pe(u);e.setState({selectedRows:{data:u,lookup:s},previousSelectedRow:null},(function(){e.setTableAction("rowsSelect"),e.options.onRowsSelect&&e.options.onRowsSelect(e.state.selectedRows.data,e.state.selectedRows.data)}))}},e.tableRef=!1,e.tableContent=p.createRef(),e.headCellRefs={},e.setHeadResizeable=function(){},e.updateDividers=function(){},e}return ne(t,e),Q(t,[{key:"UNSAFE_componentWillMount",value:function(){this.initializeTable(this.props)}},{key:"componentDidMount",value:function(){this.setHeadResizeable(this.headCellRefs,this.tableRef),this.props.options.searchText&&!this.props.options.serverSide&&this.setState({page:0})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.data===e.data&&this.props.columns===e.columns||(this.updateOptions(this.options,this.props),this.setTableData(this.props,qe,(function(){t.setTableAction("propsUpdate")}))),this.props.options.searchText===e.options.searchText||this.props.options.serverSide||this.setState({page:0}),this.options.resizableColumns&&(this.setHeadResizeable(this.headCellRefs,this.tableRef),this.updateDividers())}},{key:"updateOptions",value:function(e,t){this.options=s(e,t.options,(function(e,t,n){if("textLabels"===n||"downloadOptions"===n)return d(e,t)})),this.handleOptionDeprecation()}},{key:"initializeTable",value:function(e){var t=this;this.mergeDefaultOptions(e),this.setTableOptions(),this.setTableData(e,qe,(function(){t.setTableInit("tableInitialized")}))}},{key:"mergeDefaultOptions",value:function(e){var t=this.getDefaultOptions();this.updateOptions(t,this.props)}},{key:"validateOptions",value:function(e){if(e.serverSide&&void 0===e.onTableChange)throw Error("onTableChange callback must be provided when using serverSide option");if(e.expandableRows&&void 0===e.renderExpandableRow)throw Error("renderExpandableRow must be provided when using expandableRows option");this.props.options.filterList}},{key:"setTableOptions",value:function(){var e=this,t=["rowsPerPage","page","rowsSelected","rowsPerPageOptions"].reduce((function(t,n){return void 0!==e.options[n]&&(t[n]=e.options[n]),t}),{});this.validateOptions(t),this.setState(t)}},{key:"setTableData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=[],a=this.buildColumns(e.columns),o=a.columns,u=a.filterData,s=a.filterList,l=null,f="none",d=void 0,h=t===qe?this.transformData(o,e.data):e.data,m=t===qe?this.options.searchText:null;o.forEach((function(e,r){for(var a=0;a<h.length;a++){var o=t===qe?h[a][r]:h[a].data[r];if(void 0===i[a]&&i.push({index:t===qe?a:h[a].index,data:t===qe?h[a]:h[a].data}),"function"==typeof e.customBodyRender){var m=i[a].data;d=n.getTableMeta(a,r,m,e,h,n.state);var v=e.customBodyRender(o,d);p.isValidElement(v)&&v.props.value?o=v.props.value:"string"==typeof v&&(o=v)}u[r].indexOf(o)<0&&!Array.isArray(o)?u[r].push(o):Array.isArray(o)&&o.forEach((function(e){u[r].indexOf(e)<0&&u[r].push(e)}))}if(e.filterOptions&&(Array.isArray(e.filterOptions)?u[r]=c(e.filterOptions):Array.isArray(e.filterOptions.names)&&(u[r]=c(e.filterOptions.names))),e.filterList&&(s[r]=c(e.filterList)),n.options.sortFilterList){var g=ve();u[r].sort(g)}"none"!==e.sortDirection&&(l=r,f=e.sortDirection)}));var v={data:[],lookup:{}},g={data:[],lookup:{}};if(qe){if(this.options.rowsSelected&&this.options.rowsSelected.length&&"multiple"===this.options.selectableRows&&this.options.rowsSelected.forEach((function(e){for(var t=e,r=0;r<n.state.displayData.length;r++)if(n.state.displayData[r].dataIndex===e){t=r;break}v.data.push({index:t,dataIndex:e}),v.lookup[e]=!0})),this.options.rowsSelected&&1===this.options.rowsSelected.length&&"single"===this.options.selectableRows){for(var y=this.options.rowsSelected[0],b=0;b<this.state.displayData.length;b++)if(this.state.displayData[b].dataIndex===this.options.rowsSelected[0]){y=b;break}v.data.push({index:y,dataIndex:this.options.rowsSelected[0]}),v.lookup[this.options.rowsSelected[0]]=!0}else this.options.rowsSelected&&this.options.rowsSelected.length>1&&"single"===this.options.selectableRows&&console.error('Multiple values provided for selectableRows, but selectableRows set to "single". Either supply only a single value or use "multiple".');this.options.rowsExpanded&&this.options.rowsExpanded.length&&this.options.expandableRows&&this.options.rowsExpanded.forEach((function(e){for(var t=e,r=0;r<n.state.displayData.length;r++)if(n.state.displayData[r].dataIndex===e){t=r;break}g.data.push({index:t,dataIndex:e}),g.lookup[e]=!0}))}if(!this.options.serverSide&&null!==l){var x=this.sortTable(i,l,f);i=x.data}this.setState({columns:o,filterData:u,filterList:s,searchText:m,selectedRows:v,expandedRows:g,count:this.options.count,data:i,displayData:this.getDisplayData(o,i,s,m,d),previousSelectedRow:null},r)}},{key:"computeDisplayRow",value:function(e,t,n,r,i,a,o){for(var u=this,s=!1,c=!1,l=[],f=function(f){var d=t[f],p=t[f],h=e[f];if(h.customBodyRender){var m=u.getTableMeta(n,f,t,h,a,te({},u.state,{filterList:r,searchText:i})),v=h.customBodyRender(p,m,u.updateDataCol.bind(null,n,f));d=v,p="string"!=typeof v&&v?v.props&&v.props.value?v.props.value:p:v}l.push(d);var g=null===p||void 0===p?"":p.toString(),y=r[f],b=o.caseSensitive,x=h.filterType||o.filterType;(y.length||"custom"===x)&&(h.filterOptions&&h.filterOptions.logic?h.filterOptions.logic(p,y)&&(s=!0):"textField"!==x||u.hasSearchText(g,y,b)?"textField"!==x&&!1===Array.isArray(p)&&y.indexOf(p)<0?s=!0:"textField"!==x&&Array.isArray(p)&&(y.every((function(e){return p.indexOf(e)>=0}))||(s=!0)):s=!0),i&&u.hasSearchText(g,i,b)&&"false"!==h.display&&h.searchable&&(c=!0)},d=0;d<t.length;d++)f(d);var p=this.props.options.customSearch;if(i&&p){var h=p(i,t,e);"boolean"!=typeof h?console.error("customSearch must return a boolean"):c=h}return o.serverSide?(p&&console.warn("Server-side filtering is enabled, hence custom search will be ignored."),l):s||i&&!c?null:l}},{key:"getDisplayData",value:function(e,t,n,r,i){for(var a=[],o=i?i.tableData:this.props.data,u=0;u<t.length;u++){var s=t[u].data,c=this.computeDisplayRow(e,s,u,n,r,o,this.options);c&&a.push({data:c,dataIndex:t[u].index})}return a}},{key:"getSortDirection",value:function(e){return"asc"===e.sortDirection?"ascending":"descending"}},{key:"getTableProps",value:function(){var e=this.props.classes,t=this.options.setTableProps();return t.className=u(e.tableRoot,t.className),t}},{key:"sortTable",value:function(e,t,n){var r=this,i=this.options.customSort?this.options.customSort(e,t,n||"desc"):e,a=i.map((function(e,n){return{data:e.data[t],rowData:e.data,position:n,rowSelected:!!r.state.selectedRows.lookup[e.index]}}));this.options.customSort||a.sort(function(e){return function(t,n){var r=null===t.data||void 0===t.data?"":t.data,i=null===n.data||void 0===n.data?"":n.data;return("function"==typeof r.localeCompare?r.localeCompare(i):r-i)*("asc"===e?1:-1)}}(n));for(var o=[],u=[],s=0;s<a.length;s++){var c=a[s];o.push(i[c.position]),c.rowSelected&&u.push({index:s,dataIndex:i[c.position].index})}return{data:o,selectedRows:{lookup:pe(u),data:u}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.className,a=t.title,s=this.state,c=s.announceText,d=s.activeColumn,h=s.data,m=s.displayData,v=s.columns,g=s.page,y=s.filterData,b=s.filterList,x=s.selectedRows,w=s.previousSelectedRow,O=s.expandedRows,k=s.searchText,E=(s.serverSideFilterList,this.state.count||m.length),S=this.options.pagination?this.state.rowsPerPage:m.length,C=function(e,t){return e.title=t,!f(l($e,(function(t){return e[t]})))}(this.options,a),_=v.map((function(t){return{name:t.name,filterType:t.filterType||e.options.filterType}})),j=this.options.responsive,A=n.paper+" "+r,T=void 0,N=void 0;switch(j){case"scroll":N=n.responsiveScroll,T="499px";break;case"scrollMaxHeight":N=n.responsiveScrollMaxHeight,T="499px";break;case"scrollFullHeight":N=n.responsiveScrollFullHeight,T="none";break;case"scrollFullHeightFullWidth":N=n.responsiveScrollFullHeight,A=n.paperResponsiveScrollFullHeightFullWidth+" "+r;break;case"stacked":N=n.responsiveStacked,T="none";break;case"stackedFullWidth":N=n.responsiveStackedFullWidth,A=n.paperResponsiveScrollFullHeightFullWidth+" "+r,T="none"}var R=this.options.setTableProps?this.options.setTableProps():{},D=u(n.tableRoot,R.className);return delete R.className,p.createElement(i,{elevation:this.options.elevation,ref:this.tableContent,className:A},x.data.length&&!0!==this.options.disableToolbarSelect?p.createElement(He,{options:this.options,selectedRows:x,onRowsDelete:this.selectRowDelete,displayData:m,selectRowUpdate:this.selectRowUpdate}):C&&p.createElement(Ue,{columns:v,displayData:m,data:h,filterData:y,filterList:b,filterUpdate:this.filterUpdate,options:this.options,resetFilters:this.resetFilters,searchText:k,searchTextUpdate:this.searchTextUpdate,searchClose:this.searchClose,tableRef:this.getTableContentRef,title:a,toggleViewColumn:this.toggleViewColumn,setTableAction:this.setTableAction}),p.createElement(Oe,{options:this.options,serverSideFilterList:this.props.options.serverSideFilterList||[],filterListRenderers:v.map((function(e){return e.customFilterListOptions&&e.customFilterListOptions.render?e.customFilterListOptions.render:e.customFilterListRender?e.customFilterListRender:function(e){return e}})),customFilterListUpdate:v.map((function(e){return e.customFilterListOptions&&e.customFilterListOptions.update?e.customFilterListOptions.update:null})),filterList:b,filterUpdate:this.filterUpdate,columnNames:_}),p.createElement("div",{style:{position:"relative",maxHeight:T},className:N},this.options.resizableColumns&&p.createElement(De,{key:E,updateDividers:function(t){return e.updateDividers=t},setResizeable:function(t){return e.setHeadResizeable=t}}),p.createElement(o,te({ref:function(t){return e.tableRef=t},tabIndex:"0",role:"grid",className:D},R),p.createElement("caption",{className:n.caption},a),p.createElement(je,{columns:v,activeColumn:d,data:m,count:E,page:g,rowsPerPage:S,handleHeadUpdateRef:function(t){return e.updateToolbarSelect=t},selectedRows:x,selectRowUpdate:this.selectRowUpdate,toggleSort:this.toggleSortColumn,setCellRef:this.setHeadCellRef,options:this.options}),p.createElement(xe,{data:m,count:E,columns:v,page:g,rowsPerPage:S,selectedRows:x,selectRowUpdate:this.selectRowUpdate,previousSelectedRow:w,expandedRows:O,toggleExpandRow:this.toggleExpandRow,options:this.options,filterList:b}))),p.createElement(Ne,{options:this.options,page:g,rowCount:E,rowsPerPage:S,changeRowsPerPage:this.changeRowsPerPage,changePage:this.changePage}),p.createElement("div",{className:n.liveAnnounce,"aria-live":"polite"},c))}}]),t}(p.Component);Ke.defaultProps={title:"",options:{},data:[],columns:[]};var Xe=a.withStyles((function(e){return{root:{},paper:{},paperResponsiveScrollFullHeightFullWidth:{position:"absolute"},tableRoot:{outline:"none"},responsiveScroll:{overflowX:"auto",overflow:"auto",height:"100%"},responsiveScrollMaxHeight:{overflowX:"auto",overflow:"auto",height:"100%"},responsiveScrollFullHeight:{height:"100%"},responsiveStacked:ee({overflowX:"auto",overflow:"auto"},e.breakpoints.down("sm"),{overflowX:"hidden",overflow:"hidden"}),responsiveStackedFullWidth:{},caption:{position:"absolute",left:"-3000px"},liveAnnounce:{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"},"@global":{"@media print":{".datatables-noprint":{display:"none"}}}}}),{name:"MUIDataTable"})(Ke);t.default=Xe,t.Popover=Ie,t.TableBodyCell=se,t.TableBody=xe,t.TableBodyRow=le,t.TableFilter=Fe,t.TableFilterList=Oe,t.TableFooter=Ne,t.TableHeadCell=Ee,t.TableHead=je,t.TableHeadRow=Ce,t.TablePagination=Te,t.TableResize=De,t.TableSearch=Be,t.TableSelectCell=de,t.TableToolbar=Ue,t.TableToolbarSelect=He,t.TableViewCol=ze},function(e,t,n){"use strict";(function(e){var n="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,r=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(n&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var i=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),r))}};function a(e){return e&&"[object Function]"==={}.toString.call(e)}function o(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function u(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function s(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=o(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:s(u(e))}function c(e){return e&&e.referenceNode?e.referenceNode:e}var l=n&&!(!window.MSInputMethodContext||!document.documentMode),f=n&&/MSIE 10/.test(navigator.userAgent);function d(e){return 11===e?l:10===e?f:l||f}function p(e){if(!e)return document.documentElement;for(var t=d(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===o(n,"position")?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function h(e){return null!==e.parentNode?h(e.parentNode):e}function m(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var o=a.commonAncestorContainer;if(e!==o&&t!==o||r.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||p(e.firstElementChild)===e)}(o)?o:p(o);var u=h(e);return u.host?m(u.host,t):m(e,h(t).host)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",r=e.nodeName;if("BODY"===r||"HTML"===r){var i=e.ownerDocument.documentElement,a=e.ownerDocument.scrollingElement||i;return a[n]}return e[n]}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v(t,"top"),i=v(t,"left"),a=n?-1:1;return e.top+=r*a,e.bottom+=r*a,e.left+=i*a,e.right+=i*a,e}function y(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+r+"Width"])}function b(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],d(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function x(e){var t=e.body,n=e.documentElement,r=d(10)&&getComputedStyle(n);return{height:b("Height",t,n,r),width:b("Width",t,n,r)}}var w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function S(e){return E({},e,{right:e.left+e.width,bottom:e.top+e.height})}function C(e){var t={};try{if(d(10)){t=e.getBoundingClientRect();var n=v(e,"top"),r=v(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(p){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?x(e.ownerDocument):{},u=a.width||e.clientWidth||i.width,s=a.height||e.clientHeight||i.height,c=e.offsetWidth-u,l=e.offsetHeight-s;if(c||l){var f=o(e);c-=y(f,"x"),l-=y(f,"y"),i.width-=c,i.height-=l}return S(i)}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=d(10),i="HTML"===t.nodeName,a=C(e),u=C(t),c=s(e),l=o(t),f=parseFloat(l.borderTopWidth),p=parseFloat(l.borderLeftWidth);n&&i&&(u.top=Math.max(u.top,0),u.left=Math.max(u.left,0));var h=S({top:a.top-u.top-f,left:a.left-u.left-p,width:a.width,height:a.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){var m=parseFloat(l.marginTop),v=parseFloat(l.marginLeft);h.top-=f-m,h.bottom-=f-m,h.left-=p-v,h.right-=p-v,h.marginTop=m,h.marginLeft=v}return(r&&!n?t.contains(c):t===c&&"BODY"!==c.nodeName)&&(h=g(h,t)),h}function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=_(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:v(n),u=t?0:v(n,"left"),s={top:o-r.top+r.marginTop,left:u-r.left+r.marginLeft,width:i,height:a};return S(s)}function A(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===o(e,"position"))return!0;var n=u(e);return!!n&&A(n)}function T(e){if(!e||!e.parentElement||d())return document.documentElement;for(var t=e.parentElement;t&&"none"===o(t,"transform");)t=t.parentElement;return t||document.documentElement}function N(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},o=i?T(e):m(e,c(t));if("viewport"===r)a=j(o,i);else{var l=void 0;"scrollParent"===r?"BODY"===(l=s(u(t))).nodeName&&(l=e.ownerDocument.documentElement):l="window"===r?e.ownerDocument.documentElement:r;var f=_(l,o,i);if("HTML"!==l.nodeName||A(o))a=f;else{var d=x(e.ownerDocument),p=d.height,h=d.width;a.top+=f.top-f.marginTop,a.bottom=p+f.top,a.left+=f.left-f.marginLeft,a.right=h+f.left}}var v="number"===typeof(n=n||0);return a.left+=v?n:n.left||0,a.top+=v?n:n.top||0,a.right-=v?n:n.right||0,a.bottom-=v?n:n.bottom||0,a}function R(e){return e.width*e.height}function D(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=N(n,r,a,i),u={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},s=Object.keys(u).map((function(e){return E({key:e},u[e],{area:R(u[e])})})).sort((function(e,t){return t.area-e.area})),c=s.filter((function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight})),l=c.length>0?c[0].key:s[0].key,f=e.split("-")[1];return l+(f?"-"+f:"")}function I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?T(t):m(t,c(n));return _(n,i,r)}function M(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function F(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function P(e,t,n){n=n.split("-")[0];var r=M(e),i={width:r.width,height:r.height},a=-1!==["right","left"].indexOf(n),o=a?"top":"left",u=a?"left":"top",s=a?"height":"width",c=a?"width":"height";return i[o]=t[o]+t[s]/2-r[s]/2,i[u]=n===u?t[u]-r[c]:t[F(u)],i}function z(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function L(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var r=z(e,(function(e){return e[t]===n}));return e.indexOf(r)}(e,"name",n))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&a(n)&&(t.offsets.popper=S(t.offsets.popper),t.offsets.reference=S(t.offsets.reference),t=n(t,e))})),t}function B(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=I(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=D(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=P(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=L(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function U(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],a=i?""+i+n:e;if("undefined"!==typeof document.body.style[a])return a}return null}function V(){return this.state.isDestroyed=!0,W(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[U("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function H(e){var t=e.ownerDocument;return t?t.defaultView:window}function q(e,t,n,r){n.updateBound=r,H(e).addEventListener("resize",n.updateBound,{passive:!0});var i=s(e);return function e(t,n,r,i){var a="BODY"===t.nodeName,o=a?t.ownerDocument.defaultView:t;o.addEventListener(n,r,{passive:!0}),a||e(s(o.parentNode),n,r,i),i.push(o)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function G(){this.state.eventsEnabled||(this.state=q(this.reference,this.options,this.state,this.scheduleUpdate))}function $(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,H(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function K(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function X(e,t){Object.keys(t).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&K(t[n])&&(r="px"),e.style[n]=t[n]+r}))}var Y=n&&/Firefox/i.test(navigator.userAgent);function J(e,t,n){var r=z(e,(function(e){return e.name===t})),i=!!r&&e.some((function(e){return e.name===n&&e.enabled&&e.order<r.order}));if(!i){var a="`"+t+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return i}var Z=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Q=Z.slice(3);function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Q.indexOf(e),r=Q.slice(n+1).concat(Q.slice(0,n));return t?r.reverse():r}var te="flip",ne="clockwise",re="counterclockwise";function ie(e,t,n,r){var i=[0,0],a=-1!==["right","left"].indexOf(r),o=e.split(/(\+|\-)/).map((function(e){return e.trim()})),u=o.indexOf(z(o,(function(e){return-1!==e.search(/,|\s/)})));o[u]&&-1===o[u].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var s=/\s*,\s*|\s+/,c=-1!==u?[o.slice(0,u).concat([o[u].split(s)[0]]),[o[u].split(s)[1]].concat(o.slice(u+1))]:[o];return(c=c.map((function(e,r){var i=(1===r?!a:a)?"height":"width",o=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+i[1],o=i[2];if(!a)return e;if(0===o.indexOf("%")){var u=void 0;switch(o){case"%p":u=n;break;case"%":case"%r":default:u=r}return S(u)[t]/100*a}if("vh"===o||"vw"===o){return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*a}return a}(e,i,t,n)}))}))).forEach((function(e,t){e.forEach((function(n,r){K(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))}))})),i}var ae={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,a=i.reference,o=i.popper,u=-1!==["bottom","top"].indexOf(n),s=u?"left":"top",c=u?"width":"height",l={start:k({},s,a[s]),end:k({},s,a[s]+a[c]-o[c])};e.offsets.popper=E({},o,l[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,i=e.offsets,a=i.popper,o=i.reference,u=r.split("-")[0],s=void 0;return s=K(+n)?[+n,0]:ie(n,a,o,u),"left"===u?(a.top+=s[0],a.left-=s[1]):"right"===u?(a.top+=s[0],a.left+=s[1]):"top"===u?(a.left+=s[0],a.top-=s[1]):"bottom"===u&&(a.left+=s[0],a.top+=s[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||p(e.instance.popper);e.instance.reference===n&&(n=p(n));var r=U("transform"),i=e.instance.popper.style,a=i.top,o=i.left,u=i[r];i.top="",i.left="",i[r]="";var s=N(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=a,i.left=o,i[r]=u,t.boundaries=s;var c=t.priority,l=e.offsets.popper,f={primary:function(e){var n=l[e];return l[e]<s[e]&&!t.escapeWithReference&&(n=Math.max(l[e],s[e])),k({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=l[n];return l[e]>s[e]&&!t.escapeWithReference&&(r=Math.min(l[n],s[e]-("right"===e?l.width:l.height))),k({},n,r)}};return c.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";l=E({},l,f[t](e))})),e.offsets.popper=l,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],a=Math.floor,o=-1!==["top","bottom"].indexOf(i),u=o?"right":"bottom",s=o?"left":"top",c=o?"width":"height";return n[u]<a(r[s])&&(e.offsets.popper[s]=a(r[s])-n[c]),n[s]>a(r[u])&&(e.offsets.popper[s]=a(r[u])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!J(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"===typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],a=e.offsets,u=a.popper,s=a.reference,c=-1!==["left","right"].indexOf(i),l=c?"height":"width",f=c?"Top":"Left",d=f.toLowerCase(),p=c?"left":"top",h=c?"bottom":"right",m=M(r)[l];s[h]-m<u[d]&&(e.offsets.popper[d]-=u[d]-(s[h]-m)),s[d]+m>u[h]&&(e.offsets.popper[d]+=s[d]+m-u[h]),e.offsets.popper=S(e.offsets.popper);var v=s[d]+s[l]/2-m/2,g=o(e.instance.popper),y=parseFloat(g["margin"+f]),b=parseFloat(g["border"+f+"Width"]),x=v-e.offsets.popper[d]-y-b;return x=Math.max(Math.min(u[l]-m,x),0),e.arrowElement=r,e.offsets.arrow=(k(n={},d,Math.round(x)),k(n,p,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=N(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=F(r),a=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case te:o=[r,i];break;case ne:o=ee(r);break;case re:o=ee(r,!0);break;default:o=t.behavior}return o.forEach((function(u,s){if(r!==u||o.length===s+1)return e;r=e.placement.split("-")[0],i=F(r);var c=e.offsets.popper,l=e.offsets.reference,f=Math.floor,d="left"===r&&f(c.right)>f(l.left)||"right"===r&&f(c.left)<f(l.right)||"top"===r&&f(c.bottom)>f(l.top)||"bottom"===r&&f(c.top)<f(l.bottom),p=f(c.left)<f(n.left),h=f(c.right)>f(n.right),m=f(c.top)<f(n.top),v=f(c.bottom)>f(n.bottom),g="left"===r&&p||"right"===r&&h||"top"===r&&m||"bottom"===r&&v,y=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(y&&"start"===a&&p||y&&"end"===a&&h||!y&&"start"===a&&m||!y&&"end"===a&&v),x=!!t.flipVariationsByContent&&(y&&"start"===a&&h||y&&"end"===a&&p||!y&&"start"===a&&v||!y&&"end"===a&&m),w=b||x;(d||g||w)&&(e.flipped=!0,(d||g)&&(r=o[s+1]),w&&(a=function(e){return"end"===e?"start":"start"===e?"end":e}(a)),e.placement=r+(a?"-"+a:""),e.offsets.popper=E({},e.offsets.popper,P(e.instance.popper,e.offsets.reference,e.placement)),e=L(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,a=r.reference,o=-1!==["left","right"].indexOf(n),u=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=a[n]-(u?i[o?"width":"height"]:0),e.placement=F(t),e.offsets.popper=S(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!J(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=z(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,a=z(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==a?a:t.gpuAcceleration,u=p(e.instance.popper),s=C(u),c={position:i.position},l=function(e,t){var n=e.offsets,r=n.popper,i=n.reference,a=Math.round,o=Math.floor,u=function(e){return e},s=a(i.width),c=a(r.width),l=-1!==["left","right"].indexOf(e.placement),f=-1!==e.placement.indexOf("-"),d=t?l||f||s%2===c%2?a:o:u,p=t?a:u;return{left:d(s%2===1&&c%2===1&&!f&&t?r.left-1:r.left),top:p(r.top),bottom:p(r.bottom),right:d(r.right)}}(e,window.devicePixelRatio<2||!Y),f="bottom"===n?"top":"bottom",d="right"===r?"left":"right",h=U("transform"),m=void 0,v=void 0;if(v="bottom"===f?"HTML"===u.nodeName?-u.clientHeight+l.bottom:-s.height+l.bottom:l.top,m="right"===d?"HTML"===u.nodeName?-u.clientWidth+l.right:-s.width+l.right:l.left,o&&h)c[h]="translate3d("+m+"px, "+v+"px, 0)",c[f]=0,c[d]=0,c.willChange="transform";else{var g="bottom"===f?-1:1,y="right"===d?-1:1;c[f]=v*g,c[d]=m*y,c.willChange=f+", "+d}var b={"x-placement":e.placement};return e.attributes=E({},b,e.attributes),e.styles=E({},c,e.styles),e.arrowStyles=E({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return X(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&X(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var a=I(i,t,e,n.positionFixed),o=D(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),X(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},oe=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=i(this.update.bind(this)),this.options=E({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(E({},e.Defaults.modifiers,o.modifiers)).forEach((function(t){r.options.modifiers[t]=E({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return E({name:e},r.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&a(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)})),this.update();var u=this.options.eventsEnabled;u&&this.enableEventListeners(),this.state.eventsEnabled=u}return O(e,[{key:"update",value:function(){return B.call(this)}},{key:"destroy",value:function(){return V.call(this)}},{key:"enableEventListeners",value:function(){return G.call(this)}},{key:"disableEventListeners",value:function(){return $.call(this)}}]),e}();oe.Utils=("undefined"!==typeof window?window:e).PopperUtils,oe.placements=Z,oe.Defaults=ae,t.a=oe}).call(this,n(53))},function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var r=n(3),i=n(5),a=n(0),o=(n(8),n(179)),u=n(7),s=n(49),c=n(38),l=n(178),f=n(177),d=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7}}},p=a.createElement(f.a,null),h=a.forwardRef((function(e,t){var n=e.children,u=e.classes,f=e.IconComponent,d=void 0===f?l.a:f,h=e.input,m=void 0===h?p:h,v=e.inputProps,g=(e.variant,Object(i.a)(e,["children","classes","IconComponent","input","inputProps","variant"])),y=Object(c.a)(),b=Object(s.a)({props:e,muiFormControl:y,states:["variant"]});return a.cloneElement(m,Object(r.a)({inputComponent:o.a,inputProps:Object(r.a)({children:n,classes:u,IconComponent:d,variant:b.variant,type:void 0},v,{},m?m.props.inputProps:{}),ref:t},g))}));h.muiName="Select",t.a=Object(u.a)(d,{name:"MuiNativeSelect"})(h)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(46),n(8),n(4)),u=n(7),s=n(217),c=n(451),l=n(20),f=n(30),d=n(19),p={vertical:"top",horizontal:"right"},h={vertical:"top",horizontal:"left"},m=a.forwardRef((function(e,t){var n=e.autoFocus,u=void 0===n||n,m=e.children,v=e.classes,g=e.disableAutoFocusItem,y=void 0!==g&&g,b=e.MenuListProps,x=void 0===b?{}:b,w=e.onClose,O=e.onEntering,k=e.open,E=e.PaperProps,S=void 0===E?{}:E,C=e.PopoverClasses,_=e.transitionDuration,j=void 0===_?"auto":_,A=e.variant,T=void 0===A?"selectedMenu":A,N=Object(i.a)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","variant"]),R=Object(d.a)(),D=u&&!y&&k,I=a.useRef(null),M=a.useRef(null),F=-1;a.Children.map(m,(function(e,t){a.isValidElement(e)&&(e.props.disabled||("menu"!==T&&e.props.selected||-1===F)&&(F=t))}));var P=a.Children.map(m,(function(e,t){return t===F?a.cloneElement(e,{ref:function(t){M.current=l.findDOMNode(t),Object(f.a)(e.ref,t)}}):e}));return a.createElement(s.a,Object(r.a)({getContentAnchorEl:function(){return M.current},classes:C,onClose:w,onEntering:function(e,t){I.current&&I.current.adjustStyleForScrollbar(e,R),O&&O(e,t)},anchorOrigin:"rtl"===R.direction?p:h,transformOrigin:"rtl"===R.direction?p:h,PaperProps:Object(r.a)({},S,{classes:Object(r.a)({},S.classes,{root:v.paper})}),open:k,ref:t,transitionDuration:j},N),a.createElement(c.a,Object(r.a)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),w&&w(e,"tabKeyDown"))},actions:I,autoFocus:u&&(-1===F||y),autoFocusItem:D,variant:T},x,{className:Object(o.a)(v.list,x.className)}),P))}));t.a=Object(u.a)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(m)},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){"use strict";(function(e){var r=n(29),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i?r.a.Buffer:void 0,u=o?o.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(215)(e))},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"}),"Functions");t.default=a},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");t.default=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return Jn}));var r=n(0),i=n(66),a=n.n(i),o=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===u}(e)}(e)};var u="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function c(e,t,n){return e.concat(t).map((function(e){return s(e,n)}))}function l(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||c,n.isMergeableObject=n.isMergeableObject||o;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=s(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=l(e[i],t[i],n):r[i]=s(t[i],n)})),r}(e,t,n):s(t,n)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,t)}),{})};var f=l,d=n(29),p=d.a.Symbol,h=Object.prototype,m=h.hasOwnProperty,v=h.toString,g=p?p.toStringTag:void 0;var y=function(e){var t=m.call(e,g),n=e[g];try{e[g]=void 0;var r=!0}catch(a){}var i=v.call(e);return r&&(t?e[g]=n:delete e[g]),i},b=Object.prototype.toString;var x=function(e){return b.call(e)},w=p?p.toStringTag:void 0;var O=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":w&&w in Object(e)?y(e):x(e)};var k=function(e,t){return function(n){return e(t(n))}},E=k(Object.getPrototypeOf,Object);var S=function(e){return null!=e&&"object"==typeof e},C=Function.prototype,_=Object.prototype,j=C.toString,A=_.hasOwnProperty,T=j.call(Object);var N=function(e){if(!S(e)||"[object Object]"!=O(e))return!1;var t=E(e);if(null===t)return!0;var n=A.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&j.call(n)==T};var R=function(){this.__data__=[],this.size=0};var D=function(e,t){return e===t||e!==e&&t!==t};var I=function(e,t){for(var n=e.length;n--;)if(D(e[n][0],t))return n;return-1},M=Array.prototype.splice;var F=function(e){var t=this.__data__,n=I(t,e);return!(n<0)&&(n==t.length-1?t.pop():M.call(t,n,1),--this.size,!0)};var P=function(e){var t=this.__data__,n=I(t,e);return n<0?void 0:t[n][1]};var z=function(e){return I(this.__data__,e)>-1};var L=function(e,t){var n=this.__data__,r=I(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function B(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}B.prototype.clear=R,B.prototype.delete=F,B.prototype.get=P,B.prototype.has=z,B.prototype.set=L;var W=B;var U=function(){this.__data__=new W,this.size=0};var V=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var H=function(e){return this.__data__.get(e)};var q=function(e){return this.__data__.has(e)};var G=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var $=function(e){if(!G(e))return!1;var t=O(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},K=d.a["__core-js_shared__"],X=function(){var e=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var Y=function(e){return!!X&&X in e},J=Function.prototype.toString;var Z=function(e){if(null!=e){try{return J.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Q=/^\[object .+?Constructor\]$/,ee=Function.prototype,te=Object.prototype,ne=ee.toString,re=te.hasOwnProperty,ie=RegExp("^"+ne.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ae=function(e){return!(!G(e)||Y(e))&&($(e)?ie:Q).test(Z(e))};var oe=function(e,t){return null==e?void 0:e[t]};var ue=function(e,t){var n=oe(e,t);return ae(n)?n:void 0},se=ue(d.a,"Map"),ce=ue(Object,"create");var le=function(){this.__data__=ce?ce(null):{},this.size=0};var fe=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},de=Object.prototype.hasOwnProperty;var pe=function(e){var t=this.__data__;if(ce){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return de.call(t,e)?t[e]:void 0},he=Object.prototype.hasOwnProperty;var me=function(e){var t=this.__data__;return ce?void 0!==t[e]:he.call(t,e)};var ve=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ce&&void 0===t?"__lodash_hash_undefined__":t,this};function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ge.prototype.clear=le,ge.prototype.delete=fe,ge.prototype.get=pe,ge.prototype.has=me,ge.prototype.set=ve;var ye=ge;var be=function(){this.size=0,this.__data__={hash:new ye,map:new(se||W),string:new ye}};var xe=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var we=function(e,t){var n=e.__data__;return xe(t)?n["string"==typeof t?"string":"hash"]:n.map};var Oe=function(e){var t=we(this,e).delete(e);return this.size-=t?1:0,t};var ke=function(e){return we(this,e).get(e)};var Ee=function(e){return we(this,e).has(e)};var Se=function(e,t){var n=we(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ce.prototype.clear=be,Ce.prototype.delete=Oe,Ce.prototype.get=ke,Ce.prototype.has=Ee,Ce.prototype.set=Se;var _e=Ce;var je=function(e,t){var n=this.__data__;if(n instanceof W){var r=n.__data__;if(!se||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new _e(r)}return n.set(e,t),this.size=n.size,this};function Ae(e){var t=this.__data__=new W(e);this.size=t.size}Ae.prototype.clear=U,Ae.prototype.delete=V,Ae.prototype.get=H,Ae.prototype.has=q,Ae.prototype.set=je;var Te=Ae;var Ne=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Re=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var De=function(e,t,n){"__proto__"==t&&Re?Re(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ie=Object.prototype.hasOwnProperty;var Me=function(e,t,n){var r=e[t];Ie.call(e,t)&&D(r,n)&&(void 0!==n||t in e)||De(e,t,n)};var Fe=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var u=t[a],s=r?r(n[u],e[u],u,n,e):void 0;void 0===s&&(s=e[u]),i?De(n,u,s):Me(n,u,s)}return n};var Pe=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var ze=function(e){return S(e)&&"[object Arguments]"==O(e)},Le=Object.prototype,Be=Le.hasOwnProperty,We=Le.propertyIsEnumerable,Ue=ze(function(){return arguments}())?ze:function(e){return S(e)&&Be.call(e,"callee")&&!We.call(e,"callee")},Ve=Array.isArray,He=n(181),qe=/^(?:0|[1-9]\d*)$/;var Ge=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&qe.test(e))&&e>-1&&e%1==0&&e<t};var $e=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ke={};Ke["[object Float32Array]"]=Ke["[object Float64Array]"]=Ke["[object Int8Array]"]=Ke["[object Int16Array]"]=Ke["[object Int32Array]"]=Ke["[object Uint8Array]"]=Ke["[object Uint8ClampedArray]"]=Ke["[object Uint16Array]"]=Ke["[object Uint32Array]"]=!0,Ke["[object Arguments]"]=Ke["[object Array]"]=Ke["[object ArrayBuffer]"]=Ke["[object Boolean]"]=Ke["[object DataView]"]=Ke["[object Date]"]=Ke["[object Error]"]=Ke["[object Function]"]=Ke["[object Map]"]=Ke["[object Number]"]=Ke["[object Object]"]=Ke["[object RegExp]"]=Ke["[object Set]"]=Ke["[object String]"]=Ke["[object WeakMap]"]=!1;var Xe=function(e){return S(e)&&$e(e.length)&&!!Ke[O(e)]};var Ye=function(e){return function(t){return e(t)}},Je=n(65),Ze=Je.a&&Je.a.isTypedArray,Qe=Ze?Ye(Ze):Xe,et=Object.prototype.hasOwnProperty;var tt=function(e,t){var n=Ve(e),r=!n&&Ue(e),i=!n&&!r&&Object(He.a)(e),a=!n&&!r&&!i&&Qe(e),o=n||r||i||a,u=o?Pe(e.length,String):[],s=u.length;for(var c in e)!t&&!et.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ge(c,s))||u.push(c);return u},nt=Object.prototype;var rt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||nt)},it=k(Object.keys,Object),at=Object.prototype.hasOwnProperty;var ot=function(e){if(!rt(e))return it(e);var t=[];for(var n in Object(e))at.call(e,n)&&"constructor"!=n&&t.push(n);return t};var ut=function(e){return null!=e&&$e(e.length)&&!$(e)};var st=function(e){return ut(e)?tt(e):ot(e)};var ct=function(e,t){return e&&Fe(t,st(t),e)};var lt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},ft=Object.prototype.hasOwnProperty;var dt=function(e){if(!G(e))return lt(e);var t=rt(e),n=[];for(var r in e)("constructor"!=r||!t&&ft.call(e,r))&&n.push(r);return n};var pt=function(e){return ut(e)?tt(e,!0):dt(e)};var ht=function(e,t){return e&&Fe(t,pt(t),e)},mt=n(327);var vt=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var gt=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var yt=function(){return[]},bt=Object.prototype.propertyIsEnumerable,xt=Object.getOwnPropertySymbols,wt=xt?function(e){return null==e?[]:(e=Object(e),gt(xt(e),(function(t){return bt.call(e,t)})))}:yt;var Ot=function(e,t){return Fe(e,wt(e),t)};var kt=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Et=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)kt(t,wt(e)),e=E(e);return t}:yt;var St=function(e,t){return Fe(e,Et(e),t)};var Ct=function(e,t,n){var r=t(e);return Ve(e)?r:kt(r,n(e))};var _t=function(e){return Ct(e,st,wt)};var jt=function(e){return Ct(e,pt,Et)},At=ue(d.a,"DataView"),Tt=ue(d.a,"Promise"),Nt=ue(d.a,"Set"),Rt=ue(d.a,"WeakMap"),Dt=Z(At),It=Z(se),Mt=Z(Tt),Ft=Z(Nt),Pt=Z(Rt),zt=O;(At&&"[object DataView]"!=zt(new At(new ArrayBuffer(1)))||se&&"[object Map]"!=zt(new se)||Tt&&"[object Promise]"!=zt(Tt.resolve())||Nt&&"[object Set]"!=zt(new Nt)||Rt&&"[object WeakMap]"!=zt(new Rt))&&(zt=function(e){var t=O(e),n="[object Object]"==t?e.constructor:void 0,r=n?Z(n):"";if(r)switch(r){case Dt:return"[object DataView]";case It:return"[object Map]";case Mt:return"[object Promise]";case Ft:return"[object Set]";case Pt:return"[object WeakMap]"}return t});var Lt=zt,Bt=Object.prototype.hasOwnProperty;var Wt=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Bt.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Ut=d.a.Uint8Array;var Vt=function(e){var t=new e.constructor(e.byteLength);return new Ut(t).set(new Ut(e)),t};var Ht=function(e,t){var n=t?Vt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},qt=/\w*$/;var Gt=function(e){var t=new e.constructor(e.source,qt.exec(e));return t.lastIndex=e.lastIndex,t},$t=p?p.prototype:void 0,Kt=$t?$t.valueOf:void 0;var Xt=function(e){return Kt?Object(Kt.call(e)):{}};var Yt=function(e,t){var n=t?Vt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Jt=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Vt(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Ht(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Yt(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Gt(e);case"[object Set]":return new r;case"[object Symbol]":return Xt(e)}},Zt=Object.create,Qt=function(){function e(){}return function(t){if(!G(t))return{};if(Zt)return Zt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var en=function(e){return"function"!=typeof e.constructor||rt(e)?{}:Qt(E(e))};var tn=function(e){return S(e)&&"[object Map]"==Lt(e)},nn=Je.a&&Je.a.isMap,rn=nn?Ye(nn):tn;var an=function(e){return S(e)&&"[object Set]"==Lt(e)},on=Je.a&&Je.a.isSet,un=on?Ye(on):an,sn={};sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object DataView]"]=sn["[object Boolean]"]=sn["[object Date]"]=sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object Symbol]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Error]"]=sn["[object Function]"]=sn["[object WeakMap]"]=!1;var cn=function e(t,n,r,i,a,o){var u,s=1&n,c=2&n,l=4&n;if(r&&(u=a?r(t,i,a,o):r(t)),void 0!==u)return u;if(!G(t))return t;var f=Ve(t);if(f){if(u=Wt(t),!s)return vt(t,u)}else{var d=Lt(t),p="[object Function]"==d||"[object GeneratorFunction]"==d;if(Object(He.a)(t))return Object(mt.a)(t,s);if("[object Object]"==d||"[object Arguments]"==d||p&&!a){if(u=c||p?{}:en(t),!s)return c?St(t,ht(u,t)):Ot(t,ct(u,t))}else{if(!sn[d])return a?t:{};u=Jt(t,d,s)}}o||(o=new Te);var h=o.get(t);if(h)return h;o.set(t,u),un(t)?t.forEach((function(i){u.add(e(i,n,r,i,t,o))})):rn(t)&&t.forEach((function(i,a){u.set(a,e(i,n,r,a,t,o))}));var m=l?c?jt:_t:c?keysIn:st,v=f?void 0:m(t);return Ne(v||t,(function(i,a){v&&(i=t[a=i]),Me(u,a,e(i,n,r,a,t,o))})),u};var ln=function(e){return cn(e,4)};var fn=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var dn=function(e){return"symbol"==typeof e||S(e)&&"[object Symbol]"==O(e)};function pn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(pn.Cache||_e),n}pn.Cache=_e;var hn=pn;var mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vn=/\\(\\)?/g,gn=function(e){var t=hn(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mn,(function(e,n,r,i){t.push(r?i.replace(vn,"$1"):n||e)})),t}));var yn=function(e){if("string"==typeof e||dn(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},bn=p?p.prototype:void 0,xn=bn?bn.toString:void 0;var wn=function e(t){if("string"==typeof t)return t;if(Ve(t))return fn(t,e)+"";if(dn(t))return xn?xn.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};var On=function(e){return null==e?"":wn(e)};var kn=function(e){return Ve(e)?fn(e,yn):dn(e)?[e]:vt(gn(On(e)))},En=n(31),Sn=n(226),Cn=n(43),_n=n.n(Cn);var jn=function(e){return cn(e,5)};function An(){return(An=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Nn(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Dn=function(e){return Array.isArray(e)&&0===e.length},In=function(e){return"function"===typeof e},Mn=function(e){return null!==e&&"object"===typeof e},Fn=function(e){return String(Math.floor(Number(e)))===e},Pn=function(e){return"[object String]"===Object.prototype.toString.call(e)},zn=function(e){return 0===r.Children.count(e)},Ln=function(e){return Mn(e)&&In(e.then)};function Bn(e,t,n,r){void 0===r&&(r=0);for(var i=kn(t);e&&r<i.length;)e=e[i[r++]];return void 0===e?n:e}function Wn(e,t,n){for(var r=ln(e),i=r,a=0,o=kn(t);a<o.length-1;a++){var u=o[a],s=Bn(e,o.slice(0,a+1));if(s&&(Mn(s)||Array.isArray(s)))i=i[u]=ln(s);else{var c=o[a+1];i=i[u]=Fn(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function Un(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],u=e[o];Mn(u)?n.get(u)||(n.set(u,!0),r[o]=Array.isArray(u)?[]:{},Un(u,t,n,r[o])):r[o]=t}return r}var Vn=Object(r.createContext)(void 0),Hn=Vn.Provider,qn=Vn.Consumer;function Gn(){var e=Object(r.useContext)(Vn);return e||Object(En.a)(!1),e}function $n(e,t){switch(t.type){case"SET_VALUES":return An({},e,{values:t.payload});case"SET_TOUCHED":return An({},e,{touched:t.payload});case"SET_ERRORS":return a()(e.errors,t.payload)?e:An({},e,{errors:t.payload});case"SET_STATUS":return An({},e,{status:t.payload});case"SET_ISSUBMITTING":return An({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return An({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return An({},e,{values:Wn(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return An({},e,{touched:Wn(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return An({},e,{errors:Wn(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return An({},e,{},t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return An({},e,{touched:Un(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return An({},e,{isSubmitting:!1});default:return e}}var Kn={},Xn={};function Yn(e){var t=e.validateOnChange,n=void 0===t||t,i=e.validateOnBlur,o=void 0===i||i,u=e.validateOnMount,s=void 0!==u&&u,c=e.isInitialValid,l=e.enableReinitialize,d=void 0!==l&&l,p=e.onSubmit,h=Nn(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),m=An({validateOnChange:n,validateOnBlur:o,validateOnMount:s,onSubmit:p},h),v=Object(r.useRef)(m.initialValues),g=Object(r.useRef)(m.initialErrors||Kn),y=Object(r.useRef)(m.initialTouched||Xn),b=Object(r.useRef)(m.initialStatus),x=Object(r.useRef)(!1),w=Object(r.useRef)({});Object(r.useEffect)((function(){0}),[]),Object(r.useEffect)((function(){return x.current=!0,function(){x.current=!1}}),[]);var O=Object(r.useReducer)($n,{values:m.initialValues,errors:m.initialErrors||Kn,touched:m.initialTouched||Xn,status:m.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),k=O[0],E=O[1],S=Object(r.useCallback)((function(e,t){return new Promise((function(n,r){var i=m.validate(e,t);null==i?n(Kn):Ln(i)?i.then((function(e){n(e||Kn)}),(function(e){r(e)})):n(i)}))}),[m.validate]),C=Object(r.useCallback)((function(e,t){var n=m.validationSchema,r=In(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);void 0===r&&(r={});var i=function e(t){var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=String(r);!0===Array.isArray(t[i])?n[i]=t[i].map((function(t){return!0===Array.isArray(t)||N(t)?e(t):""!==t?t:void 0})):N(t[i])?n[i]=e(t[i]):n[i]=""!==t[i]?t[i]:void 0}return n}(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r})}(e,r);return new Promise((function(e,t){i.then((function(){e(Kn)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return Wn(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;Bn(t,o.path)||(t=Wn(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[m.validationSchema]),_=Object(r.useCallback)((function(e,t){return new Promise((function(n){return n(w.current[e].validate(t))}))}),[]),j=Object(r.useCallback)((function(e){var t=Object.keys(w.current).filter((function(e){return In(w.current[e].validate)})),n=t.length>0?t.map((function(t){return _(t,Bn(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=Wn(e,t[r],n)),e}),{})}))}),[_]),A=Object(r.useCallback)((function(e){return Promise.all([j(e),m.validationSchema?C(e):{},m.validate?S(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return f.all([t,n,r],{arrayMerge:Zn})}))}),[m.validate,m.validationSchema,j,S,C]),T=er((function(e){return void 0===e&&(e=k.values),Object(Sn.unstable_runWithPriority)(Sn.LowPriority,(function(){return A(e).then((function(e){return x.current&&E({type:"SET_ERRORS",payload:e}),e})).catch((function(e){0}))}))})),R=er((function(e){return void 0===e&&(e=k.values),E({type:"SET_ISVALIDATING",payload:!0}),A(e).then((function(e){return x.current&&(E({type:"SET_ISVALIDATING",payload:!1}),a()(k.errors,e)||E({type:"SET_ERRORS",payload:e})),e}))}));Object(r.useEffect)((function(){s&&!0===x.current&&T(v.current)}),[s,T]);var D=Object(r.useCallback)((function(e){var t=e&&e.values?e.values:v.current,n=e&&e.errors?e.errors:g.current?g.current:m.initialErrors||{},r=e&&e.touched?e.touched:y.current?y.current:m.initialTouched||{},i=e&&e.status?e.status:b.current?b.current:m.initialStatus;v.current=t,g.current=n,y.current=r,b.current=i;var a=function(){E({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(m.onReset){var o=m.onReset(k.values,Z);Ln(o)?o.then(a):a()}else a()}),[m.initialErrors,m.initialStatus,m.initialTouched]);Object(r.useEffect)((function(){d||(v.current=m.initialValues)}),[d,m.initialValues]),Object(r.useEffect)((function(){d&&!0===x.current&&!a()(v.current,m.initialValues)&&(v.current=m.initialValues,D())}),[d,m.initialValues,D]),Object(r.useEffect)((function(){d&&!0===x.current&&!a()(g.current,m.initialErrors)&&(g.current=m.initialErrors||Kn,E({type:"SET_ERRORS",payload:m.initialErrors||Kn}))}),[d,m.initialErrors]),Object(r.useEffect)((function(){d&&!0===x.current&&!a()(y.current,m.initialTouched)&&(y.current=m.initialTouched||Xn,E({type:"SET_TOUCHED",payload:m.initialTouched||Xn}))}),[d,m.initialTouched]),Object(r.useEffect)((function(){d&&!0===x.current&&!a()(b.current,m.initialStatus)&&(b.current=m.initialStatus,E({type:"SET_STATUS",payload:m.initialStatus}))}),[d,m.initialStatus,m.initialTouched]);var I=er((function(e){if(In(w.current[e].validate)){var t=Bn(k.values,e),n=w.current[e].validate(t);return Ln(n)?(E({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){E({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),E({type:"SET_ISVALIDATING",payload:!1})}))):(E({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return m.validationSchema?(E({type:"SET_ISVALIDATING",payload:!0}),C(k.values,e).then((function(e){return e})).then((function(t){E({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),E({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),M=Object(r.useCallback)((function(e,t){var n=t.validate;w.current[e]={validate:n}}),[]),F=Object(r.useCallback)((function(e){delete w.current[e]}),[]),P=er((function(e,t){return E({type:"SET_TOUCHED",payload:e}),(void 0===t?o:t)?T(k.values):Promise.resolve()})),z=Object(r.useCallback)((function(e){E({type:"SET_ERRORS",payload:e})}),[]),L=er((function(e,t){return E({type:"SET_VALUES",payload:e}),(void 0===t?n:t)?T(e):Promise.resolve()})),B=Object(r.useCallback)((function(e,t){E({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),W=er((function(e,t,r){return E({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?T(Wn(k.values,e,t)):Promise.resolve()})),U=Object(r.useCallback)((function(e,t){var n,r=t,i=e;if(!Pn(e)){e.persist&&e.persist();var a=e.target?e.target:e.currentTarget,o=a.type,u=a.name,s=a.id,c=a.value,l=a.checked,f=(a.outerHTML,a.options),d=a.multiple;r=t||(u||s),i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,a=-1;if(Array.isArray(e))r=e,a=e.indexOf(n),i=a>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,a).concat(r.slice(a+1))}(Bn(k.values,r),l,c):d?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(f):c}r&&W(r,i)}),[W,k.values]),V=er((function(e){if(Pn(e))return function(t){return U(t,e)};U(e)})),H=er((function(e,t,n){return void 0===t&&(t=!0),E({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?o:n)?T(k.values):Promise.resolve()})),q=Object(r.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,a=(n.outerHTML,t||(r||i));H(a,!0)}),[H]),G=er((function(e){if(Pn(e))return function(t){return q(t,e)};q(e)})),$=Object(r.useCallback)((function(e){In(e)?E({type:"SET_FORMIK_STATE",payload:e}):E({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),K=Object(r.useCallback)((function(e){E({type:"SET_STATUS",payload:e})}),[]),X=Object(r.useCallback)((function(e){E({type:"SET_ISSUBMITTING",payload:e})}),[]),Y=er((function(){return E({type:"SUBMIT_ATTEMPT"}),R().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Q()))return}catch(r){throw r}return Promise.resolve(n).then((function(){x.current&&E({type:"SUBMIT_SUCCESS"})})).catch((function(e){if(x.current)throw E({type:"SUBMIT_FAILURE"}),e}))}if(x.current&&(E({type:"SUBMIT_FAILURE"}),t))throw e}))})),J=er((function(e){e&&e.preventDefault&&In(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&In(e.stopPropagation)&&e.stopPropagation(),Y().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),Z={resetForm:D,validateForm:R,validateField:I,setErrors:z,setFieldError:B,setFieldTouched:H,setFieldValue:W,setStatus:K,setSubmitting:X,setTouched:P,setValues:L,setFormikState:$,submitForm:Y},Q=er((function(){return p(k.values,Z)})),ee=er((function(e){e&&e.preventDefault&&In(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&In(e.stopPropagation)&&e.stopPropagation(),D()})),te=Object(r.useCallback)((function(e){return{value:Bn(k.values,e),error:Bn(k.errors,e),touched:!!Bn(k.touched,e),initialValue:Bn(v.current,e),initialTouched:!!Bn(y.current,e),initialError:Bn(g.current,e)}}),[k.errors,k.touched,k.values]),ne=Object(r.useCallback)((function(e){return{setValue:function(t){return W(e,t)},setTouched:function(t){return H(e,t)},setError:function(t){return B(e,t)}}}),[W,H,B]),re=Object(r.useCallback)((function(e){var t=Mn(e),n=t?e.name:e,r=Bn(k.values,n),i={name:n,value:r,onChange:V,onBlur:G};if(t){var a=e.type,o=e.value,u=e.as,s=e.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===u&&s&&(i.value=i.value||[],i.multiple=!0)}return i}),[G,V,k.values]),ie=Object(r.useMemo)((function(){return!a()(v.current,k.values)}),[v.current,k.values]),ae=Object(r.useMemo)((function(){return"undefined"!==typeof c?ie?k.errors&&0===Object.keys(k.errors).length:!1!==c&&In(c)?c(m):c:k.errors&&0===Object.keys(k.errors).length}),[c,ie,k.errors,m]);return An({},k,{initialValues:v.current,initialErrors:g.current,initialTouched:y.current,initialStatus:b.current,handleBlur:G,handleChange:V,handleReset:ee,handleSubmit:J,resetForm:D,setErrors:z,setFormikState:$,setFieldTouched:H,setFieldValue:W,setFieldError:B,setStatus:K,setSubmitting:X,setTouched:P,setValues:L,submitForm:Y,validateForm:R,validateField:I,isValid:ae,dirty:ie,unregisterField:F,registerField:M,getFieldProps:re,getFieldMeta:te,getFieldHelpers:ne,validateOnBlur:o,validateOnChange:n,validateOnMount:s})}function Jn(e){var t=Yn(e),n=e.component,i=e.children,a=e.render,o=e.innerRef;return Object(r.useImperativeHandle)(o,(function(){return t})),Object(r.useEffect)((function(){0}),[]),Object(r.createElement)(Hn,{value:t},n?Object(r.createElement)(n,t):a?a(t):i?In(i)?i(t):zn(i)?null:r.Children.only(i):null)}function Zn(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var a=!1!==n.clone&&n.isMergeableObject(t);r[i]=a?f(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=f(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var Qn="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function er(e){var t=Object(r.useRef)(e);return Qn((function(){t.current=e})),Object(r.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}function tr(e){var t=function(t){return Object(r.createElement)(qn,null,(function(n){return n||Object(En.a)(!1),Object(r.createElement)(e,Object.assign({},t,{formik:n}))}))},n=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t.WrappedComponent=e,t.displayName="FormikConnect("+n+")",_n()(t,e)}Object(r.forwardRef)((function(e,t){var n=e.action,i=Nn(e,["action"]),a=n||"#",o=Gn(),u=o.handleReset,s=o.handleSubmit;return Object(r.createElement)("form",Object.assign({onSubmit:s,ref:t,onReset:u,action:a},i))})).displayName="Form";var nr=function(e,t,n){var r=rr(e);return r.splice(t,0,n),r},rr=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(An({},e,{length:t+1}))}return[]},ir=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i="function"===typeof r?r:e,o="function"===typeof t?t:e,u=Wn(n.values,a,e(Bn(n.values,a))),s=r?i(Bn(n.errors,a)):void 0,c=t?o(Bn(n.touched,a)):void 0;return Dn(s)&&(s=void 0),Dn(c)&&(c=void 0),An({},n,{values:u,errors:r?Wn(n.errors,a,s):n.errors,touched:t?Wn(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(rr(t),[jn(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=rr(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=rr(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return nr(n,e,t)}),(function(t){return nr(t,e,null)}),(function(t){return nr(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=rr(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(Rn(n)),n.pop=n.pop.bind(Rn(n)),n}Tn(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!a()(Bn(e.formik.values,e.name),Bn(this.props.formik.values,this.props.name))&&this.props.formik.validateOnChange&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?rr(n):[];return t||(t=r[e]),In(r.splice)&&r.splice(e,1),r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t;return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,i=t.render,a=t.children,o=t.name,u=An({},e,{form:Nn(t.formik,["validate","validationSchema"]),name:o});return n?Object(r.createElement)(n,u):i?i(u):a?"function"===typeof a?a(u):zn(a)?null:r.Children.only(a):null},t}(r.Component);ir.defaultProps={validateOnChange:!0};r.Component,r.Component},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),i=n(64);function a(e){return e&&"object"===Object(i.a)(e)&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?Object(r.a)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(a(t[r])&&r in e?i[r]=o(e[r],t[r],n):i[r]=t[r])})),i}},function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,a=t.props[n];for(i in a)void 0===r[i]&&(r[i]=a[i]);return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(49),s=n(62),c=n(7),l=n(12),f=n(16),d=n(449),p=n(82),h="undefined"===typeof window?a.useEffect:a.useLayoutEffect,m=a.forwardRef((function(e,t){var n=e["aria-describedby"],c=e.autoComplete,m=e.autoFocus,v=e.classes,g=e.className,y=(e.color,e.defaultValue),b=e.disabled,x=e.endAdornment,w=(e.error,e.fullWidth),O=void 0!==w&&w,k=e.id,E=e.inputComponent,S=void 0===E?"input":E,C=e.inputProps,_=void 0===C?{}:C,j=e.inputRef,A=(e.margin,e.multiline),T=void 0!==A&&A,N=e.name,R=e.onBlur,D=e.onChange,I=e.onClick,M=e.onFocus,F=e.onKeyDown,P=e.onKeyUp,z=e.placeholder,L=e.readOnly,B=e.renderSuffix,W=e.rows,U=e.rowsMax,V=e.rowsMin,H=e.startAdornment,q=e.type,G=void 0===q?"text":q,$=e.value,K=Object(r.a)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","startAdornment","type","value"]),X=null!=_.value?_.value:$,Y=a.useRef(null!=X).current,J=a.useRef(),Z=a.useCallback((function(e){0}),[]),Q=Object(f.a)(_.ref,Z),ee=Object(f.a)(j,Q),te=Object(f.a)(J,ee),ne=a.useState(!1),re=ne[0],ie=ne[1],ae=Object(s.b)();var oe=Object(u.a)({props:e,muiFormControl:ae,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});oe.focused=ae?ae.focused:re,a.useEffect((function(){!ae&&b&&re&&(ie(!1),R&&R())}),[ae,b,re,R]);var ue=ae&&ae.onFilled,se=ae&&ae.onEmpty,ce=a.useCallback((function(e){Object(p.b)(e)?ue&&ue():se&&se()}),[ue,se]);h((function(){Y&&ce({value:X})}),[X,ce,Y]);a.useEffect((function(){ce(J.current)}),[]);var le=S,fe=Object(i.a)({},_,{ref:te});"string"!==typeof le?fe=Object(i.a)({inputRef:te,type:G},fe,{ref:null}):T?!W||U||V?(fe=Object(i.a)({rows:W,rowsMax:U},fe),le=d.a):le="textarea":fe=Object(i.a)({type:G},fe);return a.useEffect((function(){ae&&ae.setAdornedStart(Boolean(H))}),[ae,H]),a.createElement("div",Object(i.a)({className:Object(o.a)(v.root,v["color".concat(Object(l.a)(oe.color||"primary"))],g,oe.disabled&&v.disabled,oe.error&&v.error,O&&v.fullWidth,oe.focused&&v.focused,ae&&v.formControl,T&&v.multiline,H&&v.adornedStart,x&&v.adornedEnd,"dense"===oe.margin&&v.marginDense),onClick:function(e){J.current&&e.currentTarget===e.target&&J.current.focus(),I&&I(e)},ref:t},K),H,a.createElement(s.a.Provider,{value:null},a.createElement(le,Object(i.a)({"aria-invalid":oe.error,"aria-describedby":n,autoComplete:c,autoFocus:m,defaultValue:y,disabled:oe.disabled,id:k,onAnimationStart:function(e){ce("mui-auto-fill-cancel"===e.animationName?J.current:{value:"x"})},name:N,placeholder:z,readOnly:L,required:oe.required,rows:W,value:X,onKeyDown:F,onKeyUp:P},fe,{className:Object(o.a)(v.input,_.className,oe.disabled&&v.disabled,T&&v.inputMultiline,oe.hiddenLabel&&v.inputHiddenLabel,H&&v.inputAdornedStart,x&&v.inputAdornedEnd,"search"===G&&v.inputTypeSearch,"dense"===oe.margin&&v.inputMarginDense),onBlur:function(e){R&&R(e),_.onBlur&&_.onBlur(e),ae&&ae.onBlur?ae.onBlur(e):ie(!1)},onChange:function(e){if(!Y){var t=e.target||J.current;if(null==t)throw new TypeError("Material-UI: Expected valid input target. Did you use a custom `inputComponent` and forget to forward refs? See https://material-ui.com/r/input-component-ref-interface for more info.");ce({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];_.onChange&&_.onChange.apply(_,[e].concat(r)),D&&D.apply(void 0,[e].concat(r))},onFocus:function(e){oe.disabled?e.stopPropagation():(M&&M(e),_.onFocus&&_.onFocus(e),ae&&ae.onFocus?ae.onFocus(e):ie(!0))}}))),x,B?B(Object(i.a)({},oe,{startAdornment:H})):null)}));t.a=Object(c.a)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},a={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{from:{}},"@keyframes mui-auto-fill-cancel":{from:{}}},root:Object(i.a)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(m)},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ae}));var r=n(32),i=Date.now(),a="fnValues"+i,o="fnStyle"+ ++i;var u=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var i=Object(r.d)(e,{},n);return i[o]=t,i},onProcessStyle:function(e,t){if(a in t||o in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[a]=n,e},onUpdate:function(e,t,n,r){var i=t,u=i[o];u&&(i.style=u(e)||{});var s=i[a];if(s)for(var c in s)i.prop(c,s[c](e),r)}}},s=n(3),c="@global",l=function(){function e(e,t,n){for(var i in this.type="global",this.at=c,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new r.a(Object(s.a)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),f=function(){function e(e,t,n){this.type="global",this.at=c,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=n;var r=e.substr("@global ".length);this.rule=n.jss.createRule(r,t,Object(s.a)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),d=/\s*,\s*/g;function p(e,t){for(var n=e.split(d),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var h=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===c)return new l(e,t,n);if("@"===e[0]&&"@global "===e.substr(0,"@global ".length))return new f(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),!1===n.scoped&&(n.selector=e),null},onProcessRule:function(e){"style"===e.type&&(function(e){var t=e.options,n=e.style,r=n?n[c]:null;if(r){for(var i in r)t.sheet.addRule(i,r[i],Object(s.a)({},t,{selector:p(i,e.selector)}));delete n[c]}}(e),function(e){var t=e.options,n=e.style;for(var r in n)if("@"===r[0]&&r.substr(0,c.length)===c){var i=p(r.substr(c.length),e.selector);t.sheet.addRule(i,n[r],Object(s.a)({},t,{selector:i})),delete n[r]}}(e))}}},m=/\s*,\s*/g,v=/&/g,g=/\$([\w-]+)/g;var y=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?(i=i).selector:r}}function t(e,t){for(var n=t.split(m),r=e.split(m),i="",a=0;a<n.length;a++)for(var o=n[a],u=0;u<r.length;u++){var s=r[u];i&&(i+=", "),i+=-1!==s.indexOf("&")?s.replace(v,o):o+" "+s}return i}function n(e,t,n){if(n)return Object(s.a)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=Object(s.a)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,a){if("style"!==i.type)return r;var o,u,c=i,l=c.options.parent;for(var f in r){var d=-1!==f.indexOf("&"),p="@"===f[0];if(d||p){if(o=n(c,l,o),d){var h=t(f,c.selector);u||(u=e(l,a)),h=h.replace(g,u),l.addRule(h,r[f],Object(s.a)({},o,{selector:h}))}else p&&l.addRule(f,{},o).addRule(c.key,r[f],{selector:c.selector});delete r[f]}}return r}}},b=n(163);function x(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Object(b.default)(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(x):t.fallbacks=x(e.fallbacks)),t}var w=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=x(e[t]);return e}return x(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Object(b.default)(t);return t===r?e:(n.prop(r,e),null)}}},O=r.f&&CSS?CSS.px:"px",k=r.f&&CSS?CSS.ms:"ms",E=r.f&&CSS?CSS.percent:"%";function S(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var C=S({"animation-delay":k,"animation-duration":k,"background-position":O,"background-position-x":O,"background-position-y":O,"background-size":O,border:O,"border-bottom":O,"border-bottom-left-radius":O,"border-bottom-right-radius":O,"border-bottom-width":O,"border-left":O,"border-left-width":O,"border-radius":O,"border-right":O,"border-right-width":O,"border-top":O,"border-top-left-radius":O,"border-top-right-radius":O,"border-top-width":O,"border-width":O,margin:O,"margin-bottom":O,"margin-left":O,"margin-right":O,"margin-top":O,padding:O,"padding-bottom":O,"padding-left":O,"padding-right":O,"padding-top":O,"mask-position-x":O,"mask-position-y":O,"mask-size":O,height:O,width:O,"min-height":O,"max-height":O,"min-width":O,"max-width":O,bottom:O,left:O,top:O,right:O,"box-shadow":O,"text-shadow":O,"column-gap":O,"column-rule":O,"column-rule-width":O,"column-width":O,"font-size":O,"font-size-delta":O,"letter-spacing":O,"text-indent":O,"text-stroke":O,"text-stroke-width":O,"word-spacing":O,motion:O,"motion-offset":O,outline:O,"outline-offset":O,"outline-width":O,perspective:O,"perspective-origin-x":E,"perspective-origin-y":E,"transform-origin":E,"transform-origin-x":E,"transform-origin-y":E,"transform-origin-z":E,"transition-delay":k,"transition-duration":k,"vertical-align":O,"flex-basis":O,"shape-margin":O,size:O,grid:O,"grid-gap":O,"grid-row-gap":O,"grid-column-gap":O,"grid-template-rows":O,"grid-template-columns":O,"grid-auto-rows":O,"grid-auto-columns":O,"box-shadow-x":O,"box-shadow-y":O,"box-shadow-blur":O,"box-shadow-spread":O,"font-line-height":O,"text-shadow-x":O,"text-shadow-y":O,"text-shadow-blur":O});function _(e,t,n){if(!t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=_(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=_(i,t[i],n);else for(var a in t)t[a]=_(e+"-"+a,t[a],n);else if("number"===typeof t){var o=n[e]||C[e];return o?"function"===typeof o?o(t).toString():""+t+o:t.toString()}return t}var j=function(e){void 0===e&&(e={});var t=S(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=_(r,e[r],t);return e},onChangeValue:function(e,n){return _(n,e,t)}}},A=n(83),T=n(23),N="",R="",D="",I="",M=A.a&&"ontouchstart"in document.documentElement;if(A.a){var F={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},P=document.createElement("p").style;for(var z in F)if(z+"Transform"in P){N=z,R=F[z];break}"Webkit"===N&&"msHyphens"in P&&(N="ms",R=F.ms,I="edge"),"Webkit"===N&&"-apple-trailing-word"in P&&(D="apple")}var L=N,B=R,W=D,U=I,V=M;var H={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===L?"-webkit-"+e:B+e)}},q={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===L?B+"print-"+e:e)}},G=/[-\s]+(.)?/g;function $(e,t){return t?t.toUpperCase():""}function K(e){return e.replace(G,$)}function X(e){return K("-"+e)}var Y,J={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===L){if(K("mask-image")in t)return e;if(L+X("mask-image")in t)return B+e}return e}},Z={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==W||V?e:B+e)}},Q={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:B+e)}},ee={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:B+e)}},te={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===L||"ms"===L&&"edge"!==U?B+e:e)}},ne={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===L||"ms"===L||"apple"===W?B+e:e)}},re={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===L?"WebkitColumn"+X(e)in t&&B+"column-"+e:"Moz"===L&&("page"+X(e)in t&&"page-"+e))}},ie={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===L)return e;var n=e.replace("-inline","");return L+X(n)in t&&B+n}},ae={supportedProperty:function(e,t){return K(e)in t&&e}},oe={supportedProperty:function(e,t){var n=X(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:L+n in t?B+e:"Webkit"!==L&&"Webkit"+n in t&&"-webkit-"+e}},ue={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===L?""+B+e:e)}},se={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===L?B+"scroll-chaining":e)}},ce={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},le={supportedProperty:function(e,t){var n=ce[e];return!!n&&(L+X(n)in t&&B+n)}},fe={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},de=Object.keys(fe),pe=function(e){return B+e},he=[H,q,J,Z,Q,ee,te,ne,re,ie,ae,oe,ue,se,le,{supportedProperty:function(e,t,n){var r=n.multiple;if(de.indexOf(e)>-1){var i=fe[e];if(!Array.isArray(i))return L+X(i)in t&&B+i;if(!r)return!1;for(var a=0;a<i.length;a++)if(!(L+X(i[0])in t))return!1;return i.map(pe)}return!1}}],me=he.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),ve=he.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Object(T.a)(t.noPrefill)),e}),[]),ge={};if(A.a){Y=document.createElement("p");var ye=window.getComputedStyle(document.documentElement,"");for(var be in ye)isNaN(be)||(ge[ye[be]]=ye[be]);ve.forEach((function(e){return delete ge[e]}))}function xe(e,t){if(void 0===t&&(t={}),!Y)return e;if(null!=ge[e])return ge[e];"transition"!==e&&"transform"!==e||(t[e]=e in Y.style);for(var n=0;n<me.length&&(ge[e]=me[n](e,Y.style,t),!ge[e]);n++);try{Y.style[e]=""}catch(r){return!1}return ge[e]}var we,Oe={},ke={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Ee=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Se(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?xe(t):", "+xe(n);return r||(t||n)}function Ce(e,t){var n=t;if(!we||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Oe[r])return Oe[r];try{we.style[e]=n}catch(i){return Oe[r]=!1,!1}if(ke[e])n=n.replace(Ee,Se);else if(""===we.style[e]&&("-ms-flex"===(n=B+n)&&(we.style[e]="-ms-flexbox"),we.style[e]=n,""===we.style[e]))return Oe[r]=!1,!1;return we.style[e]="",Oe[r]=n,Oe[r]}A.a&&(we=document.createElement("p"));var _e=function(){function e(t){for(var n in t){var i=t[n];if("fallbacks"===n&&Array.isArray(i))t[n]=i.map(e);else{var a=!1,o=xe(n);o&&o!==n&&(a=!0);var u=!1,s=Ce(o,Object(r.g)(i));s&&s!==i&&(u=!0),(a||u)&&(a&&delete t[n],t[o||n]=s||i)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(n=t.at)[1]||"ms"===L?n:"@"+B+"keyframes"+n.substr(10)}var n},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Ce(t,Object(r.g)(e))||e}}};var je=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),a=0;a<i.length;a++)r[i[a]]=t[i[a]];return r}}};function Ae(){return{plugins:[u(),h(),y(),w(),j(),"undefined"===typeof window?null:_e(),je()]}}},,,,,,,,,,,function(e,t,n){"use strict";var r=n(115),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,h=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,v="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function w(){}function O(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=x.prototype;var k=O.prototype=new w;k.constructor=O,r(k,x.prototype),k.isPureReactComponent=!0;var E={current:null},S=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:E.current}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var A=/\/+/g,T=[];function N(e,t,n,r){if(T.length){var i=T.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>T.length&&T.push(e)}function D(e,t,n){return null==e?0:function e(t,n,r,i){var u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var s=!1;if(null===t)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case a:case o:s=!0}}if(s)return r(i,t,""===n?"."+I(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+I(u=t[c],c);s+=e(u,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=v&&t[v]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(u=t.next()).done;)s+=e(u=u.value,l=n+I(u,c++),r,i);else if("object"===u)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return s}(e,"",t,n)}function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?P(e,r,n,(function(e){return e})):null!=e&&(j(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function P(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(A,"$&/")+"/"),D(e,F,t=N(t,a,r,i)),R(t)}var z={current:null};function L(){var e=z.current;if(null===e)throw Error(g(321));return e}var B={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return P(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,M,t=N(null,null,t,n)),R(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return P(e,t,null,(function(e){return e})),t},only:function(e){if(!j(e))throw Error(g(143));return e}},t.Component=x,t.Fragment=u,t.Profiler=c,t.PureComponent=O,t.StrictMode=s,t.Suspense=p,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(g(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return L().useCallback(e,t)},t.useContext=function(e,t){return L().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return L().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return L().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return L().useLayoutEffect(e,t)},t.useMemo=function(e,t){return L().useMemo(e,t)},t.useReducer=function(e,t,n){return L().useReducer(e,t,n)},t.useRef=function(e){return L().useRef(e)},t.useState=function(e){return L().useState(e)},t.version="16.13.1"},function(e,t,n){"use strict";var r=n(0),i=n(115),a=n(347);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function u(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var s=!1,c=null,l=!1,f=null,d={onError:function(e){s=!0,c=e}};function p(e,t,n,r,i,a,o,l,f){s=!1,c=null,u.apply(d,arguments)}var h=null,m=null,v=null;function g(e,t,n){var r=e.type||"unknown-event";e.currentTarget=v(n),function(e,t,n,r,i,a,u,d,h){if(p.apply(this,arguments),s){if(!s)throw Error(o(198));var m=c;s=!1,c=null,l||(l=!0,f=m)}}(r,t,void 0,e),e.currentTarget=null}var y=null,b={};function x(){if(y)for(var e in b){var t=b[e],n=y.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!O[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in O[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;if(k.hasOwnProperty(s))throw Error(o(99,s));k[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],u,s);i=!0}else a.registrationName?(w(a.registrationName,u,s),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function w(e,t,n){if(E[e])throw Error(o(100,e));E[e]=t,S[e]=t.eventTypes[n].dependencies}var O=[],k={},E={},S={};function C(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(o(102,t));b[t]=r,n=!0}}n&&x()}var _=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),j=null,A=null,T=null;function N(e){if(e=m(e)){if("function"!==typeof j)throw Error(o(280));var t=e.stateNode;t&&(t=h(t),j(e.stateNode,e.type,t))}}function R(e){A?T?T.push(e):T=[e]:A=e}function D(){if(A){var e=A,t=T;if(T=A=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function I(e,t){return e(t)}function M(e,t,n,r,i){return e(t,n,r,i)}function F(){}var P=I,z=!1,L=!1;function B(){null===A&&null===T||(F(),D())}function W(e,t,n){if(L)return e(t,n);L=!0;try{return P(e,t,n)}finally{L=!1,B()}}var U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V=Object.prototype.hasOwnProperty,H={},q={};function G(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){$[e]=new G(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];$[t]=new G(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){$[e]=new G(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){$[e]=new G(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){$[e]=new G(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){$[e]=new G(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){$[e]=new G(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){$[e]=new G(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){$[e]=new G(e,5,!1,e.toLowerCase(),null,!1)}));var K=/[\-:]([a-z])/g;function X(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(K,X);$[t]=new G(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(K,X);$[t]=new G(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(K,X);$[t]=new G(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){$[e]=new G(e,1,!1,e.toLowerCase(),null,!1)})),$.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){$[e]=new G(e,1,!1,e.toLowerCase(),null,!0)}));var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=$.hasOwnProperty(t)?$[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!V.call(q,e)||!V.call(H,e)&&(U.test(e)?q[e]=!0:(H[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Y.hasOwnProperty("ReactCurrentDispatcher")||(Y.ReactCurrentDispatcher={current:null}),Y.hasOwnProperty("ReactCurrentBatchConfig")||(Y.ReactCurrentBatchConfig={suspense:null});var Z=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,ee=Q?Symbol.for("react.element"):60103,te=Q?Symbol.for("react.portal"):60106,ne=Q?Symbol.for("react.fragment"):60107,re=Q?Symbol.for("react.strict_mode"):60108,ie=Q?Symbol.for("react.profiler"):60114,ae=Q?Symbol.for("react.provider"):60109,oe=Q?Symbol.for("react.context"):60110,ue=Q?Symbol.for("react.concurrent_mode"):60111,se=Q?Symbol.for("react.forward_ref"):60112,ce=Q?Symbol.for("react.suspense"):60113,le=Q?Symbol.for("react.suspense_list"):60120,fe=Q?Symbol.for("react.memo"):60115,de=Q?Symbol.for("react.lazy"):60116,pe=Q?Symbol.for("react.block"):60121,he="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=he&&e[he]||e["@@iterator"])?e:null}function ve(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ve(e.type);case pe:return ve(e.render);case de:if(e=1===e._status?e._result:null)return ve(e)}return null}function ge(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ve(e.type);n=null,r&&(n=ve(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(Z,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function xe(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Oe(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ke(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ee(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Se(e,t){Ee(e,t);var n=ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?_e(e,t.type,n):t.hasOwnProperty("defaultValue")&&_e(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ce(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function _e(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function je(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Te(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function Re(e,t){var n=ye(t.value),r=ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Ie="http://www.w3.org/1999/xhtml",Me="http://www.w3.org/2000/svg";function Fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ze,Le=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Me||"innerHTML"in e)e.innerHTML=t;else{for((ze=ze||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ze.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function We(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ue={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Ve={},He={};function qe(e){if(Ve[e])return Ve[e];if(!Ue[e])return e;var t,n=Ue[e];for(t in n)if(n.hasOwnProperty(t)&&t in He)return Ve[e]=n[t];return e}_&&(He=document.createElement("div").style,"AnimationEvent"in window||(delete Ue.animationend.animation,delete Ue.animationiteration.animation,delete Ue.animationstart.animation),"TransitionEvent"in window||delete Ue.transitionend.transition);var Ge=qe("animationend"),$e=qe("animationiteration"),Ke=qe("animationstart"),Xe=qe("transitionend"),Ye="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Qe(e)!==e)throw Error(o(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return tt(i),e;if(a===r)return tt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var at=null;function ot(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)g(e,t[r],n[r]);else t&&g(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ut(e){if(null!==e&&(at=rt(at,e)),e=at,at=null,e){if(it(e,ot),at)throw Error(o(95));if(l)throw e=f,l=!1,f=null,e}}function st(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!_)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var lt=[];function ft(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>lt.length&&lt.push(e)}function dt(e,t,n,r){if(lt.length){var i=lt.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=_n(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=st(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var u=null,s=0;s<O.length;s++){var c=O[s];c&&(c=c.extractEvents(r,t,a,i,o))&&(u=rt(u,c))}ut(u)}}function ht(e,t,n){if(!n.has(e)){switch(e){case"scroll":Kt(t,"scroll",!0);break;case"focus":case"blur":Kt(t,"focus",!0),Kt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Kt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ye.indexOf(e)&&$t(e,t)}n.set(e,null)}}var mt,vt,gt,yt=!1,bt=[],xt=null,wt=null,Ot=null,kt=new Map,Et=new Map,St=[],Ct="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),_t="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function jt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function At(e,t){switch(e){case"focus":case"blur":xt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(t.pointerId)}}function Tt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=jt(t,n,r,i,a),null!==t&&(null!==(t=jn(t))&&vt(t)),e):(e.eventSystemFlags|=r,e)}function Nt(e){var t=_n(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=jn(t);return null!==n&&vt(n),e.blockedOn=t,!1}return!0}function Dt(e,t,n){Rt(e)&&n.delete(t)}function It(){for(yt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=jn(e.blockedOn))&&mt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==xt&&Rt(xt)&&(xt=null),null!==wt&&Rt(wt)&&(wt=null),null!==Ot&&Rt(Ot)&&(Ot=null),kt.forEach(Dt),Et.forEach(Dt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,yt||(yt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,It)))}function Ft(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Mt(xt,e),null!==wt&&Mt(wt,e),null!==Ot&&Mt(Ot,e),kt.forEach(t),Et.forEach(t),n=0;n<St.length;n++)(r=St[n]).blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&null===(n=St[0]).blockedOn;)Nt(n),null===n.blockedOn&&St.shift()}var Pt={},zt=new Map,Lt=new Map,Bt=["abort","abort",Ge,"animationEnd",$e,"animationIteration",Ke,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function Wt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},Lt.set(r,t),zt.set(r,a),Pt[i]=a}}Wt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Wt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Wt(Bt,2);for(var Ut="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Vt=0;Vt<Ut.length;Vt++)Lt.set(Ut[Vt],0);var Ht=a.unstable_UserBlockingPriority,qt=a.unstable_runWithPriority,Gt=!0;function $t(e,t){Kt(t,e,!1)}function Kt(e,t,n){var r=Lt.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=Yt.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){z||F();var i=Jt,a=z;z=!0;try{M(i,e,t,n,r)}finally{(z=a)||B()}}function Yt(e,t,n,r){qt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Gt)if(0<bt.length&&-1<Ct.indexOf(e))e=jt(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)At(e,r);else if(-1<Ct.indexOf(e))e=jt(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return xt=Tt(xt,e,t,n,r,i),!0;case"dragenter":return wt=Tt(wt,e,t,n,r,i),!0;case"mouseover":return Ot=Tt(Ot,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return kt.set(a,Tt(kt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Et.set(a,Tt(Et.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){At(e,r),e=dt(e,r,null,t);try{W(pt,e)}finally{ft(e)}}}}function Zt(e,t,n,r){if(null!==(n=_n(n=st(r)))){var i=Qe(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=et(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=dt(e,r,n,t);try{W(pt,e)}finally{ft(e)}return null}var Qt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Qt.hasOwnProperty(e)&&Qt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Qt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qt[t]=Qt[e]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function an(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function on(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=Ie;function sn(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)ht(t[r],e,n)}function cn(){}function ln(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fn(r)}}function pn(){for(var e=window,t=ln();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ln((e=t.contentWindow).document)}return t}function hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn=null,vn=null;function gn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bn="function"===typeof setTimeout?setTimeout:void 0,xn="function"===typeof clearTimeout?clearTimeout:void 0;function wn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function On(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var kn=Math.random().toString(36).slice(2),En="__reactInternalInstance$"+kn,Sn="__reactEventHandlers$"+kn,Cn="__reactContainere$"+kn;function _n(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cn]||n[En]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=On(e);null!==e;){if(n=e[En])return n;e=On(e)}return t}n=(e=n).parentNode}return null}function jn(e){return!(e=e[En]||e[Cn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function An(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Tn(e){return e[Sn]||null}function Nn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Rn(e,t){var n=e.stateNode;if(!n)return null;var r=h(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Dn(e,t,n){(t=Rn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function In(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Nn(t);for(t=n.length;0<t--;)Dn(n[t],"captured",e);for(t=0;t<n.length;t++)Dn(n[t],"bubbled",e)}}function Mn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Rn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Fn(e){e&&e.dispatchConfig.registrationName&&Mn(e._targetInst,null,e)}function Pn(e){it(e,In)}var zn=null,Ln=null,Bn=null;function Wn(){if(Bn)return Bn;var e,t,n=Ln,r=n.length,i="value"in zn?zn.value:zn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Bn=i.slice(e,1<t?1-t:void 0)}function Un(){return!0}function Vn(){return!1}function Hn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Un:Vn,this.isPropagationStopped=Vn,this}function qn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Gn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function $n(e){e.eventPool=[],e.getPooled=qn,e.release=Gn}i(Hn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){this.isPersistent=Un},isPersistent:Vn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Vn,this._dispatchInstances=this._dispatchListeners=null}}),Hn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Hn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,$n(n),n},$n(Hn);var Kn=Hn.extend({data:null}),Xn=Hn.extend({data:null}),Yn=[9,13,27,32],Jn=_&&"CompositionEvent"in window,Zn=null;_&&"documentMode"in document&&(Zn=document.documentMode);var Qn=_&&"TextEvent"in window&&!Zn,er=_&&(!Jn||Zn&&8<Zn&&11>=Zn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(e,t){switch(e){case"keyup":return-1!==Yn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ar(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var or=!1;var ur={eventTypes:nr,extractEvents:function(e,t,n,r){var i;if(Jn)e:{switch(e){case"compositionstart":var a=nr.compositionStart;break e;case"compositionend":a=nr.compositionEnd;break e;case"compositionupdate":a=nr.compositionUpdate;break e}a=void 0}else or?ir(e,n)&&(a=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=nr.compositionStart);return a?(er&&"ko"!==n.locale&&(or||a!==nr.compositionStart?a===nr.compositionEnd&&or&&(i=Wn()):(Ln="value"in(zn=r)?zn.value:zn.textContent,or=!0)),a=Kn.getPooled(a,t,n,r),i?a.data=i:null!==(i=ar(n))&&(a.data=i),Pn(a),i=a):i=null,(e=Qn?function(e,t){switch(e){case"compositionend":return ar(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(or)return"compositionend"===e||!Jn&&ir(e,t)?(e=Wn(),Bn=Ln=zn=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Xn.getPooled(nr.beforeInput,t,n,r)).data=e,Pn(t)):t=null,null===i?t:null===t?i:[i,t]}},sr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!sr[e.type]:"textarea"===t}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fr(e,t,n){return(e=Hn.getPooled(lr.change,e,t,n)).type="change",R(n),Pn(e),e}var dr=null,pr=null;function hr(e){ut(e)}function mr(e){if(we(An(e)))return e}function vr(e,t){if("change"===e)return t}var gr=!1;function yr(){dr&&(dr.detachEvent("onpropertychange",br),pr=dr=null)}function br(e){if("value"===e.propertyName&&mr(pr))if(e=fr(pr,e,st(e)),z)ut(e);else{z=!0;try{I(hr,e)}finally{z=!1,B()}}}function xr(e,t,n){"focus"===e?(yr(),pr=n,(dr=t).attachEvent("onpropertychange",br)):"blur"===e&&yr()}function wr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return mr(pr)}function Or(e,t){if("click"===e)return mr(t)}function kr(e,t){if("input"===e||"change"===e)return mr(t)}_&&(gr=ct("input")&&(!document.documentMode||9<document.documentMode));var Er={eventTypes:lr,_isInputEventSupported:gr,extractEvents:function(e,t,n,r){var i=t?An(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=vr;else if(cr(i))if(gr)o=kr;else{o=wr;var u=xr}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Or);if(o&&(o=o(e,t)))return fr(o,n,r);u&&u(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&_e(i,"number",i.value)}},Sr=Hn.extend({view:null,detail:null}),Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function jr(){return _r}var Ar=0,Tr=0,Nr=!1,Rr=!1,Dr=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:jr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ar;return Ar=e.screenX,Nr?"mousemove"===e.type?e.screenX-t:0:(Nr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Tr;return Tr=e.screenY,Rr?"mousemove"===e.type?e.screenY-t:0:(Rr=!0,0)}}),Ir=Dr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Mr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Fr={eventTypes:Mr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?_n(t):null)&&(t!==Qe(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var u=Dr,s=Mr.mouseLeave,c=Mr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(u=Ir,s=Mr.pointerLeave,c=Mr.pointerEnter,l="pointer");if(e=null==o?a:An(o),a=null==t?a:An(t),(s=u.getPooled(s,o,n,r)).type=l+"leave",s.target=e,s.relatedTarget=a,(n=u.getPooled(c,t,n,r)).type=l+"enter",n.target=a,n.relatedTarget=e,l=t,(r=o)&&l)e:{for(c=l,o=0,e=u=r;e;e=Nn(e))o++;for(e=0,t=c;t;t=Nn(t))e++;for(;0<o-e;)u=Nn(u),o--;for(;0<e-o;)c=Nn(c),e--;for(;o--;){if(u===c||u===c.alternate)break e;u=Nn(u),c=Nn(c)}u=null}else u=null;for(c=u,u=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)u.push(r),r=Nn(r);for(r=[];l&&l!==c&&(null===(o=l.alternate)||o!==c);)r.push(l),l=Nn(l);for(l=0;l<u.length;l++)Mn(u[l],"bubbled",s);for(l=r.length;0<l--;)Mn(r[l],"captured",n);return 0===(64&i)?[s]:[s,n]}};var Pr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},zr=Object.prototype.hasOwnProperty;function Lr(e,t){if(Pr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!zr.call(t,n[r])||!Pr(e[n[r]],t[n[r]]))return!1;return!0}var Br=_&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ur=null,Vr=null,Hr=null,qr=!1;function Gr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return qr||null==Ur||Ur!==ln(n)?null:("selectionStart"in(n=Ur)&&hn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Hr&&Lr(Hr,n)?null:(Hr=n,(e=Hn.getPooled(Wr.select,Vr,e,t)).type="select",e.target=Ur,Pn(e),e))}var $r={eventTypes:Wr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),a=S.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?An(t):window,e){case"focus":(cr(i)||"true"===i.contentEditable)&&(Ur=i,Vr=t,Hr=null);break;case"blur":Hr=Vr=Ur=null;break;case"mousedown":qr=!0;break;case"contextmenu":case"mouseup":case"dragend":return qr=!1,Gr(n,r);case"selectionchange":if(Br)break;case"keydown":case"keyup":return Gr(n,r)}return null}},Kr=Hn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Xr=Hn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yr=Sr.extend({relatedTarget:null});function Jr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=Sr.extend({key:function(e){if(e.key){var t=Zr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Qr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:jr,charCode:function(e){return"keypress"===e.type?Jr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Dr.extend({dataTransfer:null}),ni=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:jr}),ri=Hn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Dr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ai={eventTypes:Pt,extractEvents:function(e,t,n,r){var i=zt.get(e);if(!i)return null;switch(e){case"keypress":if(0===Jr(n))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=Yr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Dr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ni;break;case Ge:case $e:case Ke:e=Kr;break;case Xe:e=ri;break;case"scroll":e=Sr;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Xr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ir;break;default:e=Hn}return Pn(t=e.getPooled(i,t,n,r)),t}};if(y)throw Error(o(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x(),h=Tn,m=jn,v=An,C({SimpleEventPlugin:ai,EnterLeaveEventPlugin:Fr,ChangeEventPlugin:Er,SelectEventPlugin:$r,BeforeInputEventPlugin:ur});var oi=[],ui=-1;function si(e){0>ui||(e.current=oi[ui],oi[ui]=null,ui--)}function ci(e,t){ui++,oi[ui]=e.current,e.current=t}var li={},fi={current:li},di={current:!1},pi=li;function hi(e,t){var n=e.type.contextTypes;if(!n)return li;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){si(di),si(fi)}function gi(e,t,n){if(fi.current!==li)throw Error(o(168));ci(fi,t),ci(di,n)}function yi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ve(t)||"Unknown",a));return i({},n,{},r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||li,pi=fi.current,ci(fi,e),ci(di,di.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=yi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,si(di),si(fi),ci(fi,e)):si(di),ci(di,n)}var wi=a.unstable_runWithPriority,Oi=a.unstable_scheduleCallback,ki=a.unstable_cancelCallback,Ei=a.unstable_requestPaint,Si=a.unstable_now,Ci=a.unstable_getCurrentPriorityLevel,_i=a.unstable_ImmediatePriority,ji=a.unstable_UserBlockingPriority,Ai=a.unstable_NormalPriority,Ti=a.unstable_LowPriority,Ni=a.unstable_IdlePriority,Ri={},Di=a.unstable_shouldYield,Ii=void 0!==Ei?Ei:function(){},Mi=null,Fi=null,Pi=!1,zi=Si(),Li=1e4>zi?Si:function(){return Si()-zi};function Bi(){switch(Ci()){case _i:return 99;case ji:return 98;case Ai:return 97;case Ti:return 96;case Ni:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return _i;case 98:return ji;case 97:return Ai;case 96:return Ti;case 95:return Ni;default:throw Error(o(332))}}function Ui(e,t){return e=Wi(e),wi(e,t)}function Vi(e,t,n){return e=Wi(e),Oi(e,t,n)}function Hi(e){return null===Mi?(Mi=[e],Fi=Oi(_i,Gi)):Mi.push(e),Ri}function qi(){if(null!==Fi){var e=Fi;Fi=null,ki(e)}Gi()}function Gi(){if(!Pi&&null!==Mi){Pi=!0;var e=0;try{var t=Mi;Ui(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(n){throw null!==Mi&&(Mi=Mi.slice(e+1)),Oi(_i,qi),n}finally{Pi=!1}}}function $i(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Ki(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Xi={current:null},Yi=null,Ji=null,Zi=null;function Qi(){Zi=Ji=Yi=null}function ea(e){var t=Xi.current;si(Xi),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function na(e,t){Yi=e,Zi=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(To=!0),e.firstContext=null)}function ra(e,t){if(Zi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Zi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Yi)throw Error(o(308));Ji=t,Yi.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var ia=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ua(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function sa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ca(e,t){var n=e.alternate;null!==n&&oa(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function la(e,t,n,r){var a=e.updateQueue;ia=!1;var o=a.baseQueue,u=a.shared.pending;if(null!==u){if(null!==o){var s=o.next;o.next=u.next,u.next=s}o=u,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=u))}if(null!==o){s=o.next;var c=a.baseState,l=0,f=null,d=null,p=null;if(null!==s)for(var h=s;;){if((u=h.expirationTime)<r){var m={expirationTime:h.expirationTime,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null};null===p?(d=p=m,f=c):p=p.next=m,u>l&&(l=u)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:h.suspenseConfig,tag:h.tag,payload:h.payload,callback:h.callback,next:null}),as(u,h.suspenseConfig);e:{var v=e,g=h;switch(u=t,m=n,g.tag){case 1:if("function"===typeof(v=g.payload)){c=v.call(m,c,u);break e}c=v;break e;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null===(u="function"===typeof(v=g.payload)?v.call(m,c,u):v)||void 0===u)break e;c=i({},c,u);break e;case 2:ia=!0}}null!==h.callback&&(e.effectTag|=32,null===(u=a.effects)?a.effects=[h]:u.push(h))}if(null===(h=h.next)||h===s){if(null===(u=a.shared.pending))break;h=o.next=u.next,u.next=s,a.baseQueue=o=u,a.shared.pending=null}}null===p?f=c:p.next=d,a.baseState=f,a.baseQueue=p,os(l),e.expirationTime=l,e.memoizedState=c}}function fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var da=Y.ReactCurrentBatchConfig,pa=(new r.Component).refs;function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Gu(),i=da.suspense;(i=ua(r=$u(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),sa(e,i),Ku(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Gu(),i=da.suspense;(i=ua(r=$u(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),sa(e,i),Ku(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Gu(),r=da.suspense;(r=ua(n=$u(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),sa(e,r),Ku(e,n)}};function va(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Lr(n,r)||!Lr(i,a))}function ga(e,t,n){var r=!1,i=li,a=t.contextType;return"object"===typeof a&&null!==a?a=ra(a):(i=mi(t)?pi:fi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?hi(e,i):li),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ya(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pa,aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ra(a):(a=mi(t)?pi:fi.current,i.context=hi(e,a)),la(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ha(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),la(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var xa=Array.isArray;function wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===pa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Oa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function ka(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Cs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=As(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=wa(e,t,n),r.return=e,r):((r=_s(n.type,n.key,n.props,null,e.mode,r)).ref=wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ts(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=js(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=As(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=_s(t.type,t.key,t.props,null,e.mode,n)).ref=wa(e,null,t),n.return=e,n;case te:return(t=Ts(t,e.mode,n)).return=e,t}if(xa(t)||me(t))return(t=js(t,e.mode,n,null)).return=e,t;Oa(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(xa(n)||me(n))return null!==i?null:f(e,t,n,r,null);Oa(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||me(r))return f(t,e=e.get(n)||null,r,i,null);Oa(t,r)}return null}function m(i,o,u,s){for(var c=null,l=null,f=o,m=o=0,v=null;null!==f&&m<u.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=p(i,f,u[m],s);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(i,f),o=a(g,o,m),null===l?c=g:l.sibling=g,l=g,f=v}if(m===u.length)return n(i,f),c;if(null===f){for(;m<u.length;m++)null!==(f=d(i,u[m],s))&&(o=a(f,o,m),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);m<u.length;m++)null!==(v=h(f,i,m,u[m],s))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),o=a(v,o,m),null===l?c=v:l.sibling=v,l=v);return e&&f.forEach((function(e){return t(i,e)})),c}function v(i,u,s,c){var l=me(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,m=u,v=u=0,g=null,y=s.next();null!==m&&!y.done;v++,y=s.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),u=a(b,u,v),null===f?l=b:f.sibling=b,f=b,m=g}if(y.done)return n(i,m),l;if(null===m){for(;!y.done;v++,y=s.next())null!==(y=d(i,y.value,c))&&(u=a(y,u,v),null===f?l=y:f.sibling=y,f=y);return l}for(m=r(i,m);!y.done;v++,y=s.next())null!==(y=h(m,i,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),u=a(y,u,v),null===f?l=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ee:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(a.type===ne){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}break;default:if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=wa(e,c,a),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}a.type===ne?((r=js(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=_s(a.type,a.key,a.props,null,e.mode,s)).ref=wa(e,r,a),s.return=e,e=s)}return u(e);case te:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ts(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=As(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return m(e,r,a,s);if(me(a))return v(e,r,a,s);if(l&&Oa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ea=ka(!0),Sa=ka(!1),Ca={},_a={current:Ca},ja={current:Ca},Aa={current:Ca};function Ta(e){if(e===Ca)throw Error(o(174));return e}function Na(e,t){switch(ci(Aa,t),ci(ja,e),ci(_a,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pe(null,"");break;default:t=Pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}si(_a),ci(_a,t)}function Ra(){si(_a),si(ja),si(Aa)}function Da(e){Ta(Aa.current);var t=Ta(_a.current),n=Pe(t,e.type);t!==n&&(ci(ja,e),ci(_a,n))}function Ia(e){ja.current===e&&(si(_a),si(ja))}var Ma={current:0};function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Pa(e,t){return{responder:e,props:t}}var za=Y.ReactCurrentDispatcher,La=Y.ReactCurrentBatchConfig,Ba=0,Wa=null,Ua=null,Va=null,Ha=!1;function qa(){throw Error(o(321))}function Ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pr(e[n],t[n]))return!1;return!0}function $a(e,t,n,r,i,a){if(Ba=a,Wa=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,za.current=null===e||null===e.memoizedState?go:yo,e=n(r,i),t.expirationTime===Ba){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Va=Ua=null,t.updateQueue=null,za.current=bo,e=n(r,i)}while(t.expirationTime===Ba)}if(za.current=vo,t=null!==Ua&&null!==Ua.next,Ba=0,Va=Ua=Wa=null,Ha=!1,t)throw Error(o(300));return e}function Ka(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Va?Wa.memoizedState=Va=e:Va=Va.next=e,Va}function Xa(){if(null===Ua){var e=Wa.alternate;e=null!==e?e.memoizedState:null}else e=Ua.next;var t=null===Va?Wa.memoizedState:Va.next;if(null!==t)Va=t,Ua=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ua=e).memoizedState,baseState:Ua.baseState,baseQueue:Ua.baseQueue,queue:Ua.queue,next:null},null===Va?Wa.memoizedState=Va=e:Va=Va.next=e}return Va}function Ya(e,t){return"function"===typeof t?t(e):t}function Ja(e){var t=Xa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ua,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.expirationTime;if(l<Ba){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,l>Wa.expirationTime&&(Wa.expirationTime=l,os(l))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),as(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,Pr(r,t.memoizedState)||(To=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Za(e){var t=Xa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);Pr(a,t.memoizedState)||(To=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Qa(e){var t=Ka();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e}).dispatch=mo.bind(null,Wa,e),[t.memoizedState,e]}function eo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Wa.updateQueue)?(t={lastEffect:null},Wa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function to(){return Xa().memoizedState}function no(e,t,n,r){var i=Ka();Wa.effectTag|=e,i.memoizedState=eo(1|t,n,void 0,void 0===r?null:r)}function ro(e,t,n,r){var i=Xa();r=void 0===r?null:r;var a=void 0;if(null!==Ua){var o=Ua.memoizedState;if(a=o.destroy,null!==r&&Ga(r,o.deps))return void eo(t,n,a,r)}Wa.effectTag|=e,i.memoizedState=eo(1|t,n,a,r)}function io(e,t){return no(516,4,e,t)}function ao(e,t){return ro(516,4,e,t)}function oo(e,t){return ro(4,2,e,t)}function uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function so(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ro(4,2,uo.bind(null,t,e),n)}function co(){}function lo(e,t){return Ka().memoizedState=[e,void 0===t?null:t],e}function fo(e,t){var n=Xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function po(e,t){var n=Xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ho(e,t,n){var r=Bi();Ui(98>r?98:r,(function(){e(!0)})),Ui(97<r?97:r,(function(){var r=La.suspense;La.suspense=void 0===t?null:t;try{e(!1),n()}finally{La.suspense=r}}))}function mo(e,t,n){var r=Gu(),i=da.suspense;i={expirationTime:r=$u(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Wa||null!==a&&a===Wa)Ha=!0,i.expirationTime=Ba,Wa.expirationTime=Ba;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.eagerReducer=a,i.eagerState=u,Pr(u,o))return}catch(s){}Ku(e,r)}}var vo={readContext:ra,useCallback:qa,useContext:qa,useEffect:qa,useImperativeHandle:qa,useLayoutEffect:qa,useMemo:qa,useReducer:qa,useRef:qa,useState:qa,useDebugValue:qa,useResponder:qa,useDeferredValue:qa,useTransition:qa},go={readContext:ra,useCallback:lo,useContext:ra,useEffect:io,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,no(4,2,uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return no(4,2,e,t)},useMemo:function(e,t){var n=Ka();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ka();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=mo.bind(null,Wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ka().memoizedState=e},useState:Qa,useDebugValue:co,useResponder:Pa,useDeferredValue:function(e,t){var n=Qa(e),r=n[0],i=n[1];return io((function(){var n=La.suspense;La.suspense=void 0===t?null:t;try{i(e)}finally{La.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Qa(!1),n=t[0];return t=t[1],[lo(ho.bind(null,t,e),[t,e]),n]}},yo={readContext:ra,useCallback:fo,useContext:ra,useEffect:ao,useImperativeHandle:so,useLayoutEffect:oo,useMemo:po,useReducer:Ja,useRef:to,useState:function(){return Ja(Ya)},useDebugValue:co,useResponder:Pa,useDeferredValue:function(e,t){var n=Ja(Ya),r=n[0],i=n[1];return ao((function(){var n=La.suspense;La.suspense=void 0===t?null:t;try{i(e)}finally{La.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Ja(Ya),n=t[0];return t=t[1],[fo(ho.bind(null,t,e),[t,e]),n]}},bo={readContext:ra,useCallback:fo,useContext:ra,useEffect:ao,useImperativeHandle:so,useLayoutEffect:oo,useMemo:po,useReducer:Za,useRef:to,useState:function(){return Za(Ya)},useDebugValue:co,useResponder:Pa,useDeferredValue:function(e,t){var n=Za(Ya),r=n[0],i=n[1];return ao((function(){var n=La.suspense;La.suspense=void 0===t?null:t;try{i(e)}finally{La.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Za(Ya),n=t[0];return t=t[1],[fo(ho.bind(null,t,e),[t,e]),n]}},xo=null,wo=null,Oo=!1;function ko(e,t){var n=Es(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Eo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function So(e){if(Oo){var t=wo;if(t){var n=t;if(!Eo(e,t)){if(!(t=wn(n.nextSibling))||!Eo(e,t))return e.effectTag=-1025&e.effectTag|2,Oo=!1,void(xo=e);ko(xo,n)}xo=e,wo=wn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Oo=!1,xo=e}}function Co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xo=e}function _o(e){if(e!==xo)return!1;if(!Oo)return Co(e),Oo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yn(t,e.memoizedProps))for(t=wo;t;)ko(e,t),t=wn(t.nextSibling);if(Co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){wo=wn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}wo=null}}else wo=xo?wn(e.stateNode.nextSibling):null;return!0}function jo(){wo=xo=null,Oo=!1}var Ao=Y.ReactCurrentOwner,To=!1;function No(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ea(t,e.child,n,r)}function Ro(e,t,n,r,i){n=n.render;var a=t.ref;return na(t,i),r=$a(e,t,n,r,a,i),null===e||To?(t.effectTag|=1,No(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ko(e,t,i))}function Do(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ss(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_s(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Io(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Lr)(i,r)&&e.ref===t.ref)?Ko(e,t,a):(t.effectTag|=1,(e=Cs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Io(e,t,n,r,i,a){return null!==e&&Lr(e.memoizedProps,r)&&e.ref===t.ref&&(To=!1,i<a)?(t.expirationTime=e.expirationTime,Ko(e,t,a)):Fo(e,t,n,r,a)}function Mo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Fo(e,t,n,r,i){var a=mi(n)?pi:fi.current;return a=hi(t,a),na(t,i),n=$a(e,t,n,r,a,i),null===e||To?(t.effectTag|=1,No(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ko(e,t,i))}function Po(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(na(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ga(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ra(c):c=hi(t,c=mi(n)?pi:fi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ya(t,o,r,c),ia=!1;var d=t.memoizedState;o.state=d,la(t,r,o,i),s=t.memoizedState,u!==r||d!==s||di.current||ia?("function"===typeof l&&(ha(t,n,l,r),s=t.memoizedState),(u=ia||va(t,n,u,r,d,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,oa(e,t),u=t.memoizedProps,o.props=t.type===t.elementType?u:Ki(t.type,u),s=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ra(c):c=hi(t,c=mi(n)?pi:fi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ya(t,o,r,c),ia=!1,s=t.memoizedState,o.state=s,la(t,r,o,i),d=t.memoizedState,u!==r||s!==d||di.current||ia?("function"===typeof l&&(ha(t,n,l,r),d=t.memoizedState),(l=ia||va(t,n,u,r,s,d,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return zo(e,t,n,r,a,i)}function zo(e,t,n,r,i,a){Mo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&xi(t,n,!1),Ko(e,t,a);r=t.stateNode,Ao.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Ea(t,e.child,null,a),t.child=Ea(t,null,u,a)):No(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Lo(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Na(e,t.containerInfo)}var Bo,Wo,Uo,Vo={dehydrated:null,retryTime:0};function Ho(e,t,n){var r,i=t.mode,a=t.pendingProps,o=Ma.current,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),ci(Ma,1&o),null===e){if(void 0!==a.fallback&&So(t),u){if(u=a.fallback,(a=js(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=js(u,i,n,null)).return=t,a.sibling=n,t.memoizedState=Vo,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Sa(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,u){if(a=a.fallback,(n=Cs(e,e.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;return(i=Cs(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Vo,t.child=n,i}return n=Ea(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=a.fallback,(a=js(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=js(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=Vo,t.child=a,n}return t.memoizedState=null,t.child=Ea(t,e,a.children,n)}function qo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ta(e.return,t)}function Go(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function $o(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(No(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n);else if(19===e.tag)qo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Go(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Go(t,!0,n,null,a,t.lastEffect);break;case"together":Go(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ko(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&os(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Cs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Cs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yo(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(t.type)&&vi(),null;case 3:return Ra(),si(di),si(fi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!_o(t)||(t.effectTag|=4),null;case 5:Ia(t),n=Ta(Aa.current);var a=t.type;if(null!==e&&null!=t.stateNode)Wo(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ta(_a.current),_o(t)){r=t.stateNode,a=t.type;var u=t.memoizedProps;switch(r[En]=t,r[Sn]=u,a){case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(e=0;e<Ye.length;e++)$t(Ye[e],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"form":$t("reset",r),$t("submit",r);break;case"details":$t("toggle",r);break;case"input":ke(r,u),$t("invalid",r),sn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},$t("invalid",r),sn(n,"onChange");break;case"textarea":Ne(r,u),$t("invalid",r),sn(n,"onChange")}for(var s in an(a,u),e=null,u)if(u.hasOwnProperty(s)){var c=u[s];"children"===s?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):E.hasOwnProperty(s)&&null!=c&&sn(n,s)}switch(a){case"input":xe(r),Ce(r,u,!0);break;case"textarea":xe(r),De(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===un&&(e=Fe(a)),e===un?"script"===a?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(a,{is:r.is}):(e=s.createElement(a),"select"===a&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,a),e[En]=t,e[Sn]=r,Bo(e,t),t.stateNode=e,s=on(a,r),a){case"iframe":case"object":case"embed":$t("load",e),c=r;break;case"video":case"audio":for(c=0;c<Ye.length;c++)$t(Ye[c],e);c=r;break;case"source":$t("error",e),c=r;break;case"img":case"image":case"link":$t("error",e),$t("load",e),c=r;break;case"form":$t("reset",e),$t("submit",e),c=r;break;case"details":$t("toggle",e),c=r;break;case"input":ke(e,r),c=Oe(e,r),$t("invalid",e),sn(n,"onChange");break;case"option":c=je(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),$t("invalid",e),sn(n,"onChange");break;case"textarea":Ne(e,r),c=Te(e,r),$t("invalid",e),sn(n,"onChange");break;default:c=r}an(a,c);var l=c;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?nn(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&Le(e,f):"children"===u?"string"===typeof f?("textarea"!==a||""!==f)&&Be(e,f):"number"===typeof f&&Be(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(E.hasOwnProperty(u)?null!=f&&sn(n,u):null!=f&&J(e,u,f,s))}switch(a){case"input":xe(e),Ce(e,r,!1);break;case"textarea":xe(e),De(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ae(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=cn)}gn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Uo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ta(Aa.current),Ta(_a.current),_o(t)?(n=t.stateNode,r=t.memoizedProps,n[En]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[En]=t,t.stateNode=n)}return null;case 13:return si(Ma),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&_o(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?_u===xu&&(_u=wu):(_u!==xu&&_u!==wu||(_u=Ou),0!==Ru&&null!==Eu&&(Ds(Eu,Cu),Is(Eu,Ru)))),(n||r)&&(t.effectTag|=4),null);case 4:return Ra(),null;case 10:return ea(t),null;case 17:return mi(t.type)&&vi(),null;case 19:if(si(Ma),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(u=r.rendering)){if(a)Xo(r,!1);else if(_u!==xu||null!==e&&0!==(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=Fa(u))){for(t.effectTag|=64,Xo(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)u=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=u,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,u=e.dependencies,a.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return ci(Ma,1&Ma.current|2),t.child}u=u.sibling}}else{if(!a)if(null!==(e=Fa(u))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Xo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Li()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,Xo(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Li()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Li(),n.sibling=null,t=Ma.current,ci(Ma,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function Jo(e){switch(e.tag){case 1:mi(e.type)&&vi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ra(),si(di),si(fi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Ia(e),null;case 13:return si(Ma),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return si(Ma),null;case 4:return Ra(),null;case 10:return ea(e),null;default:return null}}function Zo(e,t){return{value:e,source:t,stack:ge(t)}}Bo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u,s,c=t.stateNode;switch(Ta(_a.current),e=null,n){case"input":o=Oe(c,o),r=Oe(c,r),e=[];break;case"option":o=je(c,o),r=je(c,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Te(c,o),r=Te(c,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(c.onclick=cn)}for(u in an(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u)for(s in c=o[u])c.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(E.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(e||(e=[]),e.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(u,l)):"children"===u?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(E.hasOwnProperty(u)?(null!=l&&sn(a,u),e||c===l||(e=[])):(e=e||[]).push(u,l))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Uo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Qo="function"===typeof WeakSet?WeakSet:Set;function eu(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ge(n)),null!==n&&ve(n.type),t=t.value,null!==e&&1===e.tag&&ve(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function tu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){ys(e,n)}else t.current=null}function nu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ki(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void iu(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Ki(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&fa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&gn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))));case 19:case 17:case 20:case 21:return}throw Error(o(163))}function ou(e,t,n){switch("function"===typeof Os&&Os(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Ui(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){ys(i,a)}}e=e.next}while(e!==r)}))}break;case 1:tu(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){ys(e,n)}}(t,n);break;case 5:tu(t);break;case 4:lu(e,t,n)}}function uu(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&uu(t)}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function cu(e){e:{for(var t=e.return;null!==t;){if(su(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Be(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||su(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function lu(e,t,n){for(var r,i,a=t,u=!1;;){if(!u){u=a.return;e:for(;;){if(null===u)throw Error(o(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,l=n,f=c;;)if(ou(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ou(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function fu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ru(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Sn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ee(n,r),on(e,i),t=on(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?nn(n,s):"dangerouslySetInnerHTML"===u?Le(n,s):"children"===u?Be(n,s):J(n,u,s,t)}switch(e){case"input":Se(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ae(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ae(n,!!r.multiple,r.defaultValue,!0):Ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Iu=Li()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=tn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void du(t);case 19:return void du(t);case 17:return}throw Error(o(163))}function du(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach((function(t){var r=xs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var pu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ua(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fu||(Fu=!0,Pu=r),eu(e,t)},n}function mu(e,t,n){(n=ua(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return eu(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===zu?zu=new Set([this]):zu.add(this),eu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var vu,gu=Math.ceil,yu=Y.ReactCurrentDispatcher,bu=Y.ReactCurrentOwner,xu=0,wu=3,Ou=4,ku=0,Eu=null,Su=null,Cu=0,_u=xu,ju=null,Au=1073741823,Tu=1073741823,Nu=null,Ru=0,Du=!1,Iu=0,Mu=null,Fu=!1,Pu=null,zu=null,Lu=!1,Bu=null,Wu=90,Uu=null,Vu=0,Hu=null,qu=0;function Gu(){return 0!==(48&ku)?1073741821-(Li()/10|0):0!==qu?qu:qu=1073741821-(Li()/10|0)}function $u(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Bi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(16&ku))return Cu;if(null!==n)e=$i(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=$i(e,150,100);break;case 97:case 96:e=$i(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Eu&&e===Cu&&--e,e}function Ku(e,t){if(50<Vu)throw Vu=0,Hu=null,Error(o(185));if(null!==(e=Xu(e,t))){var n=Bi();1073741823===t?0!==(8&ku)&&0===(48&ku)?Qu(e):(Ju(e),0===ku&&qi()):Ju(e),0===(4&ku)||98!==n&&99!==n||(null===Uu?Uu=new Map([[e,t]]):(void 0===(n=Uu.get(e))||n>t)&&Uu.set(e,t))}}function Xu(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Eu===i&&(os(t),_u===Ou&&Ds(i,Cu)),Is(i,t)),i}function Yu(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Rs(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Ju(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Hi(Qu.bind(null,e));else{var t=Yu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Gu();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ri&&ki(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Hi(Qu.bind(null,e)):Vi(r,Zu.bind(null,e),{timeout:10*(1073741821-t)-Li()}),e.callbackNode=t}}}function Zu(e,t){if(qu=0,t)return Ms(e,t=Gu()),Ju(e),null;var n=Yu(e);if(0!==n){if(t=e.callbackNode,0!==(48&ku))throw Error(o(327));if(ms(),e===Eu&&n===Cu||ns(e,n),null!==Su){var r=ku;ku|=16;for(var i=is();;)try{ss();break}catch(s){rs(e,s)}if(Qi(),ku=r,yu.current=i,1===_u)throw t=ju,ns(e,n),Ds(e,n),Ju(e),t;if(null===Su)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=_u,Eu=null,r){case xu:case 1:throw Error(o(345));case 2:Ms(e,2<n?2:n);break;case wu:if(Ds(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fs(i)),1073741823===Au&&10<(i=Iu+500-Li())){if(Du){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,ns(e,n);break}}if(0!==(a=Yu(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=bn(ds.bind(null,e),i);break}ds(e);break;case Ou:if(Ds(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=fs(i)),Du&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,ns(e,n);break}if(0!==(i=Yu(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Tu?r=10*(1073741821-Tu)-Li():1073741823===Au?r=0:(r=10*(1073741821-Au)-5e3,0>(r=(i=Li())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gu(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=bn(ds.bind(null,e),r);break}ds(e);break;case 5:if(1073741823!==Au&&null!==Nu){a=Au;var u=Nu;if(0>=(r=0|u.busyMinDurationMs)?r=0:(i=0|u.busyDelayMs,r=(a=Li()-(10*(1073741821-a)-(0|u.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Ds(e,n),e.timeoutHandle=bn(ds.bind(null,e),r);break}}ds(e);break;default:throw Error(o(329))}if(Ju(e),e.callbackNode===t)return Zu.bind(null,e)}}return null}function Qu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&ku))throw Error(o(327));if(ms(),e===Eu&&t===Cu||ns(e,t),null!==Su){var n=ku;ku|=16;for(var r=is();;)try{us();break}catch(i){rs(e,i)}if(Qi(),ku=n,yu.current=r,1===_u)throw n=ju,ns(e,t),Ds(e,t),Ju(e),n;if(null!==Su)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Eu=null,ds(e),Ju(e)}return null}function es(e,t){var n=ku;ku|=1;try{return e(t)}finally{0===(ku=n)&&qi()}}function ts(e,t){var n=ku;ku&=-2,ku|=8;try{return e(t)}finally{0===(ku=n)&&qi()}}function ns(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,xn(n)),null!==Su)for(n=Su.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Ra(),si(di),si(fi);break;case 5:Ia(r);break;case 4:Ra();break;case 13:case 19:si(Ma);break;case 10:ea(r)}n=n.return}Eu=e,Su=Cs(e.current,null),Cu=t,_u=xu,ju=null,Tu=Au=1073741823,Nu=null,Ru=0,Du=!1}function rs(e,t){for(;;){try{if(Qi(),za.current=vo,Ha)for(var n=Wa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ba=0,Va=Ua=Wa=null,Ha=!1,null===Su||null===Su.return)return _u=1,ju=t,Su=null;e:{var i=e,a=Su.return,o=Su,u=t;if(t=Cu,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var l=0!==(1&Ma.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var h=f.memoizedProps;d=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!l)}}if(d){var m=f.updateQueue;if(null===m){var v=new Set;v.add(s),f.updateQueue=v}else m.add(s);if(0===(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var g=ua(1073741823,null);g.tag=2,sa(o,g)}o.expirationTime=1073741823;break e}u=void 0,o=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new pu,u=new Set,y.set(s,u)):void 0===(u=y.get(s))&&(u=new Set,y.set(s,u)),!u.has(o)){u.add(o);var b=bs.bind(null,i,s,o);s.then(b,b)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);u=Error((ve(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ge(o))}5!==_u&&(_u=2),u=Zo(u,o),f=a;do{switch(f.tag){case 3:s=u,f.effectTag|=4096,f.expirationTime=t,ca(f,hu(f,s,t));break e;case 1:s=u;var x=f.type,w=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===zu||!zu.has(w)))){f.effectTag|=4096,f.expirationTime=t,ca(f,mu(f,s,t));break e}}f=f.return}while(null!==f)}Su=ls(Su)}catch(O){t=O;continue}break}}function is(){var e=yu.current;return yu.current=vo,null===e?vo:e}function as(e,t){e<Au&&2<e&&(Au=e),null!==t&&e<Tu&&2<e&&(Tu=e,Nu=t)}function os(e){e>Ru&&(Ru=e)}function us(){for(;null!==Su;)Su=cs(Su)}function ss(){for(;null!==Su&&!Di();)Su=cs(Su)}function cs(e){var t=vu(e.alternate,e,Cu);return e.memoizedProps=e.pendingProps,null===t&&(t=ls(e)),bu.current=null,t}function ls(e){Su=e;do{var t=Su.alternate;if(e=Su.return,0===(2048&Su.effectTag)){if(t=Yo(t,Su,Cu),1===Cu||1!==Su.childExpirationTime){for(var n=0,r=Su.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Su.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Su.firstEffect),null!==Su.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Su.firstEffect),e.lastEffect=Su.lastEffect),1<Su.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Su:e.firstEffect=Su,e.lastEffect=Su))}else{if(null!==(t=Jo(Su)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Su.sibling))return t;Su=e}while(null!==Su);return _u===xu&&(_u=5),null}function fs(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function ds(e){var t=Bi();return Ui(99,ps.bind(null,e,t)),null}function ps(e,t){do{ms()}while(null!==Bu);if(0!==(48&ku))throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=fs(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Eu&&(Su=Eu=null,Cu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=ku;ku|=32,bu.current=null,mn=Gt;var u=pn();if(hn(u)){if("selectionStart"in u)var s={start:u.selectionStart,end:u.selectionEnd};else e:{var c=(s=(s=u.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(c&&0!==c.rangeCount){s=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch(C){s=null;break e}var d=0,p=-1,h=-1,m=0,v=0,g=u,y=null;t:for(;;){for(var b;g!==s||0!==l&&3!==g.nodeType||(p=d+l),g!==f||0!==c&&3!==g.nodeType||(h=d+c),3===g.nodeType&&(d+=g.nodeValue.length),null!==(b=g.firstChild);)y=g,g=b;for(;;){if(g===u)break t;if(y===s&&++m===l&&(p=d),y===f&&++v===c&&(h=d),null!==(b=g.nextSibling))break;y=(g=y).parentNode}g=b}s=-1===p||-1===h?null:{start:p,end:h}}else s=null}s=s||{start:0,end:0}}else s=null;vn={activeElementDetached:null,focusedElem:u,selectionRange:s},Gt=!1,Mu=i;do{try{hs()}catch(C){if(null===Mu)throw Error(o(330));ys(Mu,C),Mu=Mu.nextEffect}}while(null!==Mu);Mu=i;do{try{for(u=e,s=t;null!==Mu;){var x=Mu.effectTag;if(16&x&&Be(Mu.stateNode,""),128&x){var w=Mu.alternate;if(null!==w){var O=w.ref;null!==O&&("function"===typeof O?O(null):O.current=null)}}switch(1038&x){case 2:cu(Mu),Mu.effectTag&=-3;break;case 6:cu(Mu),Mu.effectTag&=-3,fu(Mu.alternate,Mu);break;case 1024:Mu.effectTag&=-1025;break;case 1028:Mu.effectTag&=-1025,fu(Mu.alternate,Mu);break;case 4:fu(Mu.alternate,Mu);break;case 8:lu(u,l=Mu,s),uu(l)}Mu=Mu.nextEffect}}catch(C){if(null===Mu)throw Error(o(330));ys(Mu,C),Mu=Mu.nextEffect}}while(null!==Mu);if(O=vn,w=pn(),x=O.focusedElem,s=O.selectionRange,w!==x&&x&&x.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==s&&hn(x)&&(w=s.start,void 0===(O=s.end)&&(O=w),"selectionStart"in x?(x.selectionStart=w,x.selectionEnd=Math.min(O,x.value.length)):(O=(w=x.ownerDocument||document)&&w.defaultView||window).getSelection&&(O=O.getSelection(),l=x.textContent.length,u=Math.min(s.start,l),s=void 0===s.end?u:Math.min(s.end,l),!O.extend&&u>s&&(l=s,s=u,u=l),l=dn(x,u),f=dn(x,s),l&&f&&(1!==O.rangeCount||O.anchorNode!==l.node||O.anchorOffset!==l.offset||O.focusNode!==f.node||O.focusOffset!==f.offset)&&((w=w.createRange()).setStart(l.node,l.offset),O.removeAllRanges(),u>s?(O.addRange(w),O.extend(f.node,f.offset)):(w.setEnd(f.node,f.offset),O.addRange(w))))),w=[];for(O=x;O=O.parentNode;)1===O.nodeType&&w.push({element:O,left:O.scrollLeft,top:O.scrollTop});for("function"===typeof x.focus&&x.focus(),x=0;x<w.length;x++)(O=w[x]).element.scrollLeft=O.left,O.element.scrollTop=O.top}Gt=!!mn,vn=mn=null,e.current=n,Mu=i;do{try{for(x=e;null!==Mu;){var k=Mu.effectTag;if(36&k&&au(x,Mu.alternate,Mu),128&k){w=void 0;var E=Mu.ref;if(null!==E){var S=Mu.stateNode;switch(Mu.tag){case 5:w=S;break;default:w=S}"function"===typeof E?E(w):E.current=w}}Mu=Mu.nextEffect}}catch(C){if(null===Mu)throw Error(o(330));ys(Mu,C),Mu=Mu.nextEffect}}while(null!==Mu);Mu=null,Ii(),ku=a}else e.current=n;if(Lu)Lu=!1,Bu=e,Wu=t;else for(Mu=i;null!==Mu;)t=Mu.nextEffect,Mu.nextEffect=null,Mu=t;if(0===(t=e.firstPendingTime)&&(zu=null),1073741823===t?e===Hu?Vu++:(Vu=0,Hu=e):Vu=0,"function"===typeof ws&&ws(n.stateNode,r),Ju(e),Fu)throw Fu=!1,e=Pu,Pu=null,e;return 0!==(8&ku)||qi(),null}function hs(){for(;null!==Mu;){var e=Mu.effectTag;0!==(256&e)&&nu(Mu.alternate,Mu),0===(512&e)||Lu||(Lu=!0,Vi(97,(function(){return ms(),null}))),Mu=Mu.nextEffect}}function ms(){if(90!==Wu){var e=97<Wu?97:Wu;return Wu=90,Ui(e,vs)}}function vs(){if(null===Bu)return!1;var e=Bu;if(Bu=null,0!==(48&ku))throw Error(o(331));var t=ku;for(ku|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ru(5,n),iu(5,n)}}catch(r){if(null===e)throw Error(o(330));ys(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return ku=t,qi(),!0}function gs(e,t,n){sa(e,t=hu(e,t=Zo(n,t),1073741823)),null!==(e=Xu(e,1073741823))&&Ju(e)}function ys(e,t){if(3===e.tag)gs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){gs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zu||!zu.has(r))){sa(n,e=mu(n,e=Zo(t,e),1073741823)),null!==(n=Xu(n,1073741823))&&Ju(n);break}}n=n.return}}function bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Eu===e&&Cu===n?_u===Ou||_u===wu&&1073741823===Au&&Li()-Iu<500?ns(e,Cu):Du=!0:Rs(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Ju(e)))}function xs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=$u(t=Gu(),e,null)),null!==(e=Xu(e,t))&&Ju(e)}vu=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||di.current)To=!0;else{if(r<n){switch(To=!1,t.tag){case 3:Lo(t),jo();break;case 5:if(Da(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:mi(t.type)&&bi(t);break;case 4:Na(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,ci(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ho(e,t,n):(ci(Ma,1&Ma.current),null!==(t=Ko(e,t,n))?t.sibling:null);ci(Ma,1&Ma.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return $o(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ci(Ma,Ma.current),!r)return null}return Ko(e,t,n)}To=!1}}else To=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=hi(t,fi.current),na(t,n),i=$a(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,aa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ha(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternalFiber=t,ba(t,r,e,n),t=zo(null,t,r,!0,a,n)}else t.tag=0,No(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ss(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===fe)return 14}return 2}(i),e=Ki(i,e),a){case 0:t=Fo(null,t,i,e,n);break e;case 1:t=Po(null,t,i,e,n);break e;case 11:t=Ro(null,t,i,e,n);break e;case 14:t=Do(null,t,i,Ki(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Fo(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Po(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:if(Lo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,oa(e,t),la(t,r,null,n),(r=t.memoizedState.element)===i)jo(),t=Ko(e,t,n);else{if((i=t.stateNode.hydrate)&&(wo=wn(t.stateNode.containerInfo.firstChild),xo=t,i=Oo=!0),i)for(n=Sa(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else No(e,t,r,n),jo();t=t.child}return t;case 5:return Da(t),null===e&&So(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,yn(r,i)?u=null:null!==a&&yn(r,a)&&(t.effectTag|=16),Mo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(No(e,t,u,n),t=t.child),t;case 6:return null===e&&So(t),null;case 13:return Ho(e,t,n);case 4:return Na(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ea(t,null,r,n):No(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ro(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(ci(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=Pr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!di.current){t=Ko(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=ua(n,null)).tag=2,sa(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),ta(s.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}No(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,na(t,n),r=r(i=ra(i,a.unstable_observedBits)),t.effectTag|=1,No(e,t,r,n),t.child;case 14:return a=Ki(i=t.type,t.pendingProps),Do(e,t,i,a=Ki(i.type,a),r,n);case 15:return Io(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,na(t,n),ga(t,r,i),ba(t,r,i,n),zo(null,t,r,!0,e,n);case 19:return $o(e,t,n)}throw Error(o(156,t.tag))};var ws=null,Os=null;function ks(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Es(e,t,n,r){return new ks(e,t,n,r)}function Ss(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Cs(e,t){var n=e.alternate;return null===n?((n=Es(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _s(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ss(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case ne:return js(n.children,i,a,t);case ue:u=8,i|=7;break;case re:u=8,i|=1;break;case ie:return(e=Es(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ce:return(e=Es(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=a,e;case le:return(e=Es(19,n,t,i)).elementType=le,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:u=10;break e;case oe:u=9;break e;case se:u=11;break e;case fe:u=14;break e;case de:u=16,r=null;break e;case pe:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Es(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function js(e,t,n,r){return(e=Es(7,e,r,t)).expirationTime=n,e}function As(e,t,n){return(e=Es(6,e,null,t)).expirationTime=n,e}function Ts(e,t,n){return(t=Es(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ns(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Rs(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Ds(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Is(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ms(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Fs(e,t,n,r){var i=t.current,a=Gu(),u=da.suspense;a=$u(a,i,u);e:if(n){t:{if(Qe(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=yi(n,c,s);break e}}n=s}else n=li;return null===t.context?t.context=n:t.pendingContext=n,(t=ua(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),sa(i,t),Ku(i,a),a}function Ps(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function zs(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Ls(e,t){zs(e,t),(e=e.alternate)&&zs(e,t)}function Bs(e,t,n){var r=new Ns(e,t,n=null!=n&&!0===n.hydrate),i=Es(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,aa(i),e[Cn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);Ct.forEach((function(e){ht(e,t,n)})),_t.forEach((function(e){ht(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Ws(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Us(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=Ps(o);u.call(e)}}Fs(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Bs(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=Ps(o);s.call(e)}}ts((function(){Fs(t,o,e,i)}))}return Ps(o)}function Vs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Hs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ws(t))throw Error(o(200));return Vs(e,t,null,n)}Bs.prototype.render=function(e){Fs(e,this._internalRoot,null,null)},Bs.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Fs(null,e,null,(function(){t[Cn]=null}))},mt=function(e){if(13===e.tag){var t=$i(Gu(),150,100);Ku(e,t),Ls(e,t)}},vt=function(e){13===e.tag&&(Ku(e,3),Ls(e,3))},gt=function(e){if(13===e.tag){var t=Gu();Ku(e,t=$u(t,e,null)),Ls(e,t)}},j=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Tn(r);if(!i)throw Error(o(90));we(r),Se(r,i)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&Ae(e,!!n.multiple,t,!1)}},I=es,M=function(e,t,n,r,i){var a=ku;ku|=4;try{return Ui(98,e.bind(null,t,n,r,i))}finally{0===(ku=a)&&qi()}},F=function(){0===(49&ku)&&(function(){if(null!==Uu){var e=Uu;Uu=null,e.forEach((function(e,t){Ms(t,e),Ju(t)})),qi()}}(),ms())},P=function(e,t){var n=ku;ku|=2;try{return e(t)}finally{0===(ku=n)&&qi()}};var qs={Events:[jn,An,Tn,C,k,Pn,function(e){it(e,Fn)},R,D,Jt,ut,ms,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);ws=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Os=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:_n,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qs,t.createPortal=Hs,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&ku))throw Error(o(187));var n=ku;ku|=1;try{return Ui(99,e.bind(null,t))}finally{ku=n,qi()}},t.hydrate=function(e,t,n){if(!Ws(t))throw Error(o(200));return Us(null,e,t,!0,n)},t.render=function(e,t,n){if(!Ws(t))throw Error(o(200));return Us(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ws(e))throw Error(o(40));return!!e._reactRootContainer&&(ts((function(){Us(null,null,e,!1,(function(){e._reactRootContainer=null,e[Cn]=null}))})),!0)},t.unstable_batchedUpdates=es,t.unstable_createPortal=function(e,t){return Hs(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ws(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return Us(e,t,n,!1,r)},t.version="16.13.1"},function(e,t,n){"use strict";e.exports=n(348)},function(e,t,n){"use strict";var r,i,a,o,u;if("undefined"===typeof window||"function"!==typeof MessageChannel){var s=null,c=null,l=function e(){if(null!==s)try{var n=t.unstable_now();s(!0,n),s=null}catch(r){throw setTimeout(e,0),r}},f=Date.now();t.unstable_now=function(){return Date.now()-f},r=function(e){null!==s?setTimeout(r,0,e):(s=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},a=function(){clearTimeout(c)},o=function(){return!1},u=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,h=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof d&&"function"===typeof d.now)t.unstable_now=function(){return d.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var y=!1,b=null,x=-1,w=5,O=0;o=function(){return t.unstable_now()>=O},u=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,E=k.port2;k.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();O=e+w;try{b(!0,e)?E.postMessage(null):(y=!1,b=null)}catch(n){throw E.postMessage(null),n}}else y=!1},r=function(e){b=e,y||(y=!0,E.postMessage(null))},i=function(e,n){x=h((function(){e(t.unstable_now())}),n)},a=function(){m(x),x=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<j(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>j(o,n))void 0!==s&&0>j(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>j(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function j(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],T=[],N=1,R=null,D=3,I=!1,M=!1,F=!1;function P(e){for(var t=C(T);null!==t;){if(null===t.callback)_(T);else{if(!(t.startTime<=e))break;_(T),t.sortIndex=t.expirationTime,S(A,t)}t=C(T)}}function z(e){if(F=!1,P(e),!M)if(null!==C(A))M=!0,r(L);else{var t=C(T);null!==t&&i(z,t.startTime-e)}}function L(e,n){M=!1,F&&(F=!1,a()),I=!0;var r=D;try{for(P(n),R=C(A);null!==R&&(!(R.expirationTime>n)||e&&!o());){var u=R.callback;if(null!==u){R.callback=null,D=R.priorityLevel;var s=u(R.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?R.callback=s:R===C(A)&&_(A),P(n)}else _(A);R=C(A)}if(null!==R)var c=!0;else{var l=C(T);null!==l&&i(z,l.startTime-n),c=!1}return c}finally{R=null,D=r,I=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var W=u;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||I||(M=!0,r(L))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return C(A)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=W,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_scheduleCallback=function(e,n,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:B(e)}else o=B(e),s=u;return e={id:N++,callback:n,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,S(T,e),null===C(A)&&e===C(T)&&(F?a():F=!0,i(z,s-u))):(e.sortIndex=o,S(A,e),M||I||(M=!0,r(L))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();P(e);var n=C(A);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}}},,function(e,t,n){"use strict";var r=n(351);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function O(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case d:case o:case s:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case g:case v:case c:return e;default:return t}}case a:return t}}}function k(e){return O(e)===d}t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=o,t.Lazy=g,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=u,t.Suspense=h,t.isAsyncMode=function(e){return k(e)||O(e)===f},t.isConcurrentMode=k,t.isContextConsumer=function(e){return O(e)===l},t.isContextProvider=function(e){return O(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return O(e)===p},t.isFragment=function(e){return O(e)===o},t.isLazy=function(e){return O(e)===g},t.isMemo=function(e){return O(e)===v},t.isPortal=function(e){return O(e)===a},t.isProfiler=function(e){return O(e)===s},t.isStrictMode=function(e){return O(e)===u},t.isSuspense=function(e){return O(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===u||e===h||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===b||e.$$typeof===x||e.$$typeof===w||e.$$typeof===y)},t.typeOf=O},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n,r){var i=t&&t.prototype instanceof l?t:l,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===c)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var c={};function l(){}function f(){}function d(){}var p={};p[i]=function(){return this};var h=Object.getPrototypeOf,m=h&&h(h(k([])));m&&m!==t&&n.call(m,i)&&(p=m);var v=d.prototype=l.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,u){var c=s(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"===typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(c.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=v.constructor=d,d.constructor=f,d[o]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),y.prototype[a]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new y(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(v),v[o]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=(r=o)&&r.__esModule?r:{default:r},s=n(356);function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=function(e){function t(){var e,n,r;f(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.isFileDialogActive=!1,r.composeHandlers=function(e){return r.props.disabled?null:e},r.onDocumentDrop=function(e){r.node&&r.node.contains(e.target)||(e.preventDefault(),r.dragTargets=[])},r.onDragStart=function(e){var t=r.props.onDragStart;t&&t.call(r,e)},r.onDragEnter=function(e){var t=r.props.onDragEnter;e.preventDefault(),-1===r.dragTargets.indexOf(e.target)&&r.dragTargets.push(e.target);(0,s.getDataTransferItems)(e);t&&t.call(r,e)},r.onDragOver=function(e){var t=r.props.onDragOver;e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&t.call(r,e),!1},r.onDragLeave=function(e){var t=r.props.onDragLeave;e.preventDefault(),r.dragTargets=r.dragTargets.filter((function(t){return t!==e.target&&r.node.contains(t)})),r.dragTargets.length>0||t&&t.call(r,e)},r.onDrop=function(e){var t=r.props,n=t.onDrop,i=t.onDropAccepted,a=t.onDropRejected,o=t.multiple,u=t.disablePreview,c=t.minSize,f=t.maxSize,d=t.accept,p=(0,s.getDataTransferItems)(e),h=[],m=[];e.preventDefault(),0!==p.length?(r.dragTargets=[],r.isFileDialogActive=!1,p.forEach((function(e){if(!u)try{e.preview=window.URL.createObjectURL(e)}catch(t){0}(0,s.fileAccepted)(e,d)&&(0,s.fileMatchSize)(e,f,c)?h.push(e):m.push(e)})),o||m.push.apply(m,l(h.splice(1))),n&&n.call(r,h,m,[],e),m.length>0&&a&&a.call(r,m,e),h.length>0&&i&&i.call(r,h,e)):r.onLink(e)},r.onClick=function(e){var t=r.props,n=t.onClick;t.disableClick||(e.stopPropagation(),n&&n.call(r,e),setTimeout(r.open.bind(r),0))},r.onInputElementClick=function(e){var t=r.props.inputProps;e.stopPropagation(),t&&t.onClick&&t.onClick()},r.onFileDialogCancel=function(){var e=r.props.onFileDialogCancel,t=r.fileInputEl,n=r.isFileDialogActive;e&&n&&setTimeout((function(){t.files.length||(n=!1,e())}),300)},r.setRef=function(e){r.node=e},r.setRefs=function(e){r.fileInputEl=e},r.onLink=function(e){var t=r.props,n=t.onDrop,i=t.accept;if(i){var a=i.match(/(\.[^.]+)(?=[,]|$)/gi);if(a){var o="(https://|http://)((?!http).)*("+a.join("|")+")",u=new RegExp(o,"gi"),s=[];if(e.dataTransfer){var c=decodeURIComponent(e.dataTransfer.getData("text/uri-list")).match(u),f=e.dataTransfer.getData("text/html").match(u);c?s=[].concat(l(c)):f&&(s=[].concat(l(f.filter((function(e){return-1===e.indexOf('"')})).map((function(e){return decodeURIComponent(e)})))))}else s=[].concat(l(decodeURIComponent(e.target.value).match(u)));n&&n([],[],s,e)}else n&&n([],[],[],e)}else n&&n([],[],[],e)},d(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",s.onDocumentDragOver,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),document.body.onfocus=this.onFileDialogCancel}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",s.onDocumentDragOver),document.removeEventListener("drop",this.onDocumentDrop)),this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),document.body.onfocus=null}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.children,r=e.disabled,a=e.multiple,o=c(e,["accept","children","disabled","multiple"]),l=(o.preventDropOnDocument,o.disablePreview,o.disableClick,o.maxSize,o.minSize,o.inputProps,o.onDropAccepted,o.onDropRejected,o.onFileDialogCancel,c(o,["preventDropOnDocument","disablePreview","disableClick","maxSize","minSize","inputProps","onDropAccepted","onDropRejected","onFileDialogCancel"]));return u.default.createElement("div",i({},l,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":r}),n,u.default.createElement("input",{disabled:r,accept:t,type:"file",style:{display:"none"},multiple:s.supportMultiple&&a,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"}))}}]),t}(o.Component);p.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,multiple:!0,maxSize:1/0,minSize:0},t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataTransferItems=function(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;if(n.files&&n.files.length)t=n.files;else if(n.items&&n.items.length)return Array.prototype.slice.call(n.items).filter((function(e){return"file"===e.kind}))}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)},t.fileAccepted=r,t.fileMatchSize=function(e,t,n){return e.size<=t&&e.size>=n},t.allFilesAccepted=function(e,t){return e.every((function(e){return r(e,t)}))},t.onDocumentDragOver=function(e){e.preventDefault()};t.supportMultiple="undefined"===typeof document||!document||!document.createElement||"multiple"in document.createElement("input");function r(e,t){return"application/x-moz-file"===e.type||function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=e.type||"",a=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):/\/\*$/.test(t)?a===t.replace(/\/.*$/,""):i===t}))}return!0}(e,t)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],u=r[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,u)),l=0,f=u>0?o-4:o;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===u&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===u&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,u=n-i;o<u;o+=16383)a.push(l(e,o,o+16383>u?u:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=o.length;u<s;++u)r[u]=o[u],i[o.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,a,o=[],u=t;u<n;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,u=8*i-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,a=p&(1<<-l)-1,p>>=-l,l+=u;l>0;a=256*a+e[t+f],f+=d,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=d,l-=8);if(0===a)a=1-c;else{if(a===s)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=c}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,u,s,c=8*a-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),(t+=o+f>=1?d/s:d*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=l?(u=0,o=l):o+f>=1?(u=(t*s-1)*Math.pow(2,i),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&u,p+=h,u/=256,i-=8);for(o=o<<i|u,c+=i;c>0;e[n+p]=255&o,p+=h,o/=256,c-=8);e[n+p-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(361),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(53))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,a={},o=!1,u=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;r=function(t){var n=u.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return a[i]=o,r(i),i++},s.clearImmediate=c}function c(e){delete a[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=a[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{c(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(53),n(206))},,,,,,,function(e,t,n){"use strict";var r=n(11),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(94)),u=n(68),s=n(54);t.barchart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var a,f,d,p,h,m,v,g,y,b,x,w,O,k,E,S;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=s.getDrawArea(e),f=t,d=Object.assign({},c,n),!l.has(a)){r.next=13;break}if(p=l.get(a),!s.shallowEquals(d,p.lastOptions)){r.next=13;break}return r.next=8,s.nextFrame();case 8:return h=p.view,m=h.changeset().remove((function(){return!0})).insert(f),r.next=12,h.change("values",m).runAsync();case 12:return r.abrupt("return");case 13:return v=d.xLabel,g=d.yLabel,y=d.xType,b=d.yType,x=null,null!=v&&(x={title:v}),w=null,null!=g&&(w={title:g}),O={actions:!1,mode:"vega-lite",defaultStyle:!1},k=null!=d.color?Array.isArray(d.color)?{field:"index",type:"nominal",scale:{range:d.color}}:{value:d.color}:{value:"#4C78A0"},E={width:d.width||u.getDefaultWidth(a),height:d.height||u.getDefaultHeight(a),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:d.fontSize,titleFontSize:d.fontSize},text:{fontSize:d.fontSize},legend:{labelFontSize:d.fontSize,titleFontSize:d.fontSize}},data:{values:f,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:y,axis:x},y:{field:"value",type:b,axis:w},color:k}},r.next=23,s.nextFrame();case 23:return r.next=25,o.default(a,E,O);case 25:S=r.sent,l.set(a,{view:S.view,lastOptions:d});case 27:case"end":return r.stop()}}),i)})))};var c={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},l=new Map},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleSheet=f;var r,i=n(115),a=(r=i)&&r.__esModule?r:{default:r};function o(e){return e[e.length-1]}function u(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}var s="undefined"!==typeof window,c=function(){if(s){var e=document.createElement("div");return e.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length}}();function l(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-glamor",""),e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.speedy,n=void 0===t||t,r=e.maxLength,i=void 0===r?s&&c?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}(0,a.default)(f.prototype,{getSheet:function(){return u(o(this.tags))},inject:function(){var e=this;if(this.injected)throw new Error("already injected stylesheet!");s?this.tags[0]=l():this.sheet={cssRules:[],insertRule:function(t){e.sheet.cssRules.push({cssText:t})}},this.injected=!0},speedy:function(e){if(0!==this.ctr)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+e+") earlier in your app, or call flush() before speedy("+e+")");this.isSpeedy=!!e},_insert:function(e){try{var t=this.getSheet();t.insertRule(e,-1!==e.indexOf("@import")?0:t.cssRules.length)}catch(n){0}},insert:function(e){if(s)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(e);else if(-1!==e.indexOf("@import")){var t=o(this.tags);t.insertBefore(document.createTextNode(e),t.firstChild)}else o(this.tags).appendChild(document.createTextNode(e));else this.sheet.insertRule(e,-1!==e.indexOf("@import")?0:this.sheet.cssRules.length);return this.ctr++,s&&this.ctr%this.maxLength===0&&this.tags.push(l()),this.ctr-1},delete:function(e){return this.replace(e,"")},flush:function(){s?(this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!s)return this.sheet.cssRules;var e=[];return this.tags.forEach((function(t){return e.splice.apply(e,[e.length,0].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array.from(u(t).cssRules))))})),e}})},function(e,t,n){"use strict";var r=n(371),i=/^-ms-/;e.exports=function(e){return r(e.replace(i,"ms-"))}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,(function(e,t){return t.toUpperCase()}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(373));i(n(286));function i(e){return e&&e.__esModule?e:{default:e}}var a=r.default.isUnitlessNumber;t.default=function(e,t,n){return null==t||"boolean"===typeof t||""===t?"":isNaN(t)||0===t||a.hasOwnProperty(e)&&a[e]?""+t:("string"===typeof t&&(t=t.trim()),t+"px")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var i=["Webkit","ms","Moz","O"];Object.keys(r).forEach((function(e){i.forEach((function(t){r[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=r[e]}))}));var a={isUnitlessNumber:r,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};t.default=a},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";var r=n(376),i=/^ms-/;e.exports=function(e){return r(e).replace(i,"-ms-")}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){if(function(e){return null===e||void 0===e||!1===e||"object"===("undefined"===typeof e?"undefined":r(e))&&0===Object.keys(e).length}(e))return null;if("object"!==("undefined"===typeof e?"undefined":r(e)))return e;for(var t={},n=Object.keys(e),i=!1,o=0;o<n.length;o++){var u=e[n[o]],s=a(u);null!==s&&s===u||(i=!0),null!==s&&(t[n[o]]=s)}return 0===Object.keys(t).length?null:i?t:e}function a(e){return Array.isArray(e)?function(e){var t=!1,n=[];return e.forEach((function(e){var r=a(e);null!==r&&r===e||(t=!0),null!==r&&n.push(r)})),0==n.length?null:t?n:e}(e):i(e)}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.PluginSet=s,t.fallbacks=function(e){if(Object.keys(e.style).map((function(t){return Array.isArray(e.style[t])})).indexOf(!0)>=0){var t=e.style,n=Object.keys(t).reduce((function(e,n){return e[n]=Array.isArray(t[n])?t[n].join("; "+(0,a.processStyleName)(n)+": "):t[n],e}),{});return(0,i.default)({},e,{style:n})}return e},t.contentWrap=function(e){if(e.style.content){var t=e.style.content;return c.indexOf(t)>=0||/^(attr|calc|counters?|url)\(/.test(t)?e:t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0)?r({},e,{style:r({},e.style,{content:'"'+t+'"'})}):e}return e},t.prefixes=function(e){return(0,i.default)({},e,{style:(0,o.default)(r({},e.style))})};var i=u(n(115)),a=n(285),o=u(n(380));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){this.fns=e||[]}(0,i.default)(s.prototype,{add:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.fns.indexOf(t)>=0||(e.fns=[t].concat(e.fns))}))},remove:function(e){this.fns=this.fns.filter((function(t){return t!==e}))},clear:function(){this.fns=[]},transform:function(e){return this.fns.reduce((function(e,t){return t(e)}),e)}});var c=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t in e){var n=e[t],r=(0,a.default)(g,t,n,e,y);r&&(e[t]=r),(0,i.default)(y,t,e)}return e};var r=v(n(381)),i=v(n(382)),a=v(n(383)),o=v(n(384)),u=v(n(385)),s=v(n(386)),c=v(n(387)),l=v(n(388)),f=v(n(389)),d=v(n(390)),p=v(n(391)),h=v(n(392)),m=v(n(393));function v(e){return e&&e.__esModule?e:{default:e}}var g=[u.default,o.default,s.default,l.default,f.default,d.default,p.default,h.default,m.default,c.default],y=r.default.prefixMap},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Webkit"],i=["Moz"],a=["ms"],o=["Webkit","Moz"],u=["Webkit","ms"],s=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:o,userSelect:s,textEmphasisPosition:r,textEmphasis:r,textEmphasisStyle:r,textEmphasisColor:r,boxDecorationBreak:r,clipPath:r,maskImage:r,maskMode:r,maskRepeat:r,maskPosition:r,maskClip:r,maskOrigin:r,maskSize:r,maskComposite:r,mask:r,maskBorderSource:r,maskBorderMode:r,maskBorderSlice:r,maskBorderWidth:r,maskBorderOutset:r,maskBorderRepeat:r,maskBorder:r,maskType:r,textDecorationStyle:r,textDecorationSkip:r,textDecorationLine:r,textDecorationColor:r,filter:r,fontFeatureSettings:r,breakAfter:s,breakBefore:s,breakInside:s,columnCount:o,columnFill:o,columnGap:o,columnRule:o,columnRuleColor:o,columnRuleStyle:o,columnRuleWidth:o,columns:o,columnSpan:o,columnWidth:o,writingMode:u,flex:r,flexBasis:r,flexDirection:r,flexGrow:r,flexFlow:r,flexShrink:r,flexWrap:r,alignContent:r,alignItems:r,alignSelf:r,justifyContent:r,order:r,transform:r,transformOrigin:r,transformOriginX:r,transformOriginY:r,backfaceVisibility:r,perspective:r,perspectiveOrigin:r,transformStyle:r,transformOriginZ:r,animation:r,animationDelay:r,animationDirection:r,animationFillMode:r,animationDuration:r,animationIterationCount:r,animationName:r,animationPlayState:r,animationTimingFunction:r,backdropFilter:r,fontKerning:r,scrollSnapType:u,scrollSnapPointsX:u,scrollSnapPointsY:u,scrollSnapDestination:u,scrollSnapCoordinate:u,shapeImageThreshold:r,shapeImageMargin:r,shapeImageOutside:r,hyphens:s,flowInto:u,flowFrom:u,regionFragment:u,textAlignLast:i,tabSize:i,wrapFlow:a,wrapThrough:a,wrapMargin:a,gridTemplateColumns:a,gridTemplateRows:a,gridTemplateAreas:a,gridTemplate:a,gridAutoColumns:a,gridAutoRows:a,gridAutoFlow:a,grid:a,gridRowStart:a,gridColumnStart:a,gridRowEnd:a,gridRow:a,gridColumn:a,gridColumnEnd:a,gridColumnGap:a,gridRowGap:a,gridArea:a,gridGap:a,textSizeAdjust:u,borderImage:r,borderImageOutset:r,borderImageRepeat:r,borderImageSlice:r,borderImageSource:r,borderImageWidth:r,transitionDelay:r,transitionDuration:r,transitionProperty:r,transitionTimingFunction:r}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t))for(var r=e[t],i=0,o=r.length;i<o;++i)n[r[i]+(0,a.default)(t)]=n[t]};var r,i=n(287),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){for(var a=0,o=e.length;a<o;++a){var u=e[a](t,n,r,i);if(u)return u}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&i.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,a.default)(t)&&t.indexOf("cross-fade(")>-1)return o.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var r,i=n(118),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,a.default)(t)&&t.indexOf("filter(")>-1)return o.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var r,i=n(118),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");i.hasOwnProperty(e)&&(n[i[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,a.default)(t)&&u.test(t))return o.map((function(e){return e+t}))};var r,i=n(118),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-","-moz-",""],u=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,a.default)(t)&&t.indexOf("image-set(")>-1)return o.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r,i=n(118),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i.hasOwnProperty(e)&&a.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if("string"===typeof t&&u.hasOwnProperty(e)){var c=function(e,t){if((0,i.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),a=0,o=n.length;a<o;++a){var u=n[a],c=[u];for(var l in t){var f=(0,r.default)(l);if(u.indexOf(f)>-1&&"order"!==f)for(var d=t[l],p=0,h=d.length;p<h;++p)c.unshift(u.replace(f,s[d[p]]+f))}n[a]=c.join(",")}return n.join(",")}(t,o),l=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return l;var f=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?f:(n["Webkit"+(0,a.default)(e)]=l,n["Moz"+(0,a.default)(e)]=f,c)}};var r=o(n(394)),i=o(n(118)),a=o(n(287));function o(e){return e&&e.__esModule?e:{default:e}}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},s={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var r,i=n(163),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function i(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function a(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=1540483477,o=t^e.length,u=e.length,s=0;for(;u>=4;){var c=r(e,s);c=a(c,n),c=a(c^=c>>>24,n),o=a(o,n),o^=c,s+=4,u-=4}switch(u){case 3:o^=i(e,s),o=a(o^=e.charCodeAt(s+2)<<16,n);break;case 2:o=a(o^=i(e,s),n);break;case 1:o=a(o^=e.charCodeAt(s),n)}return o=a(o^=o>>>13,n),(o^=o>>>15)>>>0}},function(e,t,n){"use strict";var r=n(207),i=n(143),a=n(291),o=n(144),u=n(209),s=n(210);Object.defineProperty(t,"__esModule",{value:!0});var c=n(211),l=n(117),f=n(402),d=n(403),p=function(e){u(n,e);var t=s(n);function n(e){var r;i(this,n),(r=t.call(this,e)).surfaces=new Map;var o=null==e.startOpen||e.startOpen;return r.state={isOpen:o,isFullscreen:!1,activeTab:null,tabs:new Set},r.keyHandler=r.keyHandler.bind(a(r)),r}return o(n,null,[{key:"render",value:function(e,t,r){return c.render(c.h(n,Object.assign({},r)),e,t)}}]),o(n,[{key:"close",value:function(){this.setState({isOpen:!1})}},{key:"open",value:function(){this.setState({isOpen:!0})}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"toggleFullScreen",value:function(){this.setState({isFullscreen:!this.state.isFullscreen})}},{key:"isOpen",value:function(){return this.state.isOpen}},{key:"isFullscreen",value:function(){return this.state.isFullscreen}},{key:"getSurface",value:function(e,t){var n,r=this.surfaceId(e,t);if(!this.surfaces.has(r))throw Error("Surface not found with id: ".concat(r));return{container:(n=this.surfaces.get(r)).container,label:n.label,drawArea:n.drawArea}}},{key:"bindKeys",value:function(){document.addEventListener("keydown",this.keyHandler,!1)}},{key:"unbindKeys",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"surfaceId",value:function(e,t){return e+t}},{key:"setTabs",value:function(e){var t,n,i=e.map((function(e){return e.tab})),a=this.state.tabs,o=r(i);try{for(o.s();!(n=o.n()).done;){var u=n.value;a.has(u)||(a.add(u),t=u)}}catch(s){o.e(s)}finally{o.f()}null!=t&&this.setState({tabs:a,activeTab:t})}},{key:"getTabs",value:function(){return this.state.tabs}},{key:"registerSurface",value:function(e,t,n){var r=this.surfaceId(e,t);this.surfaces.set(r,n)}},{key:"keyHandler",value:function(e){192===e.keyCode&&(e.shiftKey?this.toggleFullScreen():this.toggle())}},{key:"setActiveTab",value:function(e){this.setState({activeTab:e})}},{key:"componentDidMount",value:function(){this.bindKeys()}},{key:"componentWillMount",value:function(){this.setTabs(this.props.surfaceList)}},{key:"componentWillReceiveProps",value:function(e){this.setTabs(e.surfaceList)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,r=t.isFullscreen,i=t.activeTab,a=this.props.surfaceList,o=Array.from(this.getTabs().values()),u=r?"90vw":"550px",s=l.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),p=l.css({right:"0"}),m=l.css({right:"calc(-".concat(u," - 10px)")}),v=n?p:m,g=l.css({});return c.h("div",{className:"".concat(s," ").concat(v," visor"),"data-isopen":n,"data-isfullscreen":r},c.h(h,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:r}),c.h(d.Tabs,{tabNames:o,activeTab:i,handleClick:this.setActiveTab.bind(this)}),c.h("div",{className:"".concat(g," visor-surfaces")},a.map((function(t){return c.h(f.SurfaceComponent,{key:t.name+t.tab,name:t.name,tab:t.tab,styles:t.styles,registerSurface:e.registerSurface.bind(e),visible:i===t.tab})}))))}}]),n}(c.Component);function h(e){var t=e.isFullScreen,n=e.fullScreenHandler,r=e.closeHandler,i=l.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),a=l.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),o=l.css({marginLeft:"auto"});return c.h("div",{className:"".concat(i," visor-controls")},c.h("button",{className:"".concat(a),onClick:n},t?"Minimize":"Maximize"),c.h("button",{className:"".concat(a," ").concat(o),onClick:r},"Hide"))}t.VisorComponent=p},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var r=n(401),i=n(291);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";var r=n(143),i=n(144),a=n(209),o=n(210);Object.defineProperty(t,"__esModule",{value:!0});var u=n(211),s=n(117),c=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.tab;this.props.registerSurface(t,n,this)}},{key:"componentDidUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.props,r=t.name,i=t.visible,a=t.styles,o=Object.assign({},n.defaultStyles,a),c=o.width,l=o.height,f=o.maxHeight,d=o.maxWidth;f=l===n.defaultStyles.height?f:l,d=c===n.defaultStyles.width?d:c;var p=s.css({display:i?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:c,maxHeight:f,maxWidth:d,overflow:"auto"}),h=s.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),m=s.css({boxSizing:"border-box"});return u.h("div",{className:"".concat(p," tf-surface"),ref:function(t){return e.container=t},"data-visible":i},u.h("div",{className:"".concat(h," tf-label"),ref:function(t){return e.label=t}},r),u.h("div",{className:"".concat(m," tf-draw-area"),ref:function(t){return e.drawArea=t}}))}}]),n}(u.Component);c.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t.SurfaceComponent=c},function(e,t,n){"use strict";var r=n(143),i=n(144),a=n(209),o=n(210);Object.defineProperty(t,"__esModule",{value:!0});var u=n(211),s=n(117),c=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"render",value:function(){var e=this.props,t=e.tabNames,n=e.activeTab,r=e.handleClick,i=t.length>0?t.map((function(e){return u.h(l,{key:e,id:e,handleClick:r,isActive:e===n},e)})):null,a=s.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return u.h("div",{className:"".concat(a," visor-tabs")},i)}}]),n}(u.Component);t.Tabs=c;var l=function(e){a(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isActive,r=e.handleClick,i=e.id,a=s.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return u.h("a",{className:"".concat(a," tf-tab"),"data-isactive":n,onClick:function(){return r(i)}},t)}}]),n}(u.Component)},function(e,t,n){"use strict";var r=n(11),i=n(207),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(94)),s=n(68),c=n(54);t.confusionMatrix=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var o,f,d,p,h,m,v,g,y,b,x,w,O,k,E,S,C,_;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Object.assign({},l,n),f=c.getDrawArea(e),d=[],p=t.values,h=t.tickLabels||[],m=0===h.length,v=!0,g=0;g<p.length;g++)for(y=m?"Class ".concat(g):h[g],m&&h.push(y),b=0;b<p[g].length;b++)x=m?"Class ".concat(b):h[b],w=p[g][b],g!==b||o.shadeDiagonal?(d.push({label:y,prediction:x,count:w,scaleCount:w}),0!==w&&(v=!1)):d.push({label:y,prediction:x,count:w,noFill:!0});if(!o.shadeDiagonal&&v){O=i(d);try{for(O.s();!(k=O.n()).done;)!0===(E=k.value).noFill&&(E.noFill=!1,E.scaleCount=E.count)}catch(a){O.e(a)}finally{O.f()}}return S={actions:!1,mode:"vega-lite",defaultStyle:!1},C={width:o.width||s.getDefaultWidth(f),height:o.height||s.getDefaultHeight(f),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:d},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:h}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:h}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]},!1===o.shadeDiagonal&&C.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&C.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}}),_="string"===typeof o.colorMap?{scheme:o.colorMap}:o.colorMap,C.layer[0].encoding.color.scale.range=_,r.next=17,u.default(f,C,S);case 17:case"end":return r.stop()}}),a)})))};var l={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}},function(e,t,n){"use strict";var r=n(11),i=n(292),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(24)),c=u(n(94)),l=n(68),f=n(145),d=n(54);function p(e){return a(this,void 0,void 0,r.mark((function t(){var n,i,a,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e instanceof s.Tensor?(n=e.shape,i=e.transpose()):(n=[e.length,e[0].length],i=s.tidy((function(){return s.tensor2d(e).transpose()}))),f.assert(2===i.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),t.next=4,i.array();case 4:return a=t.sent,i.dispose(),o=[a.length,a[0].length],f.assert(n[0]===o[1]&&n[1]===o[0],"Unexpected transposed shape. Original ".concat(n," : Transposed ").concat(o)),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))}function h(e,t,n){var r=e instanceof s.Tensor?e.shape:[e.length,e[0].length];0===n?f.assert(r[0]===t.length,"Length of xTickLabels (".concat(t.length,") must match number of rows")+" (".concat(r[0],")")):1===n&&f.assert(r[1]===t.length,"Length of yTickLabels (".concat(t.length,") must match number of columns (").concat(r[1],")"))}t.heatmap=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var o,u,v,g,y,b,x,w,O,k,E,S,C,_,j,A,T,N,R,D,I,M,F,P,z,L,B,W;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=Object.assign({},m,n),u=d.getDrawArea(e),v=t.values,!o.rowMajor){r.next=7;break}return r.next=6,p(t.values);case 6:v=r.sent;case 7:if(g=t.xTickLabels,y=t.yTickLabels,null!=g&&(0,h(v,g,0)),null!=y&&(1,h(v,y,1)),b="@tfidx@",x=[],!(v instanceof s.Tensor)){r.next=21;break}return f.assert(2===v.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),r.next=16,v.data();case 16:for(w=r.sent,O=i(v.shape,2),k=O[0],E=O[1],S=0;S<k;S++)for(C=g?"".concat(g[S]).concat(b).concat(S):S,_=0;_<E;_++)j=y?"".concat(y[_]).concat(b).concat(_):_,A=w[S*E+_],x.push({x:C,y:j,value:A});r.next=23;break;case 21:for(T=v,N=0;N<T.length;N++)for(R=g?"".concat(g[N]).concat(b).concat(N):N,D=0;D<T[N].length;D++)I=y?"".concat(y[D]).concat(b).concat(D):D,M=T[N][D],x.push({x:R,y:I,value:M});case 23:F={actions:!1,mode:"vega-lite",defaultStyle:!1},P={width:o.width||l.getDefaultWidth(u),height:o.height||l.getDefaultHeight(u),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:x},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:"x"},y:{field:"y",type:o.yType,title:o.yLabel,sort:"y"},fill:{field:"value",type:"quantitative"}}},z="".concat(b,"\\d+$"),L=new RegExp(z),g&&(P.encoding.x.axis={labelExpr:"replace(datum.value, regexp(/".concat(z,"/), '')")}),y&&(P.encoding.y.axis={labelExpr:"replace(datum.value, regexp(/".concat(z,"/), '')")}),(g||y)&&(F.tooltip={sanitize:function(e){return String(e).replace(L,"")}}),r.t0=o.colorMap,r.next="blues"===r.t0?33:"greyscale"===r.t0?35:(r.t0,37);break;case 33:return B=["#f7fbff","#4292c6"],r.abrupt("break",39);case 35:return B=["#000000","#ffffff"],r.abrupt("break",39);case 37:return B="viridis",r.abrupt("break",39);case 39:return"viridis"!==B&&(P.encoding.fill.scale={range:B}),o.domain&&(null!=(W=P.encoding.fill).scale?W.scale=Object.assign({},W.scale,{domain:o.domain}):W.scale={domain:o.domain}),r.next=43,c.default(u,P,F);case 43:case"end":return r.stop()}}),a)})))};var m={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(290);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=n(11),i=n(294),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(94)),s=n(68),c=n(145),l=n(54);t.scatterplot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var o,d,p,h,m,v,g,y,b;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.values,d=null==t.series?[]:t.series,o=Array.isArray(o[0])?o:[o],p=[],o.forEach((function(e,t){var n=null!=d[t]?d[t]:"Series ".concat(t+1),r=e.map((function(e){return Object.assign({},e,{series:n})}));p.push.apply(p,i(r))})),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),h=l.getDrawArea(e),m=Object.assign({},f,n),v={actions:!1,mode:"vega-lite",defaultStyle:!1},g=function(){return m.zoomToFit?{zero:!1}:null!=m.xAxisDomain?{domain:m.xAxisDomain}:void 0},y=function(){return m.zoomToFit?{zero:!1}:null!=m.yAxisDomain?{domain:m.yAxisDomain}:void 0},b={width:m.width||s.getDefaultWidth(h),height:m.height||s.getDefaultHeight(h),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:m.fontSize,titleFontSize:m.fontSize},text:{fontSize:m.fontSize},legend:{labelFontSize:m.fontSize,titleFontSize:m.fontSize}},data:{values:p},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:m.xType,title:m.xLabel,scale:g()},y:{field:"y",type:m.yType,title:m.yLabel,scale:y()},color:{field:"series",type:"nominal",scale:{range:m.seriesColors}},shape:{field:"series",type:"nominal"}}},r.next=14,u.default(h,b,v);case 14:return r.abrupt("return",Promise.resolve());case 15:case"end":return r.stop()}}),a)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},function(e,t,n){"use strict";var r=n(414),i=n(11),a=n(207),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var u=n(293),s=n(54),c=n(68);function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(this,void 0,void 0,i.mark((function o(){var l,p,h,m,v,g,y,b,x,w,O,k,E,S,C,_,j,A;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:l=s.getDrawArea(e),p={},h=a(n);try{for(h.s();!(m=h.n()).done;)v=m.value,/val_/.test(v)?(y=v.replace("val_",""),f(p,y),b=d(t,v,n.indexOf(v)),p[y].series.push(v),p[y].values.push(b)):(g=d(t,v,n.indexOf(v)),f(p,v),p[v].series.push(v),p[v].values.push(g))}catch(o){h.e(o)}finally{h.f()}for(x=Object.keys(p),w=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},r),O=[],k=0,E=x;k<E.length;k++)S=E[k],C=c.subSurface(l,S),_=p[S].series,j=p[S].values,_.every((function(e){return Boolean(e.match("acc"))}))&&(w.zoomToFitAccuracy?w.zoomToFit=!0:(w.yAxisDomain=[0,1],delete w.zoomToFit)),A=u.linechart(C,{values:j,series:_},w),O.push(A);return i.next=10,Promise.all(O);case 10:case"end":return i.stop()}}),o)})))}function f(e,t){null==e[t]&&(e[t]={series:[],values:[]})}function d(e,t,n){if(Array.isArray(e)){for(var r=Array.isArray(e[0])?e[n]:e,i=[],a=0;a<r.length;a++){var o=r[a];i.push({x:a,y:o[t]})}return i}return e.history[t].map((function(e,t){return{x:t,y:e}}))}function p(e,t,n){return null==e[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=[]),e[t][n]}t.history=l,t.fitCallbacks=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u={},f=n.callbacks||["onEpochEnd","onBatchEnd"],d=s.getDrawArea(e),h=Object.assign({},n);function m(e){var n=this;return function(f,m){return o(n,void 0,void 0,i.mark((function n(){var o,f,v,g,y,b;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:/batch/i.test(e)?h.xLabel="Batch":/epoch/i.test(e)&&(h.xLabel="Epoch"),o=[],f=[],v=a(t);try{for(v.s();!(g=v.n()).done;)y=g.value,null!=m[y]&&(f.push(y),(b=p(u,e,y)).push(r({},y,m[y])),o.push(b))}catch(i){v.e(i)}finally{v.f()}return l(c.subSurface(d,e,{title:e}),o,f,h),n.next=9,s.nextFrame();case 9:case"end":return n.stop()}}),n)})))}}delete h.callbacks;var v={};return f.forEach((function(e){v[e]=m(e)})),v}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(11),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var a=n(212),o=n(54),u=n(147),s=n(68),c=n(146);function l(e){return{layers:e.layers.map(f)}}function f(e){var t;if(Array.isArray(e.outputShape[0])){var n=e.outputShape.map((function(e){return p(e)}));t="[".concat(n.join(", "),"]")}else t=p(e.outputShape);return{name:e.name,trainable:e.trainable,parameters:e.countParams(),outputShape:t}}function d(e){return i(this,void 0,void 0,r.mark((function t(){var n,i,a,o,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getWeights(),i=e.weights,a=n.map(c.tensorStats),t.next=5,Promise.all(a);case 5:return o=t.sent,u=n.map((function(e){return e.shape})),t.abrupt("return",n.map((function(e,t){return{name:i[t].name,stats:o[t],shape:p(u[t]),weight:e}})));case 8:case"end":return t.stop()}}),t)})))}function p(e){var t=e.slice();return 0===t.length?"Scalar":(null===t[0]&&(t[0]="batch"),"[".concat(t.join(","),"]"))}function h(e,t,n){var r="\n    <select>\n      ".concat(e.map((function(e){return"<option value=".concat(e,">").concat(e,"</option>")})),"\n    </select>\n  "),i="<div>".concat("<button>Show Values Distribution for:</button>").concat(r,"</div>");t.innerHTML=i;var a=t.querySelector("button"),o=t.querySelector("select");a.addEventListener("click",(function(){n(o.selectedOptions[0].label)}))}t.modelSummary=function(e,t){return i(this,void 0,void 0,r.mark((function n(){var i,a,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=o.getDrawArea(e),a=l(t),s=["Layer Name","Output Shape","# Of Params","Trainable"],c=a.layers.map((function(e){return[e.name,e.outputShape,e.parameters,e.trainable]})),u.table(i,{headers:s,values:c});case 5:case"end":return n.stop()}}),n)})))},t.layer=function(e,t){return i(this,void 0,void 0,r.mark((function n(){var c,l,f,p,m,v,g,y,b=this;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=o.getDrawArea(e),n.next=3,d(t);case 3:l=n.sent,f=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],p=s.subSurface(c,"layer-weights-info"),m=l.map((function(e){return[e.name,e.shape,e.stats.min,e.stats.max,e.weight.size,e.stats.numZeros,e.stats.numNans,e.stats.numInfs]})),u.table(p,{headers:f,values:m}),v=s.subSurface(c,"select-layer"),g=s.subSurface(c,"param-distribution"),y=function(e){return i(b,void 0,void 0,r.mark((function t(){var n,i;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.filter((function(t){return t.name===e}))[0],t.next=3,n.weight.data();case 3:i=t.sent,a.histogram(g,i,{height:150,width:460,stats:!1});case 5:case"end":return t.stop()}}),t)})))},h(l.map((function(e){return e.name})),v,y);case 12:case"end":return n.stop()}}),n)})))}},function(e,t,n){"use strict";var r=n(11),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var a=n(54),o=n(147);t.showPerClassAccuracy=function(e,t,n){return i(this,void 0,void 0,r.mark((function i(){var u,s,c,l,f,d;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(u=a.getDrawArea(e),s=["Class","Accuracy","# Samples"],c=[],l=0;l<t.length;l++)f=n?n[l]:l.toString(),d=t[l],c.push([f,d.accuracy,d.count]);return r.abrupt("return",o.table(u,{headers:s,values:c}));case 5:case"end":return r.stop()}}),i)})))}},function(e,t,n){"use strict";var r=n(11),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var a=n(212),o=n(54),u=n(146);t.valuesDistribution=function(e,t){return i(this,void 0,void 0,r.mark((function n(){var i,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=o.getDrawArea(e),n.next=3,u.tensorStats(t);case 3:return s=n.sent,n.next=6,t.data();case 6:c=n.sent,a.histogram(i,c,{height:150,stats:s});case 8:case"end":return n.stop()}}),n)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.version="1.4.0"},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var o=i.apply(null,r);o&&e.push(o)}else if("object"===a)for(var u in r)n.call(r,u)&&r[u]&&e.push(u)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t){var n=/^(?:0|[1-9]\d*)$/;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var i,a,o=Object.prototype,u=o.hasOwnProperty,s=o.toString,c=o.propertyIsEnumerable,l=(i=Object.keys,a=Object,function(e){return i(a(e))}),f=Math.max;function d(e,t){var n=g(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&y(e)}(e)&&u.call(e,"callee")&&(!c.call(e,"callee")||"[object Arguments]"==s.call(e))}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var a in e)!t&&!u.call(e,a)||i&&("length"==a||m(a,r))||n.push(a);return n}function p(e,t,n){var r=e[t];u.call(e,t)&&v(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function h(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||o;return e===n}(e))return l(e);var t=[];for(var n in Object(e))u.call(e,n)&&"constructor"!=n&&t.push(n);return t}function m(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||n.test(e))&&e>-1&&e%1==0&&e<t}function v(e,t){return e===t||e!==e&&t!==t}var g=Array.isArray;function y(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=b(e)?s.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var x,w=(x=function(e,t,n,r){!function(e,t,n,r){n||(n={});for(var i=-1,a=t.length;++i<a;){var o=t[i],u=r?r(n[o],e[o],o,n,e):void 0;p(n,o,void 0===u?e[o]:u)}}(t,function(e){return y(e)?d(e):h(e)}(t),e,r)},function(e,t){return t=f(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=f(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=o,r(e,this,u)}}((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=x.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!b(n))return!1;var r=typeof t;return!!("number"==r?y(n)&&m(t,n.length):"string"==r&&t in n)&&v(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&x(e,o,n,i)}return e})));e.exports=w},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",o="[object Map]",u="[object Set]",s=/\w*$/,c=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,f={};f[r]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object DataView]"]=f["[object Boolean]"]=f["[object Date]"]=f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f[o]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f[u]=f["[object String]"]=f["[object Symbol]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Error]"]=f[i]=f["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,h=d||p||Function("return this")(),m=t&&!t.nodeType&&t,v=m&&"object"==typeof n&&n&&!n.nodeType&&n,g=v&&v.exports===m;function y(e,t){return e.set(t[0],t[1]),e}function b(e,t){return e.add(t),e}function x(e,t,n,r){var i=-1,a=e?e.length:0;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function w(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function O(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function k(e,t){return function(n){return e(t(n))}}function E(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var S=Array.prototype,C=Function.prototype,_=Object.prototype,j=h["__core-js_shared__"],A=function(){var e=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),T=C.toString,N=_.hasOwnProperty,R=_.toString,D=RegExp("^"+T.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=g?h.Buffer:void 0,M=h.Symbol,F=h.Uint8Array,P=k(Object.getPrototypeOf,Object),z=Object.create,L=_.propertyIsEnumerable,B=S.splice,W=Object.getOwnPropertySymbols,U=I?I.isBuffer:void 0,V=k(Object.keys,Object),H=me(h,"DataView"),q=me(h,"Map"),G=me(h,"Promise"),$=me(h,"Set"),K=me(h,"WeakMap"),X=me(Object,"create"),Y=xe(H),J=xe(q),Z=xe(G),Q=xe($),ee=xe(K),te=M?M.prototype:void 0,ne=te?te.valueOf:void 0;function re(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){this.__data__=new ie(e)}function ue(e,t){var n=Oe(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&ke(e)}(e)&&N.call(e,"callee")&&(!L.call(e,"callee")||R.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],i=n.length,a=!!i;for(var o in e)!t&&!N.call(e,o)||a&&("length"==o||ye(o,i))||n.push(o);return n}function se(e,t,n){var r=e[t];N.call(e,t)&&we(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function ce(e,t){for(var n=e.length;n--;)if(we(e[n][0],t))return n;return-1}function le(e,t,n,c,l,d,p){var h;if(c&&(h=d?c(e,l,d,p):c(e)),void 0!==h)return h;if(!Ce(e))return e;var m=Oe(e);if(m){if(h=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&N.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,h)}else{var v=ge(e),g=v==i||v==a;if(Ee(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if("[object Object]"==v||v==r||g&&!d){if(w(e))return d?e:{};if(h=function(e){return"function"!=typeof e.constructor||be(e)?{}:(t=P(e),Ce(t)?z(t):{});var t}(g?{}:e),!t)return function(e,t){return pe(e,ve(e),t)}(e,function(e,t){return e&&pe(t,_e(t),e)}(h,e))}else{if(!f[v])return d?e:{};h=function(e,t,n,r){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return de(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?de(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?de(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case o:return function(e,t,n){return x(t?n(O(e),!0):O(e),y,new e.constructor)}(e,r,n);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,s.exec(e));return t.lastIndex=e.lastIndex,t}(e);case u:return function(e,t,n){return x(t?n(E(e),!0):E(e),b,new e.constructor)}(e,r,n);case"[object Symbol]":return a=e,ne?Object(ne.call(a)):{}}var a}(e,v,le,t)}}p||(p=new oe);var k=p.get(e);if(k)return k;if(p.set(e,h),!m)var S=n?function(e){return function(e,t,n){var r=t(e);return Oe(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,_e,ve)}(e):_e(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(S||e,(function(r,i){S&&(r=e[i=r]),se(h,i,le(r,t,n,c,i,e,p))})),h}function fe(e){return!(!Ce(e)||(t=e,A&&A in t))&&(Se(e)||w(e)?D:c).test(xe(e));var t}function de(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}function pe(e,t,n,r){n||(n={});for(var i=-1,a=t.length;++i<a;){var o=t[i],u=r?r(n[o],e[o],o,n,e):void 0;se(n,o,void 0===u?e[o]:u)}return n}function he(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function me(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return fe(n)?n:void 0}re.prototype.clear=function(){this.__data__=X?X(null):{}},re.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},re.prototype.get=function(e){var t=this.__data__;if(X){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return N.call(t,e)?t[e]:void 0},re.prototype.has=function(e){var t=this.__data__;return X?void 0!==t[e]:N.call(t,e)},re.prototype.set=function(e,t){return this.__data__[e]=X&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[]},ie.prototype.delete=function(e){var t=this.__data__,n=ce(t,e);return!(n<0)&&(n==t.length-1?t.pop():B.call(t,n,1),!0)},ie.prototype.get=function(e){var t=this.__data__,n=ce(t,e);return n<0?void 0:t[n][1]},ie.prototype.has=function(e){return ce(this.__data__,e)>-1},ie.prototype.set=function(e,t){var n=this.__data__,r=ce(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ae.prototype.clear=function(){this.__data__={hash:new re,map:new(q||ie),string:new re}},ae.prototype.delete=function(e){return he(this,e).delete(e)},ae.prototype.get=function(e){return he(this,e).get(e)},ae.prototype.has=function(e){return he(this,e).has(e)},ae.prototype.set=function(e,t){return he(this,e).set(e,t),this},oe.prototype.clear=function(){this.__data__=new ie},oe.prototype.delete=function(e){return this.__data__.delete(e)},oe.prototype.get=function(e){return this.__data__.get(e)},oe.prototype.has=function(e){return this.__data__.has(e)},oe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ie){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this;n=this.__data__=new ae(r)}return n.set(e,t),this};var ve=W?k(W,Object):function(){return[]},ge=function(e){return R.call(e)};function ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function be(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_)}function xe(e){if(null!=e){try{return T.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function we(e,t){return e===t||e!==e&&t!==t}(H&&"[object DataView]"!=ge(new H(new ArrayBuffer(1)))||q&&ge(new q)!=o||G&&"[object Promise]"!=ge(G.resolve())||$&&ge(new $)!=u||K&&"[object WeakMap]"!=ge(new K))&&(ge=function(e){var t=R.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?xe(n):void 0;if(r)switch(r){case Y:return"[object DataView]";case J:return o;case Z:return"[object Promise]";case Q:return u;case ee:return"[object WeakMap]"}return t});var Oe=Array.isArray;function ke(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Se(e)}var Ee=U||function(){return!1};function Se(e){var t=Ce(e)?R.call(e):"";return t==i||t==a}function Ce(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _e(e){return ke(e)?ue(e):function(e){if(!be(e))return V(e);var t=[];for(var n in Object(e))N.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return le(e,!0,!0)}}).call(this,n(53),n(213)(e))},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",a="[object Object]",o="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/^\s+|\s+$/g,d=/\\(\\)?/g,p=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,m=/^\[object .+?Constructor\]$/,v=/^0o[0-7]+$/i,g=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[r]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y[i]=y["[object Number]"]=y[a]=y["[object RegExp]"]=y[o]=y["[object String]"]=y["[object WeakMap]"]=!1;var b=parseInt,x="object"==typeof e&&e&&e.Object===Object&&e,w="object"==typeof self&&self&&self.Object===Object&&self,O=x||w||Function("return this")(),k=t&&!t.nodeType&&t,E=k&&"object"==typeof n&&n&&!n.nodeType&&n,S=E&&E.exports===k&&x.process,C=function(){try{return S&&S.binding("util")}catch(e){}}(),_=C&&C.isTypedArray;function j(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function A(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function T(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function N(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var R,D,I=Array.prototype,M=Function.prototype,F=Object.prototype,P=O["__core-js_shared__"],z=function(){var e=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),L=M.toString,B=F.hasOwnProperty,W=F.toString,U=RegExp("^"+L.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=O.Symbol,H=O.Uint8Array,q=F.propertyIsEnumerable,G=I.splice,$=(R=Object.keys,D=Object,function(e){return R(D(e))}),K=Math.max,X=Se(O,"DataView"),Y=Se(O,"Map"),J=Se(O,"Promise"),Z=Se(O,"Set"),Q=Se(O,"WeakMap"),ee=Se(Object,"create"),te=De(X),ne=De(Y),re=De(J),ie=De(Z),ae=De(Q),oe=V?V.prototype:void 0,ue=oe?oe.valueOf:void 0,se=oe?oe.toString:void 0;function ce(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function le(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function de(e){var t=-1,n=e?e.length:0;for(this.__data__=new fe;++t<n;)this.add(e[t])}function pe(e){this.__data__=new le(e)}function he(e,t){var n=Le(e)||ze(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var a in e)!t&&!B.call(e,a)||i&&("length"==a||_e(a,r))||n.push(a);return n}function me(e,t){for(var n=e.length;n--;)if(Pe(e[n][0],t))return n;return-1}function ve(e,t){for(var n=0,r=(t=je(t,e)?[t]:Oe(t)).length;null!=e&&n<r;)e=e[Re(t[n++])];return n&&n==r?e:void 0}function ge(e,t){return null!=e&&t in Object(e)}function ye(e,t,n,u,s){return e===t||(null==e||null==t||!Ve(e)&&!He(t)?e!==e&&t!==t:function(e,t,n,u,s,c){var l=Le(e),f=Le(t),d="[object Array]",p="[object Array]";l||(d=(d=Ce(e))==r?a:d);f||(p=(p=Ce(t))==r?a:p);var h=d==a&&!A(e),m=p==a&&!A(t),v=d==p;if(v&&!h)return c||(c=new pe),l||Ge(e)?ke(e,t,n,u,s,c):function(e,t,n,r,a,u,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new H(e),new H(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Pe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var c=T;case o:var l=2&u;if(c||(c=N),e.size!=t.size&&!l)return!1;var f=s.get(e);if(f)return f==t;u|=1,s.set(e,t);var d=ke(c(e),c(t),r,a,u,s);return s.delete(e),d;case"[object Symbol]":if(ue)return ue.call(e)==ue.call(t)}return!1}(e,t,d,n,u,s,c);if(!(2&s)){var g=h&&B.call(e,"__wrapped__"),y=m&&B.call(t,"__wrapped__");if(g||y){var b=g?e.value():e,x=y?t.value():t;return c||(c=new pe),n(b,x,u,s,c)}}if(!v)return!1;return c||(c=new pe),function(e,t,n,r,i,a){var o=2&i,u=$e(e),s=u.length,c=$e(t).length;if(s!=c&&!o)return!1;var l=s;for(;l--;){var f=u[l];if(!(o?f in t:B.call(t,f)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var p=!0;a.set(e,t),a.set(t,e);var h=o;for(;++l<s;){f=u[l];var m=e[f],v=t[f];if(r)var g=o?r(v,m,f,t,e,a):r(m,v,f,e,t,a);if(!(void 0===g?m===v||n(m,v,r,i,a):g)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,u,s,c)}(e,t,ye,n,u,s))}function be(e){return!(!Ve(e)||function(e){return!!z&&z in e}(e))&&(We(e)||A(e)?U:m).test(De(e))}function xe(e){return"function"==typeof e?e:null==e?Ke:"object"==typeof e?Le(e)?function(e,t){if(je(e)&&Ae(t))return Te(Re(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:ve(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){t=je(t,e)?[t]:Oe(t);var r,i=-1,a=t.length;for(;++i<a;){var o=Re(t[i]);if(!(r=null!=e&&n(e,o)))break;e=e[o]}if(r)return r;return!!(a=e?e.length:0)&&Ue(a)&&_e(o,a)&&(Le(e)||ze(e))}(e,t,ge)}(n,e):ye(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=$e(e),n=t.length;for(;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ae(i)]}return t}(e);if(1==t.length&&t[0][2])return Te(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var u=n[i];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var s=(u=n[i])[0],c=e[s],l=u[1];if(o&&u[2]){if(void 0===c&&!(s in e))return!1}else{var f=new pe;if(r)var d=r(c,l,s,e,t,f);if(!(void 0===d?ye(l,c,r,3,f):d))return!1}}return!0}(n,e,t)}}(e):function(e){return je(e)?(t=Re(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return ve(t,e)}}(e);var t}(e)}function we(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||F;return e===n}(e))return $(e);var t=[];for(var n in Object(e))B.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Oe(e){return Le(e)?e:Ne(e)}function ke(e,t,n,r,i,a){var o=2&i,u=e.length,s=t.length;if(u!=s&&!(o&&s>u))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var l=-1,f=!0,d=1&i?new de:void 0;for(a.set(e,t),a.set(t,e);++l<u;){var p=e[l],h=t[l];if(r)var m=o?r(h,p,l,t,e,a):r(p,h,l,e,t,a);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!j(t,(function(e,t){if(!d.has(t)&&(p===e||n(p,e,r,i,a)))return d.add(t)}))){f=!1;break}}else if(p!==h&&!n(p,h,r,i,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Ee(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Se(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return be(n)?n:void 0}ce.prototype.clear=function(){this.__data__=ee?ee(null):{}},ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ce.prototype.get=function(e){var t=this.__data__;if(ee){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return B.call(t,e)?t[e]:void 0},ce.prototype.has=function(e){var t=this.__data__;return ee?void 0!==t[e]:B.call(t,e)},ce.prototype.set=function(e,t){return this.__data__[e]=ee&&void 0===t?"__lodash_hash_undefined__":t,this},le.prototype.clear=function(){this.__data__=[]},le.prototype.delete=function(e){var t=this.__data__,n=me(t,e);return!(n<0)&&(n==t.length-1?t.pop():G.call(t,n,1),!0)},le.prototype.get=function(e){var t=this.__data__,n=me(t,e);return n<0?void 0:t[n][1]},le.prototype.has=function(e){return me(this.__data__,e)>-1},le.prototype.set=function(e,t){var n=this.__data__,r=me(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},fe.prototype.clear=function(){this.__data__={hash:new ce,map:new(Y||le),string:new ce}},fe.prototype.delete=function(e){return Ee(this,e).delete(e)},fe.prototype.get=function(e){return Ee(this,e).get(e)},fe.prototype.has=function(e){return Ee(this,e).has(e)},fe.prototype.set=function(e,t){return Ee(this,e).set(e,t),this},de.prototype.add=de.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},de.prototype.has=function(e){return this.__data__.has(e)},pe.prototype.clear=function(){this.__data__=new le},pe.prototype.delete=function(e){return this.__data__.delete(e)},pe.prototype.get=function(e){return this.__data__.get(e)},pe.prototype.has=function(e){return this.__data__.has(e)},pe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof le){var r=n.__data__;if(!Y||r.length<199)return r.push([e,t]),this;n=this.__data__=new fe(r)}return n.set(e,t),this};var Ce=function(e){return W.call(e)};function _e(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||g.test(e))&&e>-1&&e%1==0&&e<t}function je(e,t){if(Le(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!qe(e))||(s.test(e)||!u.test(e)||null!=t&&e in Object(t))}function Ae(e){return e===e&&!Ve(e)}function Te(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(X&&"[object DataView]"!=Ce(new X(new ArrayBuffer(1)))||Y&&Ce(new Y)!=i||J&&"[object Promise]"!=Ce(J.resolve())||Z&&Ce(new Z)!=o||Q&&"[object WeakMap]"!=Ce(new Q))&&(Ce=function(e){var t=W.call(e),n=t==a?e.constructor:void 0,r=n?De(n):void 0;if(r)switch(r){case te:return"[object DataView]";case ne:return i;case re:return"[object Promise]";case ie:return o;case ae:return"[object WeakMap]"}return t});var Ne=Fe((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(qe(e))return se?se.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return c.test(e)&&n.push(""),e.replace(l,(function(e,t,r,i){n.push(r?i.replace(d,"$1"):t||e)})),n}));function Re(e){if("string"==typeof e||qe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function De(e){if(null!=e){try{return L.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Ie,Me=(Ie=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=null==n?0:function(e){var t=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(qe(e))return NaN;if(Ve(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ve(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=h.test(e);return n||v.test(e)?b(e.slice(2),n?2:8):p.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}(e),n=t%1;return t===t?n?t-n:t:0}(n);return i<0&&(i=K(r+i,0)),function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,xe(t),i)},function(e,t,n){var r=Object(e);if(!Be(e)){var i=xe(t);e=$e(e),t=function(e){return i(r[e],e,r)}}var a=Ie(e,t,n);return a>-1?r[i?e[a]:a]:void 0});function Fe(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new(Fe.Cache||fe),n}function Pe(e,t){return e===t||e!==e&&t!==t}function ze(e){return function(e){return He(e)&&Be(e)}(e)&&B.call(e,"callee")&&(!q.call(e,"callee")||W.call(e)==r)}Fe.Cache=fe;var Le=Array.isArray;function Be(e){return null!=e&&Ue(e.length)&&!We(e)}function We(e){var t=Ve(e)?W.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Ue(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ve(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function He(e){return!!e&&"object"==typeof e}function qe(e){return"symbol"==typeof e||He(e)&&"[object Symbol]"==W.call(e)}var Ge=_?function(e){return function(t){return e(t)}}(_):function(e){return He(e)&&Ue(e.length)&&!!y[W.call(e)]};function $e(e){return Be(e)?he(e):we(e)}function Ke(e){return e}n.exports=Me}).call(this,n(53),n(213)(e))},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){(function(e,n){var r=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var o="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,s=o||u||Function("return this")(),c=t&&!t.nodeType&&t,l=c&&"object"==typeof n&&n&&!n.nodeType&&n,f=l&&l.exports===c,d=f&&o.process,p=function(){try{var e=l&&l.require&&l.require("util").types;return e||d&&d.binding&&d.binding("util")}catch(t){}}(),h=p&&p.isTypedArray;function m(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var v,g,y=Array.prototype,b=Function.prototype,x=Object.prototype,w=s["__core-js_shared__"],O=b.toString,k=x.hasOwnProperty,E=function(){var e=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),S=x.toString,C=O.call(Object),_=RegExp("^"+O.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=f?s.Buffer:void 0,A=s.Symbol,T=s.Uint8Array,N=j?j.allocUnsafe:void 0,R=(v=Object.getPrototypeOf,g=Object,function(e){return v(g(e))}),D=Object.create,I=x.propertyIsEnumerable,M=y.splice,F=A?A.toStringTag:void 0,P=function(){try{var e=se(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),z=j?j.isBuffer:void 0,L=Math.max,B=Date.now,W=se(s,"Map"),U=se(Object,"create"),V=function(){function e(){}return function(t){if(!xe(t))return{};if(D)return D(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function H(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function G(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $(e){var t=this.__data__=new q(e);this.size=t.size}function K(e,t){var n=me(e),r=!n&&he(e),i=!n&&!r&&ge(e),a=!n&&!r&&!i&&Oe(e),o=n||r||i||a,u=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=u.length;for(var c in e)!t&&!k.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ce(c,s))||u.push(c);return u}function X(e,t,n){(void 0!==n&&!pe(e[t],n)||void 0===n&&!(t in e))&&Z(e,t,n)}function Y(e,t,n){var r=e[t];k.call(e,t)&&pe(r,n)&&(void 0!==n||t in e)||Z(e,t,n)}function J(e,t){for(var n=e.length;n--;)if(pe(e[n][0],t))return n;return-1}function Z(e,t,n){"__proto__"==t&&P?P(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}H.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},H.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},H.prototype.get=function(e){var t=this.__data__;if(U){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return k.call(t,e)?t[e]:void 0},H.prototype.has=function(e){var t=this.__data__;return U?void 0!==t[e]:k.call(t,e)},H.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=U&&void 0===t?"__lodash_hash_undefined__":t,this},q.prototype.clear=function(){this.__data__=[],this.size=0},q.prototype.delete=function(e){var t=this.__data__,n=J(t,e);return!(n<0)&&(n==t.length-1?t.pop():M.call(t,n,1),--this.size,!0)},q.prototype.get=function(e){var t=this.__data__,n=J(t,e);return n<0?void 0:t[n][1]},q.prototype.has=function(e){return J(this.__data__,e)>-1},q.prototype.set=function(e,t){var n=this.__data__,r=J(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},G.prototype.clear=function(){this.size=0,this.__data__={hash:new H,map:new(W||q),string:new H}},G.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},G.prototype.get=function(e){return ue(this,e).get(e)},G.prototype.has=function(e){return ue(this,e).has(e)},G.prototype.set=function(e,t){var n=ue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},$.prototype.clear=function(){this.__data__=new q,this.size=0},$.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},$.prototype.get=function(e){return this.__data__.get(e)},$.prototype.has=function(e){return this.__data__.has(e)},$.prototype.set=function(e,t){var n=this.__data__;if(n instanceof q){var r=n.__data__;if(!W||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new G(r)}return n.set(e,t),this.size=n.size,this};var Q,ee=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var u=a[Q?o:++r];if(!1===t(i[u],u,i))break}return e};function te(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":F&&F in Object(e)?function(e){var t=k.call(e,F),n=e[F];try{e[F]=void 0;var r=!0}catch(a){}var i=S.call(e);r&&(t?e[F]=n:delete e[F]);return i}(e):function(e){return S.call(e)}(e)}function ne(e){return we(e)&&"[object Arguments]"==te(e)}function re(e){return!(!xe(e)||function(e){return!!E&&E in e}(e))&&(ye(e)?_:r).test(function(e){if(null!=e){try{return O.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function ie(e){if(!xe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=le(e),n=[];for(var r in e)("constructor"!=r||!t&&k.call(e,r))&&n.push(r);return n}function ae(e,t,n,r,i){e!==t&&ee(t,(function(a,o){if(i||(i=new $),xe(a))!function(e,t,n,r,i,a,o){var u=fe(e,n),s=fe(t,n),c=o.get(s);if(c)return void X(e,n,c);var l=a?a(u,s,n+"",e,t,o):void 0,f=void 0===l;if(f){var d=me(s),p=!d&&ge(s),h=!d&&!p&&Oe(s);l=s,d||p||h?me(u)?l=u:we(m=u)&&ve(m)?l=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(u):p?(f=!1,l=function(e,t){if(t)return e.slice();var n=e.length,r=N?N(n):new e.constructor(n);return e.copy(r),r}(s,!0)):h?(f=!1,l=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new T(t).set(new T(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(s,!0)):l=[]:function(e){if(!we(e)||"[object Object]"!=te(e))return!1;var t=R(e);if(null===t)return!0;var n=k.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&O.call(n)==C}(s)||he(s)?(l=u,he(u)?l=function(e){return function(e,t,n,r){var i=!n;n||(n={});var a=-1,o=t.length;for(;++a<o;){var u=t[a],s=r?r(n[u],e[u],u,n,e):void 0;void 0===s&&(s=e[u]),i?Z(n,u,s):Y(n,u,s)}return n}(e,ke(e))}(u):xe(u)&&!ye(u)||(l=function(e){return"function"!=typeof e.constructor||le(e)?{}:V(R(e))}(s))):f=!1}var m;f&&(o.set(s,l),i(l,s,r,a,o),o.delete(s));X(e,n,l)}(e,t,o,n,ae,r,i);else{var u=r?r(fe(e,o),a,o+"",e,t,i):void 0;void 0===u&&(u=a),X(e,o,u)}}),ke)}function oe(e,t){return de(function(e,t,n){return t=L(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=L(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=n(o),m(e,this,u)}}(e,t,Ce),e+"")}function ue(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return re(n)?n:void 0}function ce(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}function le(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||x)}function fe(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var de=function(e){var t=0,n=0;return function(){var r=B(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(P?function(e,t){return P(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ce);function pe(e,t){return e===t||e!==e&&t!==t}var he=ne(function(){return arguments}())?ne:function(e){return we(e)&&k.call(e,"callee")&&!I.call(e,"callee")},me=Array.isArray;function ve(e){return null!=e&&be(e.length)&&!ye(e)}var ge=z||function(){return!1};function ye(e){if(!xe(e))return!1;var t=te(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var Oe=h?function(e){return function(t){return e(t)}}(h):function(e){return we(e)&&be(e.length)&&!!a[te(e)]};function ke(e){return ve(e)?K(e,!0):ie(e)}var Ee,Se=(Ee=function(e,t,n){ae(e,t,n)},oe((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=Ee.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!xe(n))return!1;var r=typeof t;return!!("number"==r?ve(n)&&ce(t,n.length):"string"==r&&t in n)&&pe(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&Ee(e,o,n,i)}return e})));function Ce(e){return e}n.exports=Se}).call(this,n(53),n(213)(e))},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight");t.default=a},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");t.default=a},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.default=a},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.default=a},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"}),"CloudDownload");t.default=a},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print");t.default=a},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M10 18h5V5h-5v13zm-6 0h5V5H4v13zM16 5v13h5V5h-5z"}),"ViewColumn");t.default=a},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList");t.default=a},function(e,t,n){var r,i;"undefined"!=typeof self&&self,e.exports=(r=n(0),i=n(20),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(2),a=n(3),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPrint=function(e,n){var r=t.props.removeAfterPrint;setTimeout((function(){if(e.contentWindow.focus(),e.contentWindow.print(),n&&n(),r){var t=document.getElementById("printWindow");t&&document.body.removeChild(t)}}),500)},t.triggerPrint=function(e){var n=t.props,r=n.onAfterPrint,i=n.onBeforePrint,a=n.onPrintError;if(i){var o=i();o&&"function"==typeof o.then?o.then((function(){t.startPrint(e,r)})).catch((function(e){a&&a("onBeforePrint",e)})):t.startPrint(e,r)}else t.startPrint(e,r)},t.handleClick=function(){var e=t.props,n=e.onBeforeGetContent,r=e.onPrintError;if(n){var i=n();i&&"function"==typeof i.then?i.then(t.handlePrint).catch((function(e){r&&r("onBeforeGetContent",e)})):t.handlePrint()}else t.handlePrint()},t.handlePrint=function(){var e=t.props,n=e.bodyClass,r=void 0===n?"":n,i=e.content,o=e.copyStyles,u=void 0===o||o,s=e.pageStyle,c=e.suppressErrors,l=i();if(void 0!==l)if(null!==l){var f=document.createElement("iframe");f.style.position="absolute",f.style.top="-1000px",f.style.left="-1000px",f.id="printWindow",f.title="Print Window";var d=a.findDOMNode(l),p=document.querySelectorAll("link[rel='stylesheet'], img");t.linkTotal=p.length||0,t.linksLoaded=[],t.linksErrored=[];var h=function(e,n){n?t.linksLoaded.push(e):(c||console.error('"react-to-print" was unable to load a link. It may be invalid. "react-to-print" will continue attempting to print the page. The link the errored was:',e),t.linksErrored.push(e)),t.linksLoaded.length+t.linksErrored.length===t.linkTotal&&t.triggerPrint(f)};f.onload=function(){window.navigator&&window.navigator.userAgent.indexOf("Trident/7.0")>-1&&(f.onload=null);var e=f.contentDocument||f.contentWindow.document,n=d.querySelectorAll("canvas");if(e){e.open(),e.write(d.outerHTML),e.close();var i=void 0===s?"@page { size: auto;  margin: 0mm; } @media print { body { -webkit-print-color-adjust: exact; } }":s,a=e.createElement("style");a.appendChild(e.createTextNode(i)),e.head.appendChild(a),r.length&&e.body.classList.add(r);for(var o=e.querySelectorAll("canvas"),c=0,l=o.length;c<l;++c){var p=(g=o[c]).getContext("2d");p&&p.drawImage(n[c],0,0)}if(!1!==u)for(var m=document.querySelectorAll("style, link[rel='stylesheet'], img"),v=(c=0,m.length);c<v;++c){var g;if("STYLE"===(g=m[c]).tagName){var y=e.createElement(g.tagName),b=g.sheet;if(b){for(var x="",w=0,O=b.cssRules.length;w<O;++w)"string"==typeof b.cssRules[w].cssText&&(x+=b.cssRules[w].cssText+"\r\n");y.setAttribute("id","react-to-print-"+c),y.appendChild(e.createTextNode(x)),e.head.appendChild(y)}}else if(g.hasAttribute("href")&&g.getAttribute("href")||g.hasAttribute("src")&&g.getAttribute("src")){y=e.createElement(g.tagName),w=0;for(var k=g.attributes.length;w<k;++w){var E=g.attributes[w];E&&y.setAttribute(E.nodeName,E.nodeValue||"")}y.onload=h.bind(null,y,!0),y.onerror=h.bind(null,y,!1),e.head.appendChild(y)}else console.warn('"react-to-print" encountered a <link> tag with an empty "href" attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:',g),h(g,!0)}}0!==t.linkTotal&&!1!==u||t.triggerPrint(f)};var m=document.getElementById("printWindow");m&&document.body.removeChild(m),document.body.appendChild(f)}else c||console.error('There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.');else c||console.error('Refs are not available for stateless components. For "react-to-print" to work only Class based components can be printed')},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.trigger;return i.cloneElement(e(),{onClick:this.handleClick})},t}(i.Component);t.default=o},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return o})),n.d(t,"__decorate",(function(){return u})),n.d(t,"__param",(function(){return s})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return f})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return m})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return g})),n.d(t,"__asyncDelegator",(function(){return y})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return x})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return O}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function u(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function s(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function g(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||u(e,t)}))})}function u(e,t){try{(n=i[e](t)).value instanceof v?Promise.resolve(n.value.v).then(s,c):l(a[0][2],n)}catch(e){l(a[0][3],e)}var n}function s(e){u("next",e)}function c(e){u("throw",e)}function l(e,t){e(t),a.shift(),a.length&&u(a[0][0],a[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function x(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function O(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=r},function(e,t){e.exports=i}]))},function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),a=(0,r(n(55)).default)(i.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=a},function(e,t,n){"use strict";var r,i,a,o,u;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"===typeof window||"function"!==typeof MessageChannel){var s=null,c=null,l=function e(){if(null!==s)try{var n=t.unstable_now();s(!0,n),s=null}catch(r){throw setTimeout(e,0),r}},f=Date.now();t.unstable_now=function(){return Date.now()-f},r=function(e){null!==s?setTimeout(r,0,e):(s=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},a=function(){clearTimeout(c)},o=function(){return!1},u=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,p=window.Date,h=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof d&&"function"===typeof d.now)t.unstable_now=function(){return d.now()};else{var g=p.now();t.unstable_now=function(){return p.now()-g}}var y=!1,b=null,x=-1,w=5,O=0;o=function(){return t.unstable_now()>=O},u=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,E=k.port2;k.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();O=e+w;try{b(!0,e)?E.postMessage(null):(y=!1,b=null)}catch(n){throw E.postMessage(null),n}}else y=!1},r=function(e){b=e,y||(y=!0,E.postMessage(null))},i=function(e,n){x=h((function(){e(t.unstable_now())}),n)},a=function(){m(x),x=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<j(i,t)))break e;e[r]=t,e[n]=i,n=r}}function C(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>j(o,n))void 0!==s&&0>j(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>j(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function j(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],T=[],N=1,R=null,D=3,I=!1,M=!1,F=!1;function P(e){for(var t=C(T);null!==t;){if(null===t.callback)_(T);else{if(!(t.startTime<=e))break;_(T),t.sortIndex=t.expirationTime,S(A,t)}t=C(T)}}function z(e){if(F=!1,P(e),!M)if(null!==C(A))M=!0,r(L);else{var t=C(T);null!==t&&i(z,t.startTime-e)}}function L(e,n){M=!1,F&&(F=!1,a()),I=!0;var r=D;try{for(P(n),R=C(A);null!==R&&(!(R.expirationTime>n)||e&&!o());){var u=R.callback;if(null!==u){R.callback=null,D=R.priorityLevel;var s=u(R.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?R.callback=s:R===C(A)&&_(A),P(n)}else _(A);R=C(A)}if(null!==R)var c=!0;else{var l=C(T);null!==l&&i(z,l.startTime-n),c=!1}return c}finally{R=null,D=r,I=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var W=u;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=D;D=e;try{return t()}finally{D=n}},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var n=D;D=t;try{return e()}finally{D=n}},t.unstable_scheduleCallback=function(e,n,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:B(e)}else o=B(e),s=u;return e={id:N++,callback:n,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,S(T,e),null===C(A)&&e===C(T)&&(F?a():F=!0,i(z,s-u))):(e.sortIndex=o,S(A,e),M||I||(M=!0,r(L))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=D;return function(){var n=D;D=t;try{return e.apply(this,arguments)}finally{D=n}}},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_shouldYield=function(){var e=t.unstable_now();P(e);var n=C(A);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||o()},t.unstable_requestPaint=W,t.unstable_continueExecution=function(){M||I||(M=!0,r(L))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return C(A)},t.unstable_Profiling=null},,function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return ye})),n.d(t,"creator",(function(){return s})),n.d(t,"local",(function(){return xe})),n.d(t,"matcher",(function(){return v})),n.d(t,"mouse",(function(){return Ee})),n.d(t,"namespace",(function(){return a})),n.d(t,"namespaces",(function(){return i})),n.d(t,"clientPoint",(function(){return ke})),n.d(t,"select",(function(){return ge})),n.d(t,"selectAll",(function(){return Se})),n.d(t,"selection",(function(){return ve})),n.d(t,"selector",(function(){return l})),n.d(t,"selectorAll",(function(){return d})),n.d(t,"style",(function(){return R})),n.d(t,"touch",(function(){return Ce})),n.d(t,"touches",(function(){return _e})),n.d(t,"window",(function(){return j})),n.d(t,"event",(function(){return re})),n.d(t,"customEvent",(function(){return ce}));var r="http://www.w3.org/1999/xhtml",i={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},a=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),i.hasOwnProperty(t)?{space:i[t],local:e}:e};function o(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}}function u(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var s=function(e){var t=a(e);return(t.local?u:o)(t)};function c(){}var l=function(e){return null==e?c:function(){return this.querySelector(e)}};function f(){return[]}var d=function(e){return null==e?f:function(){return this.querySelectorAll(e)}},p=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var h=document.documentElement;if(!h.matches){var m=h.webkitMatchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector;p=function(e){return function(){return m.call(this,e)}}}}var v=p,g=function(e){return new Array(e.length)};function y(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}y.prototype={constructor:y,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function b(e,t,n,r,i,a){for(var o,u=0,s=t.length,c=a.length;u<c;++u)(o=t[u])?(o.__data__=a[u],r[u]=o):n[u]=new y(e,a[u]);for(;u<s;++u)(o=t[u])&&(i[u]=o)}function x(e,t,n,r,i,a,o){var u,s,c,l={},f=t.length,d=a.length,p=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(p[u]=c="$"+o.call(s,s.__data__,u,t),c in l?i[u]=s:l[c]=s);for(u=0;u<d;++u)(s=l[c="$"+o.call(e,a[u],u,a)])?(r[u]=s,s.__data__=a[u],l[c]=null):n[u]=new y(e,a[u]);for(u=0;u<f;++u)(s=t[u])&&l[p[u]]===s&&(i[u]=s)}function w(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function O(e){return function(){this.removeAttribute(e)}}function k(e){return function(){this.removeAttributeNS(e.space,e.local)}}function E(e,t){return function(){this.setAttribute(e,t)}}function S(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function C(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function _(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var j=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function A(e){return function(){this.style.removeProperty(e)}}function T(e,t,n){return function(){this.style.setProperty(e,t,n)}}function N(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function R(e,t){return e.style.getPropertyValue(t)||j(e).getComputedStyle(e,null).getPropertyValue(t)}function D(e){return function(){delete this[e]}}function I(e,t){return function(){this[e]=t}}function M(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function F(e){return e.trim().split(/^|\s+/)}function P(e){return e.classList||new z(e)}function z(e){this._node=e,this._names=F(e.getAttribute("class")||"")}function L(e,t){for(var n=P(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function B(e,t){for(var n=P(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function W(e){return function(){L(this,e)}}function U(e){return function(){B(this,e)}}function V(e,t){return function(){(t.apply(this,arguments)?L:B)(this,e)}}z.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function H(){this.textContent=""}function q(e){return function(){this.textContent=e}}function G(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function $(){this.innerHTML=""}function K(e){return function(){this.innerHTML=e}}function X(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Y(){this.nextSibling&&this.parentNode.appendChild(this)}function J(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z(){return null}function Q(){var e=this.parentNode;e&&e.removeChild(this)}function ee(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function te(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var ne={},re=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(ne={mouseenter:"mouseover",mouseleave:"mouseout"}));function ie(e,t,n){return e=ae(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ae(e,t,n){return function(r){var i=re;re=r;try{e.call(this,this.__data__,t,n)}finally{re=i}}}function oe(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ue(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function se(e,t,n){var r=ne.hasOwnProperty(e.type)?ie:ae;return function(i,a,o){var u,s=this.__on,c=r(t,a,o);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=t);this.addEventListener(e.type,c,n),u={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function ce(e,t,n,r){var i=re;e.sourceEvent=re,re=e;try{return t.apply(n,r)}finally{re=i}}function le(e,t,n){var r=j(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fe(e,t){return function(){return le(this,e,t)}}function de(e,t){return function(){return le(this,e,t.apply(this,arguments))}}var pe=[null];function he(e,t){this._groups=e,this._parents=t}function me(){return new he([[document.documentElement]],pe)}he.prototype=me.prototype={constructor:he,select:function(e){"function"!==typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,u=t[i],s=u.length,c=r[i]=new Array(s),f=0;f<s;++f)(a=u[f])&&(o=e.call(a,a.__data__,f,u))&&("__data__"in a&&(o.__data__=a.__data__),c[f]=o);return new he(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,u=t[a],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),i.push(o));return new he(r,i)},filter:function(e){"function"!==typeof e&&(e=v(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],u=o.length,s=r[i]=[],c=0;c<u;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&s.push(a);return new he(r,this._parents)},data:function(e,t){if(!e)return h=new Array(this.size()),l=-1,this.each((function(e){h[++l]=e})),h;var n,r=t?x:b,i=this._parents,a=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var o=a.length,u=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var f=i[l],d=a[l],p=d.length,h=e.call(f,f&&f.__data__,l,i),m=h.length,v=s[l]=new Array(m),g=u[l]=new Array(m);r(f,d,v,g,c[l]=new Array(p),h,t);for(var y,w,O=0,k=0;O<m;++O)if(y=v[O]){for(O>=k&&(k=O+1);!(w=g[k])&&++k<m;);y._next=w||null}}return(u=new he(u,i))._enter=s,u._exit=c,u},enter:function(){return new he(this._enter||this._groups.map(g),this._parents)},exit:function(){return new he(this._exit||this._groups.map(g),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s,c=t[u],l=n[u],f=c.length,d=o[u]=new Array(f),p=0;p<f;++p)(s=c[p]||l[p])&&(d[p]=s);for(;u<r;++u)o[u]=t[u];return new he(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=w);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,u=n[a],s=u.length,c=i[a]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new he(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,u=a.length;o<u;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=a(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?k:O:"function"===typeof t?n.local?_:C:n.local?S:E)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?A:"function"===typeof t?N:T)(e,t,null==n?"":n)):R(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?D:"function"===typeof t?M:I)(e,t)):this.node()[e]},classed:function(e,t){var n=F(e+"");if(arguments.length<2){for(var r=P(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?V:t?W:U)(n,t))},text:function(e){return arguments.length?this.each(null==e?H:("function"===typeof e?G:q)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?$:("function"===typeof e?X:K)(e)):this.node().innerHTML},raise:function(){return this.each(Y)},lower:function(){return this.each(J)},append:function(e){var t="function"===typeof e?e:s(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:s(e),r=null==t?Z:"function"===typeof t?t:l(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Q)},clone:function(e){return this.select(e?te:ee)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=oe(e+""),o=a.length;if(!(arguments.length<2)){for(u=t?se:ue,null==n&&(n=!1),r=0;r<o;++r)this.each(u(a[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?de:fe)(e,t))}};var ve=me,ge=function(e){return"string"===typeof e?new he([[document.querySelector(e)]],[document.documentElement]):new he([[e]],pe)},ye=function(e){return ge(s(e).call(document.documentElement))},be=0;function xe(){return new we}function we(){this._="@"+(++be).toString(36)}we.prototype=xe.prototype={constructor:we,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Oe=function(){for(var e,t=re;e=t.sourceEvent;)t=e;return t},ke=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},Ee=function(e){var t=Oe();return t.changedTouches&&(t=t.changedTouches[0]),ke(e,t)},Se=function(e){return"string"===typeof e?new he([document.querySelectorAll(e)],[document.documentElement]):new he([null==e?[]:e],pe)},Ce=function(e,t,n){arguments.length<3&&(n=t,t=Oe().changedTouches);for(var r,i=0,a=t?t.length:0;i<a;++i)if((r=t[i]).identifier===n)return ke(e,r);return null},_e=function(e,t){null==t&&(t=Oe().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=ke(e,t[n]);return i}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(165),i=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,a=e.productionPrefix,o=void 0===a?"jss":a,u=e.seed,s=void 0===u?"":u,c=""===s?"":"".concat(s,"-"),l=0;return function(e,t){l+=1;var a=t.options.name;if(a&&0===a.indexOf("Mui")&&!t.options.link&&!n){if(-1!==i.indexOf(e.key))return"Mui-".concat(e.key);var u="".concat(c).concat(a,"-").concat(e.key);return t.options.theme[r.a]&&""===s?"".concat(u,"-").concat(l):u}return"".concat(c).concat(o).concat(l)}}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(50),c=a.forwardRef((function(e,t){var n=e.children,u=e.classes,c=e.className,l=e.component,f=void 0===l?"ul":l,d=e.dense,p=void 0!==d&&d,h=e.disablePadding,m=void 0!==h&&h,v=e.subheader,g=Object(i.a)(e,["children","classes","className","component","dense","disablePadding","subheader"]),y=a.useMemo((function(){return{dense:p}}),[p]);return a.createElement(s.a.Provider,{value:y},a.createElement(f,Object(r.a)({className:Object(o.a)(u.root,c,p&&u.dense,!m&&u.padding,v&&u.subheader),ref:t},g),v,n))}));t.a=Object(u.a)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(c)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(227),c=n(48),l=n(16),f=n(50),d=n(20),p="undefined"===typeof window?a.useEffect:a.useLayoutEffect,h=a.forwardRef((function(e,t){var n=e.alignItems,u=void 0===n?"center":n,h=e.autoFocus,m=void 0!==h&&h,v=e.button,g=void 0!==v&&v,y=e.children,b=e.classes,x=e.className,w=e.component,O=e.ContainerComponent,k=void 0===O?"li":O,E=e.ContainerProps,S=(E=void 0===E?{}:E).className,C=Object(i.a)(E,["className"]),_=e.dense,j=void 0!==_&&_,A=e.disabled,T=void 0!==A&&A,N=e.disableGutters,R=void 0!==N&&N,D=e.divider,I=void 0!==D&&D,M=e.focusVisibleClassName,F=e.selected,P=void 0!==F&&F,z=Object(i.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),L=a.useContext(f.a),B={dense:j||L.dense||!1,alignItems:u},W=a.useRef(null);p((function(){m&&W.current&&W.current.focus()}),[m]);var U=a.Children.toArray(y),V=U.length&&Object(c.a)(U[U.length-1],["ListItemSecondaryAction"]),H=a.useCallback((function(e){W.current=d.findDOMNode(e)}),[]),q=Object(l.a)(H,t),G=Object(r.a)({className:Object(o.a)(b.root,x,B.dense&&b.dense,!R&&b.gutters,I&&b.divider,T&&b.disabled,g&&b.button,"center"!==u&&b.alignItemsFlexStart,V&&b.secondaryAction,P&&b.selected),disabled:T},z),$=w||"li";return g&&(G.component=w||"div",G.focusVisibleClassName=Object(o.a)(b.focusVisible,M),$=s.a),V?($=G.component||w?$:"div","li"===k&&("li"===$?$="div":"li"===G.component&&(G.component="div")),a.createElement(f.a.Provider,{value:B},a.createElement(k,Object(r.a)({className:Object(o.a)(b.container,S),ref:q},C),a.createElement($,G,U),U.pop()))):a.createElement(f.a.Provider,{value:B},a.createElement($,Object(r.a)({ref:q},G),U))}));t.a=Object(u.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(h)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),i=n(0),a=n(184),o=n(332);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(a.a)(),u=Object(o.a)({theme:n,name:"MuiUseMediaQuery",props:{}});var s="function"===typeof e?e(n):e;s=s.replace(/^@media( ?)/m,"");var c="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,l=Object(r.a)({},u,{},t),f=l.defaultMatches,d=void 0!==f&&f,p=l.matchMedia,h=void 0===p?c?window.matchMedia:null:p,m=l.noSsr,v=void 0!==m&&m,g=l.ssrMatchMedia,y=void 0===g?null:g,b=i.useState((function(){return v&&c?h(s).matches:y?y(s).matches:d})),x=b[0],w=b[1];return i.useEffect((function(){var e=!0;if(c){var t=h(s),n=function(){e&&w(t.matches)};return n(),t.addListener(n),function(){e=!1,t.removeListener(n)}}}),[s,h,c]),x}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(20)),u=n(37),s=n(228),c=n(16),l=n(19),f=n(26),d=n(28);function p(e,t){var n=function(e,t){var n,r=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var i=window.getComputedStyle(t);n=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var a=0,o=0;if(n&&"none"!==n&&"string"===typeof n){var u=n.split("(")[1].split(")")[0].split(",");a=parseInt(u[4],10),o=parseInt(u[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(-").concat(r.left-a,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-a,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(-").concat(r.top-o,"px)"):"translateY(-".concat(r.top+r.height-o,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var h={enter:f.b.enteringScreen,exit:f.b.leavingScreen},m=a.forwardRef((function(e,t){var n=e.children,f=e.direction,m=void 0===f?"down":f,v=e.in,g=e.onEnter,y=e.onEntering,b=e.onExit,x=e.onExited,w=e.style,O=e.timeout,k=void 0===O?h:O,E=Object(i.a)(e,["children","direction","in","onEnter","onEntering","onExit","onExited","style","timeout"]),S=Object(l.a)(),C=a.useRef(null),_=a.useCallback((function(e){C.current=o.findDOMNode(e)}),[]),j=Object(c.a)(n.ref,_),A=Object(c.a)(j,t),T=a.useCallback((function(){C.current&&p(m,C.current)}),[m]);return a.useEffect((function(){if(!v&&"down"!==m&&"right"!==m){var e=Object(u.a)((function(){C.current&&p(m,C.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[m,v]),a.useEffect((function(){v||T()}),[v,T]),a.createElement(s.a,Object(r.a)({onEnter:function(e,t){var n=C.current;p(m,n),Object(d.b)(n),g&&g(n,t)},onEntering:function(e,t){var n=C.current,i=Object(d.a)({timeout:k,style:w},{mode:"enter"});n.style.webkitTransition=S.transitions.create("-webkit-transform",Object(r.a)({},i,{easing:S.transitions.easing.easeOut})),n.style.transition=S.transitions.create("transform",Object(r.a)({},i,{easing:S.transitions.easing.easeOut})),n.style.webkitTransform="none",n.style.transform="none",y&&y(n,t)},onExit:function(){var e=C.current,t=Object(d.a)({timeout:k,style:w},{mode:"exit"});e.style.webkitTransition=S.transitions.create("-webkit-transform",Object(r.a)({},t,{easing:S.transitions.easing.sharp})),e.style.transition=S.transitions.create("transform",Object(r.a)({},t,{easing:S.transitions.easing.sharp})),p(m,e),b&&b(e)},onExited:function(){var e=C.current;e.style.webkitTransition="",e.style.transition="",x&&x(e)},appear:!0,in:v,timeout:k},E),(function(e,t){return a.cloneElement(n,Object(r.a)({ref:A,style:Object(r.a)({visibility:"exited"!==e||v?void 0:"hidden"},w,{},n.props.style)},t))}))}));t.a=m},function(e,t,n){"use strict";var r=n(0),i=n(20),a=(n(8),n(30)),o=n(16);var u="undefined"!==typeof window?r.useLayoutEffect:r.useEffect,s=r.forwardRef((function(e,t){var n=e.children,s=e.container,c=e.disablePortal,l=void 0!==c&&c,f=e.onRendered,d=r.useState(null),p=d[0],h=d[1],m=Object(o.a)(r.isValidElement(n)?n.ref:null,t);return u((function(){l||h(function(e){return e="function"===typeof e?e():e,i.findDOMNode(e)}(s)||document.body)}),[s,l]),u((function(){if(p&&!l)return Object(a.a)(t,p),function(){Object(a.a)(t,null)}}),[t,p,l]),u((function(){f&&(p||l)&&f()}),[f,p,l]),l?r.isValidElement(n)?r.cloneElement(n,{ref:m}):n:p?i.createPortal(n,p):p}));t.a=s},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(447),c=a.forwardRef((function(e,t){var n=e.children,u=e.classes,c=e.className,l=e.invisible,f=void 0!==l&&l,d=e.open,p=e.transitionDuration,h=Object(i.a)(e,["children","classes","className","invisible","open","transitionDuration"]);return a.createElement(s.a,Object(r.a)({in:d,timeout:p},h),a.createElement("div",{className:Object(o.a)(u.root,c,f&&u.invisible),"aria-hidden":!0,ref:t},n))}));t.a=Object(u.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(c)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(228)),u=n(26),s=n(19),c=n(28),l=n(16),f={entering:{opacity:1},entered:{opacity:1}},d={enter:u.b.enteringScreen,exit:u.b.leavingScreen},p=a.forwardRef((function(e,t){var n=e.children,u=e.in,p=e.onEnter,h=e.onExit,m=e.style,v=e.timeout,g=void 0===v?d:v,y=Object(i.a)(e,["children","in","onEnter","onExit","style","timeout"]),b=Object(s.a)(),x=Object(l.a)(n.ref,t);return a.createElement(o.a,Object(r.a)({appear:!0,in:u,onEnter:function(e,t){Object(c.b)(e);var n=Object(c.a)({style:m,timeout:g},{mode:"enter"});e.style.webkitTransition=b.transitions.create("opacity",n),e.style.transition=b.transitions.create("opacity",n),p&&p(e,t)},onExit:function(e){var t=Object(c.a)({style:m,timeout:g},{mode:"exit"});e.style.webkitTransition=b.transitions.create("opacity",t),e.style.transition=b.transitions.create("opacity",t),h&&h(e)},timeout:g},y),(function(e,t){return a.cloneElement(n,Object(r.a)({style:Object(r.a)({opacity:0,visibility:"exited"!==e||u?void 0:"hidden"},f[e],{},m,{},n.props.style),ref:x},t))}))}));t.a=p},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(323)),u=n(184),s=n(445),c=n(44),l=n(30),f=n(16);function d(e){return"function"===typeof e?e():e}var p="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,h={},m=a.forwardRef((function(e,t){var n=e.anchorEl,m=e.children,v=e.container,g=e.disablePortal,y=void 0!==g&&g,b=e.keepMounted,x=void 0!==b&&b,w=e.modifiers,O=e.open,k=e.placement,E=void 0===k?"bottom":k,S=e.popperOptions,C=void 0===S?h:S,_=e.popperRef,j=e.style,A=e.transition,T=void 0!==A&&A,N=Object(i.a)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),R=a.useRef(null),D=Object(f.a)(R,t),I=a.useRef(null),M=Object(f.a)(I,_),F=a.useRef(M);p((function(){F.current=M}),[M]),a.useImperativeHandle(_,(function(){return I.current}),[]);var P=a.useState(!0),z=P[0],L=P[1],B=function(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(E,Object(u.a)()),W=a.useState(B),U=W[0],V=W[1];a.useEffect((function(){I.current&&I.current.update()}));var H=a.useCallback((function(){if(R.current&&n&&O){I.current&&(I.current.destroy(),F.current(null));var e=function(e){V(e.placement)},t=(d(n),new o.a(d(n),R.current,Object(r.a)({placement:B},C,{modifiers:Object(r.a)({},y?{}:{preventOverflow:{boundariesElement:"window"}},{},w,{},C.modifiers),onCreate:Object(c.a)(e,C.onCreate),onUpdate:Object(c.a)(e,C.onUpdate)})));F.current(t)}}),[n,y,w,O,B,C]),q=a.useCallback((function(e){Object(l.a)(D,e),H()}),[D,H]),G=function(){I.current&&(I.current.destroy(),F.current(null))};if(a.useEffect((function(){H()}),[H]),a.useEffect((function(){return function(){G()}}),[]),a.useEffect((function(){O||T||G()}),[O,T]),!x&&!O&&(!T||z))return null;var $={placement:U};return T&&($.TransitionProps={in:O,onEnter:function(){L(!1)},onExited:function(){L(!0),G()}}),a.createElement(s.a,{disablePortal:y,container:v},a.createElement("div",Object(r.a)({ref:q,role:"tooltip"},N,{style:Object(r.a)({position:"fixed",top:0,left:0},j)}),"function"===typeof m?m($):m))}));t.a=m},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(37)),u=n(16);function s(e,t){return parseInt(e[t],10)||0}var c="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,l={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},f=a.forwardRef((function(e,t){var n=e.onChange,f=e.rows,d=e.rowsMax,p=e.rowsMin,h=void 0===p?1:p,m=e.style,v=e.value,g=Object(i.a)(e,["onChange","rows","rowsMax","rowsMin","style","value"]),y=f||h,b=a.useRef(null!=v).current,x=a.useRef(null),w=Object(u.a)(t,x),O=a.useRef(null),k=a.useRef(0),E=a.useState({}),S=E[0],C=E[1],_=a.useCallback((function(){var t=x.current,n=window.getComputedStyle(t),r=O.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x";var i=n["box-sizing"],a=s(n,"padding-bottom")+s(n,"padding-top"),o=s(n,"border-bottom-width")+s(n,"border-top-width"),u=r.scrollHeight-a;r.value="x";var c=r.scrollHeight-a,l=u;y&&(l=Math.max(Number(y)*c,l)),d&&(l=Math.min(Number(d)*c,l));var f=(l=Math.max(l,c))+("border-box"===i?a+o:0),p=Math.abs(l-u)<=1;C((function(e){return k.current<20&&(f>0&&Math.abs((e.outerHeightStyle||0)-f)>1||e.overflow!==p)?(k.current+=1,{overflow:p,outerHeightStyle:f}):e}))}),[d,y,e.placeholder]);a.useEffect((function(){var e=Object(o.a)((function(){k.current=0,_()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[_]),c((function(){_()})),a.useEffect((function(){k.current=0}),[v]);return a.createElement(a.Fragment,null,a.createElement("textarea",Object(r.a)({value:v,onChange:function(e){k.current=0,b||_(),n&&n(e)},ref:w,rows:y,style:Object(r.a)({height:S.outerHeightStyle,overflow:S.overflow?"hidden":null},m)},g)),a.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:O,tabIndex:-1,style:Object(r.a)({},l,{},m)}))}));t.a=f},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(333),s=n(7),c=a.forwardRef((function(e,t){var n=e.disableUnderline,s=e.classes,c=e.fullWidth,l=void 0!==c&&c,f=e.inputComponent,d=void 0===f?"input":f,p=e.multiline,h=void 0!==p&&p,m=e.type,v=void 0===m?"text":m,g=Object(i.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return a.createElement(u.a,Object(r.a)({classes:Object(r.a)({},s,{root:Object(o.a)(s.root,!n&&s.underline),underline:null}),fullWidth:l,inputComponent:d,multiline:h,ref:t,type:v},g))}));c.muiName="Input",t.a=Object(s.a)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"dark"===e.palette.type?"0 0 0 100px #266798 inset":null,WebkitTextFillColor:"dark"===e.palette.type?"#fff":null,borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(c)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(46),n(8),n(20)),u=n(27),s=n(441),c=n(171),l=n(16);function f(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function d(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function p(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function h(e,t,n,r,i,a){for(var o=!1,u=i(e,t,!!t&&n);u;){if(u===e.firstChild){if(o)return;o=!0}var s=!r&&(u.disabled||"true"===u.getAttribute("aria-disabled"));if(u.hasAttribute("tabindex")&&p(u,a)&&!s)return void u.focus();u=i(e,u,n)}}var m="undefined"===typeof window?a.useEffect:a.useLayoutEffect,v=a.forwardRef((function(e,t){var n=e.actions,v=e.autoFocus,g=void 0!==v&&v,y=e.autoFocusItem,b=void 0!==y&&y,x=e.children,w=e.className,O=e.disabledItemsFocusable,k=void 0!==O&&O,E=e.disableListWrap,S=void 0!==E&&E,C=e.onKeyDown,_=e.variant,j=void 0===_?"selectedMenu":_,A=Object(i.a)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),T=a.useRef(null),N=a.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});m((function(){g&&T.current.focus()}),[g]),a.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!T.current.style.width;if(e.clientHeight<T.current.clientHeight&&n){var r="".concat(Object(c.a)(!0),"px");T.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,T.current.style.width="calc(100% + ".concat(r,")")}return T.current}}}),[]);var R=a.useCallback((function(e){T.current=o.findDOMNode(e)}),[]),D=Object(l.a)(R,t),I=-1;a.Children.forEach(x,(function(e,t){a.isValidElement(e)&&(e.props.disabled||("selectedMenu"===j&&e.props.selected||-1===I)&&(I=t))}));var M=a.Children.map(x,(function(e,t){if(t===I){var n={};return b&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===j&&(n.tabIndex=0),a.cloneElement(e,n)}return e}));return a.createElement(s.a,Object(r.a)({role:"menu",ref:D,className:w,onKeyDown:function(e){var t=T.current,n=e.key,r=Object(u.a)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),h(t,r,S,k,f);else if("ArrowUp"===n)e.preventDefault(),h(t,r,S,k,d);else if("Home"===n)e.preventDefault(),h(t,null,S,k,f);else if("End"===n)e.preventDefault(),h(t,null,S,k,d);else if(1===n.length){var i=N.current,a=n.toLowerCase(),o=performance.now();i.keys.length>0&&(o-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&a!==i.keys[0]&&(i.repeating=!1)),i.lastTime=o,i.keys.push(a);var s=r&&!i.repeating&&p(r,i);i.previousKeyMatched&&(s||h(t,r,!1,k,f,i))?e.preventDefault():i.previousKeyMatched=!1}C&&C(e)},tabIndex:g?0:-1},A),M)}));t.a=v},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(49),s=n(38),c=n(7),l=a.forwardRef((function(e,t){var n=e.children,c=e.classes,l=e.className,f=e.component,d=void 0===f?"p":f,p=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,Object(r.a)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),h=Object(s.a)(),m=Object(u.a)({props:e,muiFormControl:h,states:["variant","margin","disabled","error","filled","focused","required"]});return a.createElement(d,Object(i.a)({className:Object(o.a)(c.root,("filled"===m.variant||"outlined"===m.variant)&&c.contained,l,m.disabled&&c.disabled,m.error&&c.error,m.filled&&c.filled,m.focused&&c.focused,m.required&&c.required,"dense"===m.margin&&c.marginDense),ref:t},p)," "===n?a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)}));t.a=Object(c.a)((function(e){return{root:Object(i.a)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(l)},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(49),s=n(38),c=n(12),l=n(7),f=a.forwardRef((function(e,t){var n=e.children,l=e.classes,f=e.className,d=(e.color,e.component),p=void 0===d?"label":d,h=(e.disabled,e.error,e.filled,e.focused,e.required,Object(r.a)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),m=Object(s.a)(),v=Object(u.a)({props:e,muiFormControl:m,states:["color","required","focused","disabled","error","filled"]});return a.createElement(p,Object(i.a)({className:Object(o.a)(l.root,l["color".concat(Object(c.a)(v.color||"primary"))],f,v.disabled&&l.disabled,v.error&&l.error,v.filled&&l.filled,v.focused&&l.focused,v.required&&l.required),ref:t},h),n,v.required&&a.createElement("span",{className:Object(o.a)(l.asterisk,v.error&&l.error)},"\u2009","*"))}));t.a=Object(l.a)((function(e){return{root:Object(i.a)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(f)},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(5),i=n(3),a=n(0),o=n.n(a),u=n(32),s=n(466),c={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},l=n(184),f=n(467),d=-1e9;function p(){return d+=1}n(64);var h=n(331);function m(e){var t="function"===typeof e;return{create:function(n,r){var a;try{a=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return a;var o=n.overrides[r],u=Object(i.a)({},a);return Object.keys(o).forEach((function(e){u[e]=Object(h.a)(u[e],o[e])})),u},options:{}}}var v={};function g(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Object(s.a)({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function y(e,t){var n=e.state,r=e.theme,a=e.stylesOptions,o=e.stylesCreator,l=e.name;if(!a.disableGeneration){var f=c.get(a.sheetsManager,o,r);f||(f={refs:0,staticSheet:null,dynamicStyles:null},c.set(a.sheetsManager,o,r,f));var d=Object(i.a)({},o.options,{},a,{theme:r,flip:"boolean"===typeof a.flip?a.flip:"rtl"===r.direction});d.generateId=d.serverGenerateClassName||d.generateClassName;var p=a.sheetsRegistry;if(0===f.refs){var h;a.sheetsCache&&(h=c.get(a.sheetsCache,o,r));var m=o.create(r,l);h||((h=a.jss.createStyleSheet(m,Object(i.a)({link:!1},d))).attach(),a.sheetsCache&&c.set(a.sheetsCache,o,r,h)),p&&p.add(h),f.staticSheet=h,f.dynamicStyles=Object(u.e)(m)}if(f.dynamicStyles){var v=a.jss.createStyleSheet(f.dynamicStyles,Object(i.a)({link:!0},d));v.update(t),v.attach(),n.dynamicSheet=v,n.classes=Object(s.a)({baseClasses:f.staticSheet.classes,newClasses:v.classes}),p&&p.add(v)}else n.classes=f.staticSheet.classes;f.refs+=1}}function b(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function x(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var a=c.get(r.sheetsManager,i,n);a.refs-=1;var o=r.sheetsRegistry;0===a.refs&&(c.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function w(e,t){var n,r=o.a.useRef([]),i=o.a.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),o.a.useEffect((function(){return function(){n&&n()}}),[i])}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,a=t.classNamePrefix,u=t.Component,s=t.defaultTheme,c=void 0===s?v:s,d=Object(r.a)(t,["name","classNamePrefix","Component","defaultTheme"]),h=m(e),O=n||a||"makeStyles";h.options={index:p(),name:n,meta:O,classNamePrefix:O};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(l.a)()||c,r=Object(i.a)({},o.a.useContext(f.a),{},d),a=o.a.useRef(),s=o.a.useRef();w((function(){var i={name:n,state:{},stylesCreator:h,stylesOptions:r,theme:t};return y(i,e),s.current=!1,a.current=i,function(){x(i)}}),[t,h]),o.a.useEffect((function(){s.current&&b(a.current,e),s.current=!0}));var p=g(a.current,e.classes,u);return p};return k}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(333),s=n(15),c=n(7),l=n(19),f=n(12),d=a.forwardRef((function(e,t){e.children;var n=e.classes,u=e.className,c=e.label,d=e.labelWidth,p=e.notched,h=e.style,m=Object(i.a)(e,["children","classes","className","label","labelWidth","notched","style"]),v="rtl"===Object(l.a)().direction?"right":"left";if(void 0!==c)return a.createElement("fieldset",Object(r.a)({"aria-hidden":!0,className:Object(o.a)(n.root,u),ref:t,style:h},m),a.createElement("legend",{className:Object(o.a)(n.legendLabelled,p&&n.legendNotched)},c?a.createElement("span",null,c):a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var g=d>0?.75*d+8:.01;return a.createElement("fieldset",Object(r.a)({"aria-hidden":!0,style:Object(r.a)(Object(s.a)({},"padding".concat(Object(f.a)(v)),8),h),className:Object(o.a)(n.root,u),ref:t},m),a.createElement("legend",{className:n.legend,style:{width:p?g:.01}},a.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),p=Object(c.a)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:0,paddingLeft:8,pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(d),h=a.forwardRef((function(e,t){var n=e.classes,s=e.fullWidth,c=void 0!==s&&s,l=e.inputComponent,f=void 0===l?"input":l,d=e.label,h=e.labelWidth,m=void 0===h?0:h,v=e.multiline,g=void 0!==v&&v,y=e.notched,b=e.type,x=void 0===b?"text":b,w=Object(i.a)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return a.createElement(u.a,Object(r.a)({renderSuffix:function(e){return a.createElement(p,{className:n.notchedOutline,label:d,labelWidth:m,notched:"undefined"!==typeof y?y:Boolean(e.startAdornment||e.filled||e.focused)})},classes:Object(r.a)({},n,{root:Object(o.a)(n.root,n.underline),notchedOutline:null}),fullWidth:c,inputComponent:f,multiline:g,ref:t,type:x},w))}));h.muiName="Input";t.a=Object(c.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"dark"===e.palette.type?"0 0 0 100px #266798 inset":null,WebkitTextFillColor:"dark"===e.palette.type?"#fff":null,borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(h)},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var i=Object(r.a)({},t);return Object.keys(n).forEach((function(e){n[e]&&(i[e]="".concat(t[e]," ").concat(n[e]))})),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var r,i=n(3),a=n(5),o=n(0),u=n.n(o),s=(n(8),n(440)),c=n(32),l=n(334),f=Object(c.c)(Object(l.a)()),d={disableGeneration:!1,generateClassName:Object(s.a)(),jss:f,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},p=u.a.createContext(d);function h(e){var t=e.children,n=e.injectFirst,o=void 0!==n&&n,s=e.disableGeneration,f=void 0!==s&&s,d=Object(a.a)(e,["children","injectFirst","disableGeneration"]),h=u.a.useContext(p),m=Object(i.a)({},h,{disableGeneration:f},d);if(!m.jss.options.insertionPoint&&o&&"undefined"!==typeof window){if(!r){var v=document.head;r=document.createComment("mui-inject-first"),v.insertBefore(r,v.firstChild)}m.jss=Object(c.c)({plugins:Object(l.a)().plugins,insertionPoint:r})}return u.a.createElement(p.Provider,{value:m},t)}},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(13),c=a.forwardRef((function(e,t){var n=e.absolute,u=void 0!==n&&n,s=e.classes,c=e.className,l=e.component,f=void 0===l?"hr":l,d=e.flexItem,p=void 0!==d&&d,h=e.light,m=void 0!==h&&h,v=e.orientation,g=void 0===v?"horizontal":v,y=e.role,b=void 0===y?"hr"!==f?"separator":void 0:y,x=e.variant,w=void 0===x?"fullWidth":x,O=Object(i.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return a.createElement(f,Object(r.a)({className:Object(o.a)(s.root,c,"fullWidth"!==w&&s[w],u&&s.absolute,p&&s.flexItem,m&&s.light,"vertical"===g&&s.vertical),role:b,ref:t},O))}));t.a=Object(u.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(s.d)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(c)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=(n(8),n(4)),u=n(7),s=n(12),c=a.forwardRef((function(e,t){var n=e.classes,u=e.className,c=e.color,l=void 0===c?"default":c,f=e.component,d=void 0===f?"li":f,p=e.disableGutters,h=void 0!==p&&p,m=e.disableSticky,v=void 0!==m&&m,g=e.inset,y=void 0!==g&&g,b=Object(i.a)(e,["classes","className","color","component","disableGutters","disableSticky","inset"]);return a.createElement(d,Object(r.a)({className:Object(o.a)(n.root,u,"default"!==l&&n["color".concat(Object(s.a)(l))],y&&n.inset,!v&&n.sticky,!h&&n.gutters),ref:t},b))}));t.a=Object(u.a)((function(e){return{root:{boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},colorPrimary:{color:e.palette.primary.main},colorInherit:{color:"inherit"},gutters:{paddingLeft:16,paddingRight:16},inset:{paddingLeft:72},sticky:{position:"sticky",top:0,zIndex:1,backgroundColor:"inherit"}}}),{name:"MuiListSubheader"})(c)},function(e,t,n){"use strict";var r=n(3),i=n(0),a=(n(8),n(7)),o={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},u=function(e){return Object(r.a)({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};t.a=Object(a.a)((function(e){return{"@global":{html:o,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:Object(r.a)({margin:0},u(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,n=void 0===t?null:t;return e.classes,i.createElement(i.Fragment,null,n)}))},function(e,t,n){"use strict";var r=n(3),i=n(0),a=n.n(i),o=(n(8),n(162)),u=n(184),s=n(165);t.a=function(e){var t=e.children,n=e.theme,i=Object(u.a)(),c=a.a.useMemo((function(){var e=null===i?n:function(e,t){return"function"===typeof t?t(e):Object(r.a)({},e,{},t)}(i,n);return null!=e&&(e[s.a]=null!==i),e}),[n,i]);return a.a.createElement(o.a.Provider,{value:c},t)}},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(7),s=[0,1,2,3,4,5,6,7,8,9,10],c=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var f=a.forwardRef((function(e,t){var n=e.alignContent,u=void 0===n?"stretch":n,s=e.alignItems,c=void 0===s?"stretch":s,l=e.classes,f=e.className,d=e.component,p=void 0===d?"div":d,h=e.container,m=void 0!==h&&h,v=e.direction,g=void 0===v?"row":v,y=e.item,b=void 0!==y&&y,x=e.justify,w=void 0===x?"flex-start":x,O=e.lg,k=void 0!==O&&O,E=e.md,S=void 0!==E&&E,C=e.sm,_=void 0!==C&&C,j=e.spacing,A=void 0===j?0:j,T=e.wrap,N=void 0===T?"wrap":T,R=e.xl,D=void 0!==R&&R,I=e.xs,M=void 0!==I&&I,F=e.zeroMinWidth,P=void 0!==F&&F,z=Object(r.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),L=Object(o.a)(l.root,f,m&&[l.container,0!==A&&l["spacing-xs-".concat(String(A))]],b&&l.item,P&&l.zeroMinWidth,"row"!==g&&l["direction-xs-".concat(String(g))],"wrap"!==N&&l["wrap-xs-".concat(String(N))],"stretch"!==c&&l["align-items-xs-".concat(String(c))],"stretch"!==u&&l["align-content-xs-".concat(String(u))],"flex-start"!==w&&l["justify-xs-".concat(String(w))],!1!==M&&l["grid-xs-".concat(String(M))],!1!==_&&l["grid-sm-".concat(String(_))],!1!==S&&l["grid-md-".concat(String(S))],!1!==k&&l["grid-lg-".concat(String(k))],!1!==D&&l["grid-xl-".concat(String(D))]);return a.createElement(p,Object(i.a)({className:L,ref:t},z))})),d=Object(u.a)((function(e){return Object(i.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return s.forEach((function(r){var i=e.spacing(r);0!==i&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(l(i,2)),width:"calc(100% + ".concat(l(i),")"),"& > $item":{padding:l(i,2)}})})),n}(e,"xs"),{},e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};c.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var i="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:i,flexGrow:0,maxWidth:i}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Object(i.a)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(f);t.a=d},function(e,t,n){"use strict";var r=n(5),i=n(3),a=n(0),o=(n(8),n(4)),u=n(13),s=n(7),c=n(170),l=n(22),f=Object(l.a)(a.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),d=Object(l.a)(a.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),p=Object(l.a)(a.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),h=Object(l.a)(a.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),m=Object(l.a)(a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),v=n(216),g=n(12),y={success:a.createElement(f,{fontSize:"inherit"}),warning:a.createElement(d,{fontSize:"inherit"}),error:a.createElement(p,{fontSize:"inherit"}),info:a.createElement(h,{fontSize:"inherit"})},b=a.createElement(m,{fontSize:"small"}),x=a.forwardRef((function(e,t){var n=e.action,u=e.children,s=e.classes,l=e.className,f=e.closeText,d=void 0===f?"Close":f,p=e.color,h=e.icon,m=e.iconMapping,x=void 0===m?y:m,w=e.onClose,O=e.role,k=void 0===O?"alert":O,E=e.severity,S=void 0===E?"success":E,C=e.variant,_=void 0===C?"standard":C,j=Object(r.a)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return a.createElement(c.a,Object(i.a)({role:k,square:!0,elevation:0,className:Object(o.a)(s.root,s["".concat(_).concat(Object(g.a)(p||S))],l),ref:t},j),!1!==h?a.createElement("div",{className:s.icon},h||x[S]||y[S]):null,a.createElement("div",{className:s.message},u),null!=n?a.createElement("div",{className:s.action},n):null,null==n&&w?a.createElement("div",{className:s.action},a.createElement(v.a,{size:"small","aria-label":d,title:d,color:"inherit",onClick:w},b)):null)}));t.a=Object(s.a)((function(e){var t="light"===e.palette.type?u.a:u.i,n="light"===e.palette.type?u.i:u.a;return{root:Object(i.a)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:n(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:n(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:n(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:n(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiAlert"})(x)},function(e,t,n){"use strict";var r=n(3),i=n(5),a=n(0),o=n(8),u=n.n(o),s=n(142),c=n(19);function l(e){var t=e.children,n=e.only,r=e.width,i=Object(c.a)(),a=!0;if(n)if(Array.isArray(n))for(var o=0;o<n.length;o+=1){if(r===n[o]){a=!1;break}}else n&&r===n&&(a=!1);if(a)for(var u=0;u<i.breakpoints.keys.length;u+=1){var l=i.breakpoints.keys[u],f=e["".concat(l,"Up")],d=e["".concat(l,"Down")];if(f&&Object(s.c)(l,r)||d&&Object(s.b)(l,r)){a=!1;break}}return a?t:null}l.propTypes={children:u.a.node,className:u.a.string,implementation:u.a.oneOf(["js","css"]),initialWidth:u.a.oneOf(["xs","sm","md","lg","xl"]),lgDown:u.a.bool,lgUp:u.a.bool,mdDown:u.a.bool,mdUp:u.a.bool,only:u.a.oneOfType([u.a.oneOf(["xs","sm","md","lg","xl"]),u.a.arrayOf(u.a.oneOf(["xs","sm","md","lg","xl"]))]),smDown:u.a.bool,smUp:u.a.bool,width:u.a.string.isRequired,xlDown:u.a.bool,xlUp:u.a.bool,xsDown:u.a.bool,xsUp:u.a.bool};var f=Object(s.a)()(l),d=n(15),p=n(12),h=n(7);var m=Object(h.a)((function(e){var t={display:"none"};return e.breakpoints.keys.reduce((function(n,r){return n["only".concat(Object(p.a)(r))]=Object(d.a)({},e.breakpoints.only(r),t),n["".concat(r,"Up")]=Object(d.a)({},e.breakpoints.up(r),t),n["".concat(r,"Down")]=Object(d.a)({},e.breakpoints.down(r),t),n}),{})}),{name:"PrivateHiddenCss"})((function(e){var t=e.children,n=e.classes,r=e.className,o=e.only,u=(Object(i.a)(e,["children","classes","className","only"]),Object(c.a)()),s=[];r&&s.push(r);for(var l=0;l<u.breakpoints.keys.length;l+=1){var f=u.breakpoints.keys[l],d=e["".concat(f,"Up")],h=e["".concat(f,"Down")];d&&s.push(n["".concat(f,"Up")]),h&&s.push(n["".concat(f,"Down")])}return o&&(Array.isArray(o)?o:[o]).forEach((function(e){s.push(n["only".concat(Object(p.a)(e))])})),a.createElement("div",{className:s.join(" ")},t)}));t.a=function(e){var t=e.implementation,n=void 0===t?"js":t,o=e.lgDown,u=void 0!==o&&o,s=e.lgUp,c=void 0!==s&&s,l=e.mdDown,d=void 0!==l&&l,p=e.mdUp,h=void 0!==p&&p,v=e.smDown,g=void 0!==v&&v,y=e.smUp,b=void 0!==y&&y,x=e.xlDown,w=void 0!==x&&x,O=e.xlUp,k=void 0!==O&&O,E=e.xsDown,S=void 0!==E&&E,C=e.xsUp,_=void 0!==C&&C,j=Object(i.a)(e,["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"]);return"js"===n?a.createElement(f,Object(r.a)({lgDown:u,lgUp:c,mdDown:d,mdUp:h,smDown:g,smUp:b,xlDown:w,xlUp:k,xsDown:S,xsUp:_},j)):a.createElement(m,Object(r.a)({lgDown:u,lgUp:c,mdDown:d,mdUp:h,smDown:g,smUp:b,xlDown:w,xlUp:k,xsDown:S,xsUp:_},j))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(41),i=n(168),a=n(72);var o={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},s={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!s[e])return[e];e=s[e]}var t=e.split(""),n=Object(r.a)(t,2),i=n[0],a=n[1],c=o[i],l=u[a]||"";return Array.isArray(l)?l.map((function(e){return c+e})):[c+l]})),l=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function f(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function d(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function p(e){var t=f(e.theme);return Object.keys(e).map((function(n){if(-1===l.indexOf(n))return null;var r=d(c(n),t),a=e[n];return Object(i.a)(e,a,r)})).reduce(a.a,{})}p.propTypes={},p.filterProps=l;t.b=p}]]);
//# sourceMappingURL=2.7cc9a08b.chunk.js.map